var iU=Object.defineProperty;var aU=(i,e,t)=>e in i?iU(i,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):i[e]=t;var Ki=(i,e,t)=>aU(i,typeof e!="symbol"?e+"":e,t);function rU(i,e){for(var t=0;t<e.length;t++){const n=e[t];if(typeof n!="string"&&!Array.isArray(n)){for(const a in n)if(a!=="default"&&!(a in i)){const s=Object.getOwnPropertyDescriptor(n,a);s&&Object.defineProperty(i,a,s.get?s:{enumerable:!0,get:()=>n[a]})}}}return Object.freeze(Object.defineProperty(i,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))n(a);new MutationObserver(a=>{for(const s of a)if(s.type==="childList")for(const l of s.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&n(l)}).observe(document,{childList:!0,subtree:!0});function t(a){const s={};return a.integrity&&(s.integrity=a.integrity),a.referrerPolicy&&(s.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?s.credentials="include":a.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function n(a){if(a.ep)return;a.ep=!0;const s=t(a);fetch(a.href,s)}})();function xu(i){return i&&i.__esModule&&Object.prototype.hasOwnProperty.call(i,"default")?i.default:i}function Jg(i){if(Object.prototype.hasOwnProperty.call(i,"__esModule"))return i;var e=i.default;if(typeof e=="function"){var t=function n(){return this instanceof n?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};t.prototype=e.prototype}else t={};return Object.defineProperty(t,"__esModule",{value:!0}),Object.keys(i).forEach(function(n){var a=Object.getOwnPropertyDescriptor(i,n);Object.defineProperty(t,n,a.get?a:{enumerable:!0,get:function(){return i[n]}})}),t}var Ox={exports:{}},Xm={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Dw;function sU(){if(Dw)return Xm;Dw=1;var i=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function t(n,a,s){var l=null;if(s!==void 0&&(l=""+s),a.key!==void 0&&(l=""+a.key),"key"in a){s={};for(var u in a)u!=="key"&&(s[u]=a[u])}else s=a;return a=s.ref,{$$typeof:i,type:n,key:l,ref:a!==void 0?a:null,props:s}}return Xm.Fragment=e,Xm.jsx=t,Xm.jsxs=t,Xm}var Uw;function oU(){return Uw||(Uw=1,Ox.exports=sU()),Ox.exports}var q=oU(),Dx={exports:{}},vn={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Lw;function lU(){if(Lw)return vn;Lw=1;var i=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),n=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),s=Symbol.for("react.consumer"),l=Symbol.for("react.context"),u=Symbol.for("react.forward_ref"),d=Symbol.for("react.suspense"),p=Symbol.for("react.memo"),g=Symbol.for("react.lazy"),y=Symbol.for("react.activity"),_=Symbol.iterator;function b(J){return J===null||typeof J!="object"?null:(J=_&&J[_]||J["@@iterator"],typeof J=="function"?J:null)}var x={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},T=Object.assign,w={};function S(J,ce,Se){this.props=J,this.context=ce,this.refs=w,this.updater=Se||x}S.prototype.isReactComponent={},S.prototype.setState=function(J,ce){if(typeof J!="object"&&typeof J!="function"&&J!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,J,ce,"setState")},S.prototype.forceUpdate=function(J){this.updater.enqueueForceUpdate(this,J,"forceUpdate")};function C(){}C.prototype=S.prototype;function N(J,ce,Se){this.props=J,this.context=ce,this.refs=w,this.updater=Se||x}var O=N.prototype=new C;O.constructor=N,T(O,S.prototype),O.isPureReactComponent=!0;var P=Array.isArray;function U(){}var z={H:null,A:null,T:null,S:null},H=Object.prototype.hasOwnProperty;function D(J,ce,Se){var Le=Se.ref;return{$$typeof:i,type:J,key:ce,ref:Le!==void 0?Le:null,props:Se}}function L(J,ce){return D(J.type,ce,J.props)}function j(J){return typeof J=="object"&&J!==null&&J.$$typeof===i}function W(J){var ce={"=":"=0",":":"=2"};return"$"+J.replace(/[=:]/g,function(Se){return ce[Se]})}var X=/\/+/g;function K(J,ce){return typeof J=="object"&&J!==null&&J.key!=null?W(""+J.key):ce.toString(36)}function le(J){switch(J.status){case"fulfilled":return J.value;case"rejected":throw J.reason;default:switch(typeof J.status=="string"?J.then(U,U):(J.status="pending",J.then(function(ce){J.status==="pending"&&(J.status="fulfilled",J.value=ce)},function(ce){J.status==="pending"&&(J.status="rejected",J.reason=ce)})),J.status){case"fulfilled":return J.value;case"rejected":throw J.reason}}throw J}function k(J,ce,Se,Le,nt){var ve=typeof J;(ve==="undefined"||ve==="boolean")&&(J=null);var Ce=!1;if(J===null)Ce=!0;else switch(ve){case"bigint":case"string":case"number":Ce=!0;break;case"object":switch(J.$$typeof){case i:case e:Ce=!0;break;case g:return Ce=J._init,k(Ce(J._payload),ce,Se,Le,nt)}}if(Ce)return nt=nt(J),Ce=Le===""?"."+K(J,0):Le,P(nt)?(Se="",Ce!=null&&(Se=Ce.replace(X,"$&/")+"/"),k(nt,ce,Se,"",function(St){return St})):nt!=null&&(j(nt)&&(nt=L(nt,Se+(nt.key==null||J&&J.key===nt.key?"":(""+nt.key).replace(X,"$&/")+"/")+Ce)),ce.push(nt)),1;Ce=0;var Je=Le===""?".":Le+":";if(P(J))for(var yt=0;yt<J.length;yt++)Le=J[yt],ve=Je+K(Le,yt),Ce+=k(Le,ce,Se,ve,nt);else if(yt=b(J),typeof yt=="function")for(J=yt.call(J),yt=0;!(Le=J.next()).done;)Le=Le.value,ve=Je+K(Le,yt++),Ce+=k(Le,ce,Se,ve,nt);else if(ve==="object"){if(typeof J.then=="function")return k(le(J),ce,Se,Le,nt);throw ce=String(J),Error("Objects are not valid as a React child (found: "+(ce==="[object Object]"?"object with keys {"+Object.keys(J).join(", ")+"}":ce)+"). If you meant to render a collection of children, use an array instead.")}return Ce}function Z(J,ce,Se){if(J==null)return J;var Le=[],nt=0;return k(J,Le,"","",function(ve){return ce.call(Se,ve,nt++)}),Le}function ne(J){if(J._status===-1){var ce=J._result;ce=ce(),ce.then(function(Se){(J._status===0||J._status===-1)&&(J._status=1,J._result=Se)},function(Se){(J._status===0||J._status===-1)&&(J._status=2,J._result=Se)}),J._status===-1&&(J._status=0,J._result=ce)}if(J._status===1)return J._result.default;throw J._result}var pe=typeof reportError=="function"?reportError:function(J){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var ce=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof J=="object"&&J!==null&&typeof J.message=="string"?String(J.message):String(J),error:J});if(!window.dispatchEvent(ce))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",J);return}console.error(J)},ge={map:Z,forEach:function(J,ce,Se){Z(J,function(){ce.apply(this,arguments)},Se)},count:function(J){var ce=0;return Z(J,function(){ce++}),ce},toArray:function(J){return Z(J,function(ce){return ce})||[]},only:function(J){if(!j(J))throw Error("React.Children.only expected to receive a single React element child.");return J}};return vn.Activity=y,vn.Children=ge,vn.Component=S,vn.Fragment=t,vn.Profiler=a,vn.PureComponent=N,vn.StrictMode=n,vn.Suspense=d,vn.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=z,vn.__COMPILER_RUNTIME={__proto__:null,c:function(J){return z.H.useMemoCache(J)}},vn.cache=function(J){return function(){return J.apply(null,arguments)}},vn.cacheSignal=function(){return null},vn.cloneElement=function(J,ce,Se){if(J==null)throw Error("The argument must be a React element, but you passed "+J+".");var Le=T({},J.props),nt=J.key;if(ce!=null)for(ve in ce.key!==void 0&&(nt=""+ce.key),ce)!H.call(ce,ve)||ve==="key"||ve==="__self"||ve==="__source"||ve==="ref"&&ce.ref===void 0||(Le[ve]=ce[ve]);var ve=arguments.length-2;if(ve===1)Le.children=Se;else if(1<ve){for(var Ce=Array(ve),Je=0;Je<ve;Je++)Ce[Je]=arguments[Je+2];Le.children=Ce}return D(J.type,nt,Le)},vn.createContext=function(J){return J={$$typeof:l,_currentValue:J,_currentValue2:J,_threadCount:0,Provider:null,Consumer:null},J.Provider=J,J.Consumer={$$typeof:s,_context:J},J},vn.createElement=function(J,ce,Se){var Le,nt={},ve=null;if(ce!=null)for(Le in ce.key!==void 0&&(ve=""+ce.key),ce)H.call(ce,Le)&&Le!=="key"&&Le!=="__self"&&Le!=="__source"&&(nt[Le]=ce[Le]);var Ce=arguments.length-2;if(Ce===1)nt.children=Se;else if(1<Ce){for(var Je=Array(Ce),yt=0;yt<Ce;yt++)Je[yt]=arguments[yt+2];nt.children=Je}if(J&&J.defaultProps)for(Le in Ce=J.defaultProps,Ce)nt[Le]===void 0&&(nt[Le]=Ce[Le]);return D(J,ve,nt)},vn.createRef=function(){return{current:null}},vn.forwardRef=function(J){return{$$typeof:u,render:J}},vn.isValidElement=j,vn.lazy=function(J){return{$$typeof:g,_payload:{_status:-1,_result:J},_init:ne}},vn.memo=function(J,ce){return{$$typeof:p,type:J,compare:ce===void 0?null:ce}},vn.startTransition=function(J){var ce=z.T,Se={};z.T=Se;try{var Le=J(),nt=z.S;nt!==null&&nt(Se,Le),typeof Le=="object"&&Le!==null&&typeof Le.then=="function"&&Le.then(U,pe)}catch(ve){pe(ve)}finally{ce!==null&&Se.types!==null&&(ce.types=Se.types),z.T=ce}},vn.unstable_useCacheRefresh=function(){return z.H.useCacheRefresh()},vn.use=function(J){return z.H.use(J)},vn.useActionState=function(J,ce,Se){return z.H.useActionState(J,ce,Se)},vn.useCallback=function(J,ce){return z.H.useCallback(J,ce)},vn.useContext=function(J){return z.H.useContext(J)},vn.useDebugValue=function(){},vn.useDeferredValue=function(J,ce){return z.H.useDeferredValue(J,ce)},vn.useEffect=function(J,ce){return z.H.useEffect(J,ce)},vn.useEffectEvent=function(J){return z.H.useEffectEvent(J)},vn.useId=function(){return z.H.useId()},vn.useImperativeHandle=function(J,ce,Se){return z.H.useImperativeHandle(J,ce,Se)},vn.useInsertionEffect=function(J,ce){return z.H.useInsertionEffect(J,ce)},vn.useLayoutEffect=function(J,ce){return z.H.useLayoutEffect(J,ce)},vn.useMemo=function(J,ce){return z.H.useMemo(J,ce)},vn.useOptimistic=function(J,ce){return z.H.useOptimistic(J,ce)},vn.useReducer=function(J,ce,Se){return z.H.useReducer(J,ce,Se)},vn.useRef=function(J){return z.H.useRef(J)},vn.useState=function(J){return z.H.useState(J)},vn.useSyncExternalStore=function(J,ce,Se){return z.H.useSyncExternalStore(J,ce,Se)},vn.useTransition=function(){return z.H.useTransition()},vn.version="19.2.3",vn}var Iw;function mp(){return Iw||(Iw=1,Dx.exports=lU()),Dx.exports}var re=mp();const EE=xu(re);var Ux={exports:{}},Wm={},Lx={exports:{}},Ix={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Pw;function cU(){return Pw||(Pw=1,(function(i){function e(k,Z){var ne=k.length;k.push(Z);e:for(;0<ne;){var pe=ne-1>>>1,ge=k[pe];if(0<a(ge,Z))k[pe]=Z,k[ne]=ge,ne=pe;else break e}}function t(k){return k.length===0?null:k[0]}function n(k){if(k.length===0)return null;var Z=k[0],ne=k.pop();if(ne!==Z){k[0]=ne;e:for(var pe=0,ge=k.length,J=ge>>>1;pe<J;){var ce=2*(pe+1)-1,Se=k[ce],Le=ce+1,nt=k[Le];if(0>a(Se,ne))Le<ge&&0>a(nt,Se)?(k[pe]=nt,k[Le]=ne,pe=Le):(k[pe]=Se,k[ce]=ne,pe=ce);else if(Le<ge&&0>a(nt,ne))k[pe]=nt,k[Le]=ne,pe=Le;else break e}}return Z}function a(k,Z){var ne=k.sortIndex-Z.sortIndex;return ne!==0?ne:k.id-Z.id}if(i.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var s=performance;i.unstable_now=function(){return s.now()}}else{var l=Date,u=l.now();i.unstable_now=function(){return l.now()-u}}var d=[],p=[],g=1,y=null,_=3,b=!1,x=!1,T=!1,w=!1,S=typeof setTimeout=="function"?setTimeout:null,C=typeof clearTimeout=="function"?clearTimeout:null,N=typeof setImmediate<"u"?setImmediate:null;function O(k){for(var Z=t(p);Z!==null;){if(Z.callback===null)n(p);else if(Z.startTime<=k)n(p),Z.sortIndex=Z.expirationTime,e(d,Z);else break;Z=t(p)}}function P(k){if(T=!1,O(k),!x)if(t(d)!==null)x=!0,U||(U=!0,W());else{var Z=t(p);Z!==null&&le(P,Z.startTime-k)}}var U=!1,z=-1,H=5,D=-1;function L(){return w?!0:!(i.unstable_now()-D<H)}function j(){if(w=!1,U){var k=i.unstable_now();D=k;var Z=!0;try{e:{x=!1,T&&(T=!1,C(z),z=-1),b=!0;var ne=_;try{t:{for(O(k),y=t(d);y!==null&&!(y.expirationTime>k&&L());){var pe=y.callback;if(typeof pe=="function"){y.callback=null,_=y.priorityLevel;var ge=pe(y.expirationTime<=k);if(k=i.unstable_now(),typeof ge=="function"){y.callback=ge,O(k),Z=!0;break t}y===t(d)&&n(d),O(k)}else n(d);y=t(d)}if(y!==null)Z=!0;else{var J=t(p);J!==null&&le(P,J.startTime-k),Z=!1}}break e}finally{y=null,_=ne,b=!1}Z=void 0}}finally{Z?W():U=!1}}}var W;if(typeof N=="function")W=function(){N(j)};else if(typeof MessageChannel<"u"){var X=new MessageChannel,K=X.port2;X.port1.onmessage=j,W=function(){K.postMessage(null)}}else W=function(){S(j,0)};function le(k,Z){z=S(function(){k(i.unstable_now())},Z)}i.unstable_IdlePriority=5,i.unstable_ImmediatePriority=1,i.unstable_LowPriority=4,i.unstable_NormalPriority=3,i.unstable_Profiling=null,i.unstable_UserBlockingPriority=2,i.unstable_cancelCallback=function(k){k.callback=null},i.unstable_forceFrameRate=function(k){0>k||125<k?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):H=0<k?Math.floor(1e3/k):5},i.unstable_getCurrentPriorityLevel=function(){return _},i.unstable_next=function(k){switch(_){case 1:case 2:case 3:var Z=3;break;default:Z=_}var ne=_;_=Z;try{return k()}finally{_=ne}},i.unstable_requestPaint=function(){w=!0},i.unstable_runWithPriority=function(k,Z){switch(k){case 1:case 2:case 3:case 4:case 5:break;default:k=3}var ne=_;_=k;try{return Z()}finally{_=ne}},i.unstable_scheduleCallback=function(k,Z,ne){var pe=i.unstable_now();switch(typeof ne=="object"&&ne!==null?(ne=ne.delay,ne=typeof ne=="number"&&0<ne?pe+ne:pe):ne=pe,k){case 1:var ge=-1;break;case 2:ge=250;break;case 5:ge=1073741823;break;case 4:ge=1e4;break;default:ge=5e3}return ge=ne+ge,k={id:g++,callback:Z,priorityLevel:k,startTime:ne,expirationTime:ge,sortIndex:-1},ne>pe?(k.sortIndex=ne,e(p,k),t(d)===null&&k===t(p)&&(T?(C(z),z=-1):T=!0,le(P,ne-pe))):(k.sortIndex=ge,e(d,k),x||b||(x=!0,U||(U=!0,W()))),k},i.unstable_shouldYield=L,i.unstable_wrapCallback=function(k){var Z=_;return function(){var ne=_;_=Z;try{return k.apply(this,arguments)}finally{_=ne}}}})(Ix)),Ix}var zw;function uU(){return zw||(zw=1,Lx.exports=cU()),Lx.exports}var Px={exports:{}},fr={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Bw;function hU(){if(Bw)return fr;Bw=1;var i=mp();function e(d){var p="https://react.dev/errors/"+d;if(1<arguments.length){p+="?args[]="+encodeURIComponent(arguments[1]);for(var g=2;g<arguments.length;g++)p+="&args[]="+encodeURIComponent(arguments[g])}return"Minified React error #"+d+"; visit "+p+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function t(){}var n={d:{f:t,r:function(){throw Error(e(522))},D:t,C:t,L:t,m:t,X:t,S:t,M:t},p:0,findDOMNode:null},a=Symbol.for("react.portal");function s(d,p,g){var y=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:a,key:y==null?null:""+y,children:d,containerInfo:p,implementation:g}}var l=i.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function u(d,p){if(d==="font")return"";if(typeof p=="string")return p==="use-credentials"?p:""}return fr.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=n,fr.createPortal=function(d,p){var g=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!p||p.nodeType!==1&&p.nodeType!==9&&p.nodeType!==11)throw Error(e(299));return s(d,p,null,g)},fr.flushSync=function(d){var p=l.T,g=n.p;try{if(l.T=null,n.p=2,d)return d()}finally{l.T=p,n.p=g,n.d.f()}},fr.preconnect=function(d,p){typeof d=="string"&&(p?(p=p.crossOrigin,p=typeof p=="string"?p==="use-credentials"?p:"":void 0):p=null,n.d.C(d,p))},fr.prefetchDNS=function(d){typeof d=="string"&&n.d.D(d)},fr.preinit=function(d,p){if(typeof d=="string"&&p&&typeof p.as=="string"){var g=p.as,y=u(g,p.crossOrigin),_=typeof p.integrity=="string"?p.integrity:void 0,b=typeof p.fetchPriority=="string"?p.fetchPriority:void 0;g==="style"?n.d.S(d,typeof p.precedence=="string"?p.precedence:void 0,{crossOrigin:y,integrity:_,fetchPriority:b}):g==="script"&&n.d.X(d,{crossOrigin:y,integrity:_,fetchPriority:b,nonce:typeof p.nonce=="string"?p.nonce:void 0})}},fr.preinitModule=function(d,p){if(typeof d=="string")if(typeof p=="object"&&p!==null){if(p.as==null||p.as==="script"){var g=u(p.as,p.crossOrigin);n.d.M(d,{crossOrigin:g,integrity:typeof p.integrity=="string"?p.integrity:void 0,nonce:typeof p.nonce=="string"?p.nonce:void 0})}}else p==null&&n.d.M(d)},fr.preload=function(d,p){if(typeof d=="string"&&typeof p=="object"&&p!==null&&typeof p.as=="string"){var g=p.as,y=u(g,p.crossOrigin);n.d.L(d,g,{crossOrigin:y,integrity:typeof p.integrity=="string"?p.integrity:void 0,nonce:typeof p.nonce=="string"?p.nonce:void 0,type:typeof p.type=="string"?p.type:void 0,fetchPriority:typeof p.fetchPriority=="string"?p.fetchPriority:void 0,referrerPolicy:typeof p.referrerPolicy=="string"?p.referrerPolicy:void 0,imageSrcSet:typeof p.imageSrcSet=="string"?p.imageSrcSet:void 0,imageSizes:typeof p.imageSizes=="string"?p.imageSizes:void 0,media:typeof p.media=="string"?p.media:void 0})}},fr.preloadModule=function(d,p){if(typeof d=="string")if(p){var g=u(p.as,p.crossOrigin);n.d.m(d,{as:typeof p.as=="string"&&p.as!=="script"?p.as:void 0,crossOrigin:g,integrity:typeof p.integrity=="string"?p.integrity:void 0})}else n.d.m(d)},fr.requestFormReset=function(d){n.d.r(d)},fr.unstable_batchedUpdates=function(d,p){return d(p)},fr.useFormState=function(d,p,g){return l.H.useFormState(d,p,g)},fr.useFormStatus=function(){return l.H.useHostTransitionStatus()},fr.version="19.2.3",fr}var Fw;function cR(){if(Fw)return Px.exports;Fw=1;function i(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(i)}catch(e){console.error(e)}}return i(),Px.exports=hU(),Px.exports}var kw;function fU(){if(kw)return Wm;kw=1;/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var i=uU(),e=mp(),t=cR();function n(r){var o="https://react.dev/errors/"+r;if(1<arguments.length){o+="?args[]="+encodeURIComponent(arguments[1]);for(var f=2;f<arguments.length;f++)o+="&args[]="+encodeURIComponent(arguments[f])}return"Minified React error #"+r+"; visit "+o+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function a(r){return!(!r||r.nodeType!==1&&r.nodeType!==9&&r.nodeType!==11)}function s(r){var o=r,f=r;if(r.alternate)for(;o.return;)o=o.return;else{r=o;do o=r,(o.flags&4098)!==0&&(f=o.return),r=o.return;while(r)}return o.tag===3?f:null}function l(r){if(r.tag===13){var o=r.memoizedState;if(o===null&&(r=r.alternate,r!==null&&(o=r.memoizedState)),o!==null)return o.dehydrated}return null}function u(r){if(r.tag===31){var o=r.memoizedState;if(o===null&&(r=r.alternate,r!==null&&(o=r.memoizedState)),o!==null)return o.dehydrated}return null}function d(r){if(s(r)!==r)throw Error(n(188))}function p(r){var o=r.alternate;if(!o){if(o=s(r),o===null)throw Error(n(188));return o!==r?null:r}for(var f=r,m=o;;){var E=f.return;if(E===null)break;var A=E.alternate;if(A===null){if(m=E.return,m!==null){f=m;continue}break}if(E.child===A.child){for(A=E.child;A;){if(A===f)return d(E),r;if(A===m)return d(E),o;A=A.sibling}throw Error(n(188))}if(f.return!==m.return)f=E,m=A;else{for(var F=!1,Y=E.child;Y;){if(Y===f){F=!0,f=E,m=A;break}if(Y===m){F=!0,m=E,f=A;break}Y=Y.sibling}if(!F){for(Y=A.child;Y;){if(Y===f){F=!0,f=A,m=E;break}if(Y===m){F=!0,m=A,f=E;break}Y=Y.sibling}if(!F)throw Error(n(189))}}if(f.alternate!==m)throw Error(n(190))}if(f.tag!==3)throw Error(n(188));return f.stateNode.current===f?r:o}function g(r){var o=r.tag;if(o===5||o===26||o===27||o===6)return r;for(r=r.child;r!==null;){if(o=g(r),o!==null)return o;r=r.sibling}return null}var y=Object.assign,_=Symbol.for("react.element"),b=Symbol.for("react.transitional.element"),x=Symbol.for("react.portal"),T=Symbol.for("react.fragment"),w=Symbol.for("react.strict_mode"),S=Symbol.for("react.profiler"),C=Symbol.for("react.consumer"),N=Symbol.for("react.context"),O=Symbol.for("react.forward_ref"),P=Symbol.for("react.suspense"),U=Symbol.for("react.suspense_list"),z=Symbol.for("react.memo"),H=Symbol.for("react.lazy"),D=Symbol.for("react.activity"),L=Symbol.for("react.memo_cache_sentinel"),j=Symbol.iterator;function W(r){return r===null||typeof r!="object"?null:(r=j&&r[j]||r["@@iterator"],typeof r=="function"?r:null)}var X=Symbol.for("react.client.reference");function K(r){if(r==null)return null;if(typeof r=="function")return r.$$typeof===X?null:r.displayName||r.name||null;if(typeof r=="string")return r;switch(r){case T:return"Fragment";case S:return"Profiler";case w:return"StrictMode";case P:return"Suspense";case U:return"SuspenseList";case D:return"Activity"}if(typeof r=="object")switch(r.$$typeof){case x:return"Portal";case N:return r.displayName||"Context";case C:return(r._context.displayName||"Context")+".Consumer";case O:var o=r.render;return r=r.displayName,r||(r=o.displayName||o.name||"",r=r!==""?"ForwardRef("+r+")":"ForwardRef"),r;case z:return o=r.displayName||null,o!==null?o:K(r.type)||"Memo";case H:o=r._payload,r=r._init;try{return K(r(o))}catch{}}return null}var le=Array.isArray,k=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Z=t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ne={pending:!1,data:null,method:null,action:null},pe=[],ge=-1;function J(r){return{current:r}}function ce(r){0>ge||(r.current=pe[ge],pe[ge]=null,ge--)}function Se(r,o){ge++,pe[ge]=r.current,r.current=o}var Le=J(null),nt=J(null),ve=J(null),Ce=J(null);function Je(r,o){switch(Se(ve,o),Se(nt,r),Se(Le,null),o.nodeType){case 9:case 11:r=(r=o.documentElement)&&(r=r.namespaceURI)?tw(r):0;break;default:if(r=o.tagName,o=o.namespaceURI)o=tw(o),r=nw(o,r);else switch(r){case"svg":r=1;break;case"math":r=2;break;default:r=0}}ce(Le),Se(Le,r)}function yt(){ce(Le),ce(nt),ce(ve)}function St(r){r.memoizedState!==null&&Se(Ce,r);var o=Le.current,f=nw(o,r.type);o!==f&&(Se(nt,r),Se(Le,f))}function $t(r){nt.current===r&&(ce(Le),ce(nt)),Ce.current===r&&(ce(Ce),Vm._currentValue=ne)}var nn,Vt;function xe(r){if(nn===void 0)try{throw Error()}catch(f){var o=f.stack.trim().match(/\n( *(at )?)/);nn=o&&o[1]||"",Vt=-1<f.stack.indexOf(`
    at`)?" (<anonymous>)":-1<f.stack.indexOf("@")?"@unknown:0:0":""}return`
`+nn+r+Vt}var ze=!1;function je(r,o){if(!r||ze)return"";ze=!0;var f=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var m={DetermineComponentFrameRoot:function(){try{if(o){var $e=function(){throw Error()};if(Object.defineProperty($e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct($e,[])}catch(Fe){var Pe=Fe}Reflect.construct(r,[],$e)}else{try{$e.call()}catch(Fe){Pe=Fe}r.call($e.prototype)}}else{try{throw Error()}catch(Fe){Pe=Fe}($e=r())&&typeof $e.catch=="function"&&$e.catch(function(){})}}catch(Fe){if(Fe&&Pe&&typeof Fe.stack=="string")return[Fe.stack,Pe.stack]}return[null,null]}};m.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var E=Object.getOwnPropertyDescriptor(m.DetermineComponentFrameRoot,"name");E&&E.configurable&&Object.defineProperty(m.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var A=m.DetermineComponentFrameRoot(),F=A[0],Y=A[1];if(F&&Y){var fe=F.split(`
`),De=Y.split(`
`);for(E=m=0;m<fe.length&&!fe[m].includes("DetermineComponentFrameRoot");)m++;for(;E<De.length&&!De[E].includes("DetermineComponentFrameRoot");)E++;if(m===fe.length||E===De.length)for(m=fe.length-1,E=De.length-1;1<=m&&0<=E&&fe[m]!==De[E];)E--;for(;1<=m&&0<=E;m--,E--)if(fe[m]!==De[E]){if(m!==1||E!==1)do if(m--,E--,0>E||fe[m]!==De[E]){var Ge=`
`+fe[m].replace(" at new "," at ");return r.displayName&&Ge.includes("<anonymous>")&&(Ge=Ge.replace("<anonymous>",r.displayName)),Ge}while(1<=m&&0<=E);break}}}finally{ze=!1,Error.prepareStackTrace=f}return(f=r?r.displayName||r.name:"")?xe(f):""}function ot(r,o){switch(r.tag){case 26:case 27:case 5:return xe(r.type);case 16:return xe("Lazy");case 13:return r.child!==o&&o!==null?xe("Suspense Fallback"):xe("Suspense");case 19:return xe("SuspenseList");case 0:case 15:return je(r.type,!1);case 11:return je(r.type.render,!1);case 1:return je(r.type,!0);case 31:return xe("Activity");default:return""}}function ie(r){try{var o="",f=null;do o+=ot(r,f),f=r,r=r.return;while(r);return o}catch(m){return`
Error generating stack: `+m.message+`
`+m.stack}}var zt=Object.prototype.hasOwnProperty,mt=i.unstable_scheduleCallback,Bt=i.unstable_cancelCallback,gt=i.unstable_shouldYield,te=i.unstable_requestPaint,B=i.unstable_now,se=i.unstable_getCurrentPriorityLevel,Re=i.unstable_ImmediatePriority,ke=i.unstable_UserBlockingPriority,Oe=i.unstable_NormalPriority,Tt=i.unstable_LowPriority,dt=i.unstable_IdlePriority,Nt=i.log,jt=i.unstable_setDisableYieldValue,Xe=null,qe=null;function Et(r){if(typeof Nt=="function"&&jt(r),qe&&typeof qe.setStrictMode=="function")try{qe.setStrictMode(Xe,r)}catch{}}var ae=Math.clz32?Math.clz32:ue,Ee=Math.log,Qe=Math.LN2;function ue(r){return r>>>=0,r===0?32:31-(Ee(r)/Qe|0)|0}var Ae=256,et=262144,Mt=4194304;function it(r){var o=r&42;if(o!==0)return o;switch(r&-r){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return r&261888;case 262144:case 524288:case 1048576:case 2097152:return r&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return r&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return r}}function Ye(r,o,f){var m=r.pendingLanes;if(m===0)return 0;var E=0,A=r.suspendedLanes,F=r.pingedLanes;r=r.warmLanes;var Y=m&134217727;return Y!==0?(m=Y&~A,m!==0?E=it(m):(F&=Y,F!==0?E=it(F):f||(f=Y&~r,f!==0&&(E=it(f))))):(Y=m&~A,Y!==0?E=it(Y):F!==0?E=it(F):f||(f=m&~r,f!==0&&(E=it(f)))),E===0?0:o!==0&&o!==E&&(o&A)===0&&(A=E&-E,f=o&-o,A>=f||A===32&&(f&4194048)!==0)?o:E}function lt(r,o){return(r.pendingLanes&~(r.suspendedLanes&~r.pingedLanes)&o)===0}function Gt(r,o){switch(r){case 1:case 2:case 4:case 8:case 64:return o+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return o+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function yn(){var r=Mt;return Mt<<=1,(Mt&62914560)===0&&(Mt=4194304),r}function dn(r){for(var o=[],f=0;31>f;f++)o.push(r);return o}function fi(r,o){r.pendingLanes|=o,o!==268435456&&(r.suspendedLanes=0,r.pingedLanes=0,r.warmLanes=0)}function $i(r,o,f,m,E,A){var F=r.pendingLanes;r.pendingLanes=f,r.suspendedLanes=0,r.pingedLanes=0,r.warmLanes=0,r.expiredLanes&=f,r.entangledLanes&=f,r.errorRecoveryDisabledLanes&=f,r.shellSuspendCounter=0;var Y=r.entanglements,fe=r.expirationTimes,De=r.hiddenUpdates;for(f=F&~f;0<f;){var Ge=31-ae(f),$e=1<<Ge;Y[Ge]=0,fe[Ge]=-1;var Pe=De[Ge];if(Pe!==null)for(De[Ge]=null,Ge=0;Ge<Pe.length;Ge++){var Fe=Pe[Ge];Fe!==null&&(Fe.lane&=-536870913)}f&=~$e}m!==0&&Ml(r,m,0),A!==0&&E===0&&r.tag!==0&&(r.suspendedLanes|=A&~(F&~o))}function Ml(r,o,f){r.pendingLanes|=o,r.suspendedLanes&=~o;var m=31-ae(o);r.entangledLanes|=o,r.entanglements[m]=r.entanglements[m]|1073741824|f&261930}function Ys(r,o){var f=r.entangledLanes|=o;for(r=r.entanglements;f;){var m=31-ae(f),E=1<<m;E&o|r[m]&o&&(r[m]|=o),f&=~E}}function _r(r,o){var f=o&-o;return f=(f&42)!==0?1:er(f),(f&(r.suspendedLanes|o))!==0?0:f}function er(r){switch(r){case 2:r=1;break;case 8:r=4;break;case 32:r=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:r=128;break;case 268435456:r=134217728;break;default:r=0}return r}function br(r){return r&=-r,2<r?8<r?(r&134217727)!==0?32:268435456:8:2}function oa(){var r=Z.p;return r!==0?r:(r=window.event,r===void 0?32:ww(r.type))}function en(r,o){var f=Z.p;try{return Z.p=r,o()}finally{Z.p=f}}var la=Math.random().toString(36).slice(2),gn="__reactFiber$"+la,V="__reactProps$"+la,$="__reactContainer$"+la,de="__reactEvents$"+la,Ue="__reactListeners$"+la,Ve="__reactHandles$"+la,He="__reactResources$"+la,ct="__reactMarker$"+la;function rt(r){delete r[gn],delete r[V],delete r[de],delete r[Ue],delete r[Ve]}function st(r){var o=r[gn];if(o)return o;for(var f=r.parentNode;f;){if(o=f[$]||f[gn]){if(f=o.alternate,o.child!==null||f!==null&&f.child!==null)for(r=cw(r);r!==null;){if(f=r[gn])return f;r=cw(r)}return o}r=f,f=r.parentNode}return null}function tt(r){if(r=r[gn]||r[$]){var o=r.tag;if(o===5||o===6||o===13||o===31||o===26||o===27||o===3)return r}return null}function vt(r){var o=r.tag;if(o===5||o===26||o===27||o===6)return r.stateNode;throw Error(n(33))}function pt(r){var o=r[He];return o||(o=r[He]={hoistableStyles:new Map,hoistableScripts:new Map}),o}function G(r){r[ct]=!0}var oe=new Set,ye={};function be(r,o){me(r,o),me(r+"Capture",o)}function me(r,o){for(ye[r]=o,r=0;r<o.length;r++)oe.add(o[r])}var at=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),ut={},ht={};function wt(r){return zt.call(ht,r)?!0:zt.call(ut,r)?!1:at.test(r)?ht[r]=!0:(ut[r]=!0,!1)}function _t(r,o,f){if(wt(o))if(f===null)r.removeAttribute(o);else{switch(typeof f){case"undefined":case"function":case"symbol":r.removeAttribute(o);return;case"boolean":var m=o.toLowerCase().slice(0,5);if(m!=="data-"&&m!=="aria-"){r.removeAttribute(o);return}}r.setAttribute(o,""+f)}}function kt(r,o,f){if(f===null)r.removeAttribute(o);else{switch(typeof f){case"undefined":case"function":case"symbol":case"boolean":r.removeAttribute(o);return}r.setAttribute(o,""+f)}}function bt(r,o,f,m){if(m===null)r.removeAttribute(f);else{switch(typeof m){case"undefined":case"function":case"symbol":case"boolean":r.removeAttribute(f);return}r.setAttributeNS(o,f,""+m)}}function Lt(r){switch(typeof r){case"bigint":case"boolean":case"number":case"string":case"undefined":return r;case"object":return r;default:return""}}function _n(r){var o=r.type;return(r=r.nodeName)&&r.toLowerCase()==="input"&&(o==="checkbox"||o==="radio")}function Gn(r,o,f){var m=Object.getOwnPropertyDescriptor(r.constructor.prototype,o);if(!r.hasOwnProperty(o)&&typeof m<"u"&&typeof m.get=="function"&&typeof m.set=="function"){var E=m.get,A=m.set;return Object.defineProperty(r,o,{configurable:!0,get:function(){return E.call(this)},set:function(F){f=""+F,A.call(this,F)}}),Object.defineProperty(r,o,{enumerable:m.enumerable}),{getValue:function(){return f},setValue:function(F){f=""+F},stopTracking:function(){r._valueTracker=null,delete r[o]}}}}function En(r){if(!r._valueTracker){var o=_n(r)?"checked":"value";r._valueTracker=Gn(r,o,""+r[o])}}function qt(r){if(!r)return!1;var o=r._valueTracker;if(!o)return!0;var f=o.getValue(),m="";return r&&(m=_n(r)?r.checked?"true":"false":r.value),r=m,r!==f?(o.setValue(r),!0):!1}function At(r){if(r=r||(typeof document<"u"?document:void 0),typeof r>"u")return null;try{return r.activeElement||r.body}catch{return r.body}}var Zt=/[\n"\\]/g;function Ct(r){return r.replace(Zt,function(o){return"\\"+o.charCodeAt(0).toString(16)+" "})}function qn(r,o,f,m,E,A,F,Y){r.name="",F!=null&&typeof F!="function"&&typeof F!="symbol"&&typeof F!="boolean"?r.type=F:r.removeAttribute("type"),o!=null?F==="number"?(o===0&&r.value===""||r.value!=o)&&(r.value=""+Lt(o)):r.value!==""+Lt(o)&&(r.value=""+Lt(o)):F!=="submit"&&F!=="reset"||r.removeAttribute("value"),o!=null?jn(r,F,Lt(o)):f!=null?jn(r,F,Lt(f)):m!=null&&r.removeAttribute("value"),E==null&&A!=null&&(r.defaultChecked=!!A),E!=null&&(r.checked=E&&typeof E!="function"&&typeof E!="symbol"),Y!=null&&typeof Y!="function"&&typeof Y!="symbol"&&typeof Y!="boolean"?r.name=""+Lt(Y):r.removeAttribute("name")}function ca(r,o,f,m,E,A,F,Y){if(A!=null&&typeof A!="function"&&typeof A!="symbol"&&typeof A!="boolean"&&(r.type=A),o!=null||f!=null){if(!(A!=="submit"&&A!=="reset"||o!=null)){En(r);return}f=f!=null?""+Lt(f):"",o=o!=null?""+Lt(o):f,Y||o===r.value||(r.value=o),r.defaultValue=o}m=m??E,m=typeof m!="function"&&typeof m!="symbol"&&!!m,r.checked=Y?r.checked:!!m,r.defaultChecked=!!m,F!=null&&typeof F!="function"&&typeof F!="symbol"&&typeof F!="boolean"&&(r.name=F),En(r)}function jn(r,o,f){o==="number"&&At(r.ownerDocument)===r||r.defaultValue===""+f||(r.defaultValue=""+f)}function Li(r,o,f,m){if(r=r.options,o){o={};for(var E=0;E<f.length;E++)o["$"+f[E]]=!0;for(f=0;f<r.length;f++)E=o.hasOwnProperty("$"+r[f].value),r[f].selected!==E&&(r[f].selected=E),E&&m&&(r[f].defaultSelected=!0)}else{for(f=""+Lt(f),o=null,E=0;E<r.length;E++){if(r[E].value===f){r[E].selected=!0,m&&(r[E].defaultSelected=!0);return}o!==null||r[E].disabled||(o=r[E])}o!==null&&(o.selected=!0)}}function Zn(r,o,f){if(o!=null&&(o=""+Lt(o),o!==r.value&&(r.value=o),f==null)){r.defaultValue!==o&&(r.defaultValue=o);return}r.defaultValue=f!=null?""+Lt(f):""}function Ei(r,o,f,m){if(o==null){if(m!=null){if(f!=null)throw Error(n(92));if(le(m)){if(1<m.length)throw Error(n(93));m=m[0]}f=m}f==null&&(f=""),o=f}f=Lt(o),r.defaultValue=f,m=r.textContent,m===f&&m!==""&&m!==null&&(r.value=m),En(r)}function Gi(r,o){if(o){var f=r.firstChild;if(f&&f===r.lastChild&&f.nodeType===3){f.nodeValue=o;return}}r.textContent=o}var qi=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Xi(r,o,f){var m=o.indexOf("--")===0;f==null||typeof f=="boolean"||f===""?m?r.setProperty(o,""):o==="float"?r.cssFloat="":r[o]="":m?r.setProperty(o,f):typeof f!="number"||f===0||qi.has(o)?o==="float"?r.cssFloat=f:r[o]=(""+f).trim():r[o]=f+"px"}function wl(r,o,f){if(o!=null&&typeof o!="object")throw Error(n(62));if(r=r.style,f!=null){for(var m in f)!f.hasOwnProperty(m)||o!=null&&o.hasOwnProperty(m)||(m.indexOf("--")===0?r.setProperty(m,""):m==="float"?r.cssFloat="":r[m]="");for(var E in o)m=o[E],o.hasOwnProperty(E)&&f[E]!==m&&Xi(r,E,m)}else for(var A in o)o.hasOwnProperty(A)&&Xi(r,A,o[A])}function xr(r){if(r.indexOf("-")===-1)return!1;switch(r){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var gv=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),vv=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function wu(r){return vv.test(""+r)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":r}function Es(){}var Tu=null;function cf(r){return r=r.target||r.srcElement||window,r.correspondingUseElement&&(r=r.correspondingUseElement),r.nodeType===3?r.parentNode:r}var Tl=null,Uo=null;function Ep(r){var o=tt(r);if(o&&(r=o.stateNode)){var f=r[V]||null;e:switch(r=o.stateNode,o.type){case"input":if(qn(r,f.value,f.defaultValue,f.defaultValue,f.checked,f.defaultChecked,f.type,f.name),o=f.name,f.type==="radio"&&o!=null){for(f=r;f.parentNode;)f=f.parentNode;for(f=f.querySelectorAll('input[name="'+Ct(""+o)+'"][type="radio"]'),o=0;o<f.length;o++){var m=f[o];if(m!==r&&m.form===r.form){var E=m[V]||null;if(!E)throw Error(n(90));qn(m,E.value,E.defaultValue,E.defaultValue,E.checked,E.defaultChecked,E.type,E.name)}}for(o=0;o<f.length;o++)m=f[o],m.form===r.form&&qt(m)}break e;case"textarea":Zn(r,f.value,f.defaultValue);break e;case"select":o=f.value,o!=null&&Li(r,!!f.multiple,o,!1)}}}var uf=!1;function Mp(r,o,f){if(uf)return r(o,f);uf=!0;try{var m=r(o);return m}finally{if(uf=!1,(Tl!==null||Uo!==null)&&(Q(),Tl&&(o=Tl,r=Uo,Uo=Tl=null,Ep(o),r)))for(o=0;o<r.length;o++)Ep(r[o])}}function Al(r,o){var f=r.stateNode;if(f===null)return null;var m=f[V]||null;if(m===null)return null;f=m[o];e:switch(o){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(m=!m.disabled)||(r=r.type,m=!(r==="button"||r==="input"||r==="select"||r==="textarea")),r=!m;break e;default:r=!1}if(r)return null;if(f&&typeof f!="function")throw Error(n(231,o,typeof f));return f}var Ms=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),hf=!1;if(Ms)try{var Au={};Object.defineProperty(Au,"passive",{get:function(){hf=!0}}),window.addEventListener("test",Au,Au),window.removeEventListener("test",Au,Au)}catch{hf=!1}var Lo=null,ff=null,Io=null;function df(){if(Io)return Io;var r,o=ff,f=o.length,m,E="value"in Lo?Lo.value:Lo.textContent,A=E.length;for(r=0;r<f&&o[r]===E[r];r++);var F=f-r;for(m=1;m<=F&&o[f-m]===E[A-m];m++);return Io=E.slice(r,1<m?1-m:void 0)}function Cl(r){var o=r.keyCode;return"charCode"in r?(r=r.charCode,r===0&&o===13&&(r=13)):r=o,r===10&&(r=13),32<=r||r===13?r:0}function Cu(){return!0}function wp(){return!1}function Ra(r){function o(f,m,E,A,F){this._reactName=f,this._targetInst=E,this.type=m,this.nativeEvent=A,this.target=F,this.currentTarget=null;for(var Y in r)r.hasOwnProperty(Y)&&(f=r[Y],this[Y]=f?f(A):A[Y]);return this.isDefaultPrevented=(A.defaultPrevented!=null?A.defaultPrevented:A.returnValue===!1)?Cu:wp,this.isPropagationStopped=wp,this}return y(o.prototype,{preventDefault:function(){this.defaultPrevented=!0;var f=this.nativeEvent;f&&(f.preventDefault?f.preventDefault():typeof f.returnValue!="unknown"&&(f.returnValue=!1),this.isDefaultPrevented=Cu)},stopPropagation:function(){var f=this.nativeEvent;f&&(f.stopPropagation?f.stopPropagation():typeof f.cancelBubble!="unknown"&&(f.cancelBubble=!0),this.isPropagationStopped=Cu)},persist:function(){},isPersistent:Cu}),o}var Po={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(r){return r.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Ru=Ra(Po),rs=y({},Po,{view:0,detail:0}),pf=Ra(rs),mf,Nu,vc,Ou=y({},rs,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Uu,button:0,buttons:0,relatedTarget:function(r){return r.relatedTarget===void 0?r.fromElement===r.srcElement?r.toElement:r.fromElement:r.relatedTarget},movementX:function(r){return"movementX"in r?r.movementX:(r!==vc&&(vc&&r.type==="mousemove"?(mf=r.screenX-vc.screenX,Nu=r.screenY-vc.screenY):Nu=mf=0,vc=r),mf)},movementY:function(r){return"movementY"in r?r.movementY:Nu}}),yv=Ra(Ou),ya=y({},Ou,{dataTransfer:0}),_v=Ra(ya),bv=y({},rs,{relatedTarget:0}),gf=Ra(bv),xv=y({},Po,{animationName:0,elapsedTime:0,pseudoElement:0}),Sv=Ra(xv),Du=y({},Po,{clipboardData:function(r){return"clipboardData"in r?r.clipboardData:window.clipboardData}}),Tp=Ra(Du),Ev=y({},Po,{data:0}),Ap=Ra(Ev),Mv={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Cp={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Rp={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function wv(r){var o=this.nativeEvent;return o.getModifierState?o.getModifierState(r):(r=Rp[r])?!!o[r]:!1}function Uu(){return wv}var Np=y({},rs,{key:function(r){if(r.key){var o=Mv[r.key]||r.key;if(o!=="Unidentified")return o}return r.type==="keypress"?(r=Cl(r),r===13?"Enter":String.fromCharCode(r)):r.type==="keydown"||r.type==="keyup"?Cp[r.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Uu,charCode:function(r){return r.type==="keypress"?Cl(r):0},keyCode:function(r){return r.type==="keydown"||r.type==="keyup"?r.keyCode:0},which:function(r){return r.type==="keypress"?Cl(r):r.type==="keydown"||r.type==="keyup"?r.keyCode:0}}),Op=Ra(Np),Tv=y({},Ou,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),vf=Ra(Tv),Av=y({},rs,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Uu}),Zs=Ra(Av),Dp=y({},Po,{propertyName:0,elapsedTime:0,pseudoElement:0}),Kb=Ra(Dp),Cv=y({},Ou,{deltaX:function(r){return"deltaX"in r?r.deltaX:"wheelDeltaX"in r?-r.wheelDeltaX:0},deltaY:function(r){return"deltaY"in r?r.deltaY:"wheelDeltaY"in r?-r.wheelDeltaY:"wheelDelta"in r?-r.wheelDelta:0},deltaZ:0,deltaMode:0}),zo=Ra(Cv),Ks=y({},Po,{newState:0,oldState:0}),Up=Ra(Ks),Lp=[9,13,27,32],Rl=Ms&&"CompositionEvent"in window,Bo=null;Ms&&"documentMode"in document&&(Bo=document.documentMode);var Nl=Ms&&"TextEvent"in window&&!Bo,_a=Ms&&(!Rl||Bo&&8<Bo&&11>=Bo),Lu=" ",Ip=!1;function yf(r,o){switch(r){case"keyup":return Lp.indexOf(o.keyCode)!==-1;case"keydown":return o.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function yc(r){return r=r.detail,typeof r=="object"&&"data"in r?r.data:null}var Fo=!1;function _f(r,o){switch(r){case"compositionend":return yc(o);case"keypress":return o.which!==32?null:(Ip=!0,Lu);case"textInput":return r=o.data,r===Lu&&Ip?null:r;default:return null}}function Rv(r,o){if(Fo)return r==="compositionend"||!Rl&&yf(r,o)?(r=df(),Io=ff=Lo=null,Fo=!1,r):null;switch(r){case"paste":return null;case"keypress":if(!(o.ctrlKey||o.altKey||o.metaKey)||o.ctrlKey&&o.altKey){if(o.char&&1<o.char.length)return o.char;if(o.which)return String.fromCharCode(o.which)}return null;case"compositionend":return _a&&o.locale!=="ko"?null:o.data;default:return null}}var Sr={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Pp(r){var o=r&&r.nodeName&&r.nodeName.toLowerCase();return o==="input"?!!Sr[r.type]:o==="textarea"}function bf(r,o,f,m){Tl?Uo?Uo.push(m):Uo=[m]:Tl=m,o=b0(o,"onChange"),0<o.length&&(f=new Ru("onChange","change",null,f,m),r.push({event:f,listeners:o}))}var _c=null,bc=null;function zp(r){ZM(r,0)}function xc(r){var o=vt(r);if(qt(o))return r}function Bp(r,o){if(r==="change")return o}var Iu=!1;if(Ms){var Ol;if(Ms){var di="oninput"in document;if(!di){var Nv=document.createElement("div");Nv.setAttribute("oninput","return;"),di=typeof Nv.oninput=="function"}Ol=di}else Ol=!1;Iu=Ol&&(!document.documentMode||9<document.documentMode)}function Ov(){_c&&(_c.detachEvent("onpropertychange",Fp),bc=_c=null)}function Fp(r){if(r.propertyName==="value"&&xc(bc)){var o=[];bf(o,bc,r,cf(r)),Mp(zp,o)}}function Pu(r,o,f){r==="focusin"?(Ov(),_c=o,bc=f,_c.attachEvent("onpropertychange",Fp)):r==="focusout"&&Ov()}function ko(r){if(r==="selectionchange"||r==="keyup"||r==="keydown")return xc(bc)}function Dv(r,o){if(r==="click")return xc(o)}function Uv(r,o){if(r==="input"||r==="change")return xc(o)}function Dl(r,o){return r===o&&(r!==0||1/r===1/o)||r!==r&&o!==o}var pi=typeof Object.is=="function"?Object.is:Dl;function Sc(r,o){if(pi(r,o))return!0;if(typeof r!="object"||r===null||typeof o!="object"||o===null)return!1;var f=Object.keys(r),m=Object.keys(o);if(f.length!==m.length)return!1;for(m=0;m<f.length;m++){var E=f[m];if(!zt.call(o,E)||!pi(r[E],o[E]))return!1}return!0}function kp(r){for(;r&&r.firstChild;)r=r.firstChild;return r}function Hp(r,o){var f=kp(r);r=0;for(var m;f;){if(f.nodeType===3){if(m=r+f.textContent.length,r<=o&&m>=o)return{node:f,offset:o-r};r=m}e:{for(;f;){if(f.nextSibling){f=f.nextSibling;break e}f=f.parentNode}f=void 0}f=kp(f)}}function xf(r,o){return r&&o?r===o?!0:r&&r.nodeType===3?!1:o&&o.nodeType===3?xf(r,o.parentNode):"contains"in r?r.contains(o):r.compareDocumentPosition?!!(r.compareDocumentPosition(o)&16):!1:!1}function Sf(r){r=r!=null&&r.ownerDocument!=null&&r.ownerDocument.defaultView!=null?r.ownerDocument.defaultView:window;for(var o=At(r.document);o instanceof r.HTMLIFrameElement;){try{var f=typeof o.contentWindow.location.href=="string"}catch{f=!1}if(f)r=o.contentWindow;else break;o=At(r.document)}return o}function Ec(r){var o=r&&r.nodeName&&r.nodeName.toLowerCase();return o&&(o==="input"&&(r.type==="text"||r.type==="search"||r.type==="tel"||r.type==="url"||r.type==="password")||o==="textarea"||r.contentEditable==="true")}var Lv=Ms&&"documentMode"in document&&11>=document.documentMode,Mc=null,Ef=null,wc=null,Er=!1;function Mf(r,o,f){var m=f.window===f?f.document:f.nodeType===9?f:f.ownerDocument;Er||Mc==null||Mc!==At(m)||(m=Mc,"selectionStart"in m&&Ec(m)?m={start:m.selectionStart,end:m.selectionEnd}:(m=(m.ownerDocument&&m.ownerDocument.defaultView||window).getSelection(),m={anchorNode:m.anchorNode,anchorOffset:m.anchorOffset,focusNode:m.focusNode,focusOffset:m.focusOffset}),wc&&Sc(wc,m)||(wc=m,m=b0(Ef,"onSelect"),0<m.length&&(o=new Ru("onSelect","select",null,o,f),r.push({event:o,listeners:m}),o.target=Mc)))}function Ho(r,o){var f={};return f[r.toLowerCase()]=o.toLowerCase(),f["Webkit"+r]="webkit"+o,f["Moz"+r]="moz"+o,f}var Tc={animationend:Ho("Animation","AnimationEnd"),animationiteration:Ho("Animation","AnimationIteration"),animationstart:Ho("Animation","AnimationStart"),transitionrun:Ho("Transition","TransitionRun"),transitionstart:Ho("Transition","TransitionStart"),transitioncancel:Ho("Transition","TransitionCancel"),transitionend:Ho("Transition","TransitionEnd")},zu={},Ga={};Ms&&(Ga=document.createElement("div").style,"AnimationEvent"in window||(delete Tc.animationend.animation,delete Tc.animationiteration.animation,delete Tc.animationstart.animation),"TransitionEvent"in window||delete Tc.transitionend.transition);function Vo(r){if(zu[r])return zu[r];if(!Tc[r])return r;var o=Tc[r],f;for(f in o)if(o.hasOwnProperty(f)&&f in Ga)return zu[r]=o[f];return r}var tr=Vo("animationend"),Vp=Vo("animationiteration"),ws=Vo("animationstart"),Ac=Vo("transitionrun"),jo=Vo("transitionstart"),jp=Vo("transitioncancel"),wf=Vo("transitionend"),Js=new Map,Tf="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Tf.push("scrollEnd");function Na(r,o){Js.set(r,o),be(o,[r])}var Go=typeof reportError=="function"?reportError:function(r){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var o=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof r=="object"&&r!==null&&typeof r.message=="string"?String(r.message):String(r),error:r});if(!window.dispatchEvent(o))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",r);return}console.error(r)},ua=[],Ul=0,Af=0;function qo(){for(var r=Ul,o=Af=Ul=0;o<r;){var f=ua[o];ua[o++]=null;var m=ua[o];ua[o++]=null;var E=ua[o];ua[o++]=null;var A=ua[o];if(ua[o++]=null,m!==null&&E!==null){var F=m.pending;F===null?E.next=E:(E.next=F.next,F.next=E),m.pending=E}A!==0&&Cf(f,E,A)}}function Bu(r,o,f,m){ua[Ul++]=r,ua[Ul++]=o,ua[Ul++]=f,ua[Ul++]=m,Af|=m,r.lanes|=m,r=r.alternate,r!==null&&(r.lanes|=m)}function Cc(r,o,f,m){return Bu(r,o,f,m),Rc(r)}function Xo(r,o){return Bu(r,null,null,o),Rc(r)}function Cf(r,o,f){r.lanes|=f;var m=r.alternate;m!==null&&(m.lanes|=f);for(var E=!1,A=r.return;A!==null;)A.childLanes|=f,m=A.alternate,m!==null&&(m.childLanes|=f),A.tag===22&&(r=A.stateNode,r===null||r._visibility&1||(E=!0)),r=A,A=A.return;return r.tag===3?(A=r.stateNode,E&&o!==null&&(E=31-ae(f),r=A.hiddenUpdates,m=r[E],m===null?r[E]=[o]:m.push(o),o.lane=f|536870912),A):null}function Rc(r){if(50<Kl)throw Kl=0,Jl=null,Error(n(185));for(var o=r.return;o!==null;)r=o,o=r.return;return r.tag===3?r.stateNode:null}var Wo={};function Iv(r,o,f,m){this.tag=r,this.key=f,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=o,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=m,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function qa(r,o,f,m){return new Iv(r,o,f,m)}function Xa(r){return r=r.prototype,!(!r||!r.isReactComponent)}function Ts(r,o){var f=r.alternate;return f===null?(f=qa(r.tag,o,r.key,r.mode),f.elementType=r.elementType,f.type=r.type,f.stateNode=r.stateNode,f.alternate=r,r.alternate=f):(f.pendingProps=o,f.type=r.type,f.flags=0,f.subtreeFlags=0,f.deletions=null),f.flags=r.flags&65011712,f.childLanes=r.childLanes,f.lanes=r.lanes,f.child=r.child,f.memoizedProps=r.memoizedProps,f.memoizedState=r.memoizedState,f.updateQueue=r.updateQueue,o=r.dependencies,f.dependencies=o===null?null:{lanes:o.lanes,firstContext:o.firstContext},f.sibling=r.sibling,f.index=r.index,f.ref=r.ref,f.refCleanup=r.refCleanup,f}function Oa(r,o){r.flags&=65011714;var f=r.alternate;return f===null?(r.childLanes=0,r.lanes=o,r.child=null,r.subtreeFlags=0,r.memoizedProps=null,r.memoizedState=null,r.updateQueue=null,r.dependencies=null,r.stateNode=null):(r.childLanes=f.childLanes,r.lanes=f.lanes,r.child=f.child,r.subtreeFlags=0,r.deletions=null,r.memoizedProps=f.memoizedProps,r.memoizedState=f.memoizedState,r.updateQueue=f.updateQueue,r.type=f.type,o=f.dependencies,r.dependencies=o===null?null:{lanes:o.lanes,firstContext:o.firstContext}),r}function Fu(r,o,f,m,E,A){var F=0;if(m=r,typeof r=="function")Xa(r)&&(F=1);else if(typeof r=="string")F=qD(r,f,Le.current)?26:r==="html"||r==="head"||r==="body"?27:5;else e:switch(r){case D:return r=qa(31,f,o,E),r.elementType=D,r.lanes=A,r;case T:return Qs(f.children,E,A,o);case w:F=8,E|=24;break;case S:return r=qa(12,f,o,E|2),r.elementType=S,r.lanes=A,r;case P:return r=qa(13,f,o,E),r.elementType=P,r.lanes=A,r;case U:return r=qa(19,f,o,E),r.elementType=U,r.lanes=A,r;default:if(typeof r=="object"&&r!==null)switch(r.$$typeof){case N:F=10;break e;case C:F=9;break e;case O:F=11;break e;case z:F=14;break e;case H:F=16,m=null;break e}F=29,f=Error(n(130,r===null?"null":typeof r,"")),m=null}return o=qa(F,f,o,E),o.elementType=r,o.type=m,o.lanes=A,o}function Qs(r,o,f,m){return r=qa(7,r,m,o),r.lanes=f,r}function Rf(r,o,f){return r=qa(6,r,null,o),r.lanes=f,r}function Pv(r){var o=qa(18,null,null,0);return o.stateNode=r,o}function ss(r,o,f){return o=qa(4,r.children!==null?r.children:[],r.key,o),o.lanes=f,o.stateNode={containerInfo:r.containerInfo,pendingChildren:null,implementation:r.implementation},o}var Gp=new WeakMap;function nr(r,o){if(typeof r=="object"&&r!==null){var f=Gp.get(r);return f!==void 0?f:(o={value:r,source:o,stack:ie(o)},Gp.set(r,o),o)}return{value:r,source:o,stack:ie(o)}}var os=[],Ll=0,ku=null,Nc=0,Mr=[],ir=0,As=null,Cs=1,Rs="";function $s(r,o){os[Ll++]=Nc,os[Ll++]=ku,ku=r,Nc=o}function qp(r,o,f){Mr[ir++]=Cs,Mr[ir++]=Rs,Mr[ir++]=As,As=r;var m=Cs;r=Rs;var E=32-ae(m)-1;m&=~(1<<E),f+=1;var A=32-ae(o)+E;if(30<A){var F=E-E%5;A=(m&(1<<F)-1).toString(32),m>>=F,E-=F,Cs=1<<32-ae(o)+E|f<<E|m,Rs=A+r}else Cs=1<<A|f<<E|m,Rs=r}function Nf(r){r.return!==null&&($s(r,1),qp(r,1,0))}function Yo(r){for(;r===ku;)ku=os[--Ll],os[Ll]=null,Nc=os[--Ll],os[Ll]=null;for(;r===As;)As=Mr[--ir],Mr[ir]=null,Rs=Mr[--ir],Mr[ir]=null,Cs=Mr[--ir],Mr[ir]=null}function Hu(r,o){Mr[ir++]=Cs,Mr[ir++]=Rs,Mr[ir++]=As,Cs=o.id,Rs=o.overflow,As=r}var ha=null,oi=null,On=!1,eo=null,fa=!1,Of=Error(n(519));function Rn(r){var o=Error(n(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw Vu(nr(o,r)),Of}function Df(r){var o=r.stateNode,f=r.type,m=r.memoizedProps;switch(o[gn]=r,o[V]=m,f){case"dialog":Dn("cancel",o),Dn("close",o);break;case"iframe":case"object":case"embed":Dn("load",o);break;case"video":case"audio":for(f=0;f<zm.length;f++)Dn(zm[f],o);break;case"source":Dn("error",o);break;case"img":case"image":case"link":Dn("error",o),Dn("load",o);break;case"details":Dn("toggle",o);break;case"input":Dn("invalid",o),ca(o,m.value,m.defaultValue,m.checked,m.defaultChecked,m.type,m.name,!0);break;case"select":Dn("invalid",o);break;case"textarea":Dn("invalid",o),Ei(o,m.value,m.defaultValue,m.children)}f=m.children,typeof f!="string"&&typeof f!="number"&&typeof f!="bigint"||o.textContent===""+f||m.suppressHydrationWarning===!0||$M(o.textContent,f)?(m.popover!=null&&(Dn("beforetoggle",o),Dn("toggle",o)),m.onScroll!=null&&Dn("scroll",o),m.onScrollEnd!=null&&Dn("scrollend",o),m.onClick!=null&&(o.onclick=Es),o=!0):o=!1,o||Rn(r,!0)}function zv(r){for(ha=r.return;ha;)switch(ha.tag){case 5:case 31:case 13:fa=!1;return;case 27:case 3:fa=!0;return;default:ha=ha.return}}function Il(r){if(r!==ha)return!1;if(!On)return zv(r),On=!0,!1;var o=r.tag,f;if((f=o!==3&&o!==27)&&((f=o===5)&&(f=r.type,f=!(f!=="form"&&f!=="button")||gx(r.type,r.memoizedProps)),f=!f),f&&oi&&Rn(r),zv(r),o===13){if(r=r.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(n(317));oi=lw(r)}else if(o===31){if(r=r.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(n(317));oi=lw(r)}else o===27?(o=oi,Zc(r.type)?(r=xx,xx=null,oi=r):oi=o):oi=ha?ks(r.stateNode.nextSibling):null;return!0}function Pl(){oi=ha=null,On=!1}function Xp(){var r=eo;return r!==null&&(za===null?za=r:za.push.apply(za,r),eo=null),r}function Vu(r){eo===null?eo=[r]:eo.push(r)}var Wp=J(null),to=null,Da=null;function no(r,o,f){Se(Wp,o._currentValue),o._currentValue=f}function qr(r){r._currentValue=Wp.current,ce(Wp)}function io(r,o,f){for(;r!==null;){var m=r.alternate;if((r.childLanes&o)!==o?(r.childLanes|=o,m!==null&&(m.childLanes|=o)):m!==null&&(m.childLanes&o)!==o&&(m.childLanes|=o),r===f)break;r=r.return}}function Uf(r,o,f,m){var E=r.child;for(E!==null&&(E.return=r);E!==null;){var A=E.dependencies;if(A!==null){var F=E.child;A=A.firstContext;e:for(;A!==null;){var Y=A;A=E;for(var fe=0;fe<o.length;fe++)if(Y.context===o[fe]){A.lanes|=f,Y=A.alternate,Y!==null&&(Y.lanes|=f),io(A.return,f,r),m||(F=null);break e}A=Y.next}}else if(E.tag===18){if(F=E.return,F===null)throw Error(n(341));F.lanes|=f,A=F.alternate,A!==null&&(A.lanes|=f),io(F,f,r),F=null}else F=E.child;if(F!==null)F.return=E;else for(F=E;F!==null;){if(F===r){F=null;break}if(E=F.sibling,E!==null){E.return=F.return,F=E;break}F=F.return}E=F}}function Zo(r,o,f,m){r=null;for(var E=o,A=!1;E!==null;){if(!A){if((E.flags&524288)!==0)A=!0;else if((E.flags&262144)!==0)break}if(E.tag===10){var F=E.alternate;if(F===null)throw Error(n(387));if(F=F.memoizedProps,F!==null){var Y=E.type;pi(E.pendingProps.value,F.value)||(r!==null?r.push(Y):r=[Y])}}else if(E===Ce.current){if(F=E.alternate,F===null)throw Error(n(387));F.memoizedState.memoizedState!==E.memoizedState.memoizedState&&(r!==null?r.push(Vm):r=[Vm])}E=E.return}r!==null&&Uf(o,r,f,m),o.flags|=262144}function Oc(r){for(r=r.firstContext;r!==null;){if(!pi(r.context._currentValue,r.memoizedValue))return!0;r=r.next}return!1}function zl(r){to=r,Da=null,r=r.dependencies,r!==null&&(r.firstContext=null)}function da(r){return Yp(to,r)}function ju(r,o){return to===null&&zl(r),Yp(r,o)}function Yp(r,o){var f=o._currentValue;if(o={context:o,memoizedValue:f,next:null},Da===null){if(r===null)throw Error(n(308));Da=o,r.dependencies={lanes:0,firstContext:o},r.flags|=524288}else Da=Da.next=o;return f}var Bv=typeof AbortController<"u"?AbortController:function(){var r=[],o=this.signal={aborted:!1,addEventListener:function(f,m){r.push(m)}};this.abort=function(){o.aborted=!0,r.forEach(function(f){return f()})}},Fv=i.unstable_scheduleCallback,Zp=i.unstable_NormalPriority,Kt={$$typeof:N,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Kp(){return{controller:new Bv,data:new Map,refCount:0}}function ba(r){r.refCount--,r.refCount===0&&Fv(Zp,function(){r.controller.abort()})}var Bl=null,Jp=0,ao=0,ls=null;function Dc(r,o){if(Bl===null){var f=Bl=[];Jp=0,ao=ox(),ls={status:"pending",value:void 0,then:function(m){f.push(m)}}}return Jp++,o.then(Qp,Qp),o}function Qp(){if(--Jp===0&&Bl!==null){ls!==null&&(ls.status="fulfilled");var r=Bl;Bl=null,ao=0,ls=null;for(var o=0;o<r.length;o++)(0,r[o])()}}function $p(r,o){var f=[],m={status:"pending",value:null,reason:null,then:function(E){f.push(E)}};return r.then(function(){m.status="fulfilled",m.value=o;for(var E=0;E<f.length;E++)(0,f[E])(o)},function(E){for(m.status="rejected",m.reason=E,E=0;E<f.length;E++)(0,f[E])(void 0)}),m}var kv=k.S;k.S=function(r,o){Xc=B(),typeof o=="object"&&o!==null&&typeof o.then=="function"&&Dc(r,o),kv!==null&&kv(r,o)};var Ko=J(null);function Ns(){var r=Ko.current;return r!==null?r:Jn.pooledCache}function Uc(r,o){o===null?Se(Ko,Ko.current):Se(Ko,o.pool)}function Lf(){var r=Ns();return r===null?null:{parent:Kt._currentValue,pool:r}}var Jo=Error(n(460)),Gu=Error(n(474)),cs=Error(n(542)),qu={then:function(){}};function Hv(r){return r=r.status,r==="fulfilled"||r==="rejected"}function em(r,o,f){switch(f=r[f],f===void 0?r.push(o):f!==o&&(o.then(Es,Es),o=f),o.status){case"fulfilled":return o.value;case"rejected":throw r=o.reason,tm(r),r;default:if(typeof o.status=="string")o.then(Es,Es);else{if(r=Jn,r!==null&&100<r.shellSuspendCounter)throw Error(n(482));r=o,r.status="pending",r.then(function(m){if(o.status==="pending"){var E=o;E.status="fulfilled",E.value=m}},function(m){if(o.status==="pending"){var E=o;E.status="rejected",E.reason=m}})}switch(o.status){case"fulfilled":return o.value;case"rejected":throw r=o.reason,tm(r),r}throw an=o,Jo}}function Fl(r){try{var o=r._init;return o(r._payload)}catch(f){throw f!==null&&typeof f=="object"&&typeof f.then=="function"?(an=f,Jo):f}}var an=null;function If(){if(an===null)throw Error(n(459));var r=an;return an=null,r}function tm(r){if(r===Jo||r===cs)throw Error(n(483))}var Qo=null,$o=0;function Pf(r){var o=$o;return $o+=1,Qo===null&&(Qo=[]),em(Qo,r,o)}function Xu(r,o){o=o.props.ref,r.ref=o!==void 0?o:null}function Wu(r,o){throw o.$$typeof===_?Error(n(525)):(r=Object.prototype.toString.call(o),Error(n(31,r==="[object Object]"?"object with keys {"+Object.keys(o).join(", ")+"}":r)))}function Lc(r){function o(we,_e){if(r){var Ne=we.deletions;Ne===null?(we.deletions=[_e],we.flags|=16):Ne.push(_e)}}function f(we,_e){if(!r)return null;for(;_e!==null;)o(we,_e),_e=_e.sibling;return null}function m(we){for(var _e=new Map;we!==null;)we.key!==null?_e.set(we.key,we):_e.set(we.index,we),we=we.sibling;return _e}function E(we,_e){return we=Ts(we,_e),we.index=0,we.sibling=null,we}function A(we,_e,Ne){return we.index=Ne,r?(Ne=we.alternate,Ne!==null?(Ne=Ne.index,Ne<_e?(we.flags|=67108866,_e):Ne):(we.flags|=67108866,_e)):(we.flags|=1048576,_e)}function F(we){return r&&we.alternate===null&&(we.flags|=67108866),we}function Y(we,_e,Ne,Ze){return _e===null||_e.tag!==6?(_e=Rf(Ne,we.mode,Ze),_e.return=we,_e):(_e=E(_e,Ne),_e.return=we,_e)}function fe(we,_e,Ne,Ze){var tn=Ne.type;return tn===T?Ge(we,_e,Ne.props.children,Ze,Ne.key):_e!==null&&(_e.elementType===tn||typeof tn=="object"&&tn!==null&&tn.$$typeof===H&&Fl(tn)===_e.type)?(_e=E(_e,Ne.props),Xu(_e,Ne),_e.return=we,_e):(_e=Fu(Ne.type,Ne.key,Ne.props,null,we.mode,Ze),Xu(_e,Ne),_e.return=we,_e)}function De(we,_e,Ne,Ze){return _e===null||_e.tag!==4||_e.stateNode.containerInfo!==Ne.containerInfo||_e.stateNode.implementation!==Ne.implementation?(_e=ss(Ne,we.mode,Ze),_e.return=we,_e):(_e=E(_e,Ne.children||[]),_e.return=we,_e)}function Ge(we,_e,Ne,Ze,tn){return _e===null||_e.tag!==7?(_e=Qs(Ne,we.mode,Ze,tn),_e.return=we,_e):(_e=E(_e,Ne),_e.return=we,_e)}function $e(we,_e,Ne){if(typeof _e=="string"&&_e!==""||typeof _e=="number"||typeof _e=="bigint")return _e=Rf(""+_e,we.mode,Ne),_e.return=we,_e;if(typeof _e=="object"&&_e!==null){switch(_e.$$typeof){case b:return Ne=Fu(_e.type,_e.key,_e.props,null,we.mode,Ne),Xu(Ne,_e),Ne.return=we,Ne;case x:return _e=ss(_e,we.mode,Ne),_e.return=we,_e;case H:return _e=Fl(_e),$e(we,_e,Ne)}if(le(_e)||W(_e))return _e=Qs(_e,we.mode,Ne,null),_e.return=we,_e;if(typeof _e.then=="function")return $e(we,Pf(_e),Ne);if(_e.$$typeof===N)return $e(we,ju(we,_e),Ne);Wu(we,_e)}return null}function Pe(we,_e,Ne,Ze){var tn=_e!==null?_e.key:null;if(typeof Ne=="string"&&Ne!==""||typeof Ne=="number"||typeof Ne=="bigint")return tn!==null?null:Y(we,_e,""+Ne,Ze);if(typeof Ne=="object"&&Ne!==null){switch(Ne.$$typeof){case b:return Ne.key===tn?fe(we,_e,Ne,Ze):null;case x:return Ne.key===tn?De(we,_e,Ne,Ze):null;case H:return Ne=Fl(Ne),Pe(we,_e,Ne,Ze)}if(le(Ne)||W(Ne))return tn!==null?null:Ge(we,_e,Ne,Ze,null);if(typeof Ne.then=="function")return Pe(we,_e,Pf(Ne),Ze);if(Ne.$$typeof===N)return Pe(we,_e,ju(we,Ne),Ze);Wu(we,Ne)}return null}function Fe(we,_e,Ne,Ze,tn){if(typeof Ze=="string"&&Ze!==""||typeof Ze=="number"||typeof Ze=="bigint")return we=we.get(Ne)||null,Y(_e,we,""+Ze,tn);if(typeof Ze=="object"&&Ze!==null){switch(Ze.$$typeof){case b:return we=we.get(Ze.key===null?Ne:Ze.key)||null,fe(_e,we,Ze,tn);case x:return we=we.get(Ze.key===null?Ne:Ze.key)||null,De(_e,we,Ze,tn);case H:return Ze=Fl(Ze),Fe(we,_e,Ne,Ze,tn)}if(le(Ze)||W(Ze))return we=we.get(Ne)||null,Ge(_e,we,Ze,tn,null);if(typeof Ze.then=="function")return Fe(we,_e,Ne,Pf(Ze),tn);if(Ze.$$typeof===N)return Fe(we,_e,Ne,ju(_e,Ze),tn);Wu(_e,Ze)}return null}function Ht(we,_e,Ne,Ze){for(var tn=null,$n=null,Xt=_e,Tn=_e=0,In=null;Xt!==null&&Tn<Ne.length;Tn++){Xt.index>Tn?(In=Xt,Xt=null):In=Xt.sibling;var ei=Pe(we,Xt,Ne[Tn],Ze);if(ei===null){Xt===null&&(Xt=In);break}r&&Xt&&ei.alternate===null&&o(we,Xt),_e=A(ei,_e,Tn),$n===null?tn=ei:$n.sibling=ei,$n=ei,Xt=In}if(Tn===Ne.length)return f(we,Xt),On&&$s(we,Tn),tn;if(Xt===null){for(;Tn<Ne.length;Tn++)Xt=$e(we,Ne[Tn],Ze),Xt!==null&&(_e=A(Xt,_e,Tn),$n===null?tn=Xt:$n.sibling=Xt,$n=Xt);return On&&$s(we,Tn),tn}for(Xt=m(Xt);Tn<Ne.length;Tn++)In=Fe(Xt,we,Tn,Ne[Tn],Ze),In!==null&&(r&&In.alternate!==null&&Xt.delete(In.key===null?Tn:In.key),_e=A(In,_e,Tn),$n===null?tn=In:$n.sibling=In,$n=In);return r&&Xt.forEach(function(eu){return o(we,eu)}),On&&$s(we,Tn),tn}function sn(we,_e,Ne,Ze){if(Ne==null)throw Error(n(151));for(var tn=null,$n=null,Xt=_e,Tn=_e=0,In=null,ei=Ne.next();Xt!==null&&!ei.done;Tn++,ei=Ne.next()){Xt.index>Tn?(In=Xt,Xt=null):In=Xt.sibling;var eu=Pe(we,Xt,ei.value,Ze);if(eu===null){Xt===null&&(Xt=In);break}r&&Xt&&eu.alternate===null&&o(we,Xt),_e=A(eu,_e,Tn),$n===null?tn=eu:$n.sibling=eu,$n=eu,Xt=In}if(ei.done)return f(we,Xt),On&&$s(we,Tn),tn;if(Xt===null){for(;!ei.done;Tn++,ei=Ne.next())ei=$e(we,ei.value,Ze),ei!==null&&(_e=A(ei,_e,Tn),$n===null?tn=ei:$n.sibling=ei,$n=ei);return On&&$s(we,Tn),tn}for(Xt=m(Xt);!ei.done;Tn++,ei=Ne.next())ei=Fe(Xt,we,Tn,ei.value,Ze),ei!==null&&(r&&ei.alternate!==null&&Xt.delete(ei.key===null?Tn:ei.key),_e=A(ei,_e,Tn),$n===null?tn=ei:$n.sibling=ei,$n=ei);return r&&Xt.forEach(function(nU){return o(we,nU)}),On&&$s(we,Tn),tn}function ui(we,_e,Ne,Ze){if(typeof Ne=="object"&&Ne!==null&&Ne.type===T&&Ne.key===null&&(Ne=Ne.props.children),typeof Ne=="object"&&Ne!==null){switch(Ne.$$typeof){case b:e:{for(var tn=Ne.key;_e!==null;){if(_e.key===tn){if(tn=Ne.type,tn===T){if(_e.tag===7){f(we,_e.sibling),Ze=E(_e,Ne.props.children),Ze.return=we,we=Ze;break e}}else if(_e.elementType===tn||typeof tn=="object"&&tn!==null&&tn.$$typeof===H&&Fl(tn)===_e.type){f(we,_e.sibling),Ze=E(_e,Ne.props),Xu(Ze,Ne),Ze.return=we,we=Ze;break e}f(we,_e);break}else o(we,_e);_e=_e.sibling}Ne.type===T?(Ze=Qs(Ne.props.children,we.mode,Ze,Ne.key),Ze.return=we,we=Ze):(Ze=Fu(Ne.type,Ne.key,Ne.props,null,we.mode,Ze),Xu(Ze,Ne),Ze.return=we,we=Ze)}return F(we);case x:e:{for(tn=Ne.key;_e!==null;){if(_e.key===tn)if(_e.tag===4&&_e.stateNode.containerInfo===Ne.containerInfo&&_e.stateNode.implementation===Ne.implementation){f(we,_e.sibling),Ze=E(_e,Ne.children||[]),Ze.return=we,we=Ze;break e}else{f(we,_e);break}else o(we,_e);_e=_e.sibling}Ze=ss(Ne,we.mode,Ze),Ze.return=we,we=Ze}return F(we);case H:return Ne=Fl(Ne),ui(we,_e,Ne,Ze)}if(le(Ne))return Ht(we,_e,Ne,Ze);if(W(Ne)){if(tn=W(Ne),typeof tn!="function")throw Error(n(150));return Ne=tn.call(Ne),sn(we,_e,Ne,Ze)}if(typeof Ne.then=="function")return ui(we,_e,Pf(Ne),Ze);if(Ne.$$typeof===N)return ui(we,_e,ju(we,Ne),Ze);Wu(we,Ne)}return typeof Ne=="string"&&Ne!==""||typeof Ne=="number"||typeof Ne=="bigint"?(Ne=""+Ne,_e!==null&&_e.tag===6?(f(we,_e.sibling),Ze=E(_e,Ne),Ze.return=we,we=Ze):(f(we,_e),Ze=Rf(Ne,we.mode,Ze),Ze.return=we,we=Ze),F(we)):f(we,_e)}return function(we,_e,Ne,Ze){try{$o=0;var tn=ui(we,_e,Ne,Ze);return Qo=null,tn}catch(Xt){if(Xt===Jo||Xt===cs)throw Xt;var $n=qa(29,Xt,null,we.mode);return $n.lanes=Ze,$n.return=we,$n}finally{}}}var kl=Lc(!0),Vv=Lc(!1),el=!1;function nm(r){r.updateQueue={baseState:r.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function im(r,o){r=r.updateQueue,o.updateQueue===r&&(o.updateQueue={baseState:r.baseState,firstBaseUpdate:r.firstBaseUpdate,lastBaseUpdate:r.lastBaseUpdate,shared:r.shared,callbacks:null})}function Os(r){return{lane:r,tag:0,payload:null,callback:null,next:null}}function ro(r,o,f){var m=r.updateQueue;if(m===null)return null;if(m=m.shared,(Un&2)!==0){var E=m.pending;return E===null?o.next=o:(o.next=E.next,E.next=o),m.pending=o,o=Rc(r),Cf(r,null,f),o}return Bu(r,m,o,f),Rc(r)}function tl(r,o,f){if(o=o.updateQueue,o!==null&&(o=o.shared,(f&4194048)!==0)){var m=o.lanes;m&=r.pendingLanes,f|=m,o.lanes=f,Ys(r,f)}}function zf(r,o){var f=r.updateQueue,m=r.alternate;if(m!==null&&(m=m.updateQueue,f===m)){var E=null,A=null;if(f=f.firstBaseUpdate,f!==null){do{var F={lane:f.lane,tag:f.tag,payload:f.payload,callback:null,next:null};A===null?E=A=F:A=A.next=F,f=f.next}while(f!==null);A===null?E=A=o:A=A.next=o}else E=A=o;f={baseState:m.baseState,firstBaseUpdate:E,lastBaseUpdate:A,shared:m.shared,callbacks:m.callbacks},r.updateQueue=f;return}r=f.lastBaseUpdate,r===null?f.firstBaseUpdate=o:r.next=o,f.lastBaseUpdate=o}var am=!1;function Yu(){if(am){var r=ls;if(r!==null)throw r}}function Hl(r,o,f,m){am=!1;var E=r.updateQueue;el=!1;var A=E.firstBaseUpdate,F=E.lastBaseUpdate,Y=E.shared.pending;if(Y!==null){E.shared.pending=null;var fe=Y,De=fe.next;fe.next=null,F===null?A=De:F.next=De,F=fe;var Ge=r.alternate;Ge!==null&&(Ge=Ge.updateQueue,Y=Ge.lastBaseUpdate,Y!==F&&(Y===null?Ge.firstBaseUpdate=De:Y.next=De,Ge.lastBaseUpdate=fe))}if(A!==null){var $e=E.baseState;F=0,Ge=De=fe=null,Y=A;do{var Pe=Y.lane&-536870913,Fe=Pe!==Y.lane;if(Fe?(Nn&Pe)===Pe:(m&Pe)===Pe){Pe!==0&&Pe===ao&&(am=!0),Ge!==null&&(Ge=Ge.next={lane:0,tag:Y.tag,payload:Y.payload,callback:null,next:null});e:{var Ht=r,sn=Y;Pe=o;var ui=f;switch(sn.tag){case 1:if(Ht=sn.payload,typeof Ht=="function"){$e=Ht.call(ui,$e,Pe);break e}$e=Ht;break e;case 3:Ht.flags=Ht.flags&-65537|128;case 0:if(Ht=sn.payload,Pe=typeof Ht=="function"?Ht.call(ui,$e,Pe):Ht,Pe==null)break e;$e=y({},$e,Pe);break e;case 2:el=!0}}Pe=Y.callback,Pe!==null&&(r.flags|=64,Fe&&(r.flags|=8192),Fe=E.callbacks,Fe===null?E.callbacks=[Pe]:Fe.push(Pe))}else Fe={lane:Pe,tag:Y.tag,payload:Y.payload,callback:Y.callback,next:null},Ge===null?(De=Ge=Fe,fe=$e):Ge=Ge.next=Fe,F|=Pe;if(Y=Y.next,Y===null){if(Y=E.shared.pending,Y===null)break;Fe=Y,Y=Fe.next,Fe.next=null,E.lastBaseUpdate=Fe,E.shared.pending=null}}while(!0);Ge===null&&(fe=$e),E.baseState=fe,E.firstBaseUpdate=De,E.lastBaseUpdate=Ge,A===null&&(E.shared.lanes=0),Ir|=F,r.lanes=F,r.memoizedState=$e}}function Ds(r,o){if(typeof r!="function")throw Error(n(191,r));r.call(o)}function xa(r,o){var f=r.callbacks;if(f!==null)for(r.callbacks=null,r=0;r<f.length;r++)Ds(f[r],o)}var wr=J(null),Wa=J(0);function rm(r,o){r=Fi,Se(Wa,r),Se(wr,o),Fi=r|o.baseLanes}function sm(){Se(Wa,Fi),Se(wr,wr.current)}function Ua(){Fi=Wa.current,ce(wr),ce(Wa)}var ea=J(null),Xr=null;function nl(r){var o=r.alternate;Se(Mi,Mi.current&1),Se(ea,r),Xr===null&&(o===null||wr.current!==null||o.memoizedState!==null)&&(Xr=r)}function om(r){Se(Mi,Mi.current),Se(ea,r),Xr===null&&(Xr=r)}function jv(r){r.tag===22?(Se(Mi,Mi.current),Se(ea,r),Xr===null&&(Xr=r)):so()}function so(){Se(Mi,Mi.current),Se(ea,ea.current)}function Tr(r){ce(ea),Xr===r&&(Xr=null),ce(Mi)}var Mi=J(0);function Bf(r){for(var o=r;o!==null;){if(o.tag===13){var f=o.memoizedState;if(f!==null&&(f=f.dehydrated,f===null||_x(f)||bx(f)))return o}else if(o.tag===19&&(o.memoizedProps.revealOrder==="forwards"||o.memoizedProps.revealOrder==="backwards"||o.memoizedProps.revealOrder==="unstable_legacy-backwards"||o.memoizedProps.revealOrder==="together")){if((o.flags&128)!==0)return o}else if(o.child!==null){o.child.return=o,o=o.child;continue}if(o===r)break;for(;o.sibling===null;){if(o.return===null||o.return===r)return null;o=o.return}o.sibling.return=o.return,o=o.sibling}return null}var ar=0,ln=null,ii=null,Wi=null,Ff=!1,Us=!1,Vl=!1,kf=0,Zu=0,Ls=null,Jb=0;function wi(){throw Error(n(321))}function lm(r,o){if(o===null)return!1;for(var f=0;f<o.length&&f<r.length;f++)if(!pi(r[f],o[f]))return!1;return!0}function cm(r,o,f,m,E,A){return ar=A,ln=o,o.memoizedState=null,o.updateQueue=null,o.lanes=0,k.H=r===null||r.memoizedState===null?c0:zc,Vl=!1,A=f(m,E),Vl=!1,Us&&(A=qv(o,f,m,E)),Gv(r),A}function Gv(r){k.H=eh;var o=ii!==null&&ii.next!==null;if(ar=0,Wi=ii=ln=null,Ff=!1,Zu=0,Ls=null,o)throw Error(n(300));r===null||mi||(r=r.dependencies,r!==null&&Oc(r)&&(mi=!0))}function qv(r,o,f,m){ln=r;var E=0;do{if(Us&&(Ls=null),Zu=0,Us=!1,25<=E)throw Error(n(301));if(E+=1,Wi=ii=null,r.updateQueue!=null){var A=r.updateQueue;A.lastEffect=null,A.events=null,A.stores=null,A.memoCache!=null&&(A.memoCache.index=0)}k.H=th,A=o(f,m)}while(Us);return A}function Qb(){var r=k.H,o=r.useState()[0];return o=typeof o.then=="function"?Ju(o):o,r=r.useState()[0],(ii!==null?ii.memoizedState:null)!==r&&(ln.flags|=1024),o}function um(){var r=kf!==0;return kf=0,r}function hm(r,o,f){o.updateQueue=r.updateQueue,o.flags&=-2053,r.lanes&=~f}function fm(r){if(Ff){for(r=r.memoizedState;r!==null;){var o=r.queue;o!==null&&(o.pending=null),r=r.next}Ff=!1}ar=0,Wi=ii=ln=null,Us=!1,Zu=kf=0,Ls=null}function Ya(){var r={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Wi===null?ln.memoizedState=Wi=r:Wi=Wi.next=r,Wi}function Ii(){if(ii===null){var r=ln.alternate;r=r!==null?r.memoizedState:null}else r=ii.next;var o=Wi===null?ln.memoizedState:Wi.next;if(o!==null)Wi=o,ii=r;else{if(r===null)throw ln.alternate===null?Error(n(467)):Error(n(310));ii=r,r={memoizedState:ii.memoizedState,baseState:ii.baseState,baseQueue:ii.baseQueue,queue:ii.queue,next:null},Wi===null?ln.memoizedState=Wi=r:Wi=Wi.next=r}return Wi}function Ku(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Ju(r){var o=Zu;return Zu+=1,Ls===null&&(Ls=[]),r=em(Ls,r,o),o=ln,(Wi===null?o.memoizedState:Wi.next)===null&&(o=o.alternate,k.H=o===null||o.memoizedState===null?c0:zc),r}function Hf(r){if(r!==null&&typeof r=="object"){if(typeof r.then=="function")return Ju(r);if(r.$$typeof===N)return da(r)}throw Error(n(438,String(r)))}function dm(r){var o=null,f=ln.updateQueue;if(f!==null&&(o=f.memoCache),o==null){var m=ln.alternate;m!==null&&(m=m.updateQueue,m!==null&&(m=m.memoCache,m!=null&&(o={data:m.data.map(function(E){return E.slice()}),index:0})))}if(o==null&&(o={data:[],index:0}),f===null&&(f=Ku(),ln.updateQueue=f),f.memoCache=o,f=o.data[o.index],f===void 0)for(f=o.data[o.index]=Array(r),m=0;m<r;m++)f[m]=L;return o.index++,f}function oo(r,o){return typeof o=="function"?o(r):o}function Vf(r){var o=Ii();return pm(o,ii,r)}function pm(r,o,f){var m=r.queue;if(m===null)throw Error(n(311));m.lastRenderedReducer=f;var E=r.baseQueue,A=m.pending;if(A!==null){if(E!==null){var F=E.next;E.next=A.next,A.next=F}o.baseQueue=E=A,m.pending=null}if(A=r.baseState,E===null)r.memoizedState=A;else{o=E.next;var Y=F=null,fe=null,De=o,Ge=!1;do{var $e=De.lane&-536870913;if($e!==De.lane?(Nn&$e)===$e:(ar&$e)===$e){var Pe=De.revertLane;if(Pe===0)fe!==null&&(fe=fe.next={lane:0,revertLane:0,gesture:null,action:De.action,hasEagerState:De.hasEagerState,eagerState:De.eagerState,next:null}),$e===ao&&(Ge=!0);else if((ar&Pe)===Pe){De=De.next,Pe===ao&&(Ge=!0);continue}else $e={lane:0,revertLane:De.revertLane,gesture:null,action:De.action,hasEagerState:De.hasEagerState,eagerState:De.eagerState,next:null},fe===null?(Y=fe=$e,F=A):fe=fe.next=$e,ln.lanes|=Pe,Ir|=Pe;$e=De.action,Vl&&f(A,$e),A=De.hasEagerState?De.eagerState:f(A,$e)}else Pe={lane:$e,revertLane:De.revertLane,gesture:De.gesture,action:De.action,hasEagerState:De.hasEagerState,eagerState:De.eagerState,next:null},fe===null?(Y=fe=Pe,F=A):fe=fe.next=Pe,ln.lanes|=$e,Ir|=$e;De=De.next}while(De!==null&&De!==o);if(fe===null?F=A:fe.next=Y,!pi(A,r.memoizedState)&&(mi=!0,Ge&&(f=ls,f!==null)))throw f;r.memoizedState=A,r.baseState=F,r.baseQueue=fe,m.lastRenderedState=A}return E===null&&(m.lanes=0),[r.memoizedState,m.dispatch]}function jf(r){var o=Ii(),f=o.queue;if(f===null)throw Error(n(311));f.lastRenderedReducer=r;var m=f.dispatch,E=f.pending,A=o.memoizedState;if(E!==null){f.pending=null;var F=E=E.next;do A=r(A,F.action),F=F.next;while(F!==E);pi(A,o.memoizedState)||(mi=!0),o.memoizedState=A,o.baseQueue===null&&(o.baseState=A),f.lastRenderedState=A}return[A,m]}function mm(r,o,f){var m=ln,E=Ii(),A=On;if(A){if(f===void 0)throw Error(n(407));f=f()}else f=o();var F=!pi((ii||E).memoizedState,f);if(F&&(E.memoizedState=f,mi=!0),E=E.queue,bm(vm.bind(null,m,E,r),[r]),E.getSnapshot!==o||F||Wi!==null&&Wi.memoizedState.tag&1){if(m.flags|=2048,Ic(9,{destroy:void 0},gm.bind(null,m,E,f,o),null),Jn===null)throw Error(n(349));A||(ar&127)!==0||Xv(m,o,f)}return f}function Xv(r,o,f){r.flags|=16384,r={getSnapshot:o,value:f},o=ln.updateQueue,o===null?(o=Ku(),ln.updateQueue=o,o.stores=[r]):(f=o.stores,f===null?o.stores=[r]:f.push(r))}function gm(r,o,f,m){o.value=f,o.getSnapshot=m,ym(o)&&Gf(r)}function vm(r,o,f){return f(function(){ym(o)&&Gf(r)})}function ym(r){var o=r.getSnapshot;r=r.value;try{var f=o();return!pi(r,f)}catch{return!0}}function Gf(r){var o=Xo(r,2);o!==null&&h(o,r,2)}function Qu(r){var o=Ya();if(typeof r=="function"){var f=r;if(r=f(),Vl){Et(!0);try{f()}finally{Et(!1)}}}return o.memoizedState=o.baseState=r,o.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:oo,lastRenderedState:r},o}function Wv(r,o,f,m){return r.baseState=f,pm(r,ii,typeof m=="function"?m:oo)}function $b(r,o,f,m,E){if(lo(r))throw Error(n(485));if(r=o.action,r!==null){var A={payload:E,action:r,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(F){A.listeners.push(F)}};k.T!==null?f(!0):A.isTransition=!1,m(A),f=o.pending,f===null?(A.next=o.pending=A,Yv(o,A)):(A.next=f.next,o.pending=f.next=A)}}function Yv(r,o){var f=o.action,m=o.payload,E=r.state;if(o.isTransition){var A=k.T,F={};k.T=F;try{var Y=f(E,m),fe=k.S;fe!==null&&fe(F,Y),Zv(r,o,Y)}catch(De){qf(r,o,De)}finally{A!==null&&F.types!==null&&(A.types=F.types),k.T=A}}else try{A=f(E,m),Zv(r,o,A)}catch(De){qf(r,o,De)}}function Zv(r,o,f){f!==null&&typeof f=="object"&&typeof f.then=="function"?f.then(function(m){_m(r,o,m)},function(m){return qf(r,o,m)}):_m(r,o,f)}function _m(r,o,f){o.status="fulfilled",o.value=f,Kv(o),r.state=f,o=r.pending,o!==null&&(f=o.next,f===o?r.pending=null:(f=f.next,o.next=f,Yv(r,f)))}function qf(r,o,f){var m=r.pending;if(r.pending=null,m!==null){m=m.next;do o.status="rejected",o.reason=f,Kv(o),o=o.next;while(o!==m)}r.action=null}function Kv(r){r=r.listeners;for(var o=0;o<r.length;o++)(0,r[o])()}function Jv(r,o){return o}function Qv(r,o){if(On){var f=Jn.formState;if(f!==null){e:{var m=ln;if(On){if(oi){t:{for(var E=oi,A=fa;E.nodeType!==8;){if(!A){E=null;break t}if(E=ks(E.nextSibling),E===null){E=null;break t}}A=E.data,E=A==="F!"||A==="F"?E:null}if(E){oi=ks(E.nextSibling),m=E.data==="F!";break e}}Rn(m)}m=!1}m&&(o=f[0])}}return f=Ya(),f.memoizedState=f.baseState=o,m={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Jv,lastRenderedState:o},f.queue=m,f=l0.bind(null,ln,m),m.dispatch=f,m=Qu(!1),A=$u.bind(null,ln,!1,m.queue),m=Ya(),E={state:o,dispatch:null,action:r,pending:null},m.queue=E,f=$b.bind(null,ln,E,A,f),E.dispatch=f,m.memoizedState=r,[o,f,!1]}function $v(r){var o=Ii();return e0(o,ii,r)}function e0(r,o,f){if(o=pm(r,o,Jv)[0],r=Vf(oo)[0],typeof o=="object"&&o!==null&&typeof o.then=="function")try{var m=Ju(o)}catch(F){throw F===Jo?cs:F}else m=o;o=Ii();var E=o.queue,A=E.dispatch;return f!==o.memoizedState&&(ln.flags|=2048,Ic(9,{destroy:void 0},ex.bind(null,E,f),null)),[m,A,r]}function ex(r,o){r.action=o}function t0(r){var o=Ii(),f=ii;if(f!==null)return e0(o,f,r);Ii(),o=o.memoizedState,f=Ii();var m=f.queue.dispatch;return f.memoizedState=r,[o,m,!1]}function Ic(r,o,f,m){return r={tag:r,create:f,deps:m,inst:o,next:null},o=ln.updateQueue,o===null&&(o=Ku(),ln.updateQueue=o),f=o.lastEffect,f===null?o.lastEffect=r.next=r:(m=f.next,f.next=r,r.next=m,o.lastEffect=r),r}function n0(){return Ii().memoizedState}function Xf(r,o,f,m){var E=Ya();ln.flags|=r,E.memoizedState=Ic(1|o,{destroy:void 0},f,m===void 0?null:m)}function Wf(r,o,f,m){var E=Ii();m=m===void 0?null:m;var A=E.memoizedState.inst;ii!==null&&m!==null&&lm(m,ii.memoizedState.deps)?E.memoizedState=Ic(o,A,f,m):(ln.flags|=r,E.memoizedState=Ic(1|o,A,f,m))}function i0(r,o){Xf(8390656,8,r,o)}function bm(r,o){Wf(2048,8,r,o)}function a0(r){ln.flags|=4;var o=ln.updateQueue;if(o===null)o=Ku(),ln.updateQueue=o,o.events=[r];else{var f=o.events;f===null?o.events=[r]:f.push(r)}}function r0(r){var o=Ii().memoizedState;return a0({ref:o,nextImpl:r}),function(){if((Un&2)!==0)throw Error(n(440));return o.impl.apply(void 0,arguments)}}function s0(r,o){return Wf(4,2,r,o)}function Ar(r,o){return Wf(4,4,r,o)}function xm(r,o){if(typeof o=="function"){r=r();var f=o(r);return function(){typeof f=="function"?f():o(null)}}if(o!=null)return r=r(),o.current=r,function(){o.current=null}}function Yf(r,o,f){f=f!=null?f.concat([r]):null,Wf(4,4,xm.bind(null,o,r),f)}function Zf(){}function Sm(r,o){var f=Ii();o=o===void 0?null:o;var m=f.memoizedState;return o!==null&&lm(o,m[1])?m[0]:(f.memoizedState=[r,o],r)}function Em(r,o){var f=Ii();o=o===void 0?null:o;var m=f.memoizedState;if(o!==null&&lm(o,m[1]))return m[0];if(m=r(),Vl){Et(!0);try{r()}finally{Et(!1)}}return f.memoizedState=[m,o],m}function Mm(r,o,f){return f===void 0||(ar&1073741824)!==0&&(Nn&261930)===0?r.memoizedState=o:(r.memoizedState=f,r=c(),ln.lanes|=r,Ir|=r,f)}function wm(r,o,f,m){return pi(f,o)?f:wr.current!==null?(r=Mm(r,f,m),pi(r,o)||(mi=!0),r):(ar&42)===0||(ar&1073741824)!==0&&(Nn&261930)===0?(mi=!0,r.memoizedState=f):(r=c(),ln.lanes|=r,Ir|=r,o)}function Tm(r,o,f,m,E){var A=Z.p;Z.p=A!==0&&8>A?A:8;var F=k.T,Y={};k.T=Y,$u(r,!1,o,f);try{var fe=E(),De=k.S;if(De!==null&&De(Y,fe),fe!==null&&typeof fe=="object"&&typeof fe.then=="function"){var Ge=$p(fe,m);Pc(r,o,Ge,Ka(r))}else Pc(r,o,m,Ka(r))}catch($e){Pc(r,o,{then:function(){},status:"rejected",reason:$e},Ka())}finally{Z.p=A,F!==null&&Y.types!==null&&(F.types=Y.types),k.T=F}}function tx(){}function Am(r,o,f,m){if(r.tag!==5)throw Error(n(476));var E=o0(r).queue;Tm(r,E,o,ne,f===null?tx:function(){return Cm(r),f(m)})}function o0(r){var o=r.memoizedState;if(o!==null)return o;o={memoizedState:ne,baseState:ne,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:oo,lastRenderedState:ne},next:null};var f={};return o.next={memoizedState:f,baseState:f,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:oo,lastRenderedState:f},next:null},r.memoizedState=o,r=r.alternate,r!==null&&(r.memoizedState=o),o}function Cm(r){var o=o0(r);o.next===null&&(o=r.alternate.memoizedState),Pc(r,o.next.queue,{},Ka())}function Rm(){return da(Vm)}function Sa(){return Ii().memoizedState}function Nm(){return Ii().memoizedState}function nx(r){for(var o=r.return;o!==null;){switch(o.tag){case 24:case 3:var f=Ka();r=Os(f);var m=ro(o,r,f);m!==null&&(h(m,o,f),tl(m,o,f)),o={cache:Kp()},r.payload=o;return}o=o.return}}function ix(r,o,f){var m=Ka();f={lane:m,revertLane:0,gesture:null,action:f,hasEagerState:!1,eagerState:null,next:null},lo(r)?jl(o,f):(f=Cc(r,o,f,m),f!==null&&(h(f,r,m),rr(f,o,m)))}function l0(r,o,f){var m=Ka();Pc(r,o,f,m)}function Pc(r,o,f,m){var E={lane:m,revertLane:0,gesture:null,action:f,hasEagerState:!1,eagerState:null,next:null};if(lo(r))jl(o,E);else{var A=r.alternate;if(r.lanes===0&&(A===null||A.lanes===0)&&(A=o.lastRenderedReducer,A!==null))try{var F=o.lastRenderedState,Y=A(F,f);if(E.hasEagerState=!0,E.eagerState=Y,pi(Y,F))return Bu(r,o,E,0),Jn===null&&qo(),!1}catch{}finally{}if(f=Cc(r,o,E,m),f!==null)return h(f,r,m),rr(f,o,m),!0}return!1}function $u(r,o,f,m){if(m={lane:2,revertLane:ox(),gesture:null,action:m,hasEagerState:!1,eagerState:null,next:null},lo(r)){if(o)throw Error(n(479))}else o=Cc(r,f,m,2),o!==null&&h(o,r,2)}function lo(r){var o=r.alternate;return r===ln||o!==null&&o===ln}function jl(r,o){Us=Ff=!0;var f=r.pending;f===null?o.next=o:(o.next=f.next,f.next=o),r.pending=o}function rr(r,o,f){if((f&4194048)!==0){var m=o.lanes;m&=r.pendingLanes,f|=m,o.lanes=f,Ys(r,f)}}var eh={readContext:da,use:Hf,useCallback:wi,useContext:wi,useEffect:wi,useImperativeHandle:wi,useLayoutEffect:wi,useInsertionEffect:wi,useMemo:wi,useReducer:wi,useRef:wi,useState:wi,useDebugValue:wi,useDeferredValue:wi,useTransition:wi,useSyncExternalStore:wi,useId:wi,useHostTransitionStatus:wi,useFormState:wi,useActionState:wi,useOptimistic:wi,useMemoCache:wi,useCacheRefresh:wi};eh.useEffectEvent=wi;var c0={readContext:da,use:Hf,useCallback:function(r,o){return Ya().memoizedState=[r,o===void 0?null:o],r},useContext:da,useEffect:i0,useImperativeHandle:function(r,o,f){f=f!=null?f.concat([r]):null,Xf(4194308,4,xm.bind(null,o,r),f)},useLayoutEffect:function(r,o){return Xf(4194308,4,r,o)},useInsertionEffect:function(r,o){Xf(4,2,r,o)},useMemo:function(r,o){var f=Ya();o=o===void 0?null:o;var m=r();if(Vl){Et(!0);try{r()}finally{Et(!1)}}return f.memoizedState=[m,o],m},useReducer:function(r,o,f){var m=Ya();if(f!==void 0){var E=f(o);if(Vl){Et(!0);try{f(o)}finally{Et(!1)}}}else E=o;return m.memoizedState=m.baseState=E,r={pending:null,lanes:0,dispatch:null,lastRenderedReducer:r,lastRenderedState:E},m.queue=r,r=r.dispatch=ix.bind(null,ln,r),[m.memoizedState,r]},useRef:function(r){var o=Ya();return r={current:r},o.memoizedState=r},useState:function(r){r=Qu(r);var o=r.queue,f=l0.bind(null,ln,o);return o.dispatch=f,[r.memoizedState,f]},useDebugValue:Zf,useDeferredValue:function(r,o){var f=Ya();return Mm(f,r,o)},useTransition:function(){var r=Qu(!1);return r=Tm.bind(null,ln,r.queue,!0,!1),Ya().memoizedState=r,[!1,r]},useSyncExternalStore:function(r,o,f){var m=ln,E=Ya();if(On){if(f===void 0)throw Error(n(407));f=f()}else{if(f=o(),Jn===null)throw Error(n(349));(Nn&127)!==0||Xv(m,o,f)}E.memoizedState=f;var A={value:f,getSnapshot:o};return E.queue=A,i0(vm.bind(null,m,A,r),[r]),m.flags|=2048,Ic(9,{destroy:void 0},gm.bind(null,m,A,f,o),null),f},useId:function(){var r=Ya(),o=Jn.identifierPrefix;if(On){var f=Rs,m=Cs;f=(m&~(1<<32-ae(m)-1)).toString(32)+f,o="_"+o+"R_"+f,f=kf++,0<f&&(o+="H"+f.toString(32)),o+="_"}else f=Jb++,o="_"+o+"r_"+f.toString(32)+"_";return r.memoizedState=o},useHostTransitionStatus:Rm,useFormState:Qv,useActionState:Qv,useOptimistic:function(r){var o=Ya();o.memoizedState=o.baseState=r;var f={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return o.queue=f,o=$u.bind(null,ln,!0,f),f.dispatch=o,[r,o]},useMemoCache:dm,useCacheRefresh:function(){return Ya().memoizedState=nx.bind(null,ln)},useEffectEvent:function(r){var o=Ya(),f={impl:r};return o.memoizedState=f,function(){if((Un&2)!==0)throw Error(n(440));return f.impl.apply(void 0,arguments)}}},zc={readContext:da,use:Hf,useCallback:Sm,useContext:da,useEffect:bm,useImperativeHandle:Yf,useInsertionEffect:s0,useLayoutEffect:Ar,useMemo:Em,useReducer:Vf,useRef:n0,useState:function(){return Vf(oo)},useDebugValue:Zf,useDeferredValue:function(r,o){var f=Ii();return wm(f,ii.memoizedState,r,o)},useTransition:function(){var r=Vf(oo)[0],o=Ii().memoizedState;return[typeof r=="boolean"?r:Ju(r),o]},useSyncExternalStore:mm,useId:Sa,useHostTransitionStatus:Rm,useFormState:$v,useActionState:$v,useOptimistic:function(r,o){var f=Ii();return Wv(f,ii,r,o)},useMemoCache:dm,useCacheRefresh:Nm};zc.useEffectEvent=r0;var th={readContext:da,use:Hf,useCallback:Sm,useContext:da,useEffect:bm,useImperativeHandle:Yf,useInsertionEffect:s0,useLayoutEffect:Ar,useMemo:Em,useReducer:jf,useRef:n0,useState:function(){return jf(oo)},useDebugValue:Zf,useDeferredValue:function(r,o){var f=Ii();return ii===null?Mm(f,r,o):wm(f,ii.memoizedState,r,o)},useTransition:function(){var r=jf(oo)[0],o=Ii().memoizedState;return[typeof r=="boolean"?r:Ju(r),o]},useSyncExternalStore:mm,useId:Sa,useHostTransitionStatus:Rm,useFormState:t0,useActionState:t0,useOptimistic:function(r,o){var f=Ii();return ii!==null?Wv(f,ii,r,o):(f.baseState=r,[r,f.queue.dispatch])},useMemoCache:dm,useCacheRefresh:Nm};th.useEffectEvent=r0;function Bc(r,o,f,m){o=r.memoizedState,f=f(m,o),f=f==null?o:y({},o,f),r.memoizedState=f,r.lanes===0&&(r.updateQueue.baseState=f)}var nh={enqueueSetState:function(r,o,f){r=r._reactInternals;var m=Ka(),E=Os(m);E.payload=o,f!=null&&(E.callback=f),o=ro(r,E,m),o!==null&&(h(o,r,m),tl(o,r,m))},enqueueReplaceState:function(r,o,f){r=r._reactInternals;var m=Ka(),E=Os(m);E.tag=1,E.payload=o,f!=null&&(E.callback=f),o=ro(r,E,m),o!==null&&(h(o,r,m),tl(o,r,m))},enqueueForceUpdate:function(r,o){r=r._reactInternals;var f=Ka(),m=Os(f);m.tag=2,o!=null&&(m.callback=o),o=ro(r,m,f),o!==null&&(h(o,r,f),tl(o,r,f))}};function u0(r,o,f,m,E,A,F){return r=r.stateNode,typeof r.shouldComponentUpdate=="function"?r.shouldComponentUpdate(m,A,F):o.prototype&&o.prototype.isPureReactComponent?!Sc(f,m)||!Sc(E,A):!0}function h0(r,o,f,m){r=o.state,typeof o.componentWillReceiveProps=="function"&&o.componentWillReceiveProps(f,m),typeof o.UNSAFE_componentWillReceiveProps=="function"&&o.UNSAFE_componentWillReceiveProps(f,m),o.state!==r&&nh.enqueueReplaceState(o,o.state,null)}function Ea(r,o){var f=o;if("ref"in o){f={};for(var m in o)m!=="ref"&&(f[m]=o[m])}if(r=r.defaultProps){f===o&&(f=y({},f));for(var E in r)f[E]===void 0&&(f[E]=r[E])}return f}function Om(r){Go(r)}function f0(r){console.error(r)}function Kf(r){Go(r)}function Jf(r,o){try{var f=r.onUncaughtError;f(o.value,{componentStack:o.stack})}catch(m){setTimeout(function(){throw m})}}function d0(r,o,f){try{var m=r.onCaughtError;m(f.value,{componentStack:f.stack,errorBoundary:o.tag===1?o.stateNode:null})}catch(E){setTimeout(function(){throw E})}}function Dm(r,o,f){return f=Os(f),f.tag=3,f.payload={element:null},f.callback=function(){Jf(r,o)},f}function Fc(r){return r=Os(r),r.tag=3,r}function sr(r,o,f,m){var E=f.type.getDerivedStateFromError;if(typeof E=="function"){var A=m.value;r.payload=function(){return E(A)},r.callback=function(){d0(o,f,m)}}var F=f.stateNode;F!==null&&typeof F.componentDidCatch=="function"&&(r.callback=function(){d0(o,f,m),typeof E!="function"&&(Fs===null?Fs=new Set([this]):Fs.add(this));var Y=m.stack;this.componentDidCatch(m.value,{componentStack:Y!==null?Y:""})})}function Cr(r,o,f,m,E){if(f.flags|=32768,m!==null&&typeof m=="object"&&typeof m.then=="function"){if(o=f.alternate,o!==null&&Zo(o,f,E,!0),f=ea.current,f!==null){switch(f.tag){case 31:case 13:return Xr===null?fn():f.alternate===null&&Qn===0&&(Qn=3),f.flags&=-257,f.flags|=65536,f.lanes=E,m===qu?f.flags|=16384:(o=f.updateQueue,o===null?f.updateQueue=new Set([m]):o.add(m),ax(r,m,E)),!1;case 22:return f.flags|=65536,m===qu?f.flags|=16384:(o=f.updateQueue,o===null?(o={transitions:null,markerInstances:null,retryQueue:new Set([m])},f.updateQueue=o):(f=o.retryQueue,f===null?o.retryQueue=new Set([m]):f.add(m)),ax(r,m,E)),!1}throw Error(n(435,f.tag))}return ax(r,m,E),fn(),!1}if(On)return o=ea.current,o!==null?((o.flags&65536)===0&&(o.flags|=256),o.flags|=65536,o.lanes=E,m!==Of&&(r=Error(n(422),{cause:m}),Vu(nr(r,f)))):(m!==Of&&(o=Error(n(423),{cause:m}),Vu(nr(o,f))),r=r.current.alternate,r.flags|=65536,E&=-E,r.lanes|=E,m=nr(m,f),E=Dm(r.stateNode,m,E),zf(r,E),Qn!==4&&(Qn=2)),!1;var A=Error(n(520),{cause:m});if(A=nr(A,f),ps===null?ps=[A]:ps.push(A),Qn!==4&&(Qn=2),o===null)return!0;m=nr(m,f),f=o;do{switch(f.tag){case 3:return f.flags|=65536,r=E&-E,f.lanes|=r,r=Dm(f.stateNode,m,r),zf(f,r),!1;case 1:if(o=f.type,A=f.stateNode,(f.flags&128)===0&&(typeof o.getDerivedStateFromError=="function"||A!==null&&typeof A.componentDidCatch=="function"&&(Fs===null||!Fs.has(A))))return f.flags|=65536,E&=-E,f.lanes|=E,E=Fc(E),sr(E,r,f,m),zf(f,E),!1}f=f.return}while(f!==null);return!1}var Qf=Error(n(461)),mi=!1;function Ti(r,o,f,m){o.child=r===null?Vv(o,null,f,m):kl(o,r.child,f,m)}function ih(r,o,f,m,E){f=f.render;var A=o.ref;if("ref"in m){var F={};for(var Y in m)Y!=="ref"&&(F[Y]=m[Y])}else F=m;return zl(o),m=cm(r,o,f,F,A,E),Y=um(),r!==null&&!mi?(hm(r,o,E),fs(r,o,E)):(On&&Y&&Nf(o),o.flags|=1,Ti(r,o,m,E),o.child)}function ah(r,o,f,m,E){if(r===null){var A=f.type;return typeof A=="function"&&!Xa(A)&&A.defaultProps===void 0&&f.compare===null?(o.tag=15,o.type=A,Rr(r,o,A,m,E)):(r=Fu(f.type,null,m,o,o.mode,E),r.ref=o.ref,r.return=o,o.child=r)}if(A=r.child,!al(r,E)){var F=A.memoizedProps;if(f=f.compare,f=f!==null?f:Sc,f(F,m)&&r.ref===o.ref)return fs(r,o,E)}return o.flags|=1,r=Ts(A,m),r.ref=o.ref,r.return=o,o.child=r}function Rr(r,o,f,m,E){if(r!==null){var A=r.memoizedProps;if(Sc(A,m)&&r.ref===o.ref)if(mi=!1,o.pendingProps=m=A,al(r,E))(r.flags&131072)!==0&&(mi=!0);else return o.lanes=r.lanes,fs(r,o,E)}return kc(r,o,f,m,E)}function Nr(r,o,f,m){var E=m.children,A=r!==null?r.memoizedState:null;if(r===null&&o.stateNode===null&&(o.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),m.mode==="hidden"){if((o.flags&128)!==0){if(A=A!==null?A.baseLanes|f:f,r!==null){for(m=o.child=r.child,E=0;m!==null;)E=E|m.lanes|m.childLanes,m=m.sibling;m=E&~A}else m=0,o.child=null;return Is(r,o,A,f,m)}if((f&536870912)!==0)o.memoizedState={baseLanes:0,cachePool:null},r!==null&&Uc(o,A!==null?A.cachePool:null),A!==null?rm(o,A):sm(),jv(o);else return m=o.lanes=536870912,Is(r,o,A!==null?A.baseLanes|f:f,f,m)}else A!==null?(Uc(o,A.cachePool),rm(o,A),so(),o.memoizedState=null):(r!==null&&Uc(o,null),sm(),so());return Ti(r,o,E,f),o.child}function us(r,o){return r!==null&&r.tag===22||o.stateNode!==null||(o.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),o.sibling}function Is(r,o,f,m,E){var A=Ns();return A=A===null?null:{parent:Kt._currentValue,pool:A},o.memoizedState={baseLanes:f,cachePool:A},r!==null&&Uc(o,null),sm(),jv(o),r!==null&&Zo(r,o,m,!0),o.childLanes=E,null}function Wr(r,o){return o=Hc({mode:o.mode,children:o.children},r.mode),o.ref=r.ref,r.child=o,o.return=r,o}function pa(r,o,f){return kl(o,r.child,null,f),r=Wr(o,o.pendingProps),r.flags|=2,Tr(o),o.memoizedState=null,r}function rh(r,o,f){var m=o.pendingProps,E=(o.flags&128)!==0;if(o.flags&=-129,r===null){if(On){if(m.mode==="hidden")return r=Wr(o,m),o.lanes=536870912,us(null,r);if(om(o),(r=oi)?(r=ow(r,fa),r=r!==null&&r.data==="&"?r:null,r!==null&&(o.memoizedState={dehydrated:r,treeContext:As!==null?{id:Cs,overflow:Rs}:null,retryLane:536870912,hydrationErrors:null},f=Pv(r),f.return=o,o.child=f,ha=o,oi=null)):r=null,r===null)throw Rn(o);return o.lanes=536870912,null}return Wr(o,m)}var A=r.memoizedState;if(A!==null){var F=A.dehydrated;if(om(o),E)if(o.flags&256)o.flags&=-257,o=pa(r,o,f);else if(o.memoizedState!==null)o.child=r.child,o.flags|=128,o=null;else throw Error(n(558));else if(mi||Zo(r,o,f,!1),E=(f&r.childLanes)!==0,mi||E){if(m=Jn,m!==null&&(F=_r(m,f),F!==0&&F!==A.retryLane))throw A.retryLane=F,Xo(r,F),h(m,r,F),Qf;fn(),o=pa(r,o,f)}else r=A.treeContext,oi=ks(F.nextSibling),ha=o,On=!0,eo=null,fa=!1,r!==null&&Hu(o,r),o=Wr(o,m),o.flags|=4096;return o}return r=Ts(r.child,{mode:m.mode,children:m.children}),r.ref=o.ref,o.child=r,r.return=o,r}function hs(r,o){var f=o.ref;if(f===null)r!==null&&r.ref!==null&&(o.flags|=4194816);else{if(typeof f!="function"&&typeof f!="object")throw Error(n(284));(r===null||r.ref!==f)&&(o.flags|=4194816)}}function kc(r,o,f,m,E){return zl(o),f=cm(r,o,f,m,void 0,E),m=um(),r!==null&&!mi?(hm(r,o,E),fs(r,o,E)):(On&&m&&Nf(o),o.flags|=1,Ti(r,o,f,E),o.child)}function La(r,o,f,m,E,A){return zl(o),o.updateQueue=null,f=qv(o,m,f,E),Gv(r),m=um(),r!==null&&!mi?(hm(r,o,A),fs(r,o,A)):(On&&m&&Nf(o),o.flags|=1,Ti(r,o,f,A),o.child)}function Ma(r,o,f,m,E){if(zl(o),o.stateNode===null){var A=Wo,F=f.contextType;typeof F=="object"&&F!==null&&(A=da(F)),A=new f(m,A),o.memoizedState=A.state!==null&&A.state!==void 0?A.state:null,A.updater=nh,o.stateNode=A,A._reactInternals=o,A=o.stateNode,A.props=m,A.state=o.memoizedState,A.refs={},nm(o),F=f.contextType,A.context=typeof F=="object"&&F!==null?da(F):Wo,A.state=o.memoizedState,F=f.getDerivedStateFromProps,typeof F=="function"&&(Bc(o,f,F,m),A.state=o.memoizedState),typeof f.getDerivedStateFromProps=="function"||typeof A.getSnapshotBeforeUpdate=="function"||typeof A.UNSAFE_componentWillMount!="function"&&typeof A.componentWillMount!="function"||(F=A.state,typeof A.componentWillMount=="function"&&A.componentWillMount(),typeof A.UNSAFE_componentWillMount=="function"&&A.UNSAFE_componentWillMount(),F!==A.state&&nh.enqueueReplaceState(A,A.state,null),Hl(o,m,A,E),Yu(),A.state=o.memoizedState),typeof A.componentDidMount=="function"&&(o.flags|=4194308),m=!0}else if(r===null){A=o.stateNode;var Y=o.memoizedProps,fe=Ea(f,Y);A.props=fe;var De=A.context,Ge=f.contextType;F=Wo,typeof Ge=="object"&&Ge!==null&&(F=da(Ge));var $e=f.getDerivedStateFromProps;Ge=typeof $e=="function"||typeof A.getSnapshotBeforeUpdate=="function",Y=o.pendingProps!==Y,Ge||typeof A.UNSAFE_componentWillReceiveProps!="function"&&typeof A.componentWillReceiveProps!="function"||(Y||De!==F)&&h0(o,A,m,F),el=!1;var Pe=o.memoizedState;A.state=Pe,Hl(o,m,A,E),Yu(),De=o.memoizedState,Y||Pe!==De||el?(typeof $e=="function"&&(Bc(o,f,$e,m),De=o.memoizedState),(fe=el||u0(o,f,fe,m,Pe,De,F))?(Ge||typeof A.UNSAFE_componentWillMount!="function"&&typeof A.componentWillMount!="function"||(typeof A.componentWillMount=="function"&&A.componentWillMount(),typeof A.UNSAFE_componentWillMount=="function"&&A.UNSAFE_componentWillMount()),typeof A.componentDidMount=="function"&&(o.flags|=4194308)):(typeof A.componentDidMount=="function"&&(o.flags|=4194308),o.memoizedProps=m,o.memoizedState=De),A.props=m,A.state=De,A.context=F,m=fe):(typeof A.componentDidMount=="function"&&(o.flags|=4194308),m=!1)}else{A=o.stateNode,im(r,o),F=o.memoizedProps,Ge=Ea(f,F),A.props=Ge,$e=o.pendingProps,Pe=A.context,De=f.contextType,fe=Wo,typeof De=="object"&&De!==null&&(fe=da(De)),Y=f.getDerivedStateFromProps,(De=typeof Y=="function"||typeof A.getSnapshotBeforeUpdate=="function")||typeof A.UNSAFE_componentWillReceiveProps!="function"&&typeof A.componentWillReceiveProps!="function"||(F!==$e||Pe!==fe)&&h0(o,A,m,fe),el=!1,Pe=o.memoizedState,A.state=Pe,Hl(o,m,A,E),Yu();var Fe=o.memoizedState;F!==$e||Pe!==Fe||el||r!==null&&r.dependencies!==null&&Oc(r.dependencies)?(typeof Y=="function"&&(Bc(o,f,Y,m),Fe=o.memoizedState),(Ge=el||u0(o,f,Ge,m,Pe,Fe,fe)||r!==null&&r.dependencies!==null&&Oc(r.dependencies))?(De||typeof A.UNSAFE_componentWillUpdate!="function"&&typeof A.componentWillUpdate!="function"||(typeof A.componentWillUpdate=="function"&&A.componentWillUpdate(m,Fe,fe),typeof A.UNSAFE_componentWillUpdate=="function"&&A.UNSAFE_componentWillUpdate(m,Fe,fe)),typeof A.componentDidUpdate=="function"&&(o.flags|=4),typeof A.getSnapshotBeforeUpdate=="function"&&(o.flags|=1024)):(typeof A.componentDidUpdate!="function"||F===r.memoizedProps&&Pe===r.memoizedState||(o.flags|=4),typeof A.getSnapshotBeforeUpdate!="function"||F===r.memoizedProps&&Pe===r.memoizedState||(o.flags|=1024),o.memoizedProps=m,o.memoizedState=Fe),A.props=m,A.state=Fe,A.context=fe,m=Ge):(typeof A.componentDidUpdate!="function"||F===r.memoizedProps&&Pe===r.memoizedState||(o.flags|=4),typeof A.getSnapshotBeforeUpdate!="function"||F===r.memoizedProps&&Pe===r.memoizedState||(o.flags|=1024),m=!1)}return A=m,hs(r,o),m=(o.flags&128)!==0,A||m?(A=o.stateNode,f=m&&typeof f.getDerivedStateFromError!="function"?null:A.render(),o.flags|=1,r!==null&&m?(o.child=kl(o,r.child,null,E),o.child=kl(o,null,f,E)):Ti(r,o,f,E),o.memoizedState=A.state,r=o.child):r=fs(r,o,E),r}function zn(r,o,f,m){return Pl(),o.flags|=256,Ti(r,o,f,m),o.child}var Or={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Yr(r){return{baseLanes:r,cachePool:Lf()}}function sh(r,o,f){return r=r!==null?r.childLanes&~f:0,o&&(r|=Ln),r}function Dr(r,o,f){var m=o.pendingProps,E=!1,A=(o.flags&128)!==0,F;if((F=A)||(F=r!==null&&r.memoizedState===null?!1:(Mi.current&2)!==0),F&&(E=!0,o.flags&=-129),F=(o.flags&32)!==0,o.flags&=-33,r===null){if(On){if(E?nl(o):so(),(r=oi)?(r=ow(r,fa),r=r!==null&&r.data!=="&"?r:null,r!==null&&(o.memoizedState={dehydrated:r,treeContext:As!==null?{id:Cs,overflow:Rs}:null,retryLane:536870912,hydrationErrors:null},f=Pv(r),f.return=o,o.child=f,ha=o,oi=null)):r=null,r===null)throw Rn(o);return bx(r)?o.lanes=32:o.lanes=536870912,null}var Y=m.children;return m=m.fallback,E?(so(),E=o.mode,Y=Hc({mode:"hidden",children:Y},E),m=Qs(m,E,f,null),Y.return=o,m.return=o,Y.sibling=m,o.child=Y,m=o.child,m.memoizedState=Yr(f),m.childLanes=sh(r,F,f),o.memoizedState=Or,us(null,m)):(nl(o),il(o,Y))}var fe=r.memoizedState;if(fe!==null&&(Y=fe.dehydrated,Y!==null)){if(A)o.flags&256?(nl(o),o.flags&=-257,o=Vc(r,o,f)):o.memoizedState!==null?(so(),o.child=r.child,o.flags|=128,o=null):(so(),Y=m.fallback,E=o.mode,m=Hc({mode:"visible",children:m.children},E),Y=Qs(Y,E,f,null),Y.flags|=2,m.return=o,Y.return=o,m.sibling=Y,o.child=m,kl(o,r.child,null,f),m=o.child,m.memoizedState=Yr(f),m.childLanes=sh(r,F,f),o.memoizedState=Or,o=us(null,m));else if(nl(o),bx(Y)){if(F=Y.nextSibling&&Y.nextSibling.dataset,F)var De=F.dgst;F=De,m=Error(n(419)),m.stack="",m.digest=F,Vu({value:m,source:null,stack:null}),o=Vc(r,o,f)}else if(mi||Zo(r,o,f,!1),F=(f&r.childLanes)!==0,mi||F){if(F=Jn,F!==null&&(m=_r(F,f),m!==0&&m!==fe.retryLane))throw fe.retryLane=m,Xo(r,m),h(F,r,m),Qf;_x(Y)||fn(),o=Vc(r,o,f)}else _x(Y)?(o.flags|=192,o.child=r.child,o=null):(r=fe.treeContext,oi=ks(Y.nextSibling),ha=o,On=!0,eo=null,fa=!1,r!==null&&Hu(o,r),o=il(o,m.children),o.flags|=4096);return o}return E?(so(),Y=m.fallback,E=o.mode,fe=r.child,De=fe.sibling,m=Ts(fe,{mode:"hidden",children:m.children}),m.subtreeFlags=fe.subtreeFlags&65011712,De!==null?Y=Ts(De,Y):(Y=Qs(Y,E,f,null),Y.flags|=2),Y.return=o,m.return=o,m.sibling=Y,o.child=m,us(null,m),m=o.child,Y=r.child.memoizedState,Y===null?Y=Yr(f):(E=Y.cachePool,E!==null?(fe=Kt._currentValue,E=E.parent!==fe?{parent:fe,pool:fe}:E):E=Lf(),Y={baseLanes:Y.baseLanes|f,cachePool:E}),m.memoizedState=Y,m.childLanes=sh(r,F,f),o.memoizedState=Or,us(r.child,m)):(nl(o),f=r.child,r=f.sibling,f=Ts(f,{mode:"visible",children:m.children}),f.return=o,f.sibling=null,r!==null&&(F=o.deletions,F===null?(o.deletions=[r],o.flags|=16):F.push(r)),o.child=f,o.memoizedState=null,f)}function il(r,o){return o=Hc({mode:"visible",children:o},r.mode),o.return=r,r.child=o}function Hc(r,o){return r=qa(22,r,null,o),r.lanes=0,r}function Vc(r,o,f){return kl(o,r.child,null,f),r=il(o,o.pendingProps.children),r.flags|=2,o.memoizedState=null,r}function Gl(r,o,f){r.lanes|=o;var m=r.alternate;m!==null&&(m.lanes|=o),io(r.return,o,f)}function oh(r,o,f,m,E,A){var F=r.memoizedState;F===null?r.memoizedState={isBackwards:o,rendering:null,renderingStartTime:0,last:m,tail:f,tailMode:E,treeForkCount:A}:(F.isBackwards=o,F.rendering=null,F.renderingStartTime=0,F.last=m,F.tail=f,F.tailMode=E,F.treeForkCount=A)}function lh(r,o,f){var m=o.pendingProps,E=m.revealOrder,A=m.tail;m=m.children;var F=Mi.current,Y=(F&2)!==0;if(Y?(F=F&1|2,o.flags|=128):F&=1,Se(Mi,F),Ti(r,o,m,f),m=On?Nc:0,!Y&&r!==null&&(r.flags&128)!==0)e:for(r=o.child;r!==null;){if(r.tag===13)r.memoizedState!==null&&Gl(r,f,o);else if(r.tag===19)Gl(r,f,o);else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===o)break e;for(;r.sibling===null;){if(r.return===null||r.return===o)break e;r=r.return}r.sibling.return=r.return,r=r.sibling}switch(E){case"forwards":for(f=o.child,E=null;f!==null;)r=f.alternate,r!==null&&Bf(r)===null&&(E=f),f=f.sibling;f=E,f===null?(E=o.child,o.child=null):(E=f.sibling,f.sibling=null),oh(o,!1,E,f,A,m);break;case"backwards":case"unstable_legacy-backwards":for(f=null,E=o.child,o.child=null;E!==null;){if(r=E.alternate,r!==null&&Bf(r)===null){o.child=E;break}r=E.sibling,E.sibling=f,f=E,E=r}oh(o,!0,f,null,A,m);break;case"together":oh(o,!1,null,null,void 0,m);break;default:o.memoizedState=null}return o.child}function fs(r,o,f){if(r!==null&&(o.dependencies=r.dependencies),Ir|=o.lanes,(f&o.childLanes)===0)if(r!==null){if(Zo(r,o,f,!1),(f&o.childLanes)===0)return null}else return null;if(r!==null&&o.child!==r.child)throw Error(n(153));if(o.child!==null){for(r=o.child,f=Ts(r,r.pendingProps),o.child=f,f.return=o;r.sibling!==null;)r=r.sibling,f=f.sibling=Ts(r,r.pendingProps),f.return=o;f.sibling=null}return o.child}function al(r,o){return(r.lanes&o)!==0?!0:(r=r.dependencies,!!(r!==null&&Oc(r)))}function ch(r,o,f){switch(o.tag){case 3:Je(o,o.stateNode.containerInfo),no(o,Kt,r.memoizedState.cache),Pl();break;case 27:case 5:St(o);break;case 4:Je(o,o.stateNode.containerInfo);break;case 10:no(o,o.type,o.memoizedProps.value);break;case 31:if(o.memoizedState!==null)return o.flags|=128,om(o),null;break;case 13:var m=o.memoizedState;if(m!==null)return m.dehydrated!==null?(nl(o),o.flags|=128,null):(f&o.child.childLanes)!==0?Dr(r,o,f):(nl(o),r=fs(r,o,f),r!==null?r.sibling:null);nl(o);break;case 19:var E=(r.flags&128)!==0;if(m=(f&o.childLanes)!==0,m||(Zo(r,o,f,!1),m=(f&o.childLanes)!==0),E){if(m)return lh(r,o,f);o.flags|=128}if(E=o.memoizedState,E!==null&&(E.rendering=null,E.tail=null,E.lastEffect=null),Se(Mi,Mi.current),m)break;return null;case 22:return o.lanes=0,Nr(r,o,f,o.pendingProps);case 24:no(o,Kt,r.memoizedState.cache)}return fs(r,o,f)}function $f(r,o,f){if(r!==null)if(r.memoizedProps!==o.pendingProps)mi=!0;else{if(!al(r,f)&&(o.flags&128)===0)return mi=!1,ch(r,o,f);mi=(r.flags&131072)!==0}else mi=!1,On&&(o.flags&1048576)!==0&&qp(o,Nc,o.index);switch(o.lanes=0,o.tag){case 16:e:{var m=o.pendingProps;if(r=Fl(o.elementType),o.type=r,typeof r=="function")Xa(r)?(m=Ea(r,m),o.tag=1,o=Ma(null,o,r,m,f)):(o.tag=0,o=kc(null,o,r,m,f));else{if(r!=null){var E=r.$$typeof;if(E===O){o.tag=11,o=ih(null,o,r,m,f);break e}else if(E===z){o.tag=14,o=ah(null,o,r,m,f);break e}}throw o=K(r)||r,Error(n(306,o,""))}}return o;case 0:return kc(r,o,o.type,o.pendingProps,f);case 1:return m=o.type,E=Ea(m,o.pendingProps),Ma(r,o,m,E,f);case 3:e:{if(Je(o,o.stateNode.containerInfo),r===null)throw Error(n(387));m=o.pendingProps;var A=o.memoizedState;E=A.element,im(r,o),Hl(o,m,null,f);var F=o.memoizedState;if(m=F.cache,no(o,Kt,m),m!==A.cache&&Uf(o,[Kt],f,!0),Yu(),m=F.element,A.isDehydrated)if(A={element:m,isDehydrated:!1,cache:F.cache},o.updateQueue.baseState=A,o.memoizedState=A,o.flags&256){o=zn(r,o,m,f);break e}else if(m!==E){E=nr(Error(n(424)),o),Vu(E),o=zn(r,o,m,f);break e}else{switch(r=o.stateNode.containerInfo,r.nodeType){case 9:r=r.body;break;default:r=r.nodeName==="HTML"?r.ownerDocument.body:r}for(oi=ks(r.firstChild),ha=o,On=!0,eo=null,fa=!0,f=Vv(o,null,m,f),o.child=f;f;)f.flags=f.flags&-3|4096,f=f.sibling}else{if(Pl(),m===E){o=fs(r,o,f);break e}Ti(r,o,m,f)}o=o.child}return o;case 26:return hs(r,o),r===null?(f=dw(o.type,null,o.pendingProps,null))?o.memoizedState=f:On||(f=o.type,r=o.pendingProps,m=x0(ve.current).createElement(f),m[gn]=o,m[V]=r,Ja(m,f,r),G(m),o.stateNode=m):o.memoizedState=dw(o.type,r.memoizedProps,o.pendingProps,r.memoizedState),null;case 27:return St(o),r===null&&On&&(m=o.stateNode=uw(o.type,o.pendingProps,ve.current),ha=o,fa=!0,E=oi,Zc(o.type)?(xx=E,oi=ks(m.firstChild)):oi=E),Ti(r,o,o.pendingProps.children,f),hs(r,o),r===null&&(o.flags|=4194304),o.child;case 5:return r===null&&On&&((E=m=oi)&&(m=DD(m,o.type,o.pendingProps,fa),m!==null?(o.stateNode=m,ha=o,oi=ks(m.firstChild),fa=!1,E=!0):E=!1),E||Rn(o)),St(o),E=o.type,A=o.pendingProps,F=r!==null?r.memoizedProps:null,m=A.children,gx(E,A)?m=null:F!==null&&gx(E,F)&&(o.flags|=32),o.memoizedState!==null&&(E=cm(r,o,Qb,null,null,f),Vm._currentValue=E),hs(r,o),Ti(r,o,m,f),o.child;case 6:return r===null&&On&&((r=f=oi)&&(f=UD(f,o.pendingProps,fa),f!==null?(o.stateNode=f,ha=o,oi=null,r=!0):r=!1),r||Rn(o)),null;case 13:return Dr(r,o,f);case 4:return Je(o,o.stateNode.containerInfo),m=o.pendingProps,r===null?o.child=kl(o,null,m,f):Ti(r,o,m,f),o.child;case 11:return ih(r,o,o.type,o.pendingProps,f);case 7:return Ti(r,o,o.pendingProps,f),o.child;case 8:return Ti(r,o,o.pendingProps.children,f),o.child;case 12:return Ti(r,o,o.pendingProps.children,f),o.child;case 10:return m=o.pendingProps,no(o,o.type,m.value),Ti(r,o,m.children,f),o.child;case 9:return E=o.type._context,m=o.pendingProps.children,zl(o),E=da(E),m=m(E),o.flags|=1,Ti(r,o,m,f),o.child;case 14:return ah(r,o,o.type,o.pendingProps,f);case 15:return Rr(r,o,o.type,o.pendingProps,f);case 19:return lh(r,o,f);case 31:return rh(r,o,f);case 22:return Nr(r,o,f,o.pendingProps);case 24:return zl(o),m=da(Kt),r===null?(E=Ns(),E===null&&(E=Jn,A=Kp(),E.pooledCache=A,A.refCount++,A!==null&&(E.pooledCacheLanes|=f),E=A),o.memoizedState={parent:m,cache:E},nm(o),no(o,Kt,E)):((r.lanes&f)!==0&&(im(r,o),Hl(o,null,null,f),Yu()),E=r.memoizedState,A=o.memoizedState,E.parent!==m?(E={parent:m,cache:m},o.memoizedState=E,o.lanes===0&&(o.memoizedState=o.updateQueue.baseState=E),no(o,Kt,m)):(m=A.cache,no(o,Kt,m),m!==E.cache&&Uf(o,[Kt],f,!0))),Ti(r,o,o.pendingProps.children,f),o.child;case 29:throw o.pendingProps}throw Error(n(156,o.tag))}function or(r){r.flags|=4}function rl(r,o,f,m,E){if((o=(r.mode&32)!==0)&&(o=!1),o){if(r.flags|=16777216,(E&335544128)===E)if(r.stateNode.complete)r.flags|=8192;else if(xt())r.flags|=8192;else throw an=qu,Gu}else r.flags&=-16777217}function co(r,o){if(o.type!=="stylesheet"||(o.state.loading&4)!==0)r.flags&=-16777217;else if(r.flags|=16777216,!yw(o))if(xt())r.flags|=8192;else throw an=qu,Gu}function jc(r,o){o!==null&&(r.flags|=4),r.flags&16384&&(o=r.tag!==22?yn():536870912,r.lanes|=o,Pr|=o)}function uh(r,o){if(!On)switch(r.tailMode){case"hidden":o=r.tail;for(var f=null;o!==null;)o.alternate!==null&&(f=o),o=o.sibling;f===null?r.tail=null:f.sibling=null;break;case"collapsed":f=r.tail;for(var m=null;f!==null;)f.alternate!==null&&(m=f),f=f.sibling;m===null?o||r.tail===null?r.tail=null:r.tail.sibling=null:m.sibling=null}}function ti(r){var o=r.alternate!==null&&r.alternate.child===r.child,f=0,m=0;if(o)for(var E=r.child;E!==null;)f|=E.lanes|E.childLanes,m|=E.subtreeFlags&65011712,m|=E.flags&65011712,E.return=r,E=E.sibling;else for(E=r.child;E!==null;)f|=E.lanes|E.childLanes,m|=E.subtreeFlags,m|=E.flags,E.return=r,E=E.sibling;return r.subtreeFlags|=m,r.childLanes=f,o}function Um(r,o,f){var m=o.pendingProps;switch(Yo(o),o.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ti(o),null;case 1:return ti(o),null;case 3:return f=o.stateNode,m=null,r!==null&&(m=r.memoizedState.cache),o.memoizedState.cache!==m&&(o.flags|=2048),qr(Kt),yt(),f.pendingContext&&(f.context=f.pendingContext,f.pendingContext=null),(r===null||r.child===null)&&(Il(o)?or(o):r===null||r.memoizedState.isDehydrated&&(o.flags&256)===0||(o.flags|=1024,Xp())),ti(o),null;case 26:var E=o.type,A=o.memoizedState;return r===null?(or(o),A!==null?(ti(o),co(o,A)):(ti(o),rl(o,E,null,m,f))):A?A!==r.memoizedState?(or(o),ti(o),co(o,A)):(ti(o),o.flags&=-16777217):(r=r.memoizedProps,r!==m&&or(o),ti(o),rl(o,E,r,m,f)),null;case 27:if($t(o),f=ve.current,E=o.type,r!==null&&o.stateNode!=null)r.memoizedProps!==m&&or(o);else{if(!m){if(o.stateNode===null)throw Error(n(166));return ti(o),null}r=Le.current,Il(o)?Df(o):(r=uw(E,m,f),o.stateNode=r,or(o))}return ti(o),null;case 5:if($t(o),E=o.type,r!==null&&o.stateNode!=null)r.memoizedProps!==m&&or(o);else{if(!m){if(o.stateNode===null)throw Error(n(166));return ti(o),null}if(A=Le.current,Il(o))Df(o);else{var F=x0(ve.current);switch(A){case 1:A=F.createElementNS("http://www.w3.org/2000/svg",E);break;case 2:A=F.createElementNS("http://www.w3.org/1998/Math/MathML",E);break;default:switch(E){case"svg":A=F.createElementNS("http://www.w3.org/2000/svg",E);break;case"math":A=F.createElementNS("http://www.w3.org/1998/Math/MathML",E);break;case"script":A=F.createElement("div"),A.innerHTML="<script><\/script>",A=A.removeChild(A.firstChild);break;case"select":A=typeof m.is=="string"?F.createElement("select",{is:m.is}):F.createElement("select"),m.multiple?A.multiple=!0:m.size&&(A.size=m.size);break;default:A=typeof m.is=="string"?F.createElement(E,{is:m.is}):F.createElement(E)}}A[gn]=o,A[V]=m;e:for(F=o.child;F!==null;){if(F.tag===5||F.tag===6)A.appendChild(F.stateNode);else if(F.tag!==4&&F.tag!==27&&F.child!==null){F.child.return=F,F=F.child;continue}if(F===o)break e;for(;F.sibling===null;){if(F.return===null||F.return===o)break e;F=F.return}F.sibling.return=F.return,F=F.sibling}o.stateNode=A;e:switch(Ja(A,E,m),E){case"button":case"input":case"select":case"textarea":m=!!m.autoFocus;break e;case"img":m=!0;break e;default:m=!1}m&&or(o)}}return ti(o),rl(o,o.type,r===null?null:r.memoizedProps,o.pendingProps,f),null;case 6:if(r&&o.stateNode!=null)r.memoizedProps!==m&&or(o);else{if(typeof m!="string"&&o.stateNode===null)throw Error(n(166));if(r=ve.current,Il(o)){if(r=o.stateNode,f=o.memoizedProps,m=null,E=ha,E!==null)switch(E.tag){case 27:case 5:m=E.memoizedProps}r[gn]=o,r=!!(r.nodeValue===f||m!==null&&m.suppressHydrationWarning===!0||$M(r.nodeValue,f)),r||Rn(o,!0)}else r=x0(r).createTextNode(m),r[gn]=o,o.stateNode=r}return ti(o),null;case 31:if(f=o.memoizedState,r===null||r.memoizedState!==null){if(m=Il(o),f!==null){if(r===null){if(!m)throw Error(n(318));if(r=o.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(n(557));r[gn]=o}else Pl(),(o.flags&128)===0&&(o.memoizedState=null),o.flags|=4;ti(o),r=!1}else f=Xp(),r!==null&&r.memoizedState!==null&&(r.memoizedState.hydrationErrors=f),r=!0;if(!r)return o.flags&256?(Tr(o),o):(Tr(o),null);if((o.flags&128)!==0)throw Error(n(558))}return ti(o),null;case 13:if(m=o.memoizedState,r===null||r.memoizedState!==null&&r.memoizedState.dehydrated!==null){if(E=Il(o),m!==null&&m.dehydrated!==null){if(r===null){if(!E)throw Error(n(318));if(E=o.memoizedState,E=E!==null?E.dehydrated:null,!E)throw Error(n(317));E[gn]=o}else Pl(),(o.flags&128)===0&&(o.memoizedState=null),o.flags|=4;ti(o),E=!1}else E=Xp(),r!==null&&r.memoizedState!==null&&(r.memoizedState.hydrationErrors=E),E=!0;if(!E)return o.flags&256?(Tr(o),o):(Tr(o),null)}return Tr(o),(o.flags&128)!==0?(o.lanes=f,o):(f=m!==null,r=r!==null&&r.memoizedState!==null,f&&(m=o.child,E=null,m.alternate!==null&&m.alternate.memoizedState!==null&&m.alternate.memoizedState.cachePool!==null&&(E=m.alternate.memoizedState.cachePool.pool),A=null,m.memoizedState!==null&&m.memoizedState.cachePool!==null&&(A=m.memoizedState.cachePool.pool),A!==E&&(m.flags|=2048)),f!==r&&f&&(o.child.flags|=8192),jc(o,o.updateQueue),ti(o),null);case 4:return yt(),r===null&&hx(o.stateNode.containerInfo),ti(o),null;case 10:return qr(o.type),ti(o),null;case 19:if(ce(Mi),m=o.memoizedState,m===null)return ti(o),null;if(E=(o.flags&128)!==0,A=m.rendering,A===null)if(E)uh(m,!1);else{if(Qn!==0||r!==null&&(r.flags&128)!==0)for(r=o.child;r!==null;){if(A=Bf(r),A!==null){for(o.flags|=128,uh(m,!1),r=A.updateQueue,o.updateQueue=r,jc(o,r),o.subtreeFlags=0,r=f,f=o.child;f!==null;)Oa(f,r),f=f.sibling;return Se(Mi,Mi.current&1|2),On&&$s(o,m.treeForkCount),o.child}r=r.sibling}m.tail!==null&&B()>zr&&(o.flags|=128,E=!0,uh(m,!1),o.lanes=4194304)}else{if(!E)if(r=Bf(A),r!==null){if(o.flags|=128,E=!0,r=r.updateQueue,o.updateQueue=r,jc(o,r),uh(m,!0),m.tail===null&&m.tailMode==="hidden"&&!A.alternate&&!On)return ti(o),null}else 2*B()-m.renderingStartTime>zr&&f!==536870912&&(o.flags|=128,E=!0,uh(m,!1),o.lanes=4194304);m.isBackwards?(A.sibling=o.child,o.child=A):(r=m.last,r!==null?r.sibling=A:o.child=A,m.last=A)}return m.tail!==null?(r=m.tail,m.rendering=r,m.tail=r.sibling,m.renderingStartTime=B(),r.sibling=null,f=Mi.current,Se(Mi,E?f&1|2:f&1),On&&$s(o,m.treeForkCount),r):(ti(o),null);case 22:case 23:return Tr(o),Ua(),m=o.memoizedState!==null,r!==null?r.memoizedState!==null!==m&&(o.flags|=8192):m&&(o.flags|=8192),m?(f&536870912)!==0&&(o.flags&128)===0&&(ti(o),o.subtreeFlags&6&&(o.flags|=8192)):ti(o),f=o.updateQueue,f!==null&&jc(o,f.retryQueue),f=null,r!==null&&r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(f=r.memoizedState.cachePool.pool),m=null,o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(m=o.memoizedState.cachePool.pool),m!==f&&(o.flags|=2048),r!==null&&ce(Ko),null;case 24:return f=null,r!==null&&(f=r.memoizedState.cache),o.memoizedState.cache!==f&&(o.flags|=2048),qr(Kt),ti(o),null;case 25:return null;case 30:return null}throw Error(n(156,o.tag))}function ed(r,o){switch(Yo(o),o.tag){case 1:return r=o.flags,r&65536?(o.flags=r&-65537|128,o):null;case 3:return qr(Kt),yt(),r=o.flags,(r&65536)!==0&&(r&128)===0?(o.flags=r&-65537|128,o):null;case 26:case 27:case 5:return $t(o),null;case 31:if(o.memoizedState!==null){if(Tr(o),o.alternate===null)throw Error(n(340));Pl()}return r=o.flags,r&65536?(o.flags=r&-65537|128,o):null;case 13:if(Tr(o),r=o.memoizedState,r!==null&&r.dehydrated!==null){if(o.alternate===null)throw Error(n(340));Pl()}return r=o.flags,r&65536?(o.flags=r&-65537|128,o):null;case 19:return ce(Mi),null;case 4:return yt(),null;case 10:return qr(o.type),null;case 22:case 23:return Tr(o),Ua(),r!==null&&ce(Ko),r=o.flags,r&65536?(o.flags=r&-65537|128,o):null;case 24:return qr(Kt),null;case 25:return null;default:return null}}function ql(r,o){switch(Yo(o),o.tag){case 3:qr(Kt),yt();break;case 26:case 27:case 5:$t(o);break;case 4:yt();break;case 31:o.memoizedState!==null&&Tr(o);break;case 13:Tr(o);break;case 19:ce(Mi);break;case 10:qr(o.type);break;case 22:case 23:Tr(o),Ua(),r!==null&&ce(Ko);break;case 24:qr(Kt)}}function Ps(r,o){try{var f=o.updateQueue,m=f!==null?f.lastEffect:null;if(m!==null){var E=m.next;f=E;do{if((f.tag&r)===r){m=void 0;var A=f.create,F=f.inst;m=A(),F.destroy=m}f=f.next}while(f!==E)}}catch(Y){si(o,o.return,Y)}}function Zr(r,o,f){try{var m=o.updateQueue,E=m!==null?m.lastEffect:null;if(E!==null){var A=E.next;m=A;do{if((m.tag&r)===r){var F=m.inst,Y=F.destroy;if(Y!==void 0){F.destroy=void 0,E=o;var fe=f,De=Y;try{De()}catch(Ge){si(E,fe,Ge)}}}m=m.next}while(m!==A)}}catch(Ge){si(o,o.return,Ge)}}function sl(r){var o=r.updateQueue;if(o!==null){var f=r.stateNode;try{xa(o,f)}catch(m){si(r,r.return,m)}}}function Lm(r,o,f){f.props=Ea(r.type,r.memoizedProps),f.state=r.memoizedState;try{f.componentWillUnmount()}catch(m){si(r,o,m)}}function zs(r,o){try{var f=r.ref;if(f!==null){switch(r.tag){case 26:case 27:case 5:var m=r.stateNode;break;case 30:m=r.stateNode;break;default:m=r.stateNode}typeof f=="function"?r.refCleanup=f(m):f.current=m}}catch(E){si(r,o,E)}}function Ur(r,o){var f=r.ref,m=r.refCleanup;if(f!==null)if(typeof m=="function")try{m()}catch(E){si(r,o,E)}finally{r.refCleanup=null,r=r.alternate,r!=null&&(r.refCleanup=null)}else if(typeof f=="function")try{f(null)}catch(E){si(r,o,E)}else f.current=null}function Lr(r){var o=r.type,f=r.memoizedProps,m=r.stateNode;try{e:switch(o){case"button":case"input":case"select":case"textarea":f.autoFocus&&m.focus();break e;case"img":f.src?m.src=f.src:f.srcSet&&(m.srcset=f.srcSet)}}catch(E){si(r,r.return,E)}}function Kr(r,o,f){try{var m=r.stateNode;TD(m,r.type,f,o),m[V]=o}catch(E){si(r,r.return,E)}}function Yi(r){return r.tag===5||r.tag===3||r.tag===26||r.tag===27&&Zc(r.type)||r.tag===4}function Bs(r){e:for(;;){for(;r.sibling===null;){if(r.return===null||Yi(r.return))return null;r=r.return}for(r.sibling.return=r.return,r=r.sibling;r.tag!==5&&r.tag!==6&&r.tag!==18;){if(r.tag===27&&Zc(r.type)||r.flags&2||r.child===null||r.tag===4)continue e;r.child.return=r,r=r.child}if(!(r.flags&2))return r.stateNode}}function bn(r,o,f){var m=r.tag;if(m===5||m===6)r=r.stateNode,o?(f.nodeType===9?f.body:f.nodeName==="HTML"?f.ownerDocument.body:f).insertBefore(r,o):(o=f.nodeType===9?f.body:f.nodeName==="HTML"?f.ownerDocument.body:f,o.appendChild(r),f=f._reactRootContainer,f!=null||o.onclick!==null||(o.onclick=Es));else if(m!==4&&(m===27&&Zc(r.type)&&(f=r.stateNode,o=null),r=r.child,r!==null))for(bn(r,o,f),r=r.sibling;r!==null;)bn(r,o,f),r=r.sibling}function Xn(r,o,f){var m=r.tag;if(m===5||m===6)r=r.stateNode,o?f.insertBefore(r,o):f.appendChild(r);else if(m!==4&&(m===27&&Zc(r.type)&&(f=r.stateNode),r=r.child,r!==null))for(Xn(r,o,f),r=r.sibling;r!==null;)Xn(r,o,f),r=r.sibling}function Pi(r){var o=r.stateNode,f=r.memoizedProps;try{for(var m=r.type,E=o.attributes;E.length;)o.removeAttributeNode(E[0]);Ja(o,m,f),o[gn]=r,o[V]=f}catch(A){si(r,r.return,A)}}var Jr=!1,gi=!1,uo=!1,hh=typeof WeakSet=="function"?WeakSet:Set,Ai=null;function Gc(r,o){if(r=r.containerInfo,px=C0,r=Sf(r),Ec(r)){if("selectionStart"in r)var f={start:r.selectionStart,end:r.selectionEnd};else e:{f=(f=r.ownerDocument)&&f.defaultView||window;var m=f.getSelection&&f.getSelection();if(m&&m.rangeCount!==0){f=m.anchorNode;var E=m.anchorOffset,A=m.focusNode;m=m.focusOffset;try{f.nodeType,A.nodeType}catch{f=null;break e}var F=0,Y=-1,fe=-1,De=0,Ge=0,$e=r,Pe=null;t:for(;;){for(var Fe;$e!==f||E!==0&&$e.nodeType!==3||(Y=F+E),$e!==A||m!==0&&$e.nodeType!==3||(fe=F+m),$e.nodeType===3&&(F+=$e.nodeValue.length),(Fe=$e.firstChild)!==null;)Pe=$e,$e=Fe;for(;;){if($e===r)break t;if(Pe===f&&++De===E&&(Y=F),Pe===A&&++Ge===m&&(fe=F),(Fe=$e.nextSibling)!==null)break;$e=Pe,Pe=$e.parentNode}$e=Fe}f=Y===-1||fe===-1?null:{start:Y,end:fe}}else f=null}f=f||{start:0,end:0}}else f=null;for(mx={focusedElem:r,selectionRange:f},C0=!1,Ai=o;Ai!==null;)if(o=Ai,r=o.child,(o.subtreeFlags&1028)!==0&&r!==null)r.return=o,Ai=r;else for(;Ai!==null;){switch(o=Ai,A=o.alternate,r=o.flags,o.tag){case 0:if((r&4)!==0&&(r=o.updateQueue,r=r!==null?r.events:null,r!==null))for(f=0;f<r.length;f++)E=r[f],E.ref.impl=E.nextImpl;break;case 11:case 15:break;case 1:if((r&1024)!==0&&A!==null){r=void 0,f=o,E=A.memoizedProps,A=A.memoizedState,m=f.stateNode;try{var Ht=Ea(f.type,E);r=m.getSnapshotBeforeUpdate(Ht,A),m.__reactInternalSnapshotBeforeUpdate=r}catch(sn){si(f,f.return,sn)}}break;case 3:if((r&1024)!==0){if(r=o.stateNode.containerInfo,f=r.nodeType,f===9)yx(r);else if(f===1)switch(r.nodeName){case"HEAD":case"HTML":case"BODY":yx(r);break;default:r.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((r&1024)!==0)throw Error(n(163))}if(r=o.sibling,r!==null){r.return=o.return,Ai=r;break}Ai=o.return}}function p0(r,o,f){var m=f.flags;switch(f.tag){case 0:case 11:case 15:ho(r,f),m&4&&Ps(5,f);break;case 1:if(ho(r,f),m&4)if(r=f.stateNode,o===null)try{r.componentDidMount()}catch(F){si(f,f.return,F)}else{var E=Ea(f.type,o.memoizedProps);o=o.memoizedState;try{r.componentDidUpdate(E,o,r.__reactInternalSnapshotBeforeUpdate)}catch(F){si(f,f.return,F)}}m&64&&sl(f),m&512&&zs(f,f.return);break;case 3:if(ho(r,f),m&64&&(r=f.updateQueue,r!==null)){if(o=null,f.child!==null)switch(f.child.tag){case 27:case 5:o=f.child.stateNode;break;case 1:o=f.child.stateNode}try{xa(r,o)}catch(F){si(f,f.return,F)}}break;case 27:o===null&&m&4&&Pi(f);case 26:case 5:ho(r,f),o===null&&m&4&&Lr(f),m&512&&zs(f,f.return);break;case 12:ho(r,f);break;case 31:ho(r,f),m&4&&nd(r,f);break;case 13:ho(r,f),m&4&&Im(r,f),m&64&&(r=f.memoizedState,r!==null&&(r=r.dehydrated,r!==null&&(f=pD.bind(null,f),LD(r,f))));break;case 22:if(m=f.memoizedState!==null||Jr,!m){o=o!==null&&o.memoizedState!==null||gi,E=Jr;var A=gi;Jr=m,(gi=o)&&!A?Kn(r,f,(f.subtreeFlags&8772)!==0):ho(r,f),Jr=E,gi=A}break;case 30:break;default:ho(r,f)}}function td(r){var o=r.alternate;o!==null&&(r.alternate=null,td(o)),r.child=null,r.deletions=null,r.sibling=null,r.tag===5&&(o=r.stateNode,o!==null&&rt(o)),r.stateNode=null,r.return=null,r.dependencies=null,r.memoizedProps=null,r.memoizedState=null,r.pendingProps=null,r.stateNode=null,r.updateQueue=null}var Bn=null,Zi=!1;function Ia(r,o,f){for(f=f.child;f!==null;)ol(r,o,f),f=f.sibling}function ol(r,o,f){if(qe&&typeof qe.onCommitFiberUnmount=="function")try{qe.onCommitFiberUnmount(Xe,f)}catch{}switch(f.tag){case 26:gi||Ur(f,o),Ia(r,o,f),f.memoizedState?f.memoizedState.count--:f.stateNode&&(f=f.stateNode,f.parentNode.removeChild(f));break;case 27:gi||Ur(f,o);var m=Bn,E=Zi;Zc(f.type)&&(Bn=f.stateNode,Zi=!1),Ia(r,o,f),Fm(f.stateNode),Bn=m,Zi=E;break;case 5:gi||Ur(f,o);case 6:if(m=Bn,E=Zi,Bn=null,Ia(r,o,f),Bn=m,Zi=E,Bn!==null)if(Zi)try{(Bn.nodeType===9?Bn.body:Bn.nodeName==="HTML"?Bn.ownerDocument.body:Bn).removeChild(f.stateNode)}catch(A){si(f,o,A)}else try{Bn.removeChild(f.stateNode)}catch(A){si(f,o,A)}break;case 18:Bn!==null&&(Zi?(r=Bn,rw(r.nodeType===9?r.body:r.nodeName==="HTML"?r.ownerDocument.body:r,f.stateNode),dd(r)):rw(Bn,f.stateNode));break;case 4:m=Bn,E=Zi,Bn=f.stateNode.containerInfo,Zi=!0,Ia(r,o,f),Bn=m,Zi=E;break;case 0:case 11:case 14:case 15:Zr(2,f,o),gi||Zr(4,f,o),Ia(r,o,f);break;case 1:gi||(Ur(f,o),m=f.stateNode,typeof m.componentWillUnmount=="function"&&Lm(f,o,m)),Ia(r,o,f);break;case 21:Ia(r,o,f);break;case 22:gi=(m=gi)||f.memoizedState!==null,Ia(r,o,f),gi=m;break;default:Ia(r,o,f)}}function nd(r,o){if(o.memoizedState===null&&(r=o.alternate,r!==null&&(r=r.memoizedState,r!==null))){r=r.dehydrated;try{dd(r)}catch(f){si(o,o.return,f)}}}function Im(r,o){if(o.memoizedState===null&&(r=o.alternate,r!==null&&(r=r.memoizedState,r!==null&&(r=r.dehydrated,r!==null))))try{dd(r)}catch(f){si(o,o.return,f)}}function m0(r){switch(r.tag){case 31:case 13:case 19:var o=r.stateNode;return o===null&&(o=r.stateNode=new hh),o;case 22:return r=r.stateNode,o=r._retryCache,o===null&&(o=r._retryCache=new hh),o;default:throw Error(n(435,r.tag))}}function zi(r,o){var f=m0(r);o.forEach(function(m){if(!f.has(m)){f.add(m);var E=mD.bind(null,r,m);m.then(E,E)}})}function Pa(r,o){var f=o.deletions;if(f!==null)for(var m=0;m<f.length;m++){var E=f[m],A=r,F=o,Y=F;e:for(;Y!==null;){switch(Y.tag){case 27:if(Zc(Y.type)){Bn=Y.stateNode,Zi=!1;break e}break;case 5:Bn=Y.stateNode,Zi=!1;break e;case 3:case 4:Bn=Y.stateNode.containerInfo,Zi=!0;break e}Y=Y.return}if(Bn===null)throw Error(n(160));ol(A,F,E),Bn=null,Zi=!1,A=E.alternate,A!==null&&(A.return=null),E.return=null}if(o.subtreeFlags&13886)for(o=o.child;o!==null;)ll(o,r),o=o.sibling}var lr=null;function ll(r,o){var f=r.alternate,m=r.flags;switch(r.tag){case 0:case 11:case 14:case 15:Pa(o,r),Ci(r),m&4&&(Zr(3,r,r.return),Ps(3,r),Zr(5,r,r.return));break;case 1:Pa(o,r),Ci(r),m&512&&(gi||f===null||Ur(f,f.return)),m&64&&Jr&&(r=r.updateQueue,r!==null&&(m=r.callbacks,m!==null&&(f=r.shared.hiddenCallbacks,r.shared.hiddenCallbacks=f===null?m:f.concat(m))));break;case 26:var E=lr;if(Pa(o,r),Ci(r),m&512&&(gi||f===null||Ur(f,f.return)),m&4){var A=f!==null?f.memoizedState:null;if(m=r.memoizedState,f===null)if(m===null)if(r.stateNode===null){e:{m=r.type,f=r.memoizedProps,E=E.ownerDocument||E;t:switch(m){case"title":A=E.getElementsByTagName("title")[0],(!A||A[ct]||A[gn]||A.namespaceURI==="http://www.w3.org/2000/svg"||A.hasAttribute("itemprop"))&&(A=E.createElement(m),E.head.insertBefore(A,E.querySelector("head > title"))),Ja(A,m,f),A[gn]=r,G(A),m=A;break e;case"link":var F=gw("link","href",E).get(m+(f.href||""));if(F){for(var Y=0;Y<F.length;Y++)if(A=F[Y],A.getAttribute("href")===(f.href==null||f.href===""?null:f.href)&&A.getAttribute("rel")===(f.rel==null?null:f.rel)&&A.getAttribute("title")===(f.title==null?null:f.title)&&A.getAttribute("crossorigin")===(f.crossOrigin==null?null:f.crossOrigin)){F.splice(Y,1);break t}}A=E.createElement(m),Ja(A,m,f),E.head.appendChild(A);break;case"meta":if(F=gw("meta","content",E).get(m+(f.content||""))){for(Y=0;Y<F.length;Y++)if(A=F[Y],A.getAttribute("content")===(f.content==null?null:""+f.content)&&A.getAttribute("name")===(f.name==null?null:f.name)&&A.getAttribute("property")===(f.property==null?null:f.property)&&A.getAttribute("http-equiv")===(f.httpEquiv==null?null:f.httpEquiv)&&A.getAttribute("charset")===(f.charSet==null?null:f.charSet)){F.splice(Y,1);break t}}A=E.createElement(m),Ja(A,m,f),E.head.appendChild(A);break;default:throw Error(n(468,m))}A[gn]=r,G(A),m=A}r.stateNode=m}else vw(E,r.type,r.stateNode);else r.stateNode=mw(E,m,r.memoizedProps);else A!==m?(A===null?f.stateNode!==null&&(f=f.stateNode,f.parentNode.removeChild(f)):A.count--,m===null?vw(E,r.type,r.stateNode):mw(E,m,r.memoizedProps)):m===null&&r.stateNode!==null&&Kr(r,r.memoizedProps,f.memoizedProps)}break;case 27:Pa(o,r),Ci(r),m&512&&(gi||f===null||Ur(f,f.return)),f!==null&&m&4&&Kr(r,r.memoizedProps,f.memoizedProps);break;case 5:if(Pa(o,r),Ci(r),m&512&&(gi||f===null||Ur(f,f.return)),r.flags&32){E=r.stateNode;try{Gi(E,"")}catch(Ht){si(r,r.return,Ht)}}m&4&&r.stateNode!=null&&(E=r.memoizedProps,Kr(r,E,f!==null?f.memoizedProps:E)),m&1024&&(uo=!0);break;case 6:if(Pa(o,r),Ci(r),m&4){if(r.stateNode===null)throw Error(n(162));m=r.memoizedProps,f=r.stateNode;try{f.nodeValue=m}catch(Ht){si(r,r.return,Ht)}}break;case 3:if(M0=null,E=lr,lr=S0(o.containerInfo),Pa(o,r),lr=E,Ci(r),m&4&&f!==null&&f.memoizedState.isDehydrated)try{dd(o.containerInfo)}catch(Ht){si(r,r.return,Ht)}uo&&(uo=!1,g0(r));break;case 4:m=lr,lr=S0(r.stateNode.containerInfo),Pa(o,r),Ci(r),lr=m;break;case 12:Pa(o,r),Ci(r);break;case 31:Pa(o,r),Ci(r),m&4&&(m=r.updateQueue,m!==null&&(r.updateQueue=null,zi(r,m)));break;case 13:Pa(o,r),Ci(r),r.child.flags&8192&&r.memoizedState!==null!=(f!==null&&f.memoizedState!==null)&&(mo=B()),m&4&&(m=r.updateQueue,m!==null&&(r.updateQueue=null,zi(r,m)));break;case 22:E=r.memoizedState!==null;var fe=f!==null&&f.memoizedState!==null,De=Jr,Ge=gi;if(Jr=De||E,gi=Ge||fe,Pa(o,r),gi=Ge,Jr=De,Ci(r),m&8192)e:for(o=r.stateNode,o._visibility=E?o._visibility&-2:o._visibility|1,E&&(f===null||fe||Jr||gi||Xl(r)),f=null,o=r;;){if(o.tag===5||o.tag===26){if(f===null){fe=f=o;try{if(A=fe.stateNode,E)F=A.style,typeof F.setProperty=="function"?F.setProperty("display","none","important"):F.display="none";else{Y=fe.stateNode;var $e=fe.memoizedProps.style,Pe=$e!=null&&$e.hasOwnProperty("display")?$e.display:null;Y.style.display=Pe==null||typeof Pe=="boolean"?"":(""+Pe).trim()}}catch(Ht){si(fe,fe.return,Ht)}}}else if(o.tag===6){if(f===null){fe=o;try{fe.stateNode.nodeValue=E?"":fe.memoizedProps}catch(Ht){si(fe,fe.return,Ht)}}}else if(o.tag===18){if(f===null){fe=o;try{var Fe=fe.stateNode;E?sw(Fe,!0):sw(fe.stateNode,!1)}catch(Ht){si(fe,fe.return,Ht)}}}else if((o.tag!==22&&o.tag!==23||o.memoizedState===null||o===r)&&o.child!==null){o.child.return=o,o=o.child;continue}if(o===r)break e;for(;o.sibling===null;){if(o.return===null||o.return===r)break e;f===o&&(f=null),o=o.return}f===o&&(f=null),o.sibling.return=o.return,o=o.sibling}m&4&&(m=r.updateQueue,m!==null&&(f=m.retryQueue,f!==null&&(m.retryQueue=null,zi(r,f))));break;case 19:Pa(o,r),Ci(r),m&4&&(m=r.updateQueue,m!==null&&(r.updateQueue=null,zi(r,m)));break;case 30:break;case 21:break;default:Pa(o,r),Ci(r)}}function Ci(r){var o=r.flags;if(o&2){try{for(var f,m=r.return;m!==null;){if(Yi(m)){f=m;break}m=m.return}if(f==null)throw Error(n(160));switch(f.tag){case 27:var E=f.stateNode,A=Bs(r);Xn(r,A,E);break;case 5:var F=f.stateNode;f.flags&32&&(Gi(F,""),f.flags&=-33);var Y=Bs(r);Xn(r,Y,F);break;case 3:case 4:var fe=f.stateNode.containerInfo,De=Bs(r);bn(r,De,fe);break;default:throw Error(n(161))}}catch(Ge){si(r,r.return,Ge)}r.flags&=-3}o&4096&&(r.flags&=-4097)}function g0(r){if(r.subtreeFlags&1024)for(r=r.child;r!==null;){var o=r;g0(o),o.tag===5&&o.flags&1024&&o.stateNode.reset(),r=r.sibling}}function ho(r,o){if(o.subtreeFlags&8772)for(o=o.child;o!==null;)p0(r,o.alternate,o),o=o.sibling}function Xl(r){for(r=r.child;r!==null;){var o=r;switch(o.tag){case 0:case 11:case 14:case 15:Zr(4,o,o.return),Xl(o);break;case 1:Ur(o,o.return);var f=o.stateNode;typeof f.componentWillUnmount=="function"&&Lm(o,o.return,f),Xl(o);break;case 27:Fm(o.stateNode);case 26:case 5:Ur(o,o.return),Xl(o);break;case 22:o.memoizedState===null&&Xl(o);break;case 30:Xl(o);break;default:Xl(o)}r=r.sibling}}function Kn(r,o,f){for(f=f&&(o.subtreeFlags&8772)!==0,o=o.child;o!==null;){var m=o.alternate,E=r,A=o,F=A.flags;switch(A.tag){case 0:case 11:case 15:Kn(E,A,f),Ps(4,A);break;case 1:if(Kn(E,A,f),m=A,E=m.stateNode,typeof E.componentDidMount=="function")try{E.componentDidMount()}catch(De){si(m,m.return,De)}if(m=A,E=m.updateQueue,E!==null){var Y=m.stateNode;try{var fe=E.shared.hiddenCallbacks;if(fe!==null)for(E.shared.hiddenCallbacks=null,E=0;E<fe.length;E++)Ds(fe[E],Y)}catch(De){si(m,m.return,De)}}f&&F&64&&sl(A),zs(A,A.return);break;case 27:Pi(A);case 26:case 5:Kn(E,A,f),f&&m===null&&F&4&&Lr(A),zs(A,A.return);break;case 12:Kn(E,A,f);break;case 31:Kn(E,A,f),f&&F&4&&nd(E,A);break;case 13:Kn(E,A,f),f&&F&4&&Im(E,A);break;case 22:A.memoizedState===null&&Kn(E,A,f),zs(A,A.return);break;case 30:break;default:Kn(E,A,f)}o=o.sibling}}function id(r,o){var f=null;r!==null&&r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(f=r.memoizedState.cachePool.pool),r=null,o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(r=o.memoizedState.cachePool.pool),r!==f&&(r!=null&&r.refCount++,f!=null&&ba(f))}function fo(r,o){r=null,o.alternate!==null&&(r=o.alternate.memoizedState.cache),o=o.memoizedState.cache,o!==r&&(o.refCount++,r!=null&&ba(r))}function ta(r,o,f,m){if(o.subtreeFlags&10256)for(o=o.child;o!==null;)bi(r,o,f,m),o=o.sibling}function bi(r,o,f,m){var E=o.flags;switch(o.tag){case 0:case 11:case 15:ta(r,o,f,m),E&2048&&Ps(9,o);break;case 1:ta(r,o,f,m);break;case 3:ta(r,o,f,m),E&2048&&(r=null,o.alternate!==null&&(r=o.alternate.memoizedState.cache),o=o.memoizedState.cache,o!==r&&(o.refCount++,r!=null&&ba(r)));break;case 12:if(E&2048){ta(r,o,f,m),r=o.stateNode;try{var A=o.memoizedProps,F=A.id,Y=A.onPostCommit;typeof Y=="function"&&Y(F,o.alternate===null?"mount":"update",r.passiveEffectDuration,-0)}catch(fe){si(o,o.return,fe)}}else ta(r,o,f,m);break;case 31:ta(r,o,f,m);break;case 13:ta(r,o,f,m);break;case 23:break;case 22:A=o.stateNode,F=o.alternate,o.memoizedState!==null?A._visibility&2?ta(r,o,f,m):qc(r,o):A._visibility&2?ta(r,o,f,m):(A._visibility|=2,cl(r,o,f,m,(o.subtreeFlags&10256)!==0||!1)),E&2048&&id(F,o);break;case 24:ta(r,o,f,m),E&2048&&fo(o.alternate,o);break;default:ta(r,o,f,m)}}function cl(r,o,f,m,E){for(E=E&&((o.subtreeFlags&10256)!==0||!1),o=o.child;o!==null;){var A=r,F=o,Y=f,fe=m,De=F.flags;switch(F.tag){case 0:case 11:case 15:cl(A,F,Y,fe,E),Ps(8,F);break;case 23:break;case 22:var Ge=F.stateNode;F.memoizedState!==null?Ge._visibility&2?cl(A,F,Y,fe,E):qc(A,F):(Ge._visibility|=2,cl(A,F,Y,fe,E)),E&&De&2048&&id(F.alternate,F);break;case 24:cl(A,F,Y,fe,E),E&&De&2048&&fo(F.alternate,F);break;default:cl(A,F,Y,fe,E)}o=o.sibling}}function qc(r,o){if(o.subtreeFlags&10256)for(o=o.child;o!==null;){var f=r,m=o,E=m.flags;switch(m.tag){case 22:qc(f,m),E&2048&&id(m.alternate,m);break;case 24:qc(f,m),E&2048&&fo(m.alternate,m);break;default:qc(f,m)}o=o.sibling}}var Ri=8192;function Wl(r,o,f){if(r.subtreeFlags&Ri)for(r=r.child;r!==null;)Bi(r,o,f),r=r.sibling}function Bi(r,o,f){switch(r.tag){case 26:Wl(r,o,f),r.flags&Ri&&r.memoizedState!==null&&XD(f,lr,r.memoizedState,r.memoizedProps);break;case 5:Wl(r,o,f);break;case 3:case 4:var m=lr;lr=S0(r.stateNode.containerInfo),Wl(r,o,f),lr=m;break;case 22:r.memoizedState===null&&(m=r.alternate,m!==null&&m.memoizedState!==null?(m=Ri,Ri=16777216,Wl(r,o,f),Ri=m):Wl(r,o,f));break;default:Wl(r,o,f)}}function cr(r){var o=r.alternate;if(o!==null&&(r=o.child,r!==null)){o.child=null;do o=r.sibling,r.sibling=null,r=o;while(r!==null)}}function Za(r){var o=r.deletions;if((r.flags&16)!==0){if(o!==null)for(var f=0;f<o.length;f++){var m=o[f];Ai=m,fh(m,r)}cr(r)}if(r.subtreeFlags&10256)for(r=r.child;r!==null;)Yl(r),r=r.sibling}function Yl(r){switch(r.tag){case 0:case 11:case 15:Za(r),r.flags&2048&&Zr(9,r,r.return);break;case 3:Za(r);break;case 12:Za(r);break;case 22:var o=r.stateNode;r.memoizedState!==null&&o._visibility&2&&(r.return===null||r.return.tag!==13)?(o._visibility&=-3,ad(r)):Za(r);break;default:Za(r)}}function ad(r){var o=r.deletions;if((r.flags&16)!==0){if(o!==null)for(var f=0;f<o.length;f++){var m=o[f];Ai=m,fh(m,r)}cr(r)}for(r=r.child;r!==null;){switch(o=r,o.tag){case 0:case 11:case 15:Zr(8,o,o.return),ad(o);break;case 22:f=o.stateNode,f._visibility&2&&(f._visibility&=-3,ad(o));break;default:ad(o)}r=r.sibling}}function fh(r,o){for(;Ai!==null;){var f=Ai;switch(f.tag){case 0:case 11:case 15:Zr(8,f,o);break;case 23:case 22:if(f.memoizedState!==null&&f.memoizedState.cachePool!==null){var m=f.memoizedState.cachePool.pool;m!=null&&m.refCount++}break;case 24:ba(f.memoizedState.cache)}if(m=f.child,m!==null)m.return=f,Ai=m;else e:for(f=r;Ai!==null;){m=Ai;var E=m.sibling,A=m.return;if(td(m),m===f){Ai=null;break e}if(E!==null){E.return=A,Ai=E;break e}Ai=A}}}var rd={getCacheForType:function(r){var o=da(Kt),f=o.data.get(r);return f===void 0&&(f=r(),o.data.set(r,f)),f},cacheSignal:function(){return da(Kt).controller.signal}},sd=typeof WeakMap=="function"?WeakMap:Map,Un=0,Jn=null,xn=null,Nn=0,Jt=0,Cn=null,pn=!1,wn=!1,ai=!1,Fi=0,Qn=0,Ir=0,po=0,ds=0,Ln=0,Pr=0,ps=null,za=null,ur=!1,mo=0,Xc=0,zr=1/0,Wc=null,Fs=null,xi=0,ms=null,Br=null,Qr=0,go=0,Zl=null,od=null,Kl=0,Jl=null;function Ka(){return(Un&2)!==0&&Nn!==0?Nn&-Nn:k.T!==null?ox():oa()}function c(){if(Ln===0)if((Nn&536870912)===0||On){var r=et;et<<=1,(et&3932160)===0&&(et=262144),Ln=r}else Ln=536870912;return r=ea.current,r!==null&&(r.flags|=32),Ln}function h(r,o,f){(r===Jn&&(Jt===2||Jt===9)||r.cancelPendingCommit!==null)&&(Te(r,0),I(r,Nn,Ln,!1)),fi(r,f),((Un&2)===0||r!==Jn)&&(r===Jn&&((Un&2)===0&&(po|=f),Qn===4&&I(r,Nn,Ln,!1)),ul(r))}function v(r,o,f){if((Un&6)!==0)throw Error(n(327));var m=!f&&(o&127)===0&&(o&r.expiredLanes)===0||lt(r,o),E=m?Ql(r,o):hr(r,o,!0),A=m;do{if(E===0){wn&&!m&&I(r,o,0,!1);break}else{if(f=r.current.alternate,A&&!R(f)){E=hr(r,o,!1),A=!1;continue}if(E===2){if(A=o,r.errorRecoveryDisabledLanes&A)var F=0;else F=r.pendingLanes&-536870913,F=F!==0?F:F&536870912?536870912:0;if(F!==0){o=F;e:{var Y=r;E=ps;var fe=Y.current.memoizedState.isDehydrated;if(fe&&(Te(Y,F).flags|=256),F=hr(Y,F,!1),F!==2){if(ai&&!fe){Y.errorRecoveryDisabledLanes|=A,po|=A,E=4;break e}A=za,za=E,A!==null&&(za===null?za=A:za.push.apply(za,A))}E=F}if(A=!1,E!==2)continue}}if(E===1){Te(r,0),I(r,o,0,!0);break}e:{switch(m=r,A=E,A){case 0:case 1:throw Error(n(345));case 4:if((o&4194048)!==o)break;case 6:I(m,o,Ln,!pn);break e;case 2:za=null;break;case 3:case 5:break;default:throw Error(n(329))}if((o&62914560)===o&&(E=mo+300-B(),10<E)){if(I(m,o,Ln,!pn),Ye(m,0,!0)!==0)break e;Qr=o,m.timeoutHandle=iw(M.bind(null,m,f,za,Wc,ur,o,Ln,po,Pr,pn,A,"Throttled",-0,0),E);break e}M(m,f,za,Wc,ur,o,Ln,po,Pr,pn,A,null,-0,0)}}break}while(!0);ul(r)}function M(r,o,f,m,E,A,F,Y,fe,De,Ge,$e,Pe,Fe){if(r.timeoutHandle=-1,$e=o.subtreeFlags,$e&8192||($e&16785408)===16785408){$e={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Es},Bi(o,A,$e);var Ht=(A&62914560)===A?mo-B():(A&4194048)===A?Xc-B():0;if(Ht=WD($e,Ht),Ht!==null){Qr=A,r.cancelPendingCommit=Ht(cn.bind(null,r,o,A,f,m,E,F,Y,fe,Ge,$e,null,Pe,Fe)),I(r,A,F,!De);return}}cn(r,o,A,f,m,E,F,Y,fe)}function R(r){for(var o=r;;){var f=o.tag;if((f===0||f===11||f===15)&&o.flags&16384&&(f=o.updateQueue,f!==null&&(f=f.stores,f!==null)))for(var m=0;m<f.length;m++){var E=f[m],A=E.getSnapshot;E=E.value;try{if(!pi(A(),E))return!1}catch{return!1}}if(f=o.child,o.subtreeFlags&16384&&f!==null)f.return=o,o=f;else{if(o===r)break;for(;o.sibling===null;){if(o.return===null||o.return===r)return!0;o=o.return}o.sibling.return=o.return,o=o.sibling}}return!0}function I(r,o,f,m){o&=~ds,o&=~po,r.suspendedLanes|=o,r.pingedLanes&=~o,m&&(r.warmLanes|=o),m=r.expirationTimes;for(var E=o;0<E;){var A=31-ae(E),F=1<<A;m[A]=-1,E&=~F}f!==0&&Ml(r,f,o)}function Q(){return(Un&6)===0?(Pm(0),!1):!0}function he(){if(xn!==null){if(Jt===0)var r=xn.return;else r=xn,Da=to=null,fm(r),Qo=null,$o=0,r=xn;for(;r!==null;)ql(r.alternate,r),r=r.return;xn=null}}function Te(r,o){var f=r.timeoutHandle;f!==-1&&(r.timeoutHandle=-1,RD(f)),f=r.cancelPendingCommit,f!==null&&(r.cancelPendingCommit=null,f()),Qr=0,he(),Jn=r,xn=f=Ts(r.current,null),Nn=o,Jt=0,Cn=null,pn=!1,wn=lt(r,o),ai=!1,Pr=Ln=ds=po=Ir=Qn=0,za=ps=null,ur=!1,(o&8)!==0&&(o|=o&32);var m=r.entangledLanes;if(m!==0)for(r=r.entanglements,m&=o;0<m;){var E=31-ae(m),A=1<<E;o|=r[E],m&=~A}return Fi=o,qo(),f}function We(r,o){ln=null,k.H=eh,o===Jo||o===cs?(o=If(),Jt=3):o===Gu?(o=If(),Jt=4):Jt=o===Qf?8:o!==null&&typeof o=="object"&&typeof o.then=="function"?6:1,Cn=o,xn===null&&(Qn=1,Jf(r,nr(o,r.current)))}function xt(){var r=ea.current;return r===null?!0:(Nn&4194048)===Nn?Xr===null:(Nn&62914560)===Nn||(Nn&536870912)!==0?r===Xr:!1}function Ot(){var r=k.H;return k.H=eh,r===null?eh:r}function It(){var r=k.A;return k.A=rd,r}function fn(){Qn=4,pn||(Nn&4194048)!==Nn&&ea.current!==null||(wn=!0),(Ir&134217727)===0&&(po&134217727)===0||Jn===null||I(Jn,Nn,Ln,!1)}function hr(r,o,f){var m=Un;Un|=2;var E=Ot(),A=It();(Jn!==r||Nn!==o)&&(Wc=null,Te(r,o)),o=!1;var F=Qn;e:do try{if(Jt!==0&&xn!==null){var Y=xn,fe=Cn;switch(Jt){case 8:he(),F=6;break e;case 3:case 2:case 9:case 6:ea.current===null&&(o=!0);var De=Jt;if(Jt=0,Cn=null,ft(r,Y,fe,De),f&&wn){F=0;break e}break;default:De=Jt,Jt=0,Cn=null,ft(r,Y,fe,De)}}dh(),F=Qn;break}catch(Ge){We(r,Ge)}while(!0);return o&&r.shellSuspendCounter++,Da=to=null,Un=m,k.H=E,k.A=A,xn===null&&(Jn=null,Nn=0,qo()),F}function dh(){for(;xn!==null;)Me(xn)}function Ql(r,o){var f=Un;Un|=2;var m=Ot(),E=It();Jn!==r||Nn!==o?(Wc=null,zr=B()+500,Te(r,o)):wn=lt(r,o);e:do try{if(Jt!==0&&xn!==null){o=xn;var A=Cn;t:switch(Jt){case 1:Jt=0,Cn=null,ft(r,o,A,1);break;case 2:case 9:if(Hv(A)){Jt=0,Cn=null,Be(o);break}o=function(){Jt!==2&&Jt!==9||Jn!==r||(Jt=7),ul(r)},A.then(o,o);break e;case 3:Jt=7;break e;case 4:Jt=5;break e;case 7:Hv(A)?(Jt=0,Cn=null,Be(o)):(Jt=0,Cn=null,ft(r,o,A,7));break;case 5:var F=null;switch(xn.tag){case 26:F=xn.memoizedState;case 5:case 27:var Y=xn;if(F?yw(F):Y.stateNode.complete){Jt=0,Cn=null;var fe=Y.sibling;if(fe!==null)xn=fe;else{var De=Y.return;De!==null?(xn=De,Wt(De)):xn=null}break t}}Jt=0,Cn=null,ft(r,o,A,5);break;case 6:Jt=0,Cn=null,ft(r,o,A,6);break;case 8:he(),Qn=6;break e;default:throw Error(n(462))}}Ie();break}catch(Ge){We(r,Ge)}while(!0);return Da=to=null,k.H=m,k.A=E,Un=f,xn!==null?0:(Jn=null,Nn=0,qo(),Qn)}function Ie(){for(;xn!==null&&!gt();)Me(xn)}function Me(r){var o=$f(r.alternate,r,Fi);r.memoizedProps=r.pendingProps,o===null?Wt(r):xn=o}function Be(r){var o=r,f=o.alternate;switch(o.tag){case 15:case 0:o=La(f,o,o.pendingProps,o.type,void 0,Nn);break;case 11:o=La(f,o,o.pendingProps,o.type.render,o.ref,Nn);break;case 5:fm(o);default:ql(f,o),o=xn=Oa(o,Fi),o=$f(f,o,Fi)}r.memoizedProps=r.pendingProps,o===null?Wt(r):xn=o}function ft(r,o,f,m){Da=to=null,fm(o),Qo=null,$o=0;var E=o.return;try{if(Cr(r,E,o,f,Nn)){Qn=1,Jf(r,nr(f,r.current)),xn=null;return}}catch(A){if(E!==null)throw xn=E,A;Qn=1,Jf(r,nr(f,r.current)),xn=null;return}o.flags&32768?(On||m===1?r=!0:wn||(Nn&536870912)!==0?r=!1:(pn=r=!0,(m===2||m===9||m===3||m===6)&&(m=ea.current,m!==null&&m.tag===13&&(m.flags|=16384))),li(o,r)):Wt(o)}function Wt(r){var o=r;do{if((o.flags&32768)!==0){li(o,pn);return}r=o.return;var f=Um(o.alternate,o,Fi);if(f!==null){xn=f;return}if(o=o.sibling,o!==null){xn=o;return}xn=o=r}while(o!==null);Qn===0&&(Qn=5)}function li(r,o){do{var f=ed(r.alternate,r);if(f!==null){f.flags&=32767,xn=f;return}if(f=r.return,f!==null&&(f.flags|=32768,f.subtreeFlags=0,f.deletions=null),!o&&(r=r.sibling,r!==null)){xn=r;return}xn=r=f}while(r!==null);Qn=6,xn=null}function cn(r,o,f,m,E,A,F,Y,fe){r.cancelPendingCommit=null;do ld();while(xi!==0);if((Un&6)!==0)throw Error(n(327));if(o!==null){if(o===r.current)throw Error(n(177));if(A=o.lanes|o.childLanes,A|=Af,$i(r,f,A,F,Y,fe),r===Jn&&(xn=Jn=null,Nn=0),Br=o,ms=r,Qr=f,go=A,Zl=E,od=m,(o.subtreeFlags&10256)!==0||(o.flags&10256)!==0?(r.callbackNode=null,r.callbackPriority=0,gD(Oe,function(){return kM(),null})):(r.callbackNode=null,r.callbackPriority=0),m=(o.flags&13878)!==0,(o.subtreeFlags&13878)!==0||m){m=k.T,k.T=null,E=Z.p,Z.p=2,F=Un,Un|=4;try{Gc(r,o,f)}finally{Un=F,Z.p=E,k.T=m}}xi=1,Fn(),na(),kn()}}function Fn(){if(xi===1){xi=0;var r=ms,o=Br,f=(o.flags&13878)!==0;if((o.subtreeFlags&13878)!==0||f){f=k.T,k.T=null;var m=Z.p;Z.p=2;var E=Un;Un|=4;try{ll(o,r);var A=mx,F=Sf(r.containerInfo),Y=A.focusedElem,fe=A.selectionRange;if(F!==Y&&Y&&Y.ownerDocument&&xf(Y.ownerDocument.documentElement,Y)){if(fe!==null&&Ec(Y)){var De=fe.start,Ge=fe.end;if(Ge===void 0&&(Ge=De),"selectionStart"in Y)Y.selectionStart=De,Y.selectionEnd=Math.min(Ge,Y.value.length);else{var $e=Y.ownerDocument||document,Pe=$e&&$e.defaultView||window;if(Pe.getSelection){var Fe=Pe.getSelection(),Ht=Y.textContent.length,sn=Math.min(fe.start,Ht),ui=fe.end===void 0?sn:Math.min(fe.end,Ht);!Fe.extend&&sn>ui&&(F=ui,ui=sn,sn=F);var we=Hp(Y,sn),_e=Hp(Y,ui);if(we&&_e&&(Fe.rangeCount!==1||Fe.anchorNode!==we.node||Fe.anchorOffset!==we.offset||Fe.focusNode!==_e.node||Fe.focusOffset!==_e.offset)){var Ne=$e.createRange();Ne.setStart(we.node,we.offset),Fe.removeAllRanges(),sn>ui?(Fe.addRange(Ne),Fe.extend(_e.node,_e.offset)):(Ne.setEnd(_e.node,_e.offset),Fe.addRange(Ne))}}}}for($e=[],Fe=Y;Fe=Fe.parentNode;)Fe.nodeType===1&&$e.push({element:Fe,left:Fe.scrollLeft,top:Fe.scrollTop});for(typeof Y.focus=="function"&&Y.focus(),Y=0;Y<$e.length;Y++){var Ze=$e[Y];Ze.element.scrollLeft=Ze.left,Ze.element.scrollTop=Ze.top}}C0=!!px,mx=px=null}finally{Un=E,Z.p=m,k.T=f}}r.current=o,xi=2}}function na(){if(xi===2){xi=0;var r=ms,o=Br,f=(o.flags&8772)!==0;if((o.subtreeFlags&8772)!==0||f){f=k.T,k.T=null;var m=Z.p;Z.p=2;var E=Un;Un|=4;try{p0(r,o.alternate,o)}finally{Un=E,Z.p=m,k.T=f}}xi=3}}function kn(){if(xi===4||xi===3){xi=0,te();var r=ms,o=Br,f=Qr,m=od;(o.subtreeFlags&10256)!==0||(o.flags&10256)!==0?xi=5:(xi=0,Br=ms=null,vo(r,r.pendingLanes));var E=r.pendingLanes;if(E===0&&(Fs=null),br(f),o=o.stateNode,qe&&typeof qe.onCommitFiberRoot=="function")try{qe.onCommitFiberRoot(Xe,o,void 0,(o.current.flags&128)===128)}catch{}if(m!==null){o=k.T,E=Z.p,Z.p=2,k.T=null;try{for(var A=r.onRecoverableError,F=0;F<m.length;F++){var Y=m[F];A(Y.value,{componentStack:Y.stack})}}finally{k.T=o,Z.p=E}}(Qr&3)!==0&&ld(),ul(r),E=r.pendingLanes,(f&261930)!==0&&(E&42)!==0?r===Jl?Kl++:(Kl=0,Jl=r):Kl=0,Pm(0)}}function vo(r,o){(r.pooledCacheLanes&=o)===0&&(o=r.pooledCache,o!=null&&(r.pooledCache=null,ba(o)))}function ld(){return Fn(),na(),kn(),kM()}function kM(){if(xi!==5)return!1;var r=ms,o=go;go=0;var f=br(Qr),m=k.T,E=Z.p;try{Z.p=32>f?32:f,k.T=null,f=Zl,Zl=null;var A=ms,F=Qr;if(xi=0,Br=ms=null,Qr=0,(Un&6)!==0)throw Error(n(331));var Y=Un;if(Un|=4,Yl(A.current),bi(A,A.current,F,f),Un=Y,Pm(0,!1),qe&&typeof qe.onPostCommitFiberRoot=="function")try{qe.onPostCommitFiberRoot(Xe,A)}catch{}return!0}finally{Z.p=E,k.T=m,vo(r,o)}}function HM(r,o,f){o=nr(f,o),o=Dm(r.stateNode,o,2),r=ro(r,o,2),r!==null&&(fi(r,2),ul(r))}function si(r,o,f){if(r.tag===3)HM(r,r,f);else for(;o!==null;){if(o.tag===3){HM(o,r,f);break}else if(o.tag===1){var m=o.stateNode;if(typeof o.type.getDerivedStateFromError=="function"||typeof m.componentDidCatch=="function"&&(Fs===null||!Fs.has(m))){r=nr(f,r),f=Fc(2),m=ro(o,f,2),m!==null&&(sr(f,m,o,r),fi(m,2),ul(m));break}}o=o.return}}function ax(r,o,f){var m=r.pingCache;if(m===null){m=r.pingCache=new sd;var E=new Set;m.set(o,E)}else E=m.get(o),E===void 0&&(E=new Set,m.set(o,E));E.has(f)||(ai=!0,E.add(f),r=dD.bind(null,r,o,f),o.then(r,r))}function dD(r,o,f){var m=r.pingCache;m!==null&&m.delete(o),r.pingedLanes|=r.suspendedLanes&f,r.warmLanes&=~f,Jn===r&&(Nn&f)===f&&(Qn===4||Qn===3&&(Nn&62914560)===Nn&&300>B()-mo?(Un&2)===0&&Te(r,0):ds|=f,Pr===Nn&&(Pr=0)),ul(r)}function VM(r,o){o===0&&(o=yn()),r=Xo(r,o),r!==null&&(fi(r,o),ul(r))}function pD(r){var o=r.memoizedState,f=0;o!==null&&(f=o.retryLane),VM(r,f)}function mD(r,o){var f=0;switch(r.tag){case 31:case 13:var m=r.stateNode,E=r.memoizedState;E!==null&&(f=E.retryLane);break;case 19:m=r.stateNode;break;case 22:m=r.stateNode._retryCache;break;default:throw Error(n(314))}m!==null&&m.delete(o),VM(r,f)}function gD(r,o){return mt(r,o)}var v0=null,cd=null,rx=!1,y0=!1,sx=!1,Yc=0;function ul(r){r!==cd&&r.next===null&&(cd===null?v0=cd=r:cd=cd.next=r),y0=!0,rx||(rx=!0,yD())}function Pm(r,o){if(!sx&&y0){sx=!0;do for(var f=!1,m=v0;m!==null;){if(r!==0){var E=m.pendingLanes;if(E===0)var A=0;else{var F=m.suspendedLanes,Y=m.pingedLanes;A=(1<<31-ae(42|r)+1)-1,A&=E&~(F&~Y),A=A&201326741?A&201326741|1:A?A|2:0}A!==0&&(f=!0,XM(m,A))}else A=Nn,A=Ye(m,m===Jn?A:0,m.cancelPendingCommit!==null||m.timeoutHandle!==-1),(A&3)===0||lt(m,A)||(f=!0,XM(m,A));m=m.next}while(f);sx=!1}}function vD(){jM()}function jM(){y0=rx=!1;var r=0;Yc!==0&&CD()&&(r=Yc);for(var o=B(),f=null,m=v0;m!==null;){var E=m.next,A=GM(m,o);A===0?(m.next=null,f===null?v0=E:f.next=E,E===null&&(cd=f)):(f=m,(r!==0||(A&3)!==0)&&(y0=!0)),m=E}xi!==0&&xi!==5||Pm(r),Yc!==0&&(Yc=0)}function GM(r,o){for(var f=r.suspendedLanes,m=r.pingedLanes,E=r.expirationTimes,A=r.pendingLanes&-62914561;0<A;){var F=31-ae(A),Y=1<<F,fe=E[F];fe===-1?((Y&f)===0||(Y&m)!==0)&&(E[F]=Gt(Y,o)):fe<=o&&(r.expiredLanes|=Y),A&=~Y}if(o=Jn,f=Nn,f=Ye(r,r===o?f:0,r.cancelPendingCommit!==null||r.timeoutHandle!==-1),m=r.callbackNode,f===0||r===o&&(Jt===2||Jt===9)||r.cancelPendingCommit!==null)return m!==null&&m!==null&&Bt(m),r.callbackNode=null,r.callbackPriority=0;if((f&3)===0||lt(r,f)){if(o=f&-f,o===r.callbackPriority)return o;switch(m!==null&&Bt(m),br(f)){case 2:case 8:f=ke;break;case 32:f=Oe;break;case 268435456:f=dt;break;default:f=Oe}return m=qM.bind(null,r),f=mt(f,m),r.callbackPriority=o,r.callbackNode=f,o}return m!==null&&m!==null&&Bt(m),r.callbackPriority=2,r.callbackNode=null,2}function qM(r,o){if(xi!==0&&xi!==5)return r.callbackNode=null,r.callbackPriority=0,null;var f=r.callbackNode;if(ld()&&r.callbackNode!==f)return null;var m=Nn;return m=Ye(r,r===Jn?m:0,r.cancelPendingCommit!==null||r.timeoutHandle!==-1),m===0?null:(v(r,m,o),GM(r,B()),r.callbackNode!=null&&r.callbackNode===f?qM.bind(null,r):null)}function XM(r,o){if(ld())return null;v(r,o,!0)}function yD(){ND(function(){(Un&6)!==0?mt(Re,vD):jM()})}function ox(){if(Yc===0){var r=ao;r===0&&(r=Ae,Ae<<=1,(Ae&261888)===0&&(Ae=256)),Yc=r}return Yc}function WM(r){return r==null||typeof r=="symbol"||typeof r=="boolean"?null:typeof r=="function"?r:wu(""+r)}function YM(r,o){var f=o.ownerDocument.createElement("input");return f.name=o.name,f.value=o.value,r.id&&f.setAttribute("form",r.id),o.parentNode.insertBefore(f,o),r=new FormData(r),f.parentNode.removeChild(f),r}function _D(r,o,f,m,E){if(o==="submit"&&f&&f.stateNode===E){var A=WM((E[V]||null).action),F=m.submitter;F&&(o=(o=F[V]||null)?WM(o.formAction):F.getAttribute("formAction"),o!==null&&(A=o,F=null));var Y=new Ru("action","action",null,m,E);r.push({event:Y,listeners:[{instance:null,listener:function(){if(m.defaultPrevented){if(Yc!==0){var fe=F?YM(E,F):new FormData(E);Am(f,{pending:!0,data:fe,method:E.method,action:A},null,fe)}}else typeof A=="function"&&(Y.preventDefault(),fe=F?YM(E,F):new FormData(E),Am(f,{pending:!0,data:fe,method:E.method,action:A},A,fe))},currentTarget:E}]})}}for(var lx=0;lx<Tf.length;lx++){var cx=Tf[lx],bD=cx.toLowerCase(),xD=cx[0].toUpperCase()+cx.slice(1);Na(bD,"on"+xD)}Na(tr,"onAnimationEnd"),Na(Vp,"onAnimationIteration"),Na(ws,"onAnimationStart"),Na("dblclick","onDoubleClick"),Na("focusin","onFocus"),Na("focusout","onBlur"),Na(Ac,"onTransitionRun"),Na(jo,"onTransitionStart"),Na(jp,"onTransitionCancel"),Na(wf,"onTransitionEnd"),me("onMouseEnter",["mouseout","mouseover"]),me("onMouseLeave",["mouseout","mouseover"]),me("onPointerEnter",["pointerout","pointerover"]),me("onPointerLeave",["pointerout","pointerover"]),be("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),be("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),be("onBeforeInput",["compositionend","keypress","textInput","paste"]),be("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),be("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),be("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var zm="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),SD=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(zm));function ZM(r,o){o=(o&4)!==0;for(var f=0;f<r.length;f++){var m=r[f],E=m.event;m=m.listeners;e:{var A=void 0;if(o)for(var F=m.length-1;0<=F;F--){var Y=m[F],fe=Y.instance,De=Y.currentTarget;if(Y=Y.listener,fe!==A&&E.isPropagationStopped())break e;A=Y,E.currentTarget=De;try{A(E)}catch(Ge){Go(Ge)}E.currentTarget=null,A=fe}else for(F=0;F<m.length;F++){if(Y=m[F],fe=Y.instance,De=Y.currentTarget,Y=Y.listener,fe!==A&&E.isPropagationStopped())break e;A=Y,E.currentTarget=De;try{A(E)}catch(Ge){Go(Ge)}E.currentTarget=null,A=fe}}}}function Dn(r,o){var f=o[de];f===void 0&&(f=o[de]=new Set);var m=r+"__bubble";f.has(m)||(KM(o,r,2,!1),f.add(m))}function ux(r,o,f){var m=0;o&&(m|=4),KM(f,r,m,o)}var _0="_reactListening"+Math.random().toString(36).slice(2);function hx(r){if(!r[_0]){r[_0]=!0,oe.forEach(function(f){f!=="selectionchange"&&(SD.has(f)||ux(f,!1,r),ux(f,!0,r))});var o=r.nodeType===9?r:r.ownerDocument;o===null||o[_0]||(o[_0]=!0,ux("selectionchange",!1,o))}}function KM(r,o,f,m){switch(ww(o)){case 2:var E=KD;break;case 8:E=JD;break;default:E=Tx}f=E.bind(null,o,f,r),E=void 0,!hf||o!=="touchstart"&&o!=="touchmove"&&o!=="wheel"||(E=!0),m?E!==void 0?r.addEventListener(o,f,{capture:!0,passive:E}):r.addEventListener(o,f,!0):E!==void 0?r.addEventListener(o,f,{passive:E}):r.addEventListener(o,f,!1)}function fx(r,o,f,m,E){var A=m;if((o&1)===0&&(o&2)===0&&m!==null)e:for(;;){if(m===null)return;var F=m.tag;if(F===3||F===4){var Y=m.stateNode.containerInfo;if(Y===E)break;if(F===4)for(F=m.return;F!==null;){var fe=F.tag;if((fe===3||fe===4)&&F.stateNode.containerInfo===E)return;F=F.return}for(;Y!==null;){if(F=st(Y),F===null)return;if(fe=F.tag,fe===5||fe===6||fe===26||fe===27){m=A=F;continue e}Y=Y.parentNode}}m=m.return}Mp(function(){var De=A,Ge=cf(f),$e=[];e:{var Pe=Js.get(r);if(Pe!==void 0){var Fe=Ru,Ht=r;switch(r){case"keypress":if(Cl(f)===0)break e;case"keydown":case"keyup":Fe=Op;break;case"focusin":Ht="focus",Fe=gf;break;case"focusout":Ht="blur",Fe=gf;break;case"beforeblur":case"afterblur":Fe=gf;break;case"click":if(f.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Fe=yv;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Fe=_v;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Fe=Zs;break;case tr:case Vp:case ws:Fe=Sv;break;case wf:Fe=Kb;break;case"scroll":case"scrollend":Fe=pf;break;case"wheel":Fe=zo;break;case"copy":case"cut":case"paste":Fe=Tp;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Fe=vf;break;case"toggle":case"beforetoggle":Fe=Up}var sn=(o&4)!==0,ui=!sn&&(r==="scroll"||r==="scrollend"),we=sn?Pe!==null?Pe+"Capture":null:Pe;sn=[];for(var _e=De,Ne;_e!==null;){var Ze=_e;if(Ne=Ze.stateNode,Ze=Ze.tag,Ze!==5&&Ze!==26&&Ze!==27||Ne===null||we===null||(Ze=Al(_e,we),Ze!=null&&sn.push(Bm(_e,Ze,Ne))),ui)break;_e=_e.return}0<sn.length&&(Pe=new Fe(Pe,Ht,null,f,Ge),$e.push({event:Pe,listeners:sn}))}}if((o&7)===0){e:{if(Pe=r==="mouseover"||r==="pointerover",Fe=r==="mouseout"||r==="pointerout",Pe&&f!==Tu&&(Ht=f.relatedTarget||f.fromElement)&&(st(Ht)||Ht[$]))break e;if((Fe||Pe)&&(Pe=Ge.window===Ge?Ge:(Pe=Ge.ownerDocument)?Pe.defaultView||Pe.parentWindow:window,Fe?(Ht=f.relatedTarget||f.toElement,Fe=De,Ht=Ht?st(Ht):null,Ht!==null&&(ui=s(Ht),sn=Ht.tag,Ht!==ui||sn!==5&&sn!==27&&sn!==6)&&(Ht=null)):(Fe=null,Ht=De),Fe!==Ht)){if(sn=yv,Ze="onMouseLeave",we="onMouseEnter",_e="mouse",(r==="pointerout"||r==="pointerover")&&(sn=vf,Ze="onPointerLeave",we="onPointerEnter",_e="pointer"),ui=Fe==null?Pe:vt(Fe),Ne=Ht==null?Pe:vt(Ht),Pe=new sn(Ze,_e+"leave",Fe,f,Ge),Pe.target=ui,Pe.relatedTarget=Ne,Ze=null,st(Ge)===De&&(sn=new sn(we,_e+"enter",Ht,f,Ge),sn.target=Ne,sn.relatedTarget=ui,Ze=sn),ui=Ze,Fe&&Ht)t:{for(sn=ED,we=Fe,_e=Ht,Ne=0,Ze=we;Ze;Ze=sn(Ze))Ne++;Ze=0;for(var tn=_e;tn;tn=sn(tn))Ze++;for(;0<Ne-Ze;)we=sn(we),Ne--;for(;0<Ze-Ne;)_e=sn(_e),Ze--;for(;Ne--;){if(we===_e||_e!==null&&we===_e.alternate){sn=we;break t}we=sn(we),_e=sn(_e)}sn=null}else sn=null;Fe!==null&&JM($e,Pe,Fe,sn,!1),Ht!==null&&ui!==null&&JM($e,ui,Ht,sn,!0)}}e:{if(Pe=De?vt(De):window,Fe=Pe.nodeName&&Pe.nodeName.toLowerCase(),Fe==="select"||Fe==="input"&&Pe.type==="file")var $n=Bp;else if(Pp(Pe))if(Iu)$n=Uv;else{$n=ko;var Xt=Pu}else Fe=Pe.nodeName,!Fe||Fe.toLowerCase()!=="input"||Pe.type!=="checkbox"&&Pe.type!=="radio"?De&&xr(De.elementType)&&($n=Bp):$n=Dv;if($n&&($n=$n(r,De))){bf($e,$n,f,Ge);break e}Xt&&Xt(r,Pe,De),r==="focusout"&&De&&Pe.type==="number"&&De.memoizedProps.value!=null&&jn(Pe,"number",Pe.value)}switch(Xt=De?vt(De):window,r){case"focusin":(Pp(Xt)||Xt.contentEditable==="true")&&(Mc=Xt,Ef=De,wc=null);break;case"focusout":wc=Ef=Mc=null;break;case"mousedown":Er=!0;break;case"contextmenu":case"mouseup":case"dragend":Er=!1,Mf($e,f,Ge);break;case"selectionchange":if(Lv)break;case"keydown":case"keyup":Mf($e,f,Ge)}var Tn;if(Rl)e:{switch(r){case"compositionstart":var In="onCompositionStart";break e;case"compositionend":In="onCompositionEnd";break e;case"compositionupdate":In="onCompositionUpdate";break e}In=void 0}else Fo?yf(r,f)&&(In="onCompositionEnd"):r==="keydown"&&f.keyCode===229&&(In="onCompositionStart");In&&(_a&&f.locale!=="ko"&&(Fo||In!=="onCompositionStart"?In==="onCompositionEnd"&&Fo&&(Tn=df()):(Lo=Ge,ff="value"in Lo?Lo.value:Lo.textContent,Fo=!0)),Xt=b0(De,In),0<Xt.length&&(In=new Ap(In,r,null,f,Ge),$e.push({event:In,listeners:Xt}),Tn?In.data=Tn:(Tn=yc(f),Tn!==null&&(In.data=Tn)))),(Tn=Nl?_f(r,f):Rv(r,f))&&(In=b0(De,"onBeforeInput"),0<In.length&&(Xt=new Ap("onBeforeInput","beforeinput",null,f,Ge),$e.push({event:Xt,listeners:In}),Xt.data=Tn)),_D($e,r,De,f,Ge)}ZM($e,o)})}function Bm(r,o,f){return{instance:r,listener:o,currentTarget:f}}function b0(r,o){for(var f=o+"Capture",m=[];r!==null;){var E=r,A=E.stateNode;if(E=E.tag,E!==5&&E!==26&&E!==27||A===null||(E=Al(r,f),E!=null&&m.unshift(Bm(r,E,A)),E=Al(r,o),E!=null&&m.push(Bm(r,E,A))),r.tag===3)return m;r=r.return}return[]}function ED(r){if(r===null)return null;do r=r.return;while(r&&r.tag!==5&&r.tag!==27);return r||null}function JM(r,o,f,m,E){for(var A=o._reactName,F=[];f!==null&&f!==m;){var Y=f,fe=Y.alternate,De=Y.stateNode;if(Y=Y.tag,fe!==null&&fe===m)break;Y!==5&&Y!==26&&Y!==27||De===null||(fe=De,E?(De=Al(f,A),De!=null&&F.unshift(Bm(f,De,fe))):E||(De=Al(f,A),De!=null&&F.push(Bm(f,De,fe)))),f=f.return}F.length!==0&&r.push({event:o,listeners:F})}var MD=/\r\n?/g,wD=/\u0000|\uFFFD/g;function QM(r){return(typeof r=="string"?r:""+r).replace(MD,`
`).replace(wD,"")}function $M(r,o){return o=QM(o),QM(r)===o}function ci(r,o,f,m,E,A){switch(f){case"children":typeof m=="string"?o==="body"||o==="textarea"&&m===""||Gi(r,m):(typeof m=="number"||typeof m=="bigint")&&o!=="body"&&Gi(r,""+m);break;case"className":kt(r,"class",m);break;case"tabIndex":kt(r,"tabindex",m);break;case"dir":case"role":case"viewBox":case"width":case"height":kt(r,f,m);break;case"style":wl(r,m,A);break;case"data":if(o!=="object"){kt(r,"data",m);break}case"src":case"href":if(m===""&&(o!=="a"||f!=="href")){r.removeAttribute(f);break}if(m==null||typeof m=="function"||typeof m=="symbol"||typeof m=="boolean"){r.removeAttribute(f);break}m=wu(""+m),r.setAttribute(f,m);break;case"action":case"formAction":if(typeof m=="function"){r.setAttribute(f,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof A=="function"&&(f==="formAction"?(o!=="input"&&ci(r,o,"name",E.name,E,null),ci(r,o,"formEncType",E.formEncType,E,null),ci(r,o,"formMethod",E.formMethod,E,null),ci(r,o,"formTarget",E.formTarget,E,null)):(ci(r,o,"encType",E.encType,E,null),ci(r,o,"method",E.method,E,null),ci(r,o,"target",E.target,E,null)));if(m==null||typeof m=="symbol"||typeof m=="boolean"){r.removeAttribute(f);break}m=wu(""+m),r.setAttribute(f,m);break;case"onClick":m!=null&&(r.onclick=Es);break;case"onScroll":m!=null&&Dn("scroll",r);break;case"onScrollEnd":m!=null&&Dn("scrollend",r);break;case"dangerouslySetInnerHTML":if(m!=null){if(typeof m!="object"||!("__html"in m))throw Error(n(61));if(f=m.__html,f!=null){if(E.children!=null)throw Error(n(60));r.innerHTML=f}}break;case"multiple":r.multiple=m&&typeof m!="function"&&typeof m!="symbol";break;case"muted":r.muted=m&&typeof m!="function"&&typeof m!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(m==null||typeof m=="function"||typeof m=="boolean"||typeof m=="symbol"){r.removeAttribute("xlink:href");break}f=wu(""+m),r.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",f);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":m!=null&&typeof m!="function"&&typeof m!="symbol"?r.setAttribute(f,""+m):r.removeAttribute(f);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":m&&typeof m!="function"&&typeof m!="symbol"?r.setAttribute(f,""):r.removeAttribute(f);break;case"capture":case"download":m===!0?r.setAttribute(f,""):m!==!1&&m!=null&&typeof m!="function"&&typeof m!="symbol"?r.setAttribute(f,m):r.removeAttribute(f);break;case"cols":case"rows":case"size":case"span":m!=null&&typeof m!="function"&&typeof m!="symbol"&&!isNaN(m)&&1<=m?r.setAttribute(f,m):r.removeAttribute(f);break;case"rowSpan":case"start":m==null||typeof m=="function"||typeof m=="symbol"||isNaN(m)?r.removeAttribute(f):r.setAttribute(f,m);break;case"popover":Dn("beforetoggle",r),Dn("toggle",r),_t(r,"popover",m);break;case"xlinkActuate":bt(r,"http://www.w3.org/1999/xlink","xlink:actuate",m);break;case"xlinkArcrole":bt(r,"http://www.w3.org/1999/xlink","xlink:arcrole",m);break;case"xlinkRole":bt(r,"http://www.w3.org/1999/xlink","xlink:role",m);break;case"xlinkShow":bt(r,"http://www.w3.org/1999/xlink","xlink:show",m);break;case"xlinkTitle":bt(r,"http://www.w3.org/1999/xlink","xlink:title",m);break;case"xlinkType":bt(r,"http://www.w3.org/1999/xlink","xlink:type",m);break;case"xmlBase":bt(r,"http://www.w3.org/XML/1998/namespace","xml:base",m);break;case"xmlLang":bt(r,"http://www.w3.org/XML/1998/namespace","xml:lang",m);break;case"xmlSpace":bt(r,"http://www.w3.org/XML/1998/namespace","xml:space",m);break;case"is":_t(r,"is",m);break;case"innerText":case"textContent":break;default:(!(2<f.length)||f[0]!=="o"&&f[0]!=="O"||f[1]!=="n"&&f[1]!=="N")&&(f=gv.get(f)||f,_t(r,f,m))}}function dx(r,o,f,m,E,A){switch(f){case"style":wl(r,m,A);break;case"dangerouslySetInnerHTML":if(m!=null){if(typeof m!="object"||!("__html"in m))throw Error(n(61));if(f=m.__html,f!=null){if(E.children!=null)throw Error(n(60));r.innerHTML=f}}break;case"children":typeof m=="string"?Gi(r,m):(typeof m=="number"||typeof m=="bigint")&&Gi(r,""+m);break;case"onScroll":m!=null&&Dn("scroll",r);break;case"onScrollEnd":m!=null&&Dn("scrollend",r);break;case"onClick":m!=null&&(r.onclick=Es);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!ye.hasOwnProperty(f))e:{if(f[0]==="o"&&f[1]==="n"&&(E=f.endsWith("Capture"),o=f.slice(2,E?f.length-7:void 0),A=r[V]||null,A=A!=null?A[f]:null,typeof A=="function"&&r.removeEventListener(o,A,E),typeof m=="function")){typeof A!="function"&&A!==null&&(f in r?r[f]=null:r.hasAttribute(f)&&r.removeAttribute(f)),r.addEventListener(o,m,E);break e}f in r?r[f]=m:m===!0?r.setAttribute(f,""):_t(r,f,m)}}}function Ja(r,o,f){switch(o){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Dn("error",r),Dn("load",r);var m=!1,E=!1,A;for(A in f)if(f.hasOwnProperty(A)){var F=f[A];if(F!=null)switch(A){case"src":m=!0;break;case"srcSet":E=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(n(137,o));default:ci(r,o,A,F,f,null)}}E&&ci(r,o,"srcSet",f.srcSet,f,null),m&&ci(r,o,"src",f.src,f,null);return;case"input":Dn("invalid",r);var Y=A=F=E=null,fe=null,De=null;for(m in f)if(f.hasOwnProperty(m)){var Ge=f[m];if(Ge!=null)switch(m){case"name":E=Ge;break;case"type":F=Ge;break;case"checked":fe=Ge;break;case"defaultChecked":De=Ge;break;case"value":A=Ge;break;case"defaultValue":Y=Ge;break;case"children":case"dangerouslySetInnerHTML":if(Ge!=null)throw Error(n(137,o));break;default:ci(r,o,m,Ge,f,null)}}ca(r,A,Y,fe,De,F,E,!1);return;case"select":Dn("invalid",r),m=F=A=null;for(E in f)if(f.hasOwnProperty(E)&&(Y=f[E],Y!=null))switch(E){case"value":A=Y;break;case"defaultValue":F=Y;break;case"multiple":m=Y;default:ci(r,o,E,Y,f,null)}o=A,f=F,r.multiple=!!m,o!=null?Li(r,!!m,o,!1):f!=null&&Li(r,!!m,f,!0);return;case"textarea":Dn("invalid",r),A=E=m=null;for(F in f)if(f.hasOwnProperty(F)&&(Y=f[F],Y!=null))switch(F){case"value":m=Y;break;case"defaultValue":E=Y;break;case"children":A=Y;break;case"dangerouslySetInnerHTML":if(Y!=null)throw Error(n(91));break;default:ci(r,o,F,Y,f,null)}Ei(r,m,E,A);return;case"option":for(fe in f)if(f.hasOwnProperty(fe)&&(m=f[fe],m!=null))switch(fe){case"selected":r.selected=m&&typeof m!="function"&&typeof m!="symbol";break;default:ci(r,o,fe,m,f,null)}return;case"dialog":Dn("beforetoggle",r),Dn("toggle",r),Dn("cancel",r),Dn("close",r);break;case"iframe":case"object":Dn("load",r);break;case"video":case"audio":for(m=0;m<zm.length;m++)Dn(zm[m],r);break;case"image":Dn("error",r),Dn("load",r);break;case"details":Dn("toggle",r);break;case"embed":case"source":case"link":Dn("error",r),Dn("load",r);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(De in f)if(f.hasOwnProperty(De)&&(m=f[De],m!=null))switch(De){case"children":case"dangerouslySetInnerHTML":throw Error(n(137,o));default:ci(r,o,De,m,f,null)}return;default:if(xr(o)){for(Ge in f)f.hasOwnProperty(Ge)&&(m=f[Ge],m!==void 0&&dx(r,o,Ge,m,f,void 0));return}}for(Y in f)f.hasOwnProperty(Y)&&(m=f[Y],m!=null&&ci(r,o,Y,m,f,null))}function TD(r,o,f,m){switch(o){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var E=null,A=null,F=null,Y=null,fe=null,De=null,Ge=null;for(Fe in f){var $e=f[Fe];if(f.hasOwnProperty(Fe)&&$e!=null)switch(Fe){case"checked":break;case"value":break;case"defaultValue":fe=$e;default:m.hasOwnProperty(Fe)||ci(r,o,Fe,null,m,$e)}}for(var Pe in m){var Fe=m[Pe];if($e=f[Pe],m.hasOwnProperty(Pe)&&(Fe!=null||$e!=null))switch(Pe){case"type":A=Fe;break;case"name":E=Fe;break;case"checked":De=Fe;break;case"defaultChecked":Ge=Fe;break;case"value":F=Fe;break;case"defaultValue":Y=Fe;break;case"children":case"dangerouslySetInnerHTML":if(Fe!=null)throw Error(n(137,o));break;default:Fe!==$e&&ci(r,o,Pe,Fe,m,$e)}}qn(r,F,Y,fe,De,Ge,A,E);return;case"select":Fe=F=Y=Pe=null;for(A in f)if(fe=f[A],f.hasOwnProperty(A)&&fe!=null)switch(A){case"value":break;case"multiple":Fe=fe;default:m.hasOwnProperty(A)||ci(r,o,A,null,m,fe)}for(E in m)if(A=m[E],fe=f[E],m.hasOwnProperty(E)&&(A!=null||fe!=null))switch(E){case"value":Pe=A;break;case"defaultValue":Y=A;break;case"multiple":F=A;default:A!==fe&&ci(r,o,E,A,m,fe)}o=Y,f=F,m=Fe,Pe!=null?Li(r,!!f,Pe,!1):!!m!=!!f&&(o!=null?Li(r,!!f,o,!0):Li(r,!!f,f?[]:"",!1));return;case"textarea":Fe=Pe=null;for(Y in f)if(E=f[Y],f.hasOwnProperty(Y)&&E!=null&&!m.hasOwnProperty(Y))switch(Y){case"value":break;case"children":break;default:ci(r,o,Y,null,m,E)}for(F in m)if(E=m[F],A=f[F],m.hasOwnProperty(F)&&(E!=null||A!=null))switch(F){case"value":Pe=E;break;case"defaultValue":Fe=E;break;case"children":break;case"dangerouslySetInnerHTML":if(E!=null)throw Error(n(91));break;default:E!==A&&ci(r,o,F,E,m,A)}Zn(r,Pe,Fe);return;case"option":for(var Ht in f)if(Pe=f[Ht],f.hasOwnProperty(Ht)&&Pe!=null&&!m.hasOwnProperty(Ht))switch(Ht){case"selected":r.selected=!1;break;default:ci(r,o,Ht,null,m,Pe)}for(fe in m)if(Pe=m[fe],Fe=f[fe],m.hasOwnProperty(fe)&&Pe!==Fe&&(Pe!=null||Fe!=null))switch(fe){case"selected":r.selected=Pe&&typeof Pe!="function"&&typeof Pe!="symbol";break;default:ci(r,o,fe,Pe,m,Fe)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var sn in f)Pe=f[sn],f.hasOwnProperty(sn)&&Pe!=null&&!m.hasOwnProperty(sn)&&ci(r,o,sn,null,m,Pe);for(De in m)if(Pe=m[De],Fe=f[De],m.hasOwnProperty(De)&&Pe!==Fe&&(Pe!=null||Fe!=null))switch(De){case"children":case"dangerouslySetInnerHTML":if(Pe!=null)throw Error(n(137,o));break;default:ci(r,o,De,Pe,m,Fe)}return;default:if(xr(o)){for(var ui in f)Pe=f[ui],f.hasOwnProperty(ui)&&Pe!==void 0&&!m.hasOwnProperty(ui)&&dx(r,o,ui,void 0,m,Pe);for(Ge in m)Pe=m[Ge],Fe=f[Ge],!m.hasOwnProperty(Ge)||Pe===Fe||Pe===void 0&&Fe===void 0||dx(r,o,Ge,Pe,m,Fe);return}}for(var we in f)Pe=f[we],f.hasOwnProperty(we)&&Pe!=null&&!m.hasOwnProperty(we)&&ci(r,o,we,null,m,Pe);for($e in m)Pe=m[$e],Fe=f[$e],!m.hasOwnProperty($e)||Pe===Fe||Pe==null&&Fe==null||ci(r,o,$e,Pe,m,Fe)}function ew(r){switch(r){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function AD(){if(typeof performance.getEntriesByType=="function"){for(var r=0,o=0,f=performance.getEntriesByType("resource"),m=0;m<f.length;m++){var E=f[m],A=E.transferSize,F=E.initiatorType,Y=E.duration;if(A&&Y&&ew(F)){for(F=0,Y=E.responseEnd,m+=1;m<f.length;m++){var fe=f[m],De=fe.startTime;if(De>Y)break;var Ge=fe.transferSize,$e=fe.initiatorType;Ge&&ew($e)&&(fe=fe.responseEnd,F+=Ge*(fe<Y?1:(Y-De)/(fe-De)))}if(--m,o+=8*(A+F)/(E.duration/1e3),r++,10<r)break}}if(0<r)return o/r/1e6}return navigator.connection&&(r=navigator.connection.downlink,typeof r=="number")?r:5}var px=null,mx=null;function x0(r){return r.nodeType===9?r:r.ownerDocument}function tw(r){switch(r){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function nw(r,o){if(r===0)switch(o){case"svg":return 1;case"math":return 2;default:return 0}return r===1&&o==="foreignObject"?0:r}function gx(r,o){return r==="textarea"||r==="noscript"||typeof o.children=="string"||typeof o.children=="number"||typeof o.children=="bigint"||typeof o.dangerouslySetInnerHTML=="object"&&o.dangerouslySetInnerHTML!==null&&o.dangerouslySetInnerHTML.__html!=null}var vx=null;function CD(){var r=window.event;return r&&r.type==="popstate"?r===vx?!1:(vx=r,!0):(vx=null,!1)}var iw=typeof setTimeout=="function"?setTimeout:void 0,RD=typeof clearTimeout=="function"?clearTimeout:void 0,aw=typeof Promise=="function"?Promise:void 0,ND=typeof queueMicrotask=="function"?queueMicrotask:typeof aw<"u"?function(r){return aw.resolve(null).then(r).catch(OD)}:iw;function OD(r){setTimeout(function(){throw r})}function Zc(r){return r==="head"}function rw(r,o){var f=o,m=0;do{var E=f.nextSibling;if(r.removeChild(f),E&&E.nodeType===8)if(f=E.data,f==="/$"||f==="/&"){if(m===0){r.removeChild(E),dd(o);return}m--}else if(f==="$"||f==="$?"||f==="$~"||f==="$!"||f==="&")m++;else if(f==="html")Fm(r.ownerDocument.documentElement);else if(f==="head"){f=r.ownerDocument.head,Fm(f);for(var A=f.firstChild;A;){var F=A.nextSibling,Y=A.nodeName;A[ct]||Y==="SCRIPT"||Y==="STYLE"||Y==="LINK"&&A.rel.toLowerCase()==="stylesheet"||f.removeChild(A),A=F}}else f==="body"&&Fm(r.ownerDocument.body);f=E}while(f);dd(o)}function sw(r,o){var f=r;r=0;do{var m=f.nextSibling;if(f.nodeType===1?o?(f._stashedDisplay=f.style.display,f.style.display="none"):(f.style.display=f._stashedDisplay||"",f.getAttribute("style")===""&&f.removeAttribute("style")):f.nodeType===3&&(o?(f._stashedText=f.nodeValue,f.nodeValue=""):f.nodeValue=f._stashedText||""),m&&m.nodeType===8)if(f=m.data,f==="/$"){if(r===0)break;r--}else f!=="$"&&f!=="$?"&&f!=="$~"&&f!=="$!"||r++;f=m}while(f)}function yx(r){var o=r.firstChild;for(o&&o.nodeType===10&&(o=o.nextSibling);o;){var f=o;switch(o=o.nextSibling,f.nodeName){case"HTML":case"HEAD":case"BODY":yx(f),rt(f);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(f.rel.toLowerCase()==="stylesheet")continue}r.removeChild(f)}}function DD(r,o,f,m){for(;r.nodeType===1;){var E=f;if(r.nodeName.toLowerCase()!==o.toLowerCase()){if(!m&&(r.nodeName!=="INPUT"||r.type!=="hidden"))break}else if(m){if(!r[ct])switch(o){case"meta":if(!r.hasAttribute("itemprop"))break;return r;case"link":if(A=r.getAttribute("rel"),A==="stylesheet"&&r.hasAttribute("data-precedence"))break;if(A!==E.rel||r.getAttribute("href")!==(E.href==null||E.href===""?null:E.href)||r.getAttribute("crossorigin")!==(E.crossOrigin==null?null:E.crossOrigin)||r.getAttribute("title")!==(E.title==null?null:E.title))break;return r;case"style":if(r.hasAttribute("data-precedence"))break;return r;case"script":if(A=r.getAttribute("src"),(A!==(E.src==null?null:E.src)||r.getAttribute("type")!==(E.type==null?null:E.type)||r.getAttribute("crossorigin")!==(E.crossOrigin==null?null:E.crossOrigin))&&A&&r.hasAttribute("async")&&!r.hasAttribute("itemprop"))break;return r;default:return r}}else if(o==="input"&&r.type==="hidden"){var A=E.name==null?null:""+E.name;if(E.type==="hidden"&&r.getAttribute("name")===A)return r}else return r;if(r=ks(r.nextSibling),r===null)break}return null}function UD(r,o,f){if(o==="")return null;for(;r.nodeType!==3;)if((r.nodeType!==1||r.nodeName!=="INPUT"||r.type!=="hidden")&&!f||(r=ks(r.nextSibling),r===null))return null;return r}function ow(r,o){for(;r.nodeType!==8;)if((r.nodeType!==1||r.nodeName!=="INPUT"||r.type!=="hidden")&&!o||(r=ks(r.nextSibling),r===null))return null;return r}function _x(r){return r.data==="$?"||r.data==="$~"}function bx(r){return r.data==="$!"||r.data==="$?"&&r.ownerDocument.readyState!=="loading"}function LD(r,o){var f=r.ownerDocument;if(r.data==="$~")r._reactRetry=o;else if(r.data!=="$?"||f.readyState!=="loading")o();else{var m=function(){o(),f.removeEventListener("DOMContentLoaded",m)};f.addEventListener("DOMContentLoaded",m),r._reactRetry=m}}function ks(r){for(;r!=null;r=r.nextSibling){var o=r.nodeType;if(o===1||o===3)break;if(o===8){if(o=r.data,o==="$"||o==="$!"||o==="$?"||o==="$~"||o==="&"||o==="F!"||o==="F")break;if(o==="/$"||o==="/&")return null}}return r}var xx=null;function lw(r){r=r.nextSibling;for(var o=0;r;){if(r.nodeType===8){var f=r.data;if(f==="/$"||f==="/&"){if(o===0)return ks(r.nextSibling);o--}else f!=="$"&&f!=="$!"&&f!=="$?"&&f!=="$~"&&f!=="&"||o++}r=r.nextSibling}return null}function cw(r){r=r.previousSibling;for(var o=0;r;){if(r.nodeType===8){var f=r.data;if(f==="$"||f==="$!"||f==="$?"||f==="$~"||f==="&"){if(o===0)return r;o--}else f!=="/$"&&f!=="/&"||o++}r=r.previousSibling}return null}function uw(r,o,f){switch(o=x0(f),r){case"html":if(r=o.documentElement,!r)throw Error(n(452));return r;case"head":if(r=o.head,!r)throw Error(n(453));return r;case"body":if(r=o.body,!r)throw Error(n(454));return r;default:throw Error(n(451))}}function Fm(r){for(var o=r.attributes;o.length;)r.removeAttributeNode(o[0]);rt(r)}var Hs=new Map,hw=new Set;function S0(r){return typeof r.getRootNode=="function"?r.getRootNode():r.nodeType===9?r:r.ownerDocument}var $l=Z.d;Z.d={f:ID,r:PD,D:zD,C:BD,L:FD,m:kD,X:VD,S:HD,M:jD};function ID(){var r=$l.f(),o=Q();return r||o}function PD(r){var o=tt(r);o!==null&&o.tag===5&&o.type==="form"?Cm(o):$l.r(r)}var ud=typeof document>"u"?null:document;function fw(r,o,f){var m=ud;if(m&&typeof o=="string"&&o){var E=Ct(o);E='link[rel="'+r+'"][href="'+E+'"]',typeof f=="string"&&(E+='[crossorigin="'+f+'"]'),hw.has(E)||(hw.add(E),r={rel:r,crossOrigin:f,href:o},m.querySelector(E)===null&&(o=m.createElement("link"),Ja(o,"link",r),G(o),m.head.appendChild(o)))}}function zD(r){$l.D(r),fw("dns-prefetch",r,null)}function BD(r,o){$l.C(r,o),fw("preconnect",r,o)}function FD(r,o,f){$l.L(r,o,f);var m=ud;if(m&&r&&o){var E='link[rel="preload"][as="'+Ct(o)+'"]';o==="image"&&f&&f.imageSrcSet?(E+='[imagesrcset="'+Ct(f.imageSrcSet)+'"]',typeof f.imageSizes=="string"&&(E+='[imagesizes="'+Ct(f.imageSizes)+'"]')):E+='[href="'+Ct(r)+'"]';var A=E;switch(o){case"style":A=hd(r);break;case"script":A=fd(r)}Hs.has(A)||(r=y({rel:"preload",href:o==="image"&&f&&f.imageSrcSet?void 0:r,as:o},f),Hs.set(A,r),m.querySelector(E)!==null||o==="style"&&m.querySelector(km(A))||o==="script"&&m.querySelector(Hm(A))||(o=m.createElement("link"),Ja(o,"link",r),G(o),m.head.appendChild(o)))}}function kD(r,o){$l.m(r,o);var f=ud;if(f&&r){var m=o&&typeof o.as=="string"?o.as:"script",E='link[rel="modulepreload"][as="'+Ct(m)+'"][href="'+Ct(r)+'"]',A=E;switch(m){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":A=fd(r)}if(!Hs.has(A)&&(r=y({rel:"modulepreload",href:r},o),Hs.set(A,r),f.querySelector(E)===null)){switch(m){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(f.querySelector(Hm(A)))return}m=f.createElement("link"),Ja(m,"link",r),G(m),f.head.appendChild(m)}}}function HD(r,o,f){$l.S(r,o,f);var m=ud;if(m&&r){var E=pt(m).hoistableStyles,A=hd(r);o=o||"default";var F=E.get(A);if(!F){var Y={loading:0,preload:null};if(F=m.querySelector(km(A)))Y.loading=5;else{r=y({rel:"stylesheet",href:r,"data-precedence":o},f),(f=Hs.get(A))&&Sx(r,f);var fe=F=m.createElement("link");G(fe),Ja(fe,"link",r),fe._p=new Promise(function(De,Ge){fe.onload=De,fe.onerror=Ge}),fe.addEventListener("load",function(){Y.loading|=1}),fe.addEventListener("error",function(){Y.loading|=2}),Y.loading|=4,E0(F,o,m)}F={type:"stylesheet",instance:F,count:1,state:Y},E.set(A,F)}}}function VD(r,o){$l.X(r,o);var f=ud;if(f&&r){var m=pt(f).hoistableScripts,E=fd(r),A=m.get(E);A||(A=f.querySelector(Hm(E)),A||(r=y({src:r,async:!0},o),(o=Hs.get(E))&&Ex(r,o),A=f.createElement("script"),G(A),Ja(A,"link",r),f.head.appendChild(A)),A={type:"script",instance:A,count:1,state:null},m.set(E,A))}}function jD(r,o){$l.M(r,o);var f=ud;if(f&&r){var m=pt(f).hoistableScripts,E=fd(r),A=m.get(E);A||(A=f.querySelector(Hm(E)),A||(r=y({src:r,async:!0,type:"module"},o),(o=Hs.get(E))&&Ex(r,o),A=f.createElement("script"),G(A),Ja(A,"link",r),f.head.appendChild(A)),A={type:"script",instance:A,count:1,state:null},m.set(E,A))}}function dw(r,o,f,m){var E=(E=ve.current)?S0(E):null;if(!E)throw Error(n(446));switch(r){case"meta":case"title":return null;case"style":return typeof f.precedence=="string"&&typeof f.href=="string"?(o=hd(f.href),f=pt(E).hoistableStyles,m=f.get(o),m||(m={type:"style",instance:null,count:0,state:null},f.set(o,m)),m):{type:"void",instance:null,count:0,state:null};case"link":if(f.rel==="stylesheet"&&typeof f.href=="string"&&typeof f.precedence=="string"){r=hd(f.href);var A=pt(E).hoistableStyles,F=A.get(r);if(F||(E=E.ownerDocument||E,F={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},A.set(r,F),(A=E.querySelector(km(r)))&&!A._p&&(F.instance=A,F.state.loading=5),Hs.has(r)||(f={rel:"preload",as:"style",href:f.href,crossOrigin:f.crossOrigin,integrity:f.integrity,media:f.media,hrefLang:f.hrefLang,referrerPolicy:f.referrerPolicy},Hs.set(r,f),A||GD(E,r,f,F.state))),o&&m===null)throw Error(n(528,""));return F}if(o&&m!==null)throw Error(n(529,""));return null;case"script":return o=f.async,f=f.src,typeof f=="string"&&o&&typeof o!="function"&&typeof o!="symbol"?(o=fd(f),f=pt(E).hoistableScripts,m=f.get(o),m||(m={type:"script",instance:null,count:0,state:null},f.set(o,m)),m):{type:"void",instance:null,count:0,state:null};default:throw Error(n(444,r))}}function hd(r){return'href="'+Ct(r)+'"'}function km(r){return'link[rel="stylesheet"]['+r+"]"}function pw(r){return y({},r,{"data-precedence":r.precedence,precedence:null})}function GD(r,o,f,m){r.querySelector('link[rel="preload"][as="style"]['+o+"]")?m.loading=1:(o=r.createElement("link"),m.preload=o,o.addEventListener("load",function(){return m.loading|=1}),o.addEventListener("error",function(){return m.loading|=2}),Ja(o,"link",f),G(o),r.head.appendChild(o))}function fd(r){return'[src="'+Ct(r)+'"]'}function Hm(r){return"script[async]"+r}function mw(r,o,f){if(o.count++,o.instance===null)switch(o.type){case"style":var m=r.querySelector('style[data-href~="'+Ct(f.href)+'"]');if(m)return o.instance=m,G(m),m;var E=y({},f,{"data-href":f.href,"data-precedence":f.precedence,href:null,precedence:null});return m=(r.ownerDocument||r).createElement("style"),G(m),Ja(m,"style",E),E0(m,f.precedence,r),o.instance=m;case"stylesheet":E=hd(f.href);var A=r.querySelector(km(E));if(A)return o.state.loading|=4,o.instance=A,G(A),A;m=pw(f),(E=Hs.get(E))&&Sx(m,E),A=(r.ownerDocument||r).createElement("link"),G(A);var F=A;return F._p=new Promise(function(Y,fe){F.onload=Y,F.onerror=fe}),Ja(A,"link",m),o.state.loading|=4,E0(A,f.precedence,r),o.instance=A;case"script":return A=fd(f.src),(E=r.querySelector(Hm(A)))?(o.instance=E,G(E),E):(m=f,(E=Hs.get(A))&&(m=y({},f),Ex(m,E)),r=r.ownerDocument||r,E=r.createElement("script"),G(E),Ja(E,"link",m),r.head.appendChild(E),o.instance=E);case"void":return null;default:throw Error(n(443,o.type))}else o.type==="stylesheet"&&(o.state.loading&4)===0&&(m=o.instance,o.state.loading|=4,E0(m,f.precedence,r));return o.instance}function E0(r,o,f){for(var m=f.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),E=m.length?m[m.length-1]:null,A=E,F=0;F<m.length;F++){var Y=m[F];if(Y.dataset.precedence===o)A=Y;else if(A!==E)break}A?A.parentNode.insertBefore(r,A.nextSibling):(o=f.nodeType===9?f.head:f,o.insertBefore(r,o.firstChild))}function Sx(r,o){r.crossOrigin==null&&(r.crossOrigin=o.crossOrigin),r.referrerPolicy==null&&(r.referrerPolicy=o.referrerPolicy),r.title==null&&(r.title=o.title)}function Ex(r,o){r.crossOrigin==null&&(r.crossOrigin=o.crossOrigin),r.referrerPolicy==null&&(r.referrerPolicy=o.referrerPolicy),r.integrity==null&&(r.integrity=o.integrity)}var M0=null;function gw(r,o,f){if(M0===null){var m=new Map,E=M0=new Map;E.set(f,m)}else E=M0,m=E.get(f),m||(m=new Map,E.set(f,m));if(m.has(r))return m;for(m.set(r,null),f=f.getElementsByTagName(r),E=0;E<f.length;E++){var A=f[E];if(!(A[ct]||A[gn]||r==="link"&&A.getAttribute("rel")==="stylesheet")&&A.namespaceURI!=="http://www.w3.org/2000/svg"){var F=A.getAttribute(o)||"";F=r+F;var Y=m.get(F);Y?Y.push(A):m.set(F,[A])}}return m}function vw(r,o,f){r=r.ownerDocument||r,r.head.insertBefore(f,o==="title"?r.querySelector("head > title"):null)}function qD(r,o,f){if(f===1||o.itemProp!=null)return!1;switch(r){case"meta":case"title":return!0;case"style":if(typeof o.precedence!="string"||typeof o.href!="string"||o.href==="")break;return!0;case"link":if(typeof o.rel!="string"||typeof o.href!="string"||o.href===""||o.onLoad||o.onError)break;switch(o.rel){case"stylesheet":return r=o.disabled,typeof o.precedence=="string"&&r==null;default:return!0}case"script":if(o.async&&typeof o.async!="function"&&typeof o.async!="symbol"&&!o.onLoad&&!o.onError&&o.src&&typeof o.src=="string")return!0}return!1}function yw(r){return!(r.type==="stylesheet"&&(r.state.loading&3)===0)}function XD(r,o,f,m){if(f.type==="stylesheet"&&(typeof m.media!="string"||matchMedia(m.media).matches!==!1)&&(f.state.loading&4)===0){if(f.instance===null){var E=hd(m.href),A=o.querySelector(km(E));if(A){o=A._p,o!==null&&typeof o=="object"&&typeof o.then=="function"&&(r.count++,r=w0.bind(r),o.then(r,r)),f.state.loading|=4,f.instance=A,G(A);return}A=o.ownerDocument||o,m=pw(m),(E=Hs.get(E))&&Sx(m,E),A=A.createElement("link"),G(A);var F=A;F._p=new Promise(function(Y,fe){F.onload=Y,F.onerror=fe}),Ja(A,"link",m),f.instance=A}r.stylesheets===null&&(r.stylesheets=new Map),r.stylesheets.set(f,o),(o=f.state.preload)&&(f.state.loading&3)===0&&(r.count++,f=w0.bind(r),o.addEventListener("load",f),o.addEventListener("error",f))}}var Mx=0;function WD(r,o){return r.stylesheets&&r.count===0&&A0(r,r.stylesheets),0<r.count||0<r.imgCount?function(f){var m=setTimeout(function(){if(r.stylesheets&&A0(r,r.stylesheets),r.unsuspend){var A=r.unsuspend;r.unsuspend=null,A()}},6e4+o);0<r.imgBytes&&Mx===0&&(Mx=62500*AD());var E=setTimeout(function(){if(r.waitingForImages=!1,r.count===0&&(r.stylesheets&&A0(r,r.stylesheets),r.unsuspend)){var A=r.unsuspend;r.unsuspend=null,A()}},(r.imgBytes>Mx?50:800)+o);return r.unsuspend=f,function(){r.unsuspend=null,clearTimeout(m),clearTimeout(E)}}:null}function w0(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)A0(this,this.stylesheets);else if(this.unsuspend){var r=this.unsuspend;this.unsuspend=null,r()}}}var T0=null;function A0(r,o){r.stylesheets=null,r.unsuspend!==null&&(r.count++,T0=new Map,o.forEach(YD,r),T0=null,w0.call(r))}function YD(r,o){if(!(o.state.loading&4)){var f=T0.get(r);if(f)var m=f.get(null);else{f=new Map,T0.set(r,f);for(var E=r.querySelectorAll("link[data-precedence],style[data-precedence]"),A=0;A<E.length;A++){var F=E[A];(F.nodeName==="LINK"||F.getAttribute("media")!=="not all")&&(f.set(F.dataset.precedence,F),m=F)}m&&f.set(null,m)}E=o.instance,F=E.getAttribute("data-precedence"),A=f.get(F)||m,A===m&&f.set(null,E),f.set(F,E),this.count++,m=w0.bind(this),E.addEventListener("load",m),E.addEventListener("error",m),A?A.parentNode.insertBefore(E,A.nextSibling):(r=r.nodeType===9?r.head:r,r.insertBefore(E,r.firstChild)),o.state.loading|=4}}var Vm={$$typeof:N,Provider:null,Consumer:null,_currentValue:ne,_currentValue2:ne,_threadCount:0};function ZD(r,o,f,m,E,A,F,Y,fe){this.tag=1,this.containerInfo=r,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=dn(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=dn(0),this.hiddenUpdates=dn(null),this.identifierPrefix=m,this.onUncaughtError=E,this.onCaughtError=A,this.onRecoverableError=F,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=fe,this.incompleteTransitions=new Map}function _w(r,o,f,m,E,A,F,Y,fe,De,Ge,$e){return r=new ZD(r,o,f,F,fe,De,Ge,$e,Y),o=1,A===!0&&(o|=24),A=qa(3,null,null,o),r.current=A,A.stateNode=r,o=Kp(),o.refCount++,r.pooledCache=o,o.refCount++,A.memoizedState={element:m,isDehydrated:f,cache:o},nm(A),r}function bw(r){return r?(r=Wo,r):Wo}function xw(r,o,f,m,E,A){E=bw(E),m.context===null?m.context=E:m.pendingContext=E,m=Os(o),m.payload={element:f},A=A===void 0?null:A,A!==null&&(m.callback=A),f=ro(r,m,o),f!==null&&(h(f,r,o),tl(f,r,o))}function Sw(r,o){if(r=r.memoizedState,r!==null&&r.dehydrated!==null){var f=r.retryLane;r.retryLane=f!==0&&f<o?f:o}}function wx(r,o){Sw(r,o),(r=r.alternate)&&Sw(r,o)}function Ew(r){if(r.tag===13||r.tag===31){var o=Xo(r,67108864);o!==null&&h(o,r,67108864),wx(r,67108864)}}function Mw(r){if(r.tag===13||r.tag===31){var o=Ka();o=er(o);var f=Xo(r,o);f!==null&&h(f,r,o),wx(r,o)}}var C0=!0;function KD(r,o,f,m){var E=k.T;k.T=null;var A=Z.p;try{Z.p=2,Tx(r,o,f,m)}finally{Z.p=A,k.T=E}}function JD(r,o,f,m){var E=k.T;k.T=null;var A=Z.p;try{Z.p=8,Tx(r,o,f,m)}finally{Z.p=A,k.T=E}}function Tx(r,o,f,m){if(C0){var E=Ax(m);if(E===null)fx(r,o,m,R0,f),Tw(r,m);else if($D(E,r,o,f,m))m.stopPropagation();else if(Tw(r,m),o&4&&-1<QD.indexOf(r)){for(;E!==null;){var A=tt(E);if(A!==null)switch(A.tag){case 3:if(A=A.stateNode,A.current.memoizedState.isDehydrated){var F=it(A.pendingLanes);if(F!==0){var Y=A;for(Y.pendingLanes|=2,Y.entangledLanes|=2;F;){var fe=1<<31-ae(F);Y.entanglements[1]|=fe,F&=~fe}ul(A),(Un&6)===0&&(zr=B()+500,Pm(0))}}break;case 31:case 13:Y=Xo(A,2),Y!==null&&h(Y,A,2),Q(),wx(A,2)}if(A=Ax(m),A===null&&fx(r,o,m,R0,f),A===E)break;E=A}E!==null&&m.stopPropagation()}else fx(r,o,m,null,f)}}function Ax(r){return r=cf(r),Cx(r)}var R0=null;function Cx(r){if(R0=null,r=st(r),r!==null){var o=s(r);if(o===null)r=null;else{var f=o.tag;if(f===13){if(r=l(o),r!==null)return r;r=null}else if(f===31){if(r=u(o),r!==null)return r;r=null}else if(f===3){if(o.stateNode.current.memoizedState.isDehydrated)return o.tag===3?o.stateNode.containerInfo:null;r=null}else o!==r&&(r=null)}}return R0=r,null}function ww(r){switch(r){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(se()){case Re:return 2;case ke:return 8;case Oe:case Tt:return 32;case dt:return 268435456;default:return 32}default:return 32}}var Rx=!1,Kc=null,Jc=null,Qc=null,jm=new Map,Gm=new Map,$c=[],QD="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function Tw(r,o){switch(r){case"focusin":case"focusout":Kc=null;break;case"dragenter":case"dragleave":Jc=null;break;case"mouseover":case"mouseout":Qc=null;break;case"pointerover":case"pointerout":jm.delete(o.pointerId);break;case"gotpointercapture":case"lostpointercapture":Gm.delete(o.pointerId)}}function qm(r,o,f,m,E,A){return r===null||r.nativeEvent!==A?(r={blockedOn:o,domEventName:f,eventSystemFlags:m,nativeEvent:A,targetContainers:[E]},o!==null&&(o=tt(o),o!==null&&Ew(o)),r):(r.eventSystemFlags|=m,o=r.targetContainers,E!==null&&o.indexOf(E)===-1&&o.push(E),r)}function $D(r,o,f,m,E){switch(o){case"focusin":return Kc=qm(Kc,r,o,f,m,E),!0;case"dragenter":return Jc=qm(Jc,r,o,f,m,E),!0;case"mouseover":return Qc=qm(Qc,r,o,f,m,E),!0;case"pointerover":var A=E.pointerId;return jm.set(A,qm(jm.get(A)||null,r,o,f,m,E)),!0;case"gotpointercapture":return A=E.pointerId,Gm.set(A,qm(Gm.get(A)||null,r,o,f,m,E)),!0}return!1}function Aw(r){var o=st(r.target);if(o!==null){var f=s(o);if(f!==null){if(o=f.tag,o===13){if(o=l(f),o!==null){r.blockedOn=o,en(r.priority,function(){Mw(f)});return}}else if(o===31){if(o=u(f),o!==null){r.blockedOn=o,en(r.priority,function(){Mw(f)});return}}else if(o===3&&f.stateNode.current.memoizedState.isDehydrated){r.blockedOn=f.tag===3?f.stateNode.containerInfo:null;return}}}r.blockedOn=null}function N0(r){if(r.blockedOn!==null)return!1;for(var o=r.targetContainers;0<o.length;){var f=Ax(r.nativeEvent);if(f===null){f=r.nativeEvent;var m=new f.constructor(f.type,f);Tu=m,f.target.dispatchEvent(m),Tu=null}else return o=tt(f),o!==null&&Ew(o),r.blockedOn=f,!1;o.shift()}return!0}function Cw(r,o,f){N0(r)&&f.delete(o)}function eU(){Rx=!1,Kc!==null&&N0(Kc)&&(Kc=null),Jc!==null&&N0(Jc)&&(Jc=null),Qc!==null&&N0(Qc)&&(Qc=null),jm.forEach(Cw),Gm.forEach(Cw)}function O0(r,o){r.blockedOn===o&&(r.blockedOn=null,Rx||(Rx=!0,i.unstable_scheduleCallback(i.unstable_NormalPriority,eU)))}var D0=null;function Rw(r){D0!==r&&(D0=r,i.unstable_scheduleCallback(i.unstable_NormalPriority,function(){D0===r&&(D0=null);for(var o=0;o<r.length;o+=3){var f=r[o],m=r[o+1],E=r[o+2];if(typeof m!="function"){if(Cx(m||f)===null)continue;break}var A=tt(f);A!==null&&(r.splice(o,3),o-=3,Am(A,{pending:!0,data:E,method:f.method,action:m},m,E))}}))}function dd(r){function o(fe){return O0(fe,r)}Kc!==null&&O0(Kc,r),Jc!==null&&O0(Jc,r),Qc!==null&&O0(Qc,r),jm.forEach(o),Gm.forEach(o);for(var f=0;f<$c.length;f++){var m=$c[f];m.blockedOn===r&&(m.blockedOn=null)}for(;0<$c.length&&(f=$c[0],f.blockedOn===null);)Aw(f),f.blockedOn===null&&$c.shift();if(f=(r.ownerDocument||r).$$reactFormReplay,f!=null)for(m=0;m<f.length;m+=3){var E=f[m],A=f[m+1],F=E[V]||null;if(typeof A=="function")F||Rw(f);else if(F){var Y=null;if(A&&A.hasAttribute("formAction")){if(E=A,F=A[V]||null)Y=F.formAction;else if(Cx(E)!==null)continue}else Y=F.action;typeof Y=="function"?f[m+1]=Y:(f.splice(m,3),m-=3),Rw(f)}}}function Nw(){function r(A){A.canIntercept&&A.info==="react-transition"&&A.intercept({handler:function(){return new Promise(function(F){return E=F})},focusReset:"manual",scroll:"manual"})}function o(){E!==null&&(E(),E=null),m||setTimeout(f,20)}function f(){if(!m&&!navigation.transition){var A=navigation.currentEntry;A&&A.url!=null&&navigation.navigate(A.url,{state:A.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var m=!1,E=null;return navigation.addEventListener("navigate",r),navigation.addEventListener("navigatesuccess",o),navigation.addEventListener("navigateerror",o),setTimeout(f,100),function(){m=!0,navigation.removeEventListener("navigate",r),navigation.removeEventListener("navigatesuccess",o),navigation.removeEventListener("navigateerror",o),E!==null&&(E(),E=null)}}}function Nx(r){this._internalRoot=r}U0.prototype.render=Nx.prototype.render=function(r){var o=this._internalRoot;if(o===null)throw Error(n(409));var f=o.current,m=Ka();xw(f,m,r,o,null,null)},U0.prototype.unmount=Nx.prototype.unmount=function(){var r=this._internalRoot;if(r!==null){this._internalRoot=null;var o=r.containerInfo;xw(r.current,2,null,r,null,null),Q(),o[$]=null}};function U0(r){this._internalRoot=r}U0.prototype.unstable_scheduleHydration=function(r){if(r){var o=oa();r={blockedOn:null,target:r,priority:o};for(var f=0;f<$c.length&&o!==0&&o<$c[f].priority;f++);$c.splice(f,0,r),f===0&&Aw(r)}};var Ow=e.version;if(Ow!=="19.2.3")throw Error(n(527,Ow,"19.2.3"));Z.findDOMNode=function(r){var o=r._reactInternals;if(o===void 0)throw typeof r.render=="function"?Error(n(188)):(r=Object.keys(r).join(","),Error(n(268,r)));return r=p(o),r=r!==null?g(r):null,r=r===null?null:r.stateNode,r};var tU={bundleType:0,version:"19.2.3",rendererPackageName:"react-dom",currentDispatcherRef:k,reconcilerVersion:"19.2.3"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var L0=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!L0.isDisabled&&L0.supportsFiber)try{Xe=L0.inject(tU),qe=L0}catch{}}return Wm.createRoot=function(r,o){if(!a(r))throw Error(n(299));var f=!1,m="",E=Om,A=f0,F=Kf;return o!=null&&(o.unstable_strictMode===!0&&(f=!0),o.identifierPrefix!==void 0&&(m=o.identifierPrefix),o.onUncaughtError!==void 0&&(E=o.onUncaughtError),o.onCaughtError!==void 0&&(A=o.onCaughtError),o.onRecoverableError!==void 0&&(F=o.onRecoverableError)),o=_w(r,1,!1,null,null,f,m,null,E,A,F,Nw),r[$]=o.current,hx(r),new Nx(o)},Wm.hydrateRoot=function(r,o,f){if(!a(r))throw Error(n(299));var m=!1,E="",A=Om,F=f0,Y=Kf,fe=null;return f!=null&&(f.unstable_strictMode===!0&&(m=!0),f.identifierPrefix!==void 0&&(E=f.identifierPrefix),f.onUncaughtError!==void 0&&(A=f.onUncaughtError),f.onCaughtError!==void 0&&(F=f.onCaughtError),f.onRecoverableError!==void 0&&(Y=f.onRecoverableError),f.formState!==void 0&&(fe=f.formState)),o=_w(r,1,!0,o,f??null,m,E,fe,A,F,Y,Nw),o.context=bw(null),f=o.current,m=Ka(),m=er(m),E=Os(m),E.callback=null,ro(f,E,m),f=m,o.current.lanes=f,fi(o,f),ul(o),r[$]=o.current,hx(r),new U0(o)},Wm.version="19.2.3",Wm}var Hw;function dU(){if(Hw)return Ux.exports;Hw=1;function i(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(i)}catch(e){console.error(e)}}return i(),Ux.exports=fU(),Ux.exports}var pU=dU();const mU=xu(pU);var ec={},I0={},C1=function(i,e){return C1=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(t[a]=n[a])},C1(i,e)};function uR(i,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");C1(i,e);function t(){this.constructor=i}i.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}var Jy=function(){return Jy=Object.assign||function(e){for(var t,n=1,a=arguments.length;n<a;n++){t=arguments[n];for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s])}return e},Jy.apply(this,arguments)};function gp(i,e){var t={};for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&e.indexOf(n)<0&&(t[n]=i[n]);if(i!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,n=Object.getOwnPropertySymbols(i);a<n.length;a++)e.indexOf(n[a])<0&&Object.prototype.propertyIsEnumerable.call(i,n[a])&&(t[n[a]]=i[n[a]]);return t}function hR(i,e,t,n){var a=arguments.length,s=a<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,l;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(i,e,t,n);else for(var u=i.length-1;u>=0;u--)(l=i[u])&&(s=(a<3?l(s):a>3?l(e,t,s):l(e,t))||s);return a>3&&s&&Object.defineProperty(e,t,s),s}function fR(i,e){return function(t,n){e(t,n,i)}}function dR(i,e,t,n,a,s){function l(S){if(S!==void 0&&typeof S!="function")throw new TypeError("Function expected");return S}for(var u=n.kind,d=u==="getter"?"get":u==="setter"?"set":"value",p=!e&&i?n.static?i:i.prototype:null,g=e||(p?Object.getOwnPropertyDescriptor(p,n.name):{}),y,_=!1,b=t.length-1;b>=0;b--){var x={};for(var T in n)x[T]=T==="access"?{}:n[T];for(var T in n.access)x.access[T]=n.access[T];x.addInitializer=function(S){if(_)throw new TypeError("Cannot add initializers after decoration has completed");s.push(l(S||null))};var w=(0,t[b])(u==="accessor"?{get:g.get,set:g.set}:g[d],x);if(u==="accessor"){if(w===void 0)continue;if(w===null||typeof w!="object")throw new TypeError("Object expected");(y=l(w.get))&&(g.get=y),(y=l(w.set))&&(g.set=y),(y=l(w.init))&&a.unshift(y)}else(y=l(w))&&(u==="field"?a.unshift(y):g[d]=y)}p&&Object.defineProperty(p,n.name,g),_=!0}function pR(i,e,t){for(var n=arguments.length>2,a=0;a<e.length;a++)t=n?e[a].call(i,t):e[a].call(i);return n?t:void 0}function mR(i){return typeof i=="symbol"?i:"".concat(i)}function gR(i,e,t){return typeof e=="symbol"&&(e=e.description?"[".concat(e.description,"]"):""),Object.defineProperty(i,"name",{configurable:!0,value:t?"".concat(t," ",e):e})}function vR(i,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(i,e)}function Pt(i,e,t,n){function a(s){return s instanceof t?s:new t(function(l){l(s)})}return new(t||(t=Promise))(function(s,l){function u(g){try{p(n.next(g))}catch(y){l(y)}}function d(g){try{p(n.throw(g))}catch(y){l(y)}}function p(g){g.done?s(g.value):a(g.value).then(u,d)}p((n=n.apply(i,e||[])).next())})}function yR(i,e){var t={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},n,a,s,l=Object.create((typeof Iterator=="function"?Iterator:Object).prototype);return l.next=u(0),l.throw=u(1),l.return=u(2),typeof Symbol=="function"&&(l[Symbol.iterator]=function(){return this}),l;function u(p){return function(g){return d([p,g])}}function d(p){if(n)throw new TypeError("Generator is already executing.");for(;l&&(l=0,p[0]&&(t=0)),t;)try{if(n=1,a&&(s=p[0]&2?a.return:p[0]?a.throw||((s=a.return)&&s.call(a),0):a.next)&&!(s=s.call(a,p[1])).done)return s;switch(a=0,s&&(p=[p[0]&2,s.value]),p[0]){case 0:case 1:s=p;break;case 4:return t.label++,{value:p[1],done:!1};case 5:t.label++,a=p[1],p=[0];continue;case 7:p=t.ops.pop(),t.trys.pop();continue;default:if(s=t.trys,!(s=s.length>0&&s[s.length-1])&&(p[0]===6||p[0]===2)){t=0;continue}if(p[0]===3&&(!s||p[1]>s[0]&&p[1]<s[3])){t.label=p[1];break}if(p[0]===6&&t.label<s[1]){t.label=s[1],s=p;break}if(s&&t.label<s[2]){t.label=s[2],t.ops.push(p);break}s[2]&&t.ops.pop(),t.trys.pop();continue}p=e.call(i,t)}catch(g){p=[6,g],a=0}finally{n=s=0}if(p[0]&5)throw p[1];return{value:p[0]?p[1]:void 0,done:!0}}}var sb=Object.create?(function(i,e,t,n){n===void 0&&(n=t);var a=Object.getOwnPropertyDescriptor(e,t);(!a||("get"in a?!e.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return e[t]}}),Object.defineProperty(i,n,a)}):(function(i,e,t,n){n===void 0&&(n=t),i[n]=e[t]});function _R(i,e){for(var t in i)t!=="default"&&!Object.prototype.hasOwnProperty.call(e,t)&&sb(e,i,t)}function Qy(i){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&i[e],n=0;if(t)return t.call(i);if(i&&typeof i.length=="number")return{next:function(){return i&&n>=i.length&&(i=void 0),{value:i&&i[n++],done:!i}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function ME(i,e){var t=typeof Symbol=="function"&&i[Symbol.iterator];if(!t)return i;var n=t.call(i),a,s=[],l;try{for(;(e===void 0||e-- >0)&&!(a=n.next()).done;)s.push(a.value)}catch(u){l={error:u}}finally{try{a&&!a.done&&(t=n.return)&&t.call(n)}finally{if(l)throw l.error}}return s}function bR(){for(var i=[],e=0;e<arguments.length;e++)i=i.concat(ME(arguments[e]));return i}function xR(){for(var i=0,e=0,t=arguments.length;e<t;e++)i+=arguments[e].length;for(var n=Array(i),a=0,e=0;e<t;e++)for(var s=arguments[e],l=0,u=s.length;l<u;l++,a++)n[a]=s[l];return n}function SR(i,e,t){if(t||arguments.length===2)for(var n=0,a=e.length,s;n<a;n++)(s||!(n in e))&&(s||(s=Array.prototype.slice.call(e,0,n)),s[n]=e[n]);return i.concat(s||Array.prototype.slice.call(e))}function ep(i){return this instanceof ep?(this.v=i,this):new ep(i)}function ER(i,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n=t.apply(i,e||[]),a,s=[];return a=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),u("next"),u("throw"),u("return",l),a[Symbol.asyncIterator]=function(){return this},a;function l(b){return function(x){return Promise.resolve(x).then(b,y)}}function u(b,x){n[b]&&(a[b]=function(T){return new Promise(function(w,S){s.push([b,T,w,S])>1||d(b,T)})},x&&(a[b]=x(a[b])))}function d(b,x){try{p(n[b](x))}catch(T){_(s[0][3],T)}}function p(b){b.value instanceof ep?Promise.resolve(b.value.v).then(g,y):_(s[0][2],b)}function g(b){d("next",b)}function y(b){d("throw",b)}function _(b,x){b(x),s.shift(),s.length&&d(s[0][0],s[0][1])}}function MR(i){var e,t;return e={},n("next"),n("throw",function(a){throw a}),n("return"),e[Symbol.iterator]=function(){return this},e;function n(a,s){e[a]=i[a]?function(l){return(t=!t)?{value:ep(i[a](l)),done:!1}:s?s(l):l}:s}}function wR(i){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=i[Symbol.asyncIterator],t;return e?e.call(i):(i=typeof Qy=="function"?Qy(i):i[Symbol.iterator](),t={},n("next"),n("throw"),n("return"),t[Symbol.asyncIterator]=function(){return this},t);function n(s){t[s]=i[s]&&function(l){return new Promise(function(u,d){l=i[s](l),a(u,d,l.done,l.value)})}}function a(s,l,u,d){Promise.resolve(d).then(function(p){s({value:p,done:u})},l)}}function TR(i,e){return Object.defineProperty?Object.defineProperty(i,"raw",{value:e}):i.raw=e,i}var gU=Object.create?(function(i,e){Object.defineProperty(i,"default",{enumerable:!0,value:e})}):function(i,e){i.default=e},R1=function(i){return R1=Object.getOwnPropertyNames||function(e){var t=[];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[t.length]=n);return t},R1(i)};function AR(i){if(i&&i.__esModule)return i;var e={};if(i!=null)for(var t=R1(i),n=0;n<t.length;n++)t[n]!=="default"&&sb(e,i,t[n]);return gU(e,i),e}function CR(i){return i&&i.__esModule?i:{default:i}}function RR(i,e,t,n){if(t==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?i!==e||!n:!e.has(i))throw new TypeError("Cannot read private member from an object whose class did not declare it");return t==="m"?n:t==="a"?n.call(i):n?n.value:e.get(i)}function NR(i,e,t,n,a){if(n==="m")throw new TypeError("Private method is not writable");if(n==="a"&&!a)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?i!==e||!a:!e.has(i))throw new TypeError("Cannot write private member to an object whose class did not declare it");return n==="a"?a.call(i,t):a?a.value=t:e.set(i,t),t}function OR(i,e){if(e===null||typeof e!="object"&&typeof e!="function")throw new TypeError("Cannot use 'in' operator on non-object");return typeof i=="function"?e===i:i.has(e)}function DR(i,e,t){if(e!=null){if(typeof e!="object"&&typeof e!="function")throw new TypeError("Object expected.");var n,a;if(t){if(!Symbol.asyncDispose)throw new TypeError("Symbol.asyncDispose is not defined.");n=e[Symbol.asyncDispose]}if(n===void 0){if(!Symbol.dispose)throw new TypeError("Symbol.dispose is not defined.");n=e[Symbol.dispose],t&&(a=n)}if(typeof n!="function")throw new TypeError("Object not disposable.");a&&(n=function(){try{a.call(this)}catch(s){return Promise.reject(s)}}),i.stack.push({value:e,dispose:n,async:t})}else t&&i.stack.push({async:!0});return e}var vU=typeof SuppressedError=="function"?SuppressedError:function(i,e,t){var n=new Error(t);return n.name="SuppressedError",n.error=i,n.suppressed=e,n};function UR(i){function e(s){i.error=i.hasError?new vU(s,i.error,"An error was suppressed during disposal."):s,i.hasError=!0}var t,n=0;function a(){for(;t=i.stack.pop();)try{if(!t.async&&n===1)return n=0,i.stack.push(t),Promise.resolve().then(a);if(t.dispose){var s=t.dispose.call(t.value);if(t.async)return n|=2,Promise.resolve(s).then(a,function(l){return e(l),a()})}else n|=1}catch(l){e(l)}if(n===1)return i.hasError?Promise.reject(i.error):Promise.resolve();if(i.hasError)throw i.error}return a()}function LR(i,e){return typeof i=="string"&&/^\.\.?\//.test(i)?i.replace(/\.(tsx)$|((?:\.d)?)((?:\.[^./]+?)?)\.([cm]?)ts$/i,function(t,n,a,s,l){return n?e?".jsx":".js":a&&(!s||!l)?t:a+s+"."+l.toLowerCase()+"js"}):i}const yU={__extends:uR,__assign:Jy,__rest:gp,__decorate:hR,__param:fR,__esDecorate:dR,__runInitializers:pR,__propKey:mR,__setFunctionName:gR,__metadata:vR,__awaiter:Pt,__generator:yR,__createBinding:sb,__exportStar:_R,__values:Qy,__read:ME,__spread:bR,__spreadArrays:xR,__spreadArray:SR,__await:ep,__asyncGenerator:ER,__asyncDelegator:MR,__asyncValues:wR,__makeTemplateObject:TR,__importStar:AR,__importDefault:CR,__classPrivateFieldGet:RR,__classPrivateFieldSet:NR,__classPrivateFieldIn:OR,__addDisposableResource:DR,__disposeResources:UR,__rewriteRelativeImportExtension:LR},_U=Object.freeze(Object.defineProperty({__proto__:null,__addDisposableResource:DR,get __assign(){return Jy},__asyncDelegator:MR,__asyncGenerator:ER,__asyncValues:wR,__await:ep,__awaiter:Pt,__classPrivateFieldGet:RR,__classPrivateFieldIn:OR,__classPrivateFieldSet:NR,__createBinding:sb,__decorate:hR,__disposeResources:UR,__esDecorate:dR,__exportStar:_R,__extends:uR,__generator:yR,__importDefault:CR,__importStar:AR,__makeTemplateObject:TR,__metadata:vR,__param:fR,__propKey:mR,__read:ME,__rest:gp,__rewriteRelativeImportExtension:LR,__runInitializers:pR,__setFunctionName:gR,__spread:bR,__spreadArray:SR,__spreadArrays:xR,__values:Qy,default:yU},Symbol.toStringTag,{value:"Module"})),bU=i=>i?(...e)=>i(...e):(...e)=>fetch(...e);let ob=class extends Error{constructor(e,t="FunctionsError",n){super(e),this.name=t,this.context=n}},IR=class extends ob{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}},N1=class extends ob{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}},O1=class extends ob{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}};var $y;(function(i){i.Any="any",i.ApNortheast1="ap-northeast-1",i.ApNortheast2="ap-northeast-2",i.ApSouth1="ap-south-1",i.ApSoutheast1="ap-southeast-1",i.ApSoutheast2="ap-southeast-2",i.CaCentral1="ca-central-1",i.EuCentral1="eu-central-1",i.EuWest1="eu-west-1",i.EuWest2="eu-west-2",i.EuWest3="eu-west-3",i.SaEast1="sa-east-1",i.UsEast1="us-east-1",i.UsWest1="us-west-1",i.UsWest2="us-west-2"})($y||($y={}));class xU{constructor(e,{headers:t={},customFetch:n,region:a=$y.Any}={}){this.url=e,this.headers=t,this.region=a,this.fetch=bU(n)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e){return Pt(this,arguments,void 0,function*(t,n={}){var a;let s,l;try{const{headers:u,method:d,body:p,signal:g,timeout:y}=n;let _={},{region:b}=n;b||(b=this.region);const x=new URL(`${this.url}/${t}`);b&&b!=="any"&&(_["x-region"]=b,x.searchParams.set("forceFunctionRegion",b));let T;p&&(u&&!Object.prototype.hasOwnProperty.call(u,"Content-Type")||!u)?typeof Blob<"u"&&p instanceof Blob||p instanceof ArrayBuffer?(_["Content-Type"]="application/octet-stream",T=p):typeof p=="string"?(_["Content-Type"]="text/plain",T=p):typeof FormData<"u"&&p instanceof FormData?T=p:(_["Content-Type"]="application/json",T=JSON.stringify(p)):T=p;let w=g;y&&(l=new AbortController,s=setTimeout(()=>l.abort(),y),g?(w=l.signal,g.addEventListener("abort",()=>l.abort())):w=l.signal);const S=yield this.fetch(x.toString(),{method:d||"POST",headers:Object.assign(Object.assign(Object.assign({},_),this.headers),u),body:T,signal:w}).catch(P=>{throw new IR(P)}),C=S.headers.get("x-relay-error");if(C&&C==="true")throw new N1(S);if(!S.ok)throw new O1(S);let N=((a=S.headers.get("Content-Type"))!==null&&a!==void 0?a:"text/plain").split(";")[0].trim(),O;return N==="application/json"?O=yield S.json():N==="application/octet-stream"||N==="application/pdf"?O=yield S.blob():N==="text/event-stream"?O=S:N==="multipart/form-data"?O=yield S.formData():O=yield S.text(),{data:O,error:null,response:S}}catch(u){return{data:null,error:u,response:u instanceof O1||u instanceof N1?u.context:void 0}}finally{s&&clearTimeout(s)}})}}const SU=Object.freeze(Object.defineProperty({__proto__:null,get FunctionRegion(){return $y},FunctionsClient:xU,FunctionsError:ob,FunctionsFetchError:IR,FunctionsHttpError:O1,FunctionsRelayError:N1},Symbol.toStringTag,{value:"Module"})),PR=Jg(SU);var dr={};const vp=Jg(_U);var P0={},z0={},B0={},F0={},k0={},H0={},Vw;function zR(){if(Vw)return H0;Vw=1,Object.defineProperty(H0,"__esModule",{value:!0});class i extends Error{constructor(t){super(t.message),this.name="PostgrestError",this.details=t.details,this.hint=t.hint,this.code=t.code}}return H0.default=i,H0}var jw;function BR(){if(jw)return k0;jw=1,Object.defineProperty(k0,"__esModule",{value:!0});const e=vp.__importDefault(zR());let t=class{constructor(a){var s,l;this.shouldThrowOnError=!1,this.method=a.method,this.url=a.url,this.headers=new Headers(a.headers),this.schema=a.schema,this.body=a.body,this.shouldThrowOnError=(s=a.shouldThrowOnError)!==null&&s!==void 0?s:!1,this.signal=a.signal,this.isMaybeSingle=(l=a.isMaybeSingle)!==null&&l!==void 0?l:!1,a.fetch?this.fetch=a.fetch:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(a,s){return this.headers=new Headers(this.headers),this.headers.set(a,s),this}then(a,s){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const l=this.fetch;let u=l(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async d=>{var p,g,y,_;let b=null,x=null,T=null,w=d.status,S=d.statusText;if(d.ok){if(this.method!=="HEAD"){const P=await d.text();P===""||(this.headers.get("Accept")==="text/csv"||this.headers.get("Accept")&&(!((p=this.headers.get("Accept"))===null||p===void 0)&&p.includes("application/vnd.pgrst.plan+text"))?x=P:x=JSON.parse(P))}const N=(g=this.headers.get("Prefer"))===null||g===void 0?void 0:g.match(/count=(exact|planned|estimated)/),O=(y=d.headers.get("content-range"))===null||y===void 0?void 0:y.split("/");N&&O&&O.length>1&&(T=parseInt(O[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(x)&&(x.length>1?(b={code:"PGRST116",details:`Results contain ${x.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},x=null,T=null,w=406,S="Not Acceptable"):x.length===1?x=x[0]:x=null)}else{const N=await d.text();try{b=JSON.parse(N),Array.isArray(b)&&d.status===404&&(x=[],b=null,w=200,S="OK")}catch{d.status===404&&N===""?(w=204,S="No Content"):b={message:N}}if(b&&this.isMaybeSingle&&(!((_=b==null?void 0:b.details)===null||_===void 0)&&_.includes("0 rows"))&&(b=null,w=200,S="OK"),b&&this.shouldThrowOnError)throw new e.default(b)}return{error:b,data:x,count:T,status:w,statusText:S}});return this.shouldThrowOnError||(u=u.catch(d=>{var p,g,y,_,b,x;let T="";const w=d==null?void 0:d.cause;if(w){const S=(p=w==null?void 0:w.message)!==null&&p!==void 0?p:"",C=(g=w==null?void 0:w.code)!==null&&g!==void 0?g:"";T=`${(y=d==null?void 0:d.name)!==null&&y!==void 0?y:"FetchError"}: ${d==null?void 0:d.message}`,T+=`

Caused by: ${(_=w==null?void 0:w.name)!==null&&_!==void 0?_:"Error"}: ${S}`,C&&(T+=` (${C})`),w!=null&&w.stack&&(T+=`
${w.stack}`)}else T=(b=d==null?void 0:d.stack)!==null&&b!==void 0?b:"";return{error:{message:`${(x=d==null?void 0:d.name)!==null&&x!==void 0?x:"FetchError"}: ${d==null?void 0:d.message}`,details:T,hint:"",code:""},data:null,count:null,status:0,statusText:""}})),u.then(a,s)}returns(){return this}overrideTypes(){return this}};return k0.default=t,k0}var Gw;function FR(){if(Gw)return F0;Gw=1,Object.defineProperty(F0,"__esModule",{value:!0});const e=vp.__importDefault(BR());let t=class extends e.default{select(a){let s=!1;const l=(a??"*").split("").map(u=>/\s/.test(u)&&!s?"":(u==='"'&&(s=!s),u)).join("");return this.url.searchParams.set("select",l),this.headers.append("Prefer","return=representation"),this}order(a,{ascending:s=!0,nullsFirst:l,foreignTable:u,referencedTable:d=u}={}){const p=d?`${d}.order`:"order",g=this.url.searchParams.get(p);return this.url.searchParams.set(p,`${g?`${g},`:""}${a}.${s?"asc":"desc"}${l===void 0?"":l?".nullsfirst":".nullslast"}`),this}limit(a,{foreignTable:s,referencedTable:l=s}={}){const u=typeof l>"u"?"limit":`${l}.limit`;return this.url.searchParams.set(u,`${a}`),this}range(a,s,{foreignTable:l,referencedTable:u=l}={}){const d=typeof u>"u"?"offset":`${u}.offset`,p=typeof u>"u"?"limit":`${u}.limit`;return this.url.searchParams.set(d,`${a}`),this.url.searchParams.set(p,`${s-a+1}`),this}abortSignal(a){return this.signal=a,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:a=!1,verbose:s=!1,settings:l=!1,buffers:u=!1,wal:d=!1,format:p="text"}={}){var g;const y=[a?"analyze":null,s?"verbose":null,l?"settings":null,u?"buffers":null,d?"wal":null].filter(Boolean).join("|"),_=(g=this.headers.get("Accept"))!==null&&g!==void 0?g:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${p}; for="${_}"; options=${y};`),p==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(a){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${a}`),this}};return F0.default=t,F0}var qw;function wE(){if(qw)return B0;qw=1,Object.defineProperty(B0,"__esModule",{value:!0});const e=vp.__importDefault(FR()),t=new RegExp("[,()]");let n=class extends e.default{eq(s,l){return this.url.searchParams.append(s,`eq.${l}`),this}neq(s,l){return this.url.searchParams.append(s,`neq.${l}`),this}gt(s,l){return this.url.searchParams.append(s,`gt.${l}`),this}gte(s,l){return this.url.searchParams.append(s,`gte.${l}`),this}lt(s,l){return this.url.searchParams.append(s,`lt.${l}`),this}lte(s,l){return this.url.searchParams.append(s,`lte.${l}`),this}like(s,l){return this.url.searchParams.append(s,`like.${l}`),this}likeAllOf(s,l){return this.url.searchParams.append(s,`like(all).{${l.join(",")}}`),this}likeAnyOf(s,l){return this.url.searchParams.append(s,`like(any).{${l.join(",")}}`),this}ilike(s,l){return this.url.searchParams.append(s,`ilike.${l}`),this}ilikeAllOf(s,l){return this.url.searchParams.append(s,`ilike(all).{${l.join(",")}}`),this}ilikeAnyOf(s,l){return this.url.searchParams.append(s,`ilike(any).{${l.join(",")}}`),this}regexMatch(s,l){return this.url.searchParams.append(s,`match.${l}`),this}regexIMatch(s,l){return this.url.searchParams.append(s,`imatch.${l}`),this}is(s,l){return this.url.searchParams.append(s,`is.${l}`),this}isDistinct(s,l){return this.url.searchParams.append(s,`isdistinct.${l}`),this}in(s,l){const u=Array.from(new Set(l)).map(d=>typeof d=="string"&&t.test(d)?`"${d}"`:`${d}`).join(",");return this.url.searchParams.append(s,`in.(${u})`),this}contains(s,l){return typeof l=="string"?this.url.searchParams.append(s,`cs.${l}`):Array.isArray(l)?this.url.searchParams.append(s,`cs.{${l.join(",")}}`):this.url.searchParams.append(s,`cs.${JSON.stringify(l)}`),this}containedBy(s,l){return typeof l=="string"?this.url.searchParams.append(s,`cd.${l}`):Array.isArray(l)?this.url.searchParams.append(s,`cd.{${l.join(",")}}`):this.url.searchParams.append(s,`cd.${JSON.stringify(l)}`),this}rangeGt(s,l){return this.url.searchParams.append(s,`sr.${l}`),this}rangeGte(s,l){return this.url.searchParams.append(s,`nxl.${l}`),this}rangeLt(s,l){return this.url.searchParams.append(s,`sl.${l}`),this}rangeLte(s,l){return this.url.searchParams.append(s,`nxr.${l}`),this}rangeAdjacent(s,l){return this.url.searchParams.append(s,`adj.${l}`),this}overlaps(s,l){return typeof l=="string"?this.url.searchParams.append(s,`ov.${l}`):this.url.searchParams.append(s,`ov.{${l.join(",")}}`),this}textSearch(s,l,{config:u,type:d}={}){let p="";d==="plain"?p="pl":d==="phrase"?p="ph":d==="websearch"&&(p="w");const g=u===void 0?"":`(${u})`;return this.url.searchParams.append(s,`${p}fts${g}.${l}`),this}match(s){return Object.entries(s).forEach(([l,u])=>{this.url.searchParams.append(l,`eq.${u}`)}),this}not(s,l,u){return this.url.searchParams.append(s,`not.${l}.${u}`),this}or(s,{foreignTable:l,referencedTable:u=l}={}){const d=u?`${u}.or`:"or";return this.url.searchParams.append(d,`(${s})`),this}filter(s,l,u){return this.url.searchParams.append(s,`${l}.${u}`),this}};return B0.default=n,B0}var Xw;function kR(){if(Xw)return z0;Xw=1,Object.defineProperty(z0,"__esModule",{value:!0});const e=vp.__importDefault(wE());let t=class{constructor(a,{headers:s={},schema:l,fetch:u}){this.url=a,this.headers=new Headers(s),this.schema=l,this.fetch=u}select(a,s){const{head:l=!1,count:u}=s??{},d=l?"HEAD":"GET";let p=!1;const g=(a??"*").split("").map(y=>/\s/.test(y)&&!p?"":(y==='"'&&(p=!p),y)).join("");return this.url.searchParams.set("select",g),u&&this.headers.append("Prefer",`count=${u}`),new e.default({method:d,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch})}insert(a,{count:s,defaultToNull:l=!0}={}){var u;const d="POST";if(s&&this.headers.append("Prefer",`count=${s}`),l||this.headers.append("Prefer","missing=default"),Array.isArray(a)){const p=a.reduce((g,y)=>g.concat(Object.keys(y)),[]);if(p.length>0){const g=[...new Set(p)].map(y=>`"${y}"`);this.url.searchParams.set("columns",g.join(","))}}return new e.default({method:d,url:this.url,headers:this.headers,schema:this.schema,body:a,fetch:(u=this.fetch)!==null&&u!==void 0?u:fetch})}upsert(a,{onConflict:s,ignoreDuplicates:l=!1,count:u,defaultToNull:d=!0}={}){var p;const g="POST";if(this.headers.append("Prefer",`resolution=${l?"ignore":"merge"}-duplicates`),s!==void 0&&this.url.searchParams.set("on_conflict",s),u&&this.headers.append("Prefer",`count=${u}`),d||this.headers.append("Prefer","missing=default"),Array.isArray(a)){const y=a.reduce((_,b)=>_.concat(Object.keys(b)),[]);if(y.length>0){const _=[...new Set(y)].map(b=>`"${b}"`);this.url.searchParams.set("columns",_.join(","))}}return new e.default({method:g,url:this.url,headers:this.headers,schema:this.schema,body:a,fetch:(p=this.fetch)!==null&&p!==void 0?p:fetch})}update(a,{count:s}={}){var l;const u="PATCH";return s&&this.headers.append("Prefer",`count=${s}`),new e.default({method:u,url:this.url,headers:this.headers,schema:this.schema,body:a,fetch:(l=this.fetch)!==null&&l!==void 0?l:fetch})}delete({count:a}={}){var s;const l="DELETE";return a&&this.headers.append("Prefer",`count=${a}`),new e.default({method:l,url:this.url,headers:this.headers,schema:this.schema,fetch:(s=this.fetch)!==null&&s!==void 0?s:fetch})}};return z0.default=t,z0}var Ww;function EU(){if(Ww)return P0;Ww=1,Object.defineProperty(P0,"__esModule",{value:!0});const i=vp,e=i.__importDefault(kR()),t=i.__importDefault(wE());let n=class HR{constructor(s,{headers:l={},schema:u,fetch:d}={}){this.url=s,this.headers=new Headers(l),this.schemaName=u,this.fetch=d}from(s){if(!s||typeof s!="string"||s.trim()==="")throw new Error("Invalid relation name: relation must be a non-empty string.");const l=new URL(`${this.url}/${s}`);return new e.default(l,{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(s){return new HR(this.url,{headers:this.headers,schema:s,fetch:this.fetch})}rpc(s,l={},{head:u=!1,get:d=!1,count:p}={}){var g;let y;const _=new URL(`${this.url}/rpc/${s}`);let b;u||d?(y=u?"HEAD":"GET",Object.entries(l).filter(([T,w])=>w!==void 0).map(([T,w])=>[T,Array.isArray(w)?`{${w.join(",")}}`:`${w}`]).forEach(([T,w])=>{_.searchParams.append(T,w)})):(y="POST",b=l);const x=new Headers(this.headers);return p&&x.set("Prefer",`count=${p}`),new t.default({method:y,url:_,headers:x,schema:this.schemaName,body:b,fetch:(g=this.fetch)!==null&&g!==void 0?g:fetch})}};return P0.default=n,P0}var Yw;function VR(){if(Yw)return dr;Yw=1,Object.defineProperty(dr,"__esModule",{value:!0}),dr.PostgrestError=dr.PostgrestBuilder=dr.PostgrestTransformBuilder=dr.PostgrestFilterBuilder=dr.PostgrestQueryBuilder=dr.PostgrestClient=void 0;const i=vp,e=i.__importDefault(EU());dr.PostgrestClient=e.default;const t=i.__importDefault(kR());dr.PostgrestQueryBuilder=t.default;const n=i.__importDefault(wE());dr.PostgrestFilterBuilder=n.default;const a=i.__importDefault(FR());dr.PostgrestTransformBuilder=a.default;const s=i.__importDefault(BR());dr.PostgrestBuilder=s.default;const l=i.__importDefault(zR());return dr.PostgrestError=l.default,dr.default={PostgrestClient:e.default,PostgrestQueryBuilder:t.default,PostgrestFilterBuilder:n.default,PostgrestTransformBuilder:a.default,PostgrestBuilder:s.default,PostgrestError:l.default},dr}class jR{constructor(){}static detectEnvironment(){var e;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof window<"u"&&typeof window.WebSocket<"u")return{type:"native",constructor:window.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((e=navigator.userAgent)===null||e===void 0)&&e.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if(typeof process<"u"){const t=process.versions;if(t&&t.node){const n=t.node,a=parseInt(n.replace(/^v/,"").split(".")[0]);return a>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${a} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${a} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const e=this.detectEnvironment();if(e.constructor)return e.constructor;let t=e.error||"WebSocket not supported in this environment.";throw e.workaround&&(t+=`

Suggested solution: ${e.workaround}`),new Error(t)}static createWebSocket(e,t){const n=this.getWebSocketConstructor();return new n(e,t)}static isWebSocketSupported(){try{const e=this.detectEnvironment();return e.type==="native"||e.type==="ws"}catch{return!1}}}const MU="2.87.1",wU=`realtime-js/${MU}`,GR="1.0.0",TU="2.0.0",Zw=GR,D1=1e4,AU=1e3,CU=100;var Ph;(function(i){i[i.connecting=0]="connecting",i[i.open=1]="open",i[i.closing=2]="closing",i[i.closed=3]="closed"})(Ph||(Ph={}));var ga;(function(i){i.closed="closed",i.errored="errored",i.joined="joined",i.joining="joining",i.leaving="leaving"})(ga||(ga={}));var Mo;(function(i){i.close="phx_close",i.error="phx_error",i.join="phx_join",i.reply="phx_reply",i.leave="phx_leave",i.access_token="access_token"})(Mo||(Mo={}));var U1;(function(i){i.websocket="websocket"})(U1||(U1={}));var zh;(function(i){i.Connecting="connecting",i.Open="open",i.Closing="closing",i.Closed="closed"})(zh||(zh={}));class RU{constructor(e){this.HEADER_LENGTH=1,this.USER_BROADCAST_PUSH_META_LENGTH=6,this.KINDS={userBroadcastPush:3,userBroadcast:4},this.BINARY_ENCODING=0,this.JSON_ENCODING=1,this.BROADCAST_EVENT="broadcast",this.allowedMetadataKeys=[],this.allowedMetadataKeys=e??[]}encode(e,t){if(e.event===this.BROADCAST_EVENT&&!(e.payload instanceof ArrayBuffer)&&typeof e.payload.event=="string")return t(this._binaryEncodeUserBroadcastPush(e));let n=[e.join_ref,e.ref,e.topic,e.event,e.payload];return t(JSON.stringify(n))}_binaryEncodeUserBroadcastPush(e){var t;return this._isArrayBuffer((t=e.payload)===null||t===void 0?void 0:t.payload)?this._encodeBinaryUserBroadcastPush(e):this._encodeJsonUserBroadcastPush(e)}_encodeBinaryUserBroadcastPush(e){var t,n;const a=(n=(t=e.payload)===null||t===void 0?void 0:t.payload)!==null&&n!==void 0?n:new ArrayBuffer(0);return this._encodeUserBroadcastPush(e,this.BINARY_ENCODING,a)}_encodeJsonUserBroadcastPush(e){var t,n;const a=(n=(t=e.payload)===null||t===void 0?void 0:t.payload)!==null&&n!==void 0?n:{},l=new TextEncoder().encode(JSON.stringify(a)).buffer;return this._encodeUserBroadcastPush(e,this.JSON_ENCODING,l)}_encodeUserBroadcastPush(e,t,n){var a,s;const l=e.topic,u=(a=e.ref)!==null&&a!==void 0?a:"",d=(s=e.join_ref)!==null&&s!==void 0?s:"",p=e.payload.event,g=this.allowedMetadataKeys?this._pick(e.payload,this.allowedMetadataKeys):{},y=Object.keys(g).length===0?"":JSON.stringify(g);if(d.length>255)throw new Error(`joinRef length ${d.length} exceeds maximum of 255`);if(u.length>255)throw new Error(`ref length ${u.length} exceeds maximum of 255`);if(l.length>255)throw new Error(`topic length ${l.length} exceeds maximum of 255`);if(p.length>255)throw new Error(`userEvent length ${p.length} exceeds maximum of 255`);if(y.length>255)throw new Error(`metadata length ${y.length} exceeds maximum of 255`);const _=this.USER_BROADCAST_PUSH_META_LENGTH+d.length+u.length+l.length+p.length+y.length,b=new ArrayBuffer(this.HEADER_LENGTH+_);let x=new DataView(b),T=0;x.setUint8(T++,this.KINDS.userBroadcastPush),x.setUint8(T++,d.length),x.setUint8(T++,u.length),x.setUint8(T++,l.length),x.setUint8(T++,p.length),x.setUint8(T++,y.length),x.setUint8(T++,t),Array.from(d,S=>x.setUint8(T++,S.charCodeAt(0))),Array.from(u,S=>x.setUint8(T++,S.charCodeAt(0))),Array.from(l,S=>x.setUint8(T++,S.charCodeAt(0))),Array.from(p,S=>x.setUint8(T++,S.charCodeAt(0))),Array.from(y,S=>x.setUint8(T++,S.charCodeAt(0)));var w=new Uint8Array(b.byteLength+n.byteLength);return w.set(new Uint8Array(b),0),w.set(new Uint8Array(n),b.byteLength),w.buffer}decode(e,t){if(this._isArrayBuffer(e)){let n=this._binaryDecode(e);return t(n)}if(typeof e=="string"){const n=JSON.parse(e),[a,s,l,u,d]=n;return t({join_ref:a,ref:s,topic:l,event:u,payload:d})}return t({})}_binaryDecode(e){const t=new DataView(e),n=t.getUint8(0),a=new TextDecoder;switch(n){case this.KINDS.userBroadcast:return this._decodeUserBroadcast(e,t,a)}}_decodeUserBroadcast(e,t,n){const a=t.getUint8(1),s=t.getUint8(2),l=t.getUint8(3),u=t.getUint8(4);let d=this.HEADER_LENGTH+4;const p=n.decode(e.slice(d,d+a));d=d+a;const g=n.decode(e.slice(d,d+s));d=d+s;const y=n.decode(e.slice(d,d+l));d=d+l;const _=e.slice(d,e.byteLength),b=u===this.JSON_ENCODING?JSON.parse(n.decode(_)):_,x={type:this.BROADCAST_EVENT,event:g,payload:b};return l>0&&(x.meta=JSON.parse(y)),{join_ref:null,ref:null,topic:p,event:this.BROADCAST_EVENT,payload:x}}_isArrayBuffer(e){var t;return e instanceof ArrayBuffer||((t=e==null?void 0:e.constructor)===null||t===void 0?void 0:t.name)==="ArrayBuffer"}_pick(e,t){return!e||typeof e!="object"?{}:Object.fromEntries(Object.entries(e).filter(([n])=>t.includes(n)))}}let qR=class{constructor(e,t){this.callback=e,this.timerCalc=t,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=t}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}};var _i;(function(i){i.abstime="abstime",i.bool="bool",i.date="date",i.daterange="daterange",i.float4="float4",i.float8="float8",i.int2="int2",i.int4="int4",i.int4range="int4range",i.int8="int8",i.int8range="int8range",i.json="json",i.jsonb="jsonb",i.money="money",i.numeric="numeric",i.oid="oid",i.reltime="reltime",i.text="text",i.time="time",i.timestamp="timestamp",i.timestamptz="timestamptz",i.timetz="timetz",i.tsrange="tsrange",i.tstzrange="tstzrange"})(_i||(_i={}));const Kw=(i,e,t={})=>{var n;const a=(n=t.skipTypes)!==null&&n!==void 0?n:[];return e?Object.keys(e).reduce((s,l)=>(s[l]=NU(l,i,e,a),s),{}):{}},NU=(i,e,t,n)=>{const a=e.find(u=>u.name===i),s=a==null?void 0:a.type,l=t[i];return s&&!n.includes(s)?XR(s,l):L1(l)},XR=(i,e)=>{if(i.charAt(0)==="_"){const t=i.slice(1,i.length);return LU(e,t)}switch(i){case _i.bool:return OU(e);case _i.float4:case _i.float8:case _i.int2:case _i.int4:case _i.int8:case _i.numeric:case _i.oid:return DU(e);case _i.json:case _i.jsonb:return UU(e);case _i.timestamp:return IU(e);case _i.abstime:case _i.date:case _i.daterange:case _i.int4range:case _i.int8range:case _i.money:case _i.reltime:case _i.text:case _i.time:case _i.timestamptz:case _i.timetz:case _i.tsrange:case _i.tstzrange:return L1(e);default:return L1(e)}},L1=i=>i,OU=i=>{switch(i){case"t":return!0;case"f":return!1;default:return i}},DU=i=>{if(typeof i=="string"){const e=parseFloat(i);if(!Number.isNaN(e))return e}return i},UU=i=>{if(typeof i=="string")try{return JSON.parse(i)}catch(e){return console.log(`JSON parse error: ${e}`),i}return i},LU=(i,e)=>{if(typeof i!="string")return i;const t=i.length-1,n=i[t];if(i[0]==="{"&&n==="}"){let s;const l=i.slice(1,t);try{s=JSON.parse("["+l+"]")}catch{s=l?l.split(","):[]}return s.map(u=>XR(e,u))}return i},IU=i=>typeof i=="string"?i.replace(" ","T"):i,WR=i=>{const e=new URL(i);return e.protocol=e.protocol.replace(/^ws/i,"http"),e.pathname=e.pathname.replace(/\/+$/,"").replace(/\/socket\/websocket$/i,"").replace(/\/socket$/i,"").replace(/\/websocket$/i,""),e.pathname===""||e.pathname==="/"?e.pathname="/api/broadcast":e.pathname=e.pathname+"/api/broadcast",e.href};class zx{constructor(e,t,n={},a=D1){this.channel=e,this.event=t,this.payload=n,this.timeout=a,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,t){var n;return this._hasReceived(e)&&t((n=this.receivedResp)===null||n===void 0?void 0:n.response),this.recHooks.push({status:e,callback:t}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const e=t=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=t,this._matchReceive(t)};this.channel._on(this.refEvent,{},e),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,t){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:t})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:t}){this.recHooks.filter(n=>n.status===e).forEach(n=>n.callback(t))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var I1;(function(i){i.SYNC="sync",i.JOIN="join",i.LEAVE="leave"})(I1||(I1={}));let YR=class Vy{constructor(e,t){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const n=(t==null?void 0:t.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(n.state,{},a=>{const{onJoin:s,onLeave:l,onSync:u}=this.caller;this.joinRef=this.channel._joinRef(),this.state=Vy.syncState(this.state,a,s,l),this.pendingDiffs.forEach(d=>{this.state=Vy.syncDiff(this.state,d,s,l)}),this.pendingDiffs=[],u()}),this.channel._on(n.diff,{},a=>{const{onJoin:s,onLeave:l,onSync:u}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(a):(this.state=Vy.syncDiff(this.state,a,s,l),u())}),this.onJoin((a,s,l)=>{this.channel._trigger("presence",{event:"join",key:a,currentPresences:s,newPresences:l})}),this.onLeave((a,s,l)=>{this.channel._trigger("presence",{event:"leave",key:a,currentPresences:s,leftPresences:l})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,t,n,a){const s=this.cloneDeep(e),l=this.transformState(t),u={},d={};return this.map(s,(p,g)=>{l[p]||(d[p]=g)}),this.map(l,(p,g)=>{const y=s[p];if(y){const _=g.map(w=>w.presence_ref),b=y.map(w=>w.presence_ref),x=g.filter(w=>b.indexOf(w.presence_ref)<0),T=y.filter(w=>_.indexOf(w.presence_ref)<0);x.length>0&&(u[p]=x),T.length>0&&(d[p]=T)}else u[p]=g}),this.syncDiff(s,{joins:u,leaves:d},n,a)}static syncDiff(e,t,n,a){const{joins:s,leaves:l}={joins:this.transformState(t.joins),leaves:this.transformState(t.leaves)};return n||(n=()=>{}),a||(a=()=>{}),this.map(s,(u,d)=>{var p;const g=(p=e[u])!==null&&p!==void 0?p:[];if(e[u]=this.cloneDeep(d),g.length>0){const y=e[u].map(b=>b.presence_ref),_=g.filter(b=>y.indexOf(b.presence_ref)<0);e[u].unshift(..._)}n(u,g,d)}),this.map(l,(u,d)=>{let p=e[u];if(!p)return;const g=d.map(y=>y.presence_ref);p=p.filter(y=>g.indexOf(y.presence_ref)<0),e[u]=p,a(u,p,d),p.length===0&&delete e[u]}),e}static map(e,t){return Object.getOwnPropertyNames(e).map(n=>t(n,e[n]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((t,n)=>{const a=e[n];return"metas"in a?t[n]=a.metas.map(s=>(s.presence_ref=s.phx_ref,delete s.phx_ref,delete s.phx_ref_prev,s)):t[n]=a,t},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}};var P1;(function(i){i.ALL="*",i.INSERT="INSERT",i.UPDATE="UPDATE",i.DELETE="DELETE"})(P1||(P1={}));var Zd;(function(i){i.BROADCAST="broadcast",i.PRESENCE="presence",i.POSTGRES_CHANGES="postgres_changes",i.SYSTEM="system"})(Zd||(Zd={}));var gl;(function(i){i.SUBSCRIBED="SUBSCRIBED",i.TIMED_OUT="TIMED_OUT",i.CLOSED="CLOSED",i.CHANNEL_ERROR="CHANNEL_ERROR"})(gl||(gl={}));const PU=ga;let ZR=class fg{constructor(e,t={config:{}},n){var a,s;if(this.topic=e,this.params=t,this.socket=n,this.bindings={},this.state=ga.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},t.config),this.timeout=this.socket.timeout,this.joinPush=new zx(this,Mo.join,this.params,this.timeout),this.rejoinTimer=new qR(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=ga.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(l=>l.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=ga.closed,this.socket._remove(this)}),this._onError(l=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,l),this.state=ga.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=ga.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",l=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,l),this.state=ga.errored,this.rejoinTimer.scheduleTimeout())}),this._on(Mo.reply,{},(l,u)=>{this._trigger(this._replyEventName(u),l)}),this.presence=new YR(this),this.broadcastEndpointURL=WR(this.socket.endPoint),this.private=this.params.config.private||!1,!this.private&&(!((s=(a=this.params.config)===null||a===void 0?void 0:a.broadcast)===null||s===void 0)&&s.replay))throw`tried to use replay on public channel '${this.topic}'. It must be a private channel.`}subscribe(e,t=this.timeout){var n,a,s;if(this.socket.isConnected()||this.socket.connect(),this.state==ga.closed){const{config:{broadcast:l,presence:u,private:d}}=this.params,p=(a=(n=this.bindings.postgres_changes)===null||n===void 0?void 0:n.map(b=>b.filter))!==null&&a!==void 0?a:[],g=!!this.bindings[Zd.PRESENCE]&&this.bindings[Zd.PRESENCE].length>0||((s=this.params.config.presence)===null||s===void 0?void 0:s.enabled)===!0,y={},_={broadcast:l,presence:Object.assign(Object.assign({},u),{enabled:g}),postgres_changes:p,private:d};this.socket.accessTokenValue&&(y.access_token=this.socket.accessTokenValue),this._onError(b=>e==null?void 0:e(gl.CHANNEL_ERROR,b)),this._onClose(()=>e==null?void 0:e(gl.CLOSED)),this.updateJoinPayload(Object.assign({config:_},y)),this.joinedOnce=!0,this._rejoin(t),this.joinPush.receive("ok",async({postgres_changes:b})=>{var x;if(this.socket._isManualToken()||this.socket.setAuth(),b===void 0){e==null||e(gl.SUBSCRIBED);return}else{const T=this.bindings.postgres_changes,w=(x=T==null?void 0:T.length)!==null&&x!==void 0?x:0,S=[];for(let C=0;C<w;C++){const N=T[C],{filter:{event:O,schema:P,table:U,filter:z}}=N,H=b&&b[C];if(H&&H.event===O&&fg.isFilterValueEqual(H.schema,P)&&fg.isFilterValueEqual(H.table,U)&&fg.isFilterValueEqual(H.filter,z))S.push(Object.assign(Object.assign({},N),{id:H.id}));else{this.unsubscribe(),this.state=ga.errored,e==null||e(gl.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=S,e&&e(gl.SUBSCRIBED);return}}).receive("error",b=>{this.state=ga.errored,e==null||e(gl.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(b).join(", ")||"error")))}).receive("timeout",()=>{e==null||e(gl.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(e,t={}){return await this.send({type:"presence",event:"track",payload:e},t.timeout||this.timeout)}async untrack(e={}){return await this.send({type:"presence",event:"untrack"},e)}on(e,t,n){return this.state===ga.joined&&e===Zd.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(async()=>await this.subscribe())),this._on(e,t,n)}async httpSend(e,t,n={}){var a;const s=this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"";if(t==null)return Promise.reject("Payload is required for httpSend()");const l={method:"POST",headers:{Authorization:s,apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:e,payload:t,private:this.private}]})},u=await this._fetchWithTimeout(this.broadcastEndpointURL,l,(a=n.timeout)!==null&&a!==void 0?a:this.timeout);if(u.status===202)return{success:!0};let d=u.statusText;try{const p=await u.json();d=p.error||p.message||d}catch{}return Promise.reject(new Error(d))}async send(e,t={}){var n,a;if(!this._canPush()&&e.type==="broadcast"){console.warn("Realtime send() is automatically falling back to REST API. This behavior will be deprecated in the future. Please use httpSend() explicitly for REST delivery.");const{event:s,payload:l}=e,d={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:s,payload:l,private:this.private}]})};try{const p=await this._fetchWithTimeout(this.broadcastEndpointURL,d,(n=t.timeout)!==null&&n!==void 0?n:this.timeout);return await((a=p.body)===null||a===void 0?void 0:a.cancel()),p.ok?"ok":"error"}catch(p){return p.name==="AbortError"?"timed out":"error"}}else return new Promise(s=>{var l,u,d;const p=this._push(e.type,e,t.timeout||this.timeout);e.type==="broadcast"&&!(!((d=(u=(l=this.params)===null||l===void 0?void 0:l.config)===null||u===void 0?void 0:u.broadcast)===null||d===void 0)&&d.ack)&&s("ok"),p.receive("ok",()=>s("ok")),p.receive("error",()=>s("error")),p.receive("timeout",()=>s("timed out"))})}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=ga.leaving;const t=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(Mo.close,"leave",this._joinRef())};this.joinPush.destroy();let n=null;return new Promise(a=>{n=new zx(this,Mo.leave,{},e),n.receive("ok",()=>{t(),a("ok")}).receive("timeout",()=>{t(),a("timed out")}).receive("error",()=>{a("error")}),n.send(),this._canPush()||n.trigger("ok",{})}).finally(()=>{n==null||n.destroy()})}teardown(){this.pushBuffer.forEach(e=>e.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=ga.closed,this.bindings={}}async _fetchWithTimeout(e,t,n){const a=new AbortController,s=setTimeout(()=>a.abort(),n),l=await this.socket.fetch(e,Object.assign(Object.assign({},t),{signal:a.signal}));return clearTimeout(s),l}_push(e,t,n=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let a=new zx(this,e,t,n);return this._canPush()?a.send():this._addToPushBuffer(a),a}_addToPushBuffer(e){if(e.startTimeout(),this.pushBuffer.push(e),this.pushBuffer.length>CU){const t=this.pushBuffer.shift();t&&(t.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${t.event}`,t.payload))}}_onMessage(e,t,n){return t}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,t,n){var a,s;const l=e.toLocaleLowerCase(),{close:u,error:d,leave:p,join:g}=Mo;if(n&&[u,d,p,g].indexOf(l)>=0&&n!==this._joinRef())return;let _=this._onMessage(l,t,n);if(t&&!_)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(l)?(a=this.bindings.postgres_changes)===null||a===void 0||a.filter(b=>{var x,T,w;return((x=b.filter)===null||x===void 0?void 0:x.event)==="*"||((w=(T=b.filter)===null||T===void 0?void 0:T.event)===null||w===void 0?void 0:w.toLocaleLowerCase())===l}).map(b=>b.callback(_,n)):(s=this.bindings[l])===null||s===void 0||s.filter(b=>{var x,T,w,S,C,N;if(["broadcast","presence","postgres_changes"].includes(l))if("id"in b){const O=b.id,P=(x=b.filter)===null||x===void 0?void 0:x.event;return O&&((T=t.ids)===null||T===void 0?void 0:T.includes(O))&&(P==="*"||(P==null?void 0:P.toLocaleLowerCase())===((w=t.data)===null||w===void 0?void 0:w.type.toLocaleLowerCase()))}else{const O=(C=(S=b==null?void 0:b.filter)===null||S===void 0?void 0:S.event)===null||C===void 0?void 0:C.toLocaleLowerCase();return O==="*"||O===((N=t==null?void 0:t.event)===null||N===void 0?void 0:N.toLocaleLowerCase())}else return b.type.toLocaleLowerCase()===l}).map(b=>{if(typeof _=="object"&&"ids"in _){const x=_.data,{schema:T,table:w,commit_timestamp:S,type:C,errors:N}=x;_=Object.assign(Object.assign({},{schema:T,table:w,commit_timestamp:S,eventType:C,new:{},old:{},errors:N}),this._getPayloadRecords(x))}b.callback(_,n)})}_isClosed(){return this.state===ga.closed}_isJoined(){return this.state===ga.joined}_isJoining(){return this.state===ga.joining}_isLeaving(){return this.state===ga.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,t,n){const a=e.toLocaleLowerCase(),s={type:a,filter:t,callback:n};return this.bindings[a]?this.bindings[a].push(s):this.bindings[a]=[s],this}_off(e,t){const n=e.toLocaleLowerCase();return this.bindings[n]&&(this.bindings[n]=this.bindings[n].filter(a=>{var s;return!(((s=a.type)===null||s===void 0?void 0:s.toLocaleLowerCase())===n&&fg.isEqual(a.filter,t))})),this}static isEqual(e,t){if(Object.keys(e).length!==Object.keys(t).length)return!1;for(const n in e)if(e[n]!==t[n])return!1;return!0}static isFilterValueEqual(e,t){return(e??void 0)===(t??void 0)}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(Mo.close,{},e)}_onError(e){this._on(Mo.error,{},t=>e(t))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=ga.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const t={new:{},old:{}};return(e.type==="INSERT"||e.type==="UPDATE")&&(t.new=Kw(e.columns,e.record)),(e.type==="UPDATE"||e.type==="DELETE")&&(t.old=Kw(e.columns,e.old_record)),t}};const Bx=()=>{},V0={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},zU=[1e3,2e3,5e3,1e4],BU=1e4,FU=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;let kU=class{constructor(e,t){var n;if(this.accessTokenValue=null,this.apiKey=null,this._manuallySetToken=!1,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=D1,this.transport=null,this.heartbeatIntervalMs=V0.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=Bx,this.ref=0,this.reconnectTimer=null,this.vsn=Zw,this.logger=Bx,this.conn=null,this.sendBuffer=[],this.serializer=new RU,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=a=>a?(...s)=>a(...s):(...s)=>fetch(...s),!(!((n=t==null?void 0:t.params)===null||n===void 0)&&n.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=t.params.apikey,this.endPoint=`${e}/${U1.websocket}`,this.httpEndpoint=WR(e),this._initializeOptions(t),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(t==null?void 0:t.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this.accessToken&&!this._authPromise&&this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=jR.createWebSocket(this.endpointURL())}catch(e){this._setConnectionState("disconnected");const t=e.message;throw t.includes("Node.js")?new Error(`${t}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${t}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:this.vsn}))}disconnect(e,t){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const n=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(n),this._setConnectionState("disconnected")},typeof this.conn.close=="function"&&(e?this.conn.close(e,t??""):this.conn.close()),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(e){const t=await e.unsubscribe();return this.channels.length===0&&this.disconnect(),t}async removeAllChannels(){const e=await Promise.all(this.channels.map(t=>t.unsubscribe()));return this.channels=[],this.disconnect(),e}log(e,t,n){this.logger(e,t,n)}connectionState(){switch(this.conn&&this.conn.readyState){case Ph.connecting:return zh.Connecting;case Ph.open:return zh.Open;case Ph.closing:return zh.Closing;default:return zh.Closed}}isConnected(){return this.connectionState()===zh.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(e,t={config:{}}){const n=`realtime:${e}`,a=this.getChannels().find(s=>s.topic===n);if(a)return a;{const s=new ZR(`realtime:${e}`,t,this);return this.channels.push(s),s}}push(e){const{topic:t,event:n,payload:a,ref:s}=e,l=()=>{this.encode(e,u=>{var d;(d=this.conn)===null||d===void 0||d.send(u)})};this.log("push",`${t} ${n} (${s})`,a),this.isConnected()?l():this.sendBuffer.push(l)}async setAuth(e=null){this._authPromise=this._performAuth(e);try{await this._authPromise}finally{this._authPromise=null}}_isManualToken(){return this._manuallySetToken}async sendHeartbeat(){var e;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(t){this.log("error","error in heartbeat callback",t)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(t){this.log("error","error in heartbeat callback",t)}this._wasManualDisconnect=!1,(e=this.conn)===null||e===void 0||e.close(AU,"heartbeat timeout"),setTimeout(()=>{var t;this.isConnected()||(t=this.reconnectTimer)===null||t===void 0||t.scheduleTimeout()},V0.HEARTBEAT_TIMEOUT_FALLBACK);return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(t){this.log("error","error in heartbeat callback",t)}this._setAuthSafely("heartbeat")}onHeartbeat(e){this.heartbeatCallback=e}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let t=this.channels.find(n=>n.topic===e&&(n._isJoined()||n._isJoining()));t&&(this.log("transport",`leaving duplicate topic "${e}"`),t.unsubscribe())}_remove(e){this.channels=this.channels.filter(t=>t.topic!==e.topic)}_onConnMessage(e){this.decode(e.data,t=>{if(t.topic==="phoenix"&&t.event==="phx_reply")try{this.heartbeatCallback(t.payload.status==="ok"?"ok":"error")}catch(p){this.log("error","error in heartbeat callback",p)}t.ref&&t.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);const{topic:n,event:a,payload:s,ref:l}=t,u=l?`(${l})`:"",d=s.status||"";this.log("receive",`${d} ${n} ${a} ${u}`.trim(),s),this.channels.filter(p=>p._isMember(n)).forEach(p=>p._trigger(a,s,l)),this._triggerStateCallbacks("message",t)})}_clearTimer(e){var t;e==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):e==="reconnect"&&((t=this.reconnectTimer)===null||t===void 0||t.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e))}_teardownConnection(){if(this.conn){if(this.conn.readyState===Ph.open||this.conn.readyState===Ph.connecting)try{this.conn.close()}catch(e){this.log("error","Error closing connection",e)}this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null}this._clearAllTimers(),this.channels.forEach(e=>e.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),(this._authPromise||(this.accessToken&&!this.accessTokenValue?this.setAuth():Promise.resolve())).then(()=>{this.flushSendBuffer()}).catch(t=>{this.log("error","error waiting for auth on connect",t),this.flushSendBuffer()}),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const e=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(e),this.workerRef.onerror=t=>{this.log("worker","worker error",t.message),this.workerRef.terminate()},this.workerRef.onmessage=t=>{t.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(e){var t;this._setConnectionState("disconnected"),this.log("transport","close",e),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(t=this.reconnectTimer)===null||t===void 0||t.scheduleTimeout(),this._triggerStateCallbacks("close",e)}_onConnError(e){this._setConnectionState("disconnected"),this.log("transport",`${e}`),this._triggerChanError(),this._triggerStateCallbacks("error",e)}_triggerChanError(){this.channels.forEach(e=>e._trigger(Mo.error))}_appendParams(e,t){if(Object.keys(t).length===0)return e;const n=e.match(/\?/)?"&":"?",a=new URLSearchParams(t);return`${e}${n}${a}`}_workerObjectUrl(e){let t;if(e)t=e;else{const n=new Blob([FU],{type:"application/javascript"});t=URL.createObjectURL(n)}return t}_setConnectionState(e,t=!1){this._connectionState=e,e==="connecting"?this._wasManualDisconnect=!1:e==="disconnecting"&&(this._wasManualDisconnect=t)}async _performAuth(e=null){let t,n=!1;if(e)t=e,n=!0;else if(this.accessToken)try{t=await this.accessToken()}catch(a){this.log("error","Error fetching access token from callback",a),t=this.accessTokenValue}else t=this.accessTokenValue;n?this._manuallySetToken=!0:this.accessToken&&(this._manuallySetToken=!1),this.accessTokenValue!=t&&(this.accessTokenValue=t,this.channels.forEach(a=>{const s={access_token:t,version:wU};t&&a.updateJoinPayload(s),a.joinedOnce&&a._isJoined()&&a._push(Mo.access_token,{access_token:t})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(e="general"){this._isManualToken()||this.setAuth().catch(t=>{this.log("error",`Error setting auth in ${e}`,t)})}_triggerStateCallbacks(e,t){try{this.stateChangeCallbacks[e].forEach(n=>{try{n(t)}catch(a){this.log("error",`error in ${e} callback`,a)}})}catch(n){this.log("error",`error triggering ${e} callbacks`,n)}}_setupReconnectionTimer(){this.reconnectTimer=new qR(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},V0.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(e){var t,n,a,s,l,u,d,p,g,y,_,b;switch(this.transport=(t=e==null?void 0:e.transport)!==null&&t!==void 0?t:null,this.timeout=(n=e==null?void 0:e.timeout)!==null&&n!==void 0?n:D1,this.heartbeatIntervalMs=(a=e==null?void 0:e.heartbeatIntervalMs)!==null&&a!==void 0?a:V0.HEARTBEAT_INTERVAL,this.worker=(s=e==null?void 0:e.worker)!==null&&s!==void 0?s:!1,this.accessToken=(l=e==null?void 0:e.accessToken)!==null&&l!==void 0?l:null,this.heartbeatCallback=(u=e==null?void 0:e.heartbeatCallback)!==null&&u!==void 0?u:Bx,this.vsn=(d=e==null?void 0:e.vsn)!==null&&d!==void 0?d:Zw,e!=null&&e.params&&(this.params=e.params),e!=null&&e.logger&&(this.logger=e.logger),(e!=null&&e.logLevel||e!=null&&e.log_level)&&(this.logLevel=e.logLevel||e.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(p=e==null?void 0:e.reconnectAfterMs)!==null&&p!==void 0?p:(x=>zU[x-1]||BU),this.vsn){case GR:this.encode=(g=e==null?void 0:e.encode)!==null&&g!==void 0?g:((x,T)=>T(JSON.stringify(x))),this.decode=(y=e==null?void 0:e.decode)!==null&&y!==void 0?y:((x,T)=>T(JSON.parse(x)));break;case TU:this.encode=(_=e==null?void 0:e.encode)!==null&&_!==void 0?_:this.serializer.encode.bind(this.serializer),this.decode=(b=e==null?void 0:e.decode)!==null&&b!==void 0?b:this.serializer.decode.bind(this.serializer);break;default:throw new Error(`Unsupported serializer version: ${this.vsn}`)}if(this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=e==null?void 0:e.workerUrl}}};const HU=Object.freeze(Object.defineProperty({__proto__:null,REALTIME_CHANNEL_STATES:PU,get REALTIME_LISTEN_TYPES(){return Zd},get REALTIME_POSTGRES_CHANGES_LISTEN_EVENT(){return P1},get REALTIME_PRESENCE_LISTEN_EVENTS(){return I1},get REALTIME_SUBSCRIBE_STATES(){return gl},RealtimeChannel:ZR,RealtimeClient:kU,RealtimePresence:YR,WebSocketFactory:jR},Symbol.toStringTag,{value:"Module"})),KR=Jg(HU);class Qg extends Error{constructor(e){super(e),this.__isStorageError=!0,this.name="StorageError"}}function Ni(i){return typeof i=="object"&&i!==null&&"__isStorageError"in i}class JR extends Qg{constructor(e,t,n){super(e),this.name="StorageApiError",this.status=t,this.statusCode=n}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class e_ extends Qg{constructor(e,t){super(e),this.name="StorageUnknownError",this.originalError=t}}const TE=i=>i?(...e)=>i(...e):(...e)=>fetch(...e),VU=()=>Response,z1=i=>{if(Array.isArray(i))return i.map(t=>z1(t));if(typeof i=="function"||i!==Object(i))return i;const e={};return Object.entries(i).forEach(([t,n])=>{const a=t.replace(/([-_][a-z])/gi,s=>s.toUpperCase().replace(/[-_]/g,""));e[a]=z1(n)}),e},jU=i=>{if(typeof i!="object"||i===null)return!1;const e=Object.getPrototypeOf(i);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in i)&&!(Symbol.iterator in i)},GU=i=>!i||typeof i!="string"||i.length===0||i.length>100||i.trim()!==i||i.includes("/")||i.includes("\\")?!1:/^[\w!.\*'() &$@=;:+,?-]+$/.test(i),Fx=i=>{var e;return i.msg||i.message||i.error_description||(typeof i.error=="string"?i.error:(e=i.error)===null||e===void 0?void 0:e.message)||JSON.stringify(i)},qU=(i,e,t)=>Pt(void 0,void 0,void 0,function*(){const n=yield VU();i instanceof n&&!(t!=null&&t.noResolveJson)?i.json().then(a=>{const s=i.status||500,l=(a==null?void 0:a.statusCode)||s+"";e(new JR(Fx(a),s,l))}).catch(a=>{e(new e_(Fx(a),a))}):e(new e_(Fx(i),i))}),XU=(i,e,t,n)=>{const a={method:i,headers:(e==null?void 0:e.headers)||{}};return i==="GET"||!n?a:(jU(n)?(a.headers=Object.assign({"Content-Type":"application/json"},e==null?void 0:e.headers),a.body=JSON.stringify(n)):a.body=n,e!=null&&e.duplex&&(a.duplex=e.duplex),Object.assign(Object.assign({},a),t))};function $g(i,e,t,n,a,s){return Pt(this,void 0,void 0,function*(){return new Promise((l,u)=>{i(t,XU(e,n,a,s)).then(d=>{if(!d.ok)throw d;return n!=null&&n.noResolveJson?d:d.json()}).then(d=>l(d)).catch(d=>qU(d,u,n))})})}function Ng(i,e,t,n){return Pt(this,void 0,void 0,function*(){return $g(i,"GET",e,t,n)})}function Eo(i,e,t,n,a){return Pt(this,void 0,void 0,function*(){return $g(i,"POST",e,n,a,t)})}function B1(i,e,t,n,a){return Pt(this,void 0,void 0,function*(){return $g(i,"PUT",e,n,a,t)})}function WU(i,e,t,n){return Pt(this,void 0,void 0,function*(){return $g(i,"HEAD",e,Object.assign(Object.assign({},t),{noResolveJson:!0}),n)})}function AE(i,e,t,n,a){return Pt(this,void 0,void 0,function*(){return $g(i,"DELETE",e,n,a,t)})}class YU{constructor(e,t){this.downloadFn=e,this.shouldThrowOnError=t}then(e,t){return this.execute().then(e,t)}execute(){return Pt(this,void 0,void 0,function*(){try{return{data:(yield this.downloadFn()).body,error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(Ni(e))return{data:null,error:e};throw e}})}}var QR;class ZU{constructor(e,t){this.downloadFn=e,this.shouldThrowOnError=t,this[QR]="BlobDownloadBuilder",this.promise=null}asStream(){return new YU(this.downloadFn,this.shouldThrowOnError)}then(e,t){return this.getPromise().then(e,t)}catch(e){return this.getPromise().catch(e)}finally(e){return this.getPromise().finally(e)}getPromise(){return this.promise||(this.promise=this.execute()),this.promise}execute(){return Pt(this,void 0,void 0,function*(){try{return{data:yield(yield this.downloadFn()).blob(),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(Ni(e))return{data:null,error:e};throw e}})}}QR=Symbol.toStringTag;const KU={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},Jw={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class JU{constructor(e,t={},n,a){this.shouldThrowOnError=!1,this.url=e,this.headers=t,this.bucketId=n,this.fetch=TE(a)}throwOnError(){return this.shouldThrowOnError=!0,this}uploadOrUpdate(e,t,n,a){return Pt(this,void 0,void 0,function*(){try{let s;const l=Object.assign(Object.assign({},Jw),a);let u=Object.assign(Object.assign({},this.headers),e==="POST"&&{"x-upsert":String(l.upsert)});const d=l.metadata;typeof Blob<"u"&&n instanceof Blob?(s=new FormData,s.append("cacheControl",l.cacheControl),d&&s.append("metadata",this.encodeMetadata(d)),s.append("",n)):typeof FormData<"u"&&n instanceof FormData?(s=n,s.has("cacheControl")||s.append("cacheControl",l.cacheControl),d&&!s.has("metadata")&&s.append("metadata",this.encodeMetadata(d))):(s=n,u["cache-control"]=`max-age=${l.cacheControl}`,u["content-type"]=l.contentType,d&&(u["x-metadata"]=this.toBase64(this.encodeMetadata(d))),(typeof ReadableStream<"u"&&s instanceof ReadableStream||s&&typeof s=="object"&&"pipe"in s&&typeof s.pipe=="function")&&!l.duplex&&(l.duplex="half")),a!=null&&a.headers&&(u=Object.assign(Object.assign({},u),a.headers));const p=this._removeEmptyFolders(t),g=this._getFinalPath(p),y=yield(e=="PUT"?B1:Eo)(this.fetch,`${this.url}/object/${g}`,s,Object.assign({headers:u},l!=null&&l.duplex?{duplex:l.duplex}:{}));return{data:{path:p,id:y.Id,fullPath:y.Key},error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(Ni(s))return{data:null,error:s};throw s}})}upload(e,t,n){return Pt(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",e,t,n)})}uploadToSignedUrl(e,t,n,a){return Pt(this,void 0,void 0,function*(){const s=this._removeEmptyFolders(e),l=this._getFinalPath(s),u=new URL(this.url+`/object/upload/sign/${l}`);u.searchParams.set("token",t);try{let d;const p=Object.assign({upsert:Jw.upsert},a),g=Object.assign(Object.assign({},this.headers),{"x-upsert":String(p.upsert)});typeof Blob<"u"&&n instanceof Blob?(d=new FormData,d.append("cacheControl",p.cacheControl),d.append("",n)):typeof FormData<"u"&&n instanceof FormData?(d=n,d.append("cacheControl",p.cacheControl)):(d=n,g["cache-control"]=`max-age=${p.cacheControl}`,g["content-type"]=p.contentType);const y=yield B1(this.fetch,u.toString(),d,{headers:g});return{data:{path:s,fullPath:y.Key},error:null}}catch(d){if(this.shouldThrowOnError)throw d;if(Ni(d))return{data:null,error:d};throw d}})}createSignedUploadUrl(e,t){return Pt(this,void 0,void 0,function*(){try{let n=this._getFinalPath(e);const a=Object.assign({},this.headers);t!=null&&t.upsert&&(a["x-upsert"]="true");const s=yield Eo(this.fetch,`${this.url}/object/upload/sign/${n}`,{},{headers:a}),l=new URL(this.url+s.url),u=l.searchParams.get("token");if(!u)throw new Qg("No token returned by API");return{data:{signedUrl:l.toString(),path:e,token:u},error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Ni(n))return{data:null,error:n};throw n}})}update(e,t,n){return Pt(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",e,t,n)})}move(e,t,n){return Pt(this,void 0,void 0,function*(){try{return{data:yield Eo(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:e,destinationKey:t,destinationBucket:n==null?void 0:n.destinationBucket},{headers:this.headers}),error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(Ni(a))return{data:null,error:a};throw a}})}copy(e,t,n){return Pt(this,void 0,void 0,function*(){try{return{data:{path:(yield Eo(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:e,destinationKey:t,destinationBucket:n==null?void 0:n.destinationBucket},{headers:this.headers})).Key},error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(Ni(a))return{data:null,error:a};throw a}})}createSignedUrl(e,t,n){return Pt(this,void 0,void 0,function*(){try{let a=this._getFinalPath(e),s=yield Eo(this.fetch,`${this.url}/object/sign/${a}`,Object.assign({expiresIn:t},n!=null&&n.transform?{transform:n.transform}:{}),{headers:this.headers});const l=n!=null&&n.download?`&download=${n.download===!0?"":n.download}`:"";return s={signedUrl:encodeURI(`${this.url}${s.signedURL}${l}`)},{data:s,error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(Ni(a))return{data:null,error:a};throw a}})}createSignedUrls(e,t,n){return Pt(this,void 0,void 0,function*(){try{const a=yield Eo(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:t,paths:e},{headers:this.headers}),s=n!=null&&n.download?`&download=${n.download===!0?"":n.download}`:"";return{data:a.map(l=>Object.assign(Object.assign({},l),{signedUrl:l.signedURL?encodeURI(`${this.url}${l.signedURL}${s}`):null})),error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(Ni(a))return{data:null,error:a};throw a}})}download(e,t){const a=typeof(t==null?void 0:t.transform)<"u"?"render/image/authenticated":"object",s=this.transformOptsToQueryString((t==null?void 0:t.transform)||{}),l=s?`?${s}`:"",u=this._getFinalPath(e),d=()=>Ng(this.fetch,`${this.url}/${a}/${u}${l}`,{headers:this.headers,noResolveJson:!0});return new ZU(d,this.shouldThrowOnError)}info(e){return Pt(this,void 0,void 0,function*(){const t=this._getFinalPath(e);try{const n=yield Ng(this.fetch,`${this.url}/object/info/${t}`,{headers:this.headers});return{data:z1(n),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Ni(n))return{data:null,error:n};throw n}})}exists(e){return Pt(this,void 0,void 0,function*(){const t=this._getFinalPath(e);try{return yield WU(this.fetch,`${this.url}/object/${t}`,{headers:this.headers}),{data:!0,error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Ni(n)&&n instanceof e_){const a=n.originalError;if([400,404].includes(a==null?void 0:a.status))return{data:!1,error:n}}throw n}})}getPublicUrl(e,t){const n=this._getFinalPath(e),a=[],s=t!=null&&t.download?`download=${t.download===!0?"":t.download}`:"";s!==""&&a.push(s);const u=typeof(t==null?void 0:t.transform)<"u"?"render/image":"object",d=this.transformOptsToQueryString((t==null?void 0:t.transform)||{});d!==""&&a.push(d);let p=a.join("&");return p!==""&&(p=`?${p}`),{data:{publicUrl:encodeURI(`${this.url}/${u}/public/${n}${p}`)}}}remove(e){return Pt(this,void 0,void 0,function*(){try{return{data:yield AE(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:e},{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(Ni(t))return{data:null,error:t};throw t}})}list(e,t,n){return Pt(this,void 0,void 0,function*(){try{const a=Object.assign(Object.assign(Object.assign({},KU),t),{prefix:e||""});return{data:yield Eo(this.fetch,`${this.url}/object/list/${this.bucketId}`,a,{headers:this.headers},n),error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(Ni(a))return{data:null,error:a};throw a}})}listV2(e,t){return Pt(this,void 0,void 0,function*(){try{const n=Object.assign({},e);return{data:yield Eo(this.fetch,`${this.url}/object/list-v2/${this.bucketId}`,n,{headers:this.headers},t),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Ni(n))return{data:null,error:n};throw n}})}encodeMetadata(e){return JSON.stringify(e)}toBase64(e){return typeof Buffer<"u"?Buffer.from(e).toString("base64"):btoa(e)}_getFinalPath(e){return`${this.bucketId}/${e.replace(/^\/+/,"")}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const t=[];return e.width&&t.push(`width=${e.width}`),e.height&&t.push(`height=${e.height}`),e.resize&&t.push(`resize=${e.resize}`),e.format&&t.push(`format=${e.format}`),e.quality&&t.push(`quality=${e.quality}`),t.join("&")}}const $R="2.87.1",e3={"X-Client-Info":`storage-js/${$R}`};class QU{constructor(e,t={},n,a){this.shouldThrowOnError=!1;const s=new URL(e);a!=null&&a.useNewHostname&&/supabase\.(co|in|red)$/.test(s.hostname)&&!s.hostname.includes("storage.supabase.")&&(s.hostname=s.hostname.replace("supabase.","storage.supabase.")),this.url=s.href.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},e3),t),this.fetch=TE(n)}throwOnError(){return this.shouldThrowOnError=!0,this}listBuckets(e){return Pt(this,void 0,void 0,function*(){try{const t=this.listBucketOptionsToQueryString(e);return{data:yield Ng(this.fetch,`${this.url}/bucket${t}`,{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(Ni(t))return{data:null,error:t};throw t}})}getBucket(e){return Pt(this,void 0,void 0,function*(){try{return{data:yield Ng(this.fetch,`${this.url}/bucket/${e}`,{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(Ni(t))return{data:null,error:t};throw t}})}createBucket(e){return Pt(this,arguments,void 0,function*(t,n={public:!1}){try{return{data:yield Eo(this.fetch,`${this.url}/bucket`,{id:t,name:t,type:n.type,public:n.public,file_size_limit:n.fileSizeLimit,allowed_mime_types:n.allowedMimeTypes},{headers:this.headers}),error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(Ni(a))return{data:null,error:a};throw a}})}updateBucket(e,t){return Pt(this,void 0,void 0,function*(){try{return{data:yield B1(this.fetch,`${this.url}/bucket/${e}`,{id:e,name:e,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Ni(n))return{data:null,error:n};throw n}})}emptyBucket(e){return Pt(this,void 0,void 0,function*(){try{return{data:yield Eo(this.fetch,`${this.url}/bucket/${e}/empty`,{},{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(Ni(t))return{data:null,error:t};throw t}})}deleteBucket(e){return Pt(this,void 0,void 0,function*(){try{return{data:yield AE(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(Ni(t))return{data:null,error:t};throw t}})}listBucketOptionsToQueryString(e){const t={};return e&&("limit"in e&&(t.limit=String(e.limit)),"offset"in e&&(t.offset=String(e.offset)),e.search&&(t.search=e.search),e.sortColumn&&(t.sortColumn=e.sortColumn),e.sortOrder&&(t.sortOrder=e.sortOrder)),Object.keys(t).length>0?"?"+new URLSearchParams(t).toString():""}}var Og=class extends Error{constructor(i,e){var t;super(i),this.name="IcebergError",this.status=e.status,this.icebergType=e.icebergType,this.icebergCode=e.icebergCode,this.details=e.details,this.isCommitStateUnknown=e.icebergType==="CommitStateUnknownException"||[500,502,504].includes(e.status)&&((t=e.icebergType)==null?void 0:t.includes("CommitState"))===!0}isNotFound(){return this.status===404}isConflict(){return this.status===409}isAuthenticationTimeout(){return this.status===419}};function $U(i,e,t){const n=new URL(e,i);if(t)for(const[a,s]of Object.entries(t))s!==void 0&&n.searchParams.set(a,s);return n.toString()}async function eL(i){return!i||i.type==="none"?{}:i.type==="bearer"?{Authorization:`Bearer ${i.token}`}:i.type==="header"?{[i.name]:i.value}:i.type==="custom"?await i.getHeaders():{}}function tL(i){const e=i.fetchImpl??globalThis.fetch;return{async request({method:t,path:n,query:a,body:s,headers:l}){const u=$U(i.baseUrl,n,a),d=await eL(i.auth),p=await e(u,{method:t,headers:{...s?{"Content-Type":"application/json"}:{},...d,...l},body:s?JSON.stringify(s):void 0}),g=await p.text(),y=(p.headers.get("content-type")||"").includes("application/json"),_=y&&g?JSON.parse(g):g;if(!p.ok){const b=y?_:void 0,x=b==null?void 0:b.error;throw new Og((x==null?void 0:x.message)??`Request failed with status ${p.status}`,{status:p.status,icebergType:x==null?void 0:x.type,icebergCode:x==null?void 0:x.code,details:b})}return{status:p.status,headers:p.headers,data:_}}}}function j0(i){return i.join("")}var nL=class{constructor(i,e=""){this.client=i,this.prefix=e}async listNamespaces(i){const e=i?{parent:j0(i.namespace)}:void 0;return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces`,query:e})).data.namespaces.map(n=>({namespace:n}))}async createNamespace(i,e){const t={namespace:i.namespace,properties:e==null?void 0:e.properties};return(await this.client.request({method:"POST",path:`${this.prefix}/namespaces`,body:t})).data}async dropNamespace(i){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${j0(i.namespace)}`})}async loadNamespaceMetadata(i){return{properties:(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${j0(i.namespace)}`})).data.properties}}async namespaceExists(i){try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${j0(i.namespace)}`}),!0}catch(e){if(e instanceof Og&&e.status===404)return!1;throw e}}async createNamespaceIfNotExists(i,e){try{return await this.createNamespace(i,e)}catch(t){if(t instanceof Og&&t.status===409)return;throw t}}};function pd(i){return i.join("")}var iL=class{constructor(i,e="",t){this.client=i,this.prefix=e,this.accessDelegation=t}async listTables(i){return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${pd(i.namespace)}/tables`})).data.identifiers}async createTable(i,e){const t={};return this.accessDelegation&&(t["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${pd(i.namespace)}/tables`,body:e,headers:t})).data.metadata}async updateTable(i,e){const t=await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${pd(i.namespace)}/tables/${i.name}`,body:e});return{"metadata-location":t.data["metadata-location"],metadata:t.data.metadata}}async dropTable(i,e){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${pd(i.namespace)}/tables/${i.name}`,query:{purgeRequested:String((e==null?void 0:e.purge)??!1)}})}async loadTable(i){const e={};return this.accessDelegation&&(e["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${pd(i.namespace)}/tables/${i.name}`,headers:e})).data.metadata}async tableExists(i){const e={};this.accessDelegation&&(e["X-Iceberg-Access-Delegation"]=this.accessDelegation);try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${pd(i.namespace)}/tables/${i.name}`,headers:e}),!0}catch(t){if(t instanceof Og&&t.status===404)return!1;throw t}}async createTableIfNotExists(i,e){try{return await this.createTable(i,e)}catch(t){if(t instanceof Og&&t.status===409)return await this.loadTable({namespace:i.namespace,name:e.name});throw t}}},aL=class{constructor(i){var n;let e="v1";i.catalogName&&(e+=`/${i.catalogName}`);const t=i.baseUrl.endsWith("/")?i.baseUrl:`${i.baseUrl}/`;this.client=tL({baseUrl:t,auth:i.auth,fetchImpl:i.fetch}),this.accessDelegation=(n=i.accessDelegation)==null?void 0:n.join(","),this.namespaceOps=new nL(this.client,e),this.tableOps=new iL(this.client,e,this.accessDelegation)}async listNamespaces(i){return this.namespaceOps.listNamespaces(i)}async createNamespace(i,e){return this.namespaceOps.createNamespace(i,e)}async dropNamespace(i){await this.namespaceOps.dropNamespace(i)}async loadNamespaceMetadata(i){return this.namespaceOps.loadNamespaceMetadata(i)}async listTables(i){return this.tableOps.listTables(i)}async createTable(i,e){return this.tableOps.createTable(i,e)}async updateTable(i,e){return this.tableOps.updateTable(i,e)}async dropTable(i,e){await this.tableOps.dropTable(i,e)}async loadTable(i){return this.tableOps.loadTable(i)}async namespaceExists(i){return this.namespaceOps.namespaceExists(i)}async tableExists(i){return this.tableOps.tableExists(i)}async createNamespaceIfNotExists(i,e){return this.namespaceOps.createNamespaceIfNotExists(i,e)}async createTableIfNotExists(i,e){return this.tableOps.createTableIfNotExists(i,e)}};class t3{constructor(e,t={},n){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},e3),t),this.fetch=TE(n)}throwOnError(){return this.shouldThrowOnError=!0,this}createBucket(e){return Pt(this,void 0,void 0,function*(){try{return{data:yield Eo(this.fetch,`${this.url}/bucket`,{name:e},{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(Ni(t))return{data:null,error:t};throw t}})}listBuckets(e){return Pt(this,void 0,void 0,function*(){try{const t=new URLSearchParams;(e==null?void 0:e.limit)!==void 0&&t.set("limit",e.limit.toString()),(e==null?void 0:e.offset)!==void 0&&t.set("offset",e.offset.toString()),e!=null&&e.sortColumn&&t.set("sortColumn",e.sortColumn),e!=null&&e.sortOrder&&t.set("sortOrder",e.sortOrder),e!=null&&e.search&&t.set("search",e.search);const n=t.toString(),a=n?`${this.url}/bucket?${n}`:`${this.url}/bucket`;return{data:yield Ng(this.fetch,a,{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(Ni(t))return{data:null,error:t};throw t}})}deleteBucket(e){return Pt(this,void 0,void 0,function*(){try{return{data:yield AE(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(Ni(t))return{data:null,error:t};throw t}})}from(e){if(!GU(e))throw new Qg("Invalid bucket name: File, folder, and bucket names must follow AWS object key naming guidelines and should avoid the use of any other characters.");const t=new aL({baseUrl:this.url,catalogName:e,auth:{type:"custom",getHeaders:()=>Pt(this,void 0,void 0,function*(){return this.headers})},fetch:this.fetch}),n=this.shouldThrowOnError;return new Proxy(t,{get(s,l){const u=s[l];return typeof u!="function"?u:(...d)=>Pt(this,void 0,void 0,function*(){try{return{data:yield u.apply(s,d),error:null}}catch(p){if(n)throw p;return{data:null,error:p}}})}})}}const CE={"X-Client-Info":`storage-js/${$R}`,"Content-Type":"application/json"};class RE extends Error{constructor(e){super(e),this.__isStorageVectorsError=!0,this.name="StorageVectorsError"}}function ns(i){return typeof i=="object"&&i!==null&&"__isStorageVectorsError"in i}class jy extends RE{constructor(e,t,n){super(e),this.name="StorageVectorsApiError",this.status=t,this.statusCode=n}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class n3 extends RE{constructor(e,t){super(e),this.name="StorageVectorsUnknownError",this.originalError=t}}var F1;(function(i){i.InternalError="InternalError",i.S3VectorConflictException="S3VectorConflictException",i.S3VectorNotFoundException="S3VectorNotFoundException",i.S3VectorBucketNotEmpty="S3VectorBucketNotEmpty",i.S3VectorMaxBucketsExceeded="S3VectorMaxBucketsExceeded",i.S3VectorMaxIndexesExceeded="S3VectorMaxIndexesExceeded"})(F1||(F1={}));const lb=i=>i?(...e)=>i(...e):(...e)=>fetch(...e),rL=()=>Response,i3=i=>{if(typeof i!="object"||i===null)return!1;const e=Object.getPrototypeOf(i);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in i)&&!(Symbol.iterator in i)},sL=i=>Array.from(new Float32Array(i)),oL=(i,e)=>{if(e!==void 0&&i.float32.length!==e)throw new Error(`Vector dimension mismatch: expected ${e}, got ${i.float32.length}`)},Qw=i=>i.msg||i.message||i.error_description||i.error||JSON.stringify(i),lL=(i,e,t)=>Pt(void 0,void 0,void 0,function*(){if(i&&typeof i=="object"&&"status"in i&&"ok"in i&&typeof i.status=="number"&&!(t!=null&&t.noResolveJson)){const a=i.status||500,s=i;if(typeof s.json=="function")s.json().then(l=>{const u=(l==null?void 0:l.statusCode)||(l==null?void 0:l.code)||a+"";e(new jy(Qw(l),a,u))}).catch(()=>{const l=a+"",u=s.statusText||`HTTP ${a} error`;e(new jy(u,a,l))});else{const l=a+"",u=s.statusText||`HTTP ${a} error`;e(new jy(u,a,l))}}else e(new n3(Qw(i),i))}),cL=(i,e,t,n)=>{const a={method:i,headers:(e==null?void 0:e.headers)||{}};return n?(i3(n)?(a.headers=Object.assign({"Content-Type":"application/json"},e==null?void 0:e.headers),a.body=JSON.stringify(n)):a.body=n,Object.assign(Object.assign({},a),t)):a};function uL(i,e,t,n,a,s){return Pt(this,void 0,void 0,function*(){return new Promise((l,u)=>{i(t,cL(e,n,a,s)).then(d=>{if(!d.ok)throw d;if(n!=null&&n.noResolveJson)return d;const p=d.headers.get("content-type");return!p||!p.includes("application/json")?{}:d.json()}).then(d=>l(d)).catch(d=>lL(d,u,n))})})}function ys(i,e,t,n,a){return Pt(this,void 0,void 0,function*(){return uL(i,"POST",e,n,a,t)})}class a3{constructor(e,t={},n){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},CE),t),this.fetch=lb(n)}throwOnError(){return this.shouldThrowOnError=!0,this}createIndex(e){return Pt(this,void 0,void 0,function*(){try{return{data:(yield ys(this.fetch,`${this.url}/CreateIndex`,e,{headers:this.headers}))||{},error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(ns(t))return{data:null,error:t};throw t}})}getIndex(e,t){return Pt(this,void 0,void 0,function*(){try{return{data:yield ys(this.fetch,`${this.url}/GetIndex`,{vectorBucketName:e,indexName:t},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(ns(n))return{data:null,error:n};throw n}})}listIndexes(e){return Pt(this,void 0,void 0,function*(){try{return{data:yield ys(this.fetch,`${this.url}/ListIndexes`,e,{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(ns(t))return{data:null,error:t};throw t}})}deleteIndex(e,t){return Pt(this,void 0,void 0,function*(){try{return{data:(yield ys(this.fetch,`${this.url}/DeleteIndex`,{vectorBucketName:e,indexName:t},{headers:this.headers}))||{},error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(ns(n))return{data:null,error:n};throw n}})}}class r3{constructor(e,t={},n){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},CE),t),this.fetch=lb(n)}throwOnError(){return this.shouldThrowOnError=!0,this}putVectors(e){return Pt(this,void 0,void 0,function*(){try{if(e.vectors.length<1||e.vectors.length>500)throw new Error("Vector batch size must be between 1 and 500 items");return{data:(yield ys(this.fetch,`${this.url}/PutVectors`,e,{headers:this.headers}))||{},error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(ns(t))return{data:null,error:t};throw t}})}getVectors(e){return Pt(this,void 0,void 0,function*(){try{return{data:yield ys(this.fetch,`${this.url}/GetVectors`,e,{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(ns(t))return{data:null,error:t};throw t}})}listVectors(e){return Pt(this,void 0,void 0,function*(){try{if(e.segmentCount!==void 0){if(e.segmentCount<1||e.segmentCount>16)throw new Error("segmentCount must be between 1 and 16");if(e.segmentIndex!==void 0&&(e.segmentIndex<0||e.segmentIndex>=e.segmentCount))throw new Error(`segmentIndex must be between 0 and ${e.segmentCount-1}`)}return{data:yield ys(this.fetch,`${this.url}/ListVectors`,e,{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(ns(t))return{data:null,error:t};throw t}})}queryVectors(e){return Pt(this,void 0,void 0,function*(){try{return{data:yield ys(this.fetch,`${this.url}/QueryVectors`,e,{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(ns(t))return{data:null,error:t};throw t}})}deleteVectors(e){return Pt(this,void 0,void 0,function*(){try{if(e.keys.length<1||e.keys.length>500)throw new Error("Keys batch size must be between 1 and 500 items");return{data:(yield ys(this.fetch,`${this.url}/DeleteVectors`,e,{headers:this.headers}))||{},error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(ns(t))return{data:null,error:t};throw t}})}}class s3{constructor(e,t={},n){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},CE),t),this.fetch=lb(n)}throwOnError(){return this.shouldThrowOnError=!0,this}createBucket(e){return Pt(this,void 0,void 0,function*(){try{return{data:(yield ys(this.fetch,`${this.url}/CreateVectorBucket`,{vectorBucketName:e},{headers:this.headers}))||{},error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(ns(t))return{data:null,error:t};throw t}})}getBucket(e){return Pt(this,void 0,void 0,function*(){try{return{data:yield ys(this.fetch,`${this.url}/GetVectorBucket`,{vectorBucketName:e},{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(ns(t))return{data:null,error:t};throw t}})}listBuckets(){return Pt(this,arguments,void 0,function*(e={}){try{return{data:yield ys(this.fetch,`${this.url}/ListVectorBuckets`,e,{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(ns(t))return{data:null,error:t};throw t}})}deleteBucket(e){return Pt(this,void 0,void 0,function*(){try{return{data:(yield ys(this.fetch,`${this.url}/DeleteVectorBucket`,{vectorBucketName:e},{headers:this.headers}))||{},error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(ns(t))return{data:null,error:t};throw t}})}}class o3 extends s3{constructor(e,t={}){super(e,t.headers||{},t.fetch)}from(e){return new l3(this.url,this.headers,e,this.fetch)}createBucket(e){const t=Object.create(null,{createBucket:{get:()=>super.createBucket}});return Pt(this,void 0,void 0,function*(){return t.createBucket.call(this,e)})}getBucket(e){const t=Object.create(null,{getBucket:{get:()=>super.getBucket}});return Pt(this,void 0,void 0,function*(){return t.getBucket.call(this,e)})}listBuckets(){const e=Object.create(null,{listBuckets:{get:()=>super.listBuckets}});return Pt(this,arguments,void 0,function*(t={}){return e.listBuckets.call(this,t)})}deleteBucket(e){const t=Object.create(null,{deleteBucket:{get:()=>super.deleteBucket}});return Pt(this,void 0,void 0,function*(){return t.deleteBucket.call(this,e)})}}class l3 extends a3{constructor(e,t,n,a){super(e,t,a),this.vectorBucketName=n}createIndex(e){const t=Object.create(null,{createIndex:{get:()=>super.createIndex}});return Pt(this,void 0,void 0,function*(){return t.createIndex.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName}))})}listIndexes(){const e=Object.create(null,{listIndexes:{get:()=>super.listIndexes}});return Pt(this,arguments,void 0,function*(t={}){return e.listIndexes.call(this,Object.assign(Object.assign({},t),{vectorBucketName:this.vectorBucketName}))})}getIndex(e){const t=Object.create(null,{getIndex:{get:()=>super.getIndex}});return Pt(this,void 0,void 0,function*(){return t.getIndex.call(this,this.vectorBucketName,e)})}deleteIndex(e){const t=Object.create(null,{deleteIndex:{get:()=>super.deleteIndex}});return Pt(this,void 0,void 0,function*(){return t.deleteIndex.call(this,this.vectorBucketName,e)})}index(e){return new c3(this.url,this.headers,this.vectorBucketName,e,this.fetch)}}class c3 extends r3{constructor(e,t,n,a,s){super(e,t,s),this.vectorBucketName=n,this.indexName=a}putVectors(e){const t=Object.create(null,{putVectors:{get:()=>super.putVectors}});return Pt(this,void 0,void 0,function*(){return t.putVectors.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}getVectors(e){const t=Object.create(null,{getVectors:{get:()=>super.getVectors}});return Pt(this,void 0,void 0,function*(){return t.getVectors.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}listVectors(){const e=Object.create(null,{listVectors:{get:()=>super.listVectors}});return Pt(this,arguments,void 0,function*(t={}){return e.listVectors.call(this,Object.assign(Object.assign({},t),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}queryVectors(e){const t=Object.create(null,{queryVectors:{get:()=>super.queryVectors}});return Pt(this,void 0,void 0,function*(){return t.queryVectors.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}deleteVectors(e){const t=Object.create(null,{deleteVectors:{get:()=>super.deleteVectors}});return Pt(this,void 0,void 0,function*(){return t.deleteVectors.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}}class hL extends QU{constructor(e,t={},n,a){super(e,t,n,a)}from(e){return new JU(this.url,this.headers,e,this.fetch)}get vectors(){return new o3(this.url+"/vector",{headers:this.headers,fetch:this.fetch})}get analytics(){return new t3(this.url+"/iceberg",this.headers,this.fetch)}}const fL=Object.freeze(Object.defineProperty({__proto__:null,StorageAnalyticsClient:t3,StorageApiError:JR,StorageClient:hL,StorageError:Qg,StorageUnknownError:e_,StorageVectorsApiError:jy,StorageVectorsClient:o3,StorageVectorsError:RE,get StorageVectorsErrorCode(){return F1},StorageVectorsUnknownError:n3,VectorBucketApi:s3,VectorBucketScope:l3,VectorDataApi:r3,VectorIndexApi:a3,VectorIndexScope:c3,isPlainObject:i3,isStorageError:Ni,isStorageVectorsError:ns,normalizeToFloat32:sL,resolveFetch:lb,resolveResponse:rL,validateVectorDimension:oL},Symbol.toStringTag,{value:"Module"})),dL=Jg(fL);var kx={},Ym={},$w;function pL(){return $w||($w=1,Object.defineProperty(Ym,"__esModule",{value:!0}),Ym.version=void 0,Ym.version="2.87.1"),Ym}var eT;function mL(){return eT||(eT=1,(function(i){Object.defineProperty(i,"__esModule",{value:!0}),i.DEFAULT_REALTIME_OPTIONS=i.DEFAULT_AUTH_OPTIONS=i.DEFAULT_DB_OPTIONS=i.DEFAULT_GLOBAL_OPTIONS=i.DEFAULT_HEADERS=void 0;const e=pL();let t="";typeof Deno<"u"?t="deno":typeof document<"u"?t="web":typeof navigator<"u"&&navigator.product==="ReactNative"?t="react-native":t="node",i.DEFAULT_HEADERS={"X-Client-Info":`supabase-js-${t}/${e.version}`},i.DEFAULT_GLOBAL_OPTIONS={headers:i.DEFAULT_HEADERS},i.DEFAULT_DB_OPTIONS={schema:"public"},i.DEFAULT_AUTH_OPTIONS={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},i.DEFAULT_REALTIME_OPTIONS={}})(kx)),kx}var Hx={},tT;function gL(){return tT||(tT=1,(function(i){Object.defineProperty(i,"__esModule",{value:!0}),i.fetchWithAuth=i.resolveHeadersConstructor=i.resolveFetch=void 0;const e=a=>a?(...s)=>a(...s):(...s)=>fetch(...s);i.resolveFetch=e;const t=()=>Headers;i.resolveHeadersConstructor=t;const n=(a,s,l)=>{const u=(0,i.resolveFetch)(l),d=(0,i.resolveHeadersConstructor)();return async(p,g)=>{var y;const _=(y=await s())!==null&&y!==void 0?y:a;let b=new d(g==null?void 0:g.headers);return b.has("apikey")||b.set("apikey",a),b.has("Authorization")||b.set("Authorization",`Bearer ${_}`),u(p,Object.assign(Object.assign({},g),{headers:b}))}};i.fetchWithAuth=n})(Hx)),Hx}var tc={},nT;function vL(){if(nT)return tc;nT=1,Object.defineProperty(tc,"__esModule",{value:!0}),tc.isBrowser=void 0,tc.uuid=i,tc.ensureTrailingSlash=e,tc.applySettingDefaults=n,tc.validateSupabaseUrl=a;function i(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(s){var l=Math.random()*16|0,u=s=="x"?l:l&3|8;return u.toString(16)})}function e(s){return s.endsWith("/")?s:s+"/"}const t=()=>typeof window<"u";tc.isBrowser=t;function n(s,l){var u,d;const{db:p,auth:g,realtime:y,global:_}=s,{db:b,auth:x,realtime:T,global:w}=l,S={db:Object.assign(Object.assign({},b),p),auth:Object.assign(Object.assign({},x),g),realtime:Object.assign(Object.assign({},T),y),storage:{},global:Object.assign(Object.assign(Object.assign({},w),_),{headers:Object.assign(Object.assign({},(u=w==null?void 0:w.headers)!==null&&u!==void 0?u:{}),(d=_==null?void 0:_.headers)!==null&&d!==void 0?d:{})}),accessToken:async()=>""};return s.accessToken?S.accessToken=s.accessToken:delete S.accessToken,S}function a(s){const l=s==null?void 0:s.trim();if(!l)throw new Error("supabaseUrl is required.");if(!l.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(e(l))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}return tc}var Zm={};const u3="2.87.1",Gd=30*1e3,k1=3,Vx=k1*Gd,yL="http://localhost:9999",_L="supabase.auth.token",bL={"X-Client-Info":`gotrue-js/${u3}`},H1="X-Supabase-Api-Version",h3={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},xL=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,SL=600*1e3;let tp=class extends Error{constructor(e,t,n){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=t,this.code=n}};function Yt(i){return typeof i=="object"&&i!==null&&"__isAuthError"in i}let f3=class extends tp{constructor(e,t,n){super(e,t,n),this.name="AuthApiError",this.status=t,this.code=n}};function d3(i){return Yt(i)&&i.name==="AuthApiError"}let uu=class extends tp{constructor(e,t){super(e),this.name="AuthUnknownError",this.originalError=t}},pc=class extends tp{constructor(e,t,n,a){super(e,n,a),this.name=t,this.status=n}},ts=class extends pc{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}};function p3(i){return Yt(i)&&i.name==="AuthSessionMissingError"}let Nh=class extends pc{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}},dg=class extends pc{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}},pg=class extends pc{constructor(e,t=null){super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=t}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}};function m3(i){return Yt(i)&&i.name==="AuthImplicitGrantRedirectError"}let V1=class extends pc{constructor(e,t=null){super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=t}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}},t_=class extends pc{constructor(e,t){super(e,"AuthRetryableFetchError",t,void 0)}};function Gy(i){return Yt(i)&&i.name==="AuthRetryableFetchError"}let j1=class extends pc{constructor(e,t,n){super(e,"AuthWeakPasswordError",t,"weak_password"),this.reasons=n}};function EL(i){return Yt(i)&&i.name==="AuthWeakPasswordError"}let n_=class extends pc{constructor(e){super(e,"AuthInvalidJwtError",400,"invalid_jwt")}};const i_="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),iT=` 	
\r=`.split(""),ML=(()=>{const i=new Array(128);for(let e=0;e<i.length;e+=1)i[e]=-1;for(let e=0;e<iT.length;e+=1)i[iT[e].charCodeAt(0)]=-2;for(let e=0;e<i_.length;e+=1)i[i_[e].charCodeAt(0)]=e;return i})();function aT(i,e,t){if(i!==null)for(e.queue=e.queue<<8|i,e.queuedBits+=8;e.queuedBits>=6;){const n=e.queue>>e.queuedBits-6&63;t(i_[n]),e.queuedBits-=6}else if(e.queuedBits>0)for(e.queue=e.queue<<6-e.queuedBits,e.queuedBits=6;e.queuedBits>=6;){const n=e.queue>>e.queuedBits-6&63;t(i_[n]),e.queuedBits-=6}}function g3(i,e,t){const n=ML[i];if(n>-1)for(e.queue=e.queue<<6|n,e.queuedBits+=6;e.queuedBits>=8;)t(e.queue>>e.queuedBits-8&255),e.queuedBits-=8;else{if(n===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(i)}"`)}}function rT(i){const e=[],t=l=>{e.push(String.fromCodePoint(l))},n={utf8seq:0,codepoint:0},a={queue:0,queuedBits:0},s=l=>{AL(l,n,t)};for(let l=0;l<i.length;l+=1)g3(i.charCodeAt(l),a,s);return e.join("")}function wL(i,e){if(i<=127){e(i);return}else if(i<=2047){e(192|i>>6),e(128|i&63);return}else if(i<=65535){e(224|i>>12),e(128|i>>6&63),e(128|i&63);return}else if(i<=1114111){e(240|i>>18),e(128|i>>12&63),e(128|i>>6&63),e(128|i&63);return}throw new Error(`Unrecognized Unicode codepoint: ${i.toString(16)}`)}function TL(i,e){for(let t=0;t<i.length;t+=1){let n=i.charCodeAt(t);if(n>55295&&n<=56319){const a=(n-55296)*1024&65535;n=(i.charCodeAt(t+1)-56320&65535|a)+65536,t+=1}wL(n,e)}}function AL(i,e,t){if(e.utf8seq===0){if(i<=127){t(i);return}for(let n=1;n<6;n+=1)if((i>>7-n&1)===0){e.utf8seq=n;break}if(e.utf8seq===2)e.codepoint=i&31;else if(e.utf8seq===3)e.codepoint=i&15;else if(e.utf8seq===4)e.codepoint=i&7;else throw new Error("Invalid UTF-8 sequence");e.utf8seq-=1}else if(e.utf8seq>0){if(i<=127)throw new Error("Invalid UTF-8 sequence");e.codepoint=e.codepoint<<6|i&63,e.utf8seq-=1,e.utf8seq===0&&t(e.codepoint)}}function Kd(i){const e=[],t={queue:0,queuedBits:0},n=a=>{e.push(a)};for(let a=0;a<i.length;a+=1)g3(i.charCodeAt(a),t,n);return new Uint8Array(e)}function CL(i){const e=[];return TL(i,t=>e.push(t)),new Uint8Array(e)}function kh(i){const e=[],t={queue:0,queuedBits:0},n=a=>{e.push(a)};return i.forEach(a=>aT(a,t,n)),aT(null,t,n),e.join("")}function RL(i){return Math.round(Date.now()/1e3)+i}function NL(){return Symbol("auth-callback")}const $a=()=>typeof window<"u"&&typeof document<"u",ph={tested:!1,writable:!1},v3=()=>{if(!$a())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(ph.tested)return ph.writable;const i=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(i,i),globalThis.localStorage.removeItem(i),ph.tested=!0,ph.writable=!0}catch{ph.tested=!0,ph.writable=!1}return ph.writable};function OL(i){const e={},t=new URL(i);if(t.hash&&t.hash[0]==="#")try{new URLSearchParams(t.hash.substring(1)).forEach((a,s)=>{e[s]=a})}catch{}return t.searchParams.forEach((n,a)=>{e[a]=n}),e}const y3=i=>i?(...e)=>i(...e):(...e)=>fetch(...e),DL=i=>typeof i=="object"&&i!==null&&"status"in i&&"ok"in i&&"json"in i&&typeof i.json=="function",qd=async(i,e,t)=>{await i.setItem(e,JSON.stringify(t))},mh=async(i,e)=>{const t=await i.getItem(e);if(!t)return null;try{return JSON.parse(t)}catch{return t}},Qa=async(i,e)=>{await i.removeItem(e)};class cb{constructor(){this.promise=new cb.promiseConstructor((e,t)=>{this.resolve=e,this.reject=t})}}cb.promiseConstructor=Promise;function jx(i){const e=i.split(".");if(e.length!==3)throw new n_("Invalid JWT structure");for(let n=0;n<e.length;n++)if(!xL.test(e[n]))throw new n_("JWT not in base64url format");return{header:JSON.parse(rT(e[0])),payload:JSON.parse(rT(e[1])),signature:Kd(e[2]),raw:{header:e[0],payload:e[1]}}}async function UL(i){return await new Promise(e=>{setTimeout(()=>e(null),i)})}function LL(i,e){return new Promise((n,a)=>{(async()=>{for(let s=0;s<1/0;s++)try{const l=await i(s);if(!e(s,null,l)){n(l);return}}catch(l){if(!e(s,l)){a(l);return}}})()})}function IL(i){return("0"+i.toString(16)).substr(-2)}function PL(){const e=new Uint32Array(56);if(typeof crypto>"u"){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",n=t.length;let a="";for(let s=0;s<56;s++)a+=t.charAt(Math.floor(Math.random()*n));return a}return crypto.getRandomValues(e),Array.from(e,IL).join("")}async function zL(i){const t=new TextEncoder().encode(i),n=await crypto.subtle.digest("SHA-256",t),a=new Uint8Array(n);return Array.from(a).map(s=>String.fromCharCode(s)).join("")}async function BL(i){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),i;const t=await zL(i);return btoa(t).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function md(i,e,t=!1){const n=PL();let a=n;t&&(a+="/PASSWORD_RECOVERY"),await qd(i,`${e}-code-verifier`,a);const s=await BL(n);return[s,n===s?"plain":"s256"]}const FL=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function kL(i){const e=i.headers.get(H1);if(!e||!e.match(FL))return null;try{return new Date(`${e}T00:00:00.0Z`)}catch{return null}}function HL(i){if(!i)throw new Error("Missing exp claim");const e=Math.floor(Date.now()/1e3);if(i<=e)throw new Error("JWT has expired")}function VL(i){switch(i){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const jL=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function gd(i){if(!jL.test(i))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function Gx(){const i={};return new Proxy(i,{get:(e,t)=>{if(t==="__isUserNotAvailableProxy")return!0;if(typeof t=="symbol"){const n=t.toString();if(n==="Symbol(Symbol.toPrimitive)"||n==="Symbol(Symbol.toStringTag)"||n==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${t}" property of the session object is not supported. Please use getUser() instead.`)},set:(e,t)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${t}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(e,t)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${t}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function GL(i,e){return new Proxy(i,{get:(t,n,a)=>{if(n==="__isInsecureUserWarningProxy")return!0;if(typeof n=="symbol"){const s=n.toString();if(s==="Symbol(Symbol.toPrimitive)"||s==="Symbol(Symbol.toStringTag)"||s==="Symbol(util.inspect.custom)"||s==="Symbol(nodejs.util.inspect.custom)")return Reflect.get(t,n,a)}return!e.value&&typeof n=="string"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),e.value=!0),Reflect.get(t,n,a)}})}function sT(i){return JSON.parse(JSON.stringify(i))}const Oh=i=>i.msg||i.message||i.error_description||i.error||JSON.stringify(i),qL=[502,503,504];async function oT(i){var e;if(!DL(i))throw new t_(Oh(i),0);if(qL.includes(i.status))throw new t_(Oh(i),i.status);let t;try{t=await i.json()}catch(s){throw new uu(Oh(s),s)}let n;const a=kL(i);if(a&&a.getTime()>=h3["2024-01-01"].timestamp&&typeof t=="object"&&t&&typeof t.code=="string"?n=t.code:typeof t=="object"&&t&&typeof t.error_code=="string"&&(n=t.error_code),n){if(n==="weak_password")throw new j1(Oh(t),i.status,((e=t.weak_password)===null||e===void 0?void 0:e.reasons)||[]);if(n==="session_not_found")throw new ts}else if(typeof t=="object"&&t&&typeof t.weak_password=="object"&&t.weak_password&&Array.isArray(t.weak_password.reasons)&&t.weak_password.reasons.length&&t.weak_password.reasons.reduce((s,l)=>s&&typeof l=="string",!0))throw new j1(Oh(t),i.status,t.weak_password.reasons);throw new f3(Oh(t),i.status||500,n)}const XL=(i,e,t,n)=>{const a={method:i,headers:(e==null?void 0:e.headers)||{}};return i==="GET"?a:(a.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},e==null?void 0:e.headers),a.body=JSON.stringify(n),Object.assign(Object.assign({},a),t))};async function un(i,e,t,n){var a;const s=Object.assign({},n==null?void 0:n.headers);s[H1]||(s[H1]=h3["2024-01-01"].name),n!=null&&n.jwt&&(s.Authorization=`Bearer ${n.jwt}`);const l=(a=n==null?void 0:n.query)!==null&&a!==void 0?a:{};n!=null&&n.redirectTo&&(l.redirect_to=n.redirectTo);const u=Object.keys(l).length?"?"+new URLSearchParams(l).toString():"",d=await WL(i,e,t+u,{headers:s,noResolveJson:n==null?void 0:n.noResolveJson},{},n==null?void 0:n.body);return n!=null&&n.xform?n==null?void 0:n.xform(d):{data:Object.assign({},d),error:null}}async function WL(i,e,t,n,a,s){const l=XL(e,n,a,s);let u;try{u=await i(t,Object.assign({},l))}catch(d){throw console.error(d),new t_(Oh(d),0)}if(u.ok||await oT(u),n!=null&&n.noResolveJson)return u;try{return await u.json()}catch(d){await oT(d)}}function So(i){var e;let t=null;KL(i)&&(t=Object.assign({},i),i.expires_at||(t.expires_at=RL(i.expires_in)));const n=(e=i.user)!==null&&e!==void 0?e:i;return{data:{session:t,user:n},error:null}}function lT(i){const e=So(i);return!e.error&&i.weak_password&&typeof i.weak_password=="object"&&Array.isArray(i.weak_password.reasons)&&i.weak_password.reasons.length&&i.weak_password.message&&typeof i.weak_password.message=="string"&&i.weak_password.reasons.reduce((t,n)=>t&&typeof n=="string",!0)&&(e.data.weak_password=i.weak_password),e}function hu(i){var e;return{data:{user:(e=i.user)!==null&&e!==void 0?e:i},error:null}}function YL(i){return{data:i,error:null}}function ZL(i){const{action_link:e,email_otp:t,hashed_token:n,redirect_to:a,verification_type:s}=i,l=gp(i,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),u={action_link:e,email_otp:t,hashed_token:n,redirect_to:a,verification_type:s},d=Object.assign({},l);return{data:{properties:u,user:d},error:null}}function cT(i){return i}function KL(i){return i.access_token&&i.refresh_token&&i.expires_in}const qy=["global","local","others"];let NE=class{constructor({url:e="",headers:t={},fetch:n}){this.url=e,this.headers=t,this.fetch=y3(n),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)},this.oauth={listClients:this._listOAuthClients.bind(this),createClient:this._createOAuthClient.bind(this),getClient:this._getOAuthClient.bind(this),updateClient:this._updateOAuthClient.bind(this),deleteClient:this._deleteOAuthClient.bind(this),regenerateClientSecret:this._regenerateOAuthClientSecret.bind(this)}}async signOut(e,t=qy[0]){if(qy.indexOf(t)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${qy.join(", ")}`);try{return await un(this.fetch,"POST",`${this.url}/logout?scope=${t}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(n){if(Yt(n))return{data:null,error:n};throw n}}async inviteUserByEmail(e,t={}){try{return await un(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:t.data},headers:this.headers,redirectTo:t.redirectTo,xform:hu})}catch(n){if(Yt(n))return{data:{user:null},error:n};throw n}}async generateLink(e){try{const{options:t}=e,n=gp(e,["options"]),a=Object.assign(Object.assign({},n),t);return"newEmail"in n&&(a.new_email=n==null?void 0:n.newEmail,delete a.newEmail),await un(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:a,headers:this.headers,xform:ZL,redirectTo:t==null?void 0:t.redirectTo})}catch(t){if(Yt(t))return{data:{properties:null,user:null},error:t};throw t}}async createUser(e){try{return await un(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:hu})}catch(t){if(Yt(t))return{data:{user:null},error:t};throw t}}async listUsers(e){var t,n,a,s,l,u,d;try{const p={nextPage:null,lastPage:0,total:0},g=await un(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(n=(t=e==null?void 0:e.page)===null||t===void 0?void 0:t.toString())!==null&&n!==void 0?n:"",per_page:(s=(a=e==null?void 0:e.perPage)===null||a===void 0?void 0:a.toString())!==null&&s!==void 0?s:""},xform:cT});if(g.error)throw g.error;const y=await g.json(),_=(l=g.headers.get("x-total-count"))!==null&&l!==void 0?l:0,b=(d=(u=g.headers.get("link"))===null||u===void 0?void 0:u.split(","))!==null&&d!==void 0?d:[];return b.length>0&&(b.forEach(x=>{const T=parseInt(x.split(";")[0].split("=")[1].substring(0,1)),w=JSON.parse(x.split(";")[1].split("=")[1]);p[`${w}Page`]=T}),p.total=parseInt(_)),{data:Object.assign(Object.assign({},y),p),error:null}}catch(p){if(Yt(p))return{data:{users:[]},error:p};throw p}}async getUserById(e){gd(e);try{return await un(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:hu})}catch(t){if(Yt(t))return{data:{user:null},error:t};throw t}}async updateUserById(e,t){gd(e);try{return await un(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:t,headers:this.headers,xform:hu})}catch(n){if(Yt(n))return{data:{user:null},error:n};throw n}}async deleteUser(e,t=!1){gd(e);try{return await un(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:t},xform:hu})}catch(n){if(Yt(n))return{data:{user:null},error:n};throw n}}async _listFactors(e){gd(e.userId);try{const{data:t,error:n}=await un(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:a=>({data:{factors:a},error:null})});return{data:t,error:n}}catch(t){if(Yt(t))return{data:null,error:t};throw t}}async _deleteFactor(e){gd(e.userId),gd(e.id);try{return{data:await un(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(t){if(Yt(t))return{data:null,error:t};throw t}}async _listOAuthClients(e){var t,n,a,s,l,u,d;try{const p={nextPage:null,lastPage:0,total:0},g=await un(this.fetch,"GET",`${this.url}/admin/oauth/clients`,{headers:this.headers,noResolveJson:!0,query:{page:(n=(t=e==null?void 0:e.page)===null||t===void 0?void 0:t.toString())!==null&&n!==void 0?n:"",per_page:(s=(a=e==null?void 0:e.perPage)===null||a===void 0?void 0:a.toString())!==null&&s!==void 0?s:""},xform:cT});if(g.error)throw g.error;const y=await g.json(),_=(l=g.headers.get("x-total-count"))!==null&&l!==void 0?l:0,b=(d=(u=g.headers.get("link"))===null||u===void 0?void 0:u.split(","))!==null&&d!==void 0?d:[];return b.length>0&&(b.forEach(x=>{const T=parseInt(x.split(";")[0].split("=")[1].substring(0,1)),w=JSON.parse(x.split(";")[1].split("=")[1]);p[`${w}Page`]=T}),p.total=parseInt(_)),{data:Object.assign(Object.assign({},y),p),error:null}}catch(p){if(Yt(p))return{data:{clients:[]},error:p};throw p}}async _createOAuthClient(e){try{return await un(this.fetch,"POST",`${this.url}/admin/oauth/clients`,{body:e,headers:this.headers,xform:t=>({data:t,error:null})})}catch(t){if(Yt(t))return{data:null,error:t};throw t}}async _getOAuthClient(e){try{return await un(this.fetch,"GET",`${this.url}/admin/oauth/clients/${e}`,{headers:this.headers,xform:t=>({data:t,error:null})})}catch(t){if(Yt(t))return{data:null,error:t};throw t}}async _updateOAuthClient(e,t){try{return await un(this.fetch,"PUT",`${this.url}/admin/oauth/clients/${e}`,{body:t,headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(Yt(n))return{data:null,error:n};throw n}}async _deleteOAuthClient(e){try{return await un(this.fetch,"DELETE",`${this.url}/admin/oauth/clients/${e}`,{headers:this.headers,noResolveJson:!0}),{data:null,error:null}}catch(t){if(Yt(t))return{data:null,error:t};throw t}}async _regenerateOAuthClientSecret(e){try{return await un(this.fetch,"POST",`${this.url}/admin/oauth/clients/${e}/regenerate_secret`,{headers:this.headers,xform:t=>({data:t,error:null})})}catch(t){if(Yt(t))return{data:null,error:t};throw t}}};function uT(i={}){return{getItem:e=>i[e]||null,setItem:(e,t)=>{i[e]=t},removeItem:e=>{delete i[e]}}}const Dh={debug:!!(globalThis&&v3()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class OE extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}let _3=class extends OE{};class JL extends OE{}async function b3(i,e,t){Dh.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",i,e);const n=new globalThis.AbortController;return e>0&&setTimeout(()=>{n.abort(),Dh.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",i)},e),await Promise.resolve().then(()=>globalThis.navigator.locks.request(i,e===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:n.signal},async a=>{if(a){Dh.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",i,a.name);try{return await t()}finally{Dh.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",i,a.name)}}else{if(e===0)throw Dh.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",i),new _3(`Acquiring an exclusive Navigator LockManager lock "${i}" immediately failed`);if(Dh.debug)try{const s=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(s,null,"  "))}catch(s){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",s)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await t()}}))}const hT={};async function QL(i,e,t){var n;const a=(n=hT[i])!==null&&n!==void 0?n:Promise.resolve(),s=Promise.race([a.catch(()=>null),e>=0?new Promise((l,u)=>{setTimeout(()=>{u(new JL(`Acquring process lock with name "${i}" timed out`))},e)}):null].filter(l=>l)).catch(l=>{if(l&&l.isAcquireTimeout)throw l;return null}).then(async()=>await t());return hT[i]=s.catch(async l=>{if(l&&l.isAcquireTimeout)return await a,null;throw l}),await s}function $L(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}function x3(i){if(!/^0x[a-fA-F0-9]{40}$/.test(i))throw new Error(`@supabase/auth-js: Address "${i}" is invalid.`);return i.toLowerCase()}function e4(i){return parseInt(i,16)}function t4(i){const e=new TextEncoder().encode(i);return"0x"+Array.from(e,n=>n.toString(16).padStart(2,"0")).join("")}function n4(i){var e;const{chainId:t,domain:n,expirationTime:a,issuedAt:s=new Date,nonce:l,notBefore:u,requestId:d,resources:p,scheme:g,uri:y,version:_}=i;{if(!Number.isInteger(t))throw new Error(`@supabase/auth-js: Invalid SIWE message field "chainId". Chain ID must be a EIP-155 chain ID. Provided value: ${t}`);if(!n)throw new Error('@supabase/auth-js: Invalid SIWE message field "domain". Domain must be provided.');if(l&&l.length<8)throw new Error(`@supabase/auth-js: Invalid SIWE message field "nonce". Nonce must be at least 8 characters. Provided value: ${l}`);if(!y)throw new Error('@supabase/auth-js: Invalid SIWE message field "uri". URI must be provided.');if(_!=="1")throw new Error(`@supabase/auth-js: Invalid SIWE message field "version". Version must be '1'. Provided value: ${_}`);if(!((e=i.statement)===null||e===void 0)&&e.includes(`
`))throw new Error(`@supabase/auth-js: Invalid SIWE message field "statement". Statement must not include '\\n'. Provided value: ${i.statement}`)}const b=x3(i.address),x=g?`${g}://${n}`:n,T=i.statement?`${i.statement}
`:"",w=`${x} wants you to sign in with your Ethereum account:
${b}

${T}`;let S=`URI: ${y}
Version: ${_}
Chain ID: ${t}${l?`
Nonce: ${l}`:""}
Issued At: ${s.toISOString()}`;if(a&&(S+=`
Expiration Time: ${a.toISOString()}`),u&&(S+=`
Not Before: ${u.toISOString()}`),d&&(S+=`
Request ID: ${d}`),p){let C=`
Resources:`;for(const N of p){if(!N||typeof N!="string")throw new Error(`@supabase/auth-js: Invalid SIWE message field "resources". Every resource must be a valid string. Provided value: ${N}`);C+=`
- ${N}`}S+=C}return`${w}
${S}`}class va extends Error{constructor({message:e,code:t,cause:n,name:a}){var s;super(e,{cause:n}),this.__isWebAuthnError=!0,this.name=(s=a??(n instanceof Error?n.name:void 0))!==null&&s!==void 0?s:"Unknown Error",this.code=t}}class a_ extends va{constructor(e,t){super({code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t,message:e}),this.name="WebAuthnUnknownError",this.originalError=t}}function i4({error:i,options:e}){var t,n,a;const{publicKey:s}=e;if(!s)throw Error("options was missing required publicKey property");if(i.name==="AbortError"){if(e.signal instanceof AbortSignal)return new va({message:"Registration ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:i})}else if(i.name==="ConstraintError"){if(((t=s.authenticatorSelection)===null||t===void 0?void 0:t.requireResidentKey)===!0)return new va({message:"Discoverable credentials were required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_DISCOVERABLE_CREDENTIAL_SUPPORT",cause:i});if(e.mediation==="conditional"&&((n=s.authenticatorSelection)===null||n===void 0?void 0:n.userVerification)==="required")return new va({message:"User verification was required during automatic registration but it could not be performed",code:"ERROR_AUTO_REGISTER_USER_VERIFICATION_FAILURE",cause:i});if(((a=s.authenticatorSelection)===null||a===void 0?void 0:a.userVerification)==="required")return new va({message:"User verification was required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_USER_VERIFICATION_SUPPORT",cause:i})}else{if(i.name==="InvalidStateError")return new va({message:"The authenticator was previously registered",code:"ERROR_AUTHENTICATOR_PREVIOUSLY_REGISTERED",cause:i});if(i.name==="NotAllowedError")return new va({message:i.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:i});if(i.name==="NotSupportedError")return s.pubKeyCredParams.filter(u=>u.type==="public-key").length===0?new va({message:'No entry in pubKeyCredParams was of type "public-key"',code:"ERROR_MALFORMED_PUBKEYCREDPARAMS",cause:i}):new va({message:"No available authenticator supported any of the specified pubKeyCredParams algorithms",code:"ERROR_AUTHENTICATOR_NO_SUPPORTED_PUBKEYCREDPARAMS_ALG",cause:i});if(i.name==="SecurityError"){const l=window.location.hostname;if(S3(l)){if(s.rp.id!==l)return new va({message:`The RP ID "${s.rp.id}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:i})}else return new va({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:i})}else if(i.name==="TypeError"){if(s.user.id.byteLength<1||s.user.id.byteLength>64)return new va({message:"User ID was not between 1 and 64 characters",code:"ERROR_INVALID_USER_ID_LENGTH",cause:i})}else if(i.name==="UnknownError")return new va({message:"The authenticator was unable to process the specified options, or could not create a new credential",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:i})}return new va({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:i})}function a4({error:i,options:e}){const{publicKey:t}=e;if(!t)throw Error("options was missing required publicKey property");if(i.name==="AbortError"){if(e.signal instanceof AbortSignal)return new va({message:"Authentication ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:i})}else{if(i.name==="NotAllowedError")return new va({message:i.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:i});if(i.name==="SecurityError"){const n=window.location.hostname;if(S3(n)){if(t.rpId!==n)return new va({message:`The RP ID "${t.rpId}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:i})}else return new va({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:i})}else if(i.name==="UnknownError")return new va({message:"The authenticator was unable to process the specified options, or could not create a new assertion signature",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:i})}return new va({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:i})}class r4{createNewAbortSignal(){if(this.controller){const t=new Error("Cancelling existing WebAuthn API call for new one");t.name="AbortError",this.controller.abort(t)}const e=new AbortController;return this.controller=e,e.signal}cancelCeremony(){if(this.controller){const e=new Error("Manually cancelling existing WebAuthn API call");e.name="AbortError",this.controller.abort(e),this.controller=void 0}}}const s4=new r4;function o4(i){if(!i)throw new Error("Credential creation options are required");if(typeof PublicKeyCredential<"u"&&"parseCreationOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseCreationOptionsFromJSON=="function")return PublicKeyCredential.parseCreationOptionsFromJSON(i);const{challenge:e,user:t,excludeCredentials:n}=i,a=gp(i,["challenge","user","excludeCredentials"]),s=Kd(e).buffer,l=Object.assign(Object.assign({},t),{id:Kd(t.id).buffer}),u=Object.assign(Object.assign({},a),{challenge:s,user:l});if(n&&n.length>0){u.excludeCredentials=new Array(n.length);for(let d=0;d<n.length;d++){const p=n[d];u.excludeCredentials[d]=Object.assign(Object.assign({},p),{id:Kd(p.id).buffer,type:p.type||"public-key",transports:p.transports})}}return u}function l4(i){if(!i)throw new Error("Credential request options are required");if(typeof PublicKeyCredential<"u"&&"parseRequestOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseRequestOptionsFromJSON=="function")return PublicKeyCredential.parseRequestOptionsFromJSON(i);const{challenge:e,allowCredentials:t}=i,n=gp(i,["challenge","allowCredentials"]),a=Kd(e).buffer,s=Object.assign(Object.assign({},n),{challenge:a});if(t&&t.length>0){s.allowCredentials=new Array(t.length);for(let l=0;l<t.length;l++){const u=t[l];s.allowCredentials[l]=Object.assign(Object.assign({},u),{id:Kd(u.id).buffer,type:u.type||"public-key",transports:u.transports})}}return s}function c4(i){var e;if("toJSON"in i&&typeof i.toJSON=="function")return i.toJSON();const t=i;return{id:i.id,rawId:i.id,response:{attestationObject:kh(new Uint8Array(i.response.attestationObject)),clientDataJSON:kh(new Uint8Array(i.response.clientDataJSON))},type:"public-key",clientExtensionResults:i.getClientExtensionResults(),authenticatorAttachment:(e=t.authenticatorAttachment)!==null&&e!==void 0?e:void 0}}function u4(i){var e;if("toJSON"in i&&typeof i.toJSON=="function")return i.toJSON();const t=i,n=i.getClientExtensionResults(),a=i.response;return{id:i.id,rawId:i.id,response:{authenticatorData:kh(new Uint8Array(a.authenticatorData)),clientDataJSON:kh(new Uint8Array(a.clientDataJSON)),signature:kh(new Uint8Array(a.signature)),userHandle:a.userHandle?kh(new Uint8Array(a.userHandle)):void 0},type:"public-key",clientExtensionResults:n,authenticatorAttachment:(e=t.authenticatorAttachment)!==null&&e!==void 0?e:void 0}}function S3(i){return i==="localhost"||/^([a-z0-9]+(-[a-z0-9]+)*\.)+[a-z]{2,}$/i.test(i)}function fT(){var i,e;return!!($a()&&"PublicKeyCredential"in window&&window.PublicKeyCredential&&"credentials"in navigator&&typeof((i=navigator==null?void 0:navigator.credentials)===null||i===void 0?void 0:i.create)=="function"&&typeof((e=navigator==null?void 0:navigator.credentials)===null||e===void 0?void 0:e.get)=="function")}async function h4(i){try{const e=await navigator.credentials.create(i);return e?e instanceof PublicKeyCredential?{data:e,error:null}:{data:null,error:new a_("Browser returned unexpected credential type",e)}:{data:null,error:new a_("Empty credential response",e)}}catch(e){return{data:null,error:i4({error:e,options:i})}}}async function f4(i){try{const e=await navigator.credentials.get(i);return e?e instanceof PublicKeyCredential?{data:e,error:null}:{data:null,error:new a_("Browser returned unexpected credential type",e)}:{data:null,error:new a_("Empty credential response",e)}}catch(e){return{data:null,error:a4({error:e,options:i})}}}const d4={hints:["security-key"],authenticatorSelection:{authenticatorAttachment:"cross-platform",requireResidentKey:!1,userVerification:"preferred",residentKey:"discouraged"},attestation:"direct"},p4={userVerification:"preferred",hints:["security-key"],attestation:"direct"};function r_(...i){const e=a=>a!==null&&typeof a=="object"&&!Array.isArray(a),t=a=>a instanceof ArrayBuffer||ArrayBuffer.isView(a),n={};for(const a of i)if(a)for(const s in a){const l=a[s];if(l!==void 0)if(Array.isArray(l))n[s]=l;else if(t(l))n[s]=l;else if(e(l)){const u=n[s];e(u)?n[s]=r_(u,l):n[s]=r_(l)}else n[s]=l}return n}function m4(i,e){return r_(d4,i,e||{})}function g4(i,e){return r_(p4,i,e||{})}class v4{constructor(e){this.client=e,this.enroll=this._enroll.bind(this),this.challenge=this._challenge.bind(this),this.verify=this._verify.bind(this),this.authenticate=this._authenticate.bind(this),this.register=this._register.bind(this)}async _enroll(e){return this.client.mfa.enroll(Object.assign(Object.assign({},e),{factorType:"webauthn"}))}async _challenge({factorId:e,webauthn:t,friendlyName:n,signal:a},s){try{const{data:l,error:u}=await this.client.mfa.challenge({factorId:e,webauthn:t});if(!l)return{data:null,error:u};const d=a??s4.createNewAbortSignal();if(l.webauthn.type==="create"){const{user:p}=l.webauthn.credential_options.publicKey;p.name||(p.name=`${p.id}:${n}`),p.displayName||(p.displayName=p.name)}switch(l.webauthn.type){case"create":{const p=m4(l.webauthn.credential_options.publicKey,s==null?void 0:s.create),{data:g,error:y}=await h4({publicKey:p,signal:d});return g?{data:{factorId:e,challengeId:l.id,webauthn:{type:l.webauthn.type,credential_response:g}},error:null}:{data:null,error:y}}case"request":{const p=g4(l.webauthn.credential_options.publicKey,s==null?void 0:s.request),{data:g,error:y}=await f4(Object.assign(Object.assign({},l.webauthn.credential_options),{publicKey:p,signal:d}));return g?{data:{factorId:e,challengeId:l.id,webauthn:{type:l.webauthn.type,credential_response:g}},error:null}:{data:null,error:y}}}}catch(l){return Yt(l)?{data:null,error:l}:{data:null,error:new uu("Unexpected error in challenge",l)}}}async _verify({challengeId:e,factorId:t,webauthn:n}){return this.client.mfa.verify({factorId:t,challengeId:e,webauthn:n})}async _authenticate({factorId:e,webauthn:{rpId:t=typeof window<"u"?window.location.hostname:void 0,rpOrigins:n=typeof window<"u"?[window.location.origin]:void 0,signal:a}={}},s){if(!t)return{data:null,error:new tp("rpId is required for WebAuthn authentication")};try{if(!fT())return{data:null,error:new uu("Browser does not support WebAuthn",null)};const{data:l,error:u}=await this.challenge({factorId:e,webauthn:{rpId:t,rpOrigins:n},signal:a},{request:s});if(!l)return{data:null,error:u};const{webauthn:d}=l;return this._verify({factorId:e,challengeId:l.challengeId,webauthn:{type:d.type,rpId:t,rpOrigins:n,credential_response:d.credential_response}})}catch(l){return Yt(l)?{data:null,error:l}:{data:null,error:new uu("Unexpected error in authenticate",l)}}}async _register({friendlyName:e,webauthn:{rpId:t=typeof window<"u"?window.location.hostname:void 0,rpOrigins:n=typeof window<"u"?[window.location.origin]:void 0,signal:a}={}},s){if(!t)return{data:null,error:new tp("rpId is required for WebAuthn registration")};try{if(!fT())return{data:null,error:new uu("Browser does not support WebAuthn",null)};const{data:l,error:u}=await this._enroll({friendlyName:e});if(!l)return await this.client.mfa.listFactors().then(g=>{var y;return(y=g.data)===null||y===void 0?void 0:y.all.find(_=>_.factor_type==="webauthn"&&_.friendly_name===e&&_.status!=="unverified")}).then(g=>g?this.client.mfa.unenroll({factorId:g==null?void 0:g.id}):void 0),{data:null,error:u};const{data:d,error:p}=await this._challenge({factorId:l.id,friendlyName:l.friendly_name,webauthn:{rpId:t,rpOrigins:n},signal:a},{create:s});return d?this._verify({factorId:l.id,challengeId:d.challengeId,webauthn:{rpId:t,rpOrigins:n,type:d.webauthn.type,credential_response:d.webauthn.credential_response}}):{data:null,error:p}}catch(l){return Yt(l)?{data:null,error:l}:{data:null,error:new uu("Unexpected error in register",l)}}}}$L();const y4={url:yL,storageKey:_L,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:bL,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1,throwOnError:!1};async function dT(i,e,t){return await t()}const vd={};let DE=class G1{get jwks(){var e,t;return(t=(e=vd[this.storageKey])===null||e===void 0?void 0:e.jwks)!==null&&t!==void 0?t:{keys:[]}}set jwks(e){vd[this.storageKey]=Object.assign(Object.assign({},vd[this.storageKey]),{jwks:e})}get jwks_cached_at(){var e,t;return(t=(e=vd[this.storageKey])===null||e===void 0?void 0:e.cachedAt)!==null&&t!==void 0?t:Number.MIN_SAFE_INTEGER}set jwks_cached_at(e){vd[this.storageKey]=Object.assign(Object.assign({},vd[this.storageKey]),{cachedAt:e})}constructor(e){var t,n,a;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log;const s=Object.assign(Object.assign({},y4),e);if(this.storageKey=s.storageKey,this.instanceID=(t=G1.nextInstanceID[this.storageKey])!==null&&t!==void 0?t:0,G1.nextInstanceID[this.storageKey]=this.instanceID+1,this.logDebugMessages=!!s.debug,typeof s.debug=="function"&&(this.logger=s.debug),this.instanceID>0&&$a()){const l=`${this._logPrefix()} Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.`;console.warn(l),this.logDebugMessages&&console.trace(l)}if(this.persistSession=s.persistSession,this.autoRefreshToken=s.autoRefreshToken,this.admin=new NE({url:s.url,headers:s.headers,fetch:s.fetch}),this.url=s.url,this.headers=s.headers,this.fetch=y3(s.fetch),this.lock=s.lock||dT,this.detectSessionInUrl=s.detectSessionInUrl,this.flowType=s.flowType,this.hasCustomAuthorizationHeader=s.hasCustomAuthorizationHeader,this.throwOnError=s.throwOnError,s.lock?this.lock=s.lock:this.persistSession&&$a()&&(!((n=globalThis==null?void 0:globalThis.navigator)===null||n===void 0)&&n.locks)?this.lock=b3:this.lock=dT,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this),webauthn:new v4(this)},this.oauth={getAuthorizationDetails:this._getAuthorizationDetails.bind(this),approveAuthorization:this._approveAuthorization.bind(this),denyAuthorization:this._denyAuthorization.bind(this),listGrants:this._listOAuthGrants.bind(this),revokeGrant:this._revokeOAuthGrant.bind(this)},this.persistSession?(s.storage?this.storage=s.storage:v3()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=uT(this.memoryStorage)),s.userStorage&&(this.userStorage=s.userStorage)):(this.memoryStorage={},this.storage=uT(this.memoryStorage)),$a()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(l){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",l)}(a=this.broadcastChannel)===null||a===void 0||a.addEventListener("message",async l=>{this._debug("received broadcast notification from other tab or client",l),await this._notifyAllSubscribers(l.data.event,l.data.session,!1)})}this.initialize()}isThrowOnErrorEnabled(){return this.throwOnError}_returnResult(e){if(this.throwOnError&&e&&e.error)throw e.error;return e}_logPrefix(){return`GoTrueClient@${this.storageKey}:${this.instanceID} (${u3}) ${new Date().toISOString()}`}_debug(...e){return this.logDebugMessages&&this.logger(this._logPrefix(),...e),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var e;try{let t={},n="none";if($a()&&(t=OL(window.location.href),this._isImplicitGrantCallback(t)?n="implicit":await this._isPKCECallback(t)&&(n="pkce")),$a()&&this.detectSessionInUrl&&n!=="none"){const{data:a,error:s}=await this._getSessionFromURL(t,n);if(s){if(this._debug("#_initialize()","error detecting session from URL",s),m3(s)){const d=(e=s.details)===null||e===void 0?void 0:e.code;if(d==="identity_already_exists"||d==="identity_not_found"||d==="single_identity_not_deletable")return{error:s}}return await this._removeSession(),{error:s}}const{session:l,redirectType:u}=a;return this._debug("#_initialize()","detected session in URL",l,"redirect type",u),await this._saveSession(l),setTimeout(async()=>{u==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",l):await this._notifyAllSubscribers("SIGNED_IN",l)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(t){return Yt(t)?this._returnResult({error:t}):this._returnResult({error:new uu("Unexpected error during initialization",t)})}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(e){var t,n,a;try{const s=await un(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(n=(t=e==null?void 0:e.options)===null||t===void 0?void 0:t.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:(a=e==null?void 0:e.options)===null||a===void 0?void 0:a.captchaToken}},xform:So}),{data:l,error:u}=s;if(u||!l)return this._returnResult({data:{user:null,session:null},error:u});const d=l.session,p=l.user;return l.session&&(await this._saveSession(l.session),await this._notifyAllSubscribers("SIGNED_IN",d)),this._returnResult({data:{user:p,session:d},error:null})}catch(s){if(Yt(s))return this._returnResult({data:{user:null,session:null},error:s});throw s}}async signUp(e){var t,n,a;try{let s;if("email"in e){const{email:g,password:y,options:_}=e;let b=null,x=null;this.flowType==="pkce"&&([b,x]=await md(this.storage,this.storageKey)),s=await un(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:_==null?void 0:_.emailRedirectTo,body:{email:g,password:y,data:(t=_==null?void 0:_.data)!==null&&t!==void 0?t:{},gotrue_meta_security:{captcha_token:_==null?void 0:_.captchaToken},code_challenge:b,code_challenge_method:x},xform:So})}else if("phone"in e){const{phone:g,password:y,options:_}=e;s=await un(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:g,password:y,data:(n=_==null?void 0:_.data)!==null&&n!==void 0?n:{},channel:(a=_==null?void 0:_.channel)!==null&&a!==void 0?a:"sms",gotrue_meta_security:{captcha_token:_==null?void 0:_.captchaToken}},xform:So})}else throw new dg("You must provide either an email or phone number and a password");const{data:l,error:u}=s;if(u||!l)return await Qa(this.storage,`${this.storageKey}-code-verifier`),this._returnResult({data:{user:null,session:null},error:u});const d=l.session,p=l.user;return l.session&&(await this._saveSession(l.session),await this._notifyAllSubscribers("SIGNED_IN",d)),this._returnResult({data:{user:p,session:d},error:null})}catch(s){if(await Qa(this.storage,`${this.storageKey}-code-verifier`),Yt(s))return this._returnResult({data:{user:null,session:null},error:s});throw s}}async signInWithPassword(e){try{let t;if("email"in e){const{email:s,password:l,options:u}=e;t=await un(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:s,password:l,gotrue_meta_security:{captcha_token:u==null?void 0:u.captchaToken}},xform:lT})}else if("phone"in e){const{phone:s,password:l,options:u}=e;t=await un(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:s,password:l,gotrue_meta_security:{captcha_token:u==null?void 0:u.captchaToken}},xform:lT})}else throw new dg("You must provide either an email or phone number and a password");const{data:n,error:a}=t;if(a)return this._returnResult({data:{user:null,session:null},error:a});if(!n||!n.session||!n.user){const s=new Nh;return this._returnResult({data:{user:null,session:null},error:s})}return n.session&&(await this._saveSession(n.session),await this._notifyAllSubscribers("SIGNED_IN",n.session)),this._returnResult({data:Object.assign({user:n.user,session:n.session},n.weak_password?{weakPassword:n.weak_password}:null),error:a})}catch(t){if(Yt(t))return this._returnResult({data:{user:null,session:null},error:t});throw t}}async signInWithOAuth(e){var t,n,a,s;return await this._handleProviderSignIn(e.provider,{redirectTo:(t=e.options)===null||t===void 0?void 0:t.redirectTo,scopes:(n=e.options)===null||n===void 0?void 0:n.scopes,queryParams:(a=e.options)===null||a===void 0?void 0:a.queryParams,skipBrowserRedirect:(s=e.options)===null||s===void 0?void 0:s.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(e))}async signInWithWeb3(e){const{chain:t}=e;switch(t){case"ethereum":return await this.signInWithEthereum(e);case"solana":return await this.signInWithSolana(e);default:throw new Error(`@supabase/auth-js: Unsupported chain "${t}"`)}}async signInWithEthereum(e){var t,n,a,s,l,u,d,p,g,y,_;let b,x;if("message"in e)b=e.message,x=e.signature;else{const{chain:T,wallet:w,statement:S,options:C}=e;let N;if($a())if(typeof w=="object")N=w;else{const D=window;if("ethereum"in D&&typeof D.ethereum=="object"&&"request"in D.ethereum&&typeof D.ethereum.request=="function")N=D.ethereum;else throw new Error("@supabase/auth-js: No compatible Ethereum wallet interface on the window object (window.ethereum) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'ethereum', wallet: resolvedUserWallet }) instead.")}else{if(typeof w!="object"||!(C!=null&&C.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");N=w}const O=new URL((t=C==null?void 0:C.url)!==null&&t!==void 0?t:window.location.href),P=await N.request({method:"eth_requestAccounts"}).then(D=>D).catch(()=>{throw new Error("@supabase/auth-js: Wallet method eth_requestAccounts is missing or invalid")});if(!P||P.length===0)throw new Error("@supabase/auth-js: No accounts available. Please ensure the wallet is connected.");const U=x3(P[0]);let z=(n=C==null?void 0:C.signInWithEthereum)===null||n===void 0?void 0:n.chainId;if(!z){const D=await N.request({method:"eth_chainId"});z=e4(D)}const H={domain:O.host,address:U,statement:S,uri:O.href,version:"1",chainId:z,nonce:(a=C==null?void 0:C.signInWithEthereum)===null||a===void 0?void 0:a.nonce,issuedAt:(l=(s=C==null?void 0:C.signInWithEthereum)===null||s===void 0?void 0:s.issuedAt)!==null&&l!==void 0?l:new Date,expirationTime:(u=C==null?void 0:C.signInWithEthereum)===null||u===void 0?void 0:u.expirationTime,notBefore:(d=C==null?void 0:C.signInWithEthereum)===null||d===void 0?void 0:d.notBefore,requestId:(p=C==null?void 0:C.signInWithEthereum)===null||p===void 0?void 0:p.requestId,resources:(g=C==null?void 0:C.signInWithEthereum)===null||g===void 0?void 0:g.resources};b=n4(H),x=await N.request({method:"personal_sign",params:[t4(b),U]})}try{const{data:T,error:w}=await un(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"ethereum",message:b,signature:x},!((y=e.options)===null||y===void 0)&&y.captchaToken?{gotrue_meta_security:{captcha_token:(_=e.options)===null||_===void 0?void 0:_.captchaToken}}:null),xform:So});if(w)throw w;if(!T||!T.session||!T.user){const S=new Nh;return this._returnResult({data:{user:null,session:null},error:S})}return T.session&&(await this._saveSession(T.session),await this._notifyAllSubscribers("SIGNED_IN",T.session)),this._returnResult({data:Object.assign({},T),error:w})}catch(T){if(Yt(T))return this._returnResult({data:{user:null,session:null},error:T});throw T}}async signInWithSolana(e){var t,n,a,s,l,u,d,p,g,y,_,b;let x,T;if("message"in e)x=e.message,T=e.signature;else{const{chain:w,wallet:S,statement:C,options:N}=e;let O;if($a())if(typeof S=="object")O=S;else{const U=window;if("solana"in U&&typeof U.solana=="object"&&("signIn"in U.solana&&typeof U.solana.signIn=="function"||"signMessage"in U.solana&&typeof U.solana.signMessage=="function"))O=U.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof S!="object"||!(N!=null&&N.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");O=S}const P=new URL((t=N==null?void 0:N.url)!==null&&t!==void 0?t:window.location.href);if("signIn"in O&&O.signIn){const U=await O.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},N==null?void 0:N.signInWithSolana),{version:"1",domain:P.host,uri:P.href}),C?{statement:C}:null));let z;if(Array.isArray(U)&&U[0]&&typeof U[0]=="object")z=U[0];else if(U&&typeof U=="object"&&"signedMessage"in U&&"signature"in U)z=U;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in z&&"signature"in z&&(typeof z.signedMessage=="string"||z.signedMessage instanceof Uint8Array)&&z.signature instanceof Uint8Array)x=typeof z.signedMessage=="string"?z.signedMessage:new TextDecoder().decode(z.signedMessage),T=z.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in O)||typeof O.signMessage!="function"||!("publicKey"in O)||typeof O!="object"||!O.publicKey||!("toBase58"in O.publicKey)||typeof O.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");x=[`${P.host} wants you to sign in with your Solana account:`,O.publicKey.toBase58(),...C?["",C,""]:[""],"Version: 1",`URI: ${P.href}`,`Issued At: ${(a=(n=N==null?void 0:N.signInWithSolana)===null||n===void 0?void 0:n.issuedAt)!==null&&a!==void 0?a:new Date().toISOString()}`,...!((s=N==null?void 0:N.signInWithSolana)===null||s===void 0)&&s.notBefore?[`Not Before: ${N.signInWithSolana.notBefore}`]:[],...!((l=N==null?void 0:N.signInWithSolana)===null||l===void 0)&&l.expirationTime?[`Expiration Time: ${N.signInWithSolana.expirationTime}`]:[],...!((u=N==null?void 0:N.signInWithSolana)===null||u===void 0)&&u.chainId?[`Chain ID: ${N.signInWithSolana.chainId}`]:[],...!((d=N==null?void 0:N.signInWithSolana)===null||d===void 0)&&d.nonce?[`Nonce: ${N.signInWithSolana.nonce}`]:[],...!((p=N==null?void 0:N.signInWithSolana)===null||p===void 0)&&p.requestId?[`Request ID: ${N.signInWithSolana.requestId}`]:[],...!((y=(g=N==null?void 0:N.signInWithSolana)===null||g===void 0?void 0:g.resources)===null||y===void 0)&&y.length?["Resources",...N.signInWithSolana.resources.map(z=>`- ${z}`)]:[]].join(`
`);const U=await O.signMessage(new TextEncoder().encode(x),"utf8");if(!U||!(U instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");T=U}}try{const{data:w,error:S}=await un(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:x,signature:kh(T)},!((_=e.options)===null||_===void 0)&&_.captchaToken?{gotrue_meta_security:{captcha_token:(b=e.options)===null||b===void 0?void 0:b.captchaToken}}:null),xform:So});if(S)throw S;if(!w||!w.session||!w.user){const C=new Nh;return this._returnResult({data:{user:null,session:null},error:C})}return w.session&&(await this._saveSession(w.session),await this._notifyAllSubscribers("SIGNED_IN",w.session)),this._returnResult({data:Object.assign({},w),error:S})}catch(w){if(Yt(w))return this._returnResult({data:{user:null,session:null},error:w});throw w}}async _exchangeCodeForSession(e){const t=await mh(this.storage,`${this.storageKey}-code-verifier`),[n,a]=(t??"").split("/");try{const{data:s,error:l}=await un(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:n},xform:So});if(await Qa(this.storage,`${this.storageKey}-code-verifier`),l)throw l;if(!s||!s.session||!s.user){const u=new Nh;return this._returnResult({data:{user:null,session:null,redirectType:null},error:u})}return s.session&&(await this._saveSession(s.session),await this._notifyAllSubscribers("SIGNED_IN",s.session)),this._returnResult({data:Object.assign(Object.assign({},s),{redirectType:a??null}),error:l})}catch(s){if(await Qa(this.storage,`${this.storageKey}-code-verifier`),Yt(s))return this._returnResult({data:{user:null,session:null,redirectType:null},error:s});throw s}}async signInWithIdToken(e){try{const{options:t,provider:n,token:a,access_token:s,nonce:l}=e,u=await un(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:n,id_token:a,access_token:s,nonce:l,gotrue_meta_security:{captcha_token:t==null?void 0:t.captchaToken}},xform:So}),{data:d,error:p}=u;if(p)return this._returnResult({data:{user:null,session:null},error:p});if(!d||!d.session||!d.user){const g=new Nh;return this._returnResult({data:{user:null,session:null},error:g})}return d.session&&(await this._saveSession(d.session),await this._notifyAllSubscribers("SIGNED_IN",d.session)),this._returnResult({data:d,error:p})}catch(t){if(Yt(t))return this._returnResult({data:{user:null,session:null},error:t});throw t}}async signInWithOtp(e){var t,n,a,s,l;try{if("email"in e){const{email:u,options:d}=e;let p=null,g=null;this.flowType==="pkce"&&([p,g]=await md(this.storage,this.storageKey));const{error:y}=await un(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:u,data:(t=d==null?void 0:d.data)!==null&&t!==void 0?t:{},create_user:(n=d==null?void 0:d.shouldCreateUser)!==null&&n!==void 0?n:!0,gotrue_meta_security:{captcha_token:d==null?void 0:d.captchaToken},code_challenge:p,code_challenge_method:g},redirectTo:d==null?void 0:d.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:y})}if("phone"in e){const{phone:u,options:d}=e,{data:p,error:g}=await un(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:u,data:(a=d==null?void 0:d.data)!==null&&a!==void 0?a:{},create_user:(s=d==null?void 0:d.shouldCreateUser)!==null&&s!==void 0?s:!0,gotrue_meta_security:{captcha_token:d==null?void 0:d.captchaToken},channel:(l=d==null?void 0:d.channel)!==null&&l!==void 0?l:"sms"}});return this._returnResult({data:{user:null,session:null,messageId:p==null?void 0:p.message_id},error:g})}throw new dg("You must provide either an email or phone number.")}catch(u){if(await Qa(this.storage,`${this.storageKey}-code-verifier`),Yt(u))return this._returnResult({data:{user:null,session:null},error:u});throw u}}async verifyOtp(e){var t,n;try{let a,s;"options"in e&&(a=(t=e.options)===null||t===void 0?void 0:t.redirectTo,s=(n=e.options)===null||n===void 0?void 0:n.captchaToken);const{data:l,error:u}=await un(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:s}}),redirectTo:a,xform:So});if(u)throw u;if(!l)throw new Error("An error occurred on token verification.");const d=l.session,p=l.user;return d!=null&&d.access_token&&(await this._saveSession(d),await this._notifyAllSubscribers(e.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",d)),this._returnResult({data:{user:p,session:d},error:null})}catch(a){if(Yt(a))return this._returnResult({data:{user:null,session:null},error:a});throw a}}async signInWithSSO(e){var t,n,a,s,l;try{let u=null,d=null;this.flowType==="pkce"&&([u,d]=await md(this.storage,this.storageKey));const p=await un(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:(n=(t=e.options)===null||t===void 0?void 0:t.redirectTo)!==null&&n!==void 0?n:void 0}),!((a=e==null?void 0:e.options)===null||a===void 0)&&a.captchaToken?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:u,code_challenge_method:d}),headers:this.headers,xform:YL});return!((s=p.data)===null||s===void 0)&&s.url&&$a()&&!(!((l=e.options)===null||l===void 0)&&l.skipBrowserRedirect)&&window.location.assign(p.data.url),this._returnResult(p)}catch(u){if(await Qa(this.storage,`${this.storageKey}-code-verifier`),Yt(u))return this._returnResult({data:null,error:u});throw u}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async e=>{const{data:{session:t},error:n}=e;if(n)throw n;if(!t)throw new ts;const{error:a}=await un(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:t.access_token});return this._returnResult({data:{user:null,session:null},error:a})})}catch(e){if(Yt(e))return this._returnResult({data:{user:null,session:null},error:e});throw e}}async resend(e){try{const t=`${this.url}/resend`;if("email"in e){const{email:n,type:a,options:s}=e,{error:l}=await un(this.fetch,"POST",t,{headers:this.headers,body:{email:n,type:a,gotrue_meta_security:{captcha_token:s==null?void 0:s.captchaToken}},redirectTo:s==null?void 0:s.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:l})}else if("phone"in e){const{phone:n,type:a,options:s}=e,{data:l,error:u}=await un(this.fetch,"POST",t,{headers:this.headers,body:{phone:n,type:a,gotrue_meta_security:{captcha_token:s==null?void 0:s.captchaToken}}});return this._returnResult({data:{user:null,session:null,messageId:l==null?void 0:l.message_id},error:u})}throw new dg("You must provide either an email or phone number and a type")}catch(t){if(Yt(t))return this._returnResult({data:{user:null,session:null},error:t});throw t}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async t=>t))}async _acquireLock(e,t){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){const n=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),a=(async()=>(await n,await t()))();return this.pendingInLock.push((async()=>{try{await a}catch{}})()),a}return await this.lock(`lock:${this.storageKey}`,e,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const n=t();for(this.pendingInLock.push((async()=>{try{await n}catch{}})()),await n;this.pendingInLock.length;){const a=[...this.pendingInLock];await Promise.all(a),this.pendingInLock.splice(0,a.length)}return await n}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{const t=await this.__loadSession();return await e(t)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let e=null;const t=await mh(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",t),t!==null&&(this._isValidSession(t)?e=t:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};const n=e.expires_at?e.expires_at*1e3-Date.now()<Vx:!1;if(this._debug("#__loadSession()",`session has${n?"":" not"} expired`,"expires_at",e.expires_at),!n){if(this.userStorage){const l=await mh(this.userStorage,this.storageKey+"-user");l!=null&&l.user?e.user=l.user:e.user=Gx()}if(this.storage.isServer&&e.user&&!e.user.__isUserNotAvailableProxy){const l={value:this.suppressGetSessionWarning};e.user=GL(e.user,l),l.value&&(this.suppressGetSessionWarning=!0)}return{data:{session:e},error:null}}const{data:a,error:s}=await this._callRefreshToken(e.refresh_token);return s?this._returnResult({data:{session:null},error:s}):this._returnResult({data:{session:a},error:null})}finally{this._debug("#__loadSession()","end")}}async getUser(e){if(e)return await this._getUser(e);await this.initializePromise;const t=await this._acquireLock(-1,async()=>await this._getUser());return t.data.user&&(this.suppressGetSessionWarning=!0),t}async _getUser(e){try{return e?await un(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:hu}):await this._useSession(async t=>{var n,a,s;const{data:l,error:u}=t;if(u)throw u;return!(!((n=l.session)===null||n===void 0)&&n.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new ts}:await un(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(s=(a=l.session)===null||a===void 0?void 0:a.access_token)!==null&&s!==void 0?s:void 0,xform:hu})})}catch(t){if(Yt(t))return p3(t)&&(await this._removeSession(),await Qa(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({data:{user:null},error:t});throw t}}async updateUser(e,t={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(e,t))}async _updateUser(e,t={}){try{return await this._useSession(async n=>{const{data:a,error:s}=n;if(s)throw s;if(!a.session)throw new ts;const l=a.session;let u=null,d=null;this.flowType==="pkce"&&e.email!=null&&([u,d]=await md(this.storage,this.storageKey));const{data:p,error:g}=await un(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:t==null?void 0:t.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:u,code_challenge_method:d}),jwt:l.access_token,xform:hu});if(g)throw g;return l.user=p.user,await this._saveSession(l),await this._notifyAllSubscribers("USER_UPDATED",l),this._returnResult({data:{user:l.user},error:null})})}catch(n){if(await Qa(this.storage,`${this.storageKey}-code-verifier`),Yt(n))return this._returnResult({data:{user:null},error:n});throw n}}async setSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(e))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new ts;const t=Date.now()/1e3;let n=t,a=!0,s=null;const{payload:l}=jx(e.access_token);if(l.exp&&(n=l.exp,a=n<=t),a){const{data:u,error:d}=await this._callRefreshToken(e.refresh_token);if(d)return this._returnResult({data:{user:null,session:null},error:d});if(!u)return{data:{user:null,session:null},error:null};s=u}else{const{data:u,error:d}=await this._getUser(e.access_token);if(d)throw d;s={access_token:e.access_token,refresh_token:e.refresh_token,user:u.user,token_type:"bearer",expires_in:n-t,expires_at:n},await this._saveSession(s),await this._notifyAllSubscribers("SIGNED_IN",s)}return this._returnResult({data:{user:s.user,session:s},error:null})}catch(t){if(Yt(t))return this._returnResult({data:{session:null,user:null},error:t});throw t}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(e))}async _refreshSession(e){try{return await this._useSession(async t=>{var n;if(!e){const{data:l,error:u}=t;if(u)throw u;e=(n=l.session)!==null&&n!==void 0?n:void 0}if(!(e!=null&&e.refresh_token))throw new ts;const{data:a,error:s}=await this._callRefreshToken(e.refresh_token);return s?this._returnResult({data:{user:null,session:null},error:s}):a?this._returnResult({data:{user:a.user,session:a},error:null}):this._returnResult({data:{user:null,session:null},error:null})})}catch(t){if(Yt(t))return this._returnResult({data:{user:null,session:null},error:t});throw t}}async _getSessionFromURL(e,t){try{if(!$a())throw new pg("No browser detected.");if(e.error||e.error_description||e.error_code)throw new pg(e.error_description||"Error in URL with unspecified error_description",{error:e.error||"unspecified_error",code:e.error_code||"unspecified_code"});switch(t){case"implicit":if(this.flowType==="pkce")throw new V1("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new pg("Not a valid implicit grant flow url.");break;default:}if(t==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!e.code)throw new V1("No code detected.");const{data:C,error:N}=await this._exchangeCodeForSession(e.code);if(N)throw N;const O=new URL(window.location.href);return O.searchParams.delete("code"),window.history.replaceState(window.history.state,"",O.toString()),{data:{session:C.session,redirectType:null},error:null}}const{provider_token:n,provider_refresh_token:a,access_token:s,refresh_token:l,expires_in:u,expires_at:d,token_type:p}=e;if(!s||!u||!l||!p)throw new pg("No session defined in URL");const g=Math.round(Date.now()/1e3),y=parseInt(u);let _=g+y;d&&(_=parseInt(d));const b=_-g;b*1e3<=Gd&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${b}s, should have been closer to ${y}s`);const x=_-y;g-x>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",x,_,g):g-x<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",x,_,g);const{data:T,error:w}=await this._getUser(s);if(w)throw w;const S={provider_token:n,provider_refresh_token:a,access_token:s,expires_in:y,expires_at:_,refresh_token:l,token_type:p,user:T.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),this._returnResult({data:{session:S,redirectType:e.type},error:null})}catch(n){if(Yt(n))return this._returnResult({data:{session:null,redirectType:null},error:n});throw n}}_isImplicitGrantCallback(e){return!!(e.access_token||e.error_description)}async _isPKCECallback(e){const t=await mh(this.storage,`${this.storageKey}-code-verifier`);return!!(e.code&&t)}async signOut(e={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(e))}async _signOut({scope:e}={scope:"global"}){return await this._useSession(async t=>{var n;const{data:a,error:s}=t;if(s)return this._returnResult({error:s});const l=(n=a.session)===null||n===void 0?void 0:n.access_token;if(l){const{error:u}=await this.admin.signOut(l,e);if(u&&!(d3(u)&&(u.status===404||u.status===401||u.status===403)))return this._returnResult({error:u})}return e!=="others"&&(await this._removeSession(),await Qa(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({error:null})})}onAuthStateChange(e){const t=NL(),n={id:t,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",t),this.stateChangeEmitters.delete(t)}};return this._debug("#onAuthStateChange()","registered callback with id",t),this.stateChangeEmitters.set(t,n),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(t)})))(),{data:{subscription:n}}}async _emitInitialSession(e){return await this._useSession(async t=>{var n,a;try{const{data:{session:s},error:l}=t;if(l)throw l;await((n=this.stateChangeEmitters.get(e))===null||n===void 0?void 0:n.callback("INITIAL_SESSION",s)),this._debug("INITIAL_SESSION","callback id",e,"session",s)}catch(s){await((a=this.stateChangeEmitters.get(e))===null||a===void 0?void 0:a.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",s),console.error(s)}})}async resetPasswordForEmail(e,t={}){let n=null,a=null;this.flowType==="pkce"&&([n,a]=await md(this.storage,this.storageKey,!0));try{return await un(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:n,code_challenge_method:a,gotrue_meta_security:{captcha_token:t.captchaToken}},headers:this.headers,redirectTo:t.redirectTo})}catch(s){if(await Qa(this.storage,`${this.storageKey}-code-verifier`),Yt(s))return this._returnResult({data:null,error:s});throw s}}async getUserIdentities(){var e;try{const{data:t,error:n}=await this.getUser();if(n)throw n;return this._returnResult({data:{identities:(e=t.user.identities)!==null&&e!==void 0?e:[]},error:null})}catch(t){if(Yt(t))return this._returnResult({data:null,error:t});throw t}}async linkIdentity(e){return"token"in e?this.linkIdentityIdToken(e):this.linkIdentityOAuth(e)}async linkIdentityOAuth(e){var t;try{const{data:n,error:a}=await this._useSession(async s=>{var l,u,d,p,g;const{data:y,error:_}=s;if(_)throw _;const b=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,e.provider,{redirectTo:(l=e.options)===null||l===void 0?void 0:l.redirectTo,scopes:(u=e.options)===null||u===void 0?void 0:u.scopes,queryParams:(d=e.options)===null||d===void 0?void 0:d.queryParams,skipBrowserRedirect:!0});return await un(this.fetch,"GET",b,{headers:this.headers,jwt:(g=(p=y.session)===null||p===void 0?void 0:p.access_token)!==null&&g!==void 0?g:void 0})});if(a)throw a;return $a()&&!(!((t=e.options)===null||t===void 0)&&t.skipBrowserRedirect)&&window.location.assign(n==null?void 0:n.url),this._returnResult({data:{provider:e.provider,url:n==null?void 0:n.url},error:null})}catch(n){if(Yt(n))return this._returnResult({data:{provider:e.provider,url:null},error:n});throw n}}async linkIdentityIdToken(e){return await this._useSession(async t=>{var n;try{const{error:a,data:{session:s}}=t;if(a)throw a;const{options:l,provider:u,token:d,access_token:p,nonce:g}=e,y=await un(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,jwt:(n=s==null?void 0:s.access_token)!==null&&n!==void 0?n:void 0,body:{provider:u,id_token:d,access_token:p,nonce:g,link_identity:!0,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}},xform:So}),{data:_,error:b}=y;return b?this._returnResult({data:{user:null,session:null},error:b}):!_||!_.session||!_.user?this._returnResult({data:{user:null,session:null},error:new Nh}):(_.session&&(await this._saveSession(_.session),await this._notifyAllSubscribers("USER_UPDATED",_.session)),this._returnResult({data:_,error:b}))}catch(a){if(await Qa(this.storage,`${this.storageKey}-code-verifier`),Yt(a))return this._returnResult({data:{user:null,session:null},error:a});throw a}})}async unlinkIdentity(e){try{return await this._useSession(async t=>{var n,a;const{data:s,error:l}=t;if(l)throw l;return await un(this.fetch,"DELETE",`${this.url}/user/identities/${e.identity_id}`,{headers:this.headers,jwt:(a=(n=s.session)===null||n===void 0?void 0:n.access_token)!==null&&a!==void 0?a:void 0})})}catch(t){if(Yt(t))return this._returnResult({data:null,error:t});throw t}}async _refreshAccessToken(e){const t=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(t,"begin");try{const n=Date.now();return await LL(async a=>(a>0&&await UL(200*Math.pow(2,a-1)),this._debug(t,"refreshing attempt",a),await un(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:So})),(a,s)=>{const l=200*Math.pow(2,a);return s&&Gy(s)&&Date.now()+l-n<Gd})}catch(n){if(this._debug(t,"error",n),Yt(n))return this._returnResult({data:{session:null,user:null},error:n});throw n}finally{this._debug(t,"end")}}_isValidSession(e){return typeof e=="object"&&e!==null&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,t){const n=await this._getUrlForProvider(`${this.url}/authorize`,e,{redirectTo:t.redirectTo,scopes:t.scopes,queryParams:t.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",t,"url",n),$a()&&!t.skipBrowserRedirect&&window.location.assign(n),{data:{provider:e,url:n},error:null}}async _recoverAndRefresh(){var e,t;const n="#_recoverAndRefresh()";this._debug(n,"begin");try{const a=await mh(this.storage,this.storageKey);if(a&&this.userStorage){let l=await mh(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!l&&(l={user:a.user},await qd(this.userStorage,this.storageKey+"-user",l)),a.user=(e=l==null?void 0:l.user)!==null&&e!==void 0?e:Gx()}else if(a&&!a.user&&!a.user){const l=await mh(this.storage,this.storageKey+"-user");l&&(l!=null&&l.user)?(a.user=l.user,await Qa(this.storage,this.storageKey+"-user"),await qd(this.storage,this.storageKey,a)):a.user=Gx()}if(this._debug(n,"session from storage",a),!this._isValidSession(a)){this._debug(n,"session is not valid"),a!==null&&await this._removeSession();return}const s=((t=a.expires_at)!==null&&t!==void 0?t:1/0)*1e3-Date.now()<Vx;if(this._debug(n,`session has${s?"":" not"} expired with margin of ${Vx}s`),s){if(this.autoRefreshToken&&a.refresh_token){const{error:l}=await this._callRefreshToken(a.refresh_token);l&&(console.error(l),Gy(l)||(this._debug(n,"refresh failed with a non-retryable error, removing the session",l),await this._removeSession()))}}else if(a.user&&a.user.__isUserNotAvailableProxy===!0)try{const{data:l,error:u}=await this._getUser(a.access_token);!u&&(l!=null&&l.user)?(a.user=l.user,await this._saveSession(a),await this._notifyAllSubscribers("SIGNED_IN",a)):this._debug(n,"could not get user data, skipping SIGNED_IN notification")}catch(l){console.error("Error getting user data:",l),this._debug(n,"error getting user data, skipping SIGNED_IN notification",l)}else await this._notifyAllSubscribers("SIGNED_IN",a)}catch(a){this._debug(n,"error",a),console.error(a);return}finally{this._debug(n,"end")}}async _callRefreshToken(e){var t,n;if(!e)throw new ts;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const a=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(a,"begin");try{this.refreshingDeferred=new cb;const{data:s,error:l}=await this._refreshAccessToken(e);if(l)throw l;if(!s.session)throw new ts;await this._saveSession(s.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",s.session);const u={data:s.session,error:null};return this.refreshingDeferred.resolve(u),u}catch(s){if(this._debug(a,"error",s),Yt(s)){const l={data:null,error:s};return Gy(s)||await this._removeSession(),(t=this.refreshingDeferred)===null||t===void 0||t.resolve(l),l}throw(n=this.refreshingDeferred)===null||n===void 0||n.reject(s),s}finally{this.refreshingDeferred=null,this._debug(a,"end")}}async _notifyAllSubscribers(e,t,n=!0){const a=`#_notifyAllSubscribers(${e})`;this._debug(a,"begin",t,`broadcast = ${n}`);try{this.broadcastChannel&&n&&this.broadcastChannel.postMessage({event:e,session:t});const s=[],l=Array.from(this.stateChangeEmitters.values()).map(async u=>{try{await u.callback(e,t)}catch(d){s.push(d)}});if(await Promise.all(l),s.length>0){for(let u=0;u<s.length;u+=1)console.error(s[u]);throw s[0]}}finally{this._debug(a,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0,await Qa(this.storage,`${this.storageKey}-code-verifier`);const t=Object.assign({},e),n=t.user&&t.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!n&&t.user&&await qd(this.userStorage,this.storageKey+"-user",{user:t.user});const a=Object.assign({},t);delete a.user;const s=sT(a);await qd(this.storage,this.storageKey,s)}else{const a=sT(t);await qd(this.storage,this.storageKey,a)}}async _removeSession(){this._debug("#_removeSession()"),this.suppressGetSessionWarning=!1,await Qa(this.storage,this.storageKey),await Qa(this.storage,this.storageKey+"-code-verifier"),await Qa(this.storage,this.storageKey+"-user"),this.userStorage&&await Qa(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&$a()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",e)}catch(t){console.error("removing visibilitychange callback failed",t)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval(()=>this._autoRefreshTokenTick(),Gd);this.autoRefreshTicker=e,e&&typeof e=="object"&&typeof e.unref=="function"?e.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(e),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const e=Date.now();try{return await this._useSession(async t=>{const{data:{session:n}}=t;if(!n||!n.refresh_token||!n.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const a=Math.floor((n.expires_at*1e3-e)/Gd);this._debug("#_autoRefreshTokenTick()",`access token expires in ${a} ticks, a tick lasts ${Gd}ms, refresh threshold is ${k1} ticks`),a<=k1&&await this._callRefreshToken(n.refresh_token)})}catch(t){console.error("Auto refresh tick failed with error. This is likely a transient error.",t)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(e){if(e.isAcquireTimeout||e instanceof OE)this._debug("auto refresh token tick lock not available");else throw e}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!$a()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){const t=`#_onVisibilityChanged(${e})`;this._debug(t,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(t,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,t,n){const a=[`provider=${encodeURIComponent(t)}`];if(n!=null&&n.redirectTo&&a.push(`redirect_to=${encodeURIComponent(n.redirectTo)}`),n!=null&&n.scopes&&a.push(`scopes=${encodeURIComponent(n.scopes)}`),this.flowType==="pkce"){const[s,l]=await md(this.storage,this.storageKey),u=new URLSearchParams({code_challenge:`${encodeURIComponent(s)}`,code_challenge_method:`${encodeURIComponent(l)}`});a.push(u.toString())}if(n!=null&&n.queryParams){const s=new URLSearchParams(n.queryParams);a.push(s.toString())}return n!=null&&n.skipBrowserRedirect&&a.push(`skip_http_redirect=${n.skipBrowserRedirect}`),`${e}?${a.join("&")}`}async _unenroll(e){try{return await this._useSession(async t=>{var n;const{data:a,error:s}=t;return s?this._returnResult({data:null,error:s}):await un(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:(n=a==null?void 0:a.session)===null||n===void 0?void 0:n.access_token})})}catch(t){if(Yt(t))return this._returnResult({data:null,error:t});throw t}}async _enroll(e){try{return await this._useSession(async t=>{var n,a;const{data:s,error:l}=t;if(l)return this._returnResult({data:null,error:l});const u=Object.assign({friendly_name:e.friendlyName,factor_type:e.factorType},e.factorType==="phone"?{phone:e.phone}:e.factorType==="totp"?{issuer:e.issuer}:{}),{data:d,error:p}=await un(this.fetch,"POST",`${this.url}/factors`,{body:u,headers:this.headers,jwt:(n=s==null?void 0:s.session)===null||n===void 0?void 0:n.access_token});return p?this._returnResult({data:null,error:p}):(e.factorType==="totp"&&d.type==="totp"&&(!((a=d==null?void 0:d.totp)===null||a===void 0)&&a.qr_code)&&(d.totp.qr_code=`data:image/svg+xml;utf-8,${d.totp.qr_code}`),this._returnResult({data:d,error:null}))})}catch(t){if(Yt(t))return this._returnResult({data:null,error:t});throw t}}async _verify(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async t=>{var n;const{data:a,error:s}=t;if(s)return this._returnResult({data:null,error:s});const l=Object.assign({challenge_id:e.challengeId},"webauthn"in e?{webauthn:Object.assign(Object.assign({},e.webauthn),{credential_response:e.webauthn.type==="create"?c4(e.webauthn.credential_response):u4(e.webauthn.credential_response)})}:{code:e.code}),{data:u,error:d}=await un(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:l,headers:this.headers,jwt:(n=a==null?void 0:a.session)===null||n===void 0?void 0:n.access_token});return d?this._returnResult({data:null,error:d}):(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+u.expires_in},u)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",u),this._returnResult({data:u,error:d}))})}catch(t){if(Yt(t))return this._returnResult({data:null,error:t});throw t}})}async _challenge(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async t=>{var n;const{data:a,error:s}=t;if(s)return this._returnResult({data:null,error:s});const l=await un(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{body:e,headers:this.headers,jwt:(n=a==null?void 0:a.session)===null||n===void 0?void 0:n.access_token});if(l.error)return l;const{data:u}=l;if(u.type!=="webauthn")return{data:u,error:null};switch(u.webauthn.type){case"create":return{data:Object.assign(Object.assign({},u),{webauthn:Object.assign(Object.assign({},u.webauthn),{credential_options:Object.assign(Object.assign({},u.webauthn.credential_options),{publicKey:o4(u.webauthn.credential_options.publicKey)})})}),error:null};case"request":return{data:Object.assign(Object.assign({},u),{webauthn:Object.assign(Object.assign({},u.webauthn),{credential_options:Object.assign(Object.assign({},u.webauthn.credential_options),{publicKey:l4(u.webauthn.credential_options.publicKey)})})}),error:null}}})}catch(t){if(Yt(t))return this._returnResult({data:null,error:t});throw t}})}async _challengeAndVerify(e){const{data:t,error:n}=await this._challenge({factorId:e.factorId});return n?this._returnResult({data:null,error:n}):await this._verify({factorId:e.factorId,challengeId:t.id,code:e.code})}async _listFactors(){var e;const{data:{user:t},error:n}=await this.getUser();if(n)return{data:null,error:n};const a={all:[],phone:[],totp:[],webauthn:[]};for(const s of(e=t==null?void 0:t.factors)!==null&&e!==void 0?e:[])a.all.push(s),s.status==="verified"&&a[s.factor_type].push(s);return{data:a,error:null}}async _getAuthenticatorAssuranceLevel(){var e,t;const{data:{session:n},error:a}=await this.getSession();if(a)return this._returnResult({data:null,error:a});if(!n)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:s}=jx(n.access_token);let l=null;s.aal&&(l=s.aal);let u=l;((t=(e=n.user.factors)===null||e===void 0?void 0:e.filter(g=>g.status==="verified"))!==null&&t!==void 0?t:[]).length>0&&(u="aal2");const p=s.amr||[];return{data:{currentLevel:l,nextLevel:u,currentAuthenticationMethods:p},error:null}}async _getAuthorizationDetails(e){try{return await this._useSession(async t=>{const{data:{session:n},error:a}=t;return a?this._returnResult({data:null,error:a}):n?await un(this.fetch,"GET",`${this.url}/oauth/authorizations/${e}`,{headers:this.headers,jwt:n.access_token,xform:s=>({data:s,error:null})}):this._returnResult({data:null,error:new ts})})}catch(t){if(Yt(t))return this._returnResult({data:null,error:t});throw t}}async _approveAuthorization(e,t){try{return await this._useSession(async n=>{const{data:{session:a},error:s}=n;if(s)return this._returnResult({data:null,error:s});if(!a)return this._returnResult({data:null,error:new ts});const l=await un(this.fetch,"POST",`${this.url}/oauth/authorizations/${e}/consent`,{headers:this.headers,jwt:a.access_token,body:{action:"approve"},xform:u=>({data:u,error:null})});return l.data&&l.data.redirect_url&&$a()&&!(t!=null&&t.skipBrowserRedirect)&&window.location.assign(l.data.redirect_url),l})}catch(n){if(Yt(n))return this._returnResult({data:null,error:n});throw n}}async _denyAuthorization(e,t){try{return await this._useSession(async n=>{const{data:{session:a},error:s}=n;if(s)return this._returnResult({data:null,error:s});if(!a)return this._returnResult({data:null,error:new ts});const l=await un(this.fetch,"POST",`${this.url}/oauth/authorizations/${e}/consent`,{headers:this.headers,jwt:a.access_token,body:{action:"deny"},xform:u=>({data:u,error:null})});return l.data&&l.data.redirect_url&&$a()&&!(t!=null&&t.skipBrowserRedirect)&&window.location.assign(l.data.redirect_url),l})}catch(n){if(Yt(n))return this._returnResult({data:null,error:n});throw n}}async _listOAuthGrants(){try{return await this._useSession(async e=>{const{data:{session:t},error:n}=e;return n?this._returnResult({data:null,error:n}):t?await un(this.fetch,"GET",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:t.access_token,xform:a=>({data:a,error:null})}):this._returnResult({data:null,error:new ts})})}catch(e){if(Yt(e))return this._returnResult({data:null,error:e});throw e}}async _revokeOAuthGrant(e){try{return await this._useSession(async t=>{const{data:{session:n},error:a}=t;return a?this._returnResult({data:null,error:a}):n?(await un(this.fetch,"DELETE",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:n.access_token,query:{client_id:e.clientId},noResolveJson:!0}),{data:{},error:null}):this._returnResult({data:null,error:new ts})})}catch(t){if(Yt(t))return this._returnResult({data:null,error:t});throw t}}async fetchJwk(e,t={keys:[]}){let n=t.keys.find(u=>u.kid===e);if(n)return n;const a=Date.now();if(n=this.jwks.keys.find(u=>u.kid===e),n&&this.jwks_cached_at+SL>a)return n;const{data:s,error:l}=await un(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(l)throw l;return!s.keys||s.keys.length===0||(this.jwks=s,this.jwks_cached_at=a,n=s.keys.find(u=>u.kid===e),!n)?null:n}async getClaims(e,t={}){try{let n=e;if(!n){const{data:b,error:x}=await this.getSession();if(x||!b.session)return this._returnResult({data:null,error:x});n=b.session.access_token}const{header:a,payload:s,signature:l,raw:{header:u,payload:d}}=jx(n);t!=null&&t.allowExpired||HL(s.exp);const p=!a.alg||a.alg.startsWith("HS")||!a.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(a.kid,t!=null&&t.keys?{keys:t.keys}:t==null?void 0:t.jwks);if(!p){const{error:b}=await this.getUser(n);if(b)throw b;return{data:{claims:s,header:a,signature:l},error:null}}const g=VL(a.alg),y=await crypto.subtle.importKey("jwk",p,g,!0,["verify"]);if(!await crypto.subtle.verify(g,y,l,CL(`${u}.${d}`)))throw new n_("Invalid JWT signature");return{data:{claims:s,header:a,signature:l},error:null}}catch(n){if(Yt(n))return this._returnResult({data:null,error:n});throw n}}};DE.nextInstanceID={};const _4=NE,b4=DE,x4=Object.freeze(Object.defineProperty({__proto__:null,AuthAdminApi:_4,AuthApiError:f3,AuthClient:b4,AuthError:tp,AuthImplicitGrantRedirectError:pg,AuthInvalidCredentialsError:dg,AuthInvalidJwtError:n_,AuthInvalidTokenResponseError:Nh,AuthPKCEGrantCodeExchangeError:V1,AuthRetryableFetchError:t_,AuthSessionMissingError:ts,AuthUnknownError:uu,AuthWeakPasswordError:j1,CustomAuthError:pc,GoTrueAdminApi:NE,GoTrueClient:DE,NavigatorLockAcquireTimeoutError:_3,SIGN_OUT_SCOPES:qy,isAuthApiError:d3,isAuthError:Yt,isAuthImplicitGrantRedirectError:m3,isAuthRetryableFetchError:Gy,isAuthSessionMissingError:p3,isAuthWeakPasswordError:EL,lockInternals:Dh,navigatorLock:b3,processLock:QL},Symbol.toStringTag,{value:"Module"})),E3=Jg(x4);var pT;function S4(){if(pT)return Zm;pT=1,Object.defineProperty(Zm,"__esModule",{value:!0}),Zm.SupabaseAuthClient=void 0;const i=E3;let e=class extends i.AuthClient{constructor(n){super(n)}};return Zm.SupabaseAuthClient=e,Zm}var mT;function gT(){if(mT)return I0;mT=1,Object.defineProperty(I0,"__esModule",{value:!0});const i=PR,e=VR(),t=KR,n=dL,a=mL(),s=gL(),l=vL(),u=S4();class d{constructor(g,y,_){var b,x,T;this.supabaseUrl=g,this.supabaseKey=y;const w=(0,l.validateSupabaseUrl)(g);if(!y)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",w),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",w),this.storageUrl=new URL("storage/v1",w),this.functionsUrl=new URL("functions/v1",w);const S=`sb-${w.hostname.split(".")[0]}-auth-token`,C={db:a.DEFAULT_DB_OPTIONS,realtime:a.DEFAULT_REALTIME_OPTIONS,auth:Object.assign(Object.assign({},a.DEFAULT_AUTH_OPTIONS),{storageKey:S}),global:a.DEFAULT_GLOBAL_OPTIONS},N=(0,l.applySettingDefaults)(_??{},C);this.storageKey=(b=N.auth.storageKey)!==null&&b!==void 0?b:"",this.headers=(x=N.global.headers)!==null&&x!==void 0?x:{},N.accessToken?(this.accessToken=N.accessToken,this.auth=new Proxy({},{get:(O,P)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(P)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((T=N.auth)!==null&&T!==void 0?T:{},this.headers,N.global.fetch),this.fetch=(0,s.fetchWithAuth)(y,this._getAccessToken.bind(this),N.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},N.realtime)),this.accessToken&&this.accessToken().then(O=>this.realtime.setAuth(O)).catch(O=>console.warn("Failed to set initial Realtime auth token:",O)),this.rest=new e.PostgrestClient(new URL("rest/v1",w).href,{headers:this.headers,schema:N.db.schema,fetch:this.fetch}),this.storage=new n.StorageClient(this.storageUrl.href,this.headers,this.fetch,_==null?void 0:_.storage),N.accessToken||this._listenForAuthEvents()}get functions(){return new i.FunctionsClient(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(g){return this.rest.from(g)}schema(g){return this.rest.schema(g)}rpc(g,y={},_={head:!1,get:!1,count:void 0}){return this.rest.rpc(g,y,_)}channel(g,y={config:{}}){return this.realtime.channel(g,y)}getChannels(){return this.realtime.getChannels()}removeChannel(g){return this.realtime.removeChannel(g)}removeAllChannels(){return this.realtime.removeAllChannels()}async _getAccessToken(){var g,y;if(this.accessToken)return await this.accessToken();const{data:_}=await this.auth.getSession();return(y=(g=_.session)===null||g===void 0?void 0:g.access_token)!==null&&y!==void 0?y:this.supabaseKey}_initSupabaseAuthClient({autoRefreshToken:g,persistSession:y,detectSessionInUrl:_,storage:b,userStorage:x,storageKey:T,flowType:w,lock:S,debug:C,throwOnError:N},O,P){const U={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new u.SupabaseAuthClient({url:this.authUrl.href,headers:Object.assign(Object.assign({},U),O),storageKey:T,autoRefreshToken:g,persistSession:y,detectSessionInUrl:_,storage:b,userStorage:x,flowType:w,lock:S,debug:C,throwOnError:N,fetch:P,hasCustomAuthorizationHeader:Object.keys(this.headers).some(z=>z.toLowerCase()==="authorization")})}_initRealtimeClient(g){return new t.RealtimeClient(this.realtimeUrl.href,Object.assign(Object.assign({},g),{params:Object.assign({apikey:this.supabaseKey},g==null?void 0:g.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((y,_)=>{this._handleTokenChanged(y,"CLIENT",_==null?void 0:_.access_token)})}_handleTokenChanged(g,y,_){(g==="TOKEN_REFRESHED"||g==="SIGNED_IN")&&this.changedAccessToken!==_?(this.changedAccessToken=_,this.realtime.setAuth(_)):g==="SIGNED_OUT"&&(this.realtime.setAuth(),y=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}return I0.default=d,I0}var vT;function E4(){return vT||(vT=1,(function(i){var e=ec&&ec.__createBinding||(Object.create?(function(g,y,_,b){b===void 0&&(b=_);var x=Object.getOwnPropertyDescriptor(y,_);(!x||("get"in x?!y.__esModule:x.writable||x.configurable))&&(x={enumerable:!0,get:function(){return y[_]}}),Object.defineProperty(g,b,x)}):(function(g,y,_,b){b===void 0&&(b=_),g[b]=y[_]})),t=ec&&ec.__exportStar||function(g,y){for(var _ in g)_!=="default"&&!Object.prototype.hasOwnProperty.call(y,_)&&e(y,g,_)},n=ec&&ec.__importDefault||function(g){return g&&g.__esModule?g:{default:g}};Object.defineProperty(i,"__esModule",{value:!0}),i.createClient=i.SupabaseClient=i.FunctionRegion=i.FunctionsError=i.FunctionsRelayError=i.FunctionsFetchError=i.FunctionsHttpError=i.PostgrestError=void 0;const a=n(gT());t(E3,i);var s=VR();Object.defineProperty(i,"PostgrestError",{enumerable:!0,get:function(){return s.PostgrestError}});var l=PR;Object.defineProperty(i,"FunctionsHttpError",{enumerable:!0,get:function(){return l.FunctionsHttpError}}),Object.defineProperty(i,"FunctionsFetchError",{enumerable:!0,get:function(){return l.FunctionsFetchError}}),Object.defineProperty(i,"FunctionsRelayError",{enumerable:!0,get:function(){return l.FunctionsRelayError}}),Object.defineProperty(i,"FunctionsError",{enumerable:!0,get:function(){return l.FunctionsError}}),Object.defineProperty(i,"FunctionRegion",{enumerable:!0,get:function(){return l.FunctionRegion}}),t(KR,i);var u=gT();Object.defineProperty(i,"SupabaseClient",{enumerable:!0,get:function(){return n(u).default}});const d=(g,y,_)=>new a.default(g,y,_);i.createClient=d;function p(){if(typeof window<"u"||typeof process>"u")return!1;const g=process.version;if(g==null)return!1;const y=g.match(/^v(\d+)\./);return y?parseInt(y[1],10)<=18:!1}p()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217")})(ec)),ec}var M3=E4();const w3=xu(M3),M4=rU({__proto__:null,default:w3},[M3]),{PostgrestError:Bj,FunctionsHttpError:Fj,FunctionsFetchError:kj,FunctionsRelayError:Hj,FunctionsError:Vj,FunctionRegion:jj,SupabaseClient:Gj,createClient:w4,GoTrueAdminApi:qj,GoTrueClient:Xj,AuthAdminApi:Wj,AuthClient:Yj,navigatorLock:Zj,NavigatorLockAcquireTimeoutError:Kj,lockInternals:Jj,processLock:Qj,SIGN_OUT_SCOPES:$j,AuthError:eG,AuthApiError:tG,AuthUnknownError:nG,CustomAuthError:iG,AuthSessionMissingError:aG,AuthInvalidTokenResponseError:rG,AuthInvalidCredentialsError:sG,AuthImplicitGrantRedirectError:oG,AuthPKCEGrantCodeExchangeError:lG,AuthRetryableFetchError:cG,AuthWeakPasswordError:uG,AuthInvalidJwtError:hG,isAuthError:fG,isAuthApiError:dG,isAuthSessionMissingError:pG,isAuthImplicitGrantRedirectError:mG,isAuthRetryableFetchError:gG,isAuthWeakPasswordError:vG,RealtimePresence:yG,RealtimeChannel:_G,RealtimeClient:bG,REALTIME_LISTEN_TYPES:xG,REALTIME_POSTGRES_CHANGES_LISTEN_EVENT:SG,REALTIME_PRESENCE_LISTEN_EVENTS:EG,REALTIME_SUBSCRIBE_STATES:MG,REALTIME_CHANNEL_STATES:wG}=w3||M4,T4="https://rromxmhmadwtshughttz.supabase.co",A4="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InJyb214bWhtYWR3dHNodWdodHR6Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjU3MjU3NzksImV4cCI6MjA4MTMwMTc3OX0.KqHi7jvLswRTxp6ivahcIpFswzuotQRHdEsnu09cz5k",Hn=w4(T4,A4),C4=({t:i,currentLang:e,setLanguage:t,currentView:n,setView:a,user:s})=>{var g,y,_,b;const[l,u]=re.useState(!1),d=async()=>{await Hn.auth.signOut(),a("home")},p=[{id:"home",label:i.auth_back_home||"Home"},{id:"works",label:i.nav_works}];return q.jsxs("header",{className:"relative w-full px-6 md:px-10 py-4 flex flex-col md:flex-row justify-between items-center border-b border-border bg-bgSurface z-50 shrink-0 transition-colors duration-300 shadow-sm",children:[q.jsxs("div",{className:"flex flex-col items-center md:items-start mb-4 md:mb-0",children:[q.jsxs("a",{href:"#",onClick:x=>{x.preventDefault(),a("home")},className:"text-2xl font-extrabold tracking-[2px] uppercase text-textMain hover:opacity-80 transition-opacity",children:["DESPUX ",q.jsx("span",{className:"text-primary",children:"ENGINEERING"})]}),q.jsx("span",{className:"text-xs font-medium text-textMuted tracking-widest mt-0.5 block",children:"Ing. Marcos Despujos"})]}),q.jsxs("div",{className:"flex flex-col-reverse md:flex-row items-center gap-6",children:[q.jsxs("nav",{className:"flex items-center gap-6 text-sm font-medium",children:[q.jsxs("div",{className:"relative group",children:[q.jsxs("button",{className:"flex items-center gap-1 font-semibold text-textMain uppercase tracking-wider hover:text-primary transition-colors py-2",children:[i.nav_tools,q.jsx("span",{className:"text-[10px] ml-1",children:""})]}),q.jsxs("div",{className:"absolute top-full right-0 mt-2 w-56 bg-bgSurface border border-border rounded shadow-xl opacity-0 invisible group-hover:opacity-100 group-hover:visible transition-all duration-200 transform translate-y-[-5px] group-hover:translate-y-0 z-50",children:[q.jsx("a",{href:"https://www.despux.net/tuberia",target:"_blank",rel:"noreferrer",className:"block px-5 py-3 text-textMuted hover:bg-black/5 hover:text-textMain hover:border-l-2 hover:border-primary transition-all text-sm",children:i.nav_calc}),q.jsx("a",{href:"https://www.despux.net/gear",target:"_blank",rel:"noreferrer",className:"block px-5 py-3 text-textMuted hover:bg-black/5 hover:text-textMain hover:border-l-2 hover:border-primary transition-all text-sm",children:i.nav_gears}),q.jsx("a",{href:"https://www.despux.net/cad",target:"_blank",rel:"noreferrer",className:"block px-5 py-3 text-textMuted hover:bg-black/5 hover:text-textMain hover:border-l-2 hover:border-primary transition-all text-sm",children:i.nav_cad})]})]}),p.map(x=>q.jsx("button",{onClick:()=>a(x.id),className:`transition-colors duration-200 tracking-wide uppercase ${n===x.id?"text-primary font-bold":"text-textMain hover:text-primary"}`,children:x.label},x.id))]}),q.jsx("div",{className:"h-6 w-px bg-border hidden md:block"}),q.jsxs("div",{className:"flex items-center gap-4",children:[q.jsx("div",{className:"flex gap-2",children:["es","en","de"].map(x=>q.jsx("button",{onClick:()=>t(x),className:`text-xs font-bold uppercase px-2 py-1 rounded transition-colors ${e===x?"bg-primary text-white shadow-md":"text-textMuted hover:text-textMain hover:bg-black/5"}`,children:x},x))}),s?q.jsxs("div",{className:"relative ml-2",children:[q.jsxs("button",{onClick:()=>u(!l),className:"flex items-center gap-2 hover:bg-black/5 pl-2 pr-3 py-1.5 rounded-full border border-transparent hover:border-border transition-all",children:[q.jsx("div",{className:"w-8 h-8 rounded-full bg-gradient-to-tr from-primary to-purple-500 flex items-center justify-center text-xs font-bold text-white shadow-md",children:(g=s.email)==null?void 0:g.charAt(0).toUpperCase()}),q.jsx("span",{className:"text-xs font-medium text-textMain hidden sm:block max-w-[100px] truncate",children:((y=s.user_metadata)==null?void 0:y.full_name)||((_=s.email)==null?void 0:_.split("@")[0])})]}),l&&q.jsxs("div",{className:"absolute right-0 mt-2 w-48 bg-bgSurface border border-border rounded-lg shadow-xl py-1 animate-fade-in-up z-50",children:[q.jsxs("div",{className:"px-4 py-3 border-b border-border bg-bgBody/30",children:[q.jsx("p",{className:"text-[10px] text-textMuted uppercase tracking-wider font-bold",children:"Signed in as"}),q.jsx("p",{className:"text-xs font-medium text-textMain truncate mt-0.5",children:s.email})]}),q.jsxs("button",{onClick:()=>{a("profile"),u(!1)},className:"w-full text-left px-4 py-2.5 text-sm text-textMain hover:bg-primary/10 hover:text-primary transition-colors flex items-center gap-2",children:[q.jsx("span",{children:""})," ",i.nav_profile||"My Profile"]}),((b=s.email)==null?void 0:b.toLowerCase())==="despux@gmail.com"&&q.jsxs("button",{onClick:()=>{console.log("Navigating to admin_requests"),a("admin_requests"),u(!1)},className:"w-full text-left px-4 py-2.5 text-sm text-primary hover:bg-primary/10 transition-colors flex items-center gap-2 font-bold",children:[q.jsx("span",{children:""})," Admin Requests"]}),q.jsxs("button",{onClick:d,className:"w-full text-left px-4 py-2.5 text-sm text-red-500 hover:bg-red-500/10 transition-colors flex items-center gap-2",children:[q.jsx("span",{children:""})," ",i.nav_logout||"Sign Out"]})]})]}):q.jsx("button",{onClick:()=>a("auth"),className:"ml-2 px-6 py-2 bg-textMain text-bgSurface text-sm font-bold rounded shadow-lg hover:shadow-xl hover:-translate-y-0.5 transition-all duration-300",children:i.btn_access||"LOGIN"})]})]})]})},yT=({t:i,onAccess:e,user:t})=>{var l;const[n,a]=re.useState("idle"),s=async u=>{u.preventDefault(),a("submitting");const d=u.currentTarget,p=new FormData(d);try{(await fetch("https://formspree.io/f/mnnebelz",{method:"POST",body:p,headers:{Accept:"application/json"}})).ok?(a("success"),d.reset()):a("error")}catch{a("error")}};return q.jsxs("div",{className:"w-full h-full flex flex-col no-scrollbar overflow-y-auto overflow-x-hidden",children:[q.jsxs("section",{className:"flex-1 flex flex-col justify-center items-center text-center px-5 py-20 min-h-[60vh] relative z-10",children:[q.jsx("h1",{className:"text-4xl md:text-6xl font-bold mb-5 leading-tight max-w-4xl drop-shadow-lg",dangerouslySetInnerHTML:{__html:i.hero_title}}),q.jsx("p",{className:"text-lg md:text-xl text-textMuted max-w-xl mb-12 drop-shadow-md",children:i.hero_desc}),t?q.jsxs("div",{className:"mt-8 flex flex-col items-center animate-fade-in-up",children:[q.jsx("span",{className:"text-primary text-xl font-bold tracking-widest uppercase mb-2",children:i.welcome_user}),q.jsx("span",{className:"text-3xl font-bold text-textMain mb-8",children:t.user_metadata.full_name||((l=t.email)==null?void 0:l.split("@")[0])}),q.jsxs("button",{onClick:()=>window.dispatchEvent(new CustomEvent("navigate",{detail:"project_request"})),className:"px-8 py-3 bg-bgSurface border border-primary/50 text-textMain font-bold tracking-wider hover:bg-primary hover:text-white transition-all duration-300 rounded shadow-[0_0_15px_rgba(0,102,204,0.2)] hover:shadow-[0_0_25px_rgba(255,255,0,0.5)] flex items-center gap-2",children:[q.jsx("span",{children:""})," START NEW PROJECT / QUOTE"]})]}):q.jsx("button",{onClick:e,className:"mt-8 px-10 py-4 bg-primary text-white font-bold tracking-widest hover:opacity-90 hover:scale-105 transition-all duration-300 rounded shadow-[0_0_20px_rgba(255,255,0,0.3)] hover:shadow-[0_0_30px_rgba(255,255,255,0.6)]",children:i.btn_access})]}),q.jsx("section",{className:"bg-bgSurface py-16 px-10 border-t border-border z-20",children:q.jsxs("div",{className:"max-w-5xl mx-auto grid grid-cols-1 md:grid-cols-2 gap-12 items-start",children:[q.jsxs("div",{className:"flex flex-col gap-4",children:[q.jsx("h3",{className:"text-3xl font-bold text-textMain",children:i.contact_title}),q.jsx("p",{className:"text-textMuted text-base leading-relaxed",children:i.contact_desc})]}),q.jsx("div",{className:"w-full",children:q.jsxs("form",{className:"flex flex-col gap-4",onSubmit:s,children:[q.jsx("input",{type:"email",name:"email",placeholder:i.input_email,className:"w-full bg-bgBody border border-border p-4 text-textMain text-sm rounded focus:outline-none focus:border-primary transition-colors disabled:opacity-50",required:!0,disabled:n==="submitting"||n==="success"}),q.jsx("textarea",{name:"message",rows:4,placeholder:i.input_msg,className:"w-full bg-bgBody border border-border p-4 text-textMain text-sm rounded focus:outline-none focus:border-primary transition-colors resize-y disabled:opacity-50",required:!0,disabled:n==="submitting"||n==="success"}),n==="success"?q.jsx("div",{className:"p-4 bg-green-500/10 border border-green-500 text-green-500 rounded text-center font-bold animate-fade-in-up",children:"Message Sent Successfully!"}):q.jsx("button",{type:"submit",disabled:n==="submitting",className:"self-start bg-textMain text-bgSurface font-bold py-3 px-6 rounded-sm hover:opacity-90 hover:scale-105 transition-all transform disabled:opacity-50",children:n==="submitting"?"Sending...":i.btn_send}),n==="error"&&q.jsx("div",{className:"text-red-500 text-sm mt-2",children:"Something went wrong. Please try again."})]})})]})}),q.jsxs("footer",{className:"py-8 px-10 text-center text-sm text-textMuted bg-bgSurface border-t border-border",children:[q.jsx("div",{dangerouslySetInnerHTML:{__html:i.footer_rights}}),q.jsx("div",{className:"mt-1 italic opacity-70",children:i.footer_dev})]})]})};var UE=cR();const R4=({t:i,isVisible:e,isAdmin:t})=>{const[n,a]=re.useState([]),[s,l]=re.useState(!0),[u,d]=re.useState(!1),[p,g]=re.useState(null),[y,_]=re.useState({title:"",description:"",images:[],tags:""}),[b,x]=re.useState(null),[T,w]=re.useState(!1),[S,C]=re.useState({});re.useEffect(()=>{N();const L=setInterval(()=>{C(j=>{const W={...j};return n.forEach(X=>{var le;const K=((le=X.images)==null?void 0:le.length)>0?X.images:X.image_url?[X.image_url]:[];if(K.length>1){const k=j[X.id]||0;W[X.id]=(k+1)%K.length}}),W})},5e3);return()=>clearInterval(L)},[n.length]);const N=async()=>{try{const{data:L,error:j}=await Hn.from("projects").select("*").is("user_id",null).order("created_at",{ascending:!1});if(j)throw j;const W=(L||[]).map(X=>({...X,images:X.images||(X.image_url?[X.image_url]:[]),tags:Array.isArray(X.tags)?X.tags:X.tags?[X.tags]:[]}));a(W)}catch(L){console.error("Error fetching projects:",L)}finally{l(!1)}},O=L=>{g(L),_({title:L.title,description:L.description,images:L.images&&L.images.length>0?L.images:L.image_url?[L.image_url]:[],tags:L.tags.join(", ")}),x(null),d(!0)},P=()=>{g(null),_({title:"",description:"",images:[],tags:""}),x(null),d(!0)},U=async L=>{if(confirm("Are you sure you want to delete this project?"))try{const{error:j}=await Hn.from("projects").delete().eq("id",L);if(j)throw j;N()}catch(j){console.error("Error deleting project:",j),alert("Error deleting project: "+j.message)}},z=async L=>{try{const j=L.name.split(".").pop(),X=`${`${Math.random()}.${j}`}`,{error:K}=await Hn.storage.from("project-images").upload(X,L);if(K)throw K;const{data:le}=Hn.storage.from("project-images").getPublicUrl(X);return le.publicUrl}catch(j){return console.error("Error uploading image:",j),null}},H=async L=>{L.preventDefault(),w(!0);try{let j=[...y.images];if(b&&b.length>0){const K=Array.from(b).map(Z=>z(Z)),k=(await Promise.all(K)).filter(Z=>Z!==null);k.length>0&&(j=[...j,...k])}const W=y.tags.split(",").map(K=>K.trim()).filter(K=>K!==""),X={title:y.title,description:y.description,image_url:j[0]||"",images:j,tags:W};if(p){const{error:K}=await Hn.from("projects").update(X).eq("id",p.id);if(K)throw K}else{const{error:K}=await Hn.from("projects").insert([X]);if(K)throw K}d(!1),N()}catch(j){console.error("Error saving project:",j),alert("Error saving project: "+j.message)}finally{w(!1)}},D=L=>{const j=L.images&&L.images.length>0?L.images:L.image_url?[L.image_url]:[],W=S[L.id]||0;return j[W],q.jsxs("div",{className:"w-full h-full relative",children:[j.map((X,K)=>q.jsx("img",{src:X,alt:`${L.title} - ${K+1}`,className:`absolute inset-0 w-full h-full object-contain bg-[#1a1a1a] transition-opacity duration-1000 ease-in-out ${K===W?"opacity-100":"opacity-0"}`,onError:le=>{const k=le.target;k.src.includes("placeholder")||(k.src="https://placehold.co/800x600?text=No+Image")}},`${L.id}-img-${K}`)),j.length>1&&q.jsx("div",{className:"absolute bottom-4 left-0 right-0 flex justify-center gap-2 z-10",children:j.map((X,K)=>q.jsx("div",{className:`w-2 h-2 rounded-full transition-colors duration-300 ${K===W?"bg-primary shadow-[0_0_8px_rgba(255,255,0,0.8)]":"bg-white/30"}`},K))})]})};return q.jsxs("div",{className:"w-full h-full flex flex-col no-scrollbar overflow-y-auto overflow-x-hidden relative bg-bgBody transition-colors duration-300",children:[q.jsxs("div",{className:"max-w-7xl mx-auto px-10 py-16 w-full flex-1 flex flex-col gap-20 items-center justify-start",children:[t&&q.jsx("div",{className:"w-full flex justify-end",children:q.jsx("button",{onClick:P,className:"bg-primary text-white font-bold py-2 px-6 rounded hover:opacity-90 transition-opacity uppercase tracking-widest text-sm shadow-lg",children:"+ Add New Project"})}),s?q.jsx("div",{className:"text-textMuted text-xl animate-pulse",children:"Loading Projects..."}):n.map((L,j)=>q.jsxs("article",{className:`bg-bgSurface border border-border rounded-lg overflow-hidden grid grid-cols-1 md:grid-cols-[1.2fr_0.8fr] shadow-xl backdrop-blur-sm max-w-5xl w-full transform transition-all duration-700 ease-out ${e?"opacity-100 translate-y-0":"opacity-0 translate-y-10"}`,style:{transitionDelay:`${j*200}ms`},children:[q.jsxs("div",{className:"w-full h-[400px] bg-bgBody relative overflow-hidden group border-r border-border",children:[D(L),t&&q.jsxs("div",{className:"absolute top-4 right-4 flex gap-2 z-20",children:[q.jsx("button",{onClick:()=>O(L),className:"bg-blue-600 p-2 rounded text-white hover:bg-blue-500 shadow-lg transition-transform hover:scale-110",title:"Edit Project",children:""}),q.jsx("button",{onClick:()=>U(L.id),className:"bg-red-600 p-2 rounded text-white hover:bg-red-500 shadow-lg transition-transform hover:scale-110",title:"Delete Project",children:""})]})]}),q.jsxs("div",{className:"p-10 flex flex-col justify-center bg-bgSurface",children:[q.jsx("span",{className:"text-primary text-xs font-bold tracking-widest uppercase mb-2",children:"PROJECT"}),q.jsx("h2",{className:"text-3xl font-bold mb-5 leading-tight text-textMain",children:L.title}),q.jsx("p",{className:"text-textMuted mb-8 text-base",children:L.description}),q.jsx("div",{className:"flex flex-wrap gap-2 mb-8",children:L.tags.map(W=>q.jsx("span",{className:"bg-bgBody border border-border px-3 py-1 rounded-full text-xs text-textMuted",children:W},W))}),q.jsx("a",{href:"#",className:"self-start text-textMain border border-primary px-6 py-2 rounded transition-all hover:bg-primary hover:text-white hover:shadow-primary-glow",children:i.work_btn})]})]},L.id))]}),q.jsx("footer",{className:"py-8 px-10 text-center text-sm text-textMuted border-t border-border bg-bgSurface",children:q.jsx("div",{dangerouslySetInnerHTML:{__html:i.footer_rights}})}),u&&UE.createPortal(q.jsx("div",{className:"fixed inset-0 z-[100] flex items-center justify-center p-4 bg-black/60 backdrop-blur-sm",children:q.jsxs("div",{className:"bg-bgSurface border border-border rounded-lg p-8 w-full max-w-2xl max-h-[90vh] overflow-y-auto shadow-2xl",children:[q.jsx("h2",{className:"text-2xl font-bold text-textMain mb-6",children:p?"Edit Project":"Create New Project"}),q.jsxs("form",{onSubmit:H,className:"flex flex-col gap-4",children:[q.jsxs("div",{children:[q.jsx("label",{className:"text-xs uppercase text-textMuted block mb-1",children:"Title"}),q.jsx("input",{className:"w-full bg-bgBody border border-border p-2 rounded text-textMain focus:border-primary focus:outline-none transition-colors",value:y.title,onChange:L=>_({...y,title:L.target.value}),required:!0})]}),q.jsxs("div",{children:[q.jsx("label",{className:"text-xs uppercase text-textMuted block mb-1",children:"Description"}),q.jsx("textarea",{className:"w-full bg-bgBody border border-border p-2 rounded text-textMain h-24 focus:border-primary focus:outline-none transition-colors",value:y.description,onChange:L=>_({...y,description:L.target.value}),required:!0})]}),q.jsxs("div",{children:[q.jsx("label",{className:"text-xs uppercase text-textMuted block mb-1",children:"Project Images (Select Multiple)"}),q.jsxs("div",{className:"flex flex-col gap-2",children:[q.jsx("input",{type:"file",accept:"image/*",multiple:!0,onChange:L=>x(L.target.files),className:"text-textMuted text-sm file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-primary file:text-white hover:file:bg-blue-600 transition-colors cursor-pointer"}),q.jsx("div",{className:"flex flex-wrap gap-2 mt-2",children:y.images.map((L,j)=>q.jsxs("div",{className:"relative w-16 h-16 border border-border",children:[q.jsx("img",{src:L,className:"w-full h-full object-cover"}),q.jsx("button",{type:"button",onClick:()=>_(W=>({...W,images:W.images.filter((X,K)=>K!==j)})),className:"absolute -top-2 -right-2 bg-red-600 text-white rounded-full w-5 h-5 flex items-center justify-center text-xs shadow-sm",children:"x"})]},j))})]})]}),q.jsxs("div",{children:[q.jsx("label",{className:"text-xs uppercase text-textMuted block mb-1",children:"Tags (comma separated)"}),q.jsx("input",{className:"w-full bg-bgBody border border-border p-2 rounded text-textMain focus:border-primary focus:outline-none transition-colors",value:y.tags,onChange:L=>_({...y,tags:L.target.value})})]}),q.jsxs("div",{className:"flex justify-end gap-3 mt-4",children:[q.jsx("button",{type:"button",onClick:()=>d(!1),className:"px-4 py-2 text-textMuted hover:text-textMain",disabled:T,children:"Cancel"}),q.jsx("button",{type:"submit",disabled:T,className:"px-6 py-2 bg-primary text-white font-bold rounded hover:opacity-90 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:T?"Uploading...":"Save Project"})]})]})]})}),document.body)]})},N4=({isOpen:i,title:e,message:t,onClose:n})=>i?q.jsxs("div",{className:"fixed inset-0 z-[100] flex items-center justify-center p-4",children:[q.jsx("div",{className:"absolute inset-0 bg-black/60 backdrop-blur-sm transition-opacity",onClick:n}),q.jsxs("div",{className:"relative bg-bgSurface border border-border rounded-lg p-6 max-w-sm w-full shadow-2xl transform transition-all animate-fade-in-up",children:[q.jsx("h3",{className:"text-xl font-bold text-textMain mb-2",children:e}),q.jsx("p",{className:"text-textMuted text-sm mb-6 leading-relaxed",children:t}),q.jsx("div",{className:"flex justify-end",children:q.jsx("button",{onClick:n,className:"bg-primary text-white font-bold py-2 px-6 rounded hover:opacity-90 transition-opacity text-sm shadow-md",children:"OK"})})]})]}):null,O4=({t:i,isVisible:e,onBack:t,isAdmin:n,setIsAdmin:a})=>{const[s,l]=re.useState(!0),[u,d]=re.useState(""),[p,g]=re.useState(""),[y,_]=re.useState(""),[b,x]=re.useState(!1),[T,w]=re.useState(!1),[S,C]=re.useState(""),[N,O]=re.useState(""),[P,U]=re.useState(!1),[z,H]=re.useState(""),D=async W=>{var X,K;W.preventDefault(),console.log("--- START LOGIN ---"),console.log("isAdmin Request:",n),x(!0);try{const{data:le,error:k}=await Hn.auth.signInWithPassword({email:u,password:p});if(k)throw k;if(console.log("Password Login Successful:",(X=le.user)==null?void 0:X.id),n){console.log(">>> ADMIN MODE CHECK <<<");const{error:Z}=await Hn.auth.refreshSession();Z&&console.warn("Session Refresh Warning:",Z);const{data:ne,error:pe}=await Hn.auth.mfa.listFactors();if(console.log("Factors API Response:",ne,pe),pe)throw alert("Security Error (ListFactors): "+pe.message),pe;const ge=(K=ne==null?void 0:ne.totp)==null?void 0:K.find(Se=>Se.status==="verified");if(console.log("Verified Factor Found:",ge),!ge){console.warn("No verified TOTP factor found.");const Se=confirm(` ADMIN ACCESS DENIED

No verified Two-Factor Authentication (2FA) found for this account.

You must set up Google Authenticator in your Profile to access Admin Mode.

Click OK to go to your Profile now, or Cancel to log in as a regular user.`);a(!1),Se?(t(),setTimeout(()=>alert("Please click on 'My Profile' and then 'Setup Google Authenticator'."),500)):t();return}console.log("Challenging Factor ID:",ge.id);const{data:J,error:ce}=await Hn.auth.mfa.challenge({factorId:ge.id});if(ce)throw alert("MFA Challenge Error: "+ce.message),ce;console.log("Challenge Created:",J),C(J.id),O(ge.id),H(""),U(!0);return}console.log("Regular User Login"),t()}catch(le){console.error("Login Exception:",le.message),alert("Login Error: "+le.message)}finally{P||x(!1)}},L=async W=>{W.preventDefault(),console.log("Verifying MFA Code...",z),console.log("Using Factor ID:",N),console.log("Using Challenge ID:",S),x(!0);try{const{data:X,error:K}=await Hn.auth.mfa.verify({factorId:N,challengeId:S,code:z});if(K)throw K;console.log("MFA Verified Success:",X),t()}catch(X){console.error("MFA Verify Error:",X.message),alert("Invalid Code: "+X.message),x(!1)}},j=async W=>{W.preventDefault(),x(!0);try{const{data:X,error:K}=await Hn.auth.signUp({email:u,password:p,options:{data:{full_name:y}}});if(K)throw K;console.log("Registration Successful:",X),w(!0)}catch(X){console.error("Registration Error:",X.message),alert("Registration Error: "+X.message)}finally{x(!1)}};return q.jsxs("div",{className:`w-full h-full flex flex-col items-center justify-center p-4 transition-all duration-700 ease-out ${e?"opacity-100 translate-y-0":"opacity-0 translate-y-10"}`,children:[q.jsx(N4,{isOpen:T,title:i.auth_register_title,message:i.auth_reg_success,onClose:()=>w(!1)}),q.jsxs("div",{className:"w-full max-w-md bg-bgSurface border border-border rounded-lg p-8 shadow-2xl backdrop-blur-md",children:[q.jsx("h2",{className:"text-3xl font-bold text-center mb-6 text-textMain",children:s?i.auth_login_title:i.auth_register_title}),q.jsx("form",{onSubmit:s?D:j,className:"flex flex-col gap-4",children:P?q.jsxs("div",{className:"animate-fade-in-up",children:[q.jsx("p",{className:"text-center text-textMuted text-sm mb-4",children:"Enter the code from your Authenticator App to access Admin Mode."}),q.jsxs("div",{className:"flex flex-col gap-4",children:[q.jsx("input",{type:"text",placeholder:"000000",value:z,onChange:W=>H(W.target.value.replace(/\D/g,"").slice(0,6)),className:"w-full text-center text-3xl tracking-[0.5em] bg-bgBody border border-primary text-primary font-mono py-4 rounded focus:outline-none shadow-[0_0_15px_rgba(255,255,0,0.2)]",autoFocus:!0}),q.jsx("button",{onClick:L,disabled:z.length!==6||b,className:"mt-2 bg-primary text-white font-bold py-3 rounded hover:opacity-90 transition-colors duration-300 disabled:opacity-50",children:b?"Verifying...":"VERIFY ACCESS"})]})]}):q.jsxs(q.Fragment,{children:[!s&&q.jsxs("div",{children:[q.jsx("label",{className:"block text-xs uppercase tracking-wider text-textMuted mb-1",children:i.auth_name}),q.jsx("input",{type:"text",value:y,onChange:W=>_(W.target.value),className:"w-full bg-bgBody border border-border rounded px-4 py-2 text-textMain focus:outline-none focus:border-primary transition-colors",required:!0})]}),q.jsxs("div",{children:[q.jsx("label",{className:"block text-xs uppercase tracking-wider text-textMuted mb-1",children:i.auth_email}),q.jsx("input",{type:"email",value:u,onChange:W=>d(W.target.value),className:"w-full bg-bgBody border border-border rounded px-4 py-2 text-textMain focus:outline-none focus:border-primary transition-colors",required:!0})]}),q.jsxs("div",{children:[q.jsx("label",{className:"block text-xs uppercase tracking-wider text-textMuted mb-1",children:i.auth_pass}),q.jsx("input",{type:"password",value:p,onChange:W=>g(W.target.value),className:"w-full bg-bgBody border border-border rounded px-4 py-2 text-textMain focus:outline-none focus:border-primary transition-colors",required:!0})]}),s&&q.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[q.jsx("input",{type:"checkbox",id:"adminToggle",checked:n,onChange:W=>a(W.target.checked),className:"accent-primary w-4 h-4 cursor-pointer"}),q.jsx("label",{htmlFor:"adminToggle",className:"text-sm text-textMuted cursor-pointer select-none",children:i.auth_admin_mode})]}),q.jsx("button",{type:"submit",className:"mt-4 bg-primary text-white font-bold py-3 rounded hover:opacity-90 transition-colors duration-300",children:s?i.auth_btn_login:i.auth_btn_register})]})}),q.jsxs("div",{className:"mt-6 text-center space-y-2",children:[q.jsx("button",{onClick:()=>l(!s),className:"text-sm text-textMuted hover:text-textMain transition-colors block w-full",children:s?i.auth_switch_to_register:i.auth_switch_to_login}),q.jsx("button",{onClick:t,className:"text-xs text-textMuted/60 hover:text-textMain transition-colors border-t border-border pt-4 w-full",children:i.auth_back_home})]})]})]})};var yd={},qx,_T;function D4(){return _T||(_T=1,qx=function(){return typeof Promise=="function"&&Promise.prototype&&Promise.prototype.then}),qx}var Xx={},tu={},bT;function nf(){if(bT)return tu;bT=1;let i;const e=[0,26,44,70,100,134,172,196,242,292,346,404,466,532,581,655,733,815,901,991,1085,1156,1258,1364,1474,1588,1706,1828,1921,2051,2185,2323,2465,2611,2761,2876,3034,3196,3362,3532,3706];return tu.getSymbolSize=function(n){if(!n)throw new Error('"version" cannot be null or undefined');if(n<1||n>40)throw new Error('"version" should be in range from 1 to 40');return n*4+17},tu.getSymbolTotalCodewords=function(n){return e[n]},tu.getBCHDigit=function(t){let n=0;for(;t!==0;)n++,t>>>=1;return n},tu.setToSJISFunction=function(n){if(typeof n!="function")throw new Error('"toSJISFunc" is not a valid function.');i=n},tu.isKanjiModeEnabled=function(){return typeof i<"u"},tu.toSJIS=function(n){return i(n)},tu}var Wx={},xT;function LE(){return xT||(xT=1,(function(i){i.L={bit:1},i.M={bit:0},i.Q={bit:3},i.H={bit:2};function e(t){if(typeof t!="string")throw new Error("Param is not a string");switch(t.toLowerCase()){case"l":case"low":return i.L;case"m":case"medium":return i.M;case"q":case"quartile":return i.Q;case"h":case"high":return i.H;default:throw new Error("Unknown EC Level: "+t)}}i.isValid=function(n){return n&&typeof n.bit<"u"&&n.bit>=0&&n.bit<4},i.from=function(n,a){if(i.isValid(n))return n;try{return e(n)}catch{return a}}})(Wx)),Wx}var Yx,ST;function U4(){if(ST)return Yx;ST=1;function i(){this.buffer=[],this.length=0}return i.prototype={get:function(e){const t=Math.floor(e/8);return(this.buffer[t]>>>7-e%8&1)===1},put:function(e,t){for(let n=0;n<t;n++)this.putBit((e>>>t-n-1&1)===1)},getLengthInBits:function(){return this.length},putBit:function(e){const t=Math.floor(this.length/8);this.buffer.length<=t&&this.buffer.push(0),e&&(this.buffer[t]|=128>>>this.length%8),this.length++}},Yx=i,Yx}var Zx,ET;function L4(){if(ET)return Zx;ET=1;function i(e){if(!e||e<1)throw new Error("BitMatrix size must be defined and greater than 0");this.size=e,this.data=new Uint8Array(e*e),this.reservedBit=new Uint8Array(e*e)}return i.prototype.set=function(e,t,n,a){const s=e*this.size+t;this.data[s]=n,a&&(this.reservedBit[s]=!0)},i.prototype.get=function(e,t){return this.data[e*this.size+t]},i.prototype.xor=function(e,t,n){this.data[e*this.size+t]^=n},i.prototype.isReserved=function(e,t){return this.reservedBit[e*this.size+t]},Zx=i,Zx}var Kx={},MT;function I4(){return MT||(MT=1,(function(i){const e=nf().getSymbolSize;i.getRowColCoords=function(n){if(n===1)return[];const a=Math.floor(n/7)+2,s=e(n),l=s===145?26:Math.ceil((s-13)/(2*a-2))*2,u=[s-7];for(let d=1;d<a-1;d++)u[d]=u[d-1]-l;return u.push(6),u.reverse()},i.getPositions=function(n){const a=[],s=i.getRowColCoords(n),l=s.length;for(let u=0;u<l;u++)for(let d=0;d<l;d++)u===0&&d===0||u===0&&d===l-1||u===l-1&&d===0||a.push([s[u],s[d]]);return a}})(Kx)),Kx}var Jx={},wT;function P4(){if(wT)return Jx;wT=1;const i=nf().getSymbolSize,e=7;return Jx.getPositions=function(n){const a=i(n);return[[0,0],[a-e,0],[0,a-e]]},Jx}var Qx={},TT;function z4(){return TT||(TT=1,(function(i){i.Patterns={PATTERN000:0,PATTERN001:1,PATTERN010:2,PATTERN011:3,PATTERN100:4,PATTERN101:5,PATTERN110:6,PATTERN111:7};const e={N1:3,N2:3,N3:40,N4:10};i.isValid=function(a){return a!=null&&a!==""&&!isNaN(a)&&a>=0&&a<=7},i.from=function(a){return i.isValid(a)?parseInt(a,10):void 0},i.getPenaltyN1=function(a){const s=a.size;let l=0,u=0,d=0,p=null,g=null;for(let y=0;y<s;y++){u=d=0,p=g=null;for(let _=0;_<s;_++){let b=a.get(y,_);b===p?u++:(u>=5&&(l+=e.N1+(u-5)),p=b,u=1),b=a.get(_,y),b===g?d++:(d>=5&&(l+=e.N1+(d-5)),g=b,d=1)}u>=5&&(l+=e.N1+(u-5)),d>=5&&(l+=e.N1+(d-5))}return l},i.getPenaltyN2=function(a){const s=a.size;let l=0;for(let u=0;u<s-1;u++)for(let d=0;d<s-1;d++){const p=a.get(u,d)+a.get(u,d+1)+a.get(u+1,d)+a.get(u+1,d+1);(p===4||p===0)&&l++}return l*e.N2},i.getPenaltyN3=function(a){const s=a.size;let l=0,u=0,d=0;for(let p=0;p<s;p++){u=d=0;for(let g=0;g<s;g++)u=u<<1&2047|a.get(p,g),g>=10&&(u===1488||u===93)&&l++,d=d<<1&2047|a.get(g,p),g>=10&&(d===1488||d===93)&&l++}return l*e.N3},i.getPenaltyN4=function(a){let s=0;const l=a.data.length;for(let d=0;d<l;d++)s+=a.data[d];return Math.abs(Math.ceil(s*100/l/5)-10)*e.N4};function t(n,a,s){switch(n){case i.Patterns.PATTERN000:return(a+s)%2===0;case i.Patterns.PATTERN001:return a%2===0;case i.Patterns.PATTERN010:return s%3===0;case i.Patterns.PATTERN011:return(a+s)%3===0;case i.Patterns.PATTERN100:return(Math.floor(a/2)+Math.floor(s/3))%2===0;case i.Patterns.PATTERN101:return a*s%2+a*s%3===0;case i.Patterns.PATTERN110:return(a*s%2+a*s%3)%2===0;case i.Patterns.PATTERN111:return(a*s%3+(a+s)%2)%2===0;default:throw new Error("bad maskPattern:"+n)}}i.applyMask=function(a,s){const l=s.size;for(let u=0;u<l;u++)for(let d=0;d<l;d++)s.isReserved(d,u)||s.xor(d,u,t(a,d,u))},i.getBestMask=function(a,s){const l=Object.keys(i.Patterns).length;let u=0,d=1/0;for(let p=0;p<l;p++){s(p),i.applyMask(p,a);const g=i.getPenaltyN1(a)+i.getPenaltyN2(a)+i.getPenaltyN3(a)+i.getPenaltyN4(a);i.applyMask(p,a),g<d&&(d=g,u=p)}return u}})(Qx)),Qx}var G0={},AT;function T3(){if(AT)return G0;AT=1;const i=LE(),e=[1,1,1,1,1,1,1,1,1,1,2,2,1,2,2,4,1,2,4,4,2,4,4,4,2,4,6,5,2,4,6,6,2,5,8,8,4,5,8,8,4,5,8,11,4,8,10,11,4,9,12,16,4,9,16,16,6,10,12,18,6,10,17,16,6,11,16,19,6,13,18,21,7,14,21,25,8,16,20,25,8,17,23,25,9,17,23,34,9,18,25,30,10,20,27,32,12,21,29,35,12,23,34,37,12,25,34,40,13,26,35,42,14,28,38,45,15,29,40,48,16,31,43,51,17,33,45,54,18,35,48,57,19,37,51,60,19,38,53,63,20,40,56,66,21,43,59,70,22,45,62,74,24,47,65,77,25,49,68,81],t=[7,10,13,17,10,16,22,28,15,26,36,44,20,36,52,64,26,48,72,88,36,64,96,112,40,72,108,130,48,88,132,156,60,110,160,192,72,130,192,224,80,150,224,264,96,176,260,308,104,198,288,352,120,216,320,384,132,240,360,432,144,280,408,480,168,308,448,532,180,338,504,588,196,364,546,650,224,416,600,700,224,442,644,750,252,476,690,816,270,504,750,900,300,560,810,960,312,588,870,1050,336,644,952,1110,360,700,1020,1200,390,728,1050,1260,420,784,1140,1350,450,812,1200,1440,480,868,1290,1530,510,924,1350,1620,540,980,1440,1710,570,1036,1530,1800,570,1064,1590,1890,600,1120,1680,1980,630,1204,1770,2100,660,1260,1860,2220,720,1316,1950,2310,750,1372,2040,2430];return G0.getBlocksCount=function(a,s){switch(s){case i.L:return e[(a-1)*4+0];case i.M:return e[(a-1)*4+1];case i.Q:return e[(a-1)*4+2];case i.H:return e[(a-1)*4+3];default:return}},G0.getTotalCodewordsCount=function(a,s){switch(s){case i.L:return t[(a-1)*4+0];case i.M:return t[(a-1)*4+1];case i.Q:return t[(a-1)*4+2];case i.H:return t[(a-1)*4+3];default:return}},G0}var $x={},Km={},CT;function B4(){if(CT)return Km;CT=1;const i=new Uint8Array(512),e=new Uint8Array(256);return(function(){let n=1;for(let a=0;a<255;a++)i[a]=n,e[n]=a,n<<=1,n&256&&(n^=285);for(let a=255;a<512;a++)i[a]=i[a-255]})(),Km.log=function(n){if(n<1)throw new Error("log("+n+")");return e[n]},Km.exp=function(n){return i[n]},Km.mul=function(n,a){return n===0||a===0?0:i[e[n]+e[a]]},Km}var RT;function F4(){return RT||(RT=1,(function(i){const e=B4();i.mul=function(n,a){const s=new Uint8Array(n.length+a.length-1);for(let l=0;l<n.length;l++)for(let u=0;u<a.length;u++)s[l+u]^=e.mul(n[l],a[u]);return s},i.mod=function(n,a){let s=new Uint8Array(n);for(;s.length-a.length>=0;){const l=s[0];for(let d=0;d<a.length;d++)s[d]^=e.mul(a[d],l);let u=0;for(;u<s.length&&s[u]===0;)u++;s=s.slice(u)}return s},i.generateECPolynomial=function(n){let a=new Uint8Array([1]);for(let s=0;s<n;s++)a=i.mul(a,new Uint8Array([1,e.exp(s)]));return a}})($x)),$x}var eS,NT;function k4(){if(NT)return eS;NT=1;const i=F4();function e(t){this.genPoly=void 0,this.degree=t,this.degree&&this.initialize(this.degree)}return e.prototype.initialize=function(n){this.degree=n,this.genPoly=i.generateECPolynomial(this.degree)},e.prototype.encode=function(n){if(!this.genPoly)throw new Error("Encoder not initialized");const a=new Uint8Array(n.length+this.degree);a.set(n);const s=i.mod(a,this.genPoly),l=this.degree-s.length;if(l>0){const u=new Uint8Array(this.degree);return u.set(s,l),u}return s},eS=e,eS}var tS={},nS={},iS={},OT;function A3(){return OT||(OT=1,iS.isValid=function(e){return!isNaN(e)&&e>=1&&e<=40}),iS}var hl={},DT;function C3(){if(DT)return hl;DT=1;const i="[0-9]+",e="[A-Z $%*+\\-./:]+";let t="(?:[u3000-u303F]|[u3040-u309F]|[u30A0-u30FF]|[uFF00-uFFEF]|[u4E00-u9FAF]|[u2605-u2606]|[u2190-u2195]|u203B|[u2010u2015u2018u2019u2025u2026u201Cu201Du2225u2260]|[u0391-u0451]|[u00A7u00A8u00B1u00B4u00D7u00F7])+";t=t.replace(/u/g,"\\u");const n="(?:(?![A-Z0-9 $%*+\\-./:]|"+t+`)(?:.|[\r
]))+`;hl.KANJI=new RegExp(t,"g"),hl.BYTE_KANJI=new RegExp("[^A-Z0-9 $%*+\\-./:]+","g"),hl.BYTE=new RegExp(n,"g"),hl.NUMERIC=new RegExp(i,"g"),hl.ALPHANUMERIC=new RegExp(e,"g");const a=new RegExp("^"+t+"$"),s=new RegExp("^"+i+"$"),l=new RegExp("^[A-Z0-9 $%*+\\-./:]+$");return hl.testKanji=function(d){return a.test(d)},hl.testNumeric=function(d){return s.test(d)},hl.testAlphanumeric=function(d){return l.test(d)},hl}var UT;function af(){return UT||(UT=1,(function(i){const e=A3(),t=C3();i.NUMERIC={id:"Numeric",bit:1,ccBits:[10,12,14]},i.ALPHANUMERIC={id:"Alphanumeric",bit:2,ccBits:[9,11,13]},i.BYTE={id:"Byte",bit:4,ccBits:[8,16,16]},i.KANJI={id:"Kanji",bit:8,ccBits:[8,10,12]},i.MIXED={bit:-1},i.getCharCountIndicator=function(s,l){if(!s.ccBits)throw new Error("Invalid mode: "+s);if(!e.isValid(l))throw new Error("Invalid version: "+l);return l>=1&&l<10?s.ccBits[0]:l<27?s.ccBits[1]:s.ccBits[2]},i.getBestModeForData=function(s){return t.testNumeric(s)?i.NUMERIC:t.testAlphanumeric(s)?i.ALPHANUMERIC:t.testKanji(s)?i.KANJI:i.BYTE},i.toString=function(s){if(s&&s.id)return s.id;throw new Error("Invalid mode")},i.isValid=function(s){return s&&s.bit&&s.ccBits};function n(a){if(typeof a!="string")throw new Error("Param is not a string");switch(a.toLowerCase()){case"numeric":return i.NUMERIC;case"alphanumeric":return i.ALPHANUMERIC;case"kanji":return i.KANJI;case"byte":return i.BYTE;default:throw new Error("Unknown mode: "+a)}}i.from=function(s,l){if(i.isValid(s))return s;try{return n(s)}catch{return l}}})(nS)),nS}var LT;function H4(){return LT||(LT=1,(function(i){const e=nf(),t=T3(),n=LE(),a=af(),s=A3(),l=7973,u=e.getBCHDigit(l);function d(_,b,x){for(let T=1;T<=40;T++)if(b<=i.getCapacity(T,x,_))return T}function p(_,b){return a.getCharCountIndicator(_,b)+4}function g(_,b){let x=0;return _.forEach(function(T){const w=p(T.mode,b);x+=w+T.getBitsLength()}),x}function y(_,b){for(let x=1;x<=40;x++)if(g(_,x)<=i.getCapacity(x,b,a.MIXED))return x}i.from=function(b,x){return s.isValid(b)?parseInt(b,10):x},i.getCapacity=function(b,x,T){if(!s.isValid(b))throw new Error("Invalid QR Code version");typeof T>"u"&&(T=a.BYTE);const w=e.getSymbolTotalCodewords(b),S=t.getTotalCodewordsCount(b,x),C=(w-S)*8;if(T===a.MIXED)return C;const N=C-p(T,b);switch(T){case a.NUMERIC:return Math.floor(N/10*3);case a.ALPHANUMERIC:return Math.floor(N/11*2);case a.KANJI:return Math.floor(N/13);case a.BYTE:default:return Math.floor(N/8)}},i.getBestVersionForData=function(b,x){let T;const w=n.from(x,n.M);if(Array.isArray(b)){if(b.length>1)return y(b,w);if(b.length===0)return 1;T=b[0]}else T=b;return d(T.mode,T.getLength(),w)},i.getEncodedBits=function(b){if(!s.isValid(b)||b<7)throw new Error("Invalid QR Code version");let x=b<<12;for(;e.getBCHDigit(x)-u>=0;)x^=l<<e.getBCHDigit(x)-u;return b<<12|x}})(tS)),tS}var aS={},IT;function V4(){if(IT)return aS;IT=1;const i=nf(),e=1335,t=21522,n=i.getBCHDigit(e);return aS.getEncodedBits=function(s,l){const u=s.bit<<3|l;let d=u<<10;for(;i.getBCHDigit(d)-n>=0;)d^=e<<i.getBCHDigit(d)-n;return(u<<10|d)^t},aS}var rS={},sS,PT;function j4(){if(PT)return sS;PT=1;const i=af();function e(t){this.mode=i.NUMERIC,this.data=t.toString()}return e.getBitsLength=function(n){return 10*Math.floor(n/3)+(n%3?n%3*3+1:0)},e.prototype.getLength=function(){return this.data.length},e.prototype.getBitsLength=function(){return e.getBitsLength(this.data.length)},e.prototype.write=function(n){let a,s,l;for(a=0;a+3<=this.data.length;a+=3)s=this.data.substr(a,3),l=parseInt(s,10),n.put(l,10);const u=this.data.length-a;u>0&&(s=this.data.substr(a),l=parseInt(s,10),n.put(l,u*3+1))},sS=e,sS}var oS,zT;function G4(){if(zT)return oS;zT=1;const i=af(),e=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"," ","$","%","*","+","-",".","/",":"];function t(n){this.mode=i.ALPHANUMERIC,this.data=n}return t.getBitsLength=function(a){return 11*Math.floor(a/2)+6*(a%2)},t.prototype.getLength=function(){return this.data.length},t.prototype.getBitsLength=function(){return t.getBitsLength(this.data.length)},t.prototype.write=function(a){let s;for(s=0;s+2<=this.data.length;s+=2){let l=e.indexOf(this.data[s])*45;l+=e.indexOf(this.data[s+1]),a.put(l,11)}this.data.length%2&&a.put(e.indexOf(this.data[s]),6)},oS=t,oS}var lS,BT;function q4(){if(BT)return lS;BT=1;const i=af();function e(t){this.mode=i.BYTE,typeof t=="string"?this.data=new TextEncoder().encode(t):this.data=new Uint8Array(t)}return e.getBitsLength=function(n){return n*8},e.prototype.getLength=function(){return this.data.length},e.prototype.getBitsLength=function(){return e.getBitsLength(this.data.length)},e.prototype.write=function(t){for(let n=0,a=this.data.length;n<a;n++)t.put(this.data[n],8)},lS=e,lS}var cS,FT;function X4(){if(FT)return cS;FT=1;const i=af(),e=nf();function t(n){this.mode=i.KANJI,this.data=n}return t.getBitsLength=function(a){return a*13},t.prototype.getLength=function(){return this.data.length},t.prototype.getBitsLength=function(){return t.getBitsLength(this.data.length)},t.prototype.write=function(n){let a;for(a=0;a<this.data.length;a++){let s=e.toSJIS(this.data[a]);if(s>=33088&&s<=40956)s-=33088;else if(s>=57408&&s<=60351)s-=49472;else throw new Error("Invalid SJIS character: "+this.data[a]+`
Make sure your charset is UTF-8`);s=(s>>>8&255)*192+(s&255),n.put(s,13)}},cS=t,cS}var uS={exports:{}},kT;function W4(){return kT||(kT=1,(function(i){var e={single_source_shortest_paths:function(t,n,a){var s={},l={};l[n]=0;var u=e.PriorityQueue.make();u.push(n,0);for(var d,p,g,y,_,b,x,T,w;!u.empty();){d=u.pop(),p=d.value,y=d.cost,_=t[p]||{};for(g in _)_.hasOwnProperty(g)&&(b=_[g],x=y+b,T=l[g],w=typeof l[g]>"u",(w||T>x)&&(l[g]=x,u.push(g,x),s[g]=p))}if(typeof a<"u"&&typeof l[a]>"u"){var S=["Could not find a path from ",n," to ",a,"."].join("");throw new Error(S)}return s},extract_shortest_path_from_predecessor_list:function(t,n){for(var a=[],s=n;s;)a.push(s),t[s],s=t[s];return a.reverse(),a},find_path:function(t,n,a){var s=e.single_source_shortest_paths(t,n,a);return e.extract_shortest_path_from_predecessor_list(s,a)},PriorityQueue:{make:function(t){var n=e.PriorityQueue,a={},s;t=t||{};for(s in n)n.hasOwnProperty(s)&&(a[s]=n[s]);return a.queue=[],a.sorter=t.sorter||n.default_sorter,a},default_sorter:function(t,n){return t.cost-n.cost},push:function(t,n){var a={value:t,cost:n};this.queue.push(a),this.queue.sort(this.sorter)},pop:function(){return this.queue.shift()},empty:function(){return this.queue.length===0}}};i.exports=e})(uS)),uS.exports}var HT;function Y4(){return HT||(HT=1,(function(i){const e=af(),t=j4(),n=G4(),a=q4(),s=X4(),l=C3(),u=nf(),d=W4();function p(S){return unescape(encodeURIComponent(S)).length}function g(S,C,N){const O=[];let P;for(;(P=S.exec(N))!==null;)O.push({data:P[0],index:P.index,mode:C,length:P[0].length});return O}function y(S){const C=g(l.NUMERIC,e.NUMERIC,S),N=g(l.ALPHANUMERIC,e.ALPHANUMERIC,S);let O,P;return u.isKanjiModeEnabled()?(O=g(l.BYTE,e.BYTE,S),P=g(l.KANJI,e.KANJI,S)):(O=g(l.BYTE_KANJI,e.BYTE,S),P=[]),C.concat(N,O,P).sort(function(z,H){return z.index-H.index}).map(function(z){return{data:z.data,mode:z.mode,length:z.length}})}function _(S,C){switch(C){case e.NUMERIC:return t.getBitsLength(S);case e.ALPHANUMERIC:return n.getBitsLength(S);case e.KANJI:return s.getBitsLength(S);case e.BYTE:return a.getBitsLength(S)}}function b(S){return S.reduce(function(C,N){const O=C.length-1>=0?C[C.length-1]:null;return O&&O.mode===N.mode?(C[C.length-1].data+=N.data,C):(C.push(N),C)},[])}function x(S){const C=[];for(let N=0;N<S.length;N++){const O=S[N];switch(O.mode){case e.NUMERIC:C.push([O,{data:O.data,mode:e.ALPHANUMERIC,length:O.length},{data:O.data,mode:e.BYTE,length:O.length}]);break;case e.ALPHANUMERIC:C.push([O,{data:O.data,mode:e.BYTE,length:O.length}]);break;case e.KANJI:C.push([O,{data:O.data,mode:e.BYTE,length:p(O.data)}]);break;case e.BYTE:C.push([{data:O.data,mode:e.BYTE,length:p(O.data)}])}}return C}function T(S,C){const N={},O={start:{}};let P=["start"];for(let U=0;U<S.length;U++){const z=S[U],H=[];for(let D=0;D<z.length;D++){const L=z[D],j=""+U+D;H.push(j),N[j]={node:L,lastCount:0},O[j]={};for(let W=0;W<P.length;W++){const X=P[W];N[X]&&N[X].node.mode===L.mode?(O[X][j]=_(N[X].lastCount+L.length,L.mode)-_(N[X].lastCount,L.mode),N[X].lastCount+=L.length):(N[X]&&(N[X].lastCount=L.length),O[X][j]=_(L.length,L.mode)+4+e.getCharCountIndicator(L.mode,C))}}P=H}for(let U=0;U<P.length;U++)O[P[U]].end=0;return{map:O,table:N}}function w(S,C){let N;const O=e.getBestModeForData(S);if(N=e.from(C,O),N!==e.BYTE&&N.bit<O.bit)throw new Error('"'+S+'" cannot be encoded with mode '+e.toString(N)+`.
 Suggested mode is: `+e.toString(O));switch(N===e.KANJI&&!u.isKanjiModeEnabled()&&(N=e.BYTE),N){case e.NUMERIC:return new t(S);case e.ALPHANUMERIC:return new n(S);case e.KANJI:return new s(S);case e.BYTE:return new a(S)}}i.fromArray=function(C){return C.reduce(function(N,O){return typeof O=="string"?N.push(w(O,null)):O.data&&N.push(w(O.data,O.mode)),N},[])},i.fromString=function(C,N){const O=y(C,u.isKanjiModeEnabled()),P=x(O),U=T(P,N),z=d.find_path(U.map,"start","end"),H=[];for(let D=1;D<z.length-1;D++)H.push(U.table[z[D]].node);return i.fromArray(b(H))},i.rawSplit=function(C){return i.fromArray(y(C,u.isKanjiModeEnabled()))}})(rS)),rS}var VT;function Z4(){if(VT)return Xx;VT=1;const i=nf(),e=LE(),t=U4(),n=L4(),a=I4(),s=P4(),l=z4(),u=T3(),d=k4(),p=H4(),g=V4(),y=af(),_=Y4();function b(U,z){const H=U.size,D=s.getPositions(z);for(let L=0;L<D.length;L++){const j=D[L][0],W=D[L][1];for(let X=-1;X<=7;X++)if(!(j+X<=-1||H<=j+X))for(let K=-1;K<=7;K++)W+K<=-1||H<=W+K||(X>=0&&X<=6&&(K===0||K===6)||K>=0&&K<=6&&(X===0||X===6)||X>=2&&X<=4&&K>=2&&K<=4?U.set(j+X,W+K,!0,!0):U.set(j+X,W+K,!1,!0))}}function x(U){const z=U.size;for(let H=8;H<z-8;H++){const D=H%2===0;U.set(H,6,D,!0),U.set(6,H,D,!0)}}function T(U,z){const H=a.getPositions(z);for(let D=0;D<H.length;D++){const L=H[D][0],j=H[D][1];for(let W=-2;W<=2;W++)for(let X=-2;X<=2;X++)W===-2||W===2||X===-2||X===2||W===0&&X===0?U.set(L+W,j+X,!0,!0):U.set(L+W,j+X,!1,!0)}}function w(U,z){const H=U.size,D=p.getEncodedBits(z);let L,j,W;for(let X=0;X<18;X++)L=Math.floor(X/3),j=X%3+H-8-3,W=(D>>X&1)===1,U.set(L,j,W,!0),U.set(j,L,W,!0)}function S(U,z,H){const D=U.size,L=g.getEncodedBits(z,H);let j,W;for(j=0;j<15;j++)W=(L>>j&1)===1,j<6?U.set(j,8,W,!0):j<8?U.set(j+1,8,W,!0):U.set(D-15+j,8,W,!0),j<8?U.set(8,D-j-1,W,!0):j<9?U.set(8,15-j-1+1,W,!0):U.set(8,15-j-1,W,!0);U.set(D-8,8,1,!0)}function C(U,z){const H=U.size;let D=-1,L=H-1,j=7,W=0;for(let X=H-1;X>0;X-=2)for(X===6&&X--;;){for(let K=0;K<2;K++)if(!U.isReserved(L,X-K)){let le=!1;W<z.length&&(le=(z[W]>>>j&1)===1),U.set(L,X-K,le),j--,j===-1&&(W++,j=7)}if(L+=D,L<0||H<=L){L-=D,D=-D;break}}}function N(U,z,H){const D=new t;H.forEach(function(K){D.put(K.mode.bit,4),D.put(K.getLength(),y.getCharCountIndicator(K.mode,U)),K.write(D)});const L=i.getSymbolTotalCodewords(U),j=u.getTotalCodewordsCount(U,z),W=(L-j)*8;for(D.getLengthInBits()+4<=W&&D.put(0,4);D.getLengthInBits()%8!==0;)D.putBit(0);const X=(W-D.getLengthInBits())/8;for(let K=0;K<X;K++)D.put(K%2?17:236,8);return O(D,U,z)}function O(U,z,H){const D=i.getSymbolTotalCodewords(z),L=u.getTotalCodewordsCount(z,H),j=D-L,W=u.getBlocksCount(z,H),X=D%W,K=W-X,le=Math.floor(D/W),k=Math.floor(j/W),Z=k+1,ne=le-k,pe=new d(ne);let ge=0;const J=new Array(W),ce=new Array(W);let Se=0;const Le=new Uint8Array(U.buffer);for(let yt=0;yt<W;yt++){const St=yt<K?k:Z;J[yt]=Le.slice(ge,ge+St),ce[yt]=pe.encode(J[yt]),ge+=St,Se=Math.max(Se,St)}const nt=new Uint8Array(D);let ve=0,Ce,Je;for(Ce=0;Ce<Se;Ce++)for(Je=0;Je<W;Je++)Ce<J[Je].length&&(nt[ve++]=J[Je][Ce]);for(Ce=0;Ce<ne;Ce++)for(Je=0;Je<W;Je++)nt[ve++]=ce[Je][Ce];return nt}function P(U,z,H,D){let L;if(Array.isArray(U))L=_.fromArray(U);else if(typeof U=="string"){let le=z;if(!le){const k=_.rawSplit(U);le=p.getBestVersionForData(k,H)}L=_.fromString(U,le||40)}else throw new Error("Invalid data");const j=p.getBestVersionForData(L,H);if(!j)throw new Error("The amount of data is too big to be stored in a QR Code");if(!z)z=j;else if(z<j)throw new Error(`
The chosen QR Code version cannot contain this amount of data.
Minimum version required to store current data is: `+j+`.
`);const W=N(z,H,L),X=i.getSymbolSize(z),K=new n(X);return b(K,z),x(K),T(K,z),S(K,H,0),z>=7&&w(K,z),C(K,W),isNaN(D)&&(D=l.getBestMask(K,S.bind(null,K,H))),l.applyMask(D,K),S(K,H,D),{modules:K,version:z,errorCorrectionLevel:H,maskPattern:D,segments:L}}return Xx.create=function(z,H){if(typeof z>"u"||z==="")throw new Error("No input text");let D=e.M,L,j;return typeof H<"u"&&(D=e.from(H.errorCorrectionLevel,e.M),L=p.from(H.version),j=l.from(H.maskPattern),H.toSJISFunc&&i.setToSJISFunction(H.toSJISFunc)),P(z,L,D,j)},Xx}var hS={},fS={},jT;function R3(){return jT||(jT=1,(function(i){function e(t){if(typeof t=="number"&&(t=t.toString()),typeof t!="string")throw new Error("Color should be defined as hex string");let n=t.slice().replace("#","").split("");if(n.length<3||n.length===5||n.length>8)throw new Error("Invalid hex color: "+t);(n.length===3||n.length===4)&&(n=Array.prototype.concat.apply([],n.map(function(s){return[s,s]}))),n.length===6&&n.push("F","F");const a=parseInt(n.join(""),16);return{r:a>>24&255,g:a>>16&255,b:a>>8&255,a:a&255,hex:"#"+n.slice(0,6).join("")}}i.getOptions=function(n){n||(n={}),n.color||(n.color={});const a=typeof n.margin>"u"||n.margin===null||n.margin<0?4:n.margin,s=n.width&&n.width>=21?n.width:void 0,l=n.scale||4;return{width:s,scale:s?4:l,margin:a,color:{dark:e(n.color.dark||"#000000ff"),light:e(n.color.light||"#ffffffff")},type:n.type,rendererOpts:n.rendererOpts||{}}},i.getScale=function(n,a){return a.width&&a.width>=n+a.margin*2?a.width/(n+a.margin*2):a.scale},i.getImageWidth=function(n,a){const s=i.getScale(n,a);return Math.floor((n+a.margin*2)*s)},i.qrToImageData=function(n,a,s){const l=a.modules.size,u=a.modules.data,d=i.getScale(l,s),p=Math.floor((l+s.margin*2)*d),g=s.margin*d,y=[s.color.light,s.color.dark];for(let _=0;_<p;_++)for(let b=0;b<p;b++){let x=(_*p+b)*4,T=s.color.light;if(_>=g&&b>=g&&_<p-g&&b<p-g){const w=Math.floor((_-g)/d),S=Math.floor((b-g)/d);T=y[u[w*l+S]?1:0]}n[x++]=T.r,n[x++]=T.g,n[x++]=T.b,n[x]=T.a}}})(fS)),fS}var GT;function K4(){return GT||(GT=1,(function(i){const e=R3();function t(a,s,l){a.clearRect(0,0,s.width,s.height),s.style||(s.style={}),s.height=l,s.width=l,s.style.height=l+"px",s.style.width=l+"px"}function n(){try{return document.createElement("canvas")}catch{throw new Error("You need to specify a canvas element")}}i.render=function(s,l,u){let d=u,p=l;typeof d>"u"&&(!l||!l.getContext)&&(d=l,l=void 0),l||(p=n()),d=e.getOptions(d);const g=e.getImageWidth(s.modules.size,d),y=p.getContext("2d"),_=y.createImageData(g,g);return e.qrToImageData(_.data,s,d),t(y,p,g),y.putImageData(_,0,0),p},i.renderToDataURL=function(s,l,u){let d=u;typeof d>"u"&&(!l||!l.getContext)&&(d=l,l=void 0),d||(d={});const p=i.render(s,l,d),g=d.type||"image/png",y=d.rendererOpts||{};return p.toDataURL(g,y.quality)}})(hS)),hS}var dS={},qT;function J4(){if(qT)return dS;qT=1;const i=R3();function e(a,s){const l=a.a/255,u=s+'="'+a.hex+'"';return l<1?u+" "+s+'-opacity="'+l.toFixed(2).slice(1)+'"':u}function t(a,s,l){let u=a+s;return typeof l<"u"&&(u+=" "+l),u}function n(a,s,l){let u="",d=0,p=!1,g=0;for(let y=0;y<a.length;y++){const _=Math.floor(y%s),b=Math.floor(y/s);!_&&!p&&(p=!0),a[y]?(g++,y>0&&_>0&&a[y-1]||(u+=p?t("M",_+l,.5+b+l):t("m",d,0),d=0,p=!1),_+1<s&&a[y+1]||(u+=t("h",g),g=0)):d++}return u}return dS.render=function(s,l,u){const d=i.getOptions(l),p=s.modules.size,g=s.modules.data,y=p+d.margin*2,_=d.color.light.a?"<path "+e(d.color.light,"fill")+' d="M0 0h'+y+"v"+y+'H0z"/>':"",b="<path "+e(d.color.dark,"stroke")+' d="'+n(g,p,d.margin)+'"/>',x='viewBox="0 0 '+y+" "+y+'"',w='<svg xmlns="http://www.w3.org/2000/svg" '+(d.width?'width="'+d.width+'" height="'+d.width+'" ':"")+x+' shape-rendering="crispEdges">'+_+b+`</svg>
`;return typeof u=="function"&&u(null,w),w},dS}var XT;function Q4(){if(XT)return yd;XT=1;const i=D4(),e=Z4(),t=K4(),n=J4();function a(s,l,u,d,p){const g=[].slice.call(arguments,1),y=g.length,_=typeof g[y-1]=="function";if(!_&&!i())throw new Error("Callback required as last argument");if(_){if(y<2)throw new Error("Too few arguments provided");y===2?(p=u,u=l,l=d=void 0):y===3&&(l.getContext&&typeof p>"u"?(p=d,d=void 0):(p=d,d=u,u=l,l=void 0))}else{if(y<1)throw new Error("Too few arguments provided");return y===1?(u=l,l=d=void 0):y===2&&!l.getContext&&(d=u,u=l,l=void 0),new Promise(function(b,x){try{const T=e.create(u,d);b(s(T,l,d))}catch(T){x(T)}})}try{const b=e.create(u,d);p(null,s(b,l,d))}catch(b){p(b)}}return yd.create=e.create,yd.toCanvas=a.bind(null,t.render),yd.toDataURL=a.bind(null,t.renderToDataURL),yd.toString=a.bind(null,function(s,l,u){return n.render(s,u)}),yd}var $4=Q4();const eI=xu($4),N3=({project:i,onClose:e})=>{if(!i)return null;const t=async(n,a)=>{try{const{data:s,error:l}=await Hn.storage.from("project-files").download(n);if(l)throw l;const u=URL.createObjectURL(s),d=document.createElement("a");d.href=u,d.download=a,document.body.appendChild(d),d.click(),document.body.removeChild(d),URL.revokeObjectURL(u)}catch(s){console.error("Download error:",s),alert("Error downloading file: "+s.message)}};return UE.createPortal(q.jsx("div",{className:"fixed inset-0 z-[100] flex items-center justify-center p-4 bg-black/60 backdrop-blur-sm animate-fade-in",children:q.jsxs("div",{className:"bg-bgSurface border border-border rounded-lg p-8 w-full max-w-2xl max-h-[90vh] overflow-y-auto relative shadow-2xl transition-colors duration-300",children:[q.jsx("button",{onClick:e,className:"absolute top-4 right-4 text-textMuted hover:text-textMain transition-colors text-xl",children:""}),q.jsxs("div",{className:"mb-6 border-b border-border pb-4",children:[q.jsx("span",{className:`inline-block px-3 py-1 rounded-full text-xs font-bold uppercase tracking-wider mb-2 
                        ${i.status==="pending"?"bg-yellow-500/10 text-yellow-500 border border-yellow-500/20":i.status==="approved"?"bg-green-500/10 text-green-500 border border-green-500/20":"bg-bgBody text-textMuted border border-border"}`,children:i.status}),q.jsx("h2",{className:"text-3xl font-bold text-textMain leading-tight",children:i.title||"Untitled Project"}),q.jsxs("p",{className:"text-textMuted text-sm mt-1",children:["Requested on ",new Date(i.created_at).toLocaleDateString()]})]}),q.jsxs("div",{className:"space-y-6",children:[q.jsxs("div",{children:[q.jsx("h3",{className:"text-xs uppercase text-textMuted font-bold mb-2",children:"Description"}),q.jsx("div",{className:"bg-bgBody p-4 rounded text-textMain text-sm leading-relaxed whitespace-pre-wrap border border-border",children:i.description})]}),q.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[q.jsxs("div",{children:[q.jsx("h3",{className:"text-xs uppercase text-textMuted font-bold mb-2",children:"Budget"}),q.jsx("p",{className:"text-textMain font-mono",children:i.budget||"Not specified"})]}),q.jsxs("div",{children:[q.jsx("h3",{className:"text-xs uppercase text-textMuted font-bold mb-2",children:"Keywords"}),q.jsx("div",{className:"flex flex-wrap gap-2",children:i.keywords&&i.keywords.map((n,a)=>q.jsx("span",{className:"bg-bgBody border border-border px-2 py-1 rounded text-xs text-textMuted",children:n},a))})]})]}),q.jsxs("div",{children:[q.jsx("h3",{className:"text-xs uppercase text-textMuted font-bold mb-2",children:"Attached Files"}),q.jsxs("div",{className:"flex flex-col gap-2",children:[i.pdf_path?q.jsxs("div",{className:"flex items-center gap-3 p-3 bg-bgBody rounded border border-border",children:[q.jsx("span",{className:"text-red-400",children:""}),q.jsx("span",{className:"text-sm text-textMain truncate flex-1",children:"PDF Specification"}),q.jsx("button",{onClick:()=>t(i.pdf_path,`${i.title||"project"}_spec.pdf`),className:"text-xs bg-primary text-white px-3 py-1 rounded hover:opacity-80 transition-opacity font-bold",children:" Download"})]}):q.jsx("p",{className:"text-sm text-textMuted italic",children:"No PDF uploaded"}),i.stl_path?q.jsxs("div",{className:"flex items-center gap-3 p-3 bg-bgBody rounded border border-border",children:[q.jsx("span",{className:"text-blue-400",children:""}),q.jsx("span",{className:"text-sm text-textMain truncate flex-1",children:"3D Model (STL)"}),q.jsx("button",{onClick:()=>t(i.stl_path,`${i.title||"project"}_model.stl`),className:"text-xs bg-primary text-white px-3 py-1 rounded hover:opacity-80 transition-opacity font-bold",children:" Download"})]}):q.jsx("p",{className:"text-sm text-textMuted italic",children:"No 3D Model uploaded"})]})]})]}),q.jsx("div",{className:"mt-8 pt-6 border-t border-border flex justify-end",children:q.jsx("button",{onClick:e,className:"bg-textMain text-bgSurface font-bold py-2 px-6 rounded hover:opacity-80 transition-opacity",children:"Close"})})]})}),document.body)},tI=({user:i,isVisible:e})=>{var nn,Vt;const[t,n]=re.useState(!0),[a,s]=re.useState(""),[l,u]=re.useState(""),[d,p]=re.useState(""),[g,y]=re.useState(""),[_,b]=re.useState(""),[x,T]=re.useState([]),[w,S]=re.useState(!1),[C,N]=re.useState(null),[O,P]=re.useState(!1),[U,z]=re.useState(null),[H,D]=re.useState({title:"",description:"",budget:""}),[L,j]=re.useState(!1),[W,X]=re.useState(!1),[K,le]=re.useState(""),[k,Z]=re.useState(""),[ne,pe]=re.useState(""),[ge,J]=re.useState([]);re.useEffect(()=>{i&&(St(),Ce(),ce())},[i]);const ce=async()=>{try{const{data:xe,error:ze}=await Hn.auth.mfa.listFactors();if(ze)throw ze;J(xe.all||[])}catch(xe){console.error("Error fetching MFA factors:",xe)}},Se=ge.some(xe=>xe.status==="verified"),Le=async(xe,ze)=>{if(xe.stopPropagation(),!!confirm("Are you sure you want to delete this request?"))try{S(!0);const je=[];if(ze.pdf_path&&je.push(ze.pdf_path),ze.stl_path&&je.push(ze.stl_path),je.length>0){const{error:ie}=await Hn.storage.from("project-files").remove(je);ie&&console.error("Error deleting files:",ie)}const{error:ot}=await Hn.from("projects").delete().eq("id",ze.id);if(ot)throw ot;Ce()}catch(je){console.error("Error deleting request:",je),alert("Error deleting request: "+je.message)}finally{S(!1)}},nt=(xe,ze)=>{xe.stopPropagation(),z(ze),D({title:ze.title,description:ze.description,budget:ze.budget||""}),P(!0)},ve=async xe=>{xe.preventDefault();try{j(!0);const{error:ze}=await Hn.from("projects").update({title:H.title,description:H.description,budget:H.budget}).eq("id",U.id);if(ze)throw ze;P(!1),Ce()}catch(ze){alert("Error updating request: "+ze.message)}finally{j(!1)}},Ce=async()=>{try{S(!0);const{data:xe,error:ze}=await Hn.from("projects").select("*").eq("user_id",i==null?void 0:i.id).order("created_at",{ascending:!1});if(ze)throw ze;T(xe||[])}catch(xe){console.error("Error fetching user projects:",xe)}finally{S(!1)}},Je=async()=>{try{n(!0);const{data:xe,error:ze}=await Hn.auth.mfa.enroll({factorType:"totp"});if(ze)throw ze;Z(xe.id);const je=await eI.toDataURL(xe.totp.uri);le(je),X(!0)}catch(xe){b("Error starting MFA setup: "+xe.message)}finally{n(!1)}},yt=async()=>{try{n(!0);const{data:xe,error:ze}=await Hn.auth.mfa.challenge({factorId:k});if(ze)throw ze;const{data:je,error:ot}=await Hn.auth.mfa.verify({factorId:k,challengeId:xe.id,code:ne});if(ot)throw ot;b("Two-Factor Authentication Enabled Successfully!"),X(!1),pe(""),ce()}catch(xe){b("Error verifying MFA: "+xe.message)}finally{n(!1)}},St=async()=>{try{n(!0);const{data:xe,error:ze}=await Hn.from("profiles").select("full_name, bio, website, avatar_url, email").eq("id",i==null?void 0:i.id).single();if(ze&&ze.code!=="PGRST116")throw ze;xe&&(s(xe.full_name||""),u(xe.bio||""),p(xe.website||""),y(xe.avatar_url||""))}catch(xe){console.error("Error loading profile:",xe.message)}finally{n(!1)}},$t=async xe=>{xe.preventDefault();try{n(!0),b("");const ze={id:i==null?void 0:i.id,full_name:a,bio:l,website:d,avatar_url:g,email:i==null?void 0:i.email,updated_at:new Date},{error:je}=await Hn.from("profiles").upsert(ze);if(je)throw je;b("Profile updated successfully!"),a&&await Hn.auth.updateUser({data:{full_name:a}})}catch(ze){b("Error updating profile: "+ze.message)}finally{n(!1)}};return q.jsx("div",{className:`w-full h-full p-6 md:p-12 ${e?"block":"hidden"}`,children:q.jsxs("div",{className:"flex flex-col md:flex-row h-full w-full overflow-hidden bg-bgBody text-textMain transition-colors duration-300 rounded-xl shadow-2xl border border-border",children:[q.jsxs("div",{className:"flex-none w-full md:w-1/3 min-w-[300px] border-b md:border-b-0 md:border-r border-border p-8 md:p-12 flex flex-col items-center justify-center bg-bgSurface/50 backdrop-blur-sm relative z-10 transition-colors duration-300",children:[q.jsx("div",{className:"w-32 h-32 rounded-full bg-gradient-to-tr from-primary to-purple-600 p-[2px] mb-6 shadow-2xl",children:q.jsx("div",{className:"w-full h-full rounded-full bg-bgSurface flex items-center justify-center overflow-hidden border-4 border-bgSurface",children:g?q.jsx("img",{src:g,alt:"Avatar",className:"w-full h-full object-cover"}):q.jsx("span",{className:"text-4xl font-bold bg-clip-text text-transparent bg-gradient-to-r from-primary to-purple-600",children:((nn=i==null?void 0:i.email)==null?void 0:nn.charAt(0).toUpperCase())||"U"})})}),q.jsx("h2",{className:"text-2xl font-bold mb-2 text-primary tracking-wide text-center",children:a||((Vt=i==null?void 0:i.user_metadata)==null?void 0:Vt.full_name)||"Innovator"}),q.jsx("p",{className:"text-textMuted text-sm mb-8 font-mono bg-bgBody px-3 py-1 rounded-full border border-border",children:i==null?void 0:i.email}),q.jsxs("form",{onSubmit:$t,className:"w-full max-w-xs space-y-4 mb-8",children:[q.jsxs("div",{children:[q.jsx("label",{className:"text-xs uppercase text-textMuted block mb-1",children:"Full Name"}),q.jsx("input",{type:"text",value:a,onChange:xe=>s(xe.target.value),className:"w-full bg-bgBody border border-border p-2 rounded text-textMain focus:border-primary focus:outline-none transition-colors text-sm"})]}),q.jsxs("div",{children:[q.jsx("label",{className:"text-xs uppercase text-textMuted block mb-1",children:"Bio"}),q.jsx("textarea",{value:l,onChange:xe=>u(xe.target.value),rows:3,className:"w-full bg-bgBody border border-border p-2 rounded text-textMain focus:border-primary focus:outline-none transition-colors text-sm resize-none"})]}),q.jsx("button",{type:"submit",disabled:t,className:"w-full py-2 bg-textMain text-bgSurface font-bold rounded hover:opacity-80 transition-opacity text-sm",children:t?"Saving...":"Update Profile"})]}),q.jsx("div",{className:"w-full max-w-xs space-y-4",children:(i==null?void 0:i.email)==="despux@gmail.com"&&q.jsxs("div",{className:`p-4 rounded-lg border transition-all ${Se?"bg-green-500/10 border-green-500/30":"bg-bgBody border-border hover:border-primary/50"}`,children:[q.jsxs("div",{className:"flex items-center justify-between mb-2",children:[q.jsxs("div",{className:"flex items-center gap-2",children:[q.jsx("span",{className:"text-xl",children:Se?"":""}),q.jsx("h3",{className:"font-bold text-sm text-textMain",children:"Security"})]}),Se&&q.jsx("span",{className:"text-xs text-green-500 font-bold",children:"VERIFIED"})]}),Se?q.jsx("p",{className:"text-xs text-textMuted text-center",children:"Your account is secured with two-factor authentication."}):W?q.jsxs("div",{className:"space-y-4 animate-fade-in",children:[K&&q.jsx("div",{className:"flex justify-center bg-white p-2 rounded-lg",children:q.jsx("img",{src:K,alt:"2FA QR Code",className:"w-32 h-32"})}),q.jsx("input",{type:"text",placeholder:"Enter 6-digit code",className:"w-full bg-bgBody border border-border p-2 rounded text-textMain text-center tracking-[0.5em] font-mono focus:border-primary focus:outline-none transition-colors",maxLength:6,value:ne,onChange:xe=>pe(xe.target.value)}),q.jsxs("div",{className:"flex gap-2",children:[q.jsx("button",{onClick:()=>X(!1),className:"flex-1 py-2 text-xs text-textMuted hover:text-textMain",children:"Cancel"}),q.jsx("button",{onClick:yt,disabled:ne.length!==6,className:"flex-1 py-2 bg-primary text-white text-xs font-bold rounded hover:bg-blue-600 disabled:opacity-50 disabled:cursor-not-allowed",children:"Verify"})]})]}):q.jsx("button",{onClick:Je,className:"w-full py-2 bg-primary/10 hover:bg-primary/20 text-primary text-xs font-bold rounded transition-colors uppercase tracking-wider",children:"Enable 2FA"})]})})]}),q.jsxs("div",{className:"flex-1 bg-bgBody/80 p-8 md:p-12 overflow-y-auto w-full no-scrollbar relative z-0 transition-colors duration-300",children:[q.jsxs("h3",{className:"text-xl font-bold mb-6 flex items-center gap-3 text-textMain uppercase tracking-widest border-b border-border pb-4",children:[q.jsx("span",{className:"text-primary",children:"My Request History"}),q.jsx("span",{className:"text-xs bg-primary/10 text-primary px-2 py-1 rounded-full",children:x.length})]}),w?q.jsx("div",{className:"text-textMuted animate-pulse",children:"Loading history..."}):x.length===0?q.jsxs("div",{className:"text-center py-20 border-2 border-dashed border-border rounded-xl",children:[q.jsx("p",{className:"text-textMuted mb-4",children:"No project requests found."}),q.jsx("button",{onClick:()=>window.dispatchEvent(new CustomEvent("navigate",{detail:"project_request"})),className:"text-primary hover:underline text-sm font-bold",children:"START NEW PROJECT"})]}):q.jsx("div",{className:"space-y-4",children:x.map(xe=>q.jsxs("div",{onClick:()=>N(xe),className:"group relative bg-bgSurface border border-border rounded-xl p-6 hover:border-primary/50 transition-all duration-300 cursor-pointer shadow-sm hover:shadow-lg hover:translate-x-1",children:[q.jsxs("div",{className:"flex justify-between items-start mb-2",children:[q.jsx("h4",{className:"font-bold text-lg text-textMain group-hover:text-primary transition-colors",children:xe.title}),q.jsx("span",{className:"text-xs font-mono text-textMuted",children:new Date(xe.created_at).toLocaleDateString()})]}),q.jsx("p",{className:"text-sm text-textMuted line-clamp-2 mb-4",children:xe.description}),q.jsx("div",{className:"flex items-center justify-between",children:q.jsxs("div",{className:"flex items-center gap-4",children:[xe.budget&&q.jsxs("span",{className:"text-xs font-bold text-textMain bg-bgBody px-2 py-1 rounded",children:["$",xe.budget]}),q.jsx("span",{className:`text-[10px] font-bold uppercase px-2 py-1 rounded-full border ${xe.status==="approved"?"bg-green-500/10 text-green-500 border-green-500/20":xe.status==="rejected"?"bg-red-500/10 text-red-500 border-red-500/20":"bg-yellow-500/10 text-yellow-500 border-yellow-500/20"}`,children:xe.status||"pending"}),q.jsxs("div",{className:"flex gap-2",children:[q.jsx("button",{onClick:ze=>nt(ze,xe),className:"p-1.5 hover:bg-bgBody rounded text-blue-400 hover:text-blue-300 transition-colors",title:"Edit Request",children:""}),q.jsx("button",{onClick:ze=>Le(ze,xe.id),className:"p-1.5 hover:bg-bgBody rounded text-red-500 hover:text-red-400 transition-colors",title:"Delete Request",children:""})]}),q.jsx("span",{className:"text-textMuted/20 group-hover:text-primary transition-colors",children:""})]})})]},xe.id))})]}),C&&q.jsx(N3,{project:C,onClose:()=>N(null)}),O&&UE.createPortal(q.jsx("div",{className:"fixed inset-0 z-[100] flex items-center justify-center p-4 bg-black/60 backdrop-blur-sm",children:q.jsxs("div",{className:"bg-bgSurface border border-border rounded-lg p-8 w-full max-w-lg animate-fade-in-up shadow-2xl transition-colors duration-300",children:[q.jsx("h2",{className:"text-xl font-bold text-textMain mb-6",children:"Edit Request"}),q.jsxs("form",{onSubmit:ve,className:"flex flex-col gap-4",children:[q.jsxs("div",{children:[q.jsx("label",{className:"text-xs uppercase text-textMuted block mb-1",children:"Title"}),q.jsx("input",{className:"w-full bg-bgBody border border-border p-2 rounded text-textMain focus:border-primary focus:outline-none transition-colors",value:H.title,onChange:xe=>D({...H,title:xe.target.value}),required:!0})]}),q.jsxs("div",{children:[q.jsx("label",{className:"text-xs uppercase text-textMuted block mb-1",children:"Budget"}),q.jsx("input",{className:"w-full bg-bgBody border border-border p-2 rounded text-textMain focus:border-primary focus:outline-none transition-colors",value:H.budget,onChange:xe=>D({...H,budget:xe.target.value})})]}),q.jsxs("div",{children:[q.jsx("label",{className:"text-xs uppercase text-textMuted block mb-1",children:"Description"}),q.jsx("textarea",{className:"w-full bg-bgBody border border-border p-2 rounded text-textMain h-24 focus:border-primary focus:outline-none transition-colors",value:H.description,onChange:xe=>D({...H,description:xe.target.value}),required:!0})]}),q.jsxs("div",{className:"flex justify-end gap-3 mt-4",children:[q.jsx("button",{type:"button",onClick:()=>P(!1),className:"px-4 py-2 text-textMuted hover:text-textMain",children:"Cancel"}),q.jsx("button",{type:"submit",disabled:L,className:"px-6 py-2 bg-primary text-white font-bold rounded hover:opacity-90 transition-colors disabled:opacity-50",children:L?"Saving...":"Save Changes"})]})]})]})}),document.body)]})})};var pS={exports:{}},mS,WT;function nI(){if(WT)return mS;WT=1;var i="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";return mS=i,mS}var gS,YT;function iI(){if(YT)return gS;YT=1;var i=nI();function e(){}function t(){}return t.resetWarningCache=e,gS=function(){function n(l,u,d,p,g,y){if(y!==i){var _=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw _.name="Invariant Violation",_}}n.isRequired=n;function a(){return n}var s={array:n,bigint:n,bool:n,func:n,number:n,object:n,string:n,symbol:n,any:n,arrayOf:a,element:n,elementType:n,instanceOf:a,node:n,objectOf:a,oneOf:a,oneOfType:a,shape:a,exact:a,checkPropTypes:t,resetWarningCache:e};return s.PropTypes=s,s},gS}var ZT;function aI(){return ZT||(ZT=1,pS.exports=iI()()),pS.exports}var rI=aI();const vi=xu(rI),sI=new Map([["1km","application/vnd.1000minds.decision-model+xml"],["3dml","text/vnd.in3d.3dml"],["3ds","image/x-3ds"],["3g2","video/3gpp2"],["3gp","video/3gp"],["3gpp","video/3gpp"],["3mf","model/3mf"],["7z","application/x-7z-compressed"],["7zip","application/x-7z-compressed"],["123","application/vnd.lotus-1-2-3"],["aab","application/x-authorware-bin"],["aac","audio/x-acc"],["aam","application/x-authorware-map"],["aas","application/x-authorware-seg"],["abw","application/x-abiword"],["ac","application/vnd.nokia.n-gage.ac+xml"],["ac3","audio/ac3"],["acc","application/vnd.americandynamics.acc"],["ace","application/x-ace-compressed"],["acu","application/vnd.acucobol"],["acutc","application/vnd.acucorp"],["adp","audio/adpcm"],["aep","application/vnd.audiograph"],["afm","application/x-font-type1"],["afp","application/vnd.ibm.modcap"],["ahead","application/vnd.ahead.space"],["ai","application/pdf"],["aif","audio/x-aiff"],["aifc","audio/x-aiff"],["aiff","audio/x-aiff"],["air","application/vnd.adobe.air-application-installer-package+zip"],["ait","application/vnd.dvb.ait"],["ami","application/vnd.amiga.ami"],["amr","audio/amr"],["apk","application/vnd.android.package-archive"],["apng","image/apng"],["appcache","text/cache-manifest"],["application","application/x-ms-application"],["apr","application/vnd.lotus-approach"],["arc","application/x-freearc"],["arj","application/x-arj"],["asc","application/pgp-signature"],["asf","video/x-ms-asf"],["asm","text/x-asm"],["aso","application/vnd.accpac.simply.aso"],["asx","video/x-ms-asf"],["atc","application/vnd.acucorp"],["atom","application/atom+xml"],["atomcat","application/atomcat+xml"],["atomdeleted","application/atomdeleted+xml"],["atomsvc","application/atomsvc+xml"],["atx","application/vnd.antix.game-component"],["au","audio/x-au"],["avi","video/x-msvideo"],["avif","image/avif"],["aw","application/applixware"],["azf","application/vnd.airzip.filesecure.azf"],["azs","application/vnd.airzip.filesecure.azs"],["azv","image/vnd.airzip.accelerator.azv"],["azw","application/vnd.amazon.ebook"],["b16","image/vnd.pco.b16"],["bat","application/x-msdownload"],["bcpio","application/x-bcpio"],["bdf","application/x-font-bdf"],["bdm","application/vnd.syncml.dm+wbxml"],["bdoc","application/x-bdoc"],["bed","application/vnd.realvnc.bed"],["bh2","application/vnd.fujitsu.oasysprs"],["bin","application/octet-stream"],["blb","application/x-blorb"],["blorb","application/x-blorb"],["bmi","application/vnd.bmi"],["bmml","application/vnd.balsamiq.bmml+xml"],["bmp","image/bmp"],["book","application/vnd.framemaker"],["box","application/vnd.previewsystems.box"],["boz","application/x-bzip2"],["bpk","application/octet-stream"],["bpmn","application/octet-stream"],["bsp","model/vnd.valve.source.compiled-map"],["btif","image/prs.btif"],["buffer","application/octet-stream"],["bz","application/x-bzip"],["bz2","application/x-bzip2"],["c","text/x-c"],["c4d","application/vnd.clonk.c4group"],["c4f","application/vnd.clonk.c4group"],["c4g","application/vnd.clonk.c4group"],["c4p","application/vnd.clonk.c4group"],["c4u","application/vnd.clonk.c4group"],["c11amc","application/vnd.cluetrust.cartomobile-config"],["c11amz","application/vnd.cluetrust.cartomobile-config-pkg"],["cab","application/vnd.ms-cab-compressed"],["caf","audio/x-caf"],["cap","application/vnd.tcpdump.pcap"],["car","application/vnd.curl.car"],["cat","application/vnd.ms-pki.seccat"],["cb7","application/x-cbr"],["cba","application/x-cbr"],["cbr","application/x-cbr"],["cbt","application/x-cbr"],["cbz","application/x-cbr"],["cc","text/x-c"],["cco","application/x-cocoa"],["cct","application/x-director"],["ccxml","application/ccxml+xml"],["cdbcmsg","application/vnd.contact.cmsg"],["cda","application/x-cdf"],["cdf","application/x-netcdf"],["cdfx","application/cdfx+xml"],["cdkey","application/vnd.mediastation.cdkey"],["cdmia","application/cdmi-capability"],["cdmic","application/cdmi-container"],["cdmid","application/cdmi-domain"],["cdmio","application/cdmi-object"],["cdmiq","application/cdmi-queue"],["cdr","application/cdr"],["cdx","chemical/x-cdx"],["cdxml","application/vnd.chemdraw+xml"],["cdy","application/vnd.cinderella"],["cer","application/pkix-cert"],["cfs","application/x-cfs-compressed"],["cgm","image/cgm"],["chat","application/x-chat"],["chm","application/vnd.ms-htmlhelp"],["chrt","application/vnd.kde.kchart"],["cif","chemical/x-cif"],["cii","application/vnd.anser-web-certificate-issue-initiation"],["cil","application/vnd.ms-artgalry"],["cjs","application/node"],["cla","application/vnd.claymore"],["class","application/octet-stream"],["clkk","application/vnd.crick.clicker.keyboard"],["clkp","application/vnd.crick.clicker.palette"],["clkt","application/vnd.crick.clicker.template"],["clkw","application/vnd.crick.clicker.wordbank"],["clkx","application/vnd.crick.clicker"],["clp","application/x-msclip"],["cmc","application/vnd.cosmocaller"],["cmdf","chemical/x-cmdf"],["cml","chemical/x-cml"],["cmp","application/vnd.yellowriver-custom-menu"],["cmx","image/x-cmx"],["cod","application/vnd.rim.cod"],["coffee","text/coffeescript"],["com","application/x-msdownload"],["conf","text/plain"],["cpio","application/x-cpio"],["cpp","text/x-c"],["cpt","application/mac-compactpro"],["crd","application/x-mscardfile"],["crl","application/pkix-crl"],["crt","application/x-x509-ca-cert"],["crx","application/x-chrome-extension"],["cryptonote","application/vnd.rig.cryptonote"],["csh","application/x-csh"],["csl","application/vnd.citationstyles.style+xml"],["csml","chemical/x-csml"],["csp","application/vnd.commonspace"],["csr","application/octet-stream"],["css","text/css"],["cst","application/x-director"],["csv","text/csv"],["cu","application/cu-seeme"],["curl","text/vnd.curl"],["cww","application/prs.cww"],["cxt","application/x-director"],["cxx","text/x-c"],["dae","model/vnd.collada+xml"],["daf","application/vnd.mobius.daf"],["dart","application/vnd.dart"],["dataless","application/vnd.fdsn.seed"],["davmount","application/davmount+xml"],["dbf","application/vnd.dbf"],["dbk","application/docbook+xml"],["dcr","application/x-director"],["dcurl","text/vnd.curl.dcurl"],["dd2","application/vnd.oma.dd2+xml"],["ddd","application/vnd.fujixerox.ddd"],["ddf","application/vnd.syncml.dmddf+xml"],["dds","image/vnd.ms-dds"],["deb","application/x-debian-package"],["def","text/plain"],["deploy","application/octet-stream"],["der","application/x-x509-ca-cert"],["dfac","application/vnd.dreamfactory"],["dgc","application/x-dgc-compressed"],["dic","text/x-c"],["dir","application/x-director"],["dis","application/vnd.mobius.dis"],["disposition-notification","message/disposition-notification"],["dist","application/octet-stream"],["distz","application/octet-stream"],["djv","image/vnd.djvu"],["djvu","image/vnd.djvu"],["dll","application/octet-stream"],["dmg","application/x-apple-diskimage"],["dmn","application/octet-stream"],["dmp","application/vnd.tcpdump.pcap"],["dms","application/octet-stream"],["dna","application/vnd.dna"],["doc","application/msword"],["docm","application/vnd.ms-word.template.macroEnabled.12"],["docx","application/vnd.openxmlformats-officedocument.wordprocessingml.document"],["dot","application/msword"],["dotm","application/vnd.ms-word.template.macroEnabled.12"],["dotx","application/vnd.openxmlformats-officedocument.wordprocessingml.template"],["dp","application/vnd.osgi.dp"],["dpg","application/vnd.dpgraph"],["dra","audio/vnd.dra"],["drle","image/dicom-rle"],["dsc","text/prs.lines.tag"],["dssc","application/dssc+der"],["dtb","application/x-dtbook+xml"],["dtd","application/xml-dtd"],["dts","audio/vnd.dts"],["dtshd","audio/vnd.dts.hd"],["dump","application/octet-stream"],["dvb","video/vnd.dvb.file"],["dvi","application/x-dvi"],["dwd","application/atsc-dwd+xml"],["dwf","model/vnd.dwf"],["dwg","image/vnd.dwg"],["dxf","image/vnd.dxf"],["dxp","application/vnd.spotfire.dxp"],["dxr","application/x-director"],["ear","application/java-archive"],["ecelp4800","audio/vnd.nuera.ecelp4800"],["ecelp7470","audio/vnd.nuera.ecelp7470"],["ecelp9600","audio/vnd.nuera.ecelp9600"],["ecma","application/ecmascript"],["edm","application/vnd.novadigm.edm"],["edx","application/vnd.novadigm.edx"],["efif","application/vnd.picsel"],["ei6","application/vnd.pg.osasli"],["elc","application/octet-stream"],["emf","image/emf"],["eml","message/rfc822"],["emma","application/emma+xml"],["emotionml","application/emotionml+xml"],["emz","application/x-msmetafile"],["eol","audio/vnd.digital-winds"],["eot","application/vnd.ms-fontobject"],["eps","application/postscript"],["epub","application/epub+zip"],["es","application/ecmascript"],["es3","application/vnd.eszigno3+xml"],["esa","application/vnd.osgi.subsystem"],["esf","application/vnd.epson.esf"],["et3","application/vnd.eszigno3+xml"],["etx","text/x-setext"],["eva","application/x-eva"],["evy","application/x-envoy"],["exe","application/octet-stream"],["exi","application/exi"],["exp","application/express"],["exr","image/aces"],["ext","application/vnd.novadigm.ext"],["ez","application/andrew-inset"],["ez2","application/vnd.ezpix-album"],["ez3","application/vnd.ezpix-package"],["f","text/x-fortran"],["f4v","video/mp4"],["f77","text/x-fortran"],["f90","text/x-fortran"],["fbs","image/vnd.fastbidsheet"],["fcdt","application/vnd.adobe.formscentral.fcdt"],["fcs","application/vnd.isac.fcs"],["fdf","application/vnd.fdf"],["fdt","application/fdt+xml"],["fe_launch","application/vnd.denovo.fcselayout-link"],["fg5","application/vnd.fujitsu.oasysgp"],["fgd","application/x-director"],["fh","image/x-freehand"],["fh4","image/x-freehand"],["fh5","image/x-freehand"],["fh7","image/x-freehand"],["fhc","image/x-freehand"],["fig","application/x-xfig"],["fits","image/fits"],["flac","audio/x-flac"],["fli","video/x-fli"],["flo","application/vnd.micrografx.flo"],["flv","video/x-flv"],["flw","application/vnd.kde.kivio"],["flx","text/vnd.fmi.flexstor"],["fly","text/vnd.fly"],["fm","application/vnd.framemaker"],["fnc","application/vnd.frogans.fnc"],["fo","application/vnd.software602.filler.form+xml"],["for","text/x-fortran"],["fpx","image/vnd.fpx"],["frame","application/vnd.framemaker"],["fsc","application/vnd.fsc.weblaunch"],["fst","image/vnd.fst"],["ftc","application/vnd.fluxtime.clip"],["fti","application/vnd.anser-web-funds-transfer-initiation"],["fvt","video/vnd.fvt"],["fxp","application/vnd.adobe.fxp"],["fxpl","application/vnd.adobe.fxp"],["fzs","application/vnd.fuzzysheet"],["g2w","application/vnd.geoplan"],["g3","image/g3fax"],["g3w","application/vnd.geospace"],["gac","application/vnd.groove-account"],["gam","application/x-tads"],["gbr","application/rpki-ghostbusters"],["gca","application/x-gca-compressed"],["gdl","model/vnd.gdl"],["gdoc","application/vnd.google-apps.document"],["geo","application/vnd.dynageo"],["geojson","application/geo+json"],["gex","application/vnd.geometry-explorer"],["ggb","application/vnd.geogebra.file"],["ggt","application/vnd.geogebra.tool"],["ghf","application/vnd.groove-help"],["gif","image/gif"],["gim","application/vnd.groove-identity-message"],["glb","model/gltf-binary"],["gltf","model/gltf+json"],["gml","application/gml+xml"],["gmx","application/vnd.gmx"],["gnumeric","application/x-gnumeric"],["gpg","application/gpg-keys"],["gph","application/vnd.flographit"],["gpx","application/gpx+xml"],["gqf","application/vnd.grafeq"],["gqs","application/vnd.grafeq"],["gram","application/srgs"],["gramps","application/x-gramps-xml"],["gre","application/vnd.geometry-explorer"],["grv","application/vnd.groove-injector"],["grxml","application/srgs+xml"],["gsf","application/x-font-ghostscript"],["gsheet","application/vnd.google-apps.spreadsheet"],["gslides","application/vnd.google-apps.presentation"],["gtar","application/x-gtar"],["gtm","application/vnd.groove-tool-message"],["gtw","model/vnd.gtw"],["gv","text/vnd.graphviz"],["gxf","application/gxf"],["gxt","application/vnd.geonext"],["gz","application/gzip"],["gzip","application/gzip"],["h","text/x-c"],["h261","video/h261"],["h263","video/h263"],["h264","video/h264"],["hal","application/vnd.hal+xml"],["hbci","application/vnd.hbci"],["hbs","text/x-handlebars-template"],["hdd","application/x-virtualbox-hdd"],["hdf","application/x-hdf"],["heic","image/heic"],["heics","image/heic-sequence"],["heif","image/heif"],["heifs","image/heif-sequence"],["hej2","image/hej2k"],["held","application/atsc-held+xml"],["hh","text/x-c"],["hjson","application/hjson"],["hlp","application/winhlp"],["hpgl","application/vnd.hp-hpgl"],["hpid","application/vnd.hp-hpid"],["hps","application/vnd.hp-hps"],["hqx","application/mac-binhex40"],["hsj2","image/hsj2"],["htc","text/x-component"],["htke","application/vnd.kenameaapp"],["htm","text/html"],["html","text/html"],["hvd","application/vnd.yamaha.hv-dic"],["hvp","application/vnd.yamaha.hv-voice"],["hvs","application/vnd.yamaha.hv-script"],["i2g","application/vnd.intergeo"],["icc","application/vnd.iccprofile"],["ice","x-conference/x-cooltalk"],["icm","application/vnd.iccprofile"],["ico","image/x-icon"],["ics","text/calendar"],["ief","image/ief"],["ifb","text/calendar"],["ifm","application/vnd.shana.informed.formdata"],["iges","model/iges"],["igl","application/vnd.igloader"],["igm","application/vnd.insors.igm"],["igs","model/iges"],["igx","application/vnd.micrografx.igx"],["iif","application/vnd.shana.informed.interchange"],["img","application/octet-stream"],["imp","application/vnd.accpac.simply.imp"],["ims","application/vnd.ms-ims"],["in","text/plain"],["ini","text/plain"],["ink","application/inkml+xml"],["inkml","application/inkml+xml"],["install","application/x-install-instructions"],["iota","application/vnd.astraea-software.iota"],["ipfix","application/ipfix"],["ipk","application/vnd.shana.informed.package"],["irm","application/vnd.ibm.rights-management"],["irp","application/vnd.irepository.package+xml"],["iso","application/x-iso9660-image"],["itp","application/vnd.shana.informed.formtemplate"],["its","application/its+xml"],["ivp","application/vnd.immervision-ivp"],["ivu","application/vnd.immervision-ivu"],["jad","text/vnd.sun.j2me.app-descriptor"],["jade","text/jade"],["jam","application/vnd.jam"],["jar","application/java-archive"],["jardiff","application/x-java-archive-diff"],["java","text/x-java-source"],["jhc","image/jphc"],["jisp","application/vnd.jisp"],["jls","image/jls"],["jlt","application/vnd.hp-jlyt"],["jng","image/x-jng"],["jnlp","application/x-java-jnlp-file"],["joda","application/vnd.joost.joda-archive"],["jp2","image/jp2"],["jpe","image/jpeg"],["jpeg","image/jpeg"],["jpf","image/jpx"],["jpg","image/jpeg"],["jpg2","image/jp2"],["jpgm","video/jpm"],["jpgv","video/jpeg"],["jph","image/jph"],["jpm","video/jpm"],["jpx","image/jpx"],["js","application/javascript"],["json","application/json"],["json5","application/json5"],["jsonld","application/ld+json"],["jsonl","application/jsonl"],["jsonml","application/jsonml+json"],["jsx","text/jsx"],["jxr","image/jxr"],["jxra","image/jxra"],["jxrs","image/jxrs"],["jxs","image/jxs"],["jxsc","image/jxsc"],["jxsi","image/jxsi"],["jxss","image/jxss"],["kar","audio/midi"],["karbon","application/vnd.kde.karbon"],["kdb","application/octet-stream"],["kdbx","application/x-keepass2"],["key","application/x-iwork-keynote-sffkey"],["kfo","application/vnd.kde.kformula"],["kia","application/vnd.kidspiration"],["kml","application/vnd.google-earth.kml+xml"],["kmz","application/vnd.google-earth.kmz"],["kne","application/vnd.kinar"],["knp","application/vnd.kinar"],["kon","application/vnd.kde.kontour"],["kpr","application/vnd.kde.kpresenter"],["kpt","application/vnd.kde.kpresenter"],["kpxx","application/vnd.ds-keypoint"],["ksp","application/vnd.kde.kspread"],["ktr","application/vnd.kahootz"],["ktx","image/ktx"],["ktx2","image/ktx2"],["ktz","application/vnd.kahootz"],["kwd","application/vnd.kde.kword"],["kwt","application/vnd.kde.kword"],["lasxml","application/vnd.las.las+xml"],["latex","application/x-latex"],["lbd","application/vnd.llamagraphics.life-balance.desktop"],["lbe","application/vnd.llamagraphics.life-balance.exchange+xml"],["les","application/vnd.hhe.lesson-player"],["less","text/less"],["lgr","application/lgr+xml"],["lha","application/octet-stream"],["link66","application/vnd.route66.link66+xml"],["list","text/plain"],["list3820","application/vnd.ibm.modcap"],["listafp","application/vnd.ibm.modcap"],["litcoffee","text/coffeescript"],["lnk","application/x-ms-shortcut"],["log","text/plain"],["lostxml","application/lost+xml"],["lrf","application/octet-stream"],["lrm","application/vnd.ms-lrm"],["ltf","application/vnd.frogans.ltf"],["lua","text/x-lua"],["luac","application/x-lua-bytecode"],["lvp","audio/vnd.lucent.voice"],["lwp","application/vnd.lotus-wordpro"],["lzh","application/octet-stream"],["m1v","video/mpeg"],["m2a","audio/mpeg"],["m2v","video/mpeg"],["m3a","audio/mpeg"],["m3u","text/plain"],["m3u8","application/vnd.apple.mpegurl"],["m4a","audio/x-m4a"],["m4p","application/mp4"],["m4s","video/iso.segment"],["m4u","application/vnd.mpegurl"],["m4v","video/x-m4v"],["m13","application/x-msmediaview"],["m14","application/x-msmediaview"],["m21","application/mp21"],["ma","application/mathematica"],["mads","application/mads+xml"],["maei","application/mmt-aei+xml"],["mag","application/vnd.ecowin.chart"],["maker","application/vnd.framemaker"],["man","text/troff"],["manifest","text/cache-manifest"],["map","application/json"],["mar","application/octet-stream"],["markdown","text/markdown"],["mathml","application/mathml+xml"],["mb","application/mathematica"],["mbk","application/vnd.mobius.mbk"],["mbox","application/mbox"],["mc1","application/vnd.medcalcdata"],["mcd","application/vnd.mcd"],["mcurl","text/vnd.curl.mcurl"],["md","text/markdown"],["mdb","application/x-msaccess"],["mdi","image/vnd.ms-modi"],["mdx","text/mdx"],["me","text/troff"],["mesh","model/mesh"],["meta4","application/metalink4+xml"],["metalink","application/metalink+xml"],["mets","application/mets+xml"],["mfm","application/vnd.mfmp"],["mft","application/rpki-manifest"],["mgp","application/vnd.osgeo.mapguide.package"],["mgz","application/vnd.proteus.magazine"],["mid","audio/midi"],["midi","audio/midi"],["mie","application/x-mie"],["mif","application/vnd.mif"],["mime","message/rfc822"],["mj2","video/mj2"],["mjp2","video/mj2"],["mjs","application/javascript"],["mk3d","video/x-matroska"],["mka","audio/x-matroska"],["mkd","text/x-markdown"],["mks","video/x-matroska"],["mkv","video/x-matroska"],["mlp","application/vnd.dolby.mlp"],["mmd","application/vnd.chipnuts.karaoke-mmd"],["mmf","application/vnd.smaf"],["mml","text/mathml"],["mmr","image/vnd.fujixerox.edmics-mmr"],["mng","video/x-mng"],["mny","application/x-msmoney"],["mobi","application/x-mobipocket-ebook"],["mods","application/mods+xml"],["mov","video/quicktime"],["movie","video/x-sgi-movie"],["mp2","audio/mpeg"],["mp2a","audio/mpeg"],["mp3","audio/mpeg"],["mp4","video/mp4"],["mp4a","audio/mp4"],["mp4s","application/mp4"],["mp4v","video/mp4"],["mp21","application/mp21"],["mpc","application/vnd.mophun.certificate"],["mpd","application/dash+xml"],["mpe","video/mpeg"],["mpeg","video/mpeg"],["mpg","video/mpeg"],["mpg4","video/mp4"],["mpga","audio/mpeg"],["mpkg","application/vnd.apple.installer+xml"],["mpm","application/vnd.blueice.multipass"],["mpn","application/vnd.mophun.application"],["mpp","application/vnd.ms-project"],["mpt","application/vnd.ms-project"],["mpy","application/vnd.ibm.minipay"],["mqy","application/vnd.mobius.mqy"],["mrc","application/marc"],["mrcx","application/marcxml+xml"],["ms","text/troff"],["mscml","application/mediaservercontrol+xml"],["mseed","application/vnd.fdsn.mseed"],["mseq","application/vnd.mseq"],["msf","application/vnd.epson.msf"],["msg","application/vnd.ms-outlook"],["msh","model/mesh"],["msi","application/x-msdownload"],["msl","application/vnd.mobius.msl"],["msm","application/octet-stream"],["msp","application/octet-stream"],["msty","application/vnd.muvee.style"],["mtl","model/mtl"],["mts","model/vnd.mts"],["mus","application/vnd.musician"],["musd","application/mmt-usd+xml"],["musicxml","application/vnd.recordare.musicxml+xml"],["mvb","application/x-msmediaview"],["mvt","application/vnd.mapbox-vector-tile"],["mwf","application/vnd.mfer"],["mxf","application/mxf"],["mxl","application/vnd.recordare.musicxml"],["mxmf","audio/mobile-xmf"],["mxml","application/xv+xml"],["mxs","application/vnd.triscape.mxs"],["mxu","video/vnd.mpegurl"],["n-gage","application/vnd.nokia.n-gage.symbian.install"],["n3","text/n3"],["nb","application/mathematica"],["nbp","application/vnd.wolfram.player"],["nc","application/x-netcdf"],["ncx","application/x-dtbncx+xml"],["nfo","text/x-nfo"],["ngdat","application/vnd.nokia.n-gage.data"],["nitf","application/vnd.nitf"],["nlu","application/vnd.neurolanguage.nlu"],["nml","application/vnd.enliven"],["nnd","application/vnd.noblenet-directory"],["nns","application/vnd.noblenet-sealer"],["nnw","application/vnd.noblenet-web"],["npx","image/vnd.net-fpx"],["nq","application/n-quads"],["nsc","application/x-conference"],["nsf","application/vnd.lotus-notes"],["nt","application/n-triples"],["ntf","application/vnd.nitf"],["numbers","application/x-iwork-numbers-sffnumbers"],["nzb","application/x-nzb"],["oa2","application/vnd.fujitsu.oasys2"],["oa3","application/vnd.fujitsu.oasys3"],["oas","application/vnd.fujitsu.oasys"],["obd","application/x-msbinder"],["obgx","application/vnd.openblox.game+xml"],["obj","model/obj"],["oda","application/oda"],["odb","application/vnd.oasis.opendocument.database"],["odc","application/vnd.oasis.opendocument.chart"],["odf","application/vnd.oasis.opendocument.formula"],["odft","application/vnd.oasis.opendocument.formula-template"],["odg","application/vnd.oasis.opendocument.graphics"],["odi","application/vnd.oasis.opendocument.image"],["odm","application/vnd.oasis.opendocument.text-master"],["odp","application/vnd.oasis.opendocument.presentation"],["ods","application/vnd.oasis.opendocument.spreadsheet"],["odt","application/vnd.oasis.opendocument.text"],["oga","audio/ogg"],["ogex","model/vnd.opengex"],["ogg","audio/ogg"],["ogv","video/ogg"],["ogx","application/ogg"],["omdoc","application/omdoc+xml"],["onepkg","application/onenote"],["onetmp","application/onenote"],["onetoc","application/onenote"],["onetoc2","application/onenote"],["opf","application/oebps-package+xml"],["opml","text/x-opml"],["oprc","application/vnd.palm"],["opus","audio/ogg"],["org","text/x-org"],["osf","application/vnd.yamaha.openscoreformat"],["osfpvg","application/vnd.yamaha.openscoreformat.osfpvg+xml"],["osm","application/vnd.openstreetmap.data+xml"],["otc","application/vnd.oasis.opendocument.chart-template"],["otf","font/otf"],["otg","application/vnd.oasis.opendocument.graphics-template"],["oth","application/vnd.oasis.opendocument.text-web"],["oti","application/vnd.oasis.opendocument.image-template"],["otp","application/vnd.oasis.opendocument.presentation-template"],["ots","application/vnd.oasis.opendocument.spreadsheet-template"],["ott","application/vnd.oasis.opendocument.text-template"],["ova","application/x-virtualbox-ova"],["ovf","application/x-virtualbox-ovf"],["owl","application/rdf+xml"],["oxps","application/oxps"],["oxt","application/vnd.openofficeorg.extension"],["p","text/x-pascal"],["p7a","application/x-pkcs7-signature"],["p7b","application/x-pkcs7-certificates"],["p7c","application/pkcs7-mime"],["p7m","application/pkcs7-mime"],["p7r","application/x-pkcs7-certreqresp"],["p7s","application/pkcs7-signature"],["p8","application/pkcs8"],["p10","application/x-pkcs10"],["p12","application/x-pkcs12"],["pac","application/x-ns-proxy-autoconfig"],["pages","application/x-iwork-pages-sffpages"],["pas","text/x-pascal"],["paw","application/vnd.pawaafile"],["pbd","application/vnd.powerbuilder6"],["pbm","image/x-portable-bitmap"],["pcap","application/vnd.tcpdump.pcap"],["pcf","application/x-font-pcf"],["pcl","application/vnd.hp-pcl"],["pclxl","application/vnd.hp-pclxl"],["pct","image/x-pict"],["pcurl","application/vnd.curl.pcurl"],["pcx","image/x-pcx"],["pdb","application/x-pilot"],["pde","text/x-processing"],["pdf","application/pdf"],["pem","application/x-x509-user-cert"],["pfa","application/x-font-type1"],["pfb","application/x-font-type1"],["pfm","application/x-font-type1"],["pfr","application/font-tdpfr"],["pfx","application/x-pkcs12"],["pgm","image/x-portable-graymap"],["pgn","application/x-chess-pgn"],["pgp","application/pgp"],["php","application/x-httpd-php"],["php3","application/x-httpd-php"],["php4","application/x-httpd-php"],["phps","application/x-httpd-php-source"],["phtml","application/x-httpd-php"],["pic","image/x-pict"],["pkg","application/octet-stream"],["pki","application/pkixcmp"],["pkipath","application/pkix-pkipath"],["pkpass","application/vnd.apple.pkpass"],["pl","application/x-perl"],["plb","application/vnd.3gpp.pic-bw-large"],["plc","application/vnd.mobius.plc"],["plf","application/vnd.pocketlearn"],["pls","application/pls+xml"],["pm","application/x-perl"],["pml","application/vnd.ctc-posml"],["png","image/png"],["pnm","image/x-portable-anymap"],["portpkg","application/vnd.macports.portpkg"],["pot","application/vnd.ms-powerpoint"],["potm","application/vnd.ms-powerpoint.presentation.macroEnabled.12"],["potx","application/vnd.openxmlformats-officedocument.presentationml.template"],["ppa","application/vnd.ms-powerpoint"],["ppam","application/vnd.ms-powerpoint.addin.macroEnabled.12"],["ppd","application/vnd.cups-ppd"],["ppm","image/x-portable-pixmap"],["pps","application/vnd.ms-powerpoint"],["ppsm","application/vnd.ms-powerpoint.slideshow.macroEnabled.12"],["ppsx","application/vnd.openxmlformats-officedocument.presentationml.slideshow"],["ppt","application/powerpoint"],["pptm","application/vnd.ms-powerpoint.presentation.macroEnabled.12"],["pptx","application/vnd.openxmlformats-officedocument.presentationml.presentation"],["pqa","application/vnd.palm"],["prc","application/x-pilot"],["pre","application/vnd.lotus-freelance"],["prf","application/pics-rules"],["provx","application/provenance+xml"],["ps","application/postscript"],["psb","application/vnd.3gpp.pic-bw-small"],["psd","application/x-photoshop"],["psf","application/x-font-linux-psf"],["pskcxml","application/pskc+xml"],["pti","image/prs.pti"],["ptid","application/vnd.pvi.ptid1"],["pub","application/x-mspublisher"],["pvb","application/vnd.3gpp.pic-bw-var"],["pwn","application/vnd.3m.post-it-notes"],["pya","audio/vnd.ms-playready.media.pya"],["pyv","video/vnd.ms-playready.media.pyv"],["qam","application/vnd.epson.quickanime"],["qbo","application/vnd.intu.qbo"],["qfx","application/vnd.intu.qfx"],["qps","application/vnd.publishare-delta-tree"],["qt","video/quicktime"],["qwd","application/vnd.quark.quarkxpress"],["qwt","application/vnd.quark.quarkxpress"],["qxb","application/vnd.quark.quarkxpress"],["qxd","application/vnd.quark.quarkxpress"],["qxl","application/vnd.quark.quarkxpress"],["qxt","application/vnd.quark.quarkxpress"],["ra","audio/x-realaudio"],["ram","audio/x-pn-realaudio"],["raml","application/raml+yaml"],["rapd","application/route-apd+xml"],["rar","application/x-rar"],["ras","image/x-cmu-raster"],["rcprofile","application/vnd.ipunplugged.rcprofile"],["rdf","application/rdf+xml"],["rdz","application/vnd.data-vision.rdz"],["relo","application/p2p-overlay+xml"],["rep","application/vnd.businessobjects"],["res","application/x-dtbresource+xml"],["rgb","image/x-rgb"],["rif","application/reginfo+xml"],["rip","audio/vnd.rip"],["ris","application/x-research-info-systems"],["rl","application/resource-lists+xml"],["rlc","image/vnd.fujixerox.edmics-rlc"],["rld","application/resource-lists-diff+xml"],["rm","audio/x-pn-realaudio"],["rmi","audio/midi"],["rmp","audio/x-pn-realaudio-plugin"],["rms","application/vnd.jcp.javame.midlet-rms"],["rmvb","application/vnd.rn-realmedia-vbr"],["rnc","application/relax-ng-compact-syntax"],["rng","application/xml"],["roa","application/rpki-roa"],["roff","text/troff"],["rp9","application/vnd.cloanto.rp9"],["rpm","audio/x-pn-realaudio-plugin"],["rpss","application/vnd.nokia.radio-presets"],["rpst","application/vnd.nokia.radio-preset"],["rq","application/sparql-query"],["rs","application/rls-services+xml"],["rsa","application/x-pkcs7"],["rsat","application/atsc-rsat+xml"],["rsd","application/rsd+xml"],["rsheet","application/urc-ressheet+xml"],["rss","application/rss+xml"],["rtf","text/rtf"],["rtx","text/richtext"],["run","application/x-makeself"],["rusd","application/route-usd+xml"],["rv","video/vnd.rn-realvideo"],["s","text/x-asm"],["s3m","audio/s3m"],["saf","application/vnd.yamaha.smaf-audio"],["sass","text/x-sass"],["sbml","application/sbml+xml"],["sc","application/vnd.ibm.secure-container"],["scd","application/x-msschedule"],["scm","application/vnd.lotus-screencam"],["scq","application/scvp-cv-request"],["scs","application/scvp-cv-response"],["scss","text/x-scss"],["scurl","text/vnd.curl.scurl"],["sda","application/vnd.stardivision.draw"],["sdc","application/vnd.stardivision.calc"],["sdd","application/vnd.stardivision.impress"],["sdkd","application/vnd.solent.sdkm+xml"],["sdkm","application/vnd.solent.sdkm+xml"],["sdp","application/sdp"],["sdw","application/vnd.stardivision.writer"],["sea","application/octet-stream"],["see","application/vnd.seemail"],["seed","application/vnd.fdsn.seed"],["sema","application/vnd.sema"],["semd","application/vnd.semd"],["semf","application/vnd.semf"],["senmlx","application/senml+xml"],["sensmlx","application/sensml+xml"],["ser","application/java-serialized-object"],["setpay","application/set-payment-initiation"],["setreg","application/set-registration-initiation"],["sfd-hdstx","application/vnd.hydrostatix.sof-data"],["sfs","application/vnd.spotfire.sfs"],["sfv","text/x-sfv"],["sgi","image/sgi"],["sgl","application/vnd.stardivision.writer-global"],["sgm","text/sgml"],["sgml","text/sgml"],["sh","application/x-sh"],["shar","application/x-shar"],["shex","text/shex"],["shf","application/shf+xml"],["shtml","text/html"],["sid","image/x-mrsid-image"],["sieve","application/sieve"],["sig","application/pgp-signature"],["sil","audio/silk"],["silo","model/mesh"],["sis","application/vnd.symbian.install"],["sisx","application/vnd.symbian.install"],["sit","application/x-stuffit"],["sitx","application/x-stuffitx"],["siv","application/sieve"],["skd","application/vnd.koan"],["skm","application/vnd.koan"],["skp","application/vnd.koan"],["skt","application/vnd.koan"],["sldm","application/vnd.ms-powerpoint.slide.macroenabled.12"],["sldx","application/vnd.openxmlformats-officedocument.presentationml.slide"],["slim","text/slim"],["slm","text/slim"],["sls","application/route-s-tsid+xml"],["slt","application/vnd.epson.salt"],["sm","application/vnd.stepmania.stepchart"],["smf","application/vnd.stardivision.math"],["smi","application/smil"],["smil","application/smil"],["smv","video/x-smv"],["smzip","application/vnd.stepmania.package"],["snd","audio/basic"],["snf","application/x-font-snf"],["so","application/octet-stream"],["spc","application/x-pkcs7-certificates"],["spdx","text/spdx"],["spf","application/vnd.yamaha.smaf-phrase"],["spl","application/x-futuresplash"],["spot","text/vnd.in3d.spot"],["spp","application/scvp-vp-response"],["spq","application/scvp-vp-request"],["spx","audio/ogg"],["sql","application/x-sql"],["src","application/x-wais-source"],["srt","application/x-subrip"],["sru","application/sru+xml"],["srx","application/sparql-results+xml"],["ssdl","application/ssdl+xml"],["sse","application/vnd.kodak-descriptor"],["ssf","application/vnd.epson.ssf"],["ssml","application/ssml+xml"],["sst","application/octet-stream"],["st","application/vnd.sailingtracker.track"],["stc","application/vnd.sun.xml.calc.template"],["std","application/vnd.sun.xml.draw.template"],["stf","application/vnd.wt.stf"],["sti","application/vnd.sun.xml.impress.template"],["stk","application/hyperstudio"],["stl","model/stl"],["stpx","model/step+xml"],["stpxz","model/step-xml+zip"],["stpz","model/step+zip"],["str","application/vnd.pg.format"],["stw","application/vnd.sun.xml.writer.template"],["styl","text/stylus"],["stylus","text/stylus"],["sub","text/vnd.dvb.subtitle"],["sus","application/vnd.sus-calendar"],["susp","application/vnd.sus-calendar"],["sv4cpio","application/x-sv4cpio"],["sv4crc","application/x-sv4crc"],["svc","application/vnd.dvb.service"],["svd","application/vnd.svd"],["svg","image/svg+xml"],["svgz","image/svg+xml"],["swa","application/x-director"],["swf","application/x-shockwave-flash"],["swi","application/vnd.aristanetworks.swi"],["swidtag","application/swid+xml"],["sxc","application/vnd.sun.xml.calc"],["sxd","application/vnd.sun.xml.draw"],["sxg","application/vnd.sun.xml.writer.global"],["sxi","application/vnd.sun.xml.impress"],["sxm","application/vnd.sun.xml.math"],["sxw","application/vnd.sun.xml.writer"],["t","text/troff"],["t3","application/x-t3vm-image"],["t38","image/t38"],["taglet","application/vnd.mynfc"],["tao","application/vnd.tao.intent-module-archive"],["tap","image/vnd.tencent.tap"],["tar","application/x-tar"],["tcap","application/vnd.3gpp2.tcap"],["tcl","application/x-tcl"],["td","application/urc-targetdesc+xml"],["teacher","application/vnd.smart.teacher"],["tei","application/tei+xml"],["teicorpus","application/tei+xml"],["tex","application/x-tex"],["texi","application/x-texinfo"],["texinfo","application/x-texinfo"],["text","text/plain"],["tfi","application/thraud+xml"],["tfm","application/x-tex-tfm"],["tfx","image/tiff-fx"],["tga","image/x-tga"],["tgz","application/x-tar"],["thmx","application/vnd.ms-officetheme"],["tif","image/tiff"],["tiff","image/tiff"],["tk","application/x-tcl"],["tmo","application/vnd.tmobile-livetv"],["toml","application/toml"],["torrent","application/x-bittorrent"],["tpl","application/vnd.groove-tool-template"],["tpt","application/vnd.trid.tpt"],["tr","text/troff"],["tra","application/vnd.trueapp"],["trig","application/trig"],["trm","application/x-msterminal"],["ts","video/mp2t"],["tsd","application/timestamped-data"],["tsv","text/tab-separated-values"],["ttc","font/collection"],["ttf","font/ttf"],["ttl","text/turtle"],["ttml","application/ttml+xml"],["twd","application/vnd.simtech-mindmapper"],["twds","application/vnd.simtech-mindmapper"],["txd","application/vnd.genomatix.tuxedo"],["txf","application/vnd.mobius.txf"],["txt","text/plain"],["u8dsn","message/global-delivery-status"],["u8hdr","message/global-headers"],["u8mdn","message/global-disposition-notification"],["u8msg","message/global"],["u32","application/x-authorware-bin"],["ubj","application/ubjson"],["udeb","application/x-debian-package"],["ufd","application/vnd.ufdl"],["ufdl","application/vnd.ufdl"],["ulx","application/x-glulx"],["umj","application/vnd.umajin"],["unityweb","application/vnd.unity"],["uoml","application/vnd.uoml+xml"],["uri","text/uri-list"],["uris","text/uri-list"],["urls","text/uri-list"],["usdz","model/vnd.usdz+zip"],["ustar","application/x-ustar"],["utz","application/vnd.uiq.theme"],["uu","text/x-uuencode"],["uva","audio/vnd.dece.audio"],["uvd","application/vnd.dece.data"],["uvf","application/vnd.dece.data"],["uvg","image/vnd.dece.graphic"],["uvh","video/vnd.dece.hd"],["uvi","image/vnd.dece.graphic"],["uvm","video/vnd.dece.mobile"],["uvp","video/vnd.dece.pd"],["uvs","video/vnd.dece.sd"],["uvt","application/vnd.dece.ttml+xml"],["uvu","video/vnd.uvvu.mp4"],["uvv","video/vnd.dece.video"],["uvva","audio/vnd.dece.audio"],["uvvd","application/vnd.dece.data"],["uvvf","application/vnd.dece.data"],["uvvg","image/vnd.dece.graphic"],["uvvh","video/vnd.dece.hd"],["uvvi","image/vnd.dece.graphic"],["uvvm","video/vnd.dece.mobile"],["uvvp","video/vnd.dece.pd"],["uvvs","video/vnd.dece.sd"],["uvvt","application/vnd.dece.ttml+xml"],["uvvu","video/vnd.uvvu.mp4"],["uvvv","video/vnd.dece.video"],["uvvx","application/vnd.dece.unspecified"],["uvvz","application/vnd.dece.zip"],["uvx","application/vnd.dece.unspecified"],["uvz","application/vnd.dece.zip"],["vbox","application/x-virtualbox-vbox"],["vbox-extpack","application/x-virtualbox-vbox-extpack"],["vcard","text/vcard"],["vcd","application/x-cdlink"],["vcf","text/x-vcard"],["vcg","application/vnd.groove-vcard"],["vcs","text/x-vcalendar"],["vcx","application/vnd.vcx"],["vdi","application/x-virtualbox-vdi"],["vds","model/vnd.sap.vds"],["vhd","application/x-virtualbox-vhd"],["vis","application/vnd.visionary"],["viv","video/vnd.vivo"],["vlc","application/videolan"],["vmdk","application/x-virtualbox-vmdk"],["vob","video/x-ms-vob"],["vor","application/vnd.stardivision.writer"],["vox","application/x-authorware-bin"],["vrml","model/vrml"],["vsd","application/vnd.visio"],["vsf","application/vnd.vsf"],["vss","application/vnd.visio"],["vst","application/vnd.visio"],["vsw","application/vnd.visio"],["vtf","image/vnd.valve.source.texture"],["vtt","text/vtt"],["vtu","model/vnd.vtu"],["vxml","application/voicexml+xml"],["w3d","application/x-director"],["wad","application/x-doom"],["wadl","application/vnd.sun.wadl+xml"],["war","application/java-archive"],["wasm","application/wasm"],["wav","audio/x-wav"],["wax","audio/x-ms-wax"],["wbmp","image/vnd.wap.wbmp"],["wbs","application/vnd.criticaltools.wbs+xml"],["wbxml","application/wbxml"],["wcm","application/vnd.ms-works"],["wdb","application/vnd.ms-works"],["wdp","image/vnd.ms-photo"],["weba","audio/webm"],["webapp","application/x-web-app-manifest+json"],["webm","video/webm"],["webmanifest","application/manifest+json"],["webp","image/webp"],["wg","application/vnd.pmi.widget"],["wgt","application/widget"],["wks","application/vnd.ms-works"],["wm","video/x-ms-wm"],["wma","audio/x-ms-wma"],["wmd","application/x-ms-wmd"],["wmf","image/wmf"],["wml","text/vnd.wap.wml"],["wmlc","application/wmlc"],["wmls","text/vnd.wap.wmlscript"],["wmlsc","application/vnd.wap.wmlscriptc"],["wmv","video/x-ms-wmv"],["wmx","video/x-ms-wmx"],["wmz","application/x-msmetafile"],["woff","font/woff"],["woff2","font/woff2"],["word","application/msword"],["wpd","application/vnd.wordperfect"],["wpl","application/vnd.ms-wpl"],["wps","application/vnd.ms-works"],["wqd","application/vnd.wqd"],["wri","application/x-mswrite"],["wrl","model/vrml"],["wsc","message/vnd.wfa.wsc"],["wsdl","application/wsdl+xml"],["wspolicy","application/wspolicy+xml"],["wtb","application/vnd.webturbo"],["wvx","video/x-ms-wvx"],["x3d","model/x3d+xml"],["x3db","model/x3d+fastinfoset"],["x3dbz","model/x3d+binary"],["x3dv","model/x3d-vrml"],["x3dvz","model/x3d+vrml"],["x3dz","model/x3d+xml"],["x32","application/x-authorware-bin"],["x_b","model/vnd.parasolid.transmit.binary"],["x_t","model/vnd.parasolid.transmit.text"],["xaml","application/xaml+xml"],["xap","application/x-silverlight-app"],["xar","application/vnd.xara"],["xav","application/xcap-att+xml"],["xbap","application/x-ms-xbap"],["xbd","application/vnd.fujixerox.docuworks.binder"],["xbm","image/x-xbitmap"],["xca","application/xcap-caps+xml"],["xcs","application/calendar+xml"],["xdf","application/xcap-diff+xml"],["xdm","application/vnd.syncml.dm+xml"],["xdp","application/vnd.adobe.xdp+xml"],["xdssc","application/dssc+xml"],["xdw","application/vnd.fujixerox.docuworks"],["xel","application/xcap-el+xml"],["xenc","application/xenc+xml"],["xer","application/patch-ops-error+xml"],["xfdf","application/vnd.adobe.xfdf"],["xfdl","application/vnd.xfdl"],["xht","application/xhtml+xml"],["xhtml","application/xhtml+xml"],["xhvml","application/xv+xml"],["xif","image/vnd.xiff"],["xl","application/excel"],["xla","application/vnd.ms-excel"],["xlam","application/vnd.ms-excel.addin.macroEnabled.12"],["xlc","application/vnd.ms-excel"],["xlf","application/xliff+xml"],["xlm","application/vnd.ms-excel"],["xls","application/vnd.ms-excel"],["xlsb","application/vnd.ms-excel.sheet.binary.macroEnabled.12"],["xlsm","application/vnd.ms-excel.sheet.macroEnabled.12"],["xlsx","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"],["xlt","application/vnd.ms-excel"],["xltm","application/vnd.ms-excel.template.macroEnabled.12"],["xltx","application/vnd.openxmlformats-officedocument.spreadsheetml.template"],["xlw","application/vnd.ms-excel"],["xm","audio/xm"],["xml","application/xml"],["xns","application/xcap-ns+xml"],["xo","application/vnd.olpc-sugar"],["xop","application/xop+xml"],["xpi","application/x-xpinstall"],["xpl","application/xproc+xml"],["xpm","image/x-xpixmap"],["xpr","application/vnd.is-xpr"],["xps","application/vnd.ms-xpsdocument"],["xpw","application/vnd.intercon.formnet"],["xpx","application/vnd.intercon.formnet"],["xsd","application/xml"],["xsl","application/xml"],["xslt","application/xslt+xml"],["xsm","application/vnd.syncml+xml"],["xspf","application/xspf+xml"],["xul","application/vnd.mozilla.xul+xml"],["xvm","application/xv+xml"],["xvml","application/xv+xml"],["xwd","image/x-xwindowdump"],["xyz","chemical/x-xyz"],["xz","application/x-xz"],["yaml","text/yaml"],["yang","application/yang"],["yin","application/yin+xml"],["yml","text/yaml"],["ymp","text/x-suse-ymp"],["z","application/x-compress"],["z1","application/x-zmachine"],["z2","application/x-zmachine"],["z3","application/x-zmachine"],["z4","application/x-zmachine"],["z5","application/x-zmachine"],["z6","application/x-zmachine"],["z7","application/x-zmachine"],["z8","application/x-zmachine"],["zaz","application/vnd.zzazz.deck+xml"],["zip","application/zip"],["zir","application/vnd.zul"],["zirz","application/vnd.zul"],["zmm","application/vnd.handheld-entertainment+xml"],["zsh","text/x-scriptzsh"]]);function np(i,e,t){const n=oI(i),{webkitRelativePath:a}=i,s=typeof e=="string"?e:typeof a=="string"&&a.length>0?a:`./${i.name}`;return typeof n.path!="string"&&KT(n,"path",s),KT(n,"relativePath",s),n}function oI(i){const{name:e}=i;if(e&&e.lastIndexOf(".")!==-1&&!i.type){const n=e.split(".").pop().toLowerCase(),a=sI.get(n);a&&Object.defineProperty(i,"type",{value:a,writable:!1,configurable:!1,enumerable:!0})}return i}function KT(i,e,t){Object.defineProperty(i,e,{value:t,writable:!1,configurable:!1,enumerable:!0})}const lI=[".DS_Store","Thumbs.db"];function cI(i){return Pt(this,void 0,void 0,function*(){return s_(i)&&uI(i.dataTransfer)?pI(i.dataTransfer,i.type):hI(i)?fI(i):Array.isArray(i)&&i.every(e=>"getFile"in e&&typeof e.getFile=="function")?dI(i):[]})}function uI(i){return s_(i)}function hI(i){return s_(i)&&s_(i.target)}function s_(i){return typeof i=="object"&&i!==null}function fI(i){return q1(i.target.files).map(e=>np(e))}function dI(i){return Pt(this,void 0,void 0,function*(){return(yield Promise.all(i.map(t=>t.getFile()))).map(t=>np(t))})}function pI(i,e){return Pt(this,void 0,void 0,function*(){if(i.items){const t=q1(i.items).filter(a=>a.kind==="file");if(e!=="drop")return t;const n=yield Promise.all(t.map(mI));return JT(O3(n))}return JT(q1(i.files).map(t=>np(t)))})}function JT(i){return i.filter(e=>lI.indexOf(e.name)===-1)}function q1(i){if(i===null)return[];const e=[];for(let t=0;t<i.length;t++){const n=i[t];e.push(n)}return e}function mI(i){if(typeof i.webkitGetAsEntry!="function")return QT(i);const e=i.webkitGetAsEntry();return e&&e.isDirectory?D3(e):QT(i,e)}function O3(i){return i.reduce((e,t)=>[...e,...Array.isArray(t)?O3(t):[t]],[])}function QT(i,e){return Pt(this,void 0,void 0,function*(){var t;if(globalThis.isSecureContext&&typeof i.getAsFileSystemHandle=="function"){const s=yield i.getAsFileSystemHandle();if(s===null)throw new Error(`${i} is not a File`);if(s!==void 0){const l=yield s.getFile();return l.handle=s,np(l)}}const n=i.getAsFile();if(!n)throw new Error(`${i} is not a File`);return np(n,(t=e==null?void 0:e.fullPath)!==null&&t!==void 0?t:void 0)})}function gI(i){return Pt(this,void 0,void 0,function*(){return i.isDirectory?D3(i):vI(i)})}function D3(i){const e=i.createReader();return new Promise((t,n)=>{const a=[];function s(){e.readEntries(l=>Pt(this,void 0,void 0,function*(){if(l.length){const u=Promise.all(l.map(gI));a.push(u),s()}else try{const u=yield Promise.all(a);t(u)}catch(u){n(u)}}),l=>{n(l)})}s()})}function vI(i){return Pt(this,void 0,void 0,function*(){return new Promise((e,t)=>{i.file(n=>{const a=np(n,i.fullPath);e(a)},n=>{t(n)})})})}var q0={},$T;function yI(){return $T||($T=1,q0.__esModule=!0,q0.default=function(i,e){if(i&&e){var t=Array.isArray(e)?e:e.split(",");if(t.length===0)return!0;var n=i.name||"",a=(i.type||"").toLowerCase(),s=a.replace(/\/.*$/,"");return t.some(function(l){var u=l.trim().toLowerCase();return u.charAt(0)==="."?n.toLowerCase().endsWith(u):u.endsWith("/*")?s===u.replace(/\/.*$/,""):a===u})}return!0}),q0}var _I=yI();const vS=xu(_I);function eA(i){return SI(i)||xI(i)||L3(i)||bI()}function bI(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function xI(i){if(typeof Symbol<"u"&&i[Symbol.iterator]!=null||i["@@iterator"]!=null)return Array.from(i)}function SI(i){if(Array.isArray(i))return X1(i)}function tA(i,e){var t=Object.keys(i);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(i);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(i,a).enumerable})),t.push.apply(t,n)}return t}function nA(i){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?tA(Object(t),!0).forEach(function(n){U3(i,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(i,Object.getOwnPropertyDescriptors(t)):tA(Object(t)).forEach(function(n){Object.defineProperty(i,n,Object.getOwnPropertyDescriptor(t,n))})}return i}function U3(i,e,t){return e in i?Object.defineProperty(i,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):i[e]=t,i}function Dg(i,e){return wI(i)||MI(i,e)||L3(i,e)||EI()}function EI(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function L3(i,e){if(i){if(typeof i=="string")return X1(i,e);var t=Object.prototype.toString.call(i).slice(8,-1);if(t==="Object"&&i.constructor&&(t=i.constructor.name),t==="Map"||t==="Set")return Array.from(i);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return X1(i,e)}}function X1(i,e){(e==null||e>i.length)&&(e=i.length);for(var t=0,n=new Array(e);t<e;t++)n[t]=i[t];return n}function MI(i,e){var t=i==null?null:typeof Symbol<"u"&&i[Symbol.iterator]||i["@@iterator"];if(t!=null){var n=[],a=!0,s=!1,l,u;try{for(t=t.call(i);!(a=(l=t.next()).done)&&(n.push(l.value),!(e&&n.length===e));a=!0);}catch(d){s=!0,u=d}finally{try{!a&&t.return!=null&&t.return()}finally{if(s)throw u}}return n}}function wI(i){if(Array.isArray(i))return i}var TI=typeof vS=="function"?vS:vS.default,AI="file-invalid-type",CI="file-too-large",RI="file-too-small",NI="too-many-files",OI=function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"",t=e.split(","),n=t.length>1?"one of ".concat(t.join(", ")):t[0];return{code:AI,message:"File type must be ".concat(n)}},iA=function(e){return{code:CI,message:"File is larger than ".concat(e," ").concat(e===1?"byte":"bytes")}},aA=function(e){return{code:RI,message:"File is smaller than ".concat(e," ").concat(e===1?"byte":"bytes")}},DI={code:NI,message:"Too many files"};function I3(i,e){var t=i.type==="application/x-moz-file"||TI(i,e);return[t,t?null:OI(e)]}function P3(i,e,t){if(Bh(i.size))if(Bh(e)&&Bh(t)){if(i.size>t)return[!1,iA(t)];if(i.size<e)return[!1,aA(e)]}else{if(Bh(e)&&i.size<e)return[!1,aA(e)];if(Bh(t)&&i.size>t)return[!1,iA(t)]}return[!0,null]}function Bh(i){return i!=null}function UI(i){var e=i.files,t=i.accept,n=i.minSize,a=i.maxSize,s=i.multiple,l=i.maxFiles,u=i.validator;return!s&&e.length>1||s&&l>=1&&e.length>l?!1:e.every(function(d){var p=I3(d,t),g=Dg(p,1),y=g[0],_=P3(d,n,a),b=Dg(_,1),x=b[0],T=u?u(d):null;return y&&x&&!T})}function o_(i){return typeof i.isPropagationStopped=="function"?i.isPropagationStopped():typeof i.cancelBubble<"u"?i.cancelBubble:!1}function X0(i){return i.dataTransfer?Array.prototype.some.call(i.dataTransfer.types,function(e){return e==="Files"||e==="application/x-moz-file"}):!!i.target&&!!i.target.files}function rA(i){i.preventDefault()}function LI(i){return i.indexOf("MSIE")!==-1||i.indexOf("Trident/")!==-1}function II(i){return i.indexOf("Edge/")!==-1}function PI(){var i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:window.navigator.userAgent;return LI(i)||II(i)}function fl(){for(var i=arguments.length,e=new Array(i),t=0;t<i;t++)e[t]=arguments[t];return function(n){for(var a=arguments.length,s=new Array(a>1?a-1:0),l=1;l<a;l++)s[l-1]=arguments[l];return e.some(function(u){return!o_(n)&&u&&u.apply(void 0,[n].concat(s)),o_(n)})}}function zI(){return"showOpenFilePicker"in window}function BI(i){if(Bh(i)){var e=Object.entries(i).filter(function(t){var n=Dg(t,2),a=n[0],s=n[1],l=!0;return z3(a)||(console.warn('Skipped "'.concat(a,'" because it is not a valid MIME type. Check https://developer.mozilla.org/en-US/docs/Web/HTTP/Basics_of_HTTP/MIME_types/Common_types for a list of valid MIME types.')),l=!1),(!Array.isArray(s)||!s.every(B3))&&(console.warn('Skipped "'.concat(a,'" because an invalid file extension was provided.')),l=!1),l}).reduce(function(t,n){var a=Dg(n,2),s=a[0],l=a[1];return nA(nA({},t),{},U3({},s,l))},{});return[{description:"Files",accept:e}]}return i}function FI(i){if(Bh(i))return Object.entries(i).reduce(function(e,t){var n=Dg(t,2),a=n[0],s=n[1];return[].concat(eA(e),[a],eA(s))},[]).filter(function(e){return z3(e)||B3(e)}).join(",")}function kI(i){return i instanceof DOMException&&(i.name==="AbortError"||i.code===i.ABORT_ERR)}function HI(i){return i instanceof DOMException&&(i.name==="SecurityError"||i.code===i.SECURITY_ERR)}function z3(i){return i==="audio/*"||i==="video/*"||i==="image/*"||i==="text/*"||i==="application/*"||/\w+\/[-+.\w]+/g.test(i)}function B3(i){return/^.*\.[\w]+$/.test(i)}var VI=["children"],jI=["open"],GI=["refKey","role","onKeyDown","onFocus","onBlur","onClick","onDragEnter","onDragOver","onDragLeave","onDrop"],qI=["refKey","onChange","onClick"];function XI(i){return ZI(i)||YI(i)||F3(i)||WI()}function WI(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function YI(i){if(typeof Symbol<"u"&&i[Symbol.iterator]!=null||i["@@iterator"]!=null)return Array.from(i)}function ZI(i){if(Array.isArray(i))return W1(i)}function yS(i,e){return QI(i)||JI(i,e)||F3(i,e)||KI()}function KI(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function F3(i,e){if(i){if(typeof i=="string")return W1(i,e);var t=Object.prototype.toString.call(i).slice(8,-1);if(t==="Object"&&i.constructor&&(t=i.constructor.name),t==="Map"||t==="Set")return Array.from(i);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return W1(i,e)}}function W1(i,e){(e==null||e>i.length)&&(e=i.length);for(var t=0,n=new Array(e);t<e;t++)n[t]=i[t];return n}function JI(i,e){var t=i==null?null:typeof Symbol<"u"&&i[Symbol.iterator]||i["@@iterator"];if(t!=null){var n=[],a=!0,s=!1,l,u;try{for(t=t.call(i);!(a=(l=t.next()).done)&&(n.push(l.value),!(e&&n.length===e));a=!0);}catch(d){s=!0,u=d}finally{try{!a&&t.return!=null&&t.return()}finally{if(s)throw u}}return n}}function QI(i){if(Array.isArray(i))return i}function sA(i,e){var t=Object.keys(i);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(i);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(i,a).enumerable})),t.push.apply(t,n)}return t}function ki(i){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?sA(Object(t),!0).forEach(function(n){Y1(i,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(i,Object.getOwnPropertyDescriptors(t)):sA(Object(t)).forEach(function(n){Object.defineProperty(i,n,Object.getOwnPropertyDescriptor(t,n))})}return i}function Y1(i,e,t){return e in i?Object.defineProperty(i,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):i[e]=t,i}function l_(i,e){if(i==null)return{};var t=$I(i,e),n,a;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(i);for(a=0;a<s.length;a++)n=s[a],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(i,n)&&(t[n]=i[n])}return t}function $I(i,e){if(i==null)return{};var t={},n=Object.keys(i),a,s;for(s=0;s<n.length;s++)a=n[s],!(e.indexOf(a)>=0)&&(t[a]=i[a]);return t}var IE=re.forwardRef(function(i,e){var t=i.children,n=l_(i,VI),a=K1(n),s=a.open,l=l_(a,jI);return re.useImperativeHandle(e,function(){return{open:s}},[s]),EE.createElement(re.Fragment,null,t(ki(ki({},l),{},{open:s})))});IE.displayName="Dropzone";var k3={disabled:!1,getFilesFromEvent:cI,maxSize:1/0,minSize:0,multiple:!0,maxFiles:0,preventDropOnDocument:!0,noClick:!1,noKeyboard:!1,noDrag:!1,noDragEventsBubbling:!1,validator:null,useFsAccessApi:!1,autoFocus:!1};IE.defaultProps=k3;IE.propTypes={children:vi.func,accept:vi.objectOf(vi.arrayOf(vi.string)),multiple:vi.bool,preventDropOnDocument:vi.bool,noClick:vi.bool,noKeyboard:vi.bool,noDrag:vi.bool,noDragEventsBubbling:vi.bool,minSize:vi.number,maxSize:vi.number,maxFiles:vi.number,disabled:vi.bool,getFilesFromEvent:vi.func,onFileDialogCancel:vi.func,onFileDialogOpen:vi.func,useFsAccessApi:vi.bool,autoFocus:vi.bool,onDragEnter:vi.func,onDragLeave:vi.func,onDragOver:vi.func,onDrop:vi.func,onDropAccepted:vi.func,onDropRejected:vi.func,onError:vi.func,validator:vi.func};var Z1={isFocused:!1,isFileDialogActive:!1,isDragActive:!1,isDragAccept:!1,isDragReject:!1,acceptedFiles:[],fileRejections:[]};function K1(){var i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},e=ki(ki({},k3),i),t=e.accept,n=e.disabled,a=e.getFilesFromEvent,s=e.maxSize,l=e.minSize,u=e.multiple,d=e.maxFiles,p=e.onDragEnter,g=e.onDragLeave,y=e.onDragOver,_=e.onDrop,b=e.onDropAccepted,x=e.onDropRejected,T=e.onFileDialogCancel,w=e.onFileDialogOpen,S=e.useFsAccessApi,C=e.autoFocus,N=e.preventDropOnDocument,O=e.noClick,P=e.noKeyboard,U=e.noDrag,z=e.noDragEventsBubbling,H=e.onError,D=e.validator,L=re.useMemo(function(){return FI(t)},[t]),j=re.useMemo(function(){return BI(t)},[t]),W=re.useMemo(function(){return typeof w=="function"?w:oA},[w]),X=re.useMemo(function(){return typeof T=="function"?T:oA},[T]),K=re.useRef(null),le=re.useRef(null),k=re.useReducer(eP,Z1),Z=yS(k,2),ne=Z[0],pe=Z[1],ge=ne.isFocused,J=ne.isFileDialogActive,ce=re.useRef(typeof window<"u"&&window.isSecureContext&&S&&zI()),Se=function(){!ce.current&&J&&setTimeout(function(){if(le.current){var se=le.current.files;se.length||(pe({type:"closeDialog"}),X())}},300)};re.useEffect(function(){return window.addEventListener("focus",Se,!1),function(){window.removeEventListener("focus",Se,!1)}},[le,J,X,ce]);var Le=re.useRef([]),nt=function(se){K.current&&K.current.contains(se.target)||(se.preventDefault(),Le.current=[])};re.useEffect(function(){return N&&(document.addEventListener("dragover",rA,!1),document.addEventListener("drop",nt,!1)),function(){N&&(document.removeEventListener("dragover",rA),document.removeEventListener("drop",nt))}},[K,N]),re.useEffect(function(){return!n&&C&&K.current&&K.current.focus(),function(){}},[K,C,n]);var ve=re.useCallback(function(B){H?H(B):console.error(B)},[H]),Ce=re.useCallback(function(B){B.preventDefault(),B.persist(),mt(B),Le.current=[].concat(XI(Le.current),[B.target]),X0(B)&&Promise.resolve(a(B)).then(function(se){if(!(o_(B)&&!z)){var Re=se.length,ke=Re>0&&UI({files:se,accept:L,minSize:l,maxSize:s,multiple:u,maxFiles:d,validator:D}),Oe=Re>0&&!ke;pe({isDragAccept:ke,isDragReject:Oe,isDragActive:!0,type:"setDraggedFiles"}),p&&p(B)}}).catch(function(se){return ve(se)})},[a,p,ve,z,L,l,s,u,d,D]),Je=re.useCallback(function(B){B.preventDefault(),B.persist(),mt(B);var se=X0(B);if(se&&B.dataTransfer)try{B.dataTransfer.dropEffect="copy"}catch{}return se&&y&&y(B),!1},[y,z]),yt=re.useCallback(function(B){B.preventDefault(),B.persist(),mt(B);var se=Le.current.filter(function(ke){return K.current&&K.current.contains(ke)}),Re=se.indexOf(B.target);Re!==-1&&se.splice(Re,1),Le.current=se,!(se.length>0)&&(pe({type:"setDraggedFiles",isDragActive:!1,isDragAccept:!1,isDragReject:!1}),X0(B)&&g&&g(B))},[K,g,z]),St=re.useCallback(function(B,se){var Re=[],ke=[];B.forEach(function(Oe){var Tt=I3(Oe,L),dt=yS(Tt,2),Nt=dt[0],jt=dt[1],Xe=P3(Oe,l,s),qe=yS(Xe,2),Et=qe[0],ae=qe[1],Ee=D?D(Oe):null;if(Nt&&Et&&!Ee)Re.push(Oe);else{var Qe=[jt,ae];Ee&&(Qe=Qe.concat(Ee)),ke.push({file:Oe,errors:Qe.filter(function(ue){return ue})})}}),(!u&&Re.length>1||u&&d>=1&&Re.length>d)&&(Re.forEach(function(Oe){ke.push({file:Oe,errors:[DI]})}),Re.splice(0)),pe({acceptedFiles:Re,fileRejections:ke,isDragReject:ke.length>0,type:"setFiles"}),_&&_(Re,ke,se),ke.length>0&&x&&x(ke,se),Re.length>0&&b&&b(Re,se)},[pe,u,L,l,s,d,_,b,x,D]),$t=re.useCallback(function(B){B.preventDefault(),B.persist(),mt(B),Le.current=[],X0(B)&&Promise.resolve(a(B)).then(function(se){o_(B)&&!z||St(se,B)}).catch(function(se){return ve(se)}),pe({type:"reset"})},[a,St,ve,z]),nn=re.useCallback(function(){if(ce.current){pe({type:"openDialog"}),W();var B={multiple:u,types:j};window.showOpenFilePicker(B).then(function(se){return a(se)}).then(function(se){St(se,null),pe({type:"closeDialog"})}).catch(function(se){kI(se)?(X(se),pe({type:"closeDialog"})):HI(se)?(ce.current=!1,le.current?(le.current.value=null,le.current.click()):ve(new Error("Cannot open the file picker because the https://developer.mozilla.org/en-US/docs/Web/API/File_System_Access_API is not supported and no <input> was provided."))):ve(se)});return}le.current&&(pe({type:"openDialog"}),W(),le.current.value=null,le.current.click())},[pe,W,X,S,St,ve,j,u]),Vt=re.useCallback(function(B){!K.current||!K.current.isEqualNode(B.target)||(B.key===" "||B.key==="Enter"||B.keyCode===32||B.keyCode===13)&&(B.preventDefault(),nn())},[K,nn]),xe=re.useCallback(function(){pe({type:"focus"})},[]),ze=re.useCallback(function(){pe({type:"blur"})},[]),je=re.useCallback(function(){O||(PI()?setTimeout(nn,0):nn())},[O,nn]),ot=function(se){return n?null:se},ie=function(se){return P?null:ot(se)},zt=function(se){return U?null:ot(se)},mt=function(se){z&&se.stopPropagation()},Bt=re.useMemo(function(){return function(){var B=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},se=B.refKey,Re=se===void 0?"ref":se,ke=B.role,Oe=B.onKeyDown,Tt=B.onFocus,dt=B.onBlur,Nt=B.onClick,jt=B.onDragEnter,Xe=B.onDragOver,qe=B.onDragLeave,Et=B.onDrop,ae=l_(B,GI);return ki(ki(Y1({onKeyDown:ie(fl(Oe,Vt)),onFocus:ie(fl(Tt,xe)),onBlur:ie(fl(dt,ze)),onClick:ot(fl(Nt,je)),onDragEnter:zt(fl(jt,Ce)),onDragOver:zt(fl(Xe,Je)),onDragLeave:zt(fl(qe,yt)),onDrop:zt(fl(Et,$t)),role:typeof ke=="string"&&ke!==""?ke:"presentation"},Re,K),!n&&!P?{tabIndex:0}:{}),ae)}},[K,Vt,xe,ze,je,Ce,Je,yt,$t,P,U,n]),gt=re.useCallback(function(B){B.stopPropagation()},[]),te=re.useMemo(function(){return function(){var B=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},se=B.refKey,Re=se===void 0?"ref":se,ke=B.onChange,Oe=B.onClick,Tt=l_(B,qI),dt=Y1({accept:L,multiple:u,type:"file",style:{border:0,clip:"rect(0, 0, 0, 0)",clipPath:"inset(50%)",height:"1px",margin:"0 -1px -1px 0",overflow:"hidden",padding:0,position:"absolute",width:"1px",whiteSpace:"nowrap"},onChange:ot(fl(ke,$t)),onClick:ot(fl(Oe,gt)),tabIndex:-1},Re,le);return ki(ki({},dt),Tt)}},[le,t,u,$t,n]);return ki(ki({},ne),{},{isFocused:ge&&!n,getRootProps:Bt,getInputProps:te,rootRef:K,inputRef:le,open:ot(nn)})}function eP(i,e){switch(e.type){case"focus":return ki(ki({},i),{},{isFocused:!0});case"blur":return ki(ki({},i),{},{isFocused:!1});case"openDialog":return ki(ki({},Z1),{},{isFileDialogActive:!0});case"closeDialog":return ki(ki({},i),{},{isFileDialogActive:!1});case"setDraggedFiles":return ki(ki({},i),{},{isDragActive:e.isDragActive,isDragAccept:e.isDragAccept,isDragReject:e.isDragReject});case"setFiles":return ki(ki({},i),{},{acceptedFiles:e.acceptedFiles,fileRejections:e.fileRejections,isDragReject:e.isDragReject});case"reset":return ki({},Z1);default:return i}}function oA(){}var _S={exports:{}},nc={};/**
 * @license React
 * react-reconciler-constants.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var lA;function tP(){return lA||(lA=1,nc.ConcurrentRoot=1,nc.ContinuousEventPriority=8,nc.DefaultEventPriority=32,nc.DiscreteEventPriority=2,nc.IdleEventPriority=268435456,nc.LegacyRoot=0,nc.NoEventPriority=0),nc}var cA;function nP(){return cA||(cA=1,_S.exports=tP()),_S.exports}var Xy=nP();/**
 * @license
 * Copyright 2010-2025 Three.js Authors
 * SPDX-License-Identifier: MIT
 */const yp="182",Uh={LEFT:0,MIDDLE:1,RIGHT:2,ROTATE:0,DOLLY:1,PAN:2},Lh={ROTATE:0,PAN:1,DOLLY_PAN:2,DOLLY_ROTATE:3},H3=0,J1=1,V3=2,iP=3,j3=0,Jd=1,yg=2,Hh=3,dc=0,jr=1,To=2,Ro=0,Wh=1,Q1=2,$1=3,eE=4,G3=5,fu=100,q3=101,X3=102,W3=103,Y3=104,Z3=200,K3=201,J3=202,Q3=203,c_=204,u_=205,$3=206,eN=207,tN=208,nN=209,iN=210,aN=211,rN=212,sN=213,oN=214,h_=0,f_=1,d_=2,Kh=3,p_=4,m_=5,g_=6,v_=7,ev=0,lN=1,cN=2,qs=0,PE=1,zE=2,BE=3,ub=4,FE=5,kE=6,HE=7,tE="attached",uN="detached",vu=300,No=301,yu=302,ip=303,Ug=304,_p=306,Lg=1e3,Qi=1001,Ig=1002,Vi=1003,VE=1004,aP=1004,Xd=1005,rP=1005,Vn=1006,_g=1007,sP=1007,yl=1008,nE=1008,ka=1009,hb=1010,fb=1011,ap=1012,tv=1013,xs=1014,Di=1015,ji=1016,db=1017,pb=1018,rp=1020,jE=35902,GE=35899,qE=1021,XE=1022,sa=1023,xl=1026,du=1027,nv=1028,iv=1029,Jh=1030,mb=1031,oP=1032,gb=1033,bg=33776,xg=33777,Sg=33778,Eg=33779,y_=35840,__=35841,b_=35842,x_=35843,S_=36196,E_=37492,M_=37496,w_=37488,T_=37489,A_=37490,C_=37491,R_=37808,N_=37809,O_=37810,D_=37811,U_=37812,L_=37813,I_=37814,P_=37815,z_=37816,B_=37817,F_=37818,k_=37819,H_=37820,V_=37821,j_=36492,G_=36494,q_=36495,X_=36283,W_=36284,Y_=36285,Z_=36286,hN=2200,fN=2201,dN=2202,Pg=2300,K_=2301,Wy=2302,Vh=2400,jh=2401,zg=2402,vb=2500,WE=2501,lP=0,cP=1,uP=2,pN=3200,hP=3201,fP=3202,dP=3203,Su=0,mN=1,uc="",Fa="srgb",Oo="srgb-linear",Bg="linear",ri="srgb",pP="",mP="rg",gP="ga",vP=0,Ih=7680,yP=7681,_P=7682,bP=7683,xP=34055,SP=34056,EP=5386,MP=512,wP=513,TP=514,AP=515,CP=516,RP=517,NP=518,iE=519,gN=512,vN=513,yN=514,yb=515,_N=516,bN=517,_b=518,xN=519,Fg=35044,OP=35048,DP=35040,UP=35045,LP=35049,IP=35041,PP=35046,zP=35050,BP=35042,FP="100",aE="300 es",_s=2e3,sp=2001,kP={COMPUTE:"compute",RENDER:"render"},HP={PERSPECTIVE:"perspective",LINEAR:"linear",FLAT:"flat"},VP={NORMAL:"normal",CENTROID:"centroid",SAMPLE:"sample",FIRST:"first",EITHER:"either"};function SN(i){for(let e=i.length-1;e>=0;--e)if(i[e]>=65535)return!0;return!1}const jP={Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array};function Wd(i,e){return new jP[i](e)}function EN(i){return ArrayBuffer.isView(i)&&!(i instanceof DataView)}function kg(i){return document.createElementNS("http://www.w3.org/1999/xhtml",i)}function MN(){const i=kg("canvas");return i.style.display="block",i}const uA={};let _u=null;function GP(i){_u=i}function qP(){return _u}function Hg(...i){const e="THREE."+i.shift();_u?_u("log",e,...i):console.log(e,...i)}function Rt(...i){const e="THREE."+i.shift();_u?_u("warn",e,...i):console.warn(e,...i)}function Qt(...i){const e="THREE."+i.shift();_u?_u("error",e,...i):console.error(e,...i)}function op(...i){const e=i.join(" ");e in uA||(uA[e]=!0,Rt(...i))}function XP(i,e,t){return new Promise(function(n,a){function s(){switch(i.clientWaitSync(e,i.SYNC_FLUSH_COMMANDS_BIT,0)){case i.WAIT_FAILED:a();break;case i.TIMEOUT_EXPIRED:setTimeout(s,t);break;default:n()}}setTimeout(s,t)})}let Sl=class{addEventListener(e,t){this._listeners===void 0&&(this._listeners={});const n=this._listeners;n[e]===void 0&&(n[e]=[]),n[e].indexOf(t)===-1&&n[e].push(t)}hasEventListener(e,t){const n=this._listeners;return n===void 0?!1:n[e]!==void 0&&n[e].indexOf(t)!==-1}removeEventListener(e,t){const n=this._listeners;if(n===void 0)return;const a=n[e];if(a!==void 0){const s=a.indexOf(t);s!==-1&&a.splice(s,1)}}dispatchEvent(e){const t=this._listeners;if(t===void 0)return;const n=t[e.type];if(n!==void 0){e.target=this;const a=n.slice(0);for(let s=0,l=a.length;s<l;s++)a[s].call(this,e);e.target=null}}};const pr=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"];let hA=1234567;const Yh=Math.PI/180,lp=180/Math.PI;function bs(){const i=Math.random()*4294967295|0,e=Math.random()*4294967295|0,t=Math.random()*4294967295|0,n=Math.random()*4294967295|0;return(pr[i&255]+pr[i>>8&255]+pr[i>>16&255]+pr[i>>24&255]+"-"+pr[e&255]+pr[e>>8&255]+"-"+pr[e>>16&15|64]+pr[e>>24&255]+"-"+pr[t&63|128]+pr[t>>8&255]+"-"+pr[t>>16&255]+pr[t>>24&255]+pr[n&255]+pr[n>>8&255]+pr[n>>16&255]+pr[n>>24&255]).toLowerCase()}function hn(i,e,t){return Math.max(e,Math.min(t,i))}function YE(i,e){return(i%e+e)%e}function WP(i,e,t,n,a){return n+(i-e)*(a-n)/(t-e)}function YP(i,e,t){return i!==e?(t-i)/(e-i):0}function Mg(i,e,t){return(1-t)*i+t*e}function ZP(i,e,t,n){return Mg(i,e,1-Math.exp(-t*n))}function KP(i,e=1){return e-Math.abs(YE(i,e*2)-e)}function JP(i,e,t){return i<=e?0:i>=t?1:(i=(i-e)/(t-e),i*i*(3-2*i))}function QP(i,e,t){return i<=e?0:i>=t?1:(i=(i-e)/(t-e),i*i*i*(i*(i*6-15)+10))}function $P(i,e){return i+Math.floor(Math.random()*(e-i+1))}function ez(i,e){return i+Math.random()*(e-i)}function tz(i){return i*(.5-Math.random())}function nz(i){i!==void 0&&(hA=i);let e=hA+=1831565813;return e=Math.imul(e^e>>>15,e|1),e^=e+Math.imul(e^e>>>7,e|61),((e^e>>>14)>>>0)/4294967296}function iz(i){return i*Yh}function az(i){return i*lp}function rz(i){return(i&i-1)===0&&i!==0}function sz(i){return Math.pow(2,Math.ceil(Math.log(i)/Math.LN2))}function oz(i){return Math.pow(2,Math.floor(Math.log(i)/Math.LN2))}function lz(i,e,t,n,a){const s=Math.cos,l=Math.sin,u=s(t/2),d=l(t/2),p=s((e+n)/2),g=l((e+n)/2),y=s((e-n)/2),_=l((e-n)/2),b=s((n-e)/2),x=l((n-e)/2);switch(a){case"XYX":i.set(u*g,d*y,d*_,u*p);break;case"YZY":i.set(d*_,u*g,d*y,u*p);break;case"ZXZ":i.set(d*y,d*_,u*g,u*p);break;case"XZX":i.set(u*g,d*x,d*b,u*p);break;case"YXY":i.set(d*b,u*g,d*x,u*p);break;case"ZYZ":i.set(d*x,d*b,u*g,u*p);break;default:Rt("MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: "+a)}}function Vr(i,e){switch(e.constructor){case Float32Array:return i;case Uint32Array:return i/4294967295;case Uint16Array:return i/65535;case Uint8Array:return i/255;case Int32Array:return Math.max(i/2147483647,-1);case Int16Array:return Math.max(i/32767,-1);case Int8Array:return Math.max(i/127,-1);default:throw new Error("Invalid component type.")}}function Mn(i,e){switch(e.constructor){case Float32Array:return i;case Uint32Array:return Math.round(i*4294967295);case Uint16Array:return Math.round(i*65535);case Uint8Array:return Math.round(i*255);case Int32Array:return Math.round(i*2147483647);case Int16Array:return Math.round(i*32767);case Int8Array:return Math.round(i*127);default:throw new Error("Invalid component type.")}}const wg={DEG2RAD:Yh,RAD2DEG:lp,generateUUID:bs,clamp:hn,euclideanModulo:YE,mapLinear:WP,inverseLerp:YP,lerp:Mg,damp:ZP,pingpong:KP,smoothstep:JP,smootherstep:QP,randInt:$P,randFloat:ez,randFloatSpread:tz,seededRandom:nz,degToRad:iz,radToDeg:az,isPowerOfTwo:rz,ceilPowerOfTwo:sz,floorPowerOfTwo:oz,setQuaternionFromProperEuler:lz,normalize:Mn,denormalize:Vr};class Ke{constructor(e=0,t=0){Ke.prototype.isVector2=!0,this.x=e,this.y=t}get width(){return this.x}set width(e){this.x=e}get height(){return this.y}set height(e){this.y=e}set(e,t){return this.x=e,this.y=t,this}setScalar(e){return this.x=e,this.y=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y)}copy(e){return this.x=e.x,this.y=e.y,this}add(e){return this.x+=e.x,this.y+=e.y,this}addScalar(e){return this.x+=e,this.y+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this}subScalar(e){return this.x-=e,this.y-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this}multiply(e){return this.x*=e.x,this.y*=e.y,this}multiplyScalar(e){return this.x*=e,this.y*=e,this}divide(e){return this.x/=e.x,this.y/=e.y,this}divideScalar(e){return this.multiplyScalar(1/e)}applyMatrix3(e){const t=this.x,n=this.y,a=e.elements;return this.x=a[0]*t+a[3]*n+a[6],this.y=a[1]*t+a[4]*n+a[7],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this}clamp(e,t){return this.x=hn(this.x,e.x,t.x),this.y=hn(this.y,e.y,t.y),this}clampScalar(e,t){return this.x=hn(this.x,e,t),this.y=hn(this.y,e,t),this}clampLength(e,t){const n=this.length();return this.divideScalar(n||1).multiplyScalar(hn(n,e,t))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(e){return this.x*e.x+this.y*e.y}cross(e){return this.x*e.y-this.y*e.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}angleTo(e){const t=Math.sqrt(this.lengthSq()*e.lengthSq());if(t===0)return Math.PI/2;const n=this.dot(e)/t;return Math.acos(hn(n,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,n=this.y-e.y;return t*t+n*n}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this}lerpVectors(e,t,n){return this.x=e.x+(t.x-e.x)*n,this.y=e.y+(t.y-e.y)*n,this}equals(e){return e.x===this.x&&e.y===this.y}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this}rotateAround(e,t){const n=Math.cos(t),a=Math.sin(t),s=this.x-e.x,l=this.y-e.y;return this.x=s*n-l*a+e.x,this.y=s*a+l*n+e.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}}class wa{constructor(e=0,t=0,n=0,a=1){this.isQuaternion=!0,this._x=e,this._y=t,this._z=n,this._w=a}static slerpFlat(e,t,n,a,s,l,u){let d=n[a+0],p=n[a+1],g=n[a+2],y=n[a+3],_=s[l+0],b=s[l+1],x=s[l+2],T=s[l+3];if(u<=0){e[t+0]=d,e[t+1]=p,e[t+2]=g,e[t+3]=y;return}if(u>=1){e[t+0]=_,e[t+1]=b,e[t+2]=x,e[t+3]=T;return}if(y!==T||d!==_||p!==b||g!==x){let w=d*_+p*b+g*x+y*T;w<0&&(_=-_,b=-b,x=-x,T=-T,w=-w);let S=1-u;if(w<.9995){const C=Math.acos(w),N=Math.sin(C);S=Math.sin(S*C)/N,u=Math.sin(u*C)/N,d=d*S+_*u,p=p*S+b*u,g=g*S+x*u,y=y*S+T*u}else{d=d*S+_*u,p=p*S+b*u,g=g*S+x*u,y=y*S+T*u;const C=1/Math.sqrt(d*d+p*p+g*g+y*y);d*=C,p*=C,g*=C,y*=C}}e[t]=d,e[t+1]=p,e[t+2]=g,e[t+3]=y}static multiplyQuaternionsFlat(e,t,n,a,s,l){const u=n[a],d=n[a+1],p=n[a+2],g=n[a+3],y=s[l],_=s[l+1],b=s[l+2],x=s[l+3];return e[t]=u*x+g*y+d*b-p*_,e[t+1]=d*x+g*_+p*y-u*b,e[t+2]=p*x+g*b+u*_-d*y,e[t+3]=g*x-u*y-d*_-p*b,e}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get w(){return this._w}set w(e){this._w=e,this._onChangeCallback()}set(e,t,n,a){return this._x=e,this._y=t,this._z=n,this._w=a,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=e.w,this._onChangeCallback(),this}setFromEuler(e,t=!0){const n=e._x,a=e._y,s=e._z,l=e._order,u=Math.cos,d=Math.sin,p=u(n/2),g=u(a/2),y=u(s/2),_=d(n/2),b=d(a/2),x=d(s/2);switch(l){case"XYZ":this._x=_*g*y+p*b*x,this._y=p*b*y-_*g*x,this._z=p*g*x+_*b*y,this._w=p*g*y-_*b*x;break;case"YXZ":this._x=_*g*y+p*b*x,this._y=p*b*y-_*g*x,this._z=p*g*x-_*b*y,this._w=p*g*y+_*b*x;break;case"ZXY":this._x=_*g*y-p*b*x,this._y=p*b*y+_*g*x,this._z=p*g*x+_*b*y,this._w=p*g*y-_*b*x;break;case"ZYX":this._x=_*g*y-p*b*x,this._y=p*b*y+_*g*x,this._z=p*g*x-_*b*y,this._w=p*g*y+_*b*x;break;case"YZX":this._x=_*g*y+p*b*x,this._y=p*b*y+_*g*x,this._z=p*g*x-_*b*y,this._w=p*g*y-_*b*x;break;case"XZY":this._x=_*g*y-p*b*x,this._y=p*b*y-_*g*x,this._z=p*g*x+_*b*y,this._w=p*g*y+_*b*x;break;default:Rt("Quaternion: .setFromEuler() encountered an unknown order: "+l)}return t===!0&&this._onChangeCallback(),this}setFromAxisAngle(e,t){const n=t/2,a=Math.sin(n);return this._x=e.x*a,this._y=e.y*a,this._z=e.z*a,this._w=Math.cos(n),this._onChangeCallback(),this}setFromRotationMatrix(e){const t=e.elements,n=t[0],a=t[4],s=t[8],l=t[1],u=t[5],d=t[9],p=t[2],g=t[6],y=t[10],_=n+u+y;if(_>0){const b=.5/Math.sqrt(_+1);this._w=.25/b,this._x=(g-d)*b,this._y=(s-p)*b,this._z=(l-a)*b}else if(n>u&&n>y){const b=2*Math.sqrt(1+n-u-y);this._w=(g-d)/b,this._x=.25*b,this._y=(a+l)/b,this._z=(s+p)/b}else if(u>y){const b=2*Math.sqrt(1+u-n-y);this._w=(s-p)/b,this._x=(a+l)/b,this._y=.25*b,this._z=(d+g)/b}else{const b=2*Math.sqrt(1+y-n-u);this._w=(l-a)/b,this._x=(s+p)/b,this._y=(d+g)/b,this._z=.25*b}return this._onChangeCallback(),this}setFromUnitVectors(e,t){let n=e.dot(t)+1;return n<1e-8?(n=0,Math.abs(e.x)>Math.abs(e.z)?(this._x=-e.y,this._y=e.x,this._z=0,this._w=n):(this._x=0,this._y=-e.z,this._z=e.y,this._w=n)):(this._x=e.y*t.z-e.z*t.y,this._y=e.z*t.x-e.x*t.z,this._z=e.x*t.y-e.y*t.x,this._w=n),this.normalize()}angleTo(e){return 2*Math.acos(Math.abs(hn(this.dot(e),-1,1)))}rotateTowards(e,t){const n=this.angleTo(e);if(n===0)return this;const a=Math.min(1,t/n);return this.slerp(e,a),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let e=this.length();return e===0?(this._x=0,this._y=0,this._z=0,this._w=1):(e=1/e,this._x=this._x*e,this._y=this._y*e,this._z=this._z*e,this._w=this._w*e),this._onChangeCallback(),this}multiply(e){return this.multiplyQuaternions(this,e)}premultiply(e){return this.multiplyQuaternions(e,this)}multiplyQuaternions(e,t){const n=e._x,a=e._y,s=e._z,l=e._w,u=t._x,d=t._y,p=t._z,g=t._w;return this._x=n*g+l*u+a*p-s*d,this._y=a*g+l*d+s*u-n*p,this._z=s*g+l*p+n*d-a*u,this._w=l*g-n*u-a*d-s*p,this._onChangeCallback(),this}slerp(e,t){if(t<=0)return this;if(t>=1)return this.copy(e);let n=e._x,a=e._y,s=e._z,l=e._w,u=this.dot(e);u<0&&(n=-n,a=-a,s=-s,l=-l,u=-u);let d=1-t;if(u<.9995){const p=Math.acos(u),g=Math.sin(p);d=Math.sin(d*p)/g,t=Math.sin(t*p)/g,this._x=this._x*d+n*t,this._y=this._y*d+a*t,this._z=this._z*d+s*t,this._w=this._w*d+l*t,this._onChangeCallback()}else this._x=this._x*d+n*t,this._y=this._y*d+a*t,this._z=this._z*d+s*t,this._w=this._w*d+l*t,this.normalize();return this}slerpQuaternions(e,t,n){return this.copy(e).slerp(t,n)}random(){const e=2*Math.PI*Math.random(),t=2*Math.PI*Math.random(),n=Math.random(),a=Math.sqrt(1-n),s=Math.sqrt(n);return this.set(a*Math.sin(e),a*Math.cos(e),s*Math.sin(t),s*Math.cos(t))}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w}fromArray(e,t=0){return this._x=e[t],this._y=e[t+1],this._z=e[t+2],this._w=e[t+3],this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._w,e}fromBufferAttribute(e,t){return this._x=e.getX(t),this._y=e.getY(t),this._z=e.getZ(t),this._w=e.getW(t),this._onChangeCallback(),this}toJSON(){return this.toArray()}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._w}}class ee{constructor(e=0,t=0,n=0){ee.prototype.isVector3=!0,this.x=e,this.y=t,this.z=n}set(e,t,n){return n===void 0&&(n=this.z),this.x=e,this.y=t,this.z=n,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this}multiplyVectors(e,t){return this.x=e.x*t.x,this.y=e.y*t.y,this.z=e.z*t.z,this}applyEuler(e){return this.applyQuaternion(fA.setFromEuler(e))}applyAxisAngle(e,t){return this.applyQuaternion(fA.setFromAxisAngle(e,t))}applyMatrix3(e){const t=this.x,n=this.y,a=this.z,s=e.elements;return this.x=s[0]*t+s[3]*n+s[6]*a,this.y=s[1]*t+s[4]*n+s[7]*a,this.z=s[2]*t+s[5]*n+s[8]*a,this}applyNormalMatrix(e){return this.applyMatrix3(e).normalize()}applyMatrix4(e){const t=this.x,n=this.y,a=this.z,s=e.elements,l=1/(s[3]*t+s[7]*n+s[11]*a+s[15]);return this.x=(s[0]*t+s[4]*n+s[8]*a+s[12])*l,this.y=(s[1]*t+s[5]*n+s[9]*a+s[13])*l,this.z=(s[2]*t+s[6]*n+s[10]*a+s[14])*l,this}applyQuaternion(e){const t=this.x,n=this.y,a=this.z,s=e.x,l=e.y,u=e.z,d=e.w,p=2*(l*a-u*n),g=2*(u*t-s*a),y=2*(s*n-l*t);return this.x=t+d*p+l*y-u*g,this.y=n+d*g+u*p-s*y,this.z=a+d*y+s*g-l*p,this}project(e){return this.applyMatrix4(e.matrixWorldInverse).applyMatrix4(e.projectionMatrix)}unproject(e){return this.applyMatrix4(e.projectionMatrixInverse).applyMatrix4(e.matrixWorld)}transformDirection(e){const t=this.x,n=this.y,a=this.z,s=e.elements;return this.x=s[0]*t+s[4]*n+s[8]*a,this.y=s[1]*t+s[5]*n+s[9]*a,this.z=s[2]*t+s[6]*n+s[10]*a,this.normalize()}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this}divideScalar(e){return this.multiplyScalar(1/e)}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this}clamp(e,t){return this.x=hn(this.x,e.x,t.x),this.y=hn(this.y,e.y,t.y),this.z=hn(this.z,e.z,t.z),this}clampScalar(e,t){return this.x=hn(this.x,e,t),this.y=hn(this.y,e,t),this.z=hn(this.z,e,t),this}clampLength(e,t){const n=this.length();return this.divideScalar(n||1).multiplyScalar(hn(n,e,t))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this}lerpVectors(e,t,n){return this.x=e.x+(t.x-e.x)*n,this.y=e.y+(t.y-e.y)*n,this.z=e.z+(t.z-e.z)*n,this}cross(e){return this.crossVectors(this,e)}crossVectors(e,t){const n=e.x,a=e.y,s=e.z,l=t.x,u=t.y,d=t.z;return this.x=a*d-s*u,this.y=s*l-n*d,this.z=n*u-a*l,this}projectOnVector(e){const t=e.lengthSq();if(t===0)return this.set(0,0,0);const n=e.dot(this)/t;return this.copy(e).multiplyScalar(n)}projectOnPlane(e){return bS.copy(this).projectOnVector(e),this.sub(bS)}reflect(e){return this.sub(bS.copy(e).multiplyScalar(2*this.dot(e)))}angleTo(e){const t=Math.sqrt(this.lengthSq()*e.lengthSq());if(t===0)return Math.PI/2;const n=this.dot(e)/t;return Math.acos(hn(n,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,n=this.y-e.y,a=this.z-e.z;return t*t+n*n+a*a}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)+Math.abs(this.z-e.z)}setFromSpherical(e){return this.setFromSphericalCoords(e.radius,e.phi,e.theta)}setFromSphericalCoords(e,t,n){const a=Math.sin(t)*e;return this.x=a*Math.sin(n),this.y=Math.cos(t)*e,this.z=a*Math.cos(n),this}setFromCylindrical(e){return this.setFromCylindricalCoords(e.radius,e.theta,e.y)}setFromCylindricalCoords(e,t,n){return this.x=e*Math.sin(t),this.y=n,this.z=e*Math.cos(t),this}setFromMatrixPosition(e){const t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this}setFromMatrixScale(e){const t=this.setFromMatrixColumn(e,0).length(),n=this.setFromMatrixColumn(e,1).length(),a=this.setFromMatrixColumn(e,2).length();return this.x=t,this.y=n,this.z=a,this}setFromMatrixColumn(e,t){return this.fromArray(e.elements,t*4)}setFromMatrix3Column(e,t){return this.fromArray(e.elements,t*3)}setFromEuler(e){return this.x=e._x,this.y=e._y,this.z=e._z,this}setFromColor(e){return this.x=e.r,this.y=e.g,this.z=e.b,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){const e=Math.random()*Math.PI*2,t=Math.random()*2-1,n=Math.sqrt(1-t*t);return this.x=n*Math.cos(e),this.y=t,this.z=n*Math.sin(e),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}}const bS=new ee,fA=new wa;class Sn{constructor(e,t,n,a,s,l,u,d,p){Sn.prototype.isMatrix3=!0,this.elements=[1,0,0,0,1,0,0,0,1],e!==void 0&&this.set(e,t,n,a,s,l,u,d,p)}set(e,t,n,a,s,l,u,d,p){const g=this.elements;return g[0]=e,g[1]=a,g[2]=u,g[3]=t,g[4]=s,g[5]=d,g[6]=n,g[7]=l,g[8]=p,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(e){const t=this.elements,n=e.elements;return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[4]=n[4],t[5]=n[5],t[6]=n[6],t[7]=n[7],t[8]=n[8],this}extractBasis(e,t,n){return e.setFromMatrix3Column(this,0),t.setFromMatrix3Column(this,1),n.setFromMatrix3Column(this,2),this}setFromMatrix4(e){const t=e.elements;return this.set(t[0],t[4],t[8],t[1],t[5],t[9],t[2],t[6],t[10]),this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const n=e.elements,a=t.elements,s=this.elements,l=n[0],u=n[3],d=n[6],p=n[1],g=n[4],y=n[7],_=n[2],b=n[5],x=n[8],T=a[0],w=a[3],S=a[6],C=a[1],N=a[4],O=a[7],P=a[2],U=a[5],z=a[8];return s[0]=l*T+u*C+d*P,s[3]=l*w+u*N+d*U,s[6]=l*S+u*O+d*z,s[1]=p*T+g*C+y*P,s[4]=p*w+g*N+y*U,s[7]=p*S+g*O+y*z,s[2]=_*T+b*C+x*P,s[5]=_*w+b*N+x*U,s[8]=_*S+b*O+x*z,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[3]*=e,t[6]*=e,t[1]*=e,t[4]*=e,t[7]*=e,t[2]*=e,t[5]*=e,t[8]*=e,this}determinant(){const e=this.elements,t=e[0],n=e[1],a=e[2],s=e[3],l=e[4],u=e[5],d=e[6],p=e[7],g=e[8];return t*l*g-t*u*p-n*s*g+n*u*d+a*s*p-a*l*d}invert(){const e=this.elements,t=e[0],n=e[1],a=e[2],s=e[3],l=e[4],u=e[5],d=e[6],p=e[7],g=e[8],y=g*l-u*p,_=u*d-g*s,b=p*s-l*d,x=t*y+n*_+a*b;if(x===0)return this.set(0,0,0,0,0,0,0,0,0);const T=1/x;return e[0]=y*T,e[1]=(a*p-g*n)*T,e[2]=(u*n-a*l)*T,e[3]=_*T,e[4]=(g*t-a*d)*T,e[5]=(a*s-u*t)*T,e[6]=b*T,e[7]=(n*d-p*t)*T,e[8]=(l*t-n*s)*T,this}transpose(){let e;const t=this.elements;return e=t[1],t[1]=t[3],t[3]=e,e=t[2],t[2]=t[6],t[6]=e,e=t[5],t[5]=t[7],t[7]=e,this}getNormalMatrix(e){return this.setFromMatrix4(e).invert().transpose()}transposeIntoArray(e){const t=this.elements;return e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8],this}setUvTransform(e,t,n,a,s,l,u){const d=Math.cos(s),p=Math.sin(s);return this.set(n*d,n*p,-n*(d*l+p*u)+l+e,-a*p,a*d,-a*(-p*l+d*u)+u+t,0,0,1),this}scale(e,t){return this.premultiply(xS.makeScale(e,t)),this}rotate(e){return this.premultiply(xS.makeRotation(-e)),this}translate(e,t){return this.premultiply(xS.makeTranslation(e,t)),this}makeTranslation(e,t){return e.isVector2?this.set(1,0,e.x,0,1,e.y,0,0,1):this.set(1,0,e,0,1,t,0,0,1),this}makeRotation(e){const t=Math.cos(e),n=Math.sin(e);return this.set(t,-n,0,n,t,0,0,0,1),this}makeScale(e,t){return this.set(e,0,0,0,t,0,0,0,1),this}equals(e){const t=this.elements,n=e.elements;for(let a=0;a<9;a++)if(t[a]!==n[a])return!1;return!0}fromArray(e,t=0){for(let n=0;n<9;n++)this.elements[n]=e[n+t];return this}toArray(e=[],t=0){const n=this.elements;return e[t]=n[0],e[t+1]=n[1],e[t+2]=n[2],e[t+3]=n[3],e[t+4]=n[4],e[t+5]=n[5],e[t+6]=n[6],e[t+7]=n[7],e[t+8]=n[8],e}clone(){return new this.constructor().fromArray(this.elements)}}const xS=new Sn,dA=new Sn().set(.4123908,.3575843,.1804808,.212639,.7151687,.0721923,.0193308,.1191948,.9505322),pA=new Sn().set(3.2409699,-1.5373832,-.4986108,-.9692436,1.8759675,.0415551,.0556301,-.203977,1.0569715);function cz(){const i={enabled:!0,workingColorSpace:Oo,spaces:{},convert:function(a,s,l){return this.enabled===!1||s===l||!s||!l||(this.spaces[s].transfer===ri&&(a.r=fc(a.r),a.g=fc(a.g),a.b=fc(a.b)),this.spaces[s].primaries!==this.spaces[l].primaries&&(a.applyMatrix3(this.spaces[s].toXYZ),a.applyMatrix3(this.spaces[l].fromXYZ)),this.spaces[l].transfer===ri&&(a.r=Qd(a.r),a.g=Qd(a.g),a.b=Qd(a.b))),a},workingToColorSpace:function(a,s){return this.convert(a,this.workingColorSpace,s)},colorSpaceToWorking:function(a,s){return this.convert(a,s,this.workingColorSpace)},getPrimaries:function(a){return this.spaces[a].primaries},getTransfer:function(a){return a===uc?Bg:this.spaces[a].transfer},getToneMappingMode:function(a){return this.spaces[a].outputColorSpaceConfig.toneMappingMode||"standard"},getLuminanceCoefficients:function(a,s=this.workingColorSpace){return a.fromArray(this.spaces[s].luminanceCoefficients)},define:function(a){Object.assign(this.spaces,a)},_getMatrix:function(a,s,l){return a.copy(this.spaces[s].toXYZ).multiply(this.spaces[l].fromXYZ)},_getDrawingBufferColorSpace:function(a){return this.spaces[a].outputColorSpaceConfig.drawingBufferColorSpace},_getUnpackColorSpace:function(a=this.workingColorSpace){return this.spaces[a].workingColorSpaceConfig.unpackColorSpace},fromWorkingColorSpace:function(a,s){return op("ColorManagement: .fromWorkingColorSpace() has been renamed to .workingToColorSpace()."),i.workingToColorSpace(a,s)},toWorkingColorSpace:function(a,s){return op("ColorManagement: .toWorkingColorSpace() has been renamed to .colorSpaceToWorking()."),i.colorSpaceToWorking(a,s)}},e=[.64,.33,.3,.6,.15,.06],t=[.2126,.7152,.0722],n=[.3127,.329];return i.define({[Oo]:{primaries:e,whitePoint:n,transfer:Bg,toXYZ:dA,fromXYZ:pA,luminanceCoefficients:t,workingColorSpaceConfig:{unpackColorSpace:Fa},outputColorSpaceConfig:{drawingBufferColorSpace:Fa}},[Fa]:{primaries:e,whitePoint:n,transfer:ri,toXYZ:dA,fromXYZ:pA,luminanceCoefficients:t,outputColorSpaceConfig:{drawingBufferColorSpace:Fa}}}),i}const Pn=cz();function fc(i){return i<.04045?i*.0773993808:Math.pow(i*.9478672986+.0521327014,2.4)}function Qd(i){return i<.0031308?i*12.92:1.055*Math.pow(i,.41666)-.055}let _d;class wN{static getDataURL(e,t="image/png"){if(/^data:/i.test(e.src)||typeof HTMLCanvasElement>"u")return e.src;let n;if(e instanceof HTMLCanvasElement)n=e;else{_d===void 0&&(_d=kg("canvas")),_d.width=e.width,_d.height=e.height;const a=_d.getContext("2d");e instanceof ImageData?a.putImageData(e,0,0):a.drawImage(e,0,0,e.width,e.height),n=_d}return n.toDataURL(t)}static sRGBToLinear(e){if(typeof HTMLImageElement<"u"&&e instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&e instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&e instanceof ImageBitmap){const t=kg("canvas");t.width=e.width,t.height=e.height;const n=t.getContext("2d");n.drawImage(e,0,0,e.width,e.height);const a=n.getImageData(0,0,e.width,e.height),s=a.data;for(let l=0;l<s.length;l++)s[l]=fc(s[l]/255)*255;return n.putImageData(a,0,0),t}else if(e.data){const t=e.data.slice(0);for(let n=0;n<t.length;n++)t instanceof Uint8Array||t instanceof Uint8ClampedArray?t[n]=Math.floor(fc(t[n]/255)*255):t[n]=fc(t[n]);return{data:t,width:e.width,height:e.height}}else return Rt("ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."),e}}let uz=0;class pu{constructor(e=null){this.isSource=!0,Object.defineProperty(this,"id",{value:uz++}),this.uuid=bs(),this.data=e,this.dataReady=!0,this.version=0}getSize(e){const t=this.data;return typeof HTMLVideoElement<"u"&&t instanceof HTMLVideoElement?e.set(t.videoWidth,t.videoHeight,0):typeof VideoFrame<"u"&&t instanceof VideoFrame?e.set(t.displayHeight,t.displayWidth,0):t!==null?e.set(t.width,t.height,t.depth||0):e.set(0,0,0),e}set needsUpdate(e){e===!0&&this.version++}toJSON(e){const t=e===void 0||typeof e=="string";if(!t&&e.images[this.uuid]!==void 0)return e.images[this.uuid];const n={uuid:this.uuid,url:""},a=this.data;if(a!==null){let s;if(Array.isArray(a)){s=[];for(let l=0,u=a.length;l<u;l++)a[l].isDataTexture?s.push(SS(a[l].image)):s.push(SS(a[l]))}else s=SS(a);n.url=s}return t||(e.images[this.uuid]=n),n}}function SS(i){return typeof HTMLImageElement<"u"&&i instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&i instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&i instanceof ImageBitmap?wN.getDataURL(i):i.data?{data:Array.from(i.data),width:i.width,height:i.height,type:i.data.constructor.name}:(Rt("Texture: Unable to serialize Texture."),{})}let hz=0;const ES=new ee;class hi extends Sl{constructor(e=hi.DEFAULT_IMAGE,t=hi.DEFAULT_MAPPING,n=Qi,a=Qi,s=Vn,l=yl,u=sa,d=ka,p=hi.DEFAULT_ANISOTROPY,g=uc){super(),this.isTexture=!0,Object.defineProperty(this,"id",{value:hz++}),this.uuid=bs(),this.name="",this.source=new pu(e),this.mipmaps=[],this.mapping=t,this.channel=0,this.wrapS=n,this.wrapT=a,this.magFilter=s,this.minFilter=l,this.anisotropy=p,this.format=u,this.internalFormat=null,this.type=d,this.offset=new Ke(0,0),this.repeat=new Ke(1,1),this.center=new Ke(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new Sn,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.colorSpace=g,this.userData={},this.updateRanges=[],this.version=0,this.onUpdate=null,this.renderTarget=null,this.isRenderTargetTexture=!1,this.isArrayTexture=!!(e&&e.depth&&e.depth>1),this.pmremVersion=0}get width(){return this.source.getSize(ES).x}get height(){return this.source.getSize(ES).y}get depth(){return this.source.getSize(ES).z}get image(){return this.source.data}set image(e=null){this.source.data=e}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}addUpdateRange(e,t){this.updateRanges.push({start:e,count:t})}clearUpdateRanges(){this.updateRanges.length=0}clone(){return new this.constructor().copy(this)}copy(e){return this.name=e.name,this.source=e.source,this.mipmaps=e.mipmaps.slice(0),this.mapping=e.mapping,this.channel=e.channel,this.wrapS=e.wrapS,this.wrapT=e.wrapT,this.magFilter=e.magFilter,this.minFilter=e.minFilter,this.anisotropy=e.anisotropy,this.format=e.format,this.internalFormat=e.internalFormat,this.type=e.type,this.offset.copy(e.offset),this.repeat.copy(e.repeat),this.center.copy(e.center),this.rotation=e.rotation,this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrix.copy(e.matrix),this.generateMipmaps=e.generateMipmaps,this.premultiplyAlpha=e.premultiplyAlpha,this.flipY=e.flipY,this.unpackAlignment=e.unpackAlignment,this.colorSpace=e.colorSpace,this.renderTarget=e.renderTarget,this.isRenderTargetTexture=e.isRenderTargetTexture,this.isArrayTexture=e.isArrayTexture,this.userData=JSON.parse(JSON.stringify(e.userData)),this.needsUpdate=!0,this}setValues(e){for(const t in e){const n=e[t];if(n===void 0){Rt(`Texture.setValues(): parameter '${t}' has value of undefined.`);continue}const a=this[t];if(a===void 0){Rt(`Texture.setValues(): property '${t}' does not exist.`);continue}a&&n&&a.isVector2&&n.isVector2||a&&n&&a.isVector3&&n.isVector3||a&&n&&a.isMatrix3&&n.isMatrix3?a.copy(n):this[t]=n}}toJSON(e){const t=e===void 0||typeof e=="string";if(!t&&e.textures[this.uuid]!==void 0)return e.textures[this.uuid];const n={metadata:{version:4.7,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,image:this.source.toJSON(e).uuid,mapping:this.mapping,channel:this.channel,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,internalFormat:this.internalFormat,type:this.type,colorSpace:this.colorSpace,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,generateMipmaps:this.generateMipmaps,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};return Object.keys(this.userData).length>0&&(n.userData=this.userData),t||(e.textures[this.uuid]=n),n}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(e){if(this.mapping!==vu)return e;if(e.applyMatrix3(this.matrix),e.x<0||e.x>1)switch(this.wrapS){case Lg:e.x=e.x-Math.floor(e.x);break;case Qi:e.x=e.x<0?0:1;break;case Ig:Math.abs(Math.floor(e.x)%2)===1?e.x=Math.ceil(e.x)-e.x:e.x=e.x-Math.floor(e.x);break}if(e.y<0||e.y>1)switch(this.wrapT){case Lg:e.y=e.y-Math.floor(e.y);break;case Qi:e.y=e.y<0?0:1;break;case Ig:Math.abs(Math.floor(e.y)%2)===1?e.y=Math.ceil(e.y)-e.y:e.y=e.y-Math.floor(e.y);break}return this.flipY&&(e.y=1-e.y),e}set needsUpdate(e){e===!0&&(this.version++,this.source.needsUpdate=!0)}set needsPMREMUpdate(e){e===!0&&this.pmremVersion++}}hi.DEFAULT_IMAGE=null;hi.DEFAULT_MAPPING=vu;hi.DEFAULT_ANISOTROPY=1;class yi{constructor(e=0,t=0,n=0,a=1){yi.prototype.isVector4=!0,this.x=e,this.y=t,this.z=n,this.w=a}get width(){return this.z}set width(e){this.z=e}get height(){return this.w}set height(e){this.w=e}set(e,t,n,a){return this.x=e,this.y=t,this.z=n,this.w=a,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this.w=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setW(e){return this.w=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;case 3:this.w=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=e.w!==void 0?e.w:1,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this.w+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this.w=e.w+t.w,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this.w+=e.w*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this.w-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this.w=e.w-t.w,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this.w*=e.w,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this}applyMatrix4(e){const t=this.x,n=this.y,a=this.z,s=this.w,l=e.elements;return this.x=l[0]*t+l[4]*n+l[8]*a+l[12]*s,this.y=l[1]*t+l[5]*n+l[9]*a+l[13]*s,this.z=l[2]*t+l[6]*n+l[10]*a+l[14]*s,this.w=l[3]*t+l[7]*n+l[11]*a+l[15]*s,this}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this.w/=e.w,this}divideScalar(e){return this.multiplyScalar(1/e)}setAxisAngleFromQuaternion(e){this.w=2*Math.acos(e.w);const t=Math.sqrt(1-e.w*e.w);return t<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=e.x/t,this.y=e.y/t,this.z=e.z/t),this}setAxisAngleFromRotationMatrix(e){let t,n,a,s;const d=e.elements,p=d[0],g=d[4],y=d[8],_=d[1],b=d[5],x=d[9],T=d[2],w=d[6],S=d[10];if(Math.abs(g-_)<.01&&Math.abs(y-T)<.01&&Math.abs(x-w)<.01){if(Math.abs(g+_)<.1&&Math.abs(y+T)<.1&&Math.abs(x+w)<.1&&Math.abs(p+b+S-3)<.1)return this.set(1,0,0,0),this;t=Math.PI;const N=(p+1)/2,O=(b+1)/2,P=(S+1)/2,U=(g+_)/4,z=(y+T)/4,H=(x+w)/4;return N>O&&N>P?N<.01?(n=0,a=.707106781,s=.707106781):(n=Math.sqrt(N),a=U/n,s=z/n):O>P?O<.01?(n=.707106781,a=0,s=.707106781):(a=Math.sqrt(O),n=U/a,s=H/a):P<.01?(n=.707106781,a=.707106781,s=0):(s=Math.sqrt(P),n=z/s,a=H/s),this.set(n,a,s,t),this}let C=Math.sqrt((w-x)*(w-x)+(y-T)*(y-T)+(_-g)*(_-g));return Math.abs(C)<.001&&(C=1),this.x=(w-x)/C,this.y=(y-T)/C,this.z=(_-g)/C,this.w=Math.acos((p+b+S-1)/2),this}setFromMatrixPosition(e){const t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this.w=t[15],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this.w=Math.min(this.w,e.w),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this.w=Math.max(this.w,e.w),this}clamp(e,t){return this.x=hn(this.x,e.x,t.x),this.y=hn(this.y,e.y,t.y),this.z=hn(this.z,e.z,t.z),this.w=hn(this.w,e.w,t.w),this}clampScalar(e,t){return this.x=hn(this.x,e,t),this.y=hn(this.y,e,t),this.z=hn(this.z,e,t),this.w=hn(this.w,e,t),this}clampLength(e,t){const n=this.length();return this.divideScalar(n||1).multiplyScalar(hn(n,e,t))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this.w=Math.trunc(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this.w+=(e.w-this.w)*t,this}lerpVectors(e,t,n){return this.x=e.x+(t.x-e.x)*n,this.y=e.y+(t.y-e.y)*n,this.z=e.z+(t.z-e.z)*n,this.w=e.w+(t.w-e.w)*n,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this.w=e[t+3],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e[t+3]=this.w,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this.w=e.getW(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}}class ZE extends Sl{constructor(e=1,t=1,n={}){super(),n=Object.assign({generateMipmaps:!1,internalFormat:null,minFilter:Vn,depthBuffer:!0,stencilBuffer:!1,resolveDepthBuffer:!0,resolveStencilBuffer:!0,depthTexture:null,samples:0,count:1,depth:1,multiview:!1},n),this.isRenderTarget=!0,this.width=e,this.height=t,this.depth=n.depth,this.scissor=new yi(0,0,e,t),this.scissorTest=!1,this.viewport=new yi(0,0,e,t);const a={width:e,height:t,depth:n.depth},s=new hi(a);this.textures=[];const l=n.count;for(let u=0;u<l;u++)this.textures[u]=s.clone(),this.textures[u].isRenderTargetTexture=!0,this.textures[u].renderTarget=this;this._setTextureOptions(n),this.depthBuffer=n.depthBuffer,this.stencilBuffer=n.stencilBuffer,this.resolveDepthBuffer=n.resolveDepthBuffer,this.resolveStencilBuffer=n.resolveStencilBuffer,this._depthTexture=null,this.depthTexture=n.depthTexture,this.samples=n.samples,this.multiview=n.multiview}_setTextureOptions(e={}){const t={minFilter:Vn,generateMipmaps:!1,flipY:!1,internalFormat:null};e.mapping!==void 0&&(t.mapping=e.mapping),e.wrapS!==void 0&&(t.wrapS=e.wrapS),e.wrapT!==void 0&&(t.wrapT=e.wrapT),e.wrapR!==void 0&&(t.wrapR=e.wrapR),e.magFilter!==void 0&&(t.magFilter=e.magFilter),e.minFilter!==void 0&&(t.minFilter=e.minFilter),e.format!==void 0&&(t.format=e.format),e.type!==void 0&&(t.type=e.type),e.anisotropy!==void 0&&(t.anisotropy=e.anisotropy),e.colorSpace!==void 0&&(t.colorSpace=e.colorSpace),e.flipY!==void 0&&(t.flipY=e.flipY),e.generateMipmaps!==void 0&&(t.generateMipmaps=e.generateMipmaps),e.internalFormat!==void 0&&(t.internalFormat=e.internalFormat);for(let n=0;n<this.textures.length;n++)this.textures[n].setValues(t)}get texture(){return this.textures[0]}set texture(e){this.textures[0]=e}set depthTexture(e){this._depthTexture!==null&&(this._depthTexture.renderTarget=null),e!==null&&(e.renderTarget=this),this._depthTexture=e}get depthTexture(){return this._depthTexture}setSize(e,t,n=1){if(this.width!==e||this.height!==t||this.depth!==n){this.width=e,this.height=t,this.depth=n;for(let a=0,s=this.textures.length;a<s;a++)this.textures[a].image.width=e,this.textures[a].image.height=t,this.textures[a].image.depth=n,this.textures[a].isData3DTexture!==!0&&(this.textures[a].isArrayTexture=this.textures[a].image.depth>1);this.dispose()}this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t)}clone(){return new this.constructor().copy(this)}copy(e){this.width=e.width,this.height=e.height,this.depth=e.depth,this.scissor.copy(e.scissor),this.scissorTest=e.scissorTest,this.viewport.copy(e.viewport),this.textures.length=0;for(let t=0,n=e.textures.length;t<n;t++){this.textures[t]=e.textures[t].clone(),this.textures[t].isRenderTargetTexture=!0,this.textures[t].renderTarget=this;const a=Object.assign({},e.textures[t].image);this.textures[t].source=new pu(a)}return this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,this.resolveDepthBuffer=e.resolveDepthBuffer,this.resolveStencilBuffer=e.resolveStencilBuffer,e.depthTexture!==null&&(this.depthTexture=e.depthTexture.clone()),this.samples=e.samples,this}dispose(){this.dispatchEvent({type:"dispose"})}}class Ta extends ZE{constructor(e=1,t=1,n={}){super(e,t,n),this.isWebGLRenderTarget=!0}}class bb extends hi{constructor(e=null,t=1,n=1,a=1){super(null),this.isDataArrayTexture=!0,this.image={data:e,width:t,height:n,depth:a},this.magFilter=Vi,this.minFilter=Vi,this.wrapR=Qi,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1,this.layerUpdates=new Set}addLayerUpdate(e){this.layerUpdates.add(e)}clearLayerUpdates(){this.layerUpdates.clear()}}class fz extends Ta{constructor(e=1,t=1,n=1,a={}){super(e,t,a),this.isWebGLArrayRenderTarget=!0,this.depth=n,this.texture=new bb(null,e,t,n),this._setTextureOptions(a),this.texture.isRenderTargetTexture=!0}}class xb extends hi{constructor(e=null,t=1,n=1,a=1){super(null),this.isData3DTexture=!0,this.image={data:e,width:t,height:n,depth:a},this.magFilter=Vi,this.minFilter=Vi,this.wrapR=Qi,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class dz extends Ta{constructor(e=1,t=1,n=1,a={}){super(e,t,a),this.isWebGL3DRenderTarget=!0,this.depth=n,this.texture=new xb(null,e,t,n),this._setTextureOptions(a),this.texture.isRenderTargetTexture=!0}}class Ha{constructor(e=new ee(1/0,1/0,1/0),t=new ee(-1/0,-1/0,-1/0)){this.isBox3=!0,this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromArray(e){this.makeEmpty();for(let t=0,n=e.length;t<n;t+=3)this.expandByPoint(yo.fromArray(e,t));return this}setFromBufferAttribute(e){this.makeEmpty();for(let t=0,n=e.count;t<n;t++)this.expandByPoint(yo.fromBufferAttribute(e,t));return this}setFromPoints(e){this.makeEmpty();for(let t=0,n=e.length;t<n;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){const n=yo.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(n),this.max.copy(e).add(n),this}setFromObject(e,t=!1){return this.makeEmpty(),this.expandByObject(e,t)}clone(){return new this.constructor().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(e){return this.isEmpty()?e.set(0,0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}expandByObject(e,t=!1){e.updateWorldMatrix(!1,!1);const n=e.geometry;if(n!==void 0){const s=n.getAttribute("position");if(t===!0&&s!==void 0&&e.isInstancedMesh!==!0)for(let l=0,u=s.count;l<u;l++)e.isMesh===!0?e.getVertexPosition(l,yo):yo.fromBufferAttribute(s,l),yo.applyMatrix4(e.matrixWorld),this.expandByPoint(yo);else e.boundingBox!==void 0?(e.boundingBox===null&&e.computeBoundingBox(),W0.copy(e.boundingBox)):(n.boundingBox===null&&n.computeBoundingBox(),W0.copy(n.boundingBox)),W0.applyMatrix4(e.matrixWorld),this.union(W0)}const a=e.children;for(let s=0,l=a.length;s<l;s++)this.expandByObject(a[s],t);return this}containsPoint(e){return e.x>=this.min.x&&e.x<=this.max.x&&e.y>=this.min.y&&e.y<=this.max.y&&e.z>=this.min.z&&e.z<=this.max.z}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y&&this.min.z<=e.min.z&&e.max.z<=this.max.z}getParameter(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y),(e.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(e){return e.max.x>=this.min.x&&e.min.x<=this.max.x&&e.max.y>=this.min.y&&e.min.y<=this.max.y&&e.max.z>=this.min.z&&e.min.z<=this.max.z}intersectsSphere(e){return this.clampPoint(e.center,yo),yo.distanceToSquared(e.center)<=e.radius*e.radius}intersectsPlane(e){let t,n;return e.normal.x>0?(t=e.normal.x*this.min.x,n=e.normal.x*this.max.x):(t=e.normal.x*this.max.x,n=e.normal.x*this.min.x),e.normal.y>0?(t+=e.normal.y*this.min.y,n+=e.normal.y*this.max.y):(t+=e.normal.y*this.max.y,n+=e.normal.y*this.min.y),e.normal.z>0?(t+=e.normal.z*this.min.z,n+=e.normal.z*this.max.z):(t+=e.normal.z*this.max.z,n+=e.normal.z*this.min.z),t<=-e.constant&&n>=-e.constant}intersectsTriangle(e){if(this.isEmpty())return!1;this.getCenter(Jm),Y0.subVectors(this.max,Jm),bd.subVectors(e.a,Jm),xd.subVectors(e.b,Jm),Sd.subVectors(e.c,Jm),nu.subVectors(xd,bd),iu.subVectors(Sd,xd),gh.subVectors(bd,Sd);let t=[0,-nu.z,nu.y,0,-iu.z,iu.y,0,-gh.z,gh.y,nu.z,0,-nu.x,iu.z,0,-iu.x,gh.z,0,-gh.x,-nu.y,nu.x,0,-iu.y,iu.x,0,-gh.y,gh.x,0];return!MS(t,bd,xd,Sd,Y0)||(t=[1,0,0,0,1,0,0,0,1],!MS(t,bd,xd,Sd,Y0))?!1:(Z0.crossVectors(nu,iu),t=[Z0.x,Z0.y,Z0.z],MS(t,bd,xd,Sd,Y0))}clampPoint(e,t){return t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return this.clampPoint(e,yo).distanceTo(e)}getBoundingSphere(e){return this.isEmpty()?e.makeEmpty():(this.getCenter(e.center),e.radius=this.getSize(yo).length()*.5),e}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}applyMatrix4(e){return this.isEmpty()?this:(ic[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(e),ic[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(e),ic[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(e),ic[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(e),ic[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(e),ic[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(e),ic[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(e),ic[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(e),this.setFromPoints(ic),this)}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}toJSON(){return{min:this.min.toArray(),max:this.max.toArray()}}fromJSON(e){return this.min.fromArray(e.min),this.max.fromArray(e.max),this}}const ic=[new ee,new ee,new ee,new ee,new ee,new ee,new ee,new ee],yo=new ee,W0=new Ha,bd=new ee,xd=new ee,Sd=new ee,nu=new ee,iu=new ee,gh=new ee,Jm=new ee,Y0=new ee,Z0=new ee,vh=new ee;function MS(i,e,t,n,a){for(let s=0,l=i.length-3;s<=l;s+=3){vh.fromArray(i,s);const u=a.x*Math.abs(vh.x)+a.y*Math.abs(vh.y)+a.z*Math.abs(vh.z),d=e.dot(vh),p=t.dot(vh),g=n.dot(vh);if(Math.max(-Math.max(d,p,g),Math.min(d,p,g))>u)return!1}return!0}const pz=new Ha,Qm=new ee,wS=new ee;class Va{constructor(e=new ee,t=-1){this.isSphere=!0,this.center=e,this.radius=t}set(e,t){return this.center.copy(e),this.radius=t,this}setFromPoints(e,t){const n=this.center;t!==void 0?n.copy(t):pz.setFromPoints(e).getCenter(n);let a=0;for(let s=0,l=e.length;s<l;s++)a=Math.max(a,n.distanceToSquared(e[s]));return this.radius=Math.sqrt(a),this}copy(e){return this.center.copy(e.center),this.radius=e.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(e){return e.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(e){return e.distanceTo(this.center)-this.radius}intersectsSphere(e){const t=this.radius+e.radius;return e.center.distanceToSquared(this.center)<=t*t}intersectsBox(e){return e.intersectsSphere(this)}intersectsPlane(e){return Math.abs(e.distanceToPoint(this.center))<=this.radius}clampPoint(e,t){const n=this.center.distanceToSquared(e);return t.copy(e),n>this.radius*this.radius&&(t.sub(this.center).normalize(),t.multiplyScalar(this.radius).add(this.center)),t}getBoundingBox(e){return this.isEmpty()?(e.makeEmpty(),e):(e.set(this.center,this.center),e.expandByScalar(this.radius),e)}applyMatrix4(e){return this.center.applyMatrix4(e),this.radius=this.radius*e.getMaxScaleOnAxis(),this}translate(e){return this.center.add(e),this}expandByPoint(e){if(this.isEmpty())return this.center.copy(e),this.radius=0,this;Qm.subVectors(e,this.center);const t=Qm.lengthSq();if(t>this.radius*this.radius){const n=Math.sqrt(t),a=(n-this.radius)*.5;this.center.addScaledVector(Qm,a/n),this.radius+=a}return this}union(e){return e.isEmpty()?this:this.isEmpty()?(this.copy(e),this):(this.center.equals(e.center)===!0?this.radius=Math.max(this.radius,e.radius):(wS.subVectors(e.center,this.center).setLength(e.radius),this.expandByPoint(Qm.copy(e.center).add(wS)),this.expandByPoint(Qm.copy(e.center).sub(wS))),this)}equals(e){return e.center.equals(this.center)&&e.radius===this.radius}clone(){return new this.constructor().copy(this)}toJSON(){return{radius:this.radius,center:this.center.toArray()}}fromJSON(e){return this.radius=e.radius,this.center.fromArray(e.center),this}}const ac=new ee,TS=new ee,K0=new ee,au=new ee,AS=new ee,J0=new ee,CS=new ee;class rf{constructor(e=new ee,t=new ee(0,0,-1)){this.origin=e,this.direction=t}set(e,t){return this.origin.copy(e),this.direction.copy(t),this}copy(e){return this.origin.copy(e.origin),this.direction.copy(e.direction),this}at(e,t){return t.copy(this.origin).addScaledVector(this.direction,e)}lookAt(e){return this.direction.copy(e).sub(this.origin).normalize(),this}recast(e){return this.origin.copy(this.at(e,ac)),this}closestPointToPoint(e,t){t.subVectors(e,this.origin);const n=t.dot(this.direction);return n<0?t.copy(this.origin):t.copy(this.origin).addScaledVector(this.direction,n)}distanceToPoint(e){return Math.sqrt(this.distanceSqToPoint(e))}distanceSqToPoint(e){const t=ac.subVectors(e,this.origin).dot(this.direction);return t<0?this.origin.distanceToSquared(e):(ac.copy(this.origin).addScaledVector(this.direction,t),ac.distanceToSquared(e))}distanceSqToSegment(e,t,n,a){TS.copy(e).add(t).multiplyScalar(.5),K0.copy(t).sub(e).normalize(),au.copy(this.origin).sub(TS);const s=e.distanceTo(t)*.5,l=-this.direction.dot(K0),u=au.dot(this.direction),d=-au.dot(K0),p=au.lengthSq(),g=Math.abs(1-l*l);let y,_,b,x;if(g>0)if(y=l*d-u,_=l*u-d,x=s*g,y>=0)if(_>=-x)if(_<=x){const T=1/g;y*=T,_*=T,b=y*(y+l*_+2*u)+_*(l*y+_+2*d)+p}else _=s,y=Math.max(0,-(l*_+u)),b=-y*y+_*(_+2*d)+p;else _=-s,y=Math.max(0,-(l*_+u)),b=-y*y+_*(_+2*d)+p;else _<=-x?(y=Math.max(0,-(-l*s+u)),_=y>0?-s:Math.min(Math.max(-s,-d),s),b=-y*y+_*(_+2*d)+p):_<=x?(y=0,_=Math.min(Math.max(-s,-d),s),b=_*(_+2*d)+p):(y=Math.max(0,-(l*s+u)),_=y>0?s:Math.min(Math.max(-s,-d),s),b=-y*y+_*(_+2*d)+p);else _=l>0?-s:s,y=Math.max(0,-(l*_+u)),b=-y*y+_*(_+2*d)+p;return n&&n.copy(this.origin).addScaledVector(this.direction,y),a&&a.copy(TS).addScaledVector(K0,_),b}intersectSphere(e,t){ac.subVectors(e.center,this.origin);const n=ac.dot(this.direction),a=ac.dot(ac)-n*n,s=e.radius*e.radius;if(a>s)return null;const l=Math.sqrt(s-a),u=n-l,d=n+l;return d<0?null:u<0?this.at(d,t):this.at(u,t)}intersectsSphere(e){return e.radius<0?!1:this.distanceSqToPoint(e.center)<=e.radius*e.radius}distanceToPlane(e){const t=e.normal.dot(this.direction);if(t===0)return e.distanceToPoint(this.origin)===0?0:null;const n=-(this.origin.dot(e.normal)+e.constant)/t;return n>=0?n:null}intersectPlane(e,t){const n=this.distanceToPlane(e);return n===null?null:this.at(n,t)}intersectsPlane(e){const t=e.distanceToPoint(this.origin);return t===0||e.normal.dot(this.direction)*t<0}intersectBox(e,t){let n,a,s,l,u,d;const p=1/this.direction.x,g=1/this.direction.y,y=1/this.direction.z,_=this.origin;return p>=0?(n=(e.min.x-_.x)*p,a=(e.max.x-_.x)*p):(n=(e.max.x-_.x)*p,a=(e.min.x-_.x)*p),g>=0?(s=(e.min.y-_.y)*g,l=(e.max.y-_.y)*g):(s=(e.max.y-_.y)*g,l=(e.min.y-_.y)*g),n>l||s>a||((s>n||isNaN(n))&&(n=s),(l<a||isNaN(a))&&(a=l),y>=0?(u=(e.min.z-_.z)*y,d=(e.max.z-_.z)*y):(u=(e.max.z-_.z)*y,d=(e.min.z-_.z)*y),n>d||u>a)||((u>n||n!==n)&&(n=u),(d<a||a!==a)&&(a=d),a<0)?null:this.at(n>=0?n:a,t)}intersectsBox(e){return this.intersectBox(e,ac)!==null}intersectTriangle(e,t,n,a,s){AS.subVectors(t,e),J0.subVectors(n,e),CS.crossVectors(AS,J0);let l=this.direction.dot(CS),u;if(l>0){if(a)return null;u=1}else if(l<0)u=-1,l=-l;else return null;au.subVectors(this.origin,e);const d=u*this.direction.dot(J0.crossVectors(au,J0));if(d<0)return null;const p=u*this.direction.dot(AS.cross(au));if(p<0||d+p>l)return null;const g=-u*au.dot(CS);return g<0?null:this.at(g/l,s)}applyMatrix4(e){return this.origin.applyMatrix4(e),this.direction.transformDirection(e),this}equals(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)}clone(){return new this.constructor().copy(this)}}class on{constructor(e,t,n,a,s,l,u,d,p,g,y,_,b,x,T,w){on.prototype.isMatrix4=!0,this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],e!==void 0&&this.set(e,t,n,a,s,l,u,d,p,g,y,_,b,x,T,w)}set(e,t,n,a,s,l,u,d,p,g,y,_,b,x,T,w){const S=this.elements;return S[0]=e,S[4]=t,S[8]=n,S[12]=a,S[1]=s,S[5]=l,S[9]=u,S[13]=d,S[2]=p,S[6]=g,S[10]=y,S[14]=_,S[3]=b,S[7]=x,S[11]=T,S[15]=w,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return new on().fromArray(this.elements)}copy(e){const t=this.elements,n=e.elements;return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[4]=n[4],t[5]=n[5],t[6]=n[6],t[7]=n[7],t[8]=n[8],t[9]=n[9],t[10]=n[10],t[11]=n[11],t[12]=n[12],t[13]=n[13],t[14]=n[14],t[15]=n[15],this}copyPosition(e){const t=this.elements,n=e.elements;return t[12]=n[12],t[13]=n[13],t[14]=n[14],this}setFromMatrix3(e){const t=e.elements;return this.set(t[0],t[3],t[6],0,t[1],t[4],t[7],0,t[2],t[5],t[8],0,0,0,0,1),this}extractBasis(e,t,n){return this.determinant()===0?(e.set(1,0,0),t.set(0,1,0),n.set(0,0,1),this):(e.setFromMatrixColumn(this,0),t.setFromMatrixColumn(this,1),n.setFromMatrixColumn(this,2),this)}makeBasis(e,t,n){return this.set(e.x,t.x,n.x,0,e.y,t.y,n.y,0,e.z,t.z,n.z,0,0,0,0,1),this}extractRotation(e){if(e.determinant()===0)return this.identity();const t=this.elements,n=e.elements,a=1/Ed.setFromMatrixColumn(e,0).length(),s=1/Ed.setFromMatrixColumn(e,1).length(),l=1/Ed.setFromMatrixColumn(e,2).length();return t[0]=n[0]*a,t[1]=n[1]*a,t[2]=n[2]*a,t[3]=0,t[4]=n[4]*s,t[5]=n[5]*s,t[6]=n[6]*s,t[7]=0,t[8]=n[8]*l,t[9]=n[9]*l,t[10]=n[10]*l,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromEuler(e){const t=this.elements,n=e.x,a=e.y,s=e.z,l=Math.cos(n),u=Math.sin(n),d=Math.cos(a),p=Math.sin(a),g=Math.cos(s),y=Math.sin(s);if(e.order==="XYZ"){const _=l*g,b=l*y,x=u*g,T=u*y;t[0]=d*g,t[4]=-d*y,t[8]=p,t[1]=b+x*p,t[5]=_-T*p,t[9]=-u*d,t[2]=T-_*p,t[6]=x+b*p,t[10]=l*d}else if(e.order==="YXZ"){const _=d*g,b=d*y,x=p*g,T=p*y;t[0]=_+T*u,t[4]=x*u-b,t[8]=l*p,t[1]=l*y,t[5]=l*g,t[9]=-u,t[2]=b*u-x,t[6]=T+_*u,t[10]=l*d}else if(e.order==="ZXY"){const _=d*g,b=d*y,x=p*g,T=p*y;t[0]=_-T*u,t[4]=-l*y,t[8]=x+b*u,t[1]=b+x*u,t[5]=l*g,t[9]=T-_*u,t[2]=-l*p,t[6]=u,t[10]=l*d}else if(e.order==="ZYX"){const _=l*g,b=l*y,x=u*g,T=u*y;t[0]=d*g,t[4]=x*p-b,t[8]=_*p+T,t[1]=d*y,t[5]=T*p+_,t[9]=b*p-x,t[2]=-p,t[6]=u*d,t[10]=l*d}else if(e.order==="YZX"){const _=l*d,b=l*p,x=u*d,T=u*p;t[0]=d*g,t[4]=T-_*y,t[8]=x*y+b,t[1]=y,t[5]=l*g,t[9]=-u*g,t[2]=-p*g,t[6]=b*y+x,t[10]=_-T*y}else if(e.order==="XZY"){const _=l*d,b=l*p,x=u*d,T=u*p;t[0]=d*g,t[4]=-y,t[8]=p*g,t[1]=_*y+T,t[5]=l*g,t[9]=b*y-x,t[2]=x*y-b,t[6]=u*g,t[10]=T*y+_}return t[3]=0,t[7]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromQuaternion(e){return this.compose(mz,e,gz)}lookAt(e,t,n){const a=this.elements;return gs.subVectors(e,t),gs.lengthSq()===0&&(gs.z=1),gs.normalize(),ru.crossVectors(n,gs),ru.lengthSq()===0&&(Math.abs(n.z)===1?gs.x+=1e-4:gs.z+=1e-4,gs.normalize(),ru.crossVectors(n,gs)),ru.normalize(),Q0.crossVectors(gs,ru),a[0]=ru.x,a[4]=Q0.x,a[8]=gs.x,a[1]=ru.y,a[5]=Q0.y,a[9]=gs.y,a[2]=ru.z,a[6]=Q0.z,a[10]=gs.z,this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const n=e.elements,a=t.elements,s=this.elements,l=n[0],u=n[4],d=n[8],p=n[12],g=n[1],y=n[5],_=n[9],b=n[13],x=n[2],T=n[6],w=n[10],S=n[14],C=n[3],N=n[7],O=n[11],P=n[15],U=a[0],z=a[4],H=a[8],D=a[12],L=a[1],j=a[5],W=a[9],X=a[13],K=a[2],le=a[6],k=a[10],Z=a[14],ne=a[3],pe=a[7],ge=a[11],J=a[15];return s[0]=l*U+u*L+d*K+p*ne,s[4]=l*z+u*j+d*le+p*pe,s[8]=l*H+u*W+d*k+p*ge,s[12]=l*D+u*X+d*Z+p*J,s[1]=g*U+y*L+_*K+b*ne,s[5]=g*z+y*j+_*le+b*pe,s[9]=g*H+y*W+_*k+b*ge,s[13]=g*D+y*X+_*Z+b*J,s[2]=x*U+T*L+w*K+S*ne,s[6]=x*z+T*j+w*le+S*pe,s[10]=x*H+T*W+w*k+S*ge,s[14]=x*D+T*X+w*Z+S*J,s[3]=C*U+N*L+O*K+P*ne,s[7]=C*z+N*j+O*le+P*pe,s[11]=C*H+N*W+O*k+P*ge,s[15]=C*D+N*X+O*Z+P*J,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[4]*=e,t[8]*=e,t[12]*=e,t[1]*=e,t[5]*=e,t[9]*=e,t[13]*=e,t[2]*=e,t[6]*=e,t[10]*=e,t[14]*=e,t[3]*=e,t[7]*=e,t[11]*=e,t[15]*=e,this}determinant(){const e=this.elements,t=e[0],n=e[4],a=e[8],s=e[12],l=e[1],u=e[5],d=e[9],p=e[13],g=e[2],y=e[6],_=e[10],b=e[14],x=e[3],T=e[7],w=e[11],S=e[15],C=d*b-p*_,N=u*b-p*y,O=u*_-d*y,P=l*b-p*g,U=l*_-d*g,z=l*y-u*g;return t*(T*C-w*N+S*O)-n*(x*C-w*P+S*U)+a*(x*N-T*P+S*z)-s*(x*O-T*U+w*z)}transpose(){const e=this.elements;let t;return t=e[1],e[1]=e[4],e[4]=t,t=e[2],e[2]=e[8],e[8]=t,t=e[6],e[6]=e[9],e[9]=t,t=e[3],e[3]=e[12],e[12]=t,t=e[7],e[7]=e[13],e[13]=t,t=e[11],e[11]=e[14],e[14]=t,this}setPosition(e,t,n){const a=this.elements;return e.isVector3?(a[12]=e.x,a[13]=e.y,a[14]=e.z):(a[12]=e,a[13]=t,a[14]=n),this}invert(){const e=this.elements,t=e[0],n=e[1],a=e[2],s=e[3],l=e[4],u=e[5],d=e[6],p=e[7],g=e[8],y=e[9],_=e[10],b=e[11],x=e[12],T=e[13],w=e[14],S=e[15],C=y*w*p-T*_*p+T*d*b-u*w*b-y*d*S+u*_*S,N=x*_*p-g*w*p-x*d*b+l*w*b+g*d*S-l*_*S,O=g*T*p-x*y*p+x*u*b-l*T*b-g*u*S+l*y*S,P=x*y*d-g*T*d-x*u*_+l*T*_+g*u*w-l*y*w,U=t*C+n*N+a*O+s*P;if(U===0)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const z=1/U;return e[0]=C*z,e[1]=(T*_*s-y*w*s-T*a*b+n*w*b+y*a*S-n*_*S)*z,e[2]=(u*w*s-T*d*s+T*a*p-n*w*p-u*a*S+n*d*S)*z,e[3]=(y*d*s-u*_*s-y*a*p+n*_*p+u*a*b-n*d*b)*z,e[4]=N*z,e[5]=(g*w*s-x*_*s+x*a*b-t*w*b-g*a*S+t*_*S)*z,e[6]=(x*d*s-l*w*s-x*a*p+t*w*p+l*a*S-t*d*S)*z,e[7]=(l*_*s-g*d*s+g*a*p-t*_*p-l*a*b+t*d*b)*z,e[8]=O*z,e[9]=(x*y*s-g*T*s-x*n*b+t*T*b+g*n*S-t*y*S)*z,e[10]=(l*T*s-x*u*s+x*n*p-t*T*p-l*n*S+t*u*S)*z,e[11]=(g*u*s-l*y*s-g*n*p+t*y*p+l*n*b-t*u*b)*z,e[12]=P*z,e[13]=(g*T*a-x*y*a+x*n*_-t*T*_-g*n*w+t*y*w)*z,e[14]=(x*u*a-l*T*a-x*n*d+t*T*d+l*n*w-t*u*w)*z,e[15]=(l*y*a-g*u*a+g*n*d-t*y*d-l*n*_+t*u*_)*z,this}scale(e){const t=this.elements,n=e.x,a=e.y,s=e.z;return t[0]*=n,t[4]*=a,t[8]*=s,t[1]*=n,t[5]*=a,t[9]*=s,t[2]*=n,t[6]*=a,t[10]*=s,t[3]*=n,t[7]*=a,t[11]*=s,this}getMaxScaleOnAxis(){const e=this.elements,t=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],n=e[4]*e[4]+e[5]*e[5]+e[6]*e[6],a=e[8]*e[8]+e[9]*e[9]+e[10]*e[10];return Math.sqrt(Math.max(t,n,a))}makeTranslation(e,t,n){return e.isVector3?this.set(1,0,0,e.x,0,1,0,e.y,0,0,1,e.z,0,0,0,1):this.set(1,0,0,e,0,1,0,t,0,0,1,n,0,0,0,1),this}makeRotationX(e){const t=Math.cos(e),n=Math.sin(e);return this.set(1,0,0,0,0,t,-n,0,0,n,t,0,0,0,0,1),this}makeRotationY(e){const t=Math.cos(e),n=Math.sin(e);return this.set(t,0,n,0,0,1,0,0,-n,0,t,0,0,0,0,1),this}makeRotationZ(e){const t=Math.cos(e),n=Math.sin(e);return this.set(t,-n,0,0,n,t,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(e,t){const n=Math.cos(t),a=Math.sin(t),s=1-n,l=e.x,u=e.y,d=e.z,p=s*l,g=s*u;return this.set(p*l+n,p*u-a*d,p*d+a*u,0,p*u+a*d,g*u+n,g*d-a*l,0,p*d-a*u,g*d+a*l,s*d*d+n,0,0,0,0,1),this}makeScale(e,t,n){return this.set(e,0,0,0,0,t,0,0,0,0,n,0,0,0,0,1),this}makeShear(e,t,n,a,s,l){return this.set(1,n,s,0,e,1,l,0,t,a,1,0,0,0,0,1),this}compose(e,t,n){const a=this.elements,s=t._x,l=t._y,u=t._z,d=t._w,p=s+s,g=l+l,y=u+u,_=s*p,b=s*g,x=s*y,T=l*g,w=l*y,S=u*y,C=d*p,N=d*g,O=d*y,P=n.x,U=n.y,z=n.z;return a[0]=(1-(T+S))*P,a[1]=(b+O)*P,a[2]=(x-N)*P,a[3]=0,a[4]=(b-O)*U,a[5]=(1-(_+S))*U,a[6]=(w+C)*U,a[7]=0,a[8]=(x+N)*z,a[9]=(w-C)*z,a[10]=(1-(_+T))*z,a[11]=0,a[12]=e.x,a[13]=e.y,a[14]=e.z,a[15]=1,this}decompose(e,t,n){const a=this.elements;if(e.x=a[12],e.y=a[13],e.z=a[14],this.determinant()===0)return n.set(1,1,1),t.identity(),this;let s=Ed.set(a[0],a[1],a[2]).length();const l=Ed.set(a[4],a[5],a[6]).length(),u=Ed.set(a[8],a[9],a[10]).length();this.determinant()<0&&(s=-s),_o.copy(this);const p=1/s,g=1/l,y=1/u;return _o.elements[0]*=p,_o.elements[1]*=p,_o.elements[2]*=p,_o.elements[4]*=g,_o.elements[5]*=g,_o.elements[6]*=g,_o.elements[8]*=y,_o.elements[9]*=y,_o.elements[10]*=y,t.setFromRotationMatrix(_o),n.x=s,n.y=l,n.z=u,this}makePerspective(e,t,n,a,s,l,u=_s,d=!1){const p=this.elements,g=2*s/(t-e),y=2*s/(n-a),_=(t+e)/(t-e),b=(n+a)/(n-a);let x,T;if(d)x=s/(l-s),T=l*s/(l-s);else if(u===_s)x=-(l+s)/(l-s),T=-2*l*s/(l-s);else if(u===sp)x=-l/(l-s),T=-l*s/(l-s);else throw new Error("THREE.Matrix4.makePerspective(): Invalid coordinate system: "+u);return p[0]=g,p[4]=0,p[8]=_,p[12]=0,p[1]=0,p[5]=y,p[9]=b,p[13]=0,p[2]=0,p[6]=0,p[10]=x,p[14]=T,p[3]=0,p[7]=0,p[11]=-1,p[15]=0,this}makeOrthographic(e,t,n,a,s,l,u=_s,d=!1){const p=this.elements,g=2/(t-e),y=2/(n-a),_=-(t+e)/(t-e),b=-(n+a)/(n-a);let x,T;if(d)x=1/(l-s),T=l/(l-s);else if(u===_s)x=-2/(l-s),T=-(l+s)/(l-s);else if(u===sp)x=-1/(l-s),T=-s/(l-s);else throw new Error("THREE.Matrix4.makeOrthographic(): Invalid coordinate system: "+u);return p[0]=g,p[4]=0,p[8]=0,p[12]=_,p[1]=0,p[5]=y,p[9]=0,p[13]=b,p[2]=0,p[6]=0,p[10]=x,p[14]=T,p[3]=0,p[7]=0,p[11]=0,p[15]=1,this}equals(e){const t=this.elements,n=e.elements;for(let a=0;a<16;a++)if(t[a]!==n[a])return!1;return!0}fromArray(e,t=0){for(let n=0;n<16;n++)this.elements[n]=e[n+t];return this}toArray(e=[],t=0){const n=this.elements;return e[t]=n[0],e[t+1]=n[1],e[t+2]=n[2],e[t+3]=n[3],e[t+4]=n[4],e[t+5]=n[5],e[t+6]=n[6],e[t+7]=n[7],e[t+8]=n[8],e[t+9]=n[9],e[t+10]=n[10],e[t+11]=n[11],e[t+12]=n[12],e[t+13]=n[13],e[t+14]=n[14],e[t+15]=n[15],e}}const Ed=new ee,_o=new on,mz=new ee(0,0,0),gz=new ee(1,1,1),ru=new ee,Q0=new ee,gs=new ee,mA=new on,gA=new wa;class Ss{constructor(e=0,t=0,n=0,a=Ss.DEFAULT_ORDER){this.isEuler=!0,this._x=e,this._y=t,this._z=n,this._order=a}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get order(){return this._order}set order(e){this._order=e,this._onChangeCallback()}set(e,t,n,a=this._order){return this._x=e,this._y=t,this._z=n,this._order=a,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(e){return this._x=e._x,this._y=e._y,this._z=e._z,this._order=e._order,this._onChangeCallback(),this}setFromRotationMatrix(e,t=this._order,n=!0){const a=e.elements,s=a[0],l=a[4],u=a[8],d=a[1],p=a[5],g=a[9],y=a[2],_=a[6],b=a[10];switch(t){case"XYZ":this._y=Math.asin(hn(u,-1,1)),Math.abs(u)<.9999999?(this._x=Math.atan2(-g,b),this._z=Math.atan2(-l,s)):(this._x=Math.atan2(_,p),this._z=0);break;case"YXZ":this._x=Math.asin(-hn(g,-1,1)),Math.abs(g)<.9999999?(this._y=Math.atan2(u,b),this._z=Math.atan2(d,p)):(this._y=Math.atan2(-y,s),this._z=0);break;case"ZXY":this._x=Math.asin(hn(_,-1,1)),Math.abs(_)<.9999999?(this._y=Math.atan2(-y,b),this._z=Math.atan2(-l,p)):(this._y=0,this._z=Math.atan2(d,s));break;case"ZYX":this._y=Math.asin(-hn(y,-1,1)),Math.abs(y)<.9999999?(this._x=Math.atan2(_,b),this._z=Math.atan2(d,s)):(this._x=0,this._z=Math.atan2(-l,p));break;case"YZX":this._z=Math.asin(hn(d,-1,1)),Math.abs(d)<.9999999?(this._x=Math.atan2(-g,p),this._y=Math.atan2(-y,s)):(this._x=0,this._y=Math.atan2(u,b));break;case"XZY":this._z=Math.asin(-hn(l,-1,1)),Math.abs(l)<.9999999?(this._x=Math.atan2(_,p),this._y=Math.atan2(u,s)):(this._x=Math.atan2(-g,b),this._y=0);break;default:Rt("Euler: .setFromRotationMatrix() encountered an unknown order: "+t)}return this._order=t,n===!0&&this._onChangeCallback(),this}setFromQuaternion(e,t,n){return mA.makeRotationFromQuaternion(e),this.setFromRotationMatrix(mA,t,n)}setFromVector3(e,t=this._order){return this.set(e.x,e.y,e.z,t)}reorder(e){return gA.setFromEuler(this),this.setFromQuaternion(gA,e)}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._order===this._order}fromArray(e){return this._x=e[0],this._y=e[1],this._z=e[2],e[3]!==void 0&&(this._order=e[3]),this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._order,e}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._order}}Ss.DEFAULT_ORDER="XYZ";class cp{constructor(){this.mask=1}set(e){this.mask=(1<<e|0)>>>0}enable(e){this.mask|=1<<e|0}enableAll(){this.mask=-1}toggle(e){this.mask^=1<<e|0}disable(e){this.mask&=~(1<<e|0)}disableAll(){this.mask=0}test(e){return(this.mask&e.mask)!==0}isEnabled(e){return(this.mask&(1<<e|0))!==0}}let vz=0;const vA=new ee,Md=new wa,rc=new on,$0=new ee,$m=new ee,yz=new ee,_z=new wa,yA=new ee(1,0,0),_A=new ee(0,1,0),bA=new ee(0,0,1),xA={type:"added"},bz={type:"removed"},wd={type:"childadded",child:null},RS={type:"childremoved",child:null};class Yn extends Sl{constructor(){super(),this.isObject3D=!0,Object.defineProperty(this,"id",{value:vz++}),this.uuid=bs(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=Yn.DEFAULT_UP.clone();const e=new ee,t=new Ss,n=new wa,a=new ee(1,1,1);function s(){n.setFromEuler(t,!1)}function l(){t.setFromQuaternion(n,void 0,!1)}t._onChange(s),n._onChange(l),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:e},rotation:{configurable:!0,enumerable:!0,value:t},quaternion:{configurable:!0,enumerable:!0,value:n},scale:{configurable:!0,enumerable:!0,value:a},modelViewMatrix:{value:new on},normalMatrix:{value:new Sn}}),this.matrix=new on,this.matrixWorld=new on,this.matrixAutoUpdate=Yn.DEFAULT_MATRIX_AUTO_UPDATE,this.matrixWorldAutoUpdate=Yn.DEFAULT_MATRIX_WORLD_AUTO_UPDATE,this.matrixWorldNeedsUpdate=!1,this.layers=new cp,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.customDepthMaterial=void 0,this.customDistanceMaterial=void 0,this.userData={}}onBeforeShadow(){}onAfterShadow(){}onBeforeRender(){}onAfterRender(){}applyMatrix4(e){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(e),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(e){return this.quaternion.premultiply(e),this}setRotationFromAxisAngle(e,t){this.quaternion.setFromAxisAngle(e,t)}setRotationFromEuler(e){this.quaternion.setFromEuler(e,!0)}setRotationFromMatrix(e){this.quaternion.setFromRotationMatrix(e)}setRotationFromQuaternion(e){this.quaternion.copy(e)}rotateOnAxis(e,t){return Md.setFromAxisAngle(e,t),this.quaternion.multiply(Md),this}rotateOnWorldAxis(e,t){return Md.setFromAxisAngle(e,t),this.quaternion.premultiply(Md),this}rotateX(e){return this.rotateOnAxis(yA,e)}rotateY(e){return this.rotateOnAxis(_A,e)}rotateZ(e){return this.rotateOnAxis(bA,e)}translateOnAxis(e,t){return vA.copy(e).applyQuaternion(this.quaternion),this.position.add(vA.multiplyScalar(t)),this}translateX(e){return this.translateOnAxis(yA,e)}translateY(e){return this.translateOnAxis(_A,e)}translateZ(e){return this.translateOnAxis(bA,e)}localToWorld(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(this.matrixWorld)}worldToLocal(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(rc.copy(this.matrixWorld).invert())}lookAt(e,t,n){e.isVector3?$0.copy(e):$0.set(e,t,n);const a=this.parent;this.updateWorldMatrix(!0,!1),$m.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?rc.lookAt($m,$0,this.up):rc.lookAt($0,$m,this.up),this.quaternion.setFromRotationMatrix(rc),a&&(rc.extractRotation(a.matrixWorld),Md.setFromRotationMatrix(rc),this.quaternion.premultiply(Md.invert()))}add(e){if(arguments.length>1){for(let t=0;t<arguments.length;t++)this.add(arguments[t]);return this}return e===this?(Qt("Object3D.add: object can't be added as a child of itself.",e),this):(e&&e.isObject3D?(e.removeFromParent(),e.parent=this,this.children.push(e),e.dispatchEvent(xA),wd.child=e,this.dispatchEvent(wd),wd.child=null):Qt("Object3D.add: object not an instance of THREE.Object3D.",e),this)}remove(e){if(arguments.length>1){for(let n=0;n<arguments.length;n++)this.remove(arguments[n]);return this}const t=this.children.indexOf(e);return t!==-1&&(e.parent=null,this.children.splice(t,1),e.dispatchEvent(bz),RS.child=e,this.dispatchEvent(RS),RS.child=null),this}removeFromParent(){const e=this.parent;return e!==null&&e.remove(this),this}clear(){return this.remove(...this.children)}attach(e){return this.updateWorldMatrix(!0,!1),rc.copy(this.matrixWorld).invert(),e.parent!==null&&(e.parent.updateWorldMatrix(!0,!1),rc.multiply(e.parent.matrixWorld)),e.applyMatrix4(rc),e.removeFromParent(),e.parent=this,this.children.push(e),e.updateWorldMatrix(!1,!0),e.dispatchEvent(xA),wd.child=e,this.dispatchEvent(wd),wd.child=null,this}getObjectById(e){return this.getObjectByProperty("id",e)}getObjectByName(e){return this.getObjectByProperty("name",e)}getObjectByProperty(e,t){if(this[e]===t)return this;for(let n=0,a=this.children.length;n<a;n++){const l=this.children[n].getObjectByProperty(e,t);if(l!==void 0)return l}}getObjectsByProperty(e,t,n=[]){this[e]===t&&n.push(this);const a=this.children;for(let s=0,l=a.length;s<l;s++)a[s].getObjectsByProperty(e,t,n);return n}getWorldPosition(e){return this.updateWorldMatrix(!0,!1),e.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose($m,e,yz),e}getWorldScale(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose($m,_z,e),e}getWorldDirection(e){this.updateWorldMatrix(!0,!1);const t=this.matrixWorld.elements;return e.set(t[8],t[9],t[10]).normalize()}raycast(){}traverse(e){e(this);const t=this.children;for(let n=0,a=t.length;n<a;n++)t[n].traverse(e)}traverseVisible(e){if(this.visible===!1)return;e(this);const t=this.children;for(let n=0,a=t.length;n<a;n++)t[n].traverseVisible(e)}traverseAncestors(e){const t=this.parent;t!==null&&(e(t),t.traverseAncestors(e))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(e){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||e)&&(this.matrixWorldAutoUpdate===!0&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix)),this.matrixWorldNeedsUpdate=!1,e=!0);const t=this.children;for(let n=0,a=t.length;n<a;n++)t[n].updateMatrixWorld(e)}updateWorldMatrix(e,t){const n=this.parent;if(e===!0&&n!==null&&n.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),this.matrixWorldAutoUpdate===!0&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix)),t===!0){const a=this.children;for(let s=0,l=a.length;s<l;s++)a[s].updateWorldMatrix(!1,!0)}}toJSON(e){const t=e===void 0||typeof e=="string",n={};t&&(e={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},n.metadata={version:4.7,type:"Object",generator:"Object3D.toJSON"});const a={};a.uuid=this.uuid,a.type=this.type,this.name!==""&&(a.name=this.name),this.castShadow===!0&&(a.castShadow=!0),this.receiveShadow===!0&&(a.receiveShadow=!0),this.visible===!1&&(a.visible=!1),this.frustumCulled===!1&&(a.frustumCulled=!1),this.renderOrder!==0&&(a.renderOrder=this.renderOrder),Object.keys(this.userData).length>0&&(a.userData=this.userData),a.layers=this.layers.mask,a.matrix=this.matrix.toArray(),a.up=this.up.toArray(),this.matrixAutoUpdate===!1&&(a.matrixAutoUpdate=!1),this.isInstancedMesh&&(a.type="InstancedMesh",a.count=this.count,a.instanceMatrix=this.instanceMatrix.toJSON(),this.instanceColor!==null&&(a.instanceColor=this.instanceColor.toJSON())),this.isBatchedMesh&&(a.type="BatchedMesh",a.perObjectFrustumCulled=this.perObjectFrustumCulled,a.sortObjects=this.sortObjects,a.drawRanges=this._drawRanges,a.reservedRanges=this._reservedRanges,a.geometryInfo=this._geometryInfo.map(u=>({...u,boundingBox:u.boundingBox?u.boundingBox.toJSON():void 0,boundingSphere:u.boundingSphere?u.boundingSphere.toJSON():void 0})),a.instanceInfo=this._instanceInfo.map(u=>({...u})),a.availableInstanceIds=this._availableInstanceIds.slice(),a.availableGeometryIds=this._availableGeometryIds.slice(),a.nextIndexStart=this._nextIndexStart,a.nextVertexStart=this._nextVertexStart,a.geometryCount=this._geometryCount,a.maxInstanceCount=this._maxInstanceCount,a.maxVertexCount=this._maxVertexCount,a.maxIndexCount=this._maxIndexCount,a.geometryInitialized=this._geometryInitialized,a.matricesTexture=this._matricesTexture.toJSON(e),a.indirectTexture=this._indirectTexture.toJSON(e),this._colorsTexture!==null&&(a.colorsTexture=this._colorsTexture.toJSON(e)),this.boundingSphere!==null&&(a.boundingSphere=this.boundingSphere.toJSON()),this.boundingBox!==null&&(a.boundingBox=this.boundingBox.toJSON()));function s(u,d){return u[d.uuid]===void 0&&(u[d.uuid]=d.toJSON(e)),d.uuid}if(this.isScene)this.background&&(this.background.isColor?a.background=this.background.toJSON():this.background.isTexture&&(a.background=this.background.toJSON(e).uuid)),this.environment&&this.environment.isTexture&&this.environment.isRenderTargetTexture!==!0&&(a.environment=this.environment.toJSON(e).uuid);else if(this.isMesh||this.isLine||this.isPoints){a.geometry=s(e.geometries,this.geometry);const u=this.geometry.parameters;if(u!==void 0&&u.shapes!==void 0){const d=u.shapes;if(Array.isArray(d))for(let p=0,g=d.length;p<g;p++){const y=d[p];s(e.shapes,y)}else s(e.shapes,d)}}if(this.isSkinnedMesh&&(a.bindMode=this.bindMode,a.bindMatrix=this.bindMatrix.toArray(),this.skeleton!==void 0&&(s(e.skeletons,this.skeleton),a.skeleton=this.skeleton.uuid)),this.material!==void 0)if(Array.isArray(this.material)){const u=[];for(let d=0,p=this.material.length;d<p;d++)u.push(s(e.materials,this.material[d]));a.material=u}else a.material=s(e.materials,this.material);if(this.children.length>0){a.children=[];for(let u=0;u<this.children.length;u++)a.children.push(this.children[u].toJSON(e).object)}if(this.animations.length>0){a.animations=[];for(let u=0;u<this.animations.length;u++){const d=this.animations[u];a.animations.push(s(e.animations,d))}}if(t){const u=l(e.geometries),d=l(e.materials),p=l(e.textures),g=l(e.images),y=l(e.shapes),_=l(e.skeletons),b=l(e.animations),x=l(e.nodes);u.length>0&&(n.geometries=u),d.length>0&&(n.materials=d),p.length>0&&(n.textures=p),g.length>0&&(n.images=g),y.length>0&&(n.shapes=y),_.length>0&&(n.skeletons=_),b.length>0&&(n.animations=b),x.length>0&&(n.nodes=x)}return n.object=a,n;function l(u){const d=[];for(const p in u){const g=u[p];delete g.metadata,d.push(g)}return d}}clone(e){return new this.constructor().copy(this,e)}copy(e,t=!0){if(this.name=e.name,this.up.copy(e.up),this.position.copy(e.position),this.rotation.order=e.rotation.order,this.quaternion.copy(e.quaternion),this.scale.copy(e.scale),this.matrix.copy(e.matrix),this.matrixWorld.copy(e.matrixWorld),this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrixWorldAutoUpdate=e.matrixWorldAutoUpdate,this.matrixWorldNeedsUpdate=e.matrixWorldNeedsUpdate,this.layers.mask=e.layers.mask,this.visible=e.visible,this.castShadow=e.castShadow,this.receiveShadow=e.receiveShadow,this.frustumCulled=e.frustumCulled,this.renderOrder=e.renderOrder,this.animations=e.animations.slice(),this.userData=JSON.parse(JSON.stringify(e.userData)),t===!0)for(let n=0;n<e.children.length;n++){const a=e.children[n];this.add(a.clone())}return this}}Yn.DEFAULT_UP=new ee(0,1,0);Yn.DEFAULT_MATRIX_AUTO_UPDATE=!0;Yn.DEFAULT_MATRIX_WORLD_AUTO_UPDATE=!0;const bo=new ee,sc=new ee,NS=new ee,oc=new ee,Td=new ee,Ad=new ee,SA=new ee,OS=new ee,DS=new ee,US=new ee,LS=new yi,IS=new yi,PS=new yi;class is{constructor(e=new ee,t=new ee,n=new ee){this.a=e,this.b=t,this.c=n}static getNormal(e,t,n,a){a.subVectors(n,t),bo.subVectors(e,t),a.cross(bo);const s=a.lengthSq();return s>0?a.multiplyScalar(1/Math.sqrt(s)):a.set(0,0,0)}static getBarycoord(e,t,n,a,s){bo.subVectors(a,t),sc.subVectors(n,t),NS.subVectors(e,t);const l=bo.dot(bo),u=bo.dot(sc),d=bo.dot(NS),p=sc.dot(sc),g=sc.dot(NS),y=l*p-u*u;if(y===0)return s.set(0,0,0),null;const _=1/y,b=(p*d-u*g)*_,x=(l*g-u*d)*_;return s.set(1-b-x,x,b)}static containsPoint(e,t,n,a){return this.getBarycoord(e,t,n,a,oc)===null?!1:oc.x>=0&&oc.y>=0&&oc.x+oc.y<=1}static getInterpolation(e,t,n,a,s,l,u,d){return this.getBarycoord(e,t,n,a,oc)===null?(d.x=0,d.y=0,"z"in d&&(d.z=0),"w"in d&&(d.w=0),null):(d.setScalar(0),d.addScaledVector(s,oc.x),d.addScaledVector(l,oc.y),d.addScaledVector(u,oc.z),d)}static getInterpolatedAttribute(e,t,n,a,s,l){return LS.setScalar(0),IS.setScalar(0),PS.setScalar(0),LS.fromBufferAttribute(e,t),IS.fromBufferAttribute(e,n),PS.fromBufferAttribute(e,a),l.setScalar(0),l.addScaledVector(LS,s.x),l.addScaledVector(IS,s.y),l.addScaledVector(PS,s.z),l}static isFrontFacing(e,t,n,a){return bo.subVectors(n,t),sc.subVectors(e,t),bo.cross(sc).dot(a)<0}set(e,t,n){return this.a.copy(e),this.b.copy(t),this.c.copy(n),this}setFromPointsAndIndices(e,t,n,a){return this.a.copy(e[t]),this.b.copy(e[n]),this.c.copy(e[a]),this}setFromAttributeAndIndices(e,t,n,a){return this.a.fromBufferAttribute(e,t),this.b.fromBufferAttribute(e,n),this.c.fromBufferAttribute(e,a),this}clone(){return new this.constructor().copy(this)}copy(e){return this.a.copy(e.a),this.b.copy(e.b),this.c.copy(e.c),this}getArea(){return bo.subVectors(this.c,this.b),sc.subVectors(this.a,this.b),bo.cross(sc).length()*.5}getMidpoint(e){return e.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(e){return is.getNormal(this.a,this.b,this.c,e)}getPlane(e){return e.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(e,t){return is.getBarycoord(e,this.a,this.b,this.c,t)}getInterpolation(e,t,n,a,s){return is.getInterpolation(e,this.a,this.b,this.c,t,n,a,s)}containsPoint(e){return is.containsPoint(e,this.a,this.b,this.c)}isFrontFacing(e){return is.isFrontFacing(this.a,this.b,this.c,e)}intersectsBox(e){return e.intersectsTriangle(this)}closestPointToPoint(e,t){const n=this.a,a=this.b,s=this.c;let l,u;Td.subVectors(a,n),Ad.subVectors(s,n),OS.subVectors(e,n);const d=Td.dot(OS),p=Ad.dot(OS);if(d<=0&&p<=0)return t.copy(n);DS.subVectors(e,a);const g=Td.dot(DS),y=Ad.dot(DS);if(g>=0&&y<=g)return t.copy(a);const _=d*y-g*p;if(_<=0&&d>=0&&g<=0)return l=d/(d-g),t.copy(n).addScaledVector(Td,l);US.subVectors(e,s);const b=Td.dot(US),x=Ad.dot(US);if(x>=0&&b<=x)return t.copy(s);const T=b*p-d*x;if(T<=0&&p>=0&&x<=0)return u=p/(p-x),t.copy(n).addScaledVector(Ad,u);const w=g*x-b*y;if(w<=0&&y-g>=0&&b-x>=0)return SA.subVectors(s,a),u=(y-g)/(y-g+(b-x)),t.copy(a).addScaledVector(SA,u);const S=1/(w+T+_);return l=T*S,u=_*S,t.copy(n).addScaledVector(Td,l).addScaledVector(Ad,u)}equals(e){return e.a.equals(this.a)&&e.b.equals(this.b)&&e.c.equals(this.c)}}const TN={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},su={h:0,s:0,l:0},ey={h:0,s:0,l:0};function zS(i,e,t){return t<0&&(t+=1),t>1&&(t-=1),t<1/6?i+(e-i)*6*t:t<1/2?e:t<2/3?i+(e-i)*6*(2/3-t):i}class Ut{constructor(e,t,n){return this.isColor=!0,this.r=1,this.g=1,this.b=1,this.set(e,t,n)}set(e,t,n){if(t===void 0&&n===void 0){const a=e;a&&a.isColor?this.copy(a):typeof a=="number"?this.setHex(a):typeof a=="string"&&this.setStyle(a)}else this.setRGB(e,t,n);return this}setScalar(e){return this.r=e,this.g=e,this.b=e,this}setHex(e,t=Fa){return e=Math.floor(e),this.r=(e>>16&255)/255,this.g=(e>>8&255)/255,this.b=(e&255)/255,Pn.colorSpaceToWorking(this,t),this}setRGB(e,t,n,a=Pn.workingColorSpace){return this.r=e,this.g=t,this.b=n,Pn.colorSpaceToWorking(this,a),this}setHSL(e,t,n,a=Pn.workingColorSpace){if(e=YE(e,1),t=hn(t,0,1),n=hn(n,0,1),t===0)this.r=this.g=this.b=n;else{const s=n<=.5?n*(1+t):n+t-n*t,l=2*n-s;this.r=zS(l,s,e+1/3),this.g=zS(l,s,e),this.b=zS(l,s,e-1/3)}return Pn.colorSpaceToWorking(this,a),this}setStyle(e,t=Fa){function n(s){s!==void 0&&parseFloat(s)<1&&Rt("Color: Alpha component of "+e+" will be ignored.")}let a;if(a=/^(\w+)\(([^\)]*)\)/.exec(e)){let s;const l=a[1],u=a[2];switch(l){case"rgb":case"rgba":if(s=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(u))return n(s[4]),this.setRGB(Math.min(255,parseInt(s[1],10))/255,Math.min(255,parseInt(s[2],10))/255,Math.min(255,parseInt(s[3],10))/255,t);if(s=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(u))return n(s[4]),this.setRGB(Math.min(100,parseInt(s[1],10))/100,Math.min(100,parseInt(s[2],10))/100,Math.min(100,parseInt(s[3],10))/100,t);break;case"hsl":case"hsla":if(s=/^\s*(\d*\.?\d+)\s*,\s*(\d*\.?\d+)\%\s*,\s*(\d*\.?\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(u))return n(s[4]),this.setHSL(parseFloat(s[1])/360,parseFloat(s[2])/100,parseFloat(s[3])/100,t);break;default:Rt("Color: Unknown color model "+e)}}else if(a=/^\#([A-Fa-f\d]+)$/.exec(e)){const s=a[1],l=s.length;if(l===3)return this.setRGB(parseInt(s.charAt(0),16)/15,parseInt(s.charAt(1),16)/15,parseInt(s.charAt(2),16)/15,t);if(l===6)return this.setHex(parseInt(s,16),t);Rt("Color: Invalid hex color "+e)}else if(e&&e.length>0)return this.setColorName(e,t);return this}setColorName(e,t=Fa){const n=TN[e.toLowerCase()];return n!==void 0?this.setHex(n,t):Rt("Color: Unknown color "+e),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(e){return this.r=e.r,this.g=e.g,this.b=e.b,this}copySRGBToLinear(e){return this.r=fc(e.r),this.g=fc(e.g),this.b=fc(e.b),this}copyLinearToSRGB(e){return this.r=Qd(e.r),this.g=Qd(e.g),this.b=Qd(e.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(e=Fa){return Pn.workingToColorSpace(mr.copy(this),e),Math.round(hn(mr.r*255,0,255))*65536+Math.round(hn(mr.g*255,0,255))*256+Math.round(hn(mr.b*255,0,255))}getHexString(e=Fa){return("000000"+this.getHex(e).toString(16)).slice(-6)}getHSL(e,t=Pn.workingColorSpace){Pn.workingToColorSpace(mr.copy(this),t);const n=mr.r,a=mr.g,s=mr.b,l=Math.max(n,a,s),u=Math.min(n,a,s);let d,p;const g=(u+l)/2;if(u===l)d=0,p=0;else{const y=l-u;switch(p=g<=.5?y/(l+u):y/(2-l-u),l){case n:d=(a-s)/y+(a<s?6:0);break;case a:d=(s-n)/y+2;break;case s:d=(n-a)/y+4;break}d/=6}return e.h=d,e.s=p,e.l=g,e}getRGB(e,t=Pn.workingColorSpace){return Pn.workingToColorSpace(mr.copy(this),t),e.r=mr.r,e.g=mr.g,e.b=mr.b,e}getStyle(e=Fa){Pn.workingToColorSpace(mr.copy(this),e);const t=mr.r,n=mr.g,a=mr.b;return e!==Fa?`color(${e} ${t.toFixed(3)} ${n.toFixed(3)} ${a.toFixed(3)})`:`rgb(${Math.round(t*255)},${Math.round(n*255)},${Math.round(a*255)})`}offsetHSL(e,t,n){return this.getHSL(su),this.setHSL(su.h+e,su.s+t,su.l+n)}add(e){return this.r+=e.r,this.g+=e.g,this.b+=e.b,this}addColors(e,t){return this.r=e.r+t.r,this.g=e.g+t.g,this.b=e.b+t.b,this}addScalar(e){return this.r+=e,this.g+=e,this.b+=e,this}sub(e){return this.r=Math.max(0,this.r-e.r),this.g=Math.max(0,this.g-e.g),this.b=Math.max(0,this.b-e.b),this}multiply(e){return this.r*=e.r,this.g*=e.g,this.b*=e.b,this}multiplyScalar(e){return this.r*=e,this.g*=e,this.b*=e,this}lerp(e,t){return this.r+=(e.r-this.r)*t,this.g+=(e.g-this.g)*t,this.b+=(e.b-this.b)*t,this}lerpColors(e,t,n){return this.r=e.r+(t.r-e.r)*n,this.g=e.g+(t.g-e.g)*n,this.b=e.b+(t.b-e.b)*n,this}lerpHSL(e,t){this.getHSL(su),e.getHSL(ey);const n=Mg(su.h,ey.h,t),a=Mg(su.s,ey.s,t),s=Mg(su.l,ey.l,t);return this.setHSL(n,a,s),this}setFromVector3(e){return this.r=e.x,this.g=e.y,this.b=e.z,this}applyMatrix3(e){const t=this.r,n=this.g,a=this.b,s=e.elements;return this.r=s[0]*t+s[3]*n+s[6]*a,this.g=s[1]*t+s[4]*n+s[7]*a,this.b=s[2]*t+s[5]*n+s[8]*a,this}equals(e){return e.r===this.r&&e.g===this.g&&e.b===this.b}fromArray(e,t=0){return this.r=e[t],this.g=e[t+1],this.b=e[t+2],this}toArray(e=[],t=0){return e[t]=this.r,e[t+1]=this.g,e[t+2]=this.b,e}fromBufferAttribute(e,t){return this.r=e.getX(t),this.g=e.getY(t),this.b=e.getZ(t),this}toJSON(){return this.getHex()}*[Symbol.iterator](){yield this.r,yield this.g,yield this.b}}const mr=new Ut;Ut.NAMES=TN;let xz=0;class vr extends Sl{constructor(){super(),this.isMaterial=!0,Object.defineProperty(this,"id",{value:xz++}),this.uuid=bs(),this.name="",this.type="Material",this.blending=Wh,this.side=dc,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.alphaHash=!1,this.blendSrc=c_,this.blendDst=u_,this.blendEquation=fu,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.blendColor=new Ut(0,0,0),this.blendAlpha=0,this.depthFunc=Kh,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=iE,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=Ih,this.stencilZFail=Ih,this.stencilZPass=Ih,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.forceSinglePass=!1,this.allowOverride=!0,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(e){this._alphaTest>0!=e>0&&this.version++,this._alphaTest=e}onBeforeRender(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(e){if(e!==void 0)for(const t in e){const n=e[t];if(n===void 0){Rt(`Material: parameter '${t}' has value of undefined.`);continue}const a=this[t];if(a===void 0){Rt(`Material: '${t}' is not a property of THREE.${this.type}.`);continue}a&&a.isColor?a.set(n):a&&a.isVector3&&n&&n.isVector3?a.copy(n):this[t]=n}}toJSON(e){const t=e===void 0||typeof e=="string";t&&(e={textures:{},images:{}});const n={metadata:{version:4.7,type:"Material",generator:"Material.toJSON"}};n.uuid=this.uuid,n.type=this.type,this.name!==""&&(n.name=this.name),this.color&&this.color.isColor&&(n.color=this.color.getHex()),this.roughness!==void 0&&(n.roughness=this.roughness),this.metalness!==void 0&&(n.metalness=this.metalness),this.sheen!==void 0&&(n.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(n.sheenColor=this.sheenColor.getHex()),this.sheenRoughness!==void 0&&(n.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(n.emissive=this.emissive.getHex()),this.emissiveIntensity!==void 0&&this.emissiveIntensity!==1&&(n.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(n.specular=this.specular.getHex()),this.specularIntensity!==void 0&&(n.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(n.specularColor=this.specularColor.getHex()),this.shininess!==void 0&&(n.shininess=this.shininess),this.clearcoat!==void 0&&(n.clearcoat=this.clearcoat),this.clearcoatRoughness!==void 0&&(n.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(n.clearcoatMap=this.clearcoatMap.toJSON(e).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(n.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(e).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(n.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(e).uuid,n.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),this.sheenColorMap&&this.sheenColorMap.isTexture&&(n.sheenColorMap=this.sheenColorMap.toJSON(e).uuid),this.sheenRoughnessMap&&this.sheenRoughnessMap.isTexture&&(n.sheenRoughnessMap=this.sheenRoughnessMap.toJSON(e).uuid),this.dispersion!==void 0&&(n.dispersion=this.dispersion),this.iridescence!==void 0&&(n.iridescence=this.iridescence),this.iridescenceIOR!==void 0&&(n.iridescenceIOR=this.iridescenceIOR),this.iridescenceThicknessRange!==void 0&&(n.iridescenceThicknessRange=this.iridescenceThicknessRange),this.iridescenceMap&&this.iridescenceMap.isTexture&&(n.iridescenceMap=this.iridescenceMap.toJSON(e).uuid),this.iridescenceThicknessMap&&this.iridescenceThicknessMap.isTexture&&(n.iridescenceThicknessMap=this.iridescenceThicknessMap.toJSON(e).uuid),this.anisotropy!==void 0&&(n.anisotropy=this.anisotropy),this.anisotropyRotation!==void 0&&(n.anisotropyRotation=this.anisotropyRotation),this.anisotropyMap&&this.anisotropyMap.isTexture&&(n.anisotropyMap=this.anisotropyMap.toJSON(e).uuid),this.map&&this.map.isTexture&&(n.map=this.map.toJSON(e).uuid),this.matcap&&this.matcap.isTexture&&(n.matcap=this.matcap.toJSON(e).uuid),this.alphaMap&&this.alphaMap.isTexture&&(n.alphaMap=this.alphaMap.toJSON(e).uuid),this.lightMap&&this.lightMap.isTexture&&(n.lightMap=this.lightMap.toJSON(e).uuid,n.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(n.aoMap=this.aoMap.toJSON(e).uuid,n.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(n.bumpMap=this.bumpMap.toJSON(e).uuid,n.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(n.normalMap=this.normalMap.toJSON(e).uuid,n.normalMapType=this.normalMapType,n.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(n.displacementMap=this.displacementMap.toJSON(e).uuid,n.displacementScale=this.displacementScale,n.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(n.roughnessMap=this.roughnessMap.toJSON(e).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(n.metalnessMap=this.metalnessMap.toJSON(e).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(n.emissiveMap=this.emissiveMap.toJSON(e).uuid),this.specularMap&&this.specularMap.isTexture&&(n.specularMap=this.specularMap.toJSON(e).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(n.specularIntensityMap=this.specularIntensityMap.toJSON(e).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(n.specularColorMap=this.specularColorMap.toJSON(e).uuid),this.envMap&&this.envMap.isTexture&&(n.envMap=this.envMap.toJSON(e).uuid,this.combine!==void 0&&(n.combine=this.combine)),this.envMapRotation!==void 0&&(n.envMapRotation=this.envMapRotation.toArray()),this.envMapIntensity!==void 0&&(n.envMapIntensity=this.envMapIntensity),this.reflectivity!==void 0&&(n.reflectivity=this.reflectivity),this.refractionRatio!==void 0&&(n.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(n.gradientMap=this.gradientMap.toJSON(e).uuid),this.transmission!==void 0&&(n.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(n.transmissionMap=this.transmissionMap.toJSON(e).uuid),this.thickness!==void 0&&(n.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(n.thicknessMap=this.thicknessMap.toJSON(e).uuid),this.attenuationDistance!==void 0&&this.attenuationDistance!==1/0&&(n.attenuationDistance=this.attenuationDistance),this.attenuationColor!==void 0&&(n.attenuationColor=this.attenuationColor.getHex()),this.size!==void 0&&(n.size=this.size),this.shadowSide!==null&&(n.shadowSide=this.shadowSide),this.sizeAttenuation!==void 0&&(n.sizeAttenuation=this.sizeAttenuation),this.blending!==Wh&&(n.blending=this.blending),this.side!==dc&&(n.side=this.side),this.vertexColors===!0&&(n.vertexColors=!0),this.opacity<1&&(n.opacity=this.opacity),this.transparent===!0&&(n.transparent=!0),this.blendSrc!==c_&&(n.blendSrc=this.blendSrc),this.blendDst!==u_&&(n.blendDst=this.blendDst),this.blendEquation!==fu&&(n.blendEquation=this.blendEquation),this.blendSrcAlpha!==null&&(n.blendSrcAlpha=this.blendSrcAlpha),this.blendDstAlpha!==null&&(n.blendDstAlpha=this.blendDstAlpha),this.blendEquationAlpha!==null&&(n.blendEquationAlpha=this.blendEquationAlpha),this.blendColor&&this.blendColor.isColor&&(n.blendColor=this.blendColor.getHex()),this.blendAlpha!==0&&(n.blendAlpha=this.blendAlpha),this.depthFunc!==Kh&&(n.depthFunc=this.depthFunc),this.depthTest===!1&&(n.depthTest=this.depthTest),this.depthWrite===!1&&(n.depthWrite=this.depthWrite),this.colorWrite===!1&&(n.colorWrite=this.colorWrite),this.stencilWriteMask!==255&&(n.stencilWriteMask=this.stencilWriteMask),this.stencilFunc!==iE&&(n.stencilFunc=this.stencilFunc),this.stencilRef!==0&&(n.stencilRef=this.stencilRef),this.stencilFuncMask!==255&&(n.stencilFuncMask=this.stencilFuncMask),this.stencilFail!==Ih&&(n.stencilFail=this.stencilFail),this.stencilZFail!==Ih&&(n.stencilZFail=this.stencilZFail),this.stencilZPass!==Ih&&(n.stencilZPass=this.stencilZPass),this.stencilWrite===!0&&(n.stencilWrite=this.stencilWrite),this.rotation!==void 0&&this.rotation!==0&&(n.rotation=this.rotation),this.polygonOffset===!0&&(n.polygonOffset=!0),this.polygonOffsetFactor!==0&&(n.polygonOffsetFactor=this.polygonOffsetFactor),this.polygonOffsetUnits!==0&&(n.polygonOffsetUnits=this.polygonOffsetUnits),this.linewidth!==void 0&&this.linewidth!==1&&(n.linewidth=this.linewidth),this.dashSize!==void 0&&(n.dashSize=this.dashSize),this.gapSize!==void 0&&(n.gapSize=this.gapSize),this.scale!==void 0&&(n.scale=this.scale),this.dithering===!0&&(n.dithering=!0),this.alphaTest>0&&(n.alphaTest=this.alphaTest),this.alphaHash===!0&&(n.alphaHash=!0),this.alphaToCoverage===!0&&(n.alphaToCoverage=!0),this.premultipliedAlpha===!0&&(n.premultipliedAlpha=!0),this.forceSinglePass===!0&&(n.forceSinglePass=!0),this.allowOverride===!1&&(n.allowOverride=!1),this.wireframe===!0&&(n.wireframe=!0),this.wireframeLinewidth>1&&(n.wireframeLinewidth=this.wireframeLinewidth),this.wireframeLinecap!=="round"&&(n.wireframeLinecap=this.wireframeLinecap),this.wireframeLinejoin!=="round"&&(n.wireframeLinejoin=this.wireframeLinejoin),this.flatShading===!0&&(n.flatShading=!0),this.visible===!1&&(n.visible=!1),this.toneMapped===!1&&(n.toneMapped=!1),this.fog===!1&&(n.fog=!1),Object.keys(this.userData).length>0&&(n.userData=this.userData);function a(s){const l=[];for(const u in s){const d=s[u];delete d.metadata,l.push(d)}return l}if(t){const s=a(e.textures),l=a(e.images);s.length>0&&(n.textures=s),l.length>0&&(n.images=l)}return n}clone(){return new this.constructor().copy(this)}copy(e){this.name=e.name,this.blending=e.blending,this.side=e.side,this.vertexColors=e.vertexColors,this.opacity=e.opacity,this.transparent=e.transparent,this.blendSrc=e.blendSrc,this.blendDst=e.blendDst,this.blendEquation=e.blendEquation,this.blendSrcAlpha=e.blendSrcAlpha,this.blendDstAlpha=e.blendDstAlpha,this.blendEquationAlpha=e.blendEquationAlpha,this.blendColor.copy(e.blendColor),this.blendAlpha=e.blendAlpha,this.depthFunc=e.depthFunc,this.depthTest=e.depthTest,this.depthWrite=e.depthWrite,this.stencilWriteMask=e.stencilWriteMask,this.stencilFunc=e.stencilFunc,this.stencilRef=e.stencilRef,this.stencilFuncMask=e.stencilFuncMask,this.stencilFail=e.stencilFail,this.stencilZFail=e.stencilZFail,this.stencilZPass=e.stencilZPass,this.stencilWrite=e.stencilWrite;const t=e.clippingPlanes;let n=null;if(t!==null){const a=t.length;n=new Array(a);for(let s=0;s!==a;++s)n[s]=t[s].clone()}return this.clippingPlanes=n,this.clipIntersection=e.clipIntersection,this.clipShadows=e.clipShadows,this.shadowSide=e.shadowSide,this.colorWrite=e.colorWrite,this.precision=e.precision,this.polygonOffset=e.polygonOffset,this.polygonOffsetFactor=e.polygonOffsetFactor,this.polygonOffsetUnits=e.polygonOffsetUnits,this.dithering=e.dithering,this.alphaTest=e.alphaTest,this.alphaHash=e.alphaHash,this.alphaToCoverage=e.alphaToCoverage,this.premultipliedAlpha=e.premultipliedAlpha,this.forceSinglePass=e.forceSinglePass,this.allowOverride=e.allowOverride,this.visible=e.visible,this.toneMapped=e.toneMapped,this.userData=JSON.parse(JSON.stringify(e.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(e){e===!0&&this.version++}}class mc extends vr{constructor(e){super(),this.isMeshBasicMaterial=!0,this.type="MeshBasicMaterial",this.color=new Ut(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new Ss,this.combine=ev,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}const hc=Sz();function Sz(){const i=new ArrayBuffer(4),e=new Float32Array(i),t=new Uint32Array(i),n=new Uint32Array(512),a=new Uint32Array(512);for(let d=0;d<256;++d){const p=d-127;p<-27?(n[d]=0,n[d|256]=32768,a[d]=24,a[d|256]=24):p<-14?(n[d]=1024>>-p-14,n[d|256]=1024>>-p-14|32768,a[d]=-p-1,a[d|256]=-p-1):p<=15?(n[d]=p+15<<10,n[d|256]=p+15<<10|32768,a[d]=13,a[d|256]=13):p<128?(n[d]=31744,n[d|256]=64512,a[d]=24,a[d|256]=24):(n[d]=31744,n[d|256]=64512,a[d]=13,a[d|256]=13)}const s=new Uint32Array(2048),l=new Uint32Array(64),u=new Uint32Array(64);for(let d=1;d<1024;++d){let p=d<<13,g=0;for(;(p&8388608)===0;)p<<=1,g-=8388608;p&=-8388609,g+=947912704,s[d]=p|g}for(let d=1024;d<2048;++d)s[d]=939524096+(d-1024<<13);for(let d=1;d<31;++d)l[d]=d<<23;l[31]=1199570944,l[32]=2147483648;for(let d=33;d<63;++d)l[d]=2147483648+(d-32<<23);l[63]=3347054592;for(let d=1;d<64;++d)d!==32&&(u[d]=1024);return{floatView:e,uint32View:t,baseTable:n,shiftTable:a,mantissaTable:s,exponentTable:l,offsetTable:u}}function es(i){Math.abs(i)>65504&&Rt("DataUtils.toHalfFloat(): Value out of range."),i=hn(i,-65504,65504),hc.floatView[0]=i;const e=hc.uint32View[0],t=e>>23&511;return hc.baseTable[t]+((e&8388607)>>hc.shiftTable[t])}function mg(i){const e=i>>10;return hc.uint32View[0]=hc.mantissaTable[hc.offsetTable[e]+(i&1023)]+hc.exponentTable[e],hc.floatView[0]}class Gh{static toHalfFloat(e){return es(e)}static fromHalfFloat(e){return mg(e)}}const ma=new ee,ty=new Ke;let Ez=0;class ni{constructor(e,t,n=!1){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.isBufferAttribute=!0,Object.defineProperty(this,"id",{value:Ez++}),this.name="",this.array=e,this.itemSize=t,this.count=e!==void 0?e.length/t:0,this.normalized=n,this.usage=Fg,this.updateRanges=[],this.gpuType=Di,this.version=0}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}setUsage(e){return this.usage=e,this}addUpdateRange(e,t){this.updateRanges.push({start:e,count:t})}clearUpdateRanges(){this.updateRanges.length=0}copy(e){return this.name=e.name,this.array=new e.array.constructor(e.array),this.itemSize=e.itemSize,this.count=e.count,this.normalized=e.normalized,this.usage=e.usage,this.gpuType=e.gpuType,this}copyAt(e,t,n){e*=this.itemSize,n*=t.itemSize;for(let a=0,s=this.itemSize;a<s;a++)this.array[e+a]=t.array[n+a];return this}copyArray(e){return this.array.set(e),this}applyMatrix3(e){if(this.itemSize===2)for(let t=0,n=this.count;t<n;t++)ty.fromBufferAttribute(this,t),ty.applyMatrix3(e),this.setXY(t,ty.x,ty.y);else if(this.itemSize===3)for(let t=0,n=this.count;t<n;t++)ma.fromBufferAttribute(this,t),ma.applyMatrix3(e),this.setXYZ(t,ma.x,ma.y,ma.z);return this}applyMatrix4(e){for(let t=0,n=this.count;t<n;t++)ma.fromBufferAttribute(this,t),ma.applyMatrix4(e),this.setXYZ(t,ma.x,ma.y,ma.z);return this}applyNormalMatrix(e){for(let t=0,n=this.count;t<n;t++)ma.fromBufferAttribute(this,t),ma.applyNormalMatrix(e),this.setXYZ(t,ma.x,ma.y,ma.z);return this}transformDirection(e){for(let t=0,n=this.count;t<n;t++)ma.fromBufferAttribute(this,t),ma.transformDirection(e),this.setXYZ(t,ma.x,ma.y,ma.z);return this}set(e,t=0){return this.array.set(e,t),this}getComponent(e,t){let n=this.array[e*this.itemSize+t];return this.normalized&&(n=Vr(n,this.array)),n}setComponent(e,t,n){return this.normalized&&(n=Mn(n,this.array)),this.array[e*this.itemSize+t]=n,this}getX(e){let t=this.array[e*this.itemSize];return this.normalized&&(t=Vr(t,this.array)),t}setX(e,t){return this.normalized&&(t=Mn(t,this.array)),this.array[e*this.itemSize]=t,this}getY(e){let t=this.array[e*this.itemSize+1];return this.normalized&&(t=Vr(t,this.array)),t}setY(e,t){return this.normalized&&(t=Mn(t,this.array)),this.array[e*this.itemSize+1]=t,this}getZ(e){let t=this.array[e*this.itemSize+2];return this.normalized&&(t=Vr(t,this.array)),t}setZ(e,t){return this.normalized&&(t=Mn(t,this.array)),this.array[e*this.itemSize+2]=t,this}getW(e){let t=this.array[e*this.itemSize+3];return this.normalized&&(t=Vr(t,this.array)),t}setW(e,t){return this.normalized&&(t=Mn(t,this.array)),this.array[e*this.itemSize+3]=t,this}setXY(e,t,n){return e*=this.itemSize,this.normalized&&(t=Mn(t,this.array),n=Mn(n,this.array)),this.array[e+0]=t,this.array[e+1]=n,this}setXYZ(e,t,n,a){return e*=this.itemSize,this.normalized&&(t=Mn(t,this.array),n=Mn(n,this.array),a=Mn(a,this.array)),this.array[e+0]=t,this.array[e+1]=n,this.array[e+2]=a,this}setXYZW(e,t,n,a,s){return e*=this.itemSize,this.normalized&&(t=Mn(t,this.array),n=Mn(n,this.array),a=Mn(a,this.array),s=Mn(s,this.array)),this.array[e+0]=t,this.array[e+1]=n,this.array[e+2]=a,this.array[e+3]=s,this}onUpload(e){return this.onUploadCallback=e,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){const e={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.from(this.array),normalized:this.normalized};return this.name!==""&&(e.name=this.name),this.usage!==Fg&&(e.usage=this.usage),e}}class Mz extends ni{constructor(e,t,n){super(new Int8Array(e),t,n)}}class wz extends ni{constructor(e,t,n){super(new Uint8Array(e),t,n)}}class Tz extends ni{constructor(e,t,n){super(new Uint8ClampedArray(e),t,n)}}class Az extends ni{constructor(e,t,n){super(new Int16Array(e),t,n)}}class KE extends ni{constructor(e,t,n){super(new Uint16Array(e),t,n)}}class Cz extends ni{constructor(e,t,n){super(new Int32Array(e),t,n)}}class JE extends ni{constructor(e,t,n){super(new Uint32Array(e),t,n)}}class Rz extends ni{constructor(e,t,n){super(new Uint16Array(e),t,n),this.isFloat16BufferAttribute=!0}getX(e){let t=mg(this.array[e*this.itemSize]);return this.normalized&&(t=Vr(t,this.array)),t}setX(e,t){return this.normalized&&(t=Mn(t,this.array)),this.array[e*this.itemSize]=es(t),this}getY(e){let t=mg(this.array[e*this.itemSize+1]);return this.normalized&&(t=Vr(t,this.array)),t}setY(e,t){return this.normalized&&(t=Mn(t,this.array)),this.array[e*this.itemSize+1]=es(t),this}getZ(e){let t=mg(this.array[e*this.itemSize+2]);return this.normalized&&(t=Vr(t,this.array)),t}setZ(e,t){return this.normalized&&(t=Mn(t,this.array)),this.array[e*this.itemSize+2]=es(t),this}getW(e){let t=mg(this.array[e*this.itemSize+3]);return this.normalized&&(t=Vr(t,this.array)),t}setW(e,t){return this.normalized&&(t=Mn(t,this.array)),this.array[e*this.itemSize+3]=es(t),this}setXY(e,t,n){return e*=this.itemSize,this.normalized&&(t=Mn(t,this.array),n=Mn(n,this.array)),this.array[e+0]=es(t),this.array[e+1]=es(n),this}setXYZ(e,t,n,a){return e*=this.itemSize,this.normalized&&(t=Mn(t,this.array),n=Mn(n,this.array),a=Mn(a,this.array)),this.array[e+0]=es(t),this.array[e+1]=es(n),this.array[e+2]=es(a),this}setXYZW(e,t,n,a,s){return e*=this.itemSize,this.normalized&&(t=Mn(t,this.array),n=Mn(n,this.array),a=Mn(a,this.array),s=Mn(s,this.array)),this.array[e+0]=es(t),this.array[e+1]=es(n),this.array[e+2]=es(a),this.array[e+3]=es(s),this}}class Ft extends ni{constructor(e,t,n){super(new Float32Array(e),t,n)}}let Nz=0;const Vs=new on,BS=new Yn,Cd=new ee,vs=new Ha,eg=new Ha,Ba=new ee;class mn extends Sl{constructor(){super(),this.isBufferGeometry=!0,Object.defineProperty(this,"id",{value:Nz++}),this.uuid=bs(),this.name="",this.type="BufferGeometry",this.index=null,this.indirect=null,this.indirectOffset=0,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(e){return Array.isArray(e)?this.index=new(SN(e)?JE:KE)(e,1):this.index=e,this}setIndirect(e,t=0){return this.indirect=e,this.indirectOffset=t,this}getIndirect(){return this.indirect}getAttribute(e){return this.attributes[e]}setAttribute(e,t){return this.attributes[e]=t,this}deleteAttribute(e){return delete this.attributes[e],this}hasAttribute(e){return this.attributes[e]!==void 0}addGroup(e,t,n=0){this.groups.push({start:e,count:t,materialIndex:n})}clearGroups(){this.groups=[]}setDrawRange(e,t){this.drawRange.start=e,this.drawRange.count=t}applyMatrix4(e){const t=this.attributes.position;t!==void 0&&(t.applyMatrix4(e),t.needsUpdate=!0);const n=this.attributes.normal;if(n!==void 0){const s=new Sn().getNormalMatrix(e);n.applyNormalMatrix(s),n.needsUpdate=!0}const a=this.attributes.tangent;return a!==void 0&&(a.transformDirection(e),a.needsUpdate=!0),this.boundingBox!==null&&this.computeBoundingBox(),this.boundingSphere!==null&&this.computeBoundingSphere(),this}applyQuaternion(e){return Vs.makeRotationFromQuaternion(e),this.applyMatrix4(Vs),this}rotateX(e){return Vs.makeRotationX(e),this.applyMatrix4(Vs),this}rotateY(e){return Vs.makeRotationY(e),this.applyMatrix4(Vs),this}rotateZ(e){return Vs.makeRotationZ(e),this.applyMatrix4(Vs),this}translate(e,t,n){return Vs.makeTranslation(e,t,n),this.applyMatrix4(Vs),this}scale(e,t,n){return Vs.makeScale(e,t,n),this.applyMatrix4(Vs),this}lookAt(e){return BS.lookAt(e),BS.updateMatrix(),this.applyMatrix4(BS.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(Cd).negate(),this.translate(Cd.x,Cd.y,Cd.z),this}setFromPoints(e){const t=this.getAttribute("position");if(t===void 0){const n=[];for(let a=0,s=e.length;a<s;a++){const l=e[a];n.push(l.x,l.y,l.z||0)}this.setAttribute("position",new Ft(n,3))}else{const n=Math.min(e.length,t.count);for(let a=0;a<n;a++){const s=e[a];t.setXYZ(a,s.x,s.y,s.z||0)}e.length>t.count&&Rt("BufferGeometry: Buffer size too small for points data. Use .dispose() and create a new geometry."),t.needsUpdate=!0}return this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new Ha);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){Qt("BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box.",this),this.boundingBox.set(new ee(-1/0,-1/0,-1/0),new ee(1/0,1/0,1/0));return}if(e!==void 0){if(this.boundingBox.setFromBufferAttribute(e),t)for(let n=0,a=t.length;n<a;n++){const s=t[n];vs.setFromBufferAttribute(s),this.morphTargetsRelative?(Ba.addVectors(this.boundingBox.min,vs.min),this.boundingBox.expandByPoint(Ba),Ba.addVectors(this.boundingBox.max,vs.max),this.boundingBox.expandByPoint(Ba)):(this.boundingBox.expandByPoint(vs.min),this.boundingBox.expandByPoint(vs.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&Qt('BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new Va);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){Qt("BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere.",this),this.boundingSphere.set(new ee,1/0);return}if(e){const n=this.boundingSphere.center;if(vs.setFromBufferAttribute(e),t)for(let s=0,l=t.length;s<l;s++){const u=t[s];eg.setFromBufferAttribute(u),this.morphTargetsRelative?(Ba.addVectors(vs.min,eg.min),vs.expandByPoint(Ba),Ba.addVectors(vs.max,eg.max),vs.expandByPoint(Ba)):(vs.expandByPoint(eg.min),vs.expandByPoint(eg.max))}vs.getCenter(n);let a=0;for(let s=0,l=e.count;s<l;s++)Ba.fromBufferAttribute(e,s),a=Math.max(a,n.distanceToSquared(Ba));if(t)for(let s=0,l=t.length;s<l;s++){const u=t[s],d=this.morphTargetsRelative;for(let p=0,g=u.count;p<g;p++)Ba.fromBufferAttribute(u,p),d&&(Cd.fromBufferAttribute(e,p),Ba.add(Cd)),a=Math.max(a,n.distanceToSquared(Ba))}this.boundingSphere.radius=Math.sqrt(a),isNaN(this.boundingSphere.radius)&&Qt('BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeTangents(){const e=this.index,t=this.attributes;if(e===null||t.position===void 0||t.normal===void 0||t.uv===void 0){Qt("BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");return}const n=t.position,a=t.normal,s=t.uv;this.hasAttribute("tangent")===!1&&this.setAttribute("tangent",new ni(new Float32Array(4*n.count),4));const l=this.getAttribute("tangent"),u=[],d=[];for(let H=0;H<n.count;H++)u[H]=new ee,d[H]=new ee;const p=new ee,g=new ee,y=new ee,_=new Ke,b=new Ke,x=new Ke,T=new ee,w=new ee;function S(H,D,L){p.fromBufferAttribute(n,H),g.fromBufferAttribute(n,D),y.fromBufferAttribute(n,L),_.fromBufferAttribute(s,H),b.fromBufferAttribute(s,D),x.fromBufferAttribute(s,L),g.sub(p),y.sub(p),b.sub(_),x.sub(_);const j=1/(b.x*x.y-x.x*b.y);isFinite(j)&&(T.copy(g).multiplyScalar(x.y).addScaledVector(y,-b.y).multiplyScalar(j),w.copy(y).multiplyScalar(b.x).addScaledVector(g,-x.x).multiplyScalar(j),u[H].add(T),u[D].add(T),u[L].add(T),d[H].add(w),d[D].add(w),d[L].add(w))}let C=this.groups;C.length===0&&(C=[{start:0,count:e.count}]);for(let H=0,D=C.length;H<D;++H){const L=C[H],j=L.start,W=L.count;for(let X=j,K=j+W;X<K;X+=3)S(e.getX(X+0),e.getX(X+1),e.getX(X+2))}const N=new ee,O=new ee,P=new ee,U=new ee;function z(H){P.fromBufferAttribute(a,H),U.copy(P);const D=u[H];N.copy(D),N.sub(P.multiplyScalar(P.dot(D))).normalize(),O.crossVectors(U,D);const j=O.dot(d[H])<0?-1:1;l.setXYZW(H,N.x,N.y,N.z,j)}for(let H=0,D=C.length;H<D;++H){const L=C[H],j=L.start,W=L.count;for(let X=j,K=j+W;X<K;X+=3)z(e.getX(X+0)),z(e.getX(X+1)),z(e.getX(X+2))}}computeVertexNormals(){const e=this.index,t=this.getAttribute("position");if(t!==void 0){let n=this.getAttribute("normal");if(n===void 0)n=new ni(new Float32Array(t.count*3),3),this.setAttribute("normal",n);else for(let _=0,b=n.count;_<b;_++)n.setXYZ(_,0,0,0);const a=new ee,s=new ee,l=new ee,u=new ee,d=new ee,p=new ee,g=new ee,y=new ee;if(e)for(let _=0,b=e.count;_<b;_+=3){const x=e.getX(_+0),T=e.getX(_+1),w=e.getX(_+2);a.fromBufferAttribute(t,x),s.fromBufferAttribute(t,T),l.fromBufferAttribute(t,w),g.subVectors(l,s),y.subVectors(a,s),g.cross(y),u.fromBufferAttribute(n,x),d.fromBufferAttribute(n,T),p.fromBufferAttribute(n,w),u.add(g),d.add(g),p.add(g),n.setXYZ(x,u.x,u.y,u.z),n.setXYZ(T,d.x,d.y,d.z),n.setXYZ(w,p.x,p.y,p.z)}else for(let _=0,b=t.count;_<b;_+=3)a.fromBufferAttribute(t,_+0),s.fromBufferAttribute(t,_+1),l.fromBufferAttribute(t,_+2),g.subVectors(l,s),y.subVectors(a,s),g.cross(y),n.setXYZ(_+0,g.x,g.y,g.z),n.setXYZ(_+1,g.x,g.y,g.z),n.setXYZ(_+2,g.x,g.y,g.z);this.normalizeNormals(),n.needsUpdate=!0}}normalizeNormals(){const e=this.attributes.normal;for(let t=0,n=e.count;t<n;t++)Ba.fromBufferAttribute(e,t),Ba.normalize(),e.setXYZ(t,Ba.x,Ba.y,Ba.z)}toNonIndexed(){function e(u,d){const p=u.array,g=u.itemSize,y=u.normalized,_=new p.constructor(d.length*g);let b=0,x=0;for(let T=0,w=d.length;T<w;T++){u.isInterleavedBufferAttribute?b=d[T]*u.data.stride+u.offset:b=d[T]*g;for(let S=0;S<g;S++)_[x++]=p[b++]}return new ni(_,g,y)}if(this.index===null)return Rt("BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;const t=new mn,n=this.index.array,a=this.attributes;for(const u in a){const d=a[u],p=e(d,n);t.setAttribute(u,p)}const s=this.morphAttributes;for(const u in s){const d=[],p=s[u];for(let g=0,y=p.length;g<y;g++){const _=p[g],b=e(_,n);d.push(b)}t.morphAttributes[u]=d}t.morphTargetsRelative=this.morphTargetsRelative;const l=this.groups;for(let u=0,d=l.length;u<d;u++){const p=l[u];t.addGroup(p.start,p.count,p.materialIndex)}return t}toJSON(){const e={metadata:{version:4.7,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,this.name!==""&&(e.name=this.name),Object.keys(this.userData).length>0&&(e.userData=this.userData),this.parameters!==void 0){const d=this.parameters;for(const p in d)d[p]!==void 0&&(e[p]=d[p]);return e}e.data={attributes:{}};const t=this.index;t!==null&&(e.data.index={type:t.array.constructor.name,array:Array.prototype.slice.call(t.array)});const n=this.attributes;for(const d in n){const p=n[d];e.data.attributes[d]=p.toJSON(e.data)}const a={};let s=!1;for(const d in this.morphAttributes){const p=this.morphAttributes[d],g=[];for(let y=0,_=p.length;y<_;y++){const b=p[y];g.push(b.toJSON(e.data))}g.length>0&&(a[d]=g,s=!0)}s&&(e.data.morphAttributes=a,e.data.morphTargetsRelative=this.morphTargetsRelative);const l=this.groups;l.length>0&&(e.data.groups=JSON.parse(JSON.stringify(l)));const u=this.boundingSphere;return u!==null&&(e.data.boundingSphere=u.toJSON()),e}clone(){return new this.constructor().copy(this)}copy(e){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;const t={};this.name=e.name;const n=e.index;n!==null&&this.setIndex(n.clone());const a=e.attributes;for(const p in a){const g=a[p];this.setAttribute(p,g.clone(t))}const s=e.morphAttributes;for(const p in s){const g=[],y=s[p];for(let _=0,b=y.length;_<b;_++)g.push(y[_].clone(t));this.morphAttributes[p]=g}this.morphTargetsRelative=e.morphTargetsRelative;const l=e.groups;for(let p=0,g=l.length;p<g;p++){const y=l[p];this.addGroup(y.start,y.count,y.materialIndex)}const u=e.boundingBox;u!==null&&(this.boundingBox=u.clone());const d=e.boundingSphere;return d!==null&&(this.boundingSphere=d.clone()),this.drawRange.start=e.drawRange.start,this.drawRange.count=e.drawRange.count,this.userData=e.userData,this}dispose(){this.dispatchEvent({type:"dispose"})}}const EA=new on,yh=new rf,ny=new Va,MA=new ee,iy=new ee,ay=new ee,ry=new ee,FS=new ee,sy=new ee,wA=new ee,oy=new ee;class Ui extends Yn{constructor(e=new mn,t=new mc){super(),this.isMesh=!0,this.type="Mesh",this.geometry=e,this.material=t,this.morphTargetDictionary=void 0,this.morphTargetInfluences=void 0,this.count=1,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),e.morphTargetInfluences!==void 0&&(this.morphTargetInfluences=e.morphTargetInfluences.slice()),e.morphTargetDictionary!==void 0&&(this.morphTargetDictionary=Object.assign({},e.morphTargetDictionary)),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}updateMorphTargets(){const t=this.geometry.morphAttributes,n=Object.keys(t);if(n.length>0){const a=t[n[0]];if(a!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,l=a.length;s<l;s++){const u=a[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[u]=s}}}}getVertexPosition(e,t){const n=this.geometry,a=n.attributes.position,s=n.morphAttributes.position,l=n.morphTargetsRelative;t.fromBufferAttribute(a,e);const u=this.morphTargetInfluences;if(s&&u){sy.set(0,0,0);for(let d=0,p=s.length;d<p;d++){const g=u[d],y=s[d];g!==0&&(FS.fromBufferAttribute(y,e),l?sy.addScaledVector(FS,g):sy.addScaledVector(FS.sub(t),g))}t.add(sy)}return t}raycast(e,t){const n=this.geometry,a=this.material,s=this.matrixWorld;a!==void 0&&(n.boundingSphere===null&&n.computeBoundingSphere(),ny.copy(n.boundingSphere),ny.applyMatrix4(s),yh.copy(e.ray).recast(e.near),!(ny.containsPoint(yh.origin)===!1&&(yh.intersectSphere(ny,MA)===null||yh.origin.distanceToSquared(MA)>(e.far-e.near)**2))&&(EA.copy(s).invert(),yh.copy(e.ray).applyMatrix4(EA),!(n.boundingBox!==null&&yh.intersectsBox(n.boundingBox)===!1)&&this._computeIntersections(e,t,yh)))}_computeIntersections(e,t,n){let a;const s=this.geometry,l=this.material,u=s.index,d=s.attributes.position,p=s.attributes.uv,g=s.attributes.uv1,y=s.attributes.normal,_=s.groups,b=s.drawRange;if(u!==null)if(Array.isArray(l))for(let x=0,T=_.length;x<T;x++){const w=_[x],S=l[w.materialIndex],C=Math.max(w.start,b.start),N=Math.min(u.count,Math.min(w.start+w.count,b.start+b.count));for(let O=C,P=N;O<P;O+=3){const U=u.getX(O),z=u.getX(O+1),H=u.getX(O+2);a=ly(this,S,e,n,p,g,y,U,z,H),a&&(a.faceIndex=Math.floor(O/3),a.face.materialIndex=w.materialIndex,t.push(a))}}else{const x=Math.max(0,b.start),T=Math.min(u.count,b.start+b.count);for(let w=x,S=T;w<S;w+=3){const C=u.getX(w),N=u.getX(w+1),O=u.getX(w+2);a=ly(this,l,e,n,p,g,y,C,N,O),a&&(a.faceIndex=Math.floor(w/3),t.push(a))}}else if(d!==void 0)if(Array.isArray(l))for(let x=0,T=_.length;x<T;x++){const w=_[x],S=l[w.materialIndex],C=Math.max(w.start,b.start),N=Math.min(d.count,Math.min(w.start+w.count,b.start+b.count));for(let O=C,P=N;O<P;O+=3){const U=O,z=O+1,H=O+2;a=ly(this,S,e,n,p,g,y,U,z,H),a&&(a.faceIndex=Math.floor(O/3),a.face.materialIndex=w.materialIndex,t.push(a))}}else{const x=Math.max(0,b.start),T=Math.min(d.count,b.start+b.count);for(let w=x,S=T;w<S;w+=3){const C=w,N=w+1,O=w+2;a=ly(this,l,e,n,p,g,y,C,N,O),a&&(a.faceIndex=Math.floor(w/3),t.push(a))}}}}function Oz(i,e,t,n,a,s,l,u){let d;if(e.side===jr?d=n.intersectTriangle(l,s,a,!0,u):d=n.intersectTriangle(a,s,l,e.side===dc,u),d===null)return null;oy.copy(u),oy.applyMatrix4(i.matrixWorld);const p=t.ray.origin.distanceTo(oy);return p<t.near||p>t.far?null:{distance:p,point:oy.clone(),object:i}}function ly(i,e,t,n,a,s,l,u,d,p){i.getVertexPosition(u,iy),i.getVertexPosition(d,ay),i.getVertexPosition(p,ry);const g=Oz(i,e,t,n,iy,ay,ry,wA);if(g){const y=new ee;is.getBarycoord(wA,iy,ay,ry,y),a&&(g.uv=is.getInterpolatedAttribute(a,u,d,p,y,new Ke)),s&&(g.uv1=is.getInterpolatedAttribute(s,u,d,p,y,new Ke)),l&&(g.normal=is.getInterpolatedAttribute(l,u,d,p,y,new ee),g.normal.dot(n.direction)>0&&g.normal.multiplyScalar(-1));const _={a:u,b:d,c:p,normal:new ee,materialIndex:0};is.getNormal(iy,ay,ry,_.normal),g.face=_,g.barycoord=y}return g}class sf extends mn{constructor(e=1,t=1,n=1,a=1,s=1,l=1){super(),this.type="BoxGeometry",this.parameters={width:e,height:t,depth:n,widthSegments:a,heightSegments:s,depthSegments:l};const u=this;a=Math.floor(a),s=Math.floor(s),l=Math.floor(l);const d=[],p=[],g=[],y=[];let _=0,b=0;x("z","y","x",-1,-1,n,t,e,l,s,0),x("z","y","x",1,-1,n,t,-e,l,s,1),x("x","z","y",1,1,e,n,t,a,l,2),x("x","z","y",1,-1,e,n,-t,a,l,3),x("x","y","z",1,-1,e,t,n,a,s,4),x("x","y","z",-1,-1,e,t,-n,a,s,5),this.setIndex(d),this.setAttribute("position",new Ft(p,3)),this.setAttribute("normal",new Ft(g,3)),this.setAttribute("uv",new Ft(y,2));function x(T,w,S,C,N,O,P,U,z,H,D){const L=O/z,j=P/H,W=O/2,X=P/2,K=U/2,le=z+1,k=H+1;let Z=0,ne=0;const pe=new ee;for(let ge=0;ge<k;ge++){const J=ge*j-X;for(let ce=0;ce<le;ce++){const Se=ce*L-W;pe[T]=Se*C,pe[w]=J*N,pe[S]=K,p.push(pe.x,pe.y,pe.z),pe[T]=0,pe[w]=0,pe[S]=U>0?1:-1,g.push(pe.x,pe.y,pe.z),y.push(ce/z),y.push(1-ge/H),Z+=1}}for(let ge=0;ge<H;ge++)for(let J=0;J<z;J++){const ce=_+J+le*ge,Se=_+J+le*(ge+1),Le=_+(J+1)+le*(ge+1),nt=_+(J+1)+le*ge;d.push(ce,Se,nt),d.push(Se,Le,nt),ne+=6}u.addGroup(b,ne,D),b+=ne,_+=Z}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new sf(e.width,e.height,e.depth,e.widthSegments,e.heightSegments,e.depthSegments)}}function up(i){const e={};for(const t in i){e[t]={};for(const n in i[t]){const a=i[t][n];a&&(a.isColor||a.isMatrix3||a.isMatrix4||a.isVector2||a.isVector3||a.isVector4||a.isTexture||a.isQuaternion)?a.isRenderTargetTexture?(Rt("UniformsUtils: Textures of render targets cannot be cloned via cloneUniforms() or mergeUniforms()."),e[t][n]=null):e[t][n]=a.clone():Array.isArray(a)?e[t][n]=a.slice():e[t][n]=a}}return e}function kr(i){const e={};for(let t=0;t<i.length;t++){const n=up(i[t]);for(const a in n)e[a]=n[a]}return e}function Dz(i){const e=[];for(let t=0;t<i.length;t++)e.push(i[t].clone());return e}function AN(i){const e=i.getRenderTarget();return e===null?i.outputColorSpace:e.isXRRenderTarget===!0?e.texture.colorSpace:Pn.workingColorSpace}const QE={clone:up,merge:kr};var Uz=`void main() {
	gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
}`,Lz=`void main() {
	gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );
}`;class ja extends vr{constructor(e){super(),this.isShaderMaterial=!0,this.type="ShaderMaterial",this.defines={},this.uniforms={},this.uniformsGroups=[],this.vertexShader=Uz,this.fragmentShader=Lz,this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.forceSinglePass=!0,this.extensions={clipCullDistance:!1,multiDraw:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv1:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,e!==void 0&&this.setValues(e)}copy(e){return super.copy(e),this.fragmentShader=e.fragmentShader,this.vertexShader=e.vertexShader,this.uniforms=up(e.uniforms),this.uniformsGroups=Dz(e.uniformsGroups),this.defines=Object.assign({},e.defines),this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.fog=e.fog,this.lights=e.lights,this.clipping=e.clipping,this.extensions=Object.assign({},e.extensions),this.glslVersion=e.glslVersion,this.defaultAttributeValues=Object.assign({},e.defaultAttributeValues),this.index0AttributeName=e.index0AttributeName,this.uniformsNeedUpdate=e.uniformsNeedUpdate,this}toJSON(e){const t=super.toJSON(e);t.glslVersion=this.glslVersion,t.uniforms={};for(const a in this.uniforms){const l=this.uniforms[a].value;l&&l.isTexture?t.uniforms[a]={type:"t",value:l.toJSON(e).uuid}:l&&l.isColor?t.uniforms[a]={type:"c",value:l.getHex()}:l&&l.isVector2?t.uniforms[a]={type:"v2",value:l.toArray()}:l&&l.isVector3?t.uniforms[a]={type:"v3",value:l.toArray()}:l&&l.isVector4?t.uniforms[a]={type:"v4",value:l.toArray()}:l&&l.isMatrix3?t.uniforms[a]={type:"m3",value:l.toArray()}:l&&l.isMatrix4?t.uniforms[a]={type:"m4",value:l.toArray()}:t.uniforms[a]={value:l}}Object.keys(this.defines).length>0&&(t.defines=this.defines),t.vertexShader=this.vertexShader,t.fragmentShader=this.fragmentShader,t.lights=this.lights,t.clipping=this.clipping;const n={};for(const a in this.extensions)this.extensions[a]===!0&&(n[a]=!0);return Object.keys(n).length>0&&(t.extensions=n),t}}class Sb extends Yn{constructor(){super(),this.isCamera=!0,this.type="Camera",this.matrixWorldInverse=new on,this.projectionMatrix=new on,this.projectionMatrixInverse=new on,this.coordinateSystem=_s,this._reversedDepth=!1}get reversedDepth(){return this._reversedDepth}copy(e,t){return super.copy(e,t),this.matrixWorldInverse.copy(e.matrixWorldInverse),this.projectionMatrix.copy(e.projectionMatrix),this.projectionMatrixInverse.copy(e.projectionMatrixInverse),this.coordinateSystem=e.coordinateSystem,this}getWorldDirection(e){return super.getWorldDirection(e).negate()}updateMatrixWorld(e){super.updateMatrixWorld(e),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(e,t){super.updateWorldMatrix(e,t),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return new this.constructor().copy(this)}}const ou=new ee,TA=new Ke,AA=new Ke;class ra extends Sb{constructor(e=50,t=1,n=.1,a=2e3){super(),this.isPerspectiveCamera=!0,this.type="PerspectiveCamera",this.fov=e,this.zoom=1,this.near=n,this.far=a,this.focus=10,this.aspect=t,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.fov=e.fov,this.zoom=e.zoom,this.near=e.near,this.far=e.far,this.focus=e.focus,this.aspect=e.aspect,this.view=e.view===null?null:Object.assign({},e.view),this.filmGauge=e.filmGauge,this.filmOffset=e.filmOffset,this}setFocalLength(e){const t=.5*this.getFilmHeight()/e;this.fov=lp*2*Math.atan(t),this.updateProjectionMatrix()}getFocalLength(){const e=Math.tan(Yh*.5*this.fov);return .5*this.getFilmHeight()/e}getEffectiveFOV(){return lp*2*Math.atan(Math.tan(Yh*.5*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}getViewBounds(e,t,n){ou.set(-1,-1,.5).applyMatrix4(this.projectionMatrixInverse),t.set(ou.x,ou.y).multiplyScalar(-e/ou.z),ou.set(1,1,.5).applyMatrix4(this.projectionMatrixInverse),n.set(ou.x,ou.y).multiplyScalar(-e/ou.z)}getViewSize(e,t){return this.getViewBounds(e,TA,AA),t.subVectors(AA,TA)}setViewOffset(e,t,n,a,s,l){this.aspect=e/t,this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=n,this.view.offsetY=a,this.view.width=s,this.view.height=l,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=this.near;let t=e*Math.tan(Yh*.5*this.fov)/this.zoom,n=2*t,a=this.aspect*n,s=-.5*a;const l=this.view;if(this.view!==null&&this.view.enabled){const d=l.fullWidth,p=l.fullHeight;s+=l.offsetX*a/d,t-=l.offsetY*n/p,a*=l.width/d,n*=l.height/p}const u=this.filmOffset;u!==0&&(s+=e*u/this.getFilmWidth()),this.projectionMatrix.makePerspective(s,s+a,t,t-n,e,this.far,this.coordinateSystem,this.reversedDepth),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.fov=this.fov,t.object.zoom=this.zoom,t.object.near=this.near,t.object.far=this.far,t.object.focus=this.focus,t.object.aspect=this.aspect,this.view!==null&&(t.object.view=Object.assign({},this.view)),t.object.filmGauge=this.filmGauge,t.object.filmOffset=this.filmOffset,t}}const Rd=-90,Nd=1;class CN extends Yn{constructor(e,t,n){super(),this.type="CubeCamera",this.renderTarget=n,this.coordinateSystem=null,this.activeMipmapLevel=0;const a=new ra(Rd,Nd,e,t);a.layers=this.layers,this.add(a);const s=new ra(Rd,Nd,e,t);s.layers=this.layers,this.add(s);const l=new ra(Rd,Nd,e,t);l.layers=this.layers,this.add(l);const u=new ra(Rd,Nd,e,t);u.layers=this.layers,this.add(u);const d=new ra(Rd,Nd,e,t);d.layers=this.layers,this.add(d);const p=new ra(Rd,Nd,e,t);p.layers=this.layers,this.add(p)}updateCoordinateSystem(){const e=this.coordinateSystem,t=this.children.concat(),[n,a,s,l,u,d]=t;for(const p of t)this.remove(p);if(e===_s)n.up.set(0,1,0),n.lookAt(1,0,0),a.up.set(0,1,0),a.lookAt(-1,0,0),s.up.set(0,0,-1),s.lookAt(0,1,0),l.up.set(0,0,1),l.lookAt(0,-1,0),u.up.set(0,1,0),u.lookAt(0,0,1),d.up.set(0,1,0),d.lookAt(0,0,-1);else if(e===sp)n.up.set(0,-1,0),n.lookAt(-1,0,0),a.up.set(0,-1,0),a.lookAt(1,0,0),s.up.set(0,0,1),s.lookAt(0,1,0),l.up.set(0,0,-1),l.lookAt(0,-1,0),u.up.set(0,-1,0),u.lookAt(0,0,1),d.up.set(0,-1,0),d.lookAt(0,0,-1);else throw new Error("THREE.CubeCamera.updateCoordinateSystem(): Invalid coordinate system: "+e);for(const p of t)this.add(p),p.updateMatrixWorld()}update(e,t){this.parent===null&&this.updateMatrixWorld();const{renderTarget:n,activeMipmapLevel:a}=this;this.coordinateSystem!==e.coordinateSystem&&(this.coordinateSystem=e.coordinateSystem,this.updateCoordinateSystem());const[s,l,u,d,p,g]=this.children,y=e.getRenderTarget(),_=e.getActiveCubeFace(),b=e.getActiveMipmapLevel(),x=e.xr.enabled;e.xr.enabled=!1;const T=n.texture.generateMipmaps;n.texture.generateMipmaps=!1,e.setRenderTarget(n,0,a),e.render(t,s),e.setRenderTarget(n,1,a),e.render(t,l),e.setRenderTarget(n,2,a),e.render(t,u),e.setRenderTarget(n,3,a),e.render(t,d),e.setRenderTarget(n,4,a),e.render(t,p),n.texture.generateMipmaps=T,e.setRenderTarget(n,5,a),e.render(t,g),e.setRenderTarget(y,_,b),e.xr.enabled=x,n.texture.needsPMREMUpdate=!0}}class av extends hi{constructor(e=[],t=No,n,a,s,l,u,d,p,g){super(e,t,n,a,s,l,u,d,p,g),this.isCubeTexture=!0,this.flipY=!1}get images(){return this.image}set images(e){this.image=e}}class Eb extends Ta{constructor(e=1,t={}){super(e,e,t),this.isWebGLCubeRenderTarget=!0;const n={width:e,height:e,depth:1},a=[n,n,n,n,n,n];this.texture=new av(a),this._setTextureOptions(t),this.texture.isRenderTargetTexture=!0}fromEquirectangularTexture(e,t){this.texture.type=t.type,this.texture.colorSpace=t.colorSpace,this.texture.generateMipmaps=t.generateMipmaps,this.texture.minFilter=t.minFilter,this.texture.magFilter=t.magFilter;const n={uniforms:{tEquirect:{value:null}},vertexShader:`

				varying vec3 vWorldDirection;

				vec3 transformDirection( in vec3 dir, in mat4 matrix ) {

					return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );

				}

				void main() {

					vWorldDirection = transformDirection( position, modelMatrix );

					#include <begin_vertex>
					#include <project_vertex>

				}
			`,fragmentShader:`

				uniform sampler2D tEquirect;

				varying vec3 vWorldDirection;

				#include <common>

				void main() {

					vec3 direction = normalize( vWorldDirection );

					vec2 sampleUV = equirectUv( direction );

					gl_FragColor = texture2D( tEquirect, sampleUV );

				}
			`},a=new sf(5,5,5),s=new ja({name:"CubemapFromEquirect",uniforms:up(n.uniforms),vertexShader:n.vertexShader,fragmentShader:n.fragmentShader,side:jr,blending:Ro});s.uniforms.tEquirect.value=t;const l=new Ui(a,s),u=t.minFilter;return t.minFilter===yl&&(t.minFilter=Vn),new CN(1,10,this).update(e,l),t.minFilter=u,l.geometry.dispose(),l.material.dispose(),this}clear(e,t=!0,n=!0,a=!0){const s=e.getRenderTarget();for(let l=0;l<6;l++)e.setRenderTarget(this,l),e.clear(t,n,a);e.setRenderTarget(s)}}class Yd extends Yn{constructor(){super(),this.isGroup=!0,this.type="Group"}}const Iz={type:"move"};class Yy{constructor(){this._targetRay=null,this._grip=null,this._hand=null}getHandSpace(){return this._hand===null&&(this._hand=new Yd,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}getTargetRaySpace(){return this._targetRay===null&&(this._targetRay=new Yd,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new ee,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new ee),this._targetRay}getGripSpace(){return this._grip===null&&(this._grip=new Yd,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new ee,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new ee),this._grip}dispatchEvent(e){return this._targetRay!==null&&this._targetRay.dispatchEvent(e),this._grip!==null&&this._grip.dispatchEvent(e),this._hand!==null&&this._hand.dispatchEvent(e),this}connect(e){if(e&&e.hand){const t=this._hand;if(t)for(const n of e.hand.values())this._getHandJoint(t,n)}return this.dispatchEvent({type:"connected",data:e}),this}disconnect(e){return this.dispatchEvent({type:"disconnected",data:e}),this._targetRay!==null&&(this._targetRay.visible=!1),this._grip!==null&&(this._grip.visible=!1),this._hand!==null&&(this._hand.visible=!1),this}update(e,t,n){let a=null,s=null,l=null;const u=this._targetRay,d=this._grip,p=this._hand;if(e&&t.session.visibilityState!=="visible-blurred"){if(p&&e.hand){l=!0;for(const T of e.hand.values()){const w=t.getJointPose(T,n),S=this._getHandJoint(p,T);w!==null&&(S.matrix.fromArray(w.transform.matrix),S.matrix.decompose(S.position,S.rotation,S.scale),S.matrixWorldNeedsUpdate=!0,S.jointRadius=w.radius),S.visible=w!==null}const g=p.joints["index-finger-tip"],y=p.joints["thumb-tip"],_=g.position.distanceTo(y.position),b=.02,x=.005;p.inputState.pinching&&_>b+x?(p.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:e.handedness,target:this})):!p.inputState.pinching&&_<=b-x&&(p.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:e.handedness,target:this}))}else d!==null&&e.gripSpace&&(s=t.getPose(e.gripSpace,n),s!==null&&(d.matrix.fromArray(s.transform.matrix),d.matrix.decompose(d.position,d.rotation,d.scale),d.matrixWorldNeedsUpdate=!0,s.linearVelocity?(d.hasLinearVelocity=!0,d.linearVelocity.copy(s.linearVelocity)):d.hasLinearVelocity=!1,s.angularVelocity?(d.hasAngularVelocity=!0,d.angularVelocity.copy(s.angularVelocity)):d.hasAngularVelocity=!1));u!==null&&(a=t.getPose(e.targetRaySpace,n),a===null&&s!==null&&(a=s),a!==null&&(u.matrix.fromArray(a.transform.matrix),u.matrix.decompose(u.position,u.rotation,u.scale),u.matrixWorldNeedsUpdate=!0,a.linearVelocity?(u.hasLinearVelocity=!0,u.linearVelocity.copy(a.linearVelocity)):u.hasLinearVelocity=!1,a.angularVelocity?(u.hasAngularVelocity=!0,u.angularVelocity.copy(a.angularVelocity)):u.hasAngularVelocity=!1,this.dispatchEvent(Iz)))}return u!==null&&(u.visible=a!==null),d!==null&&(d.visible=s!==null),p!==null&&(p.visible=l!==null),this}_getHandJoint(e,t){if(e.joints[t.jointName]===void 0){const n=new Yd;n.matrixAutoUpdate=!1,n.visible=!1,e.joints[t.jointName]=n,e.add(n)}return e.joints[t.jointName]}}class Mb{constructor(e,t=25e-5){this.isFogExp2=!0,this.name="",this.color=new Ut(e),this.density=t}clone(){return new Mb(this.color,this.density)}toJSON(){return{type:"FogExp2",name:this.name,color:this.color.getHex(),density:this.density}}}class wb{constructor(e,t=1,n=1e3){this.isFog=!0,this.name="",this.color=new Ut(e),this.near=t,this.far=n}clone(){return new wb(this.color,this.near,this.far)}toJSON(){return{type:"Fog",name:this.name,color:this.color.getHex(),near:this.near,far:this.far}}}class rv extends Yn{constructor(){super(),this.isScene=!0,this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.backgroundBlurriness=0,this.backgroundIntensity=1,this.backgroundRotation=new Ss,this.environmentIntensity=1,this.environmentRotation=new Ss,this.overrideMaterial=null,typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(e,t){return super.copy(e,t),e.background!==null&&(this.background=e.background.clone()),e.environment!==null&&(this.environment=e.environment.clone()),e.fog!==null&&(this.fog=e.fog.clone()),this.backgroundBlurriness=e.backgroundBlurriness,this.backgroundIntensity=e.backgroundIntensity,this.backgroundRotation.copy(e.backgroundRotation),this.environmentIntensity=e.environmentIntensity,this.environmentRotation.copy(e.environmentRotation),e.overrideMaterial!==null&&(this.overrideMaterial=e.overrideMaterial.clone()),this.matrixAutoUpdate=e.matrixAutoUpdate,this}toJSON(e){const t=super.toJSON(e);return this.fog!==null&&(t.object.fog=this.fog.toJSON()),this.backgroundBlurriness>0&&(t.object.backgroundBlurriness=this.backgroundBlurriness),this.backgroundIntensity!==1&&(t.object.backgroundIntensity=this.backgroundIntensity),t.object.backgroundRotation=this.backgroundRotation.toArray(),this.environmentIntensity!==1&&(t.object.environmentIntensity=this.environmentIntensity),t.object.environmentRotation=this.environmentRotation.toArray(),t}}class Tb{constructor(e,t){this.isInterleavedBuffer=!0,this.array=e,this.stride=t,this.count=e!==void 0?e.length/t:0,this.usage=Fg,this.updateRanges=[],this.version=0,this.uuid=bs()}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}setUsage(e){return this.usage=e,this}addUpdateRange(e,t){this.updateRanges.push({start:e,count:t})}clearUpdateRanges(){this.updateRanges.length=0}copy(e){return this.array=new e.array.constructor(e.array),this.count=e.count,this.stride=e.stride,this.usage=e.usage,this}copyAt(e,t,n){e*=this.stride,n*=t.stride;for(let a=0,s=this.stride;a<s;a++)this.array[e+a]=t.array[n+a];return this}set(e,t=0){return this.array.set(e,t),this}clone(e){e.arrayBuffers===void 0&&(e.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=bs()),e.arrayBuffers[this.array.buffer._uuid]===void 0&&(e.arrayBuffers[this.array.buffer._uuid]=this.array.slice(0).buffer);const t=new this.array.constructor(e.arrayBuffers[this.array.buffer._uuid]),n=new this.constructor(t,this.stride);return n.setUsage(this.usage),n}onUpload(e){return this.onUploadCallback=e,this}toJSON(e){return e.arrayBuffers===void 0&&(e.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=bs()),e.arrayBuffers[this.array.buffer._uuid]===void 0&&(e.arrayBuffers[this.array.buffer._uuid]=Array.from(new Uint32Array(this.array.buffer))),{uuid:this.uuid,buffer:this.array.buffer._uuid,type:this.array.constructor.name,stride:this.stride}}}const Fr=new ee;class Qh{constructor(e,t,n,a=!1){this.isInterleavedBufferAttribute=!0,this.name="",this.data=e,this.itemSize=t,this.offset=n,this.normalized=a}get count(){return this.data.count}get array(){return this.data.array}set needsUpdate(e){this.data.needsUpdate=e}applyMatrix4(e){for(let t=0,n=this.data.count;t<n;t++)Fr.fromBufferAttribute(this,t),Fr.applyMatrix4(e),this.setXYZ(t,Fr.x,Fr.y,Fr.z);return this}applyNormalMatrix(e){for(let t=0,n=this.count;t<n;t++)Fr.fromBufferAttribute(this,t),Fr.applyNormalMatrix(e),this.setXYZ(t,Fr.x,Fr.y,Fr.z);return this}transformDirection(e){for(let t=0,n=this.count;t<n;t++)Fr.fromBufferAttribute(this,t),Fr.transformDirection(e),this.setXYZ(t,Fr.x,Fr.y,Fr.z);return this}getComponent(e,t){let n=this.array[e*this.data.stride+this.offset+t];return this.normalized&&(n=Vr(n,this.array)),n}setComponent(e,t,n){return this.normalized&&(n=Mn(n,this.array)),this.data.array[e*this.data.stride+this.offset+t]=n,this}setX(e,t){return this.normalized&&(t=Mn(t,this.array)),this.data.array[e*this.data.stride+this.offset]=t,this}setY(e,t){return this.normalized&&(t=Mn(t,this.array)),this.data.array[e*this.data.stride+this.offset+1]=t,this}setZ(e,t){return this.normalized&&(t=Mn(t,this.array)),this.data.array[e*this.data.stride+this.offset+2]=t,this}setW(e,t){return this.normalized&&(t=Mn(t,this.array)),this.data.array[e*this.data.stride+this.offset+3]=t,this}getX(e){let t=this.data.array[e*this.data.stride+this.offset];return this.normalized&&(t=Vr(t,this.array)),t}getY(e){let t=this.data.array[e*this.data.stride+this.offset+1];return this.normalized&&(t=Vr(t,this.array)),t}getZ(e){let t=this.data.array[e*this.data.stride+this.offset+2];return this.normalized&&(t=Vr(t,this.array)),t}getW(e){let t=this.data.array[e*this.data.stride+this.offset+3];return this.normalized&&(t=Vr(t,this.array)),t}setXY(e,t,n){return e=e*this.data.stride+this.offset,this.normalized&&(t=Mn(t,this.array),n=Mn(n,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=n,this}setXYZ(e,t,n,a){return e=e*this.data.stride+this.offset,this.normalized&&(t=Mn(t,this.array),n=Mn(n,this.array),a=Mn(a,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=n,this.data.array[e+2]=a,this}setXYZW(e,t,n,a,s){return e=e*this.data.stride+this.offset,this.normalized&&(t=Mn(t,this.array),n=Mn(n,this.array),a=Mn(a,this.array),s=Mn(s,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=n,this.data.array[e+2]=a,this.data.array[e+3]=s,this}clone(e){if(e===void 0){Hg("InterleavedBufferAttribute.clone(): Cloning an interleaved buffer attribute will de-interleave buffer data.");const t=[];for(let n=0;n<this.count;n++){const a=n*this.data.stride+this.offset;for(let s=0;s<this.itemSize;s++)t.push(this.data.array[a+s])}return new ni(new this.array.constructor(t),this.itemSize,this.normalized)}else return e.interleavedBuffers===void 0&&(e.interleavedBuffers={}),e.interleavedBuffers[this.data.uuid]===void 0&&(e.interleavedBuffers[this.data.uuid]=this.data.clone(e)),new Qh(e.interleavedBuffers[this.data.uuid],this.itemSize,this.offset,this.normalized)}toJSON(e){if(e===void 0){Hg("InterleavedBufferAttribute.toJSON(): Serializing an interleaved buffer attribute will de-interleave buffer data.");const t=[];for(let n=0;n<this.count;n++){const a=n*this.data.stride+this.offset;for(let s=0;s<this.itemSize;s++)t.push(this.data.array[a+s])}return{itemSize:this.itemSize,type:this.array.constructor.name,array:t,normalized:this.normalized}}else return e.interleavedBuffers===void 0&&(e.interleavedBuffers={}),e.interleavedBuffers[this.data.uuid]===void 0&&(e.interleavedBuffers[this.data.uuid]=this.data.toJSON(e)),{isInterleavedBufferAttribute:!0,itemSize:this.itemSize,data:this.data.uuid,offset:this.offset,normalized:this.normalized}}}class $E extends vr{constructor(e){super(),this.isSpriteMaterial=!0,this.type="SpriteMaterial",this.color=new Ut(16777215),this.map=null,this.alphaMap=null,this.rotation=0,this.sizeAttenuation=!0,this.transparent=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.rotation=e.rotation,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}let Od;const tg=new ee,Dd=new ee,Ud=new ee,Ld=new Ke,ng=new Ke,RN=new on,cy=new ee,ig=new ee,uy=new ee,CA=new Ke,kS=new Ke,RA=new Ke;class NN extends Yn{constructor(e=new $E){if(super(),this.isSprite=!0,this.type="Sprite",Od===void 0){Od=new mn;const t=new Float32Array([-.5,-.5,0,0,0,.5,-.5,0,1,0,.5,.5,0,1,1,-.5,.5,0,0,1]),n=new Tb(t,5);Od.setIndex([0,1,2,0,2,3]),Od.setAttribute("position",new Qh(n,3,0,!1)),Od.setAttribute("uv",new Qh(n,2,3,!1))}this.geometry=Od,this.material=e,this.center=new Ke(.5,.5),this.count=1}raycast(e,t){e.camera===null&&Qt('Sprite: "Raycaster.camera" needs to be set in order to raycast against sprites.'),Dd.setFromMatrixScale(this.matrixWorld),RN.copy(e.camera.matrixWorld),this.modelViewMatrix.multiplyMatrices(e.camera.matrixWorldInverse,this.matrixWorld),Ud.setFromMatrixPosition(this.modelViewMatrix),e.camera.isPerspectiveCamera&&this.material.sizeAttenuation===!1&&Dd.multiplyScalar(-Ud.z);const n=this.material.rotation;let a,s;n!==0&&(s=Math.cos(n),a=Math.sin(n));const l=this.center;hy(cy.set(-.5,-.5,0),Ud,l,Dd,a,s),hy(ig.set(.5,-.5,0),Ud,l,Dd,a,s),hy(uy.set(.5,.5,0),Ud,l,Dd,a,s),CA.set(0,0),kS.set(1,0),RA.set(1,1);let u=e.ray.intersectTriangle(cy,ig,uy,!1,tg);if(u===null&&(hy(ig.set(-.5,.5,0),Ud,l,Dd,a,s),kS.set(0,1),u=e.ray.intersectTriangle(cy,uy,ig,!1,tg),u===null))return;const d=e.ray.origin.distanceTo(tg);d<e.near||d>e.far||t.push({distance:d,point:tg.clone(),uv:is.getInterpolation(tg,cy,ig,uy,CA,kS,RA,new Ke),face:null,object:this})}copy(e,t){return super.copy(e,t),e.center!==void 0&&this.center.copy(e.center),this.material=e.material,this}}function hy(i,e,t,n,a,s){Ld.subVectors(i,t).addScalar(.5).multiply(n),a!==void 0?(ng.x=s*Ld.x-a*Ld.y,ng.y=a*Ld.x+s*Ld.y):ng.copy(Ld),i.copy(e),i.x+=ng.x,i.y+=ng.y,i.applyMatrix4(RN)}const fy=new ee,NA=new ee;class ON extends Yn{constructor(){super(),this.isLOD=!0,this._currentLevel=0,this.type="LOD",Object.defineProperties(this,{levels:{enumerable:!0,value:[]}}),this.autoUpdate=!0}copy(e){super.copy(e,!1);const t=e.levels;for(let n=0,a=t.length;n<a;n++){const s=t[n];this.addLevel(s.object.clone(),s.distance,s.hysteresis)}return this.autoUpdate=e.autoUpdate,this}addLevel(e,t=0,n=0){t=Math.abs(t);const a=this.levels;let s;for(s=0;s<a.length&&!(t<a[s].distance);s++);return a.splice(s,0,{distance:t,hysteresis:n,object:e}),this.add(e),this}removeLevel(e){const t=this.levels;for(let n=0;n<t.length;n++)if(t[n].distance===e){const a=t.splice(n,1);return this.remove(a[0].object),!0}return!1}getCurrentLevel(){return this._currentLevel}getObjectForDistance(e){const t=this.levels;if(t.length>0){let n,a;for(n=1,a=t.length;n<a;n++){let s=t[n].distance;if(t[n].object.visible&&(s-=s*t[n].hysteresis),e<s)break}return t[n-1].object}return null}raycast(e,t){if(this.levels.length>0){fy.setFromMatrixPosition(this.matrixWorld);const a=e.ray.origin.distanceTo(fy);this.getObjectForDistance(a).raycast(e,t)}}update(e){const t=this.levels;if(t.length>1){fy.setFromMatrixPosition(e.matrixWorld),NA.setFromMatrixPosition(this.matrixWorld);const n=fy.distanceTo(NA)/e.zoom;t[0].object.visible=!0;let a,s;for(a=1,s=t.length;a<s;a++){let l=t[a].distance;if(t[a].object.visible&&(l-=l*t[a].hysteresis),n>=l)t[a-1].object.visible=!1,t[a].object.visible=!0;else break}for(this._currentLevel=a-1;a<s;a++)t[a].object.visible=!1}}toJSON(e){const t=super.toJSON(e);this.autoUpdate===!1&&(t.object.autoUpdate=!1),t.object.levels=[];const n=this.levels;for(let a=0,s=n.length;a<s;a++){const l=n[a];t.object.levels.push({object:l.object.uuid,distance:l.distance,hysteresis:l.hysteresis})}return t}}const OA=new ee,DA=new yi,UA=new yi,Pz=new ee,LA=new on,dy=new ee,HS=new Va,IA=new on,VS=new rf;class DN extends Ui{constructor(e,t){super(e,t),this.isSkinnedMesh=!0,this.type="SkinnedMesh",this.bindMode=tE,this.bindMatrix=new on,this.bindMatrixInverse=new on,this.boundingBox=null,this.boundingSphere=null}computeBoundingBox(){const e=this.geometry;this.boundingBox===null&&(this.boundingBox=new Ha),this.boundingBox.makeEmpty();const t=e.getAttribute("position");for(let n=0;n<t.count;n++)this.getVertexPosition(n,dy),this.boundingBox.expandByPoint(dy)}computeBoundingSphere(){const e=this.geometry;this.boundingSphere===null&&(this.boundingSphere=new Va),this.boundingSphere.makeEmpty();const t=e.getAttribute("position");for(let n=0;n<t.count;n++)this.getVertexPosition(n,dy),this.boundingSphere.expandByPoint(dy)}copy(e,t){return super.copy(e,t),this.bindMode=e.bindMode,this.bindMatrix.copy(e.bindMatrix),this.bindMatrixInverse.copy(e.bindMatrixInverse),this.skeleton=e.skeleton,e.boundingBox!==null&&(this.boundingBox=e.boundingBox.clone()),e.boundingSphere!==null&&(this.boundingSphere=e.boundingSphere.clone()),this}raycast(e,t){const n=this.material,a=this.matrixWorld;n!==void 0&&(this.boundingSphere===null&&this.computeBoundingSphere(),HS.copy(this.boundingSphere),HS.applyMatrix4(a),e.ray.intersectsSphere(HS)!==!1&&(IA.copy(a).invert(),VS.copy(e.ray).applyMatrix4(IA),!(this.boundingBox!==null&&VS.intersectsBox(this.boundingBox)===!1)&&this._computeIntersections(e,t,VS)))}getVertexPosition(e,t){return super.getVertexPosition(e,t),this.applyBoneTransform(e,t),t}bind(e,t){this.skeleton=e,t===void 0&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),t=this.matrixWorld),this.bindMatrix.copy(t),this.bindMatrixInverse.copy(t).invert()}pose(){this.skeleton.pose()}normalizeSkinWeights(){const e=new yi,t=this.geometry.attributes.skinWeight;for(let n=0,a=t.count;n<a;n++){e.fromBufferAttribute(t,n);const s=1/e.manhattanLength();s!==1/0?e.multiplyScalar(s):e.set(1,0,0,0),t.setXYZW(n,e.x,e.y,e.z,e.w)}}updateMatrixWorld(e){super.updateMatrixWorld(e),this.bindMode===tE?this.bindMatrixInverse.copy(this.matrixWorld).invert():this.bindMode===uN?this.bindMatrixInverse.copy(this.bindMatrix).invert():Rt("SkinnedMesh: Unrecognized bindMode: "+this.bindMode)}applyBoneTransform(e,t){const n=this.skeleton,a=this.geometry;DA.fromBufferAttribute(a.attributes.skinIndex,e),UA.fromBufferAttribute(a.attributes.skinWeight,e),OA.copy(t).applyMatrix4(this.bindMatrix),t.set(0,0,0);for(let s=0;s<4;s++){const l=UA.getComponent(s);if(l!==0){const u=DA.getComponent(s);LA.multiplyMatrices(n.bones[u].matrixWorld,n.boneInverses[u]),t.addScaledVector(Pz.copy(OA).applyMatrix4(LA),l)}}return t.applyMatrix4(this.bindMatrixInverse)}}class eM extends Yn{constructor(){super(),this.isBone=!0,this.type="Bone"}}class Xs extends hi{constructor(e=null,t=1,n=1,a,s,l,u,d,p=Vi,g=Vi,y,_){super(null,l,u,d,p,g,a,s,y,_),this.isDataTexture=!0,this.image={data:e,width:t,height:n},this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}const PA=new on,zz=new on;class Ab{constructor(e=[],t=[]){this.uuid=bs(),this.bones=e.slice(0),this.boneInverses=t,this.boneMatrices=null,this.previousBoneMatrices=null,this.boneTexture=null,this.init()}init(){const e=this.bones,t=this.boneInverses;if(this.boneMatrices=new Float32Array(e.length*16),t.length===0)this.calculateInverses();else if(e.length!==t.length){Rt("Skeleton: Number of inverse bone matrices does not match amount of bones."),this.boneInverses=[];for(let n=0,a=this.bones.length;n<a;n++)this.boneInverses.push(new on)}}calculateInverses(){this.boneInverses.length=0;for(let e=0,t=this.bones.length;e<t;e++){const n=new on;this.bones[e]&&n.copy(this.bones[e].matrixWorld).invert(),this.boneInverses.push(n)}}pose(){for(let e=0,t=this.bones.length;e<t;e++){const n=this.bones[e];n&&n.matrixWorld.copy(this.boneInverses[e]).invert()}for(let e=0,t=this.bones.length;e<t;e++){const n=this.bones[e];n&&(n.parent&&n.parent.isBone?(n.matrix.copy(n.parent.matrixWorld).invert(),n.matrix.multiply(n.matrixWorld)):n.matrix.copy(n.matrixWorld),n.matrix.decompose(n.position,n.quaternion,n.scale))}}update(){const e=this.bones,t=this.boneInverses,n=this.boneMatrices,a=this.boneTexture;for(let s=0,l=e.length;s<l;s++){const u=e[s]?e[s].matrixWorld:zz;PA.multiplyMatrices(u,t[s]),PA.toArray(n,s*16)}a!==null&&(a.needsUpdate=!0)}clone(){return new Ab(this.bones,this.boneInverses)}computeBoneTexture(){let e=Math.sqrt(this.bones.length*4);e=Math.ceil(e/4)*4,e=Math.max(e,4);const t=new Float32Array(e*e*4);t.set(this.boneMatrices);const n=new Xs(t,e,e,sa,Di);return n.needsUpdate=!0,this.boneMatrices=t,this.boneTexture=n,this}getBoneByName(e){for(let t=0,n=this.bones.length;t<n;t++){const a=this.bones[t];if(a.name===e)return a}}dispose(){this.boneTexture!==null&&(this.boneTexture.dispose(),this.boneTexture=null)}fromJSON(e,t){this.uuid=e.uuid;for(let n=0,a=e.bones.length;n<a;n++){const s=e.bones[n];let l=t[s];l===void 0&&(Rt("Skeleton: No bone found with UUID:",s),l=new eM),this.bones.push(l),this.boneInverses.push(new on().fromArray(e.boneInverses[n]))}return this.init(),this}toJSON(){const e={metadata:{version:4.7,type:"Skeleton",generator:"Skeleton.toJSON"},bones:[],boneInverses:[]};e.uuid=this.uuid;const t=this.bones,n=this.boneInverses;for(let a=0,s=t.length;a<s;a++){const l=t[a];e.bones.push(l.uuid);const u=n[a];e.boneInverses.push(u.toArray())}return e}}class hp extends ni{constructor(e,t,n,a=1){super(e,t,n),this.isInstancedBufferAttribute=!0,this.meshPerAttribute=a}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}toJSON(){const e=super.toJSON();return e.meshPerAttribute=this.meshPerAttribute,e.isInstancedBufferAttribute=!0,e}}const Id=new on,zA=new on,py=[],BA=new Ha,Bz=new on,ag=new Ui,rg=new Va;class UN extends Ui{constructor(e,t,n){super(e,t),this.isInstancedMesh=!0,this.instanceMatrix=new hp(new Float32Array(n*16),16),this.instanceColor=null,this.morphTexture=null,this.count=n,this.boundingBox=null,this.boundingSphere=null;for(let a=0;a<n;a++)this.setMatrixAt(a,Bz)}computeBoundingBox(){const e=this.geometry,t=this.count;this.boundingBox===null&&(this.boundingBox=new Ha),e.boundingBox===null&&e.computeBoundingBox(),this.boundingBox.makeEmpty();for(let n=0;n<t;n++)this.getMatrixAt(n,Id),BA.copy(e.boundingBox).applyMatrix4(Id),this.boundingBox.union(BA)}computeBoundingSphere(){const e=this.geometry,t=this.count;this.boundingSphere===null&&(this.boundingSphere=new Va),e.boundingSphere===null&&e.computeBoundingSphere(),this.boundingSphere.makeEmpty();for(let n=0;n<t;n++)this.getMatrixAt(n,Id),rg.copy(e.boundingSphere).applyMatrix4(Id),this.boundingSphere.union(rg)}copy(e,t){return super.copy(e,t),this.instanceMatrix.copy(e.instanceMatrix),e.morphTexture!==null&&(this.morphTexture=e.morphTexture.clone()),e.instanceColor!==null&&(this.instanceColor=e.instanceColor.clone()),this.count=e.count,e.boundingBox!==null&&(this.boundingBox=e.boundingBox.clone()),e.boundingSphere!==null&&(this.boundingSphere=e.boundingSphere.clone()),this}getColorAt(e,t){t.fromArray(this.instanceColor.array,e*3)}getMatrixAt(e,t){t.fromArray(this.instanceMatrix.array,e*16)}getMorphAt(e,t){const n=t.morphTargetInfluences,a=this.morphTexture.source.data.data,s=n.length+1,l=e*s+1;for(let u=0;u<n.length;u++)n[u]=a[l+u]}raycast(e,t){const n=this.matrixWorld,a=this.count;if(ag.geometry=this.geometry,ag.material=this.material,ag.material!==void 0&&(this.boundingSphere===null&&this.computeBoundingSphere(),rg.copy(this.boundingSphere),rg.applyMatrix4(n),e.ray.intersectsSphere(rg)!==!1))for(let s=0;s<a;s++){this.getMatrixAt(s,Id),zA.multiplyMatrices(n,Id),ag.matrixWorld=zA,ag.raycast(e,py);for(let l=0,u=py.length;l<u;l++){const d=py[l];d.instanceId=s,d.object=this,t.push(d)}py.length=0}}setColorAt(e,t){this.instanceColor===null&&(this.instanceColor=new hp(new Float32Array(this.instanceMatrix.count*3).fill(1),3)),t.toArray(this.instanceColor.array,e*3)}setMatrixAt(e,t){t.toArray(this.instanceMatrix.array,e*16)}setMorphAt(e,t){const n=t.morphTargetInfluences,a=n.length+1;this.morphTexture===null&&(this.morphTexture=new Xs(new Float32Array(a*this.count),a,this.count,nv,Di));const s=this.morphTexture.source.data.data;let l=0;for(let p=0;p<n.length;p++)l+=n[p];const u=this.geometry.morphTargetsRelative?1:1-l,d=a*e;s[d]=u,s.set(n,d+1)}updateMorphTargets(){}dispose(){this.dispatchEvent({type:"dispose"}),this.morphTexture!==null&&(this.morphTexture.dispose(),this.morphTexture=null)}}const jS=new ee,Fz=new ee,kz=new Sn;class cc{constructor(e=new ee(1,0,0),t=0){this.isPlane=!0,this.normal=e,this.constant=t}set(e,t){return this.normal.copy(e),this.constant=t,this}setComponents(e,t,n,a){return this.normal.set(e,t,n),this.constant=a,this}setFromNormalAndCoplanarPoint(e,t){return this.normal.copy(e),this.constant=-t.dot(this.normal),this}setFromCoplanarPoints(e,t,n){const a=jS.subVectors(n,t).cross(Fz.subVectors(e,t)).normalize();return this.setFromNormalAndCoplanarPoint(a,e),this}copy(e){return this.normal.copy(e.normal),this.constant=e.constant,this}normalize(){const e=1/this.normal.length();return this.normal.multiplyScalar(e),this.constant*=e,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(e){return this.normal.dot(e)+this.constant}distanceToSphere(e){return this.distanceToPoint(e.center)-e.radius}projectPoint(e,t){return t.copy(e).addScaledVector(this.normal,-this.distanceToPoint(e))}intersectLine(e,t){const n=e.delta(jS),a=this.normal.dot(n);if(a===0)return this.distanceToPoint(e.start)===0?t.copy(e.start):null;const s=-(e.start.dot(this.normal)+this.constant)/a;return s<0||s>1?null:t.copy(e.start).addScaledVector(n,s)}intersectsLine(e){const t=this.distanceToPoint(e.start),n=this.distanceToPoint(e.end);return t<0&&n>0||n<0&&t>0}intersectsBox(e){return e.intersectsPlane(this)}intersectsSphere(e){return e.intersectsPlane(this)}coplanarPoint(e){return e.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(e,t){const n=t||kz.getNormalMatrix(e),a=this.coplanarPoint(jS).applyMatrix4(e),s=this.normal.applyMatrix3(n).normalize();return this.constant=-a.dot(s),this}translate(e){return this.constant-=e.dot(this.normal),this}equals(e){return e.normal.equals(this.normal)&&e.constant===this.constant}clone(){return new this.constructor().copy(this)}}const _h=new Va,Hz=new Ke(.5,.5),my=new ee;class bp{constructor(e=new cc,t=new cc,n=new cc,a=new cc,s=new cc,l=new cc){this.planes=[e,t,n,a,s,l]}set(e,t,n,a,s,l){const u=this.planes;return u[0].copy(e),u[1].copy(t),u[2].copy(n),u[3].copy(a),u[4].copy(s),u[5].copy(l),this}copy(e){const t=this.planes;for(let n=0;n<6;n++)t[n].copy(e.planes[n]);return this}setFromProjectionMatrix(e,t=_s,n=!1){const a=this.planes,s=e.elements,l=s[0],u=s[1],d=s[2],p=s[3],g=s[4],y=s[5],_=s[6],b=s[7],x=s[8],T=s[9],w=s[10],S=s[11],C=s[12],N=s[13],O=s[14],P=s[15];if(a[0].setComponents(p-l,b-g,S-x,P-C).normalize(),a[1].setComponents(p+l,b+g,S+x,P+C).normalize(),a[2].setComponents(p+u,b+y,S+T,P+N).normalize(),a[3].setComponents(p-u,b-y,S-T,P-N).normalize(),n)a[4].setComponents(d,_,w,O).normalize(),a[5].setComponents(p-d,b-_,S-w,P-O).normalize();else if(a[4].setComponents(p-d,b-_,S-w,P-O).normalize(),t===_s)a[5].setComponents(p+d,b+_,S+w,P+O).normalize();else if(t===sp)a[5].setComponents(d,_,w,O).normalize();else throw new Error("THREE.Frustum.setFromProjectionMatrix(): Invalid coordinate system: "+t);return this}intersectsObject(e){if(e.boundingSphere!==void 0)e.boundingSphere===null&&e.computeBoundingSphere(),_h.copy(e.boundingSphere).applyMatrix4(e.matrixWorld);else{const t=e.geometry;t.boundingSphere===null&&t.computeBoundingSphere(),_h.copy(t.boundingSphere).applyMatrix4(e.matrixWorld)}return this.intersectsSphere(_h)}intersectsSprite(e){_h.center.set(0,0,0);const t=Hz.distanceTo(e.center);return _h.radius=.7071067811865476+t,_h.applyMatrix4(e.matrixWorld),this.intersectsSphere(_h)}intersectsSphere(e){const t=this.planes,n=e.center,a=-e.radius;for(let s=0;s<6;s++)if(t[s].distanceToPoint(n)<a)return!1;return!0}intersectsBox(e){const t=this.planes;for(let n=0;n<6;n++){const a=t[n];if(my.x=a.normal.x>0?e.max.x:e.min.x,my.y=a.normal.y>0?e.max.y:e.min.y,my.z=a.normal.z>0?e.max.z:e.min.z,a.distanceToPoint(my)<0)return!1}return!0}containsPoint(e){const t=this.planes;for(let n=0;n<6;n++)if(t[n].distanceToPoint(e)<0)return!1;return!0}clone(){return new this.constructor().copy(this)}}const dl=new on,pl=new bp;class Cb{constructor(){this.coordinateSystem=_s}intersectsObject(e,t){if(!t.isArrayCamera||t.cameras.length===0)return!1;for(let n=0;n<t.cameras.length;n++){const a=t.cameras[n];if(dl.multiplyMatrices(a.projectionMatrix,a.matrixWorldInverse),pl.setFromProjectionMatrix(dl,a.coordinateSystem,a.reversedDepth),pl.intersectsObject(e))return!0}return!1}intersectsSprite(e,t){if(!t||!t.cameras||t.cameras.length===0)return!1;for(let n=0;n<t.cameras.length;n++){const a=t.cameras[n];if(dl.multiplyMatrices(a.projectionMatrix,a.matrixWorldInverse),pl.setFromProjectionMatrix(dl,a.coordinateSystem,a.reversedDepth),pl.intersectsSprite(e))return!0}return!1}intersectsSphere(e,t){if(!t||!t.cameras||t.cameras.length===0)return!1;for(let n=0;n<t.cameras.length;n++){const a=t.cameras[n];if(dl.multiplyMatrices(a.projectionMatrix,a.matrixWorldInverse),pl.setFromProjectionMatrix(dl,a.coordinateSystem,a.reversedDepth),pl.intersectsSphere(e))return!0}return!1}intersectsBox(e,t){if(!t||!t.cameras||t.cameras.length===0)return!1;for(let n=0;n<t.cameras.length;n++){const a=t.cameras[n];if(dl.multiplyMatrices(a.projectionMatrix,a.matrixWorldInverse),pl.setFromProjectionMatrix(dl,a.coordinateSystem,a.reversedDepth),pl.intersectsBox(e))return!0}return!1}containsPoint(e,t){if(!t||!t.cameras||t.cameras.length===0)return!1;for(let n=0;n<t.cameras.length;n++){const a=t.cameras[n];if(dl.multiplyMatrices(a.projectionMatrix,a.matrixWorldInverse),pl.setFromProjectionMatrix(dl,a.coordinateSystem,a.reversedDepth),pl.containsPoint(e))return!0}return!1}clone(){return new Cb}}function GS(i,e){return i-e}function Vz(i,e){return i.z-e.z}function jz(i,e){return e.z-i.z}class Gz{constructor(){this.index=0,this.pool=[],this.list=[]}push(e,t,n,a){const s=this.pool,l=this.list;this.index>=s.length&&s.push({start:-1,count:-1,z:-1,index:-1});const u=s[this.index];l.push(u),this.index++,u.start=e,u.count=t,u.z=n,u.index=a}reset(){this.list.length=0,this.index=0}}const $r=new on,qz=new Ut(1,1,1),FA=new bp,Xz=new Cb,gy=new Ha,bh=new Va,sg=new ee,kA=new ee,Wz=new ee,qS=new Gz,gr=new Ui,vy=[];function Yz(i,e,t=0){const n=e.itemSize;if(i.isInterleavedBufferAttribute||i.array.constructor!==e.array.constructor){const a=i.count;for(let s=0;s<a;s++)for(let l=0;l<n;l++)e.setComponent(s+t,l,i.getComponent(s,l))}else e.array.set(i.array,t*n);e.needsUpdate=!0}function xh(i,e){if(i.constructor!==e.constructor){const t=Math.min(i.length,e.length);for(let n=0;n<t;n++)e[n]=i[n]}else{const t=Math.min(i.length,e.length);e.set(new i.constructor(i.buffer,0,t))}}class LN extends Ui{constructor(e,t,n=t*2,a){super(new mn,a),this.isBatchedMesh=!0,this.perObjectFrustumCulled=!0,this.sortObjects=!0,this.boundingBox=null,this.boundingSphere=null,this.customSort=null,this._instanceInfo=[],this._geometryInfo=[],this._availableInstanceIds=[],this._availableGeometryIds=[],this._nextIndexStart=0,this._nextVertexStart=0,this._geometryCount=0,this._visibilityChanged=!0,this._geometryInitialized=!1,this._maxInstanceCount=e,this._maxVertexCount=t,this._maxIndexCount=n,this._multiDrawCounts=new Int32Array(e),this._multiDrawStarts=new Int32Array(e),this._multiDrawCount=0,this._multiDrawInstances=null,this._matricesTexture=null,this._indirectTexture=null,this._colorsTexture=null,this._initMatricesTexture(),this._initIndirectTexture()}get maxInstanceCount(){return this._maxInstanceCount}get instanceCount(){return this._instanceInfo.length-this._availableInstanceIds.length}get unusedVertexCount(){return this._maxVertexCount-this._nextVertexStart}get unusedIndexCount(){return this._maxIndexCount-this._nextIndexStart}_initMatricesTexture(){let e=Math.sqrt(this._maxInstanceCount*4);e=Math.ceil(e/4)*4,e=Math.max(e,4);const t=new Float32Array(e*e*4),n=new Xs(t,e,e,sa,Di);this._matricesTexture=n}_initIndirectTexture(){let e=Math.sqrt(this._maxInstanceCount);e=Math.ceil(e);const t=new Uint32Array(e*e),n=new Xs(t,e,e,iv,xs);this._indirectTexture=n}_initColorsTexture(){let e=Math.sqrt(this._maxInstanceCount);e=Math.ceil(e);const t=new Float32Array(e*e*4).fill(1),n=new Xs(t,e,e,sa,Di);n.colorSpace=Pn.workingColorSpace,this._colorsTexture=n}_initializeGeometry(e){const t=this.geometry,n=this._maxVertexCount,a=this._maxIndexCount;if(this._geometryInitialized===!1){for(const s in e.attributes){const l=e.getAttribute(s),{array:u,itemSize:d,normalized:p}=l,g=new u.constructor(n*d),y=new ni(g,d,p);t.setAttribute(s,y)}if(e.getIndex()!==null){const s=n>65535?new Uint32Array(a):new Uint16Array(a);t.setIndex(new ni(s,1))}this._geometryInitialized=!0}}_validateGeometry(e){const t=this.geometry;if(!!e.getIndex()!=!!t.getIndex())throw new Error('THREE.BatchedMesh: All geometries must consistently have "index".');for(const n in t.attributes){if(!e.hasAttribute(n))throw new Error(`THREE.BatchedMesh: Added geometry missing "${n}". All geometries must have consistent attributes.`);const a=e.getAttribute(n),s=t.getAttribute(n);if(a.itemSize!==s.itemSize||a.normalized!==s.normalized)throw new Error("THREE.BatchedMesh: All attributes must have a consistent itemSize and normalized value.")}}validateInstanceId(e){const t=this._instanceInfo;if(e<0||e>=t.length||t[e].active===!1)throw new Error(`THREE.BatchedMesh: Invalid instanceId ${e}. Instance is either out of range or has been deleted.`)}validateGeometryId(e){const t=this._geometryInfo;if(e<0||e>=t.length||t[e].active===!1)throw new Error(`THREE.BatchedMesh: Invalid geometryId ${e}. Geometry is either out of range or has been deleted.`)}setCustomSort(e){return this.customSort=e,this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new Ha);const e=this.boundingBox,t=this._instanceInfo;e.makeEmpty();for(let n=0,a=t.length;n<a;n++){if(t[n].active===!1)continue;const s=t[n].geometryIndex;this.getMatrixAt(n,$r),this.getBoundingBoxAt(s,gy).applyMatrix4($r),e.union(gy)}}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new Va);const e=this.boundingSphere,t=this._instanceInfo;e.makeEmpty();for(let n=0,a=t.length;n<a;n++){if(t[n].active===!1)continue;const s=t[n].geometryIndex;this.getMatrixAt(n,$r),this.getBoundingSphereAt(s,bh).applyMatrix4($r),e.union(bh)}}addInstance(e){if(this._instanceInfo.length>=this.maxInstanceCount&&this._availableInstanceIds.length===0)throw new Error("THREE.BatchedMesh: Maximum item count reached.");const n={visible:!0,active:!0,geometryIndex:e};let a=null;this._availableInstanceIds.length>0?(this._availableInstanceIds.sort(GS),a=this._availableInstanceIds.shift(),this._instanceInfo[a]=n):(a=this._instanceInfo.length,this._instanceInfo.push(n));const s=this._matricesTexture;$r.identity().toArray(s.image.data,a*16),s.needsUpdate=!0;const l=this._colorsTexture;return l&&(qz.toArray(l.image.data,a*4),l.needsUpdate=!0),this._visibilityChanged=!0,a}addGeometry(e,t=-1,n=-1){this._initializeGeometry(e),this._validateGeometry(e);const a={vertexStart:-1,vertexCount:-1,reservedVertexCount:-1,indexStart:-1,indexCount:-1,reservedIndexCount:-1,start:-1,count:-1,boundingBox:null,boundingSphere:null,active:!0},s=this._geometryInfo;a.vertexStart=this._nextVertexStart,a.reservedVertexCount=t===-1?e.getAttribute("position").count:t;const l=e.getIndex();if(l!==null&&(a.indexStart=this._nextIndexStart,a.reservedIndexCount=n===-1?l.count:n),a.indexStart!==-1&&a.indexStart+a.reservedIndexCount>this._maxIndexCount||a.vertexStart+a.reservedVertexCount>this._maxVertexCount)throw new Error("THREE.BatchedMesh: Reserved space request exceeds the maximum buffer size.");let d;return this._availableGeometryIds.length>0?(this._availableGeometryIds.sort(GS),d=this._availableGeometryIds.shift(),s[d]=a):(d=this._geometryCount,this._geometryCount++,s.push(a)),this.setGeometryAt(d,e),this._nextIndexStart=a.indexStart+a.reservedIndexCount,this._nextVertexStart=a.vertexStart+a.reservedVertexCount,d}setGeometryAt(e,t){if(e>=this._geometryCount)throw new Error("THREE.BatchedMesh: Maximum geometry count reached.");this._validateGeometry(t);const n=this.geometry,a=n.getIndex()!==null,s=n.getIndex(),l=t.getIndex(),u=this._geometryInfo[e];if(a&&l.count>u.reservedIndexCount||t.attributes.position.count>u.reservedVertexCount)throw new Error("THREE.BatchedMesh: Reserved space not large enough for provided geometry.");const d=u.vertexStart,p=u.reservedVertexCount;u.vertexCount=t.getAttribute("position").count;for(const g in n.attributes){const y=t.getAttribute(g),_=n.getAttribute(g);Yz(y,_,d);const b=y.itemSize;for(let x=y.count,T=p;x<T;x++){const w=d+x;for(let S=0;S<b;S++)_.setComponent(w,S,0)}_.needsUpdate=!0,_.addUpdateRange(d*b,p*b)}if(a){const g=u.indexStart,y=u.reservedIndexCount;u.indexCount=t.getIndex().count;for(let _=0;_<l.count;_++)s.setX(g+_,d+l.getX(_));for(let _=l.count,b=y;_<b;_++)s.setX(g+_,d);s.needsUpdate=!0,s.addUpdateRange(g,u.reservedIndexCount)}return u.start=a?u.indexStart:u.vertexStart,u.count=a?u.indexCount:u.vertexCount,u.boundingBox=null,t.boundingBox!==null&&(u.boundingBox=t.boundingBox.clone()),u.boundingSphere=null,t.boundingSphere!==null&&(u.boundingSphere=t.boundingSphere.clone()),this._visibilityChanged=!0,e}deleteGeometry(e){const t=this._geometryInfo;if(e>=t.length||t[e].active===!1)return this;const n=this._instanceInfo;for(let a=0,s=n.length;a<s;a++)n[a].active&&n[a].geometryIndex===e&&this.deleteInstance(a);return t[e].active=!1,this._availableGeometryIds.push(e),this._visibilityChanged=!0,this}deleteInstance(e){return this.validateInstanceId(e),this._instanceInfo[e].active=!1,this._availableInstanceIds.push(e),this._visibilityChanged=!0,this}optimize(){let e=0,t=0;const n=this._geometryInfo,a=n.map((l,u)=>u).sort((l,u)=>n[l].vertexStart-n[u].vertexStart),s=this.geometry;for(let l=0,u=n.length;l<u;l++){const d=a[l],p=n[d];if(p.active!==!1){if(s.index!==null){if(p.indexStart!==t){const{indexStart:g,vertexStart:y,reservedIndexCount:_}=p,b=s.index,x=b.array,T=e-y;for(let w=g;w<g+_;w++)x[w]=x[w]+T;b.array.copyWithin(t,g,g+_),b.addUpdateRange(t,_),b.needsUpdate=!0,p.indexStart=t}t+=p.reservedIndexCount}if(p.vertexStart!==e){const{vertexStart:g,reservedVertexCount:y}=p,_=s.attributes;for(const b in _){const x=_[b],{array:T,itemSize:w}=x;T.copyWithin(e*w,g*w,(g+y)*w),x.addUpdateRange(e*w,y*w),x.needsUpdate=!0}p.vertexStart=e}e+=p.reservedVertexCount,p.start=s.index?p.indexStart:p.vertexStart,this._nextIndexStart=s.index?p.indexStart+p.reservedIndexCount:0,this._nextVertexStart=p.vertexStart+p.reservedVertexCount}}return this._visibilityChanged=!0,this}getBoundingBoxAt(e,t){if(e>=this._geometryCount)return null;const n=this.geometry,a=this._geometryInfo[e];if(a.boundingBox===null){const s=new Ha,l=n.index,u=n.attributes.position;for(let d=a.start,p=a.start+a.count;d<p;d++){let g=d;l&&(g=l.getX(g)),s.expandByPoint(sg.fromBufferAttribute(u,g))}a.boundingBox=s}return t.copy(a.boundingBox),t}getBoundingSphereAt(e,t){if(e>=this._geometryCount)return null;const n=this.geometry,a=this._geometryInfo[e];if(a.boundingSphere===null){const s=new Va;this.getBoundingBoxAt(e,gy),gy.getCenter(s.center);const l=n.index,u=n.attributes.position;let d=0;for(let p=a.start,g=a.start+a.count;p<g;p++){let y=p;l&&(y=l.getX(y)),sg.fromBufferAttribute(u,y),d=Math.max(d,s.center.distanceToSquared(sg))}s.radius=Math.sqrt(d),a.boundingSphere=s}return t.copy(a.boundingSphere),t}setMatrixAt(e,t){this.validateInstanceId(e);const n=this._matricesTexture,a=this._matricesTexture.image.data;return t.toArray(a,e*16),n.needsUpdate=!0,this}getMatrixAt(e,t){return this.validateInstanceId(e),t.fromArray(this._matricesTexture.image.data,e*16)}setColorAt(e,t){return this.validateInstanceId(e),this._colorsTexture===null&&this._initColorsTexture(),t.toArray(this._colorsTexture.image.data,e*4),this._colorsTexture.needsUpdate=!0,this}getColorAt(e,t){return this.validateInstanceId(e),t.fromArray(this._colorsTexture.image.data,e*4)}setVisibleAt(e,t){return this.validateInstanceId(e),this._instanceInfo[e].visible===t?this:(this._instanceInfo[e].visible=t,this._visibilityChanged=!0,this)}getVisibleAt(e){return this.validateInstanceId(e),this._instanceInfo[e].visible}setGeometryIdAt(e,t){return this.validateInstanceId(e),this.validateGeometryId(t),this._instanceInfo[e].geometryIndex=t,this}getGeometryIdAt(e){return this.validateInstanceId(e),this._instanceInfo[e].geometryIndex}getGeometryRangeAt(e,t={}){this.validateGeometryId(e);const n=this._geometryInfo[e];return t.vertexStart=n.vertexStart,t.vertexCount=n.vertexCount,t.reservedVertexCount=n.reservedVertexCount,t.indexStart=n.indexStart,t.indexCount=n.indexCount,t.reservedIndexCount=n.reservedIndexCount,t.start=n.start,t.count=n.count,t}setInstanceCount(e){const t=this._availableInstanceIds,n=this._instanceInfo;for(t.sort(GS);t[t.length-1]===n.length-1;)n.pop(),t.pop();if(e<n.length)throw new Error(`BatchedMesh: Instance ids outside the range ${e} are being used. Cannot shrink instance count.`);const a=new Int32Array(e),s=new Int32Array(e);xh(this._multiDrawCounts,a),xh(this._multiDrawStarts,s),this._multiDrawCounts=a,this._multiDrawStarts=s,this._maxInstanceCount=e;const l=this._indirectTexture,u=this._matricesTexture,d=this._colorsTexture;l.dispose(),this._initIndirectTexture(),xh(l.image.data,this._indirectTexture.image.data),u.dispose(),this._initMatricesTexture(),xh(u.image.data,this._matricesTexture.image.data),d&&(d.dispose(),this._initColorsTexture(),xh(d.image.data,this._colorsTexture.image.data))}setGeometrySize(e,t){const n=[...this._geometryInfo].filter(u=>u.active);if(Math.max(...n.map(u=>u.vertexStart+u.reservedVertexCount))>e)throw new Error(`BatchedMesh: Geometry vertex values are being used outside the range ${t}. Cannot shrink further.`);if(this.geometry.index&&Math.max(...n.map(d=>d.indexStart+d.reservedIndexCount))>t)throw new Error(`BatchedMesh: Geometry index values are being used outside the range ${t}. Cannot shrink further.`);const s=this.geometry;s.dispose(),this._maxVertexCount=e,this._maxIndexCount=t,this._geometryInitialized&&(this._geometryInitialized=!1,this.geometry=new mn,this._initializeGeometry(s));const l=this.geometry;s.index&&xh(s.index.array,l.index.array);for(const u in s.attributes)xh(s.attributes[u].array,l.attributes[u].array)}raycast(e,t){const n=this._instanceInfo,a=this._geometryInfo,s=this.matrixWorld,l=this.geometry;gr.material=this.material,gr.geometry.index=l.index,gr.geometry.attributes=l.attributes,gr.geometry.boundingBox===null&&(gr.geometry.boundingBox=new Ha),gr.geometry.boundingSphere===null&&(gr.geometry.boundingSphere=new Va);for(let u=0,d=n.length;u<d;u++){if(!n[u].visible||!n[u].active)continue;const p=n[u].geometryIndex,g=a[p];gr.geometry.setDrawRange(g.start,g.count),this.getMatrixAt(u,gr.matrixWorld).premultiply(s),this.getBoundingBoxAt(p,gr.geometry.boundingBox),this.getBoundingSphereAt(p,gr.geometry.boundingSphere),gr.raycast(e,vy);for(let y=0,_=vy.length;y<_;y++){const b=vy[y];b.object=this,b.batchId=u,t.push(b)}vy.length=0}gr.material=null,gr.geometry.index=null,gr.geometry.attributes={},gr.geometry.setDrawRange(0,1/0)}copy(e){return super.copy(e),this.geometry=e.geometry.clone(),this.perObjectFrustumCulled=e.perObjectFrustumCulled,this.sortObjects=e.sortObjects,this.boundingBox=e.boundingBox!==null?e.boundingBox.clone():null,this.boundingSphere=e.boundingSphere!==null?e.boundingSphere.clone():null,this._geometryInfo=e._geometryInfo.map(t=>({...t,boundingBox:t.boundingBox!==null?t.boundingBox.clone():null,boundingSphere:t.boundingSphere!==null?t.boundingSphere.clone():null})),this._instanceInfo=e._instanceInfo.map(t=>({...t})),this._availableInstanceIds=e._availableInstanceIds.slice(),this._availableGeometryIds=e._availableGeometryIds.slice(),this._nextIndexStart=e._nextIndexStart,this._nextVertexStart=e._nextVertexStart,this._geometryCount=e._geometryCount,this._maxInstanceCount=e._maxInstanceCount,this._maxVertexCount=e._maxVertexCount,this._maxIndexCount=e._maxIndexCount,this._geometryInitialized=e._geometryInitialized,this._multiDrawCounts=e._multiDrawCounts.slice(),this._multiDrawStarts=e._multiDrawStarts.slice(),this._indirectTexture=e._indirectTexture.clone(),this._indirectTexture.image.data=this._indirectTexture.image.data.slice(),this._matricesTexture=e._matricesTexture.clone(),this._matricesTexture.image.data=this._matricesTexture.image.data.slice(),this._colorsTexture!==null&&(this._colorsTexture=e._colorsTexture.clone(),this._colorsTexture.image.data=this._colorsTexture.image.data.slice()),this}dispose(){this.geometry.dispose(),this._matricesTexture.dispose(),this._matricesTexture=null,this._indirectTexture.dispose(),this._indirectTexture=null,this._colorsTexture!==null&&(this._colorsTexture.dispose(),this._colorsTexture=null)}onBeforeRender(e,t,n,a,s){if(!this._visibilityChanged&&!this.perObjectFrustumCulled&&!this.sortObjects)return;const l=a.getIndex(),u=l===null?1:l.array.BYTES_PER_ELEMENT,d=this._instanceInfo,p=this._multiDrawStarts,g=this._multiDrawCounts,y=this._geometryInfo,_=this.perObjectFrustumCulled,b=this._indirectTexture,x=b.image.data,T=n.isArrayCamera?Xz:FA;_&&!n.isArrayCamera&&($r.multiplyMatrices(n.projectionMatrix,n.matrixWorldInverse).multiply(this.matrixWorld),FA.setFromProjectionMatrix($r,n.coordinateSystem,n.reversedDepth));let w=0;if(this.sortObjects){$r.copy(this.matrixWorld).invert(),sg.setFromMatrixPosition(n.matrixWorld).applyMatrix4($r),kA.set(0,0,-1).transformDirection(n.matrixWorld).transformDirection($r);for(let N=0,O=d.length;N<O;N++)if(d[N].visible&&d[N].active){const P=d[N].geometryIndex;this.getMatrixAt(N,$r),this.getBoundingSphereAt(P,bh).applyMatrix4($r);let U=!1;if(_&&(U=!T.intersectsSphere(bh,n)),!U){const z=y[P],H=Wz.subVectors(bh.center,sg).dot(kA);qS.push(z.start,z.count,H,N)}}const S=qS.list,C=this.customSort;C===null?S.sort(s.transparent?jz:Vz):C.call(this,S,n);for(let N=0,O=S.length;N<O;N++){const P=S[N];p[w]=P.start*u,g[w]=P.count,x[w]=P.index,w++}qS.reset()}else for(let S=0,C=d.length;S<C;S++)if(d[S].visible&&d[S].active){const N=d[S].geometryIndex;let O=!1;if(_&&(this.getMatrixAt(S,$r),this.getBoundingSphereAt(N,bh).applyMatrix4($r),O=!T.intersectsSphere(bh,n)),!O){const P=y[N];p[w]=P.start*u,g[w]=P.count,x[w]=S,w++}}b.needsUpdate=!0,this._multiDrawCount=w,this._visibilityChanged=!1}onBeforeShadow(e,t,n,a,s,l){this.onBeforeRender(e,null,a,s,l)}}class Gr extends vr{constructor(e){super(),this.isLineBasicMaterial=!0,this.type="LineBasicMaterial",this.color=new Ut(16777215),this.map=null,this.linewidth=1,this.linecap="round",this.linejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.linewidth=e.linewidth,this.linecap=e.linecap,this.linejoin=e.linejoin,this.fog=e.fog,this}}const J_=new ee,Q_=new ee,HA=new on,og=new rf,yy=new Va,XS=new ee,VA=new ee;class bu extends Yn{constructor(e=new mn,t=new Gr){super(),this.isLine=!0,this.type="Line",this.geometry=e,this.material=t,this.morphTargetDictionary=void 0,this.morphTargetInfluences=void 0,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}computeLineDistances(){const e=this.geometry;if(e.index===null){const t=e.attributes.position,n=[0];for(let a=1,s=t.count;a<s;a++)J_.fromBufferAttribute(t,a-1),Q_.fromBufferAttribute(t,a),n[a]=n[a-1],n[a]+=J_.distanceTo(Q_);e.setAttribute("lineDistance",new Ft(n,1))}else Rt("Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}raycast(e,t){const n=this.geometry,a=this.matrixWorld,s=e.params.Line.threshold,l=n.drawRange;if(n.boundingSphere===null&&n.computeBoundingSphere(),yy.copy(n.boundingSphere),yy.applyMatrix4(a),yy.radius+=s,e.ray.intersectsSphere(yy)===!1)return;HA.copy(a).invert(),og.copy(e.ray).applyMatrix4(HA);const u=s/((this.scale.x+this.scale.y+this.scale.z)/3),d=u*u,p=this.isLineSegments?2:1,g=n.index,_=n.attributes.position;if(g!==null){const b=Math.max(0,l.start),x=Math.min(g.count,l.start+l.count);for(let T=b,w=x-1;T<w;T+=p){const S=g.getX(T),C=g.getX(T+1),N=_y(this,e,og,d,S,C,T);N&&t.push(N)}if(this.isLineLoop){const T=g.getX(x-1),w=g.getX(b),S=_y(this,e,og,d,T,w,x-1);S&&t.push(S)}}else{const b=Math.max(0,l.start),x=Math.min(_.count,l.start+l.count);for(let T=b,w=x-1;T<w;T+=p){const S=_y(this,e,og,d,T,T+1,T);S&&t.push(S)}if(this.isLineLoop){const T=_y(this,e,og,d,x-1,b,x-1);T&&t.push(T)}}}updateMorphTargets(){const t=this.geometry.morphAttributes,n=Object.keys(t);if(n.length>0){const a=t[n[0]];if(a!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,l=a.length;s<l;s++){const u=a[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[u]=s}}}}}function _y(i,e,t,n,a,s,l){const u=i.geometry.attributes.position;if(J_.fromBufferAttribute(u,a),Q_.fromBufferAttribute(u,s),t.distanceSqToSegment(J_,Q_,XS,VA)>n)return;XS.applyMatrix4(i.matrixWorld);const p=e.ray.origin.distanceTo(XS);if(!(p<e.near||p>e.far))return{distance:p,point:VA.clone().applyMatrix4(i.matrixWorld),index:l,face:null,faceIndex:null,barycoord:null,object:i}}const jA=new ee,GA=new ee;class El extends bu{constructor(e,t){super(e,t),this.isLineSegments=!0,this.type="LineSegments"}computeLineDistances(){const e=this.geometry;if(e.index===null){const t=e.attributes.position,n=[];for(let a=0,s=t.count;a<s;a+=2)jA.fromBufferAttribute(t,a),GA.fromBufferAttribute(t,a+1),n[a]=a===0?0:n[a-1],n[a+1]=n[a]+jA.distanceTo(GA);e.setAttribute("lineDistance",new Ft(n,1))}else Rt("LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}}class IN extends bu{constructor(e,t){super(e,t),this.isLineLoop=!0,this.type="LineLoop"}}class tM extends vr{constructor(e){super(),this.isPointsMaterial=!0,this.type="PointsMaterial",this.color=new Ut(16777215),this.map=null,this.alphaMap=null,this.size=1,this.sizeAttenuation=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.size=e.size,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}const qA=new on,rE=new rf,by=new Va,xy=new ee;class PN extends Yn{constructor(e=new mn,t=new tM){super(),this.isPoints=!0,this.type="Points",this.geometry=e,this.material=t,this.morphTargetDictionary=void 0,this.morphTargetInfluences=void 0,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}raycast(e,t){const n=this.geometry,a=this.matrixWorld,s=e.params.Points.threshold,l=n.drawRange;if(n.boundingSphere===null&&n.computeBoundingSphere(),by.copy(n.boundingSphere),by.applyMatrix4(a),by.radius+=s,e.ray.intersectsSphere(by)===!1)return;qA.copy(a).invert(),rE.copy(e.ray).applyMatrix4(qA);const u=s/((this.scale.x+this.scale.y+this.scale.z)/3),d=u*u,p=n.index,y=n.attributes.position;if(p!==null){const _=Math.max(0,l.start),b=Math.min(p.count,l.start+l.count);for(let x=_,T=b;x<T;x++){const w=p.getX(x);xy.fromBufferAttribute(y,w),XA(xy,w,d,a,e,t,this)}}else{const _=Math.max(0,l.start),b=Math.min(y.count,l.start+l.count);for(let x=_,T=b;x<T;x++)xy.fromBufferAttribute(y,x),XA(xy,x,d,a,e,t,this)}}updateMorphTargets(){const t=this.geometry.morphAttributes,n=Object.keys(t);if(n.length>0){const a=t[n[0]];if(a!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,l=a.length;s<l;s++){const u=a[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[u]=s}}}}}function XA(i,e,t,n,a,s,l){const u=rE.distanceSqToPoint(i);if(u<t){const d=new ee;rE.closestPointToPoint(i,d),d.applyMatrix4(n);const p=a.ray.origin.distanceTo(d);if(p<a.near||p>a.far)return;s.push({distance:p,distanceToRay:Math.sqrt(u),point:d,index:e,face:null,faceIndex:null,barycoord:null,object:l})}}class zN extends hi{constructor(e,t,n,a,s=Vn,l=Vn,u,d,p){super(e,t,n,a,s,l,u,d,p),this.isVideoTexture=!0,this.generateMipmaps=!1,this._requestVideoFrameCallbackId=0;const g=this;function y(){g.needsUpdate=!0,g._requestVideoFrameCallbackId=e.requestVideoFrameCallback(y)}"requestVideoFrameCallback"in e&&(this._requestVideoFrameCallbackId=e.requestVideoFrameCallback(y))}clone(){return new this.constructor(this.image).copy(this)}update(){const e=this.image;"requestVideoFrameCallback"in e===!1&&e.readyState>=e.HAVE_CURRENT_DATA&&(this.needsUpdate=!0)}dispose(){this._requestVideoFrameCallbackId!==0&&(this.source.data.cancelVideoFrameCallback(this._requestVideoFrameCallbackId),this._requestVideoFrameCallbackId=0),super.dispose()}}class Zz extends zN{constructor(e,t,n,a,s,l,u,d){super({},e,t,n,a,s,l,u,d),this.isVideoFrameTexture=!0}update(){}clone(){return new this.constructor().copy(this)}setFrame(e){this.image=e,this.needsUpdate=!0}}class Kz extends hi{constructor(e,t){super({width:e,height:t}),this.isFramebufferTexture=!0,this.magFilter=Vi,this.minFilter=Vi,this.generateMipmaps=!1,this.needsUpdate=!0}}class Rb extends hi{constructor(e,t,n,a,s,l,u,d,p,g,y,_){super(null,l,u,d,p,g,a,s,y,_),this.isCompressedTexture=!0,this.image={width:t,height:n},this.mipmaps=e,this.flipY=!1,this.generateMipmaps=!1}}class Jz extends Rb{constructor(e,t,n,a,s,l){super(e,t,n,s,l),this.isCompressedArrayTexture=!0,this.image.depth=a,this.wrapR=Qi,this.layerUpdates=new Set}addLayerUpdate(e){this.layerUpdates.add(e)}clearLayerUpdates(){this.layerUpdates.clear()}}class Qz extends Rb{constructor(e,t,n){super(void 0,e[0].width,e[0].height,t,n,No),this.isCompressedCubeTexture=!0,this.isCubeTexture=!0,this.image=e}}class $z extends hi{constructor(e,t,n,a,s,l,u,d,p){super(e,t,n,a,s,l,u,d,p),this.isCanvasTexture=!0,this.needsUpdate=!0}}class fp extends hi{constructor(e,t,n=xs,a,s,l,u=Vi,d=Vi,p,g=xl,y=1){if(g!==xl&&g!==du)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");const _={width:e,height:t,depth:y};super(_,a,s,l,u,d,g,n,p),this.isDepthTexture=!0,this.flipY=!1,this.generateMipmaps=!1,this.compareFunction=null}copy(e){return super.copy(e),this.source=new pu(Object.assign({},e.image)),this.compareFunction=e.compareFunction,this}toJSON(e){const t=super.toJSON(e);return this.compareFunction!==null&&(t.compareFunction=this.compareFunction),t}}class BN extends fp{constructor(e,t=xs,n=No,a,s,l=Vi,u=Vi,d,p=xl){const g={width:e,height:e,depth:1},y=[g,g,g,g,g,g];super(e,e,t,n,a,s,l,u,d,p),this.image=y,this.isCubeDepthTexture=!0,this.isCubeTexture=!0}get images(){return this.image}set images(e){this.image=e}}class nM extends hi{constructor(e=null){super(),this.sourceTexture=e,this.isExternalTexture=!0}copy(e){return super.copy(e),this.sourceTexture=e.sourceTexture,this}}class Nb extends mn{constructor(e=1,t=1,n=4,a=8,s=1){super(),this.type="CapsuleGeometry",this.parameters={radius:e,height:t,capSegments:n,radialSegments:a,heightSegments:s},t=Math.max(0,t),n=Math.max(1,Math.floor(n)),a=Math.max(3,Math.floor(a)),s=Math.max(1,Math.floor(s));const l=[],u=[],d=[],p=[],g=t/2,y=Math.PI/2*e,_=t,b=2*y+_,x=n*2+s,T=a+1,w=new ee,S=new ee;for(let C=0;C<=x;C++){let N=0,O=0,P=0,U=0;if(C<=n){const D=C/n,L=D*Math.PI/2;O=-g-e*Math.cos(L),P=e*Math.sin(L),U=-e*Math.cos(L),N=D*y}else if(C<=n+s){const D=(C-n)/s;O=-g+D*t,P=e,U=0,N=y+D*_}else{const D=(C-n-s)/n,L=D*Math.PI/2;O=g+e*Math.sin(L),P=e*Math.cos(L),U=e*Math.sin(L),N=y+_+D*y}const z=Math.max(0,Math.min(1,N/b));let H=0;C===0?H=.5/a:C===x&&(H=-.5/a);for(let D=0;D<=a;D++){const L=D/a,j=L*Math.PI*2,W=Math.sin(j),X=Math.cos(j);S.x=-P*X,S.y=O,S.z=P*W,u.push(S.x,S.y,S.z),w.set(-P*X,U,P*W),w.normalize(),d.push(w.x,w.y,w.z),p.push(L+H,z)}if(C>0){const D=(C-1)*T;for(let L=0;L<a;L++){const j=D+L,W=D+L+1,X=C*T+L,K=C*T+L+1;l.push(j,W,X),l.push(W,K,X)}}}this.setIndex(l),this.setAttribute("position",new Ft(u,3)),this.setAttribute("normal",new Ft(d,3)),this.setAttribute("uv",new Ft(p,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Nb(e.radius,e.height,e.capSegments,e.radialSegments,e.heightSegments)}}class Ob extends mn{constructor(e=1,t=32,n=0,a=Math.PI*2){super(),this.type="CircleGeometry",this.parameters={radius:e,segments:t,thetaStart:n,thetaLength:a},t=Math.max(3,t);const s=[],l=[],u=[],d=[],p=new ee,g=new Ke;l.push(0,0,0),u.push(0,0,1),d.push(.5,.5);for(let y=0,_=3;y<=t;y++,_+=3){const b=n+y/t*a;p.x=e*Math.cos(b),p.y=e*Math.sin(b),l.push(p.x,p.y,p.z),u.push(0,0,1),g.x=(l[_]/e+1)/2,g.y=(l[_+1]/e+1)/2,d.push(g.x,g.y)}for(let y=1;y<=t;y++)s.push(y,y+1,0);this.setIndex(s),this.setAttribute("position",new Ft(l,3)),this.setAttribute("normal",new Ft(u,3)),this.setAttribute("uv",new Ft(d,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Ob(e.radius,e.segments,e.thetaStart,e.thetaLength)}}class sv extends mn{constructor(e=1,t=1,n=1,a=32,s=1,l=!1,u=0,d=Math.PI*2){super(),this.type="CylinderGeometry",this.parameters={radiusTop:e,radiusBottom:t,height:n,radialSegments:a,heightSegments:s,openEnded:l,thetaStart:u,thetaLength:d};const p=this;a=Math.floor(a),s=Math.floor(s);const g=[],y=[],_=[],b=[];let x=0;const T=[],w=n/2;let S=0;C(),l===!1&&(e>0&&N(!0),t>0&&N(!1)),this.setIndex(g),this.setAttribute("position",new Ft(y,3)),this.setAttribute("normal",new Ft(_,3)),this.setAttribute("uv",new Ft(b,2));function C(){const O=new ee,P=new ee;let U=0;const z=(t-e)/n;for(let H=0;H<=s;H++){const D=[],L=H/s,j=L*(t-e)+e;for(let W=0;W<=a;W++){const X=W/a,K=X*d+u,le=Math.sin(K),k=Math.cos(K);P.x=j*le,P.y=-L*n+w,P.z=j*k,y.push(P.x,P.y,P.z),O.set(le,z,k).normalize(),_.push(O.x,O.y,O.z),b.push(X,1-L),D.push(x++)}T.push(D)}for(let H=0;H<a;H++)for(let D=0;D<s;D++){const L=T[D][H],j=T[D+1][H],W=T[D+1][H+1],X=T[D][H+1];(e>0||D!==0)&&(g.push(L,j,X),U+=3),(t>0||D!==s-1)&&(g.push(j,W,X),U+=3)}p.addGroup(S,U,0),S+=U}function N(O){const P=x,U=new Ke,z=new ee;let H=0;const D=O===!0?e:t,L=O===!0?1:-1;for(let W=1;W<=a;W++)y.push(0,w*L,0),_.push(0,L,0),b.push(.5,.5),x++;const j=x;for(let W=0;W<=a;W++){const K=W/a*d+u,le=Math.cos(K),k=Math.sin(K);z.x=D*k,z.y=w*L,z.z=D*le,y.push(z.x,z.y,z.z),_.push(0,L,0),U.x=le*.5+.5,U.y=k*.5*L+.5,b.push(U.x,U.y),x++}for(let W=0;W<a;W++){const X=P+W,K=j+W;O===!0?g.push(K,K+1,X):g.push(K+1,K,X),H+=3}p.addGroup(S,H,O===!0?1:2),S+=H}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new sv(e.radiusTop,e.radiusBottom,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}class ov extends sv{constructor(e=1,t=1,n=32,a=1,s=!1,l=0,u=Math.PI*2){super(0,e,t,n,a,s,l,u),this.type="ConeGeometry",this.parameters={radius:e,height:t,radialSegments:n,heightSegments:a,openEnded:s,thetaStart:l,thetaLength:u}}static fromJSON(e){return new ov(e.radius,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}class Eu extends mn{constructor(e=[],t=[],n=1,a=0){super(),this.type="PolyhedronGeometry",this.parameters={vertices:e,indices:t,radius:n,detail:a};const s=[],l=[];u(a),p(n),g(),this.setAttribute("position",new Ft(s,3)),this.setAttribute("normal",new Ft(s.slice(),3)),this.setAttribute("uv",new Ft(l,2)),a===0?this.computeVertexNormals():this.normalizeNormals();function u(C){const N=new ee,O=new ee,P=new ee;for(let U=0;U<t.length;U+=3)b(t[U+0],N),b(t[U+1],O),b(t[U+2],P),d(N,O,P,C)}function d(C,N,O,P){const U=P+1,z=[];for(let H=0;H<=U;H++){z[H]=[];const D=C.clone().lerp(O,H/U),L=N.clone().lerp(O,H/U),j=U-H;for(let W=0;W<=j;W++)W===0&&H===U?z[H][W]=D:z[H][W]=D.clone().lerp(L,W/j)}for(let H=0;H<U;H++)for(let D=0;D<2*(U-H)-1;D++){const L=Math.floor(D/2);D%2===0?(_(z[H][L+1]),_(z[H+1][L]),_(z[H][L])):(_(z[H][L+1]),_(z[H+1][L+1]),_(z[H+1][L]))}}function p(C){const N=new ee;for(let O=0;O<s.length;O+=3)N.x=s[O+0],N.y=s[O+1],N.z=s[O+2],N.normalize().multiplyScalar(C),s[O+0]=N.x,s[O+1]=N.y,s[O+2]=N.z}function g(){const C=new ee;for(let N=0;N<s.length;N+=3){C.x=s[N+0],C.y=s[N+1],C.z=s[N+2];const O=w(C)/2/Math.PI+.5,P=S(C)/Math.PI+.5;l.push(O,1-P)}x(),y()}function y(){for(let C=0;C<l.length;C+=6){const N=l[C+0],O=l[C+2],P=l[C+4],U=Math.max(N,O,P),z=Math.min(N,O,P);U>.9&&z<.1&&(N<.2&&(l[C+0]+=1),O<.2&&(l[C+2]+=1),P<.2&&(l[C+4]+=1))}}function _(C){s.push(C.x,C.y,C.z)}function b(C,N){const O=C*3;N.x=e[O+0],N.y=e[O+1],N.z=e[O+2]}function x(){const C=new ee,N=new ee,O=new ee,P=new ee,U=new Ke,z=new Ke,H=new Ke;for(let D=0,L=0;D<s.length;D+=9,L+=6){C.set(s[D+0],s[D+1],s[D+2]),N.set(s[D+3],s[D+4],s[D+5]),O.set(s[D+6],s[D+7],s[D+8]),U.set(l[L+0],l[L+1]),z.set(l[L+2],l[L+3]),H.set(l[L+4],l[L+5]),P.copy(C).add(N).add(O).divideScalar(3);const j=w(P);T(U,L+0,C,j),T(z,L+2,N,j),T(H,L+4,O,j)}}function T(C,N,O,P){P<0&&C.x===1&&(l[N]=C.x-1),O.x===0&&O.z===0&&(l[N]=P/2/Math.PI+.5)}function w(C){return Math.atan2(C.z,-C.x)}function S(C){return Math.atan2(-C.y,Math.sqrt(C.x*C.x+C.z*C.z))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Eu(e.vertices,e.indices,e.radius,e.detail)}}class Db extends Eu{constructor(e=1,t=0){const n=(1+Math.sqrt(5))/2,a=1/n,s=[-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-a,-n,0,-a,n,0,a,-n,0,a,n,-a,-n,0,-a,n,0,a,-n,0,a,n,0,-n,0,-a,n,0,-a,-n,0,a,n,0,a],l=[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9];super(s,l,e,t),this.type="DodecahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new Db(e.radius,e.detail)}}const Sy=new ee,Ey=new ee,WS=new ee,My=new is;class FN extends mn{constructor(e=null,t=1){if(super(),this.type="EdgesGeometry",this.parameters={geometry:e,thresholdAngle:t},e!==null){const a=Math.pow(10,4),s=Math.cos(Yh*t),l=e.getIndex(),u=e.getAttribute("position"),d=l?l.count:u.count,p=[0,0,0],g=["a","b","c"],y=new Array(3),_={},b=[];for(let x=0;x<d;x+=3){l?(p[0]=l.getX(x),p[1]=l.getX(x+1),p[2]=l.getX(x+2)):(p[0]=x,p[1]=x+1,p[2]=x+2);const{a:T,b:w,c:S}=My;if(T.fromBufferAttribute(u,p[0]),w.fromBufferAttribute(u,p[1]),S.fromBufferAttribute(u,p[2]),My.getNormal(WS),y[0]=`${Math.round(T.x*a)},${Math.round(T.y*a)},${Math.round(T.z*a)}`,y[1]=`${Math.round(w.x*a)},${Math.round(w.y*a)},${Math.round(w.z*a)}`,y[2]=`${Math.round(S.x*a)},${Math.round(S.y*a)},${Math.round(S.z*a)}`,!(y[0]===y[1]||y[1]===y[2]||y[2]===y[0]))for(let C=0;C<3;C++){const N=(C+1)%3,O=y[C],P=y[N],U=My[g[C]],z=My[g[N]],H=`${O}_${P}`,D=`${P}_${O}`;D in _&&_[D]?(WS.dot(_[D].normal)<=s&&(b.push(U.x,U.y,U.z),b.push(z.x,z.y,z.z)),_[D]=null):H in _||(_[H]={index0:p[C],index1:p[N],normal:WS.clone()})}}for(const x in _)if(_[x]){const{index0:T,index1:w}=_[x];Sy.fromBufferAttribute(u,T),Ey.fromBufferAttribute(u,w),b.push(Sy.x,Sy.y,Sy.z),b.push(Ey.x,Ey.y,Ey.z)}this.setAttribute("position",new Ft(b,3))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}}class Do{constructor(){this.type="Curve",this.arcLengthDivisions=200,this.needsUpdate=!1,this.cacheArcLengths=null}getPoint(){Rt("Curve: .getPoint() not implemented.")}getPointAt(e,t){const n=this.getUtoTmapping(e);return this.getPoint(n,t)}getPoints(e=5){const t=[];for(let n=0;n<=e;n++)t.push(this.getPoint(n/e));return t}getSpacedPoints(e=5){const t=[];for(let n=0;n<=e;n++)t.push(this.getPointAt(n/e));return t}getLength(){const e=this.getLengths();return e[e.length-1]}getLengths(e=this.arcLengthDivisions){if(this.cacheArcLengths&&this.cacheArcLengths.length===e+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;const t=[];let n,a=this.getPoint(0),s=0;t.push(0);for(let l=1;l<=e;l++)n=this.getPoint(l/e),s+=n.distanceTo(a),t.push(s),a=n;return this.cacheArcLengths=t,t}updateArcLengths(){this.needsUpdate=!0,this.getLengths()}getUtoTmapping(e,t=null){const n=this.getLengths();let a=0;const s=n.length;let l;t?l=t:l=e*n[s-1];let u=0,d=s-1,p;for(;u<=d;)if(a=Math.floor(u+(d-u)/2),p=n[a]-l,p<0)u=a+1;else if(p>0)d=a-1;else{d=a;break}if(a=d,n[a]===l)return a/(s-1);const g=n[a],_=n[a+1]-g,b=(l-g)/_;return(a+b)/(s-1)}getTangent(e,t){let a=e-1e-4,s=e+1e-4;a<0&&(a=0),s>1&&(s=1);const l=this.getPoint(a),u=this.getPoint(s),d=t||(l.isVector2?new Ke:new ee);return d.copy(u).sub(l).normalize(),d}getTangentAt(e,t){const n=this.getUtoTmapping(e);return this.getTangent(n,t)}computeFrenetFrames(e,t=!1){const n=new ee,a=[],s=[],l=[],u=new ee,d=new on;for(let b=0;b<=e;b++){const x=b/e;a[b]=this.getTangentAt(x,new ee)}s[0]=new ee,l[0]=new ee;let p=Number.MAX_VALUE;const g=Math.abs(a[0].x),y=Math.abs(a[0].y),_=Math.abs(a[0].z);g<=p&&(p=g,n.set(1,0,0)),y<=p&&(p=y,n.set(0,1,0)),_<=p&&n.set(0,0,1),u.crossVectors(a[0],n).normalize(),s[0].crossVectors(a[0],u),l[0].crossVectors(a[0],s[0]);for(let b=1;b<=e;b++){if(s[b]=s[b-1].clone(),l[b]=l[b-1].clone(),u.crossVectors(a[b-1],a[b]),u.length()>Number.EPSILON){u.normalize();const x=Math.acos(hn(a[b-1].dot(a[b]),-1,1));s[b].applyMatrix4(d.makeRotationAxis(u,x))}l[b].crossVectors(a[b],s[b])}if(t===!0){let b=Math.acos(hn(s[0].dot(s[e]),-1,1));b/=e,a[0].dot(u.crossVectors(s[0],s[e]))>0&&(b=-b);for(let x=1;x<=e;x++)s[x].applyMatrix4(d.makeRotationAxis(a[x],b*x)),l[x].crossVectors(a[x],s[x])}return{tangents:a,normals:s,binormals:l}}clone(){return new this.constructor().copy(this)}copy(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}toJSON(){const e={metadata:{version:4.7,type:"Curve",generator:"Curve.toJSON"}};return e.arcLengthDivisions=this.arcLengthDivisions,e.type=this.type,e}fromJSON(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}}class Ub extends Do{constructor(e=0,t=0,n=1,a=1,s=0,l=Math.PI*2,u=!1,d=0){super(),this.isEllipseCurve=!0,this.type="EllipseCurve",this.aX=e,this.aY=t,this.xRadius=n,this.yRadius=a,this.aStartAngle=s,this.aEndAngle=l,this.aClockwise=u,this.aRotation=d}getPoint(e,t=new Ke){const n=t,a=Math.PI*2;let s=this.aEndAngle-this.aStartAngle;const l=Math.abs(s)<Number.EPSILON;for(;s<0;)s+=a;for(;s>a;)s-=a;s<Number.EPSILON&&(l?s=0:s=a),this.aClockwise===!0&&!l&&(s===a?s=-a:s=s-a);const u=this.aStartAngle+e*s;let d=this.aX+this.xRadius*Math.cos(u),p=this.aY+this.yRadius*Math.sin(u);if(this.aRotation!==0){const g=Math.cos(this.aRotation),y=Math.sin(this.aRotation),_=d-this.aX,b=p-this.aY;d=_*g-b*y+this.aX,p=_*y+b*g+this.aY}return n.set(d,p)}copy(e){return super.copy(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}toJSON(){const e=super.toJSON();return e.aX=this.aX,e.aY=this.aY,e.xRadius=this.xRadius,e.yRadius=this.yRadius,e.aStartAngle=this.aStartAngle,e.aEndAngle=this.aEndAngle,e.aClockwise=this.aClockwise,e.aRotation=this.aRotation,e}fromJSON(e){return super.fromJSON(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}}class kN extends Ub{constructor(e,t,n,a,s,l){super(e,t,n,n,a,s,l),this.isArcCurve=!0,this.type="ArcCurve"}}function iM(){let i=0,e=0,t=0,n=0;function a(s,l,u,d){i=s,e=u,t=-3*s+3*l-2*u-d,n=2*s-2*l+u+d}return{initCatmullRom:function(s,l,u,d,p){a(l,u,p*(u-s),p*(d-l))},initNonuniformCatmullRom:function(s,l,u,d,p,g,y){let _=(l-s)/p-(u-s)/(p+g)+(u-l)/g,b=(u-l)/g-(d-l)/(g+y)+(d-u)/y;_*=g,b*=g,a(l,u,_,b)},calc:function(s){const l=s*s,u=l*s;return i+e*s+t*l+n*u}}}const wy=new ee,YS=new iM,ZS=new iM,KS=new iM;class HN extends Do{constructor(e=[],t=!1,n="centripetal",a=.5){super(),this.isCatmullRomCurve3=!0,this.type="CatmullRomCurve3",this.points=e,this.closed=t,this.curveType=n,this.tension=a}getPoint(e,t=new ee){const n=t,a=this.points,s=a.length,l=(s-(this.closed?0:1))*e;let u=Math.floor(l),d=l-u;this.closed?u+=u>0?0:(Math.floor(Math.abs(u)/s)+1)*s:d===0&&u===s-1&&(u=s-2,d=1);let p,g;this.closed||u>0?p=a[(u-1)%s]:(wy.subVectors(a[0],a[1]).add(a[0]),p=wy);const y=a[u%s],_=a[(u+1)%s];if(this.closed||u+2<s?g=a[(u+2)%s]:(wy.subVectors(a[s-1],a[s-2]).add(a[s-1]),g=wy),this.curveType==="centripetal"||this.curveType==="chordal"){const b=this.curveType==="chordal"?.5:.25;let x=Math.pow(p.distanceToSquared(y),b),T=Math.pow(y.distanceToSquared(_),b),w=Math.pow(_.distanceToSquared(g),b);T<1e-4&&(T=1),x<1e-4&&(x=T),w<1e-4&&(w=T),YS.initNonuniformCatmullRom(p.x,y.x,_.x,g.x,x,T,w),ZS.initNonuniformCatmullRom(p.y,y.y,_.y,g.y,x,T,w),KS.initNonuniformCatmullRom(p.z,y.z,_.z,g.z,x,T,w)}else this.curveType==="catmullrom"&&(YS.initCatmullRom(p.x,y.x,_.x,g.x,this.tension),ZS.initCatmullRom(p.y,y.y,_.y,g.y,this.tension),KS.initCatmullRom(p.z,y.z,_.z,g.z,this.tension));return n.set(YS.calc(d),ZS.calc(d),KS.calc(d)),n}copy(e){super.copy(e),this.points=[];for(let t=0,n=e.points.length;t<n;t++){const a=e.points[t];this.points.push(a.clone())}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}toJSON(){const e=super.toJSON();e.points=[];for(let t=0,n=this.points.length;t<n;t++){const a=this.points[t];e.points.push(a.toArray())}return e.closed=this.closed,e.curveType=this.curveType,e.tension=this.tension,e}fromJSON(e){super.fromJSON(e),this.points=[];for(let t=0,n=e.points.length;t<n;t++){const a=e.points[t];this.points.push(new ee().fromArray(a))}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}}function WA(i,e,t,n,a){const s=(n-e)*.5,l=(a-t)*.5,u=i*i,d=i*u;return(2*t-2*n+s+l)*d+(-3*t+3*n-2*s-l)*u+s*i+t}function eB(i,e){const t=1-i;return t*t*e}function tB(i,e){return 2*(1-i)*i*e}function nB(i,e){return i*i*e}function Tg(i,e,t,n){return eB(i,e)+tB(i,t)+nB(i,n)}function iB(i,e){const t=1-i;return t*t*t*e}function aB(i,e){const t=1-i;return 3*t*t*i*e}function rB(i,e){return 3*(1-i)*i*i*e}function sB(i,e){return i*i*i*e}function Ag(i,e,t,n,a){return iB(i,e)+aB(i,t)+rB(i,n)+sB(i,a)}class aM extends Do{constructor(e=new Ke,t=new Ke,n=new Ke,a=new Ke){super(),this.isCubicBezierCurve=!0,this.type="CubicBezierCurve",this.v0=e,this.v1=t,this.v2=n,this.v3=a}getPoint(e,t=new Ke){const n=t,a=this.v0,s=this.v1,l=this.v2,u=this.v3;return n.set(Ag(e,a.x,s.x,l.x,u.x),Ag(e,a.y,s.y,l.y,u.y)),n}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}class VN extends Do{constructor(e=new ee,t=new ee,n=new ee,a=new ee){super(),this.isCubicBezierCurve3=!0,this.type="CubicBezierCurve3",this.v0=e,this.v1=t,this.v2=n,this.v3=a}getPoint(e,t=new ee){const n=t,a=this.v0,s=this.v1,l=this.v2,u=this.v3;return n.set(Ag(e,a.x,s.x,l.x,u.x),Ag(e,a.y,s.y,l.y,u.y),Ag(e,a.z,s.z,l.z,u.z)),n}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}class rM extends Do{constructor(e=new Ke,t=new Ke){super(),this.isLineCurve=!0,this.type="LineCurve",this.v1=e,this.v2=t}getPoint(e,t=new Ke){const n=t;return e===1?n.copy(this.v2):(n.copy(this.v2).sub(this.v1),n.multiplyScalar(e).add(this.v1)),n}getPointAt(e,t){return this.getPoint(e,t)}getTangent(e,t=new Ke){return t.subVectors(this.v2,this.v1).normalize()}getTangentAt(e,t){return this.getTangent(e,t)}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class jN extends Do{constructor(e=new ee,t=new ee){super(),this.isLineCurve3=!0,this.type="LineCurve3",this.v1=e,this.v2=t}getPoint(e,t=new ee){const n=t;return e===1?n.copy(this.v2):(n.copy(this.v2).sub(this.v1),n.multiplyScalar(e).add(this.v1)),n}getPointAt(e,t){return this.getPoint(e,t)}getTangent(e,t=new ee){return t.subVectors(this.v2,this.v1).normalize()}getTangentAt(e,t){return this.getTangent(e,t)}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class sM extends Do{constructor(e=new Ke,t=new Ke,n=new Ke){super(),this.isQuadraticBezierCurve=!0,this.type="QuadraticBezierCurve",this.v0=e,this.v1=t,this.v2=n}getPoint(e,t=new Ke){const n=t,a=this.v0,s=this.v1,l=this.v2;return n.set(Tg(e,a.x,s.x,l.x),Tg(e,a.y,s.y,l.y)),n}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class oM extends Do{constructor(e=new ee,t=new ee,n=new ee){super(),this.isQuadraticBezierCurve3=!0,this.type="QuadraticBezierCurve3",this.v0=e,this.v1=t,this.v2=n}getPoint(e,t=new ee){const n=t,a=this.v0,s=this.v1,l=this.v2;return n.set(Tg(e,a.x,s.x,l.x),Tg(e,a.y,s.y,l.y),Tg(e,a.z,s.z,l.z)),n}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class lM extends Do{constructor(e=[]){super(),this.isSplineCurve=!0,this.type="SplineCurve",this.points=e}getPoint(e,t=new Ke){const n=t,a=this.points,s=(a.length-1)*e,l=Math.floor(s),u=s-l,d=a[l===0?l:l-1],p=a[l],g=a[l>a.length-2?a.length-1:l+1],y=a[l>a.length-3?a.length-1:l+2];return n.set(WA(u,d.x,p.x,g.x,y.x),WA(u,d.y,p.y,g.y,y.y)),n}copy(e){super.copy(e),this.points=[];for(let t=0,n=e.points.length;t<n;t++){const a=e.points[t];this.points.push(a.clone())}return this}toJSON(){const e=super.toJSON();e.points=[];for(let t=0,n=this.points.length;t<n;t++){const a=this.points[t];e.points.push(a.toArray())}return e}fromJSON(e){super.fromJSON(e),this.points=[];for(let t=0,n=e.points.length;t<n;t++){const a=e.points[t];this.points.push(new Ke().fromArray(a))}return this}}var $_=Object.freeze({__proto__:null,ArcCurve:kN,CatmullRomCurve3:HN,CubicBezierCurve:aM,CubicBezierCurve3:VN,EllipseCurve:Ub,LineCurve:rM,LineCurve3:jN,QuadraticBezierCurve:sM,QuadraticBezierCurve3:oM,SplineCurve:lM});class GN extends Do{constructor(){super(),this.type="CurvePath",this.curves=[],this.autoClose=!1}add(e){this.curves.push(e)}closePath(){const e=this.curves[0].getPoint(0),t=this.curves[this.curves.length-1].getPoint(1);if(!e.equals(t)){const n=e.isVector2===!0?"LineCurve":"LineCurve3";this.curves.push(new $_[n](t,e))}return this}getPoint(e,t){const n=e*this.getLength(),a=this.getCurveLengths();let s=0;for(;s<a.length;){if(a[s]>=n){const l=a[s]-n,u=this.curves[s],d=u.getLength(),p=d===0?0:1-l/d;return u.getPointAt(p,t)}s++}return null}getLength(){const e=this.getCurveLengths();return e[e.length-1]}updateArcLengths(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()}getCurveLengths(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;const e=[];let t=0;for(let n=0,a=this.curves.length;n<a;n++)t+=this.curves[n].getLength(),e.push(t);return this.cacheLengths=e,e}getSpacedPoints(e=40){const t=[];for(let n=0;n<=e;n++)t.push(this.getPoint(n/e));return this.autoClose&&t.push(t[0]),t}getPoints(e=12){const t=[];let n;for(let a=0,s=this.curves;a<s.length;a++){const l=s[a],u=l.isEllipseCurve?e*2:l.isLineCurve||l.isLineCurve3?1:l.isSplineCurve?e*l.points.length:e,d=l.getPoints(u);for(let p=0;p<d.length;p++){const g=d[p];n&&n.equals(g)||(t.push(g),n=g)}}return this.autoClose&&t.length>1&&!t[t.length-1].equals(t[0])&&t.push(t[0]),t}copy(e){super.copy(e),this.curves=[];for(let t=0,n=e.curves.length;t<n;t++){const a=e.curves[t];this.curves.push(a.clone())}return this.autoClose=e.autoClose,this}toJSON(){const e=super.toJSON();e.autoClose=this.autoClose,e.curves=[];for(let t=0,n=this.curves.length;t<n;t++){const a=this.curves[t];e.curves.push(a.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.autoClose=e.autoClose,this.curves=[];for(let t=0,n=e.curves.length;t<n;t++){const a=e.curves[t];this.curves.push(new $_[a.type]().fromJSON(a))}return this}}class eb extends GN{constructor(e){super(),this.type="Path",this.currentPoint=new Ke,e&&this.setFromPoints(e)}setFromPoints(e){this.moveTo(e[0].x,e[0].y);for(let t=1,n=e.length;t<n;t++)this.lineTo(e[t].x,e[t].y);return this}moveTo(e,t){return this.currentPoint.set(e,t),this}lineTo(e,t){const n=new rM(this.currentPoint.clone(),new Ke(e,t));return this.curves.push(n),this.currentPoint.set(e,t),this}quadraticCurveTo(e,t,n,a){const s=new sM(this.currentPoint.clone(),new Ke(e,t),new Ke(n,a));return this.curves.push(s),this.currentPoint.set(n,a),this}bezierCurveTo(e,t,n,a,s,l){const u=new aM(this.currentPoint.clone(),new Ke(e,t),new Ke(n,a),new Ke(s,l));return this.curves.push(u),this.currentPoint.set(s,l),this}splineThru(e){const t=[this.currentPoint.clone()].concat(e),n=new lM(t);return this.curves.push(n),this.currentPoint.copy(e[e.length-1]),this}arc(e,t,n,a,s,l){const u=this.currentPoint.x,d=this.currentPoint.y;return this.absarc(e+u,t+d,n,a,s,l),this}absarc(e,t,n,a,s,l){return this.absellipse(e,t,n,n,a,s,l),this}ellipse(e,t,n,a,s,l,u,d){const p=this.currentPoint.x,g=this.currentPoint.y;return this.absellipse(e+p,t+g,n,a,s,l,u,d),this}absellipse(e,t,n,a,s,l,u,d){const p=new Ub(e,t,n,a,s,l,u,d);if(this.curves.length>0){const y=p.getPoint(0);y.equals(this.currentPoint)||this.lineTo(y.x,y.y)}this.curves.push(p);const g=p.getPoint(1);return this.currentPoint.copy(g),this}copy(e){return super.copy(e),this.currentPoint.copy(e.currentPoint),this}toJSON(){const e=super.toJSON();return e.currentPoint=this.currentPoint.toArray(),e}fromJSON(e){return super.fromJSON(e),this.currentPoint.fromArray(e.currentPoint),this}}class Zh extends eb{constructor(e){super(e),this.uuid=bs(),this.type="Shape",this.holes=[]}getPointsHoles(e){const t=[];for(let n=0,a=this.holes.length;n<a;n++)t[n]=this.holes[n].getPoints(e);return t}extractPoints(e){return{shape:this.getPoints(e),holes:this.getPointsHoles(e)}}copy(e){super.copy(e),this.holes=[];for(let t=0,n=e.holes.length;t<n;t++){const a=e.holes[t];this.holes.push(a.clone())}return this}toJSON(){const e=super.toJSON();e.uuid=this.uuid,e.holes=[];for(let t=0,n=this.holes.length;t<n;t++){const a=this.holes[t];e.holes.push(a.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.uuid=e.uuid,this.holes=[];for(let t=0,n=e.holes.length;t<n;t++){const a=e.holes[t];this.holes.push(new eb().fromJSON(a))}return this}}function oB(i,e,t=2){const n=e&&e.length,a=n?e[0]*t:i.length;let s=qN(i,0,a,t,!0);const l=[];if(!s||s.next===s.prev)return l;let u,d,p;if(n&&(s=fB(i,e,s,t)),i.length>80*t){u=i[0],d=i[1];let g=u,y=d;for(let _=t;_<a;_+=t){const b=i[_],x=i[_+1];b<u&&(u=b),x<d&&(d=x),b>g&&(g=b),x>y&&(y=x)}p=Math.max(g-u,y-d),p=p!==0?32767/p:0}return Vg(s,l,t,u,d,p,0),l}function qN(i,e,t,n,a){let s;if(a===EB(i,e,t,n)>0)for(let l=e;l<t;l+=n)s=YA(l/n|0,i[l],i[l+1],s);else for(let l=t-n;l>=e;l-=n)s=YA(l/n|0,i[l],i[l+1],s);return s&&dp(s,s.next)&&(Gg(s),s=s.next),s}function $h(i,e){if(!i)return i;e||(e=i);let t=i,n;do if(n=!1,!t.steiner&&(dp(t,t.next)||Hi(t.prev,t,t.next)===0)){if(Gg(t),t=e=t.prev,t===t.next)break;n=!0}else t=t.next;while(n||t!==e);return e}function Vg(i,e,t,n,a,s,l){if(!i)return;!l&&s&&vB(i,n,a,s);let u=i;for(;i.prev!==i.next;){const d=i.prev,p=i.next;if(s?cB(i,n,a,s):lB(i)){e.push(d.i,i.i,p.i),Gg(i),i=p.next,u=p.next;continue}if(i=p,i===u){l?l===1?(i=uB($h(i),e),Vg(i,e,t,n,a,s,2)):l===2&&hB(i,e,t,n,a,s):Vg($h(i),e,t,n,a,s,1);break}}}function lB(i){const e=i.prev,t=i,n=i.next;if(Hi(e,t,n)>=0)return!1;const a=e.x,s=t.x,l=n.x,u=e.y,d=t.y,p=n.y,g=Math.min(a,s,l),y=Math.min(u,d,p),_=Math.max(a,s,l),b=Math.max(u,d,p);let x=n.next;for(;x!==e;){if(x.x>=g&&x.x<=_&&x.y>=y&&x.y<=b&&gg(a,u,s,d,l,p,x.x,x.y)&&Hi(x.prev,x,x.next)>=0)return!1;x=x.next}return!0}function cB(i,e,t,n){const a=i.prev,s=i,l=i.next;if(Hi(a,s,l)>=0)return!1;const u=a.x,d=s.x,p=l.x,g=a.y,y=s.y,_=l.y,b=Math.min(u,d,p),x=Math.min(g,y,_),T=Math.max(u,d,p),w=Math.max(g,y,_),S=sE(b,x,e,t,n),C=sE(T,w,e,t,n);let N=i.prevZ,O=i.nextZ;for(;N&&N.z>=S&&O&&O.z<=C;){if(N.x>=b&&N.x<=T&&N.y>=x&&N.y<=w&&N!==a&&N!==l&&gg(u,g,d,y,p,_,N.x,N.y)&&Hi(N.prev,N,N.next)>=0||(N=N.prevZ,O.x>=b&&O.x<=T&&O.y>=x&&O.y<=w&&O!==a&&O!==l&&gg(u,g,d,y,p,_,O.x,O.y)&&Hi(O.prev,O,O.next)>=0))return!1;O=O.nextZ}for(;N&&N.z>=S;){if(N.x>=b&&N.x<=T&&N.y>=x&&N.y<=w&&N!==a&&N!==l&&gg(u,g,d,y,p,_,N.x,N.y)&&Hi(N.prev,N,N.next)>=0)return!1;N=N.prevZ}for(;O&&O.z<=C;){if(O.x>=b&&O.x<=T&&O.y>=x&&O.y<=w&&O!==a&&O!==l&&gg(u,g,d,y,p,_,O.x,O.y)&&Hi(O.prev,O,O.next)>=0)return!1;O=O.nextZ}return!0}function uB(i,e){let t=i;do{const n=t.prev,a=t.next.next;!dp(n,a)&&WN(n,t,t.next,a)&&jg(n,a)&&jg(a,n)&&(e.push(n.i,t.i,a.i),Gg(t),Gg(t.next),t=i=a),t=t.next}while(t!==i);return $h(t)}function hB(i,e,t,n,a,s){let l=i;do{let u=l.next.next;for(;u!==l.prev;){if(l.i!==u.i&&bB(l,u)){let d=YN(l,u);l=$h(l,l.next),d=$h(d,d.next),Vg(l,e,t,n,a,s,0),Vg(d,e,t,n,a,s,0);return}u=u.next}l=l.next}while(l!==i)}function fB(i,e,t,n){const a=[];for(let s=0,l=e.length;s<l;s++){const u=e[s]*n,d=s<l-1?e[s+1]*n:i.length,p=qN(i,u,d,n,!1);p===p.next&&(p.steiner=!0),a.push(_B(p))}a.sort(dB);for(let s=0;s<a.length;s++)t=pB(a[s],t);return t}function dB(i,e){let t=i.x-e.x;if(t===0&&(t=i.y-e.y,t===0)){const n=(i.next.y-i.y)/(i.next.x-i.x),a=(e.next.y-e.y)/(e.next.x-e.x);t=n-a}return t}function pB(i,e){const t=mB(i,e);if(!t)return e;const n=YN(t,i);return $h(n,n.next),$h(t,t.next)}function mB(i,e){let t=e;const n=i.x,a=i.y;let s=-1/0,l;if(dp(i,t))return t;do{if(dp(i,t.next))return t.next;if(a<=t.y&&a>=t.next.y&&t.next.y!==t.y){const y=t.x+(a-t.y)*(t.next.x-t.x)/(t.next.y-t.y);if(y<=n&&y>s&&(s=y,l=t.x<t.next.x?t:t.next,y===n))return l}t=t.next}while(t!==e);if(!l)return null;const u=l,d=l.x,p=l.y;let g=1/0;t=l;do{if(n>=t.x&&t.x>=d&&n!==t.x&&XN(a<p?n:s,a,d,p,a<p?s:n,a,t.x,t.y)){const y=Math.abs(a-t.y)/(n-t.x);jg(t,i)&&(y<g||y===g&&(t.x>l.x||t.x===l.x&&gB(l,t)))&&(l=t,g=y)}t=t.next}while(t!==u);return l}function gB(i,e){return Hi(i.prev,i,e.prev)<0&&Hi(e.next,i,i.next)<0}function vB(i,e,t,n){let a=i;do a.z===0&&(a.z=sE(a.x,a.y,e,t,n)),a.prevZ=a.prev,a.nextZ=a.next,a=a.next;while(a!==i);a.prevZ.nextZ=null,a.prevZ=null,yB(a)}function yB(i){let e,t=1;do{let n=i,a;i=null;let s=null;for(e=0;n;){e++;let l=n,u=0;for(let p=0;p<t&&(u++,l=l.nextZ,!!l);p++);let d=t;for(;u>0||d>0&&l;)u!==0&&(d===0||!l||n.z<=l.z)?(a=n,n=n.nextZ,u--):(a=l,l=l.nextZ,d--),s?s.nextZ=a:i=a,a.prevZ=s,s=a;n=l}s.nextZ=null,t*=2}while(e>1);return i}function sE(i,e,t,n,a){return i=(i-t)*a|0,e=(e-n)*a|0,i=(i|i<<8)&16711935,i=(i|i<<4)&252645135,i=(i|i<<2)&858993459,i=(i|i<<1)&1431655765,e=(e|e<<8)&16711935,e=(e|e<<4)&252645135,e=(e|e<<2)&858993459,e=(e|e<<1)&1431655765,i|e<<1}function _B(i){let e=i,t=i;do(e.x<t.x||e.x===t.x&&e.y<t.y)&&(t=e),e=e.next;while(e!==i);return t}function XN(i,e,t,n,a,s,l,u){return(a-l)*(e-u)>=(i-l)*(s-u)&&(i-l)*(n-u)>=(t-l)*(e-u)&&(t-l)*(s-u)>=(a-l)*(n-u)}function gg(i,e,t,n,a,s,l,u){return!(i===l&&e===u)&&XN(i,e,t,n,a,s,l,u)}function bB(i,e){return i.next.i!==e.i&&i.prev.i!==e.i&&!xB(i,e)&&(jg(i,e)&&jg(e,i)&&SB(i,e)&&(Hi(i.prev,i,e.prev)||Hi(i,e.prev,e))||dp(i,e)&&Hi(i.prev,i,i.next)>0&&Hi(e.prev,e,e.next)>0)}function Hi(i,e,t){return(e.y-i.y)*(t.x-e.x)-(e.x-i.x)*(t.y-e.y)}function dp(i,e){return i.x===e.x&&i.y===e.y}function WN(i,e,t,n){const a=Ay(Hi(i,e,t)),s=Ay(Hi(i,e,n)),l=Ay(Hi(t,n,i)),u=Ay(Hi(t,n,e));return!!(a!==s&&l!==u||a===0&&Ty(i,t,e)||s===0&&Ty(i,n,e)||l===0&&Ty(t,i,n)||u===0&&Ty(t,e,n))}function Ty(i,e,t){return e.x<=Math.max(i.x,t.x)&&e.x>=Math.min(i.x,t.x)&&e.y<=Math.max(i.y,t.y)&&e.y>=Math.min(i.y,t.y)}function Ay(i){return i>0?1:i<0?-1:0}function xB(i,e){let t=i;do{if(t.i!==i.i&&t.next.i!==i.i&&t.i!==e.i&&t.next.i!==e.i&&WN(t,t.next,i,e))return!0;t=t.next}while(t!==i);return!1}function jg(i,e){return Hi(i.prev,i,i.next)<0?Hi(i,e,i.next)>=0&&Hi(i,i.prev,e)>=0:Hi(i,e,i.prev)<0||Hi(i,i.next,e)<0}function SB(i,e){let t=i,n=!1;const a=(i.x+e.x)/2,s=(i.y+e.y)/2;do t.y>s!=t.next.y>s&&t.next.y!==t.y&&a<(t.next.x-t.x)*(s-t.y)/(t.next.y-t.y)+t.x&&(n=!n),t=t.next;while(t!==i);return n}function YN(i,e){const t=oE(i.i,i.x,i.y),n=oE(e.i,e.x,e.y),a=i.next,s=e.prev;return i.next=e,e.prev=i,t.next=a,a.prev=t,n.next=t,t.prev=n,s.next=n,n.prev=s,n}function YA(i,e,t,n){const a=oE(i,e,t);return n?(a.next=n.next,a.prev=n,n.next.prev=a,n.next=a):(a.prev=a,a.next=a),a}function Gg(i){i.next.prev=i.prev,i.prev.next=i.next,i.prevZ&&(i.prevZ.nextZ=i.nextZ),i.nextZ&&(i.nextZ.prevZ=i.prevZ)}function oE(i,e,t){return{i,x:e,y:t,prev:null,next:null,z:0,prevZ:null,nextZ:null,steiner:!1}}function EB(i,e,t,n){let a=0;for(let s=e,l=t-n;s<t;s+=n)a+=(i[l]-i[s])*(i[s+1]+i[l+1]),l=s;return a}class MB{static triangulate(e,t,n=2){return oB(e,t,n)}}class Ao{static area(e){const t=e.length;let n=0;for(let a=t-1,s=0;s<t;a=s++)n+=e[a].x*e[s].y-e[s].x*e[a].y;return n*.5}static isClockWise(e){return Ao.area(e)<0}static triangulateShape(e,t){const n=[],a=[],s=[];ZA(e),KA(n,e);let l=e.length;t.forEach(ZA);for(let d=0;d<t.length;d++)a.push(l),l+=t[d].length,KA(n,t[d]);const u=MB.triangulate(n,a);for(let d=0;d<u.length;d+=3)s.push(u.slice(d,d+3));return s}}function ZA(i){const e=i.length;e>2&&i[e-1].equals(i[0])&&i.pop()}function KA(i,e){for(let t=0;t<e.length;t++)i.push(e[t].x),i.push(e[t].y)}class Lb extends mn{constructor(e=new Zh([new Ke(.5,.5),new Ke(-.5,.5),new Ke(-.5,-.5),new Ke(.5,-.5)]),t={}){super(),this.type="ExtrudeGeometry",this.parameters={shapes:e,options:t},e=Array.isArray(e)?e:[e];const n=this,a=[],s=[];for(let u=0,d=e.length;u<d;u++){const p=e[u];l(p)}this.setAttribute("position",new Ft(a,3)),this.setAttribute("uv",new Ft(s,2)),this.computeVertexNormals();function l(u){const d=[],p=t.curveSegments!==void 0?t.curveSegments:12,g=t.steps!==void 0?t.steps:1,y=t.depth!==void 0?t.depth:1;let _=t.bevelEnabled!==void 0?t.bevelEnabled:!0,b=t.bevelThickness!==void 0?t.bevelThickness:.2,x=t.bevelSize!==void 0?t.bevelSize:b-.1,T=t.bevelOffset!==void 0?t.bevelOffset:0,w=t.bevelSegments!==void 0?t.bevelSegments:3;const S=t.extrudePath,C=t.UVGenerator!==void 0?t.UVGenerator:wB;let N,O=!1,P,U,z,H;if(S){N=S.getSpacedPoints(g),O=!0,_=!1;const xe=S.isCatmullRomCurve3?S.closed:!1;P=S.computeFrenetFrames(g,xe),U=new ee,z=new ee,H=new ee}_||(w=0,b=0,x=0,T=0);const D=u.extractPoints(p);let L=D.shape;const j=D.holes;if(!Ao.isClockWise(L)){L=L.reverse();for(let xe=0,ze=j.length;xe<ze;xe++){const je=j[xe];Ao.isClockWise(je)&&(j[xe]=je.reverse())}}function X(xe){const je=10000000000000001e-36;let ot=xe[0];for(let ie=1;ie<=xe.length;ie++){const zt=ie%xe.length,mt=xe[zt],Bt=mt.x-ot.x,gt=mt.y-ot.y,te=Bt*Bt+gt*gt,B=Math.max(Math.abs(mt.x),Math.abs(mt.y),Math.abs(ot.x),Math.abs(ot.y)),se=je*B*B;if(te<=se){xe.splice(zt,1),ie--;continue}ot=mt}}X(L),j.forEach(X);const K=j.length,le=L;for(let xe=0;xe<K;xe++){const ze=j[xe];L=L.concat(ze)}function k(xe,ze,je){return ze||Qt("ExtrudeGeometry: vec does not exist"),xe.clone().addScaledVector(ze,je)}const Z=L.length;function ne(xe,ze,je){let ot,ie,zt;const mt=xe.x-ze.x,Bt=xe.y-ze.y,gt=je.x-xe.x,te=je.y-xe.y,B=mt*mt+Bt*Bt,se=mt*te-Bt*gt;if(Math.abs(se)>Number.EPSILON){const Re=Math.sqrt(B),ke=Math.sqrt(gt*gt+te*te),Oe=ze.x-Bt/Re,Tt=ze.y+mt/Re,dt=je.x-te/ke,Nt=je.y+gt/ke,jt=((dt-Oe)*te-(Nt-Tt)*gt)/(mt*te-Bt*gt);ot=Oe+mt*jt-xe.x,ie=Tt+Bt*jt-xe.y;const Xe=ot*ot+ie*ie;if(Xe<=2)return new Ke(ot,ie);zt=Math.sqrt(Xe/2)}else{let Re=!1;mt>Number.EPSILON?gt>Number.EPSILON&&(Re=!0):mt<-Number.EPSILON?gt<-Number.EPSILON&&(Re=!0):Math.sign(Bt)===Math.sign(te)&&(Re=!0),Re?(ot=-Bt,ie=mt,zt=Math.sqrt(B)):(ot=mt,ie=Bt,zt=Math.sqrt(B/2))}return new Ke(ot/zt,ie/zt)}const pe=[];for(let xe=0,ze=le.length,je=ze-1,ot=xe+1;xe<ze;xe++,je++,ot++)je===ze&&(je=0),ot===ze&&(ot=0),pe[xe]=ne(le[xe],le[je],le[ot]);const ge=[];let J,ce=pe.concat();for(let xe=0,ze=K;xe<ze;xe++){const je=j[xe];J=[];for(let ot=0,ie=je.length,zt=ie-1,mt=ot+1;ot<ie;ot++,zt++,mt++)zt===ie&&(zt=0),mt===ie&&(mt=0),J[ot]=ne(je[ot],je[zt],je[mt]);ge.push(J),ce=ce.concat(J)}let Se;if(w===0)Se=Ao.triangulateShape(le,j);else{const xe=[],ze=[];for(let je=0;je<w;je++){const ot=je/w,ie=b*Math.cos(ot*Math.PI/2),zt=x*Math.sin(ot*Math.PI/2)+T;for(let mt=0,Bt=le.length;mt<Bt;mt++){const gt=k(le[mt],pe[mt],zt);yt(gt.x,gt.y,-ie),ot===0&&xe.push(gt)}for(let mt=0,Bt=K;mt<Bt;mt++){const gt=j[mt];J=ge[mt];const te=[];for(let B=0,se=gt.length;B<se;B++){const Re=k(gt[B],J[B],zt);yt(Re.x,Re.y,-ie),ot===0&&te.push(Re)}ot===0&&ze.push(te)}}Se=Ao.triangulateShape(xe,ze)}const Le=Se.length,nt=x+T;for(let xe=0;xe<Z;xe++){const ze=_?k(L[xe],ce[xe],nt):L[xe];O?(z.copy(P.normals[0]).multiplyScalar(ze.x),U.copy(P.binormals[0]).multiplyScalar(ze.y),H.copy(N[0]).add(z).add(U),yt(H.x,H.y,H.z)):yt(ze.x,ze.y,0)}for(let xe=1;xe<=g;xe++)for(let ze=0;ze<Z;ze++){const je=_?k(L[ze],ce[ze],nt):L[ze];O?(z.copy(P.normals[xe]).multiplyScalar(je.x),U.copy(P.binormals[xe]).multiplyScalar(je.y),H.copy(N[xe]).add(z).add(U),yt(H.x,H.y,H.z)):yt(je.x,je.y,y/g*xe)}for(let xe=w-1;xe>=0;xe--){const ze=xe/w,je=b*Math.cos(ze*Math.PI/2),ot=x*Math.sin(ze*Math.PI/2)+T;for(let ie=0,zt=le.length;ie<zt;ie++){const mt=k(le[ie],pe[ie],ot);yt(mt.x,mt.y,y+je)}for(let ie=0,zt=j.length;ie<zt;ie++){const mt=j[ie];J=ge[ie];for(let Bt=0,gt=mt.length;Bt<gt;Bt++){const te=k(mt[Bt],J[Bt],ot);O?yt(te.x,te.y+N[g-1].y,N[g-1].x+je):yt(te.x,te.y,y+je)}}}ve(),Ce();function ve(){const xe=a.length/3;if(_){let ze=0,je=Z*ze;for(let ot=0;ot<Le;ot++){const ie=Se[ot];St(ie[2]+je,ie[1]+je,ie[0]+je)}ze=g+w*2,je=Z*ze;for(let ot=0;ot<Le;ot++){const ie=Se[ot];St(ie[0]+je,ie[1]+je,ie[2]+je)}}else{for(let ze=0;ze<Le;ze++){const je=Se[ze];St(je[2],je[1],je[0])}for(let ze=0;ze<Le;ze++){const je=Se[ze];St(je[0]+Z*g,je[1]+Z*g,je[2]+Z*g)}}n.addGroup(xe,a.length/3-xe,0)}function Ce(){const xe=a.length/3;let ze=0;Je(le,ze),ze+=le.length;for(let je=0,ot=j.length;je<ot;je++){const ie=j[je];Je(ie,ze),ze+=ie.length}n.addGroup(xe,a.length/3-xe,1)}function Je(xe,ze){let je=xe.length;for(;--je>=0;){const ot=je;let ie=je-1;ie<0&&(ie=xe.length-1);for(let zt=0,mt=g+w*2;zt<mt;zt++){const Bt=Z*zt,gt=Z*(zt+1),te=ze+ot+Bt,B=ze+ie+Bt,se=ze+ie+gt,Re=ze+ot+gt;$t(te,B,se,Re)}}}function yt(xe,ze,je){d.push(xe),d.push(ze),d.push(je)}function St(xe,ze,je){nn(xe),nn(ze),nn(je);const ot=a.length/3,ie=C.generateTopUV(n,a,ot-3,ot-2,ot-1);Vt(ie[0]),Vt(ie[1]),Vt(ie[2])}function $t(xe,ze,je,ot){nn(xe),nn(ze),nn(ot),nn(ze),nn(je),nn(ot);const ie=a.length/3,zt=C.generateSideWallUV(n,a,ie-6,ie-3,ie-2,ie-1);Vt(zt[0]),Vt(zt[1]),Vt(zt[3]),Vt(zt[1]),Vt(zt[2]),Vt(zt[3])}function nn(xe){a.push(d[xe*3+0]),a.push(d[xe*3+1]),a.push(d[xe*3+2])}function Vt(xe){s.push(xe.x),s.push(xe.y)}}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON(),t=this.parameters.shapes,n=this.parameters.options;return TB(t,n,e)}static fromJSON(e,t){const n=[];for(let s=0,l=e.shapes.length;s<l;s++){const u=t[e.shapes[s]];n.push(u)}const a=e.options.extrudePath;return a!==void 0&&(e.options.extrudePath=new $_[a.type]().fromJSON(a)),new Lb(n,e.options)}}const wB={generateTopUV:function(i,e,t,n,a){const s=e[t*3],l=e[t*3+1],u=e[n*3],d=e[n*3+1],p=e[a*3],g=e[a*3+1];return[new Ke(s,l),new Ke(u,d),new Ke(p,g)]},generateSideWallUV:function(i,e,t,n,a,s){const l=e[t*3],u=e[t*3+1],d=e[t*3+2],p=e[n*3],g=e[n*3+1],y=e[n*3+2],_=e[a*3],b=e[a*3+1],x=e[a*3+2],T=e[s*3],w=e[s*3+1],S=e[s*3+2];return Math.abs(u-g)<Math.abs(l-p)?[new Ke(l,1-d),new Ke(p,1-y),new Ke(_,1-x),new Ke(T,1-S)]:[new Ke(u,1-d),new Ke(g,1-y),new Ke(b,1-x),new Ke(w,1-S)]}};function TB(i,e,t){if(t.shapes=[],Array.isArray(i))for(let n=0,a=i.length;n<a;n++){const s=i[n];t.shapes.push(s.uuid)}else t.shapes.push(i.uuid);return t.options=Object.assign({},e),e.extrudePath!==void 0&&(t.options.extrudePath=e.extrudePath.toJSON()),t}class lv extends Eu{constructor(e=1,t=0){const n=(1+Math.sqrt(5))/2,a=[-1,n,0,1,n,0,-1,-n,0,1,-n,0,0,-1,n,0,1,n,0,-1,-n,0,1,-n,n,0,-1,n,0,1,-n,0,-1,-n,0,1],s=[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1];super(a,s,e,t),this.type="IcosahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new lv(e.radius,e.detail)}}class Ib extends mn{constructor(e=[new Ke(0,-.5),new Ke(.5,0),new Ke(0,.5)],t=12,n=0,a=Math.PI*2){super(),this.type="LatheGeometry",this.parameters={points:e,segments:t,phiStart:n,phiLength:a},t=Math.floor(t),a=hn(a,0,Math.PI*2);const s=[],l=[],u=[],d=[],p=[],g=1/t,y=new ee,_=new Ke,b=new ee,x=new ee,T=new ee;let w=0,S=0;for(let C=0;C<=e.length-1;C++)switch(C){case 0:w=e[C+1].x-e[C].x,S=e[C+1].y-e[C].y,b.x=S*1,b.y=-w,b.z=S*0,T.copy(b),b.normalize(),d.push(b.x,b.y,b.z);break;case e.length-1:d.push(T.x,T.y,T.z);break;default:w=e[C+1].x-e[C].x,S=e[C+1].y-e[C].y,b.x=S*1,b.y=-w,b.z=S*0,x.copy(b),b.x+=T.x,b.y+=T.y,b.z+=T.z,b.normalize(),d.push(b.x,b.y,b.z),T.copy(x)}for(let C=0;C<=t;C++){const N=n+C*g*a,O=Math.sin(N),P=Math.cos(N);for(let U=0;U<=e.length-1;U++){y.x=e[U].x*O,y.y=e[U].y,y.z=e[U].x*P,l.push(y.x,y.y,y.z),_.x=C/t,_.y=U/(e.length-1),u.push(_.x,_.y);const z=d[3*U+0]*O,H=d[3*U+1],D=d[3*U+0]*P;p.push(z,H,D)}}for(let C=0;C<t;C++)for(let N=0;N<e.length-1;N++){const O=N+C*e.length,P=O,U=O+e.length,z=O+e.length+1,H=O+1;s.push(P,U,H),s.push(z,H,U)}this.setIndex(s),this.setAttribute("position",new Ft(l,3)),this.setAttribute("uv",new Ft(u,2)),this.setAttribute("normal",new Ft(p,3))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Ib(e.points,e.segments,e.phiStart,e.phiLength)}}class cv extends Eu{constructor(e=1,t=0){const n=[1,0,0,-1,0,0,0,1,0,0,-1,0,0,0,1,0,0,-1],a=[0,2,4,0,4,3,0,3,5,0,5,2,1,2,5,1,5,3,1,3,4,1,4,2];super(n,a,e,t),this.type="OctahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new cv(e.radius,e.detail)}}class gc extends mn{constructor(e=1,t=1,n=1,a=1){super(),this.type="PlaneGeometry",this.parameters={width:e,height:t,widthSegments:n,heightSegments:a};const s=e/2,l=t/2,u=Math.floor(n),d=Math.floor(a),p=u+1,g=d+1,y=e/u,_=t/d,b=[],x=[],T=[],w=[];for(let S=0;S<g;S++){const C=S*_-l;for(let N=0;N<p;N++){const O=N*y-s;x.push(O,-C,0),T.push(0,0,1),w.push(N/u),w.push(1-S/d)}}for(let S=0;S<d;S++)for(let C=0;C<u;C++){const N=C+p*S,O=C+p*(S+1),P=C+1+p*(S+1),U=C+1+p*S;b.push(N,O,U),b.push(O,P,U)}this.setIndex(b),this.setAttribute("position",new Ft(x,3)),this.setAttribute("normal",new Ft(T,3)),this.setAttribute("uv",new Ft(w,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new gc(e.width,e.height,e.widthSegments,e.heightSegments)}}class Pb extends mn{constructor(e=.5,t=1,n=32,a=1,s=0,l=Math.PI*2){super(),this.type="RingGeometry",this.parameters={innerRadius:e,outerRadius:t,thetaSegments:n,phiSegments:a,thetaStart:s,thetaLength:l},n=Math.max(3,n),a=Math.max(1,a);const u=[],d=[],p=[],g=[];let y=e;const _=(t-e)/a,b=new ee,x=new Ke;for(let T=0;T<=a;T++){for(let w=0;w<=n;w++){const S=s+w/n*l;b.x=y*Math.cos(S),b.y=y*Math.sin(S),d.push(b.x,b.y,b.z),p.push(0,0,1),x.x=(b.x/t+1)/2,x.y=(b.y/t+1)/2,g.push(x.x,x.y)}y+=_}for(let T=0;T<a;T++){const w=T*(n+1);for(let S=0;S<n;S++){const C=S+w,N=C,O=C+n+1,P=C+n+2,U=C+1;u.push(N,O,U),u.push(O,P,U)}}this.setIndex(u),this.setAttribute("position",new Ft(d,3)),this.setAttribute("normal",new Ft(p,3)),this.setAttribute("uv",new Ft(g,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Pb(e.innerRadius,e.outerRadius,e.thetaSegments,e.phiSegments,e.thetaStart,e.thetaLength)}}class zb extends mn{constructor(e=new Zh([new Ke(0,.5),new Ke(-.5,-.5),new Ke(.5,-.5)]),t=12){super(),this.type="ShapeGeometry",this.parameters={shapes:e,curveSegments:t};const n=[],a=[],s=[],l=[];let u=0,d=0;if(Array.isArray(e)===!1)p(e);else for(let g=0;g<e.length;g++)p(e[g]),this.addGroup(u,d,g),u+=d,d=0;this.setIndex(n),this.setAttribute("position",new Ft(a,3)),this.setAttribute("normal",new Ft(s,3)),this.setAttribute("uv",new Ft(l,2));function p(g){const y=a.length/3,_=g.extractPoints(t);let b=_.shape;const x=_.holes;Ao.isClockWise(b)===!1&&(b=b.reverse());for(let w=0,S=x.length;w<S;w++){const C=x[w];Ao.isClockWise(C)===!0&&(x[w]=C.reverse())}const T=Ao.triangulateShape(b,x);for(let w=0,S=x.length;w<S;w++){const C=x[w];b=b.concat(C)}for(let w=0,S=b.length;w<S;w++){const C=b[w];a.push(C.x,C.y,0),s.push(0,0,1),l.push(C.x,C.y)}for(let w=0,S=T.length;w<S;w++){const C=T[w],N=C[0]+y,O=C[1]+y,P=C[2]+y;n.push(N,O,P),d+=3}}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON(),t=this.parameters.shapes;return AB(t,e)}static fromJSON(e,t){const n=[];for(let a=0,s=e.shapes.length;a<s;a++){const l=t[e.shapes[a]];n.push(l)}return new zb(n,e.curveSegments)}}function AB(i,e){if(e.shapes=[],Array.isArray(i))for(let t=0,n=i.length;t<n;t++){const a=i[t];e.shapes.push(a.uuid)}else e.shapes.push(i.uuid);return e}class uv extends mn{constructor(e=1,t=32,n=16,a=0,s=Math.PI*2,l=0,u=Math.PI){super(),this.type="SphereGeometry",this.parameters={radius:e,widthSegments:t,heightSegments:n,phiStart:a,phiLength:s,thetaStart:l,thetaLength:u},t=Math.max(3,Math.floor(t)),n=Math.max(2,Math.floor(n));const d=Math.min(l+u,Math.PI);let p=0;const g=[],y=new ee,_=new ee,b=[],x=[],T=[],w=[];for(let S=0;S<=n;S++){const C=[],N=S/n;let O=0;S===0&&l===0?O=.5/t:S===n&&d===Math.PI&&(O=-.5/t);for(let P=0;P<=t;P++){const U=P/t;y.x=-e*Math.cos(a+U*s)*Math.sin(l+N*u),y.y=e*Math.cos(l+N*u),y.z=e*Math.sin(a+U*s)*Math.sin(l+N*u),x.push(y.x,y.y,y.z),_.copy(y).normalize(),T.push(_.x,_.y,_.z),w.push(U+O,1-N),C.push(p++)}g.push(C)}for(let S=0;S<n;S++)for(let C=0;C<t;C++){const N=g[S][C+1],O=g[S][C],P=g[S+1][C],U=g[S+1][C+1];(S!==0||l>0)&&b.push(N,O,U),(S!==n-1||d<Math.PI)&&b.push(O,P,U)}this.setIndex(b),this.setAttribute("position",new Ft(x,3)),this.setAttribute("normal",new Ft(T,3)),this.setAttribute("uv",new Ft(w,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new uv(e.radius,e.widthSegments,e.heightSegments,e.phiStart,e.phiLength,e.thetaStart,e.thetaLength)}}class Bb extends Eu{constructor(e=1,t=0){const n=[1,1,1,-1,-1,1,-1,1,-1,1,-1,-1],a=[2,1,0,0,3,2,1,3,0,2,3,1];super(n,a,e,t),this.type="TetrahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new Bb(e.radius,e.detail)}}class Fb extends mn{constructor(e=1,t=.4,n=12,a=48,s=Math.PI*2){super(),this.type="TorusGeometry",this.parameters={radius:e,tube:t,radialSegments:n,tubularSegments:a,arc:s},n=Math.floor(n),a=Math.floor(a);const l=[],u=[],d=[],p=[],g=new ee,y=new ee,_=new ee;for(let b=0;b<=n;b++)for(let x=0;x<=a;x++){const T=x/a*s,w=b/n*Math.PI*2;y.x=(e+t*Math.cos(w))*Math.cos(T),y.y=(e+t*Math.cos(w))*Math.sin(T),y.z=t*Math.sin(w),u.push(y.x,y.y,y.z),g.x=e*Math.cos(T),g.y=e*Math.sin(T),_.subVectors(y,g).normalize(),d.push(_.x,_.y,_.z),p.push(x/a),p.push(b/n)}for(let b=1;b<=n;b++)for(let x=1;x<=a;x++){const T=(a+1)*b+x-1,w=(a+1)*(b-1)+x-1,S=(a+1)*(b-1)+x,C=(a+1)*b+x;l.push(T,w,C),l.push(w,S,C)}this.setIndex(l),this.setAttribute("position",new Ft(u,3)),this.setAttribute("normal",new Ft(d,3)),this.setAttribute("uv",new Ft(p,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Fb(e.radius,e.tube,e.radialSegments,e.tubularSegments,e.arc)}}class kb extends mn{constructor(e=1,t=.4,n=64,a=8,s=2,l=3){super(),this.type="TorusKnotGeometry",this.parameters={radius:e,tube:t,tubularSegments:n,radialSegments:a,p:s,q:l},n=Math.floor(n),a=Math.floor(a);const u=[],d=[],p=[],g=[],y=new ee,_=new ee,b=new ee,x=new ee,T=new ee,w=new ee,S=new ee;for(let N=0;N<=n;++N){const O=N/n*s*Math.PI*2;C(O,s,l,e,b),C(O+.01,s,l,e,x),w.subVectors(x,b),S.addVectors(x,b),T.crossVectors(w,S),S.crossVectors(T,w),T.normalize(),S.normalize();for(let P=0;P<=a;++P){const U=P/a*Math.PI*2,z=-t*Math.cos(U),H=t*Math.sin(U);y.x=b.x+(z*S.x+H*T.x),y.y=b.y+(z*S.y+H*T.y),y.z=b.z+(z*S.z+H*T.z),d.push(y.x,y.y,y.z),_.subVectors(y,b).normalize(),p.push(_.x,_.y,_.z),g.push(N/n),g.push(P/a)}}for(let N=1;N<=n;N++)for(let O=1;O<=a;O++){const P=(a+1)*(N-1)+(O-1),U=(a+1)*N+(O-1),z=(a+1)*N+O,H=(a+1)*(N-1)+O;u.push(P,U,H),u.push(U,z,H)}this.setIndex(u),this.setAttribute("position",new Ft(d,3)),this.setAttribute("normal",new Ft(p,3)),this.setAttribute("uv",new Ft(g,2));function C(N,O,P,U,z){const H=Math.cos(N),D=Math.sin(N),L=P/O*N,j=Math.cos(L);z.x=U*(2+j)*.5*H,z.y=U*(2+j)*D*.5,z.z=U*Math.sin(L)*.5}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new kb(e.radius,e.tube,e.tubularSegments,e.radialSegments,e.p,e.q)}}class Hb extends mn{constructor(e=new oM(new ee(-1,-1,0),new ee(-1,1,0),new ee(1,1,0)),t=64,n=1,a=8,s=!1){super(),this.type="TubeGeometry",this.parameters={path:e,tubularSegments:t,radius:n,radialSegments:a,closed:s};const l=e.computeFrenetFrames(t,s);this.tangents=l.tangents,this.normals=l.normals,this.binormals=l.binormals;const u=new ee,d=new ee,p=new Ke;let g=new ee;const y=[],_=[],b=[],x=[];T(),this.setIndex(x),this.setAttribute("position",new Ft(y,3)),this.setAttribute("normal",new Ft(_,3)),this.setAttribute("uv",new Ft(b,2));function T(){for(let N=0;N<t;N++)w(N);w(s===!1?t:0),C(),S()}function w(N){g=e.getPointAt(N/t,g);const O=l.normals[N],P=l.binormals[N];for(let U=0;U<=a;U++){const z=U/a*Math.PI*2,H=Math.sin(z),D=-Math.cos(z);d.x=D*O.x+H*P.x,d.y=D*O.y+H*P.y,d.z=D*O.z+H*P.z,d.normalize(),_.push(d.x,d.y,d.z),u.x=g.x+n*d.x,u.y=g.y+n*d.y,u.z=g.z+n*d.z,y.push(u.x,u.y,u.z)}}function S(){for(let N=1;N<=t;N++)for(let O=1;O<=a;O++){const P=(a+1)*(N-1)+(O-1),U=(a+1)*N+(O-1),z=(a+1)*N+O,H=(a+1)*(N-1)+O;x.push(P,U,H),x.push(U,z,H)}}function C(){for(let N=0;N<=t;N++)for(let O=0;O<=a;O++)p.x=N/t,p.y=O/a,b.push(p.x,p.y)}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON();return e.path=this.parameters.path.toJSON(),e}static fromJSON(e){return new Hb(new $_[e.path.type]().fromJSON(e.path),e.tubularSegments,e.radius,e.radialSegments,e.closed)}}class ZN extends mn{constructor(e=null){if(super(),this.type="WireframeGeometry",this.parameters={geometry:e},e!==null){const t=[],n=new Set,a=new ee,s=new ee;if(e.index!==null){const l=e.attributes.position,u=e.index;let d=e.groups;d.length===0&&(d=[{start:0,count:u.count,materialIndex:0}]);for(let p=0,g=d.length;p<g;++p){const y=d[p],_=y.start,b=y.count;for(let x=_,T=_+b;x<T;x+=3)for(let w=0;w<3;w++){const S=u.getX(x+w),C=u.getX(x+(w+1)%3);a.fromBufferAttribute(l,S),s.fromBufferAttribute(l,C),JA(a,s,n)===!0&&(t.push(a.x,a.y,a.z),t.push(s.x,s.y,s.z))}}}else{const l=e.attributes.position;for(let u=0,d=l.count/3;u<d;u++)for(let p=0;p<3;p++){const g=3*u+p,y=3*u+(p+1)%3;a.fromBufferAttribute(l,g),s.fromBufferAttribute(l,y),JA(a,s,n)===!0&&(t.push(a.x,a.y,a.z),t.push(s.x,s.y,s.z))}}this.setAttribute("position",new Ft(t,3))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}}function JA(i,e,t){const n=`${i.x},${i.y},${i.z}-${e.x},${e.y},${e.z}`,a=`${e.x},${e.y},${e.z}-${i.x},${i.y},${i.z}`;return t.has(n)===!0||t.has(a)===!0?!1:(t.add(n),t.add(a),!0)}var QA=Object.freeze({__proto__:null,BoxGeometry:sf,CapsuleGeometry:Nb,CircleGeometry:Ob,ConeGeometry:ov,CylinderGeometry:sv,DodecahedronGeometry:Db,EdgesGeometry:FN,ExtrudeGeometry:Lb,IcosahedronGeometry:lv,LatheGeometry:Ib,OctahedronGeometry:cv,PlaneGeometry:gc,PolyhedronGeometry:Eu,RingGeometry:Pb,ShapeGeometry:zb,SphereGeometry:uv,TetrahedronGeometry:Bb,TorusGeometry:Fb,TorusKnotGeometry:kb,TubeGeometry:Hb,WireframeGeometry:ZN});class KN extends vr{constructor(e){super(),this.isShadowMaterial=!0,this.type="ShadowMaterial",this.color=new Ut(0),this.transparent=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.fog=e.fog,this}}class cM extends ja{constructor(e){super(e),this.isRawShaderMaterial=!0,this.type="RawShaderMaterial"}}class uM extends vr{constructor(e){super(),this.isMeshStandardMaterial=!0,this.type="MeshStandardMaterial",this.defines={STANDARD:""},this.color=new Ut(16777215),this.roughness=1,this.metalness=0,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Ut(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Su,this.normalScale=new Ke(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new Ss,this.envMapIntensity=1,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.defines={STANDARD:""},this.color.copy(e.color),this.roughness=e.roughness,this.metalness=e.metalness,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.roughnessMap=e.roughnessMap,this.metalnessMap=e.metalnessMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.envMapIntensity=e.envMapIntensity,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class JN extends uM{constructor(e){super(),this.isMeshPhysicalMaterial=!0,this.defines={STANDARD:"",PHYSICAL:""},this.type="MeshPhysicalMaterial",this.anisotropyRotation=0,this.anisotropyMap=null,this.clearcoatMap=null,this.clearcoatRoughness=0,this.clearcoatRoughnessMap=null,this.clearcoatNormalScale=new Ke(1,1),this.clearcoatNormalMap=null,this.ior=1.5,Object.defineProperty(this,"reflectivity",{get:function(){return hn(2.5*(this.ior-1)/(this.ior+1),0,1)},set:function(t){this.ior=(1+.4*t)/(1-.4*t)}}),this.iridescenceMap=null,this.iridescenceIOR=1.3,this.iridescenceThicknessRange=[100,400],this.iridescenceThicknessMap=null,this.sheenColor=new Ut(0),this.sheenColorMap=null,this.sheenRoughness=1,this.sheenRoughnessMap=null,this.transmissionMap=null,this.thickness=0,this.thicknessMap=null,this.attenuationDistance=1/0,this.attenuationColor=new Ut(1,1,1),this.specularIntensity=1,this.specularIntensityMap=null,this.specularColor=new Ut(1,1,1),this.specularColorMap=null,this._anisotropy=0,this._clearcoat=0,this._dispersion=0,this._iridescence=0,this._sheen=0,this._transmission=0,this.setValues(e)}get anisotropy(){return this._anisotropy}set anisotropy(e){this._anisotropy>0!=e>0&&this.version++,this._anisotropy=e}get clearcoat(){return this._clearcoat}set clearcoat(e){this._clearcoat>0!=e>0&&this.version++,this._clearcoat=e}get iridescence(){return this._iridescence}set iridescence(e){this._iridescence>0!=e>0&&this.version++,this._iridescence=e}get dispersion(){return this._dispersion}set dispersion(e){this._dispersion>0!=e>0&&this.version++,this._dispersion=e}get sheen(){return this._sheen}set sheen(e){this._sheen>0!=e>0&&this.version++,this._sheen=e}get transmission(){return this._transmission}set transmission(e){this._transmission>0!=e>0&&this.version++,this._transmission=e}copy(e){return super.copy(e),this.defines={STANDARD:"",PHYSICAL:""},this.anisotropy=e.anisotropy,this.anisotropyRotation=e.anisotropyRotation,this.anisotropyMap=e.anisotropyMap,this.clearcoat=e.clearcoat,this.clearcoatMap=e.clearcoatMap,this.clearcoatRoughness=e.clearcoatRoughness,this.clearcoatRoughnessMap=e.clearcoatRoughnessMap,this.clearcoatNormalMap=e.clearcoatNormalMap,this.clearcoatNormalScale.copy(e.clearcoatNormalScale),this.dispersion=e.dispersion,this.ior=e.ior,this.iridescence=e.iridescence,this.iridescenceMap=e.iridescenceMap,this.iridescenceIOR=e.iridescenceIOR,this.iridescenceThicknessRange=[...e.iridescenceThicknessRange],this.iridescenceThicknessMap=e.iridescenceThicknessMap,this.sheen=e.sheen,this.sheenColor.copy(e.sheenColor),this.sheenColorMap=e.sheenColorMap,this.sheenRoughness=e.sheenRoughness,this.sheenRoughnessMap=e.sheenRoughnessMap,this.transmission=e.transmission,this.transmissionMap=e.transmissionMap,this.thickness=e.thickness,this.thicknessMap=e.thicknessMap,this.attenuationDistance=e.attenuationDistance,this.attenuationColor.copy(e.attenuationColor),this.specularIntensity=e.specularIntensity,this.specularIntensityMap=e.specularIntensityMap,this.specularColor.copy(e.specularColor),this.specularColorMap=e.specularColorMap,this}}class QN extends vr{constructor(e){super(),this.isMeshPhongMaterial=!0,this.type="MeshPhongMaterial",this.color=new Ut(16777215),this.specular=new Ut(1118481),this.shininess=30,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Ut(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Su,this.normalScale=new Ke(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new Ss,this.combine=ev,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.specular.copy(e.specular),this.shininess=e.shininess,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class $N extends vr{constructor(e){super(),this.isMeshToonMaterial=!0,this.defines={TOON:""},this.type="MeshToonMaterial",this.color=new Ut(16777215),this.map=null,this.gradientMap=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Ut(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Su,this.normalScale=new Ke(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.gradientMap=e.gradientMap,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}class eO extends vr{constructor(e){super(),this.isMeshNormalMaterial=!0,this.type="MeshNormalMaterial",this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Su,this.normalScale=new Ke(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.flatShading=!1,this.setValues(e)}copy(e){return super.copy(e),this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.flatShading=e.flatShading,this}}class hM extends vr{constructor(e){super(),this.isMeshLambertMaterial=!0,this.type="MeshLambertMaterial",this.color=new Ut(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Ut(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Su,this.normalScale=new Ke(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new Ss,this.combine=ev,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class Vb extends vr{constructor(e){super(),this.isMeshDepthMaterial=!0,this.type="MeshDepthMaterial",this.depthPacking=pN,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.setValues(e)}copy(e){return super.copy(e),this.depthPacking=e.depthPacking,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this}}class fM extends vr{constructor(e){super(),this.isMeshDistanceMaterial=!0,this.type="MeshDistanceMaterial",this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.setValues(e)}copy(e){return super.copy(e),this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this}}class tO extends vr{constructor(e){super(),this.isMeshMatcapMaterial=!0,this.defines={MATCAP:""},this.type="MeshMatcapMaterial",this.color=new Ut(16777215),this.matcap=null,this.map=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Su,this.normalScale=new Ke(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.wireframe=!1,this.wireframeLinewidth=1,this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.defines={MATCAP:""},this.color.copy(e.color),this.matcap=e.matcap,this.map=e.map,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.flatShading=e.flatShading,this.fog=e.fog,this}}class nO extends Gr{constructor(e){super(),this.isLineDashedMaterial=!0,this.type="LineDashedMaterial",this.scale=1,this.dashSize=3,this.gapSize=1,this.setValues(e)}copy(e){return super.copy(e),this.scale=e.scale,this.dashSize=e.dashSize,this.gapSize=e.gapSize,this}}function qh(i,e){return!i||i.constructor===e?i:typeof e.BYTES_PER_ELEMENT=="number"?new e(i):Array.prototype.slice.call(i)}function iO(i){function e(a,s){return i[a]-i[s]}const t=i.length,n=new Array(t);for(let a=0;a!==t;++a)n[a]=a;return n.sort(e),n}function lE(i,e,t){const n=i.length,a=new i.constructor(n);for(let s=0,l=0;l!==n;++s){const u=t[s]*e;for(let d=0;d!==e;++d)a[l++]=i[u+d]}return a}function dM(i,e,t,n){let a=1,s=i[0];for(;s!==void 0&&s[n]===void 0;)s=i[a++];if(s===void 0)return;let l=s[n];if(l!==void 0)if(Array.isArray(l))do l=s[n],l!==void 0&&(e.push(s.time),t.push(...l)),s=i[a++];while(s!==void 0);else if(l.toArray!==void 0)do l=s[n],l!==void 0&&(e.push(s.time),l.toArray(t,t.length)),s=i[a++];while(s!==void 0);else do l=s[n],l!==void 0&&(e.push(s.time),t.push(l)),s=i[a++];while(s!==void 0)}function CB(i,e,t,n,a=30){const s=i.clone();s.name=e;const l=[];for(let d=0;d<s.tracks.length;++d){const p=s.tracks[d],g=p.getValueSize(),y=[],_=[];for(let b=0;b<p.times.length;++b){const x=p.times[b]*a;if(!(x<t||x>=n)){y.push(p.times[b]);for(let T=0;T<g;++T)_.push(p.values[b*g+T])}}y.length!==0&&(p.times=qh(y,p.times.constructor),p.values=qh(_,p.values.constructor),l.push(p))}s.tracks=l;let u=1/0;for(let d=0;d<s.tracks.length;++d)u>s.tracks[d].times[0]&&(u=s.tracks[d].times[0]);for(let d=0;d<s.tracks.length;++d)s.tracks[d].shift(-1*u);return s.resetDuration(),s}function RB(i,e=0,t=i,n=30){n<=0&&(n=30);const a=t.tracks.length,s=e/n;for(let l=0;l<a;++l){const u=t.tracks[l],d=u.ValueTypeName;if(d==="bool"||d==="string")continue;const p=i.tracks.find(function(S){return S.name===u.name&&S.ValueTypeName===d});if(p===void 0)continue;let g=0;const y=u.getValueSize();u.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(g=y/3);let _=0;const b=p.getValueSize();p.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(_=b/3);const x=u.times.length-1;let T;if(s<=u.times[0]){const S=g,C=y-g;T=u.values.slice(S,C)}else if(s>=u.times[x]){const S=x*y+g,C=S+y-g;T=u.values.slice(S,C)}else{const S=u.createInterpolant(),C=g,N=y-g;S.evaluate(s),T=S.resultBuffer.slice(C,N)}d==="quaternion"&&new wa().fromArray(T).normalize().conjugate().toArray(T);const w=p.times.length;for(let S=0;S<w;++S){const C=S*b+_;if(d==="quaternion")wa.multiplyQuaternionsFlat(p.values,C,T,0,p.values,C);else{const N=b-_*2;for(let O=0;O<N;++O)p.values[C+O]-=T[O]}}}return i.blendMode=WE,i}class NB{static convertArray(e,t){return qh(e,t)}static isTypedArray(e){return EN(e)}static getKeyframeOrder(e){return iO(e)}static sortedArray(e,t,n){return lE(e,t,n)}static flattenJSON(e,t,n,a){dM(e,t,n,a)}static subclip(e,t,n,a,s=30){return CB(e,t,n,a,s)}static makeClipAdditive(e,t=0,n=e,a=30){return RB(e,t,n,a)}}class hv{constructor(e,t,n,a){this.parameterPositions=e,this._cachedIndex=0,this.resultBuffer=a!==void 0?a:new t.constructor(n),this.sampleValues=t,this.valueSize=n,this.settings=null,this.DefaultSettings_={}}evaluate(e){const t=this.parameterPositions;let n=this._cachedIndex,a=t[n],s=t[n-1];e:{t:{let l;n:{i:if(!(e<a)){for(let u=n+2;;){if(a===void 0){if(e<s)break i;return n=t.length,this._cachedIndex=n,this.copySampleValue_(n-1)}if(n===u)break;if(s=a,a=t[++n],e<a)break t}l=t.length;break n}if(!(e>=s)){const u=t[1];e<u&&(n=2,s=u);for(let d=n-2;;){if(s===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(n===d)break;if(a=s,s=t[--n-1],e>=s)break t}l=n,n=0;break n}break e}for(;n<l;){const u=n+l>>>1;e<t[u]?l=u:n=u+1}if(a=t[n],s=t[n-1],s===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(a===void 0)return n=t.length,this._cachedIndex=n,this.copySampleValue_(n-1)}this._cachedIndex=n,this.intervalChanged_(n,s,a)}return this.interpolate_(n,s,e,a)}getSettings_(){return this.settings||this.DefaultSettings_}copySampleValue_(e){const t=this.resultBuffer,n=this.sampleValues,a=this.valueSize,s=e*a;for(let l=0;l!==a;++l)t[l]=n[s+l];return t}interpolate_(){throw new Error("call to abstract method")}intervalChanged_(){}}class aO extends hv{constructor(e,t,n,a){super(e,t,n,a),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0,this.DefaultSettings_={endingStart:Vh,endingEnd:Vh}}intervalChanged_(e,t,n){const a=this.parameterPositions;let s=e-2,l=e+1,u=a[s],d=a[l];if(u===void 0)switch(this.getSettings_().endingStart){case jh:s=e,u=2*t-n;break;case zg:s=a.length-2,u=t+a[s]-a[s+1];break;default:s=e,u=n}if(d===void 0)switch(this.getSettings_().endingEnd){case jh:l=e,d=2*n-t;break;case zg:l=1,d=n+a[1]-a[0];break;default:l=e-1,d=t}const p=(n-t)*.5,g=this.valueSize;this._weightPrev=p/(t-u),this._weightNext=p/(d-n),this._offsetPrev=s*g,this._offsetNext=l*g}interpolate_(e,t,n,a){const s=this.resultBuffer,l=this.sampleValues,u=this.valueSize,d=e*u,p=d-u,g=this._offsetPrev,y=this._offsetNext,_=this._weightPrev,b=this._weightNext,x=(n-t)/(a-t),T=x*x,w=T*x,S=-_*w+2*_*T-_*x,C=(1+_)*w+(-1.5-2*_)*T+(-.5+_)*x+1,N=(-1-b)*w+(1.5+b)*T+.5*x,O=b*w-b*T;for(let P=0;P!==u;++P)s[P]=S*l[g+P]+C*l[p+P]+N*l[d+P]+O*l[y+P];return s}}class pM extends hv{constructor(e,t,n,a){super(e,t,n,a)}interpolate_(e,t,n,a){const s=this.resultBuffer,l=this.sampleValues,u=this.valueSize,d=e*u,p=d-u,g=(n-t)/(a-t),y=1-g;for(let _=0;_!==u;++_)s[_]=l[p+_]*y+l[d+_]*g;return s}}class rO extends hv{constructor(e,t,n,a){super(e,t,n,a)}interpolate_(e){return this.copySampleValue_(e-1)}}class Ws{constructor(e,t,n,a){if(e===void 0)throw new Error("THREE.KeyframeTrack: track name is undefined");if(t===void 0||t.length===0)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+e);this.name=e,this.times=qh(t,this.TimeBufferType),this.values=qh(n,this.ValueBufferType),this.setInterpolation(a||this.DefaultInterpolation)}static toJSON(e){const t=e.constructor;let n;if(t.toJSON!==this.toJSON)n=t.toJSON(e);else{n={name:e.name,times:qh(e.times,Array),values:qh(e.values,Array)};const a=e.getInterpolation();a!==e.DefaultInterpolation&&(n.interpolation=a)}return n.type=e.ValueTypeName,n}InterpolantFactoryMethodDiscrete(e){return new rO(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodLinear(e){return new pM(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodSmooth(e){return new aO(this.times,this.values,this.getValueSize(),e)}setInterpolation(e){let t;switch(e){case Pg:t=this.InterpolantFactoryMethodDiscrete;break;case K_:t=this.InterpolantFactoryMethodLinear;break;case Wy:t=this.InterpolantFactoryMethodSmooth;break}if(t===void 0){const n="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(this.createInterpolant===void 0)if(e!==this.DefaultInterpolation)this.setInterpolation(this.DefaultInterpolation);else throw new Error(n);return Rt("KeyframeTrack:",n),this}return this.createInterpolant=t,this}getInterpolation(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return Pg;case this.InterpolantFactoryMethodLinear:return K_;case this.InterpolantFactoryMethodSmooth:return Wy}}getValueSize(){return this.values.length/this.times.length}shift(e){if(e!==0){const t=this.times;for(let n=0,a=t.length;n!==a;++n)t[n]+=e}return this}scale(e){if(e!==1){const t=this.times;for(let n=0,a=t.length;n!==a;++n)t[n]*=e}return this}trim(e,t){const n=this.times,a=n.length;let s=0,l=a-1;for(;s!==a&&n[s]<e;)++s;for(;l!==-1&&n[l]>t;)--l;if(++l,s!==0||l!==a){s>=l&&(l=Math.max(l,1),s=l-1);const u=this.getValueSize();this.times=n.slice(s,l),this.values=this.values.slice(s*u,l*u)}return this}validate(){let e=!0;const t=this.getValueSize();t-Math.floor(t)!==0&&(Qt("KeyframeTrack: Invalid value size in track.",this),e=!1);const n=this.times,a=this.values,s=n.length;s===0&&(Qt("KeyframeTrack: Track is empty.",this),e=!1);let l=null;for(let u=0;u!==s;u++){const d=n[u];if(typeof d=="number"&&isNaN(d)){Qt("KeyframeTrack: Time is not a valid number.",this,u,d),e=!1;break}if(l!==null&&l>d){Qt("KeyframeTrack: Out of order keys.",this,u,d,l),e=!1;break}l=d}if(a!==void 0&&EN(a))for(let u=0,d=a.length;u!==d;++u){const p=a[u];if(isNaN(p)){Qt("KeyframeTrack: Value is not a valid number.",this,u,p),e=!1;break}}return e}optimize(){const e=this.times.slice(),t=this.values.slice(),n=this.getValueSize(),a=this.getInterpolation()===Wy,s=e.length-1;let l=1;for(let u=1;u<s;++u){let d=!1;const p=e[u],g=e[u+1];if(p!==g&&(u!==1||p!==e[0]))if(a)d=!0;else{const y=u*n,_=y-n,b=y+n;for(let x=0;x!==n;++x){const T=t[y+x];if(T!==t[_+x]||T!==t[b+x]){d=!0;break}}}if(d){if(u!==l){e[l]=e[u];const y=u*n,_=l*n;for(let b=0;b!==n;++b)t[_+b]=t[y+b]}++l}}if(s>0){e[l]=e[s];for(let u=s*n,d=l*n,p=0;p!==n;++p)t[d+p]=t[u+p];++l}return l!==e.length?(this.times=e.slice(0,l),this.values=t.slice(0,l*n)):(this.times=e,this.values=t),this}clone(){const e=this.times.slice(),t=this.values.slice(),n=this.constructor,a=new n(this.name,e,t);return a.createInterpolant=this.createInterpolant,a}}Ws.prototype.ValueTypeName="";Ws.prototype.TimeBufferType=Float32Array;Ws.prototype.ValueBufferType=Float32Array;Ws.prototype.DefaultInterpolation=K_;class of extends Ws{constructor(e,t,n){super(e,t,n)}}of.prototype.ValueTypeName="bool";of.prototype.ValueBufferType=Array;of.prototype.DefaultInterpolation=Pg;of.prototype.InterpolantFactoryMethodLinear=void 0;of.prototype.InterpolantFactoryMethodSmooth=void 0;class mM extends Ws{constructor(e,t,n,a){super(e,t,n,a)}}mM.prototype.ValueTypeName="color";class qg extends Ws{constructor(e,t,n,a){super(e,t,n,a)}}qg.prototype.ValueTypeName="number";class sO extends hv{constructor(e,t,n,a){super(e,t,n,a)}interpolate_(e,t,n,a){const s=this.resultBuffer,l=this.sampleValues,u=this.valueSize,d=(n-t)/(a-t);let p=e*u;for(let g=p+u;p!==g;p+=4)wa.slerpFlat(s,0,l,p-u,l,p,d);return s}}class fv extends Ws{constructor(e,t,n,a){super(e,t,n,a)}InterpolantFactoryMethodLinear(e){return new sO(this.times,this.values,this.getValueSize(),e)}}fv.prototype.ValueTypeName="quaternion";fv.prototype.InterpolantFactoryMethodSmooth=void 0;class lf extends Ws{constructor(e,t,n){super(e,t,n)}}lf.prototype.ValueTypeName="string";lf.prototype.ValueBufferType=Array;lf.prototype.DefaultInterpolation=Pg;lf.prototype.InterpolantFactoryMethodLinear=void 0;lf.prototype.InterpolantFactoryMethodSmooth=void 0;class Xg extends Ws{constructor(e,t,n,a){super(e,t,n,a)}}Xg.prototype.ValueTypeName="vector";class Wg{constructor(e="",t=-1,n=[],a=vb){this.name=e,this.tracks=n,this.duration=t,this.blendMode=a,this.uuid=bs(),this.userData={},this.duration<0&&this.resetDuration()}static parse(e){const t=[],n=e.tracks,a=1/(e.fps||1);for(let l=0,u=n.length;l!==u;++l)t.push(DB(n[l]).scale(a));const s=new this(e.name,e.duration,t,e.blendMode);return s.uuid=e.uuid,s.userData=JSON.parse(e.userData||"{}"),s}static toJSON(e){const t=[],n=e.tracks,a={name:e.name,duration:e.duration,tracks:t,uuid:e.uuid,blendMode:e.blendMode,userData:JSON.stringify(e.userData)};for(let s=0,l=n.length;s!==l;++s)t.push(Ws.toJSON(n[s]));return a}static CreateFromMorphTargetSequence(e,t,n,a){const s=t.length,l=[];for(let u=0;u<s;u++){let d=[],p=[];d.push((u+s-1)%s,u,(u+1)%s),p.push(0,1,0);const g=iO(d);d=lE(d,1,g),p=lE(p,1,g),!a&&d[0]===0&&(d.push(s),p.push(p[0])),l.push(new qg(".morphTargetInfluences["+t[u].name+"]",d,p).scale(1/n))}return new this(e,-1,l)}static findByName(e,t){let n=e;if(!Array.isArray(e)){const a=e;n=a.geometry&&a.geometry.animations||a.animations}for(let a=0;a<n.length;a++)if(n[a].name===t)return n[a];return null}static CreateClipsFromMorphTargetSequences(e,t,n){const a={},s=/^([\w-]*?)([\d]+)$/;for(let u=0,d=e.length;u<d;u++){const p=e[u],g=p.name.match(s);if(g&&g.length>1){const y=g[1];let _=a[y];_||(a[y]=_=[]),_.push(p)}}const l=[];for(const u in a)l.push(this.CreateFromMorphTargetSequence(u,a[u],t,n));return l}static parseAnimation(e,t){if(Rt("AnimationClip: parseAnimation() is deprecated and will be removed with r185"),!e)return Qt("AnimationClip: No animation in JSONLoader data."),null;const n=function(y,_,b,x,T){if(b.length!==0){const w=[],S=[];dM(b,w,S,x),w.length!==0&&T.push(new y(_,w,S))}},a=[],s=e.name||"default",l=e.fps||30,u=e.blendMode;let d=e.length||-1;const p=e.hierarchy||[];for(let y=0;y<p.length;y++){const _=p[y].keys;if(!(!_||_.length===0))if(_[0].morphTargets){const b={};let x;for(x=0;x<_.length;x++)if(_[x].morphTargets)for(let T=0;T<_[x].morphTargets.length;T++)b[_[x].morphTargets[T]]=-1;for(const T in b){const w=[],S=[];for(let C=0;C!==_[x].morphTargets.length;++C){const N=_[x];w.push(N.time),S.push(N.morphTarget===T?1:0)}a.push(new qg(".morphTargetInfluence["+T+"]",w,S))}d=b.length*l}else{const b=".bones["+t[y].name+"]";n(Xg,b+".position",_,"pos",a),n(fv,b+".quaternion",_,"rot",a),n(Xg,b+".scale",_,"scl",a)}}return a.length===0?null:new this(s,d,a,u)}resetDuration(){const e=this.tracks;let t=0;for(let n=0,a=e.length;n!==a;++n){const s=this.tracks[n];t=Math.max(t,s.times[s.times.length-1])}return this.duration=t,this}trim(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].trim(0,this.duration);return this}validate(){let e=!0;for(let t=0;t<this.tracks.length;t++)e=e&&this.tracks[t].validate();return e}optimize(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].optimize();return this}clone(){const e=[];for(let n=0;n<this.tracks.length;n++)e.push(this.tracks[n].clone());const t=new this.constructor(this.name,this.duration,e,this.blendMode);return t.userData=JSON.parse(JSON.stringify(this.userData)),t}toJSON(){return this.constructor.toJSON(this)}}function OB(i){switch(i.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return qg;case"vector":case"vector2":case"vector3":case"vector4":return Xg;case"color":return mM;case"quaternion":return fv;case"bool":case"boolean":return of;case"string":return lf}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+i)}function DB(i){if(i.type===void 0)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");const e=OB(i.type);if(i.times===void 0){const t=[],n=[];dM(i.keys,t,n,"value"),i.times=t,i.values=n}return e.parse!==void 0?e.parse(i):new e(i.name,i.times,i.values,i.interpolation)}const _l={enabled:!1,files:{},add:function(i,e){this.enabled!==!1&&(this.files[i]=e)},get:function(i){if(this.enabled!==!1)return this.files[i]},remove:function(i){delete this.files[i]},clear:function(){this.files={}}};class jb{constructor(e,t,n){const a=this;let s=!1,l=0,u=0,d;const p=[];this.onStart=void 0,this.onLoad=e,this.onProgress=t,this.onError=n,this._abortController=null,this.itemStart=function(g){u++,s===!1&&a.onStart!==void 0&&a.onStart(g,l,u),s=!0},this.itemEnd=function(g){l++,a.onProgress!==void 0&&a.onProgress(g,l,u),l===u&&(s=!1,a.onLoad!==void 0&&a.onLoad())},this.itemError=function(g){a.onError!==void 0&&a.onError(g)},this.resolveURL=function(g){return d?d(g):g},this.setURLModifier=function(g){return d=g,this},this.addHandler=function(g,y){return p.push(g,y),this},this.removeHandler=function(g){const y=p.indexOf(g);return y!==-1&&p.splice(y,2),this},this.getHandler=function(g){for(let y=0,_=p.length;y<_;y+=2){const b=p[y],x=p[y+1];if(b.global&&(b.lastIndex=0),b.test(g))return x}return null},this.abort=function(){return this.abortController.abort(),this._abortController=null,this}}get abortController(){return this._abortController||(this._abortController=new AbortController),this._abortController}}const oO=new jb;class yr{constructor(e){this.manager=e!==void 0?e:oO,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}load(){}loadAsync(e,t){const n=this;return new Promise(function(a,s){n.load(e,a,t,s)})}parse(){}setCrossOrigin(e){return this.crossOrigin=e,this}setWithCredentials(e){return this.withCredentials=e,this}setPath(e){return this.path=e,this}setResourcePath(e){return this.resourcePath=e,this}setRequestHeader(e){return this.requestHeader=e,this}abort(){return this}}yr.DEFAULT_MATERIAL_NAME="__DEFAULT";const lc={};class UB extends Error{constructor(e,t){super(e),this.response=t}}class as extends yr{constructor(e){super(e),this.mimeType="",this.responseType="",this._abortController=new AbortController}load(e,t,n,a){e===void 0&&(e=""),this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const s=_l.get(`file:${e}`);if(s!==void 0)return this.manager.itemStart(e),setTimeout(()=>{t&&t(s),this.manager.itemEnd(e)},0),s;if(lc[e]!==void 0){lc[e].push({onLoad:t,onProgress:n,onError:a});return}lc[e]=[],lc[e].push({onLoad:t,onProgress:n,onError:a});const l=new Request(e,{headers:new Headers(this.requestHeader),credentials:this.withCredentials?"include":"same-origin",signal:typeof AbortSignal.any=="function"?AbortSignal.any([this._abortController.signal,this.manager.abortController.signal]):this._abortController.signal}),u=this.mimeType,d=this.responseType;fetch(l).then(p=>{if(p.status===200||p.status===0){if(p.status===0&&Rt("FileLoader: HTTP Status 0 received."),typeof ReadableStream>"u"||p.body===void 0||p.body.getReader===void 0)return p;const g=lc[e],y=p.body.getReader(),_=p.headers.get("X-File-Size")||p.headers.get("Content-Length"),b=_?parseInt(_):0,x=b!==0;let T=0;const w=new ReadableStream({start(S){C();function C(){y.read().then(({done:N,value:O})=>{if(N)S.close();else{T+=O.byteLength;const P=new ProgressEvent("progress",{lengthComputable:x,loaded:T,total:b});for(let U=0,z=g.length;U<z;U++){const H=g[U];H.onProgress&&H.onProgress(P)}S.enqueue(O),C()}},N=>{S.error(N)})}}});return new Response(w)}else throw new UB(`fetch for "${p.url}" responded with ${p.status}: ${p.statusText}`,p)}).then(p=>{switch(d){case"arraybuffer":return p.arrayBuffer();case"blob":return p.blob();case"document":return p.text().then(g=>new DOMParser().parseFromString(g,u));case"json":return p.json();default:if(u==="")return p.text();{const y=/charset="?([^;"\s]*)"?/i.exec(u),_=y&&y[1]?y[1].toLowerCase():void 0,b=new TextDecoder(_);return p.arrayBuffer().then(x=>b.decode(x))}}}).then(p=>{_l.add(`file:${e}`,p);const g=lc[e];delete lc[e];for(let y=0,_=g.length;y<_;y++){const b=g[y];b.onLoad&&b.onLoad(p)}}).catch(p=>{const g=lc[e];if(g===void 0)throw this.manager.itemError(e),p;delete lc[e];for(let y=0,_=g.length;y<_;y++){const b=g[y];b.onError&&b.onError(p)}this.manager.itemError(e)}).finally(()=>{this.manager.itemEnd(e)}),this.manager.itemStart(e)}setResponseType(e){return this.responseType=e,this}setMimeType(e){return this.mimeType=e,this}abort(){return this._abortController.abort(),this._abortController=new AbortController,this}}class LB extends yr{constructor(e){super(e)}load(e,t,n,a){const s=this,l=new as(this.manager);l.setPath(this.path),l.setRequestHeader(this.requestHeader),l.setWithCredentials(this.withCredentials),l.load(e,function(u){try{t(s.parse(JSON.parse(u)))}catch(d){a?a(d):Qt(d),s.manager.itemError(e)}},n,a)}parse(e){const t=[];for(let n=0;n<e.length;n++){const a=Wg.parse(e[n]);t.push(a)}return t}}class IB extends yr{constructor(e){super(e)}load(e,t,n,a){const s=this,l=[],u=new Rb,d=new as(this.manager);d.setPath(this.path),d.setResponseType("arraybuffer"),d.setRequestHeader(this.requestHeader),d.setWithCredentials(s.withCredentials);let p=0;function g(y){d.load(e[y],function(_){const b=s.parse(_,!0);l[y]={width:b.width,height:b.height,format:b.format,mipmaps:b.mipmaps},p+=1,p===6&&(b.mipmapCount===1&&(u.minFilter=Vn),u.image=l,u.format=b.format,u.needsUpdate=!0,t&&t(u))},n,a)}if(Array.isArray(e))for(let y=0,_=e.length;y<_;++y)g(y);else d.load(e,function(y){const _=s.parse(y,!0);if(_.isCubemap){const b=_.mipmaps.length/_.mipmapCount;for(let x=0;x<b;x++){l[x]={mipmaps:[]};for(let T=0;T<_.mipmapCount;T++)l[x].mipmaps.push(_.mipmaps[x*_.mipmapCount+T]),l[x].format=_.format,l[x].width=_.width,l[x].height=_.height}u.image=l}else u.image.width=_.width,u.image.height=_.height,u.mipmaps=_.mipmaps;_.mipmapCount===1&&(u.minFilter=Vn),u.format=_.format,u.needsUpdate=!0,t&&t(u)},n,a);return u}}const Pd=new WeakMap;class Yg extends yr{constructor(e){super(e)}load(e,t,n,a){this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const s=this,l=_l.get(`image:${e}`);if(l!==void 0){if(l.complete===!0)s.manager.itemStart(e),setTimeout(function(){t&&t(l),s.manager.itemEnd(e)},0);else{let y=Pd.get(l);y===void 0&&(y=[],Pd.set(l,y)),y.push({onLoad:t,onError:a})}return l}const u=kg("img");function d(){g(),t&&t(this);const y=Pd.get(this)||[];for(let _=0;_<y.length;_++){const b=y[_];b.onLoad&&b.onLoad(this)}Pd.delete(this),s.manager.itemEnd(e)}function p(y){g(),a&&a(y),_l.remove(`image:${e}`);const _=Pd.get(this)||[];for(let b=0;b<_.length;b++){const x=_[b];x.onError&&x.onError(y)}Pd.delete(this),s.manager.itemError(e),s.manager.itemEnd(e)}function g(){u.removeEventListener("load",d,!1),u.removeEventListener("error",p,!1)}return u.addEventListener("load",d,!1),u.addEventListener("error",p,!1),e.slice(0,5)!=="data:"&&this.crossOrigin!==void 0&&(u.crossOrigin=this.crossOrigin),_l.add(`image:${e}`,u),s.manager.itemStart(e),u.src=e,u}}class lO extends yr{constructor(e){super(e)}load(e,t,n,a){const s=new av;s.colorSpace=Fa;const l=new Yg(this.manager);l.setCrossOrigin(this.crossOrigin),l.setPath(this.path);let u=0;function d(p){l.load(e[p],function(g){s.images[p]=g,u++,u===6&&(s.needsUpdate=!0,t&&t(s))},void 0,a)}for(let p=0;p<e.length;++p)d(p);return s}}class gM extends yr{constructor(e){super(e)}load(e,t,n,a){const s=this,l=new Xs,u=new as(this.manager);return u.setResponseType("arraybuffer"),u.setRequestHeader(this.requestHeader),u.setPath(this.path),u.setWithCredentials(s.withCredentials),u.load(e,function(d){let p;try{p=s.parse(d)}catch(g){if(a!==void 0)a(g);else{g(g);return}}p.image!==void 0?l.image=p.image:p.data!==void 0&&(l.image.width=p.width,l.image.height=p.height,l.image.data=p.data),l.wrapS=p.wrapS!==void 0?p.wrapS:Qi,l.wrapT=p.wrapT!==void 0?p.wrapT:Qi,l.magFilter=p.magFilter!==void 0?p.magFilter:Vn,l.minFilter=p.minFilter!==void 0?p.minFilter:Vn,l.anisotropy=p.anisotropy!==void 0?p.anisotropy:1,p.colorSpace!==void 0&&(l.colorSpace=p.colorSpace),p.flipY!==void 0&&(l.flipY=p.flipY),p.format!==void 0&&(l.format=p.format),p.type!==void 0&&(l.type=p.type),p.mipmaps!==void 0&&(l.mipmaps=p.mipmaps,l.minFilter=yl),p.mipmapCount===1&&(l.minFilter=Vn),p.generateMipmaps!==void 0&&(l.generateMipmaps=p.generateMipmaps),l.needsUpdate=!0,t&&t(l,p)},n,a),l}}class PB extends yr{constructor(e){super(e)}load(e,t,n,a){const s=new hi,l=new Yg(this.manager);return l.setCrossOrigin(this.crossOrigin),l.setPath(this.path),l.load(e,function(u){s.image=u,s.needsUpdate=!0,t!==void 0&&t(s)},n,a),s}}class Mu extends Yn{constructor(e,t=1){super(),this.isLight=!0,this.type="Light",this.color=new Ut(e),this.intensity=t}dispose(){this.dispatchEvent({type:"dispose"})}copy(e,t){return super.copy(e,t),this.color.copy(e.color),this.intensity=e.intensity,this}toJSON(e){const t=super.toJSON(e);return t.object.color=this.color.getHex(),t.object.intensity=this.intensity,t}}class cO extends Mu{constructor(e,t,n){super(e,n),this.isHemisphereLight=!0,this.type="HemisphereLight",this.position.copy(Yn.DEFAULT_UP),this.updateMatrix(),this.groundColor=new Ut(t)}copy(e,t){return super.copy(e,t),this.groundColor.copy(e.groundColor),this}toJSON(e){const t=super.toJSON(e);return t.object.groundColor=this.groundColor.getHex(),t}}const JS=new on,$A=new ee,eC=new ee;class vM{constructor(e){this.camera=e,this.intensity=1,this.bias=0,this.normalBias=0,this.radius=1,this.blurSamples=8,this.mapSize=new Ke(512,512),this.mapType=ka,this.map=null,this.mapPass=null,this.matrix=new on,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new bp,this._frameExtents=new Ke(1,1),this._viewportCount=1,this._viewports=[new yi(0,0,1,1)]}getViewportCount(){return this._viewportCount}getFrustum(){return this._frustum}updateMatrices(e){const t=this.camera,n=this.matrix;$A.setFromMatrixPosition(e.matrixWorld),t.position.copy($A),eC.setFromMatrixPosition(e.target.matrixWorld),t.lookAt(eC),t.updateMatrixWorld(),JS.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),this._frustum.setFromProjectionMatrix(JS,t.coordinateSystem,t.reversedDepth),t.reversedDepth?n.set(.5,0,0,.5,0,.5,0,.5,0,0,1,0,0,0,0,1):n.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),n.multiply(JS)}getViewport(e){return this._viewports[e]}getFrameExtents(){return this._frameExtents}dispose(){this.map&&this.map.dispose(),this.mapPass&&this.mapPass.dispose()}copy(e){return this.camera=e.camera.clone(),this.intensity=e.intensity,this.bias=e.bias,this.radius=e.radius,this.autoUpdate=e.autoUpdate,this.needsUpdate=e.needsUpdate,this.normalBias=e.normalBias,this.blurSamples=e.blurSamples,this.mapSize.copy(e.mapSize),this}clone(){return new this.constructor().copy(this)}toJSON(){const e={};return this.intensity!==1&&(e.intensity=this.intensity),this.bias!==0&&(e.bias=this.bias),this.normalBias!==0&&(e.normalBias=this.normalBias),this.radius!==1&&(e.radius=this.radius),(this.mapSize.x!==512||this.mapSize.y!==512)&&(e.mapSize=this.mapSize.toArray()),e.camera=this.camera.toJSON(!1).object,delete e.camera.matrix,e}}class zB extends vM{constructor(){super(new ra(50,1,.5,500)),this.isSpotLightShadow=!0,this.focus=1,this.aspect=1}updateMatrices(e){const t=this.camera,n=lp*2*e.angle*this.focus,a=this.mapSize.width/this.mapSize.height*this.aspect,s=e.distance||t.far;(n!==t.fov||a!==t.aspect||s!==t.far)&&(t.fov=n,t.aspect=a,t.far=s,t.updateProjectionMatrix()),super.updateMatrices(e)}copy(e){return super.copy(e),this.focus=e.focus,this}}class uO extends Mu{constructor(e,t,n=0,a=Math.PI/3,s=0,l=2){super(e,t),this.isSpotLight=!0,this.type="SpotLight",this.position.copy(Yn.DEFAULT_UP),this.updateMatrix(),this.target=new Yn,this.distance=n,this.angle=a,this.penumbra=s,this.decay=l,this.map=null,this.shadow=new zB}get power(){return this.intensity*Math.PI}set power(e){this.intensity=e/Math.PI}dispose(){super.dispose(),this.shadow.dispose()}copy(e,t){return super.copy(e,t),this.distance=e.distance,this.angle=e.angle,this.penumbra=e.penumbra,this.decay=e.decay,this.target=e.target.clone(),this.map=e.map,this.shadow=e.shadow.clone(),this}toJSON(e){const t=super.toJSON(e);return t.object.distance=this.distance,t.object.angle=this.angle,t.object.decay=this.decay,t.object.penumbra=this.penumbra,t.object.target=this.target.uuid,this.map&&this.map.isTexture&&(t.object.map=this.map.toJSON(e).uuid),t.object.shadow=this.shadow.toJSON(),t}}class BB extends vM{constructor(){super(new ra(90,1,.5,500)),this.isPointLightShadow=!0}}class hO extends Mu{constructor(e,t,n=0,a=2){super(e,t),this.isPointLight=!0,this.type="PointLight",this.distance=n,this.decay=a,this.shadow=new BB}get power(){return this.intensity*4*Math.PI}set power(e){this.intensity=e/(4*Math.PI)}dispose(){super.dispose(),this.shadow.dispose()}copy(e,t){return super.copy(e,t),this.distance=e.distance,this.decay=e.decay,this.shadow=e.shadow.clone(),this}toJSON(e){const t=super.toJSON(e);return t.object.distance=this.distance,t.object.decay=this.decay,t.object.shadow=this.shadow.toJSON(),t}}class bl extends Sb{constructor(e=-1,t=1,n=1,a=-1,s=.1,l=2e3){super(),this.isOrthographicCamera=!0,this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=e,this.right=t,this.top=n,this.bottom=a,this.near=s,this.far=l,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.near=e.near,this.far=e.far,this.zoom=e.zoom,this.view=e.view===null?null:Object.assign({},e.view),this}setViewOffset(e,t,n,a,s,l){this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=n,this.view.offsetY=a,this.view.width=s,this.view.height=l,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=(this.right-this.left)/(2*this.zoom),t=(this.top-this.bottom)/(2*this.zoom),n=(this.right+this.left)/2,a=(this.top+this.bottom)/2;let s=n-e,l=n+e,u=a+t,d=a-t;if(this.view!==null&&this.view.enabled){const p=(this.right-this.left)/this.view.fullWidth/this.zoom,g=(this.top-this.bottom)/this.view.fullHeight/this.zoom;s+=p*this.view.offsetX,l=s+p*this.view.width,u-=g*this.view.offsetY,d=u-g*this.view.height}this.projectionMatrix.makeOrthographic(s,l,u,d,this.near,this.far,this.coordinateSystem,this.reversedDepth),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.zoom=this.zoom,t.object.left=this.left,t.object.right=this.right,t.object.top=this.top,t.object.bottom=this.bottom,t.object.near=this.near,t.object.far=this.far,this.view!==null&&(t.object.view=Object.assign({},this.view)),t}}class FB extends vM{constructor(){super(new bl(-5,5,5,-5,.5,500)),this.isDirectionalLightShadow=!0}}class fO extends Mu{constructor(e,t){super(e,t),this.isDirectionalLight=!0,this.type="DirectionalLight",this.position.copy(Yn.DEFAULT_UP),this.updateMatrix(),this.target=new Yn,this.shadow=new FB}dispose(){super.dispose(),this.shadow.dispose()}copy(e){return super.copy(e),this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}toJSON(e){const t=super.toJSON(e);return t.object.shadow=this.shadow.toJSON(),t.object.target=this.target.uuid,t}}class dO extends Mu{constructor(e,t){super(e,t),this.isAmbientLight=!0,this.type="AmbientLight"}}class pO extends Mu{constructor(e,t,n=10,a=10){super(e,t),this.isRectAreaLight=!0,this.type="RectAreaLight",this.width=n,this.height=a}get power(){return this.intensity*this.width*this.height*Math.PI}set power(e){this.intensity=e/(this.width*this.height*Math.PI)}copy(e){return super.copy(e),this.width=e.width,this.height=e.height,this}toJSON(e){const t=super.toJSON(e);return t.object.width=this.width,t.object.height=this.height,t}}class yM{constructor(){this.isSphericalHarmonics3=!0,this.coefficients=[];for(let e=0;e<9;e++)this.coefficients.push(new ee)}set(e){for(let t=0;t<9;t++)this.coefficients[t].copy(e[t]);return this}zero(){for(let e=0;e<9;e++)this.coefficients[e].set(0,0,0);return this}getAt(e,t){const n=e.x,a=e.y,s=e.z,l=this.coefficients;return t.copy(l[0]).multiplyScalar(.282095),t.addScaledVector(l[1],.488603*a),t.addScaledVector(l[2],.488603*s),t.addScaledVector(l[3],.488603*n),t.addScaledVector(l[4],1.092548*(n*a)),t.addScaledVector(l[5],1.092548*(a*s)),t.addScaledVector(l[6],.315392*(3*s*s-1)),t.addScaledVector(l[7],1.092548*(n*s)),t.addScaledVector(l[8],.546274*(n*n-a*a)),t}getIrradianceAt(e,t){const n=e.x,a=e.y,s=e.z,l=this.coefficients;return t.copy(l[0]).multiplyScalar(.886227),t.addScaledVector(l[1],2*.511664*a),t.addScaledVector(l[2],2*.511664*s),t.addScaledVector(l[3],2*.511664*n),t.addScaledVector(l[4],2*.429043*n*a),t.addScaledVector(l[5],2*.429043*a*s),t.addScaledVector(l[6],.743125*s*s-.247708),t.addScaledVector(l[7],2*.429043*n*s),t.addScaledVector(l[8],.429043*(n*n-a*a)),t}add(e){for(let t=0;t<9;t++)this.coefficients[t].add(e.coefficients[t]);return this}addScaledSH(e,t){for(let n=0;n<9;n++)this.coefficients[n].addScaledVector(e.coefficients[n],t);return this}scale(e){for(let t=0;t<9;t++)this.coefficients[t].multiplyScalar(e);return this}lerp(e,t){for(let n=0;n<9;n++)this.coefficients[n].lerp(e.coefficients[n],t);return this}equals(e){for(let t=0;t<9;t++)if(!this.coefficients[t].equals(e.coefficients[t]))return!1;return!0}copy(e){return this.set(e.coefficients)}clone(){return new this.constructor().copy(this)}fromArray(e,t=0){const n=this.coefficients;for(let a=0;a<9;a++)n[a].fromArray(e,t+a*3);return this}toArray(e=[],t=0){const n=this.coefficients;for(let a=0;a<9;a++)n[a].toArray(e,t+a*3);return e}static getBasisAt(e,t){const n=e.x,a=e.y,s=e.z;t[0]=.282095,t[1]=.488603*a,t[2]=.488603*s,t[3]=.488603*n,t[4]=1.092548*n*a,t[5]=1.092548*a*s,t[6]=.315392*(3*s*s-1),t[7]=1.092548*n*s,t[8]=.546274*(n*n-a*a)}}class mO extends Mu{constructor(e=new yM,t=1){super(void 0,t),this.isLightProbe=!0,this.sh=e}copy(e){return super.copy(e),this.sh.copy(e.sh),this}toJSON(e){const t=super.toJSON(e);return t.object.sh=this.sh.toArray(),t}}class Gb extends yr{constructor(e){super(e),this.textures={}}load(e,t,n,a){const s=this,l=new as(s.manager);l.setPath(s.path),l.setRequestHeader(s.requestHeader),l.setWithCredentials(s.withCredentials),l.load(e,function(u){try{t(s.parse(JSON.parse(u)))}catch(d){a?a(d):Qt(d),s.manager.itemError(e)}},n,a)}parse(e){const t=this.textures;function n(s){return t[s]===void 0&&Rt("MaterialLoader: Undefined texture",s),t[s]}const a=this.createMaterialFromType(e.type);if(e.uuid!==void 0&&(a.uuid=e.uuid),e.name!==void 0&&(a.name=e.name),e.color!==void 0&&a.color!==void 0&&a.color.setHex(e.color),e.roughness!==void 0&&(a.roughness=e.roughness),e.metalness!==void 0&&(a.metalness=e.metalness),e.sheen!==void 0&&(a.sheen=e.sheen),e.sheenColor!==void 0&&(a.sheenColor=new Ut().setHex(e.sheenColor)),e.sheenRoughness!==void 0&&(a.sheenRoughness=e.sheenRoughness),e.emissive!==void 0&&a.emissive!==void 0&&a.emissive.setHex(e.emissive),e.specular!==void 0&&a.specular!==void 0&&a.specular.setHex(e.specular),e.specularIntensity!==void 0&&(a.specularIntensity=e.specularIntensity),e.specularColor!==void 0&&a.specularColor!==void 0&&a.specularColor.setHex(e.specularColor),e.shininess!==void 0&&(a.shininess=e.shininess),e.clearcoat!==void 0&&(a.clearcoat=e.clearcoat),e.clearcoatRoughness!==void 0&&(a.clearcoatRoughness=e.clearcoatRoughness),e.dispersion!==void 0&&(a.dispersion=e.dispersion),e.iridescence!==void 0&&(a.iridescence=e.iridescence),e.iridescenceIOR!==void 0&&(a.iridescenceIOR=e.iridescenceIOR),e.iridescenceThicknessRange!==void 0&&(a.iridescenceThicknessRange=e.iridescenceThicknessRange),e.transmission!==void 0&&(a.transmission=e.transmission),e.thickness!==void 0&&(a.thickness=e.thickness),e.attenuationDistance!==void 0&&(a.attenuationDistance=e.attenuationDistance),e.attenuationColor!==void 0&&a.attenuationColor!==void 0&&a.attenuationColor.setHex(e.attenuationColor),e.anisotropy!==void 0&&(a.anisotropy=e.anisotropy),e.anisotropyRotation!==void 0&&(a.anisotropyRotation=e.anisotropyRotation),e.fog!==void 0&&(a.fog=e.fog),e.flatShading!==void 0&&(a.flatShading=e.flatShading),e.blending!==void 0&&(a.blending=e.blending),e.combine!==void 0&&(a.combine=e.combine),e.side!==void 0&&(a.side=e.side),e.shadowSide!==void 0&&(a.shadowSide=e.shadowSide),e.opacity!==void 0&&(a.opacity=e.opacity),e.transparent!==void 0&&(a.transparent=e.transparent),e.alphaTest!==void 0&&(a.alphaTest=e.alphaTest),e.alphaHash!==void 0&&(a.alphaHash=e.alphaHash),e.depthFunc!==void 0&&(a.depthFunc=e.depthFunc),e.depthTest!==void 0&&(a.depthTest=e.depthTest),e.depthWrite!==void 0&&(a.depthWrite=e.depthWrite),e.colorWrite!==void 0&&(a.colorWrite=e.colorWrite),e.blendSrc!==void 0&&(a.blendSrc=e.blendSrc),e.blendDst!==void 0&&(a.blendDst=e.blendDst),e.blendEquation!==void 0&&(a.blendEquation=e.blendEquation),e.blendSrcAlpha!==void 0&&(a.blendSrcAlpha=e.blendSrcAlpha),e.blendDstAlpha!==void 0&&(a.blendDstAlpha=e.blendDstAlpha),e.blendEquationAlpha!==void 0&&(a.blendEquationAlpha=e.blendEquationAlpha),e.blendColor!==void 0&&a.blendColor!==void 0&&a.blendColor.setHex(e.blendColor),e.blendAlpha!==void 0&&(a.blendAlpha=e.blendAlpha),e.stencilWriteMask!==void 0&&(a.stencilWriteMask=e.stencilWriteMask),e.stencilFunc!==void 0&&(a.stencilFunc=e.stencilFunc),e.stencilRef!==void 0&&(a.stencilRef=e.stencilRef),e.stencilFuncMask!==void 0&&(a.stencilFuncMask=e.stencilFuncMask),e.stencilFail!==void 0&&(a.stencilFail=e.stencilFail),e.stencilZFail!==void 0&&(a.stencilZFail=e.stencilZFail),e.stencilZPass!==void 0&&(a.stencilZPass=e.stencilZPass),e.stencilWrite!==void 0&&(a.stencilWrite=e.stencilWrite),e.wireframe!==void 0&&(a.wireframe=e.wireframe),e.wireframeLinewidth!==void 0&&(a.wireframeLinewidth=e.wireframeLinewidth),e.wireframeLinecap!==void 0&&(a.wireframeLinecap=e.wireframeLinecap),e.wireframeLinejoin!==void 0&&(a.wireframeLinejoin=e.wireframeLinejoin),e.rotation!==void 0&&(a.rotation=e.rotation),e.linewidth!==void 0&&(a.linewidth=e.linewidth),e.dashSize!==void 0&&(a.dashSize=e.dashSize),e.gapSize!==void 0&&(a.gapSize=e.gapSize),e.scale!==void 0&&(a.scale=e.scale),e.polygonOffset!==void 0&&(a.polygonOffset=e.polygonOffset),e.polygonOffsetFactor!==void 0&&(a.polygonOffsetFactor=e.polygonOffsetFactor),e.polygonOffsetUnits!==void 0&&(a.polygonOffsetUnits=e.polygonOffsetUnits),e.dithering!==void 0&&(a.dithering=e.dithering),e.alphaToCoverage!==void 0&&(a.alphaToCoverage=e.alphaToCoverage),e.premultipliedAlpha!==void 0&&(a.premultipliedAlpha=e.premultipliedAlpha),e.forceSinglePass!==void 0&&(a.forceSinglePass=e.forceSinglePass),e.allowOverride!==void 0&&(a.allowOverride=e.allowOverride),e.visible!==void 0&&(a.visible=e.visible),e.toneMapped!==void 0&&(a.toneMapped=e.toneMapped),e.userData!==void 0&&(a.userData=e.userData),e.vertexColors!==void 0&&(typeof e.vertexColors=="number"?a.vertexColors=e.vertexColors>0:a.vertexColors=e.vertexColors),e.uniforms!==void 0)for(const s in e.uniforms){const l=e.uniforms[s];switch(a.uniforms[s]={},l.type){case"t":a.uniforms[s].value=n(l.value);break;case"c":a.uniforms[s].value=new Ut().setHex(l.value);break;case"v2":a.uniforms[s].value=new Ke().fromArray(l.value);break;case"v3":a.uniforms[s].value=new ee().fromArray(l.value);break;case"v4":a.uniforms[s].value=new yi().fromArray(l.value);break;case"m3":a.uniforms[s].value=new Sn().fromArray(l.value);break;case"m4":a.uniforms[s].value=new on().fromArray(l.value);break;default:a.uniforms[s].value=l.value}}if(e.defines!==void 0&&(a.defines=e.defines),e.vertexShader!==void 0&&(a.vertexShader=e.vertexShader),e.fragmentShader!==void 0&&(a.fragmentShader=e.fragmentShader),e.glslVersion!==void 0&&(a.glslVersion=e.glslVersion),e.extensions!==void 0)for(const s in e.extensions)a.extensions[s]=e.extensions[s];if(e.lights!==void 0&&(a.lights=e.lights),e.clipping!==void 0&&(a.clipping=e.clipping),e.size!==void 0&&(a.size=e.size),e.sizeAttenuation!==void 0&&(a.sizeAttenuation=e.sizeAttenuation),e.map!==void 0&&(a.map=n(e.map)),e.matcap!==void 0&&(a.matcap=n(e.matcap)),e.alphaMap!==void 0&&(a.alphaMap=n(e.alphaMap)),e.bumpMap!==void 0&&(a.bumpMap=n(e.bumpMap)),e.bumpScale!==void 0&&(a.bumpScale=e.bumpScale),e.normalMap!==void 0&&(a.normalMap=n(e.normalMap)),e.normalMapType!==void 0&&(a.normalMapType=e.normalMapType),e.normalScale!==void 0){let s=e.normalScale;Array.isArray(s)===!1&&(s=[s,s]),a.normalScale=new Ke().fromArray(s)}return e.displacementMap!==void 0&&(a.displacementMap=n(e.displacementMap)),e.displacementScale!==void 0&&(a.displacementScale=e.displacementScale),e.displacementBias!==void 0&&(a.displacementBias=e.displacementBias),e.roughnessMap!==void 0&&(a.roughnessMap=n(e.roughnessMap)),e.metalnessMap!==void 0&&(a.metalnessMap=n(e.metalnessMap)),e.emissiveMap!==void 0&&(a.emissiveMap=n(e.emissiveMap)),e.emissiveIntensity!==void 0&&(a.emissiveIntensity=e.emissiveIntensity),e.specularMap!==void 0&&(a.specularMap=n(e.specularMap)),e.specularIntensityMap!==void 0&&(a.specularIntensityMap=n(e.specularIntensityMap)),e.specularColorMap!==void 0&&(a.specularColorMap=n(e.specularColorMap)),e.envMap!==void 0&&(a.envMap=n(e.envMap)),e.envMapRotation!==void 0&&a.envMapRotation.fromArray(e.envMapRotation),e.envMapIntensity!==void 0&&(a.envMapIntensity=e.envMapIntensity),e.reflectivity!==void 0&&(a.reflectivity=e.reflectivity),e.refractionRatio!==void 0&&(a.refractionRatio=e.refractionRatio),e.lightMap!==void 0&&(a.lightMap=n(e.lightMap)),e.lightMapIntensity!==void 0&&(a.lightMapIntensity=e.lightMapIntensity),e.aoMap!==void 0&&(a.aoMap=n(e.aoMap)),e.aoMapIntensity!==void 0&&(a.aoMapIntensity=e.aoMapIntensity),e.gradientMap!==void 0&&(a.gradientMap=n(e.gradientMap)),e.clearcoatMap!==void 0&&(a.clearcoatMap=n(e.clearcoatMap)),e.clearcoatRoughnessMap!==void 0&&(a.clearcoatRoughnessMap=n(e.clearcoatRoughnessMap)),e.clearcoatNormalMap!==void 0&&(a.clearcoatNormalMap=n(e.clearcoatNormalMap)),e.clearcoatNormalScale!==void 0&&(a.clearcoatNormalScale=new Ke().fromArray(e.clearcoatNormalScale)),e.iridescenceMap!==void 0&&(a.iridescenceMap=n(e.iridescenceMap)),e.iridescenceThicknessMap!==void 0&&(a.iridescenceThicknessMap=n(e.iridescenceThicknessMap)),e.transmissionMap!==void 0&&(a.transmissionMap=n(e.transmissionMap)),e.thicknessMap!==void 0&&(a.thicknessMap=n(e.thicknessMap)),e.anisotropyMap!==void 0&&(a.anisotropyMap=n(e.anisotropyMap)),e.sheenColorMap!==void 0&&(a.sheenColorMap=n(e.sheenColorMap)),e.sheenRoughnessMap!==void 0&&(a.sheenRoughnessMap=n(e.sheenRoughnessMap)),a}setTextures(e){return this.textures=e,this}createMaterialFromType(e){return Gb.createMaterialFromType(e)}static createMaterialFromType(e){const t={ShadowMaterial:KN,SpriteMaterial:$E,RawShaderMaterial:cM,ShaderMaterial:ja,PointsMaterial:tM,MeshPhysicalMaterial:JN,MeshStandardMaterial:uM,MeshPhongMaterial:QN,MeshToonMaterial:$N,MeshNormalMaterial:eO,MeshLambertMaterial:hM,MeshDepthMaterial:Vb,MeshDistanceMaterial:fM,MeshBasicMaterial:mc,MeshMatcapMaterial:tO,LineDashedMaterial:nO,LineBasicMaterial:Gr,Material:vr};return new t[e]}}class cE{static extractUrlBase(e){const t=e.lastIndexOf("/");return t===-1?"./":e.slice(0,t+1)}static resolveURL(e,t){return typeof e!="string"||e===""?"":(/^https?:\/\//i.test(t)&&/^\//.test(e)&&(t=t.replace(/(^https?:\/\/[^\/]+).*/i,"$1")),/^(https?:)?\/\//i.test(e)||/^data:.*,.*$/i.test(e)||/^blob:.*$/i.test(e)?e:t+e)}}class gO extends mn{constructor(){super(),this.isInstancedBufferGeometry=!0,this.type="InstancedBufferGeometry",this.instanceCount=1/0}copy(e){return super.copy(e),this.instanceCount=e.instanceCount,this}toJSON(){const e=super.toJSON();return e.instanceCount=this.instanceCount,e.isInstancedBufferGeometry=!0,e}}class vO extends yr{constructor(e){super(e)}load(e,t,n,a){const s=this,l=new as(s.manager);l.setPath(s.path),l.setRequestHeader(s.requestHeader),l.setWithCredentials(s.withCredentials),l.load(e,function(u){try{t(s.parse(JSON.parse(u)))}catch(d){a?a(d):Qt(d),s.manager.itemError(e)}},n,a)}parse(e){const t={},n={};function a(b,x){if(t[x]!==void 0)return t[x];const w=b.interleavedBuffers[x],S=s(b,w.buffer),C=Wd(w.type,S),N=new Tb(C,w.stride);return N.uuid=w.uuid,t[x]=N,N}function s(b,x){if(n[x]!==void 0)return n[x];const w=b.arrayBuffers[x],S=new Uint32Array(w).buffer;return n[x]=S,S}const l=e.isInstancedBufferGeometry?new gO:new mn,u=e.data.index;if(u!==void 0){const b=Wd(u.type,u.array);l.setIndex(new ni(b,1))}const d=e.data.attributes;for(const b in d){const x=d[b];let T;if(x.isInterleavedBufferAttribute){const w=a(e.data,x.data);T=new Qh(w,x.itemSize,x.offset,x.normalized)}else{const w=Wd(x.type,x.array),S=x.isInstancedBufferAttribute?hp:ni;T=new S(w,x.itemSize,x.normalized)}x.name!==void 0&&(T.name=x.name),x.usage!==void 0&&T.setUsage(x.usage),l.setAttribute(b,T)}const p=e.data.morphAttributes;if(p)for(const b in p){const x=p[b],T=[];for(let w=0,S=x.length;w<S;w++){const C=x[w];let N;if(C.isInterleavedBufferAttribute){const O=a(e.data,C.data);N=new Qh(O,C.itemSize,C.offset,C.normalized)}else{const O=Wd(C.type,C.array);N=new ni(O,C.itemSize,C.normalized)}C.name!==void 0&&(N.name=C.name),T.push(N)}l.morphAttributes[b]=T}e.data.morphTargetsRelative&&(l.morphTargetsRelative=!0);const y=e.data.groups||e.data.drawcalls||e.data.offsets;if(y!==void 0)for(let b=0,x=y.length;b!==x;++b){const T=y[b];l.addGroup(T.start,T.count,T.materialIndex)}const _=e.data.boundingSphere;return _!==void 0&&(l.boundingSphere=new Va().fromJSON(_)),e.name&&(l.name=e.name),e.userData&&(l.userData=e.userData),l}}class kB extends yr{constructor(e){super(e)}load(e,t,n,a){const s=this,l=this.path===""?cE.extractUrlBase(e):this.path;this.resourcePath=this.resourcePath||l;const u=new as(this.manager);u.setPath(this.path),u.setRequestHeader(this.requestHeader),u.setWithCredentials(this.withCredentials),u.load(e,function(d){let p=null;try{p=JSON.parse(d)}catch(y){a!==void 0&&a(y),y("ObjectLoader: Can't parse "+e+".",y.message);return}const g=p.metadata;if(g===void 0||g.type===void 0||g.type.toLowerCase()==="geometry"){a!==void 0&&a(new Error("THREE.ObjectLoader: Can't load "+e)),Qt("ObjectLoader: Can't load "+e);return}s.parse(p,t)},n,a)}async loadAsync(e,t){const n=this,a=this.path===""?cE.extractUrlBase(e):this.path;this.resourcePath=this.resourcePath||a;const s=new as(this.manager);s.setPath(this.path),s.setRequestHeader(this.requestHeader),s.setWithCredentials(this.withCredentials);const l=await s.loadAsync(e,t),u=JSON.parse(l),d=u.metadata;if(d===void 0||d.type===void 0||d.type.toLowerCase()==="geometry")throw new Error("THREE.ObjectLoader: Can't load "+e);return await n.parseAsync(u)}parse(e,t){const n=this.parseAnimations(e.animations),a=this.parseShapes(e.shapes),s=this.parseGeometries(e.geometries,a),l=this.parseImages(e.images,function(){t!==void 0&&t(p)}),u=this.parseTextures(e.textures,l),d=this.parseMaterials(e.materials,u),p=this.parseObject(e.object,s,d,u,n),g=this.parseSkeletons(e.skeletons,p);if(this.bindSkeletons(p,g),this.bindLightTargets(p),t!==void 0){let y=!1;for(const _ in l)if(l[_].data instanceof HTMLImageElement){y=!0;break}y===!1&&t(p)}return p}async parseAsync(e){const t=this.parseAnimations(e.animations),n=this.parseShapes(e.shapes),a=this.parseGeometries(e.geometries,n),s=await this.parseImagesAsync(e.images),l=this.parseTextures(e.textures,s),u=this.parseMaterials(e.materials,l),d=this.parseObject(e.object,a,u,l,t),p=this.parseSkeletons(e.skeletons,d);return this.bindSkeletons(d,p),this.bindLightTargets(d),d}parseShapes(e){const t={};if(e!==void 0)for(let n=0,a=e.length;n<a;n++){const s=new Zh().fromJSON(e[n]);t[s.uuid]=s}return t}parseSkeletons(e,t){const n={},a={};if(t.traverse(function(s){s.isBone&&(a[s.uuid]=s)}),e!==void 0)for(let s=0,l=e.length;s<l;s++){const u=new Ab().fromJSON(e[s],a);n[u.uuid]=u}return n}parseGeometries(e,t){const n={};if(e!==void 0){const a=new vO;for(let s=0,l=e.length;s<l;s++){let u;const d=e[s];switch(d.type){case"BufferGeometry":case"InstancedBufferGeometry":u=a.parse(d);break;default:d.type in QA?u=QA[d.type].fromJSON(d,t):Rt(`ObjectLoader: Unsupported geometry type "${d.type}"`)}u.uuid=d.uuid,d.name!==void 0&&(u.name=d.name),d.userData!==void 0&&(u.userData=d.userData),n[d.uuid]=u}}return n}parseMaterials(e,t){const n={},a={};if(e!==void 0){const s=new Gb;s.setTextures(t);for(let l=0,u=e.length;l<u;l++){const d=e[l];n[d.uuid]===void 0&&(n[d.uuid]=s.parse(d)),a[d.uuid]=n[d.uuid]}}return a}parseAnimations(e){const t={};if(e!==void 0)for(let n=0;n<e.length;n++){const a=e[n],s=Wg.parse(a);t[s.uuid]=s}return t}parseImages(e,t){const n=this,a={};let s;function l(d){return n.manager.itemStart(d),s.load(d,function(){n.manager.itemEnd(d)},void 0,function(){n.manager.itemError(d),n.manager.itemEnd(d)})}function u(d){if(typeof d=="string"){const p=d,g=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(p)?p:n.resourcePath+p;return l(g)}else return d.data?{data:Wd(d.type,d.data),width:d.width,height:d.height}:null}if(e!==void 0&&e.length>0){const d=new jb(t);s=new Yg(d),s.setCrossOrigin(this.crossOrigin);for(let p=0,g=e.length;p<g;p++){const y=e[p],_=y.url;if(Array.isArray(_)){const b=[];for(let x=0,T=_.length;x<T;x++){const w=_[x],S=u(w);S!==null&&(S instanceof HTMLImageElement?b.push(S):b.push(new Xs(S.data,S.width,S.height)))}a[y.uuid]=new pu(b)}else{const b=u(y.url);a[y.uuid]=new pu(b)}}}return a}async parseImagesAsync(e){const t=this,n={};let a;async function s(l){if(typeof l=="string"){const u=l,d=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(u)?u:t.resourcePath+u;return await a.loadAsync(d)}else return l.data?{data:Wd(l.type,l.data),width:l.width,height:l.height}:null}if(e!==void 0&&e.length>0){a=new Yg(this.manager),a.setCrossOrigin(this.crossOrigin);for(let l=0,u=e.length;l<u;l++){const d=e[l],p=d.url;if(Array.isArray(p)){const g=[];for(let y=0,_=p.length;y<_;y++){const b=p[y],x=await s(b);x!==null&&(x instanceof HTMLImageElement?g.push(x):g.push(new Xs(x.data,x.width,x.height)))}n[d.uuid]=new pu(g)}else{const g=await s(d.url);n[d.uuid]=new pu(g)}}}return n}parseTextures(e,t){function n(s,l){return typeof s=="number"?s:(Rt("ObjectLoader.parseTexture: Constant should be in numeric form.",s),l[s])}const a={};if(e!==void 0)for(let s=0,l=e.length;s<l;s++){const u=e[s];u.image===void 0&&Rt('ObjectLoader: No "image" specified for',u.uuid),t[u.image]===void 0&&Rt("ObjectLoader: Undefined image",u.image);const d=t[u.image],p=d.data;let g;Array.isArray(p)?(g=new av,p.length===6&&(g.needsUpdate=!0)):(p&&p.data?g=new Xs:g=new hi,p&&(g.needsUpdate=!0)),g.source=d,g.uuid=u.uuid,u.name!==void 0&&(g.name=u.name),u.mapping!==void 0&&(g.mapping=n(u.mapping,HB)),u.channel!==void 0&&(g.channel=u.channel),u.offset!==void 0&&g.offset.fromArray(u.offset),u.repeat!==void 0&&g.repeat.fromArray(u.repeat),u.center!==void 0&&g.center.fromArray(u.center),u.rotation!==void 0&&(g.rotation=u.rotation),u.wrap!==void 0&&(g.wrapS=n(u.wrap[0],tC),g.wrapT=n(u.wrap[1],tC)),u.format!==void 0&&(g.format=u.format),u.internalFormat!==void 0&&(g.internalFormat=u.internalFormat),u.type!==void 0&&(g.type=u.type),u.colorSpace!==void 0&&(g.colorSpace=u.colorSpace),u.minFilter!==void 0&&(g.minFilter=n(u.minFilter,nC)),u.magFilter!==void 0&&(g.magFilter=n(u.magFilter,nC)),u.anisotropy!==void 0&&(g.anisotropy=u.anisotropy),u.flipY!==void 0&&(g.flipY=u.flipY),u.generateMipmaps!==void 0&&(g.generateMipmaps=u.generateMipmaps),u.premultiplyAlpha!==void 0&&(g.premultiplyAlpha=u.premultiplyAlpha),u.unpackAlignment!==void 0&&(g.unpackAlignment=u.unpackAlignment),u.compareFunction!==void 0&&(g.compareFunction=u.compareFunction),u.userData!==void 0&&(g.userData=u.userData),a[u.uuid]=g}return a}parseObject(e,t,n,a,s){let l;function u(_){return t[_]===void 0&&Rt("ObjectLoader: Undefined geometry",_),t[_]}function d(_){if(_!==void 0){if(Array.isArray(_)){const b=[];for(let x=0,T=_.length;x<T;x++){const w=_[x];n[w]===void 0&&Rt("ObjectLoader: Undefined material",w),b.push(n[w])}return b}return n[_]===void 0&&Rt("ObjectLoader: Undefined material",_),n[_]}}function p(_){return a[_]===void 0&&Rt("ObjectLoader: Undefined texture",_),a[_]}let g,y;switch(e.type){case"Scene":l=new rv,e.background!==void 0&&(Number.isInteger(e.background)?l.background=new Ut(e.background):l.background=p(e.background)),e.environment!==void 0&&(l.environment=p(e.environment)),e.fog!==void 0&&(e.fog.type==="Fog"?l.fog=new wb(e.fog.color,e.fog.near,e.fog.far):e.fog.type==="FogExp2"&&(l.fog=new Mb(e.fog.color,e.fog.density)),e.fog.name!==""&&(l.fog.name=e.fog.name)),e.backgroundBlurriness!==void 0&&(l.backgroundBlurriness=e.backgroundBlurriness),e.backgroundIntensity!==void 0&&(l.backgroundIntensity=e.backgroundIntensity),e.backgroundRotation!==void 0&&l.backgroundRotation.fromArray(e.backgroundRotation),e.environmentIntensity!==void 0&&(l.environmentIntensity=e.environmentIntensity),e.environmentRotation!==void 0&&l.environmentRotation.fromArray(e.environmentRotation);break;case"PerspectiveCamera":l=new ra(e.fov,e.aspect,e.near,e.far),e.focus!==void 0&&(l.focus=e.focus),e.zoom!==void 0&&(l.zoom=e.zoom),e.filmGauge!==void 0&&(l.filmGauge=e.filmGauge),e.filmOffset!==void 0&&(l.filmOffset=e.filmOffset),e.view!==void 0&&(l.view=Object.assign({},e.view));break;case"OrthographicCamera":l=new bl(e.left,e.right,e.top,e.bottom,e.near,e.far),e.zoom!==void 0&&(l.zoom=e.zoom),e.view!==void 0&&(l.view=Object.assign({},e.view));break;case"AmbientLight":l=new dO(e.color,e.intensity);break;case"DirectionalLight":l=new fO(e.color,e.intensity),l.target=e.target||"";break;case"PointLight":l=new hO(e.color,e.intensity,e.distance,e.decay);break;case"RectAreaLight":l=new pO(e.color,e.intensity,e.width,e.height);break;case"SpotLight":l=new uO(e.color,e.intensity,e.distance,e.angle,e.penumbra,e.decay),l.target=e.target||"";break;case"HemisphereLight":l=new cO(e.color,e.groundColor,e.intensity);break;case"LightProbe":const _=new yM().fromArray(e.sh);l=new mO(_,e.intensity);break;case"SkinnedMesh":g=u(e.geometry),y=d(e.material),l=new DN(g,y),e.bindMode!==void 0&&(l.bindMode=e.bindMode),e.bindMatrix!==void 0&&l.bindMatrix.fromArray(e.bindMatrix),e.skeleton!==void 0&&(l.skeleton=e.skeleton);break;case"Mesh":g=u(e.geometry),y=d(e.material),l=new Ui(g,y);break;case"InstancedMesh":g=u(e.geometry),y=d(e.material);const b=e.count,x=e.instanceMatrix,T=e.instanceColor;l=new UN(g,y,b),l.instanceMatrix=new hp(new Float32Array(x.array),16),T!==void 0&&(l.instanceColor=new hp(new Float32Array(T.array),T.itemSize));break;case"BatchedMesh":g=u(e.geometry),y=d(e.material),l=new LN(e.maxInstanceCount,e.maxVertexCount,e.maxIndexCount,y),l.geometry=g,l.perObjectFrustumCulled=e.perObjectFrustumCulled,l.sortObjects=e.sortObjects,l._drawRanges=e.drawRanges,l._reservedRanges=e.reservedRanges,l._geometryInfo=e.geometryInfo.map(w=>{let S=null,C=null;return w.boundingBox!==void 0&&(S=new Ha().fromJSON(w.boundingBox)),w.boundingSphere!==void 0&&(C=new Va().fromJSON(w.boundingSphere)),{...w,boundingBox:S,boundingSphere:C}}),l._instanceInfo=e.instanceInfo,l._availableInstanceIds=e._availableInstanceIds,l._availableGeometryIds=e._availableGeometryIds,l._nextIndexStart=e.nextIndexStart,l._nextVertexStart=e.nextVertexStart,l._geometryCount=e.geometryCount,l._maxInstanceCount=e.maxInstanceCount,l._maxVertexCount=e.maxVertexCount,l._maxIndexCount=e.maxIndexCount,l._geometryInitialized=e.geometryInitialized,l._matricesTexture=p(e.matricesTexture.uuid),l._indirectTexture=p(e.indirectTexture.uuid),e.colorsTexture!==void 0&&(l._colorsTexture=p(e.colorsTexture.uuid)),e.boundingSphere!==void 0&&(l.boundingSphere=new Va().fromJSON(e.boundingSphere)),e.boundingBox!==void 0&&(l.boundingBox=new Ha().fromJSON(e.boundingBox));break;case"LOD":l=new ON;break;case"Line":l=new bu(u(e.geometry),d(e.material));break;case"LineLoop":l=new IN(u(e.geometry),d(e.material));break;case"LineSegments":l=new El(u(e.geometry),d(e.material));break;case"PointCloud":case"Points":l=new PN(u(e.geometry),d(e.material));break;case"Sprite":l=new NN(d(e.material));break;case"Group":l=new Yd;break;case"Bone":l=new eM;break;default:l=new Yn}if(l.uuid=e.uuid,e.name!==void 0&&(l.name=e.name),e.matrix!==void 0?(l.matrix.fromArray(e.matrix),e.matrixAutoUpdate!==void 0&&(l.matrixAutoUpdate=e.matrixAutoUpdate),l.matrixAutoUpdate&&l.matrix.decompose(l.position,l.quaternion,l.scale)):(e.position!==void 0&&l.position.fromArray(e.position),e.rotation!==void 0&&l.rotation.fromArray(e.rotation),e.quaternion!==void 0&&l.quaternion.fromArray(e.quaternion),e.scale!==void 0&&l.scale.fromArray(e.scale)),e.up!==void 0&&l.up.fromArray(e.up),e.castShadow!==void 0&&(l.castShadow=e.castShadow),e.receiveShadow!==void 0&&(l.receiveShadow=e.receiveShadow),e.shadow&&(e.shadow.intensity!==void 0&&(l.shadow.intensity=e.shadow.intensity),e.shadow.bias!==void 0&&(l.shadow.bias=e.shadow.bias),e.shadow.normalBias!==void 0&&(l.shadow.normalBias=e.shadow.normalBias),e.shadow.radius!==void 0&&(l.shadow.radius=e.shadow.radius),e.shadow.mapSize!==void 0&&l.shadow.mapSize.fromArray(e.shadow.mapSize),e.shadow.camera!==void 0&&(l.shadow.camera=this.parseObject(e.shadow.camera))),e.visible!==void 0&&(l.visible=e.visible),e.frustumCulled!==void 0&&(l.frustumCulled=e.frustumCulled),e.renderOrder!==void 0&&(l.renderOrder=e.renderOrder),e.userData!==void 0&&(l.userData=e.userData),e.layers!==void 0&&(l.layers.mask=e.layers),e.children!==void 0){const _=e.children;for(let b=0;b<_.length;b++)l.add(this.parseObject(_[b],t,n,a,s))}if(e.animations!==void 0){const _=e.animations;for(let b=0;b<_.length;b++){const x=_[b];l.animations.push(s[x])}}if(e.type==="LOD"){e.autoUpdate!==void 0&&(l.autoUpdate=e.autoUpdate);const _=e.levels;for(let b=0;b<_.length;b++){const x=_[b],T=l.getObjectByProperty("uuid",x.object);T!==void 0&&l.addLevel(T,x.distance,x.hysteresis)}}return l}bindSkeletons(e,t){Object.keys(t).length!==0&&e.traverse(function(n){if(n.isSkinnedMesh===!0&&n.skeleton!==void 0){const a=t[n.skeleton];a===void 0?Rt("ObjectLoader: No skeleton found with UUID:",n.skeleton):n.bind(a,n.bindMatrix)}})}bindLightTargets(e){e.traverse(function(t){if(t.isDirectionalLight||t.isSpotLight){const n=t.target,a=e.getObjectByProperty("uuid",n);a!==void 0?t.target=a:t.target=new Yn}})}}const HB={UVMapping:vu,CubeReflectionMapping:No,CubeRefractionMapping:yu,EquirectangularReflectionMapping:ip,EquirectangularRefractionMapping:Ug,CubeUVReflectionMapping:_p},tC={RepeatWrapping:Lg,ClampToEdgeWrapping:Qi,MirroredRepeatWrapping:Ig},nC={NearestFilter:Vi,NearestMipmapNearestFilter:VE,NearestMipmapLinearFilter:Xd,LinearFilter:Vn,LinearMipmapNearestFilter:_g,LinearMipmapLinearFilter:yl},QS=new WeakMap;class VB extends yr{constructor(e){super(e),this.isImageBitmapLoader=!0,typeof createImageBitmap>"u"&&Rt("ImageBitmapLoader: createImageBitmap() not supported."),typeof fetch>"u"&&Rt("ImageBitmapLoader: fetch() not supported."),this.options={premultiplyAlpha:"none"},this._abortController=new AbortController}setOptions(e){return this.options=e,this}load(e,t,n,a){e===void 0&&(e=""),this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const s=this,l=_l.get(`image-bitmap:${e}`);if(l!==void 0){if(s.manager.itemStart(e),l.then){l.then(p=>{if(QS.has(l)===!0)a&&a(QS.get(l)),s.manager.itemError(e),s.manager.itemEnd(e);else return t&&t(p),s.manager.itemEnd(e),p});return}return setTimeout(function(){t&&t(l),s.manager.itemEnd(e)},0),l}const u={};u.credentials=this.crossOrigin==="anonymous"?"same-origin":"include",u.headers=this.requestHeader,u.signal=typeof AbortSignal.any=="function"?AbortSignal.any([this._abortController.signal,this.manager.abortController.signal]):this._abortController.signal;const d=fetch(e,u).then(function(p){return p.blob()}).then(function(p){return createImageBitmap(p,Object.assign(s.options,{colorSpaceConversion:"none"}))}).then(function(p){return _l.add(`image-bitmap:${e}`,p),t&&t(p),s.manager.itemEnd(e),p}).catch(function(p){a&&a(p),QS.set(d,p),_l.remove(`image-bitmap:${e}`),s.manager.itemError(e),s.manager.itemEnd(e)});_l.add(`image-bitmap:${e}`,d),s.manager.itemStart(e)}abort(){return this._abortController.abort(),this._abortController=new AbortController,this}}let Cy;class _M{static getContext(){return Cy===void 0&&(Cy=new(window.AudioContext||window.webkitAudioContext)),Cy}static setContext(e){Cy=e}}class jB extends yr{constructor(e){super(e)}load(e,t,n,a){const s=this,l=new as(this.manager);l.setResponseType("arraybuffer"),l.setPath(this.path),l.setRequestHeader(this.requestHeader),l.setWithCredentials(this.withCredentials),l.load(e,function(d){try{const p=d.slice(0);_M.getContext().decodeAudioData(p,function(y){t(y)}).catch(u)}catch(p){u(p)}},n,a);function u(d){a?a(d):Qt(d),s.manager.itemError(e)}}}const iC=new on,aC=new on,Sh=new on;class GB{constructor(){this.type="StereoCamera",this.aspect=1,this.eyeSep=.064,this.cameraL=new ra,this.cameraL.layers.enable(1),this.cameraL.matrixAutoUpdate=!1,this.cameraR=new ra,this.cameraR.layers.enable(2),this.cameraR.matrixAutoUpdate=!1,this._cache={focus:null,fov:null,aspect:null,near:null,far:null,zoom:null,eyeSep:null}}update(e){const t=this._cache;if(t.focus!==e.focus||t.fov!==e.fov||t.aspect!==e.aspect*this.aspect||t.near!==e.near||t.far!==e.far||t.zoom!==e.zoom||t.eyeSep!==this.eyeSep){t.focus=e.focus,t.fov=e.fov,t.aspect=e.aspect*this.aspect,t.near=e.near,t.far=e.far,t.zoom=e.zoom,t.eyeSep=this.eyeSep,Sh.copy(e.projectionMatrix);const a=t.eyeSep/2,s=a*t.near/t.focus,l=t.near*Math.tan(Yh*t.fov*.5)/t.zoom;let u,d;aC.elements[12]=-a,iC.elements[12]=a,u=-l*t.aspect+s,d=l*t.aspect+s,Sh.elements[0]=2*t.near/(d-u),Sh.elements[8]=(d+u)/(d-u),this.cameraL.projectionMatrix.copy(Sh),u=-l*t.aspect-s,d=l*t.aspect-s,Sh.elements[0]=2*t.near/(d-u),Sh.elements[8]=(d+u)/(d-u),this.cameraR.projectionMatrix.copy(Sh)}this.cameraL.matrixWorld.copy(e.matrixWorld).multiply(aC),this.cameraR.matrixWorld.copy(e.matrixWorld).multiply(iC)}}class yO extends ra{constructor(e=[]){super(),this.isArrayCamera=!0,this.isMultiViewCamera=!1,this.cameras=e}}class bM{constructor(e=!0){this.autoStart=e,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1}start(){this.startTime=performance.now(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0}stop(){this.getElapsedTime(),this.running=!1,this.autoStart=!1}getElapsedTime(){return this.getDelta(),this.elapsedTime}getDelta(){let e=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){const t=performance.now();e=(t-this.oldTime)/1e3,this.oldTime=t,this.elapsedTime+=e}return e}}const Eh=new ee,$S=new wa,qB=new ee,Mh=new ee,wh=new ee;class XB extends Yn{constructor(){super(),this.type="AudioListener",this.context=_M.getContext(),this.gain=this.context.createGain(),this.gain.connect(this.context.destination),this.filter=null,this.timeDelta=0,this._clock=new bM}getInput(){return this.gain}removeFilter(){return this.filter!==null&&(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination),this.gain.connect(this.context.destination),this.filter=null),this}getFilter(){return this.filter}setFilter(e){return this.filter!==null?(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination)):this.gain.disconnect(this.context.destination),this.filter=e,this.gain.connect(this.filter),this.filter.connect(this.context.destination),this}getMasterVolume(){return this.gain.gain.value}setMasterVolume(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}updateMatrixWorld(e){super.updateMatrixWorld(e);const t=this.context.listener;if(this.timeDelta=this._clock.getDelta(),this.matrixWorld.decompose(Eh,$S,qB),Mh.set(0,0,-1).applyQuaternion($S),wh.set(0,1,0).applyQuaternion($S),t.positionX){const n=this.context.currentTime+this.timeDelta;t.positionX.linearRampToValueAtTime(Eh.x,n),t.positionY.linearRampToValueAtTime(Eh.y,n),t.positionZ.linearRampToValueAtTime(Eh.z,n),t.forwardX.linearRampToValueAtTime(Mh.x,n),t.forwardY.linearRampToValueAtTime(Mh.y,n),t.forwardZ.linearRampToValueAtTime(Mh.z,n),t.upX.linearRampToValueAtTime(wh.x,n),t.upY.linearRampToValueAtTime(wh.y,n),t.upZ.linearRampToValueAtTime(wh.z,n)}else t.setPosition(Eh.x,Eh.y,Eh.z),t.setOrientation(Mh.x,Mh.y,Mh.z,wh.x,wh.y,wh.z)}}class _O extends Yn{constructor(e){super(),this.type="Audio",this.listener=e,this.context=e.context,this.gain=this.context.createGain(),this.gain.connect(e.getInput()),this.autoplay=!1,this.buffer=null,this.detune=0,this.loop=!1,this.loopStart=0,this.loopEnd=0,this.offset=0,this.duration=void 0,this.playbackRate=1,this.isPlaying=!1,this.hasPlaybackControl=!0,this.source=null,this.sourceType="empty",this._startedAt=0,this._progress=0,this._connected=!1,this.filters=[]}getOutput(){return this.gain}setNodeSource(e){return this.hasPlaybackControl=!1,this.sourceType="audioNode",this.source=e,this.connect(),this}setMediaElementSource(e){return this.hasPlaybackControl=!1,this.sourceType="mediaNode",this.source=this.context.createMediaElementSource(e),this.connect(),this}setMediaStreamSource(e){return this.hasPlaybackControl=!1,this.sourceType="mediaStreamNode",this.source=this.context.createMediaStreamSource(e),this.connect(),this}setBuffer(e){return this.buffer=e,this.sourceType="buffer",this.autoplay&&this.play(),this}play(e=0){if(this.isPlaying===!0){Rt("Audio: Audio is already playing.");return}if(this.hasPlaybackControl===!1){Rt("Audio: this Audio has no playback control.");return}this._startedAt=this.context.currentTime+e;const t=this.context.createBufferSource();return t.buffer=this.buffer,t.loop=this.loop,t.loopStart=this.loopStart,t.loopEnd=this.loopEnd,t.onended=this.onEnded.bind(this),t.start(this._startedAt,this._progress+this.offset,this.duration),this.isPlaying=!0,this.source=t,this.setDetune(this.detune),this.setPlaybackRate(this.playbackRate),this.connect()}pause(){if(this.hasPlaybackControl===!1){Rt("Audio: this Audio has no playback control.");return}return this.isPlaying===!0&&(this._progress+=Math.max(this.context.currentTime-this._startedAt,0)*this.playbackRate,this.loop===!0&&(this._progress=this._progress%(this.duration||this.buffer.duration)),this.source.stop(),this.source.onended=null,this.isPlaying=!1),this}stop(e=0){if(this.hasPlaybackControl===!1){Rt("Audio: this Audio has no playback control.");return}return this._progress=0,this.source!==null&&(this.source.stop(this.context.currentTime+e),this.source.onended=null),this.isPlaying=!1,this}connect(){if(this.filters.length>0){this.source.connect(this.filters[0]);for(let e=1,t=this.filters.length;e<t;e++)this.filters[e-1].connect(this.filters[e]);this.filters[this.filters.length-1].connect(this.getOutput())}else this.source.connect(this.getOutput());return this._connected=!0,this}disconnect(){if(this._connected!==!1){if(this.filters.length>0){this.source.disconnect(this.filters[0]);for(let e=1,t=this.filters.length;e<t;e++)this.filters[e-1].disconnect(this.filters[e]);this.filters[this.filters.length-1].disconnect(this.getOutput())}else this.source.disconnect(this.getOutput());return this._connected=!1,this}}getFilters(){return this.filters}setFilters(e){return e||(e=[]),this._connected===!0?(this.disconnect(),this.filters=e.slice(),this.connect()):this.filters=e.slice(),this}setDetune(e){return this.detune=e,this.isPlaying===!0&&this.source.detune!==void 0&&this.source.detune.setTargetAtTime(this.detune,this.context.currentTime,.01),this}getDetune(){return this.detune}getFilter(){return this.getFilters()[0]}setFilter(e){return this.setFilters(e?[e]:[])}setPlaybackRate(e){if(this.hasPlaybackControl===!1){Rt("Audio: this Audio has no playback control.");return}return this.playbackRate=e,this.isPlaying===!0&&this.source.playbackRate.setTargetAtTime(this.playbackRate,this.context.currentTime,.01),this}getPlaybackRate(){return this.playbackRate}onEnded(){this.isPlaying=!1,this._progress=0}getLoop(){return this.hasPlaybackControl===!1?(Rt("Audio: this Audio has no playback control."),!1):this.loop}setLoop(e){if(this.hasPlaybackControl===!1){Rt("Audio: this Audio has no playback control.");return}return this.loop=e,this.isPlaying===!0&&(this.source.loop=this.loop),this}setLoopStart(e){return this.loopStart=e,this}setLoopEnd(e){return this.loopEnd=e,this}getVolume(){return this.gain.gain.value}setVolume(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}copy(e,t){return super.copy(e,t),e.sourceType!=="buffer"?(Rt("Audio: Audio source type cannot be copied."),this):(this.autoplay=e.autoplay,this.buffer=e.buffer,this.detune=e.detune,this.loop=e.loop,this.loopStart=e.loopStart,this.loopEnd=e.loopEnd,this.offset=e.offset,this.duration=e.duration,this.playbackRate=e.playbackRate,this.hasPlaybackControl=e.hasPlaybackControl,this.sourceType=e.sourceType,this.filters=e.filters.slice(),this)}clone(e){return new this.constructor(this.listener).copy(this,e)}}const Th=new ee,rC=new wa,WB=new ee,Ah=new ee;class YB extends _O{constructor(e){super(e),this.panner=this.context.createPanner(),this.panner.panningModel="HRTF",this.panner.connect(this.gain)}connect(){return super.connect(),this.panner.connect(this.gain),this}disconnect(){return super.disconnect(),this.panner.disconnect(this.gain),this}getOutput(){return this.panner}getRefDistance(){return this.panner.refDistance}setRefDistance(e){return this.panner.refDistance=e,this}getRolloffFactor(){return this.panner.rolloffFactor}setRolloffFactor(e){return this.panner.rolloffFactor=e,this}getDistanceModel(){return this.panner.distanceModel}setDistanceModel(e){return this.panner.distanceModel=e,this}getMaxDistance(){return this.panner.maxDistance}setMaxDistance(e){return this.panner.maxDistance=e,this}setDirectionalCone(e,t,n){return this.panner.coneInnerAngle=e,this.panner.coneOuterAngle=t,this.panner.coneOuterGain=n,this}updateMatrixWorld(e){if(super.updateMatrixWorld(e),this.hasPlaybackControl===!0&&this.isPlaying===!1)return;this.matrixWorld.decompose(Th,rC,WB),Ah.set(0,0,1).applyQuaternion(rC);const t=this.panner;if(t.positionX){const n=this.context.currentTime+this.listener.timeDelta;t.positionX.linearRampToValueAtTime(Th.x,n),t.positionY.linearRampToValueAtTime(Th.y,n),t.positionZ.linearRampToValueAtTime(Th.z,n),t.orientationX.linearRampToValueAtTime(Ah.x,n),t.orientationY.linearRampToValueAtTime(Ah.y,n),t.orientationZ.linearRampToValueAtTime(Ah.z,n)}else t.setPosition(Th.x,Th.y,Th.z),t.setOrientation(Ah.x,Ah.y,Ah.z)}}class ZB{constructor(e,t=2048){this.analyser=e.context.createAnalyser(),this.analyser.fftSize=t,this.data=new Uint8Array(this.analyser.frequencyBinCount),e.getOutput().connect(this.analyser)}getFrequencyData(){return this.analyser.getByteFrequencyData(this.data),this.data}getAverageFrequency(){let e=0;const t=this.getFrequencyData();for(let n=0;n<t.length;n++)e+=t[n];return e/t.length}}class bO{constructor(e,t,n){this.binding=e,this.valueSize=n;let a,s,l;switch(t){case"quaternion":a=this._slerp,s=this._slerpAdditive,l=this._setAdditiveIdentityQuaternion,this.buffer=new Float64Array(n*6),this._workIndex=5;break;case"string":case"bool":a=this._select,s=this._select,l=this._setAdditiveIdentityOther,this.buffer=new Array(n*5);break;default:a=this._lerp,s=this._lerpAdditive,l=this._setAdditiveIdentityNumeric,this.buffer=new Float64Array(n*5)}this._mixBufferRegion=a,this._mixBufferRegionAdditive=s,this._setIdentity=l,this._origIndex=3,this._addIndex=4,this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,this.useCount=0,this.referenceCount=0}accumulate(e,t){const n=this.buffer,a=this.valueSize,s=e*a+a;let l=this.cumulativeWeight;if(l===0){for(let u=0;u!==a;++u)n[s+u]=n[u];l=t}else{l+=t;const u=t/l;this._mixBufferRegion(n,s,0,u,a)}this.cumulativeWeight=l}accumulateAdditive(e){const t=this.buffer,n=this.valueSize,a=n*this._addIndex;this.cumulativeWeightAdditive===0&&this._setIdentity(),this._mixBufferRegionAdditive(t,a,0,e,n),this.cumulativeWeightAdditive+=e}apply(e){const t=this.valueSize,n=this.buffer,a=e*t+t,s=this.cumulativeWeight,l=this.cumulativeWeightAdditive,u=this.binding;if(this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,s<1){const d=t*this._origIndex;this._mixBufferRegion(n,a,d,1-s,t)}l>0&&this._mixBufferRegionAdditive(n,a,this._addIndex*t,1,t);for(let d=t,p=t+t;d!==p;++d)if(n[d]!==n[d+t]){u.setValue(n,a);break}}saveOriginalState(){const e=this.binding,t=this.buffer,n=this.valueSize,a=n*this._origIndex;e.getValue(t,a);for(let s=n,l=a;s!==l;++s)t[s]=t[a+s%n];this._setIdentity(),this.cumulativeWeight=0,this.cumulativeWeightAdditive=0}restoreOriginalState(){const e=this.valueSize*3;this.binding.setValue(this.buffer,e)}_setAdditiveIdentityNumeric(){const e=this._addIndex*this.valueSize,t=e+this.valueSize;for(let n=e;n<t;n++)this.buffer[n]=0}_setAdditiveIdentityQuaternion(){this._setAdditiveIdentityNumeric(),this.buffer[this._addIndex*this.valueSize+3]=1}_setAdditiveIdentityOther(){const e=this._origIndex*this.valueSize,t=this._addIndex*this.valueSize;for(let n=0;n<this.valueSize;n++)this.buffer[t+n]=this.buffer[e+n]}_select(e,t,n,a,s){if(a>=.5)for(let l=0;l!==s;++l)e[t+l]=e[n+l]}_slerp(e,t,n,a){wa.slerpFlat(e,t,e,t,e,n,a)}_slerpAdditive(e,t,n,a,s){const l=this._workIndex*s;wa.multiplyQuaternionsFlat(e,l,e,t,e,n),wa.slerpFlat(e,t,e,t,e,l,a)}_lerp(e,t,n,a,s){const l=1-a;for(let u=0;u!==s;++u){const d=t+u;e[d]=e[d]*l+e[n+u]*a}}_lerpAdditive(e,t,n,a,s){for(let l=0;l!==s;++l){const u=t+l;e[u]=e[u]+e[n+l]*a}}}const xM="\\[\\]\\.:\\/",KB=new RegExp("["+xM+"]","g"),SM="[^"+xM+"]",JB="[^"+xM.replace("\\.","")+"]",QB=/((?:WC+[\/:])*)/.source.replace("WC",SM),$B=/(WCOD+)?/.source.replace("WCOD",JB),e5=/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",SM),t5=/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",SM),n5=new RegExp("^"+QB+$B+e5+t5+"$"),i5=["material","materials","bones","map"];class a5{constructor(e,t,n){const a=n||Wn.parseTrackName(t);this._targetGroup=e,this._bindings=e.subscribe_(t,a)}getValue(e,t){this.bind();const n=this._targetGroup.nCachedObjects_,a=this._bindings[n];a!==void 0&&a.getValue(e,t)}setValue(e,t){const n=this._bindings;for(let a=this._targetGroup.nCachedObjects_,s=n.length;a!==s;++a)n[a].setValue(e,t)}bind(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,n=e.length;t!==n;++t)e[t].bind()}unbind(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,n=e.length;t!==n;++t)e[t].unbind()}}class Wn{constructor(e,t,n){this.path=t,this.parsedPath=n||Wn.parseTrackName(t),this.node=Wn.findNode(e,this.parsedPath.nodeName),this.rootNode=e,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}static create(e,t,n){return e&&e.isAnimationObjectGroup?new Wn.Composite(e,t,n):new Wn(e,t,n)}static sanitizeNodeName(e){return e.replace(/\s/g,"_").replace(KB,"")}static parseTrackName(e){const t=n5.exec(e);if(t===null)throw new Error("PropertyBinding: Cannot parse trackName: "+e);const n={nodeName:t[2],objectName:t[3],objectIndex:t[4],propertyName:t[5],propertyIndex:t[6]},a=n.nodeName&&n.nodeName.lastIndexOf(".");if(a!==void 0&&a!==-1){const s=n.nodeName.substring(a+1);i5.indexOf(s)!==-1&&(n.nodeName=n.nodeName.substring(0,a),n.objectName=s)}if(n.propertyName===null||n.propertyName.length===0)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+e);return n}static findNode(e,t){if(t===void 0||t===""||t==="."||t===-1||t===e.name||t===e.uuid)return e;if(e.skeleton){const n=e.skeleton.getBoneByName(t);if(n!==void 0)return n}if(e.children){const n=function(s){for(let l=0;l<s.length;l++){const u=s[l];if(u.name===t||u.uuid===t)return u;const d=n(u.children);if(d)return d}return null},a=n(e.children);if(a)return a}return null}_getValue_unavailable(){}_setValue_unavailable(){}_getValue_direct(e,t){e[t]=this.targetObject[this.propertyName]}_getValue_array(e,t){const n=this.resolvedProperty;for(let a=0,s=n.length;a!==s;++a)e[t++]=n[a]}_getValue_arrayElement(e,t){e[t]=this.resolvedProperty[this.propertyIndex]}_getValue_toArray(e,t){this.resolvedProperty.toArray(e,t)}_setValue_direct(e,t){this.targetObject[this.propertyName]=e[t]}_setValue_direct_setNeedsUpdate(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.needsUpdate=!0}_setValue_direct_setMatrixWorldNeedsUpdate(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_array(e,t){const n=this.resolvedProperty;for(let a=0,s=n.length;a!==s;++a)n[a]=e[t++]}_setValue_array_setNeedsUpdate(e,t){const n=this.resolvedProperty;for(let a=0,s=n.length;a!==s;++a)n[a]=e[t++];this.targetObject.needsUpdate=!0}_setValue_array_setMatrixWorldNeedsUpdate(e,t){const n=this.resolvedProperty;for(let a=0,s=n.length;a!==s;++a)n[a]=e[t++];this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_arrayElement(e,t){this.resolvedProperty[this.propertyIndex]=e[t]}_setValue_arrayElement_setNeedsUpdate(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.needsUpdate=!0}_setValue_arrayElement_setMatrixWorldNeedsUpdate(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_fromArray(e,t){this.resolvedProperty.fromArray(e,t)}_setValue_fromArray_setNeedsUpdate(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.needsUpdate=!0}_setValue_fromArray_setMatrixWorldNeedsUpdate(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.matrixWorldNeedsUpdate=!0}_getValue_unbound(e,t){this.bind(),this.getValue(e,t)}_setValue_unbound(e,t){this.bind(),this.setValue(e,t)}bind(){let e=this.node;const t=this.parsedPath,n=t.objectName,a=t.propertyName;let s=t.propertyIndex;if(e||(e=Wn.findNode(this.rootNode,t.nodeName),this.node=e),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!e){Rt("PropertyBinding: No target node found for track: "+this.path+".");return}if(n){let p=t.objectIndex;switch(n){case"materials":if(!e.material){Qt("PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!e.material.materials){Qt("PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);return}e=e.material.materials;break;case"bones":if(!e.skeleton){Qt("PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);return}e=e.skeleton.bones;for(let g=0;g<e.length;g++)if(e[g].name===p){p=g;break}break;case"map":if("map"in e){e=e.map;break}if(!e.material){Qt("PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!e.material.map){Qt("PropertyBinding: Can not bind to material.map as node.material does not have a map.",this);return}e=e.material.map;break;default:if(e[n]===void 0){Qt("PropertyBinding: Can not bind to objectName of node undefined.",this);return}e=e[n]}if(p!==void 0){if(e[p]===void 0){Qt("PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,e);return}e=e[p]}}const l=e[a];if(l===void 0){const p=t.nodeName;Qt("PropertyBinding: Trying to update property for track: "+p+"."+a+" but it wasn't found.",e);return}let u=this.Versioning.None;this.targetObject=e,e.isMaterial===!0?u=this.Versioning.NeedsUpdate:e.isObject3D===!0&&(u=this.Versioning.MatrixWorldNeedsUpdate);let d=this.BindingType.Direct;if(s!==void 0){if(a==="morphTargetInfluences"){if(!e.geometry){Qt("PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);return}if(!e.geometry.morphAttributes){Qt("PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);return}e.morphTargetDictionary[s]!==void 0&&(s=e.morphTargetDictionary[s])}d=this.BindingType.ArrayElement,this.resolvedProperty=l,this.propertyIndex=s}else l.fromArray!==void 0&&l.toArray!==void 0?(d=this.BindingType.HasFromToArray,this.resolvedProperty=l):Array.isArray(l)?(d=this.BindingType.EntireArray,this.resolvedProperty=l):this.propertyName=a;this.getValue=this.GetterByBindingType[d],this.setValue=this.SetterByBindingTypeAndVersioning[d][u]}unbind(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}Wn.Composite=a5;Wn.prototype.BindingType={Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3};Wn.prototype.Versioning={None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2};Wn.prototype.GetterByBindingType=[Wn.prototype._getValue_direct,Wn.prototype._getValue_array,Wn.prototype._getValue_arrayElement,Wn.prototype._getValue_toArray];Wn.prototype.SetterByBindingTypeAndVersioning=[[Wn.prototype._setValue_direct,Wn.prototype._setValue_direct_setNeedsUpdate,Wn.prototype._setValue_direct_setMatrixWorldNeedsUpdate],[Wn.prototype._setValue_array,Wn.prototype._setValue_array_setNeedsUpdate,Wn.prototype._setValue_array_setMatrixWorldNeedsUpdate],[Wn.prototype._setValue_arrayElement,Wn.prototype._setValue_arrayElement_setNeedsUpdate,Wn.prototype._setValue_arrayElement_setMatrixWorldNeedsUpdate],[Wn.prototype._setValue_fromArray,Wn.prototype._setValue_fromArray_setNeedsUpdate,Wn.prototype._setValue_fromArray_setMatrixWorldNeedsUpdate]];class r5{constructor(){this.isAnimationObjectGroup=!0,this.uuid=bs(),this._objects=Array.prototype.slice.call(arguments),this.nCachedObjects_=0;const e={};this._indicesByUUID=e;for(let n=0,a=arguments.length;n!==a;++n)e[arguments[n].uuid]=n;this._paths=[],this._parsedPaths=[],this._bindings=[],this._bindingsIndicesByPath={};const t=this;this.stats={objects:{get total(){return t._objects.length},get inUse(){return this.total-t.nCachedObjects_}},get bindingsPerObject(){return t._bindings.length}}}add(){const e=this._objects,t=this._indicesByUUID,n=this._paths,a=this._parsedPaths,s=this._bindings,l=s.length;let u,d=e.length,p=this.nCachedObjects_;for(let g=0,y=arguments.length;g!==y;++g){const _=arguments[g],b=_.uuid;let x=t[b];if(x===void 0){x=d++,t[b]=x,e.push(_);for(let T=0,w=l;T!==w;++T)s[T].push(new Wn(_,n[T],a[T]))}else if(x<p){u=e[x];const T=--p,w=e[T];t[w.uuid]=x,e[x]=w,t[b]=T,e[T]=_;for(let S=0,C=l;S!==C;++S){const N=s[S],O=N[T];let P=N[x];N[x]=O,P===void 0&&(P=new Wn(_,n[S],a[S])),N[T]=P}}else e[x]!==u&&Qt("AnimationObjectGroup: Different objects with the same UUID detected. Clean the caches or recreate your infrastructure when reloading scenes.")}this.nCachedObjects_=p}remove(){const e=this._objects,t=this._indicesByUUID,n=this._bindings,a=n.length;let s=this.nCachedObjects_;for(let l=0,u=arguments.length;l!==u;++l){const d=arguments[l],p=d.uuid,g=t[p];if(g!==void 0&&g>=s){const y=s++,_=e[y];t[_.uuid]=g,e[g]=_,t[p]=y,e[y]=d;for(let b=0,x=a;b!==x;++b){const T=n[b],w=T[y],S=T[g];T[g]=w,T[y]=S}}}this.nCachedObjects_=s}uncache(){const e=this._objects,t=this._indicesByUUID,n=this._bindings,a=n.length;let s=this.nCachedObjects_,l=e.length;for(let u=0,d=arguments.length;u!==d;++u){const p=arguments[u],g=p.uuid,y=t[g];if(y!==void 0)if(delete t[g],y<s){const _=--s,b=e[_],x=--l,T=e[x];t[b.uuid]=y,e[y]=b,t[T.uuid]=_,e[_]=T,e.pop();for(let w=0,S=a;w!==S;++w){const C=n[w],N=C[_],O=C[x];C[y]=N,C[_]=O,C.pop()}}else{const _=--l,b=e[_];_>0&&(t[b.uuid]=y),e[y]=b,e.pop();for(let x=0,T=a;x!==T;++x){const w=n[x];w[y]=w[_],w.pop()}}}this.nCachedObjects_=s}subscribe_(e,t){const n=this._bindingsIndicesByPath;let a=n[e];const s=this._bindings;if(a!==void 0)return s[a];const l=this._paths,u=this._parsedPaths,d=this._objects,p=d.length,g=this.nCachedObjects_,y=new Array(p);a=s.length,n[e]=a,l.push(e),u.push(t),s.push(y);for(let _=g,b=d.length;_!==b;++_){const x=d[_];y[_]=new Wn(x,e,t)}return y}unsubscribe_(e){const t=this._bindingsIndicesByPath,n=t[e];if(n!==void 0){const a=this._paths,s=this._parsedPaths,l=this._bindings,u=l.length-1,d=l[u],p=e[u];t[p]=n,l[n]=d,l.pop(),s[n]=s[u],s.pop(),a[n]=a[u],a.pop()}}}class xO{constructor(e,t,n=null,a=t.blendMode){this._mixer=e,this._clip=t,this._localRoot=n,this.blendMode=a;const s=t.tracks,l=s.length,u=new Array(l),d={endingStart:Vh,endingEnd:Vh};for(let p=0;p!==l;++p){const g=s[p].createInterpolant(null);u[p]=g,g.settings=d}this._interpolantSettings=d,this._interpolants=u,this._propertyBindings=new Array(l),this._cacheIndex=null,this._byClipCacheIndex=null,this._timeScaleInterpolant=null,this._weightInterpolant=null,this.loop=fN,this._loopCount=-1,this._startTime=null,this.time=0,this.timeScale=1,this._effectiveTimeScale=1,this.weight=1,this._effectiveWeight=1,this.repetitions=1/0,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtStart=!0,this.zeroSlopeAtEnd=!0}play(){return this._mixer._activateAction(this),this}stop(){return this._mixer._deactivateAction(this),this.reset()}reset(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()}isRunning(){return this.enabled&&!this.paused&&this.timeScale!==0&&this._startTime===null&&this._mixer._isActiveAction(this)}isScheduled(){return this._mixer._isActiveAction(this)}startAt(e){return this._startTime=e,this}setLoop(e,t){return this.loop=e,this.repetitions=t,this}setEffectiveWeight(e){return this.weight=e,this._effectiveWeight=this.enabled?e:0,this.stopFading()}getEffectiveWeight(){return this._effectiveWeight}fadeIn(e){return this._scheduleFading(e,0,1)}fadeOut(e){return this._scheduleFading(e,1,0)}crossFadeFrom(e,t,n=!1){if(e.fadeOut(t),this.fadeIn(t),n===!0){const a=this._clip.duration,s=e._clip.duration,l=s/a,u=a/s;e.warp(1,l,t),this.warp(u,1,t)}return this}crossFadeTo(e,t,n=!1){return e.crossFadeFrom(this,t,n)}stopFading(){const e=this._weightInterpolant;return e!==null&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}setEffectiveTimeScale(e){return this.timeScale=e,this._effectiveTimeScale=this.paused?0:e,this.stopWarping()}getEffectiveTimeScale(){return this._effectiveTimeScale}setDuration(e){return this.timeScale=this._clip.duration/e,this.stopWarping()}syncWith(e){return this.time=e.time,this.timeScale=e.timeScale,this.stopWarping()}halt(e){return this.warp(this._effectiveTimeScale,0,e)}warp(e,t,n){const a=this._mixer,s=a.time,l=this.timeScale;let u=this._timeScaleInterpolant;u===null&&(u=a._lendControlInterpolant(),this._timeScaleInterpolant=u);const d=u.parameterPositions,p=u.sampleValues;return d[0]=s,d[1]=s+n,p[0]=e/l,p[1]=t/l,this}stopWarping(){const e=this._timeScaleInterpolant;return e!==null&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}getMixer(){return this._mixer}getClip(){return this._clip}getRoot(){return this._localRoot||this._mixer._root}_update(e,t,n,a){if(!this.enabled){this._updateWeight(e);return}const s=this._startTime;if(s!==null){const d=(e-s)*n;d<0||n===0?t=0:(this._startTime=null,t=n*d)}t*=this._updateTimeScale(e);const l=this._updateTime(t),u=this._updateWeight(e);if(u>0){const d=this._interpolants,p=this._propertyBindings;switch(this.blendMode){case WE:for(let g=0,y=d.length;g!==y;++g)d[g].evaluate(l),p[g].accumulateAdditive(u);break;case vb:default:for(let g=0,y=d.length;g!==y;++g)d[g].evaluate(l),p[g].accumulate(a,u)}}}_updateWeight(e){let t=0;if(this.enabled){t=this.weight;const n=this._weightInterpolant;if(n!==null){const a=n.evaluate(e)[0];t*=a,e>n.parameterPositions[1]&&(this.stopFading(),a===0&&(this.enabled=!1))}}return this._effectiveWeight=t,t}_updateTimeScale(e){let t=0;if(!this.paused){t=this.timeScale;const n=this._timeScaleInterpolant;if(n!==null){const a=n.evaluate(e)[0];t*=a,e>n.parameterPositions[1]&&(this.stopWarping(),t===0?this.paused=!0:this.timeScale=t)}}return this._effectiveTimeScale=t,t}_updateTime(e){const t=this._clip.duration,n=this.loop;let a=this.time+e,s=this._loopCount;const l=n===dN;if(e===0)return s===-1?a:l&&(s&1)===1?t-a:a;if(n===hN){s===-1&&(this._loopCount=0,this._setEndings(!0,!0,!1));e:{if(a>=t)a=t;else if(a<0)a=0;else{this.time=a;break e}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this.time=a,this._mixer.dispatchEvent({type:"finished",action:this,direction:e<0?-1:1})}}else{if(s===-1&&(e>=0?(s=0,this._setEndings(!0,this.repetitions===0,l)):this._setEndings(this.repetitions===0,!0,l)),a>=t||a<0){const u=Math.floor(a/t);a-=t*u,s+=Math.abs(u);const d=this.repetitions-s;if(d<=0)this.clampWhenFinished?this.paused=!0:this.enabled=!1,a=e>0?t:0,this.time=a,this._mixer.dispatchEvent({type:"finished",action:this,direction:e>0?1:-1});else{if(d===1){const p=e<0;this._setEndings(p,!p,l)}else this._setEndings(!1,!1,l);this._loopCount=s,this.time=a,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:u})}}else this.time=a;if(l&&(s&1)===1)return t-a}return a}_setEndings(e,t,n){const a=this._interpolantSettings;n?(a.endingStart=jh,a.endingEnd=jh):(e?a.endingStart=this.zeroSlopeAtStart?jh:Vh:a.endingStart=zg,t?a.endingEnd=this.zeroSlopeAtEnd?jh:Vh:a.endingEnd=zg)}_scheduleFading(e,t,n){const a=this._mixer,s=a.time;let l=this._weightInterpolant;l===null&&(l=a._lendControlInterpolant(),this._weightInterpolant=l);const u=l.parameterPositions,d=l.sampleValues;return u[0]=s,d[0]=t,u[1]=s+e,d[1]=n,this}}const s5=new Float32Array(1);class o5 extends Sl{constructor(e){super(),this._root=e,this._initMemoryManager(),this._accuIndex=0,this.time=0,this.timeScale=1}_bindAction(e,t){const n=e._localRoot||this._root,a=e._clip.tracks,s=a.length,l=e._propertyBindings,u=e._interpolants,d=n.uuid,p=this._bindingsByRootAndName;let g=p[d];g===void 0&&(g={},p[d]=g);for(let y=0;y!==s;++y){const _=a[y],b=_.name;let x=g[b];if(x!==void 0)++x.referenceCount,l[y]=x;else{if(x=l[y],x!==void 0){x._cacheIndex===null&&(++x.referenceCount,this._addInactiveBinding(x,d,b));continue}const T=t&&t._propertyBindings[y].binding.parsedPath;x=new bO(Wn.create(n,b,T),_.ValueTypeName,_.getValueSize()),++x.referenceCount,this._addInactiveBinding(x,d,b),l[y]=x}u[y].resultBuffer=x.buffer}}_activateAction(e){if(!this._isActiveAction(e)){if(e._cacheIndex===null){const n=(e._localRoot||this._root).uuid,a=e._clip.uuid,s=this._actionsByClip[a];this._bindAction(e,s&&s.knownActions[0]),this._addInactiveAction(e,a,n)}const t=e._propertyBindings;for(let n=0,a=t.length;n!==a;++n){const s=t[n];s.useCount++===0&&(this._lendBinding(s),s.saveOriginalState())}this._lendAction(e)}}_deactivateAction(e){if(this._isActiveAction(e)){const t=e._propertyBindings;for(let n=0,a=t.length;n!==a;++n){const s=t[n];--s.useCount===0&&(s.restoreOriginalState(),this._takeBackBinding(s))}this._takeBackAction(e)}}_initMemoryManager(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;const e=this;this.stats={actions:{get total(){return e._actions.length},get inUse(){return e._nActiveActions}},bindings:{get total(){return e._bindings.length},get inUse(){return e._nActiveBindings}},controlInterpolants:{get total(){return e._controlInterpolants.length},get inUse(){return e._nActiveControlInterpolants}}}}_isActiveAction(e){const t=e._cacheIndex;return t!==null&&t<this._nActiveActions}_addInactiveAction(e,t,n){const a=this._actions,s=this._actionsByClip;let l=s[t];if(l===void 0)l={knownActions:[e],actionByRoot:{}},e._byClipCacheIndex=0,s[t]=l;else{const u=l.knownActions;e._byClipCacheIndex=u.length,u.push(e)}e._cacheIndex=a.length,a.push(e),l.actionByRoot[n]=e}_removeInactiveAction(e){const t=this._actions,n=t[t.length-1],a=e._cacheIndex;n._cacheIndex=a,t[a]=n,t.pop(),e._cacheIndex=null;const s=e._clip.uuid,l=this._actionsByClip,u=l[s],d=u.knownActions,p=d[d.length-1],g=e._byClipCacheIndex;p._byClipCacheIndex=g,d[g]=p,d.pop(),e._byClipCacheIndex=null;const y=u.actionByRoot,_=(e._localRoot||this._root).uuid;delete y[_],d.length===0&&delete l[s],this._removeInactiveBindingsForAction(e)}_removeInactiveBindingsForAction(e){const t=e._propertyBindings;for(let n=0,a=t.length;n!==a;++n){const s=t[n];--s.referenceCount===0&&this._removeInactiveBinding(s)}}_lendAction(e){const t=this._actions,n=e._cacheIndex,a=this._nActiveActions++,s=t[a];e._cacheIndex=a,t[a]=e,s._cacheIndex=n,t[n]=s}_takeBackAction(e){const t=this._actions,n=e._cacheIndex,a=--this._nActiveActions,s=t[a];e._cacheIndex=a,t[a]=e,s._cacheIndex=n,t[n]=s}_addInactiveBinding(e,t,n){const a=this._bindingsByRootAndName,s=this._bindings;let l=a[t];l===void 0&&(l={},a[t]=l),l[n]=e,e._cacheIndex=s.length,s.push(e)}_removeInactiveBinding(e){const t=this._bindings,n=e.binding,a=n.rootNode.uuid,s=n.path,l=this._bindingsByRootAndName,u=l[a],d=t[t.length-1],p=e._cacheIndex;d._cacheIndex=p,t[p]=d,t.pop(),delete u[s],Object.keys(u).length===0&&delete l[a]}_lendBinding(e){const t=this._bindings,n=e._cacheIndex,a=this._nActiveBindings++,s=t[a];e._cacheIndex=a,t[a]=e,s._cacheIndex=n,t[n]=s}_takeBackBinding(e){const t=this._bindings,n=e._cacheIndex,a=--this._nActiveBindings,s=t[a];e._cacheIndex=a,t[a]=e,s._cacheIndex=n,t[n]=s}_lendControlInterpolant(){const e=this._controlInterpolants,t=this._nActiveControlInterpolants++;let n=e[t];return n===void 0&&(n=new pM(new Float32Array(2),new Float32Array(2),1,s5),n.__cacheIndex=t,e[t]=n),n}_takeBackControlInterpolant(e){const t=this._controlInterpolants,n=e.__cacheIndex,a=--this._nActiveControlInterpolants,s=t[a];e.__cacheIndex=a,t[a]=e,s.__cacheIndex=n,t[n]=s}clipAction(e,t,n){const a=t||this._root,s=a.uuid;let l=typeof e=="string"?Wg.findByName(a,e):e;const u=l!==null?l.uuid:e,d=this._actionsByClip[u];let p=null;if(n===void 0&&(l!==null?n=l.blendMode:n=vb),d!==void 0){const y=d.actionByRoot[s];if(y!==void 0&&y.blendMode===n)return y;p=d.knownActions[0],l===null&&(l=p._clip)}if(l===null)return null;const g=new xO(this,l,t,n);return this._bindAction(g,p),this._addInactiveAction(g,u,s),g}existingAction(e,t){const n=t||this._root,a=n.uuid,s=typeof e=="string"?Wg.findByName(n,e):e,l=s?s.uuid:e,u=this._actionsByClip[l];return u!==void 0&&u.actionByRoot[a]||null}stopAllAction(){const e=this._actions,t=this._nActiveActions;for(let n=t-1;n>=0;--n)e[n].stop();return this}update(e){e*=this.timeScale;const t=this._actions,n=this._nActiveActions,a=this.time+=e,s=Math.sign(e),l=this._accuIndex^=1;for(let p=0;p!==n;++p)t[p]._update(a,e,s,l);const u=this._bindings,d=this._nActiveBindings;for(let p=0;p!==d;++p)u[p].apply(l);return this}setTime(e){this.time=0;for(let t=0;t<this._actions.length;t++)this._actions[t].time=0;return this.update(e)}getRoot(){return this._root}uncacheClip(e){const t=this._actions,n=e.uuid,a=this._actionsByClip,s=a[n];if(s!==void 0){const l=s.knownActions;for(let u=0,d=l.length;u!==d;++u){const p=l[u];this._deactivateAction(p);const g=p._cacheIndex,y=t[t.length-1];p._cacheIndex=null,p._byClipCacheIndex=null,y._cacheIndex=g,t[g]=y,t.pop(),this._removeInactiveBindingsForAction(p)}delete a[n]}}uncacheRoot(e){const t=e.uuid,n=this._actionsByClip;for(const l in n){const u=n[l].actionByRoot,d=u[t];d!==void 0&&(this._deactivateAction(d),this._removeInactiveAction(d))}const a=this._bindingsByRootAndName,s=a[t];if(s!==void 0)for(const l in s){const u=s[l];u.restoreOriginalState(),this._removeInactiveBinding(u)}}uncacheAction(e,t){const n=this.existingAction(e,t);n!==null&&(this._deactivateAction(n),this._removeInactiveAction(n))}}class l5 extends ZE{constructor(e=1,t=1,n=1,a={}){super(e,t,a),this.isRenderTarget3D=!0,this.depth=n,this.texture=new xb(null,e,t,n),this._setTextureOptions(a),this.texture.isRenderTargetTexture=!0}}class qb{constructor(e){this.value=e}clone(){return new qb(this.value.clone===void 0?this.value:this.value.clone())}}let c5=0;class u5 extends Sl{constructor(){super(),this.isUniformsGroup=!0,Object.defineProperty(this,"id",{value:c5++}),this.name="",this.usage=Fg,this.uniforms=[]}add(e){return this.uniforms.push(e),this}remove(e){const t=this.uniforms.indexOf(e);return t!==-1&&this.uniforms.splice(t,1),this}setName(e){return this.name=e,this}setUsage(e){return this.usage=e,this}dispose(){this.dispatchEvent({type:"dispose"})}copy(e){this.name=e.name,this.usage=e.usage;const t=e.uniforms;this.uniforms.length=0;for(let n=0,a=t.length;n<a;n++){const s=Array.isArray(t[n])?t[n]:[t[n]];for(let l=0;l<s.length;l++)this.uniforms.push(s[l].clone())}return this}clone(){return new this.constructor().copy(this)}}class h5 extends Tb{constructor(e,t,n=1){super(e,t),this.isInstancedInterleavedBuffer=!0,this.meshPerAttribute=n}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}clone(e){const t=super.clone(e);return t.meshPerAttribute=this.meshPerAttribute,t}toJSON(e){const t=super.toJSON(e);return t.isInstancedInterleavedBuffer=!0,t.meshPerAttribute=this.meshPerAttribute,t}}class f5{constructor(e,t,n,a,s,l=!1){this.isGLBufferAttribute=!0,this.name="",this.buffer=e,this.type=t,this.itemSize=n,this.elementSize=a,this.count=s,this.normalized=l,this.version=0}set needsUpdate(e){e===!0&&this.version++}setBuffer(e){return this.buffer=e,this}setType(e,t){return this.type=e,this.elementSize=t,this}setItemSize(e){return this.itemSize=e,this}setCount(e){return this.count=e,this}}const sC=new on;class EM{constructor(e,t,n=0,a=1/0){this.ray=new rf(e,t),this.near=n,this.far=a,this.camera=null,this.layers=new cp,this.params={Mesh:{},Line:{threshold:1},LOD:{},Points:{threshold:1},Sprite:{}}}set(e,t){this.ray.set(e,t)}setFromCamera(e,t){t.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(t.matrixWorld),this.ray.direction.set(e.x,e.y,.5).unproject(t).sub(this.ray.origin).normalize(),this.camera=t):t.isOrthographicCamera?(this.ray.origin.set(e.x,e.y,(t.near+t.far)/(t.near-t.far)).unproject(t),this.ray.direction.set(0,0,-1).transformDirection(t.matrixWorld),this.camera=t):Qt("Raycaster: Unsupported camera type: "+t.type)}setFromXRController(e){return sC.identity().extractRotation(e.matrixWorld),this.ray.origin.setFromMatrixPosition(e.matrixWorld),this.ray.direction.set(0,0,-1).applyMatrix4(sC),this}intersectObject(e,t=!0,n=[]){return uE(e,this,n,t),n.sort(oC),n}intersectObjects(e,t=!0,n=[]){for(let a=0,s=e.length;a<s;a++)uE(e[a],this,n,t);return n.sort(oC),n}}function oC(i,e){return i.distance-e.distance}function uE(i,e,t,n){let a=!0;if(i.layers.test(e.layers)&&i.raycast(e,t)===!1&&(a=!1),a===!0&&n===!0){const s=i.children;for(let l=0,u=s.length;l<u;l++)uE(s[l],e,t,!0)}}class d5{constructor(){this._previousTime=0,this._currentTime=0,this._startTime=performance.now(),this._delta=0,this._elapsed=0,this._timescale=1,this._document=null,this._pageVisibilityHandler=null}connect(e){this._document=e,e.hidden!==void 0&&(this._pageVisibilityHandler=p5.bind(this),e.addEventListener("visibilitychange",this._pageVisibilityHandler,!1))}disconnect(){this._pageVisibilityHandler!==null&&(this._document.removeEventListener("visibilitychange",this._pageVisibilityHandler),this._pageVisibilityHandler=null),this._document=null}getDelta(){return this._delta/1e3}getElapsed(){return this._elapsed/1e3}getTimescale(){return this._timescale}setTimescale(e){return this._timescale=e,this}reset(){return this._currentTime=performance.now()-this._startTime,this}dispose(){this.disconnect()}update(e){return this._pageVisibilityHandler!==null&&this._document.hidden===!0?this._delta=0:(this._previousTime=this._currentTime,this._currentTime=(e!==void 0?e:performance.now())-this._startTime,this._delta=(this._currentTime-this._previousTime)*this._timescale,this._elapsed+=this._delta),this}}function p5(){this._document.hidden===!1&&this.reset()}class hE{constructor(e=1,t=0,n=0){this.radius=e,this.phi=t,this.theta=n}set(e,t,n){return this.radius=e,this.phi=t,this.theta=n,this}copy(e){return this.radius=e.radius,this.phi=e.phi,this.theta=e.theta,this}makeSafe(){return this.phi=hn(this.phi,1e-6,Math.PI-1e-6),this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,t,n){return this.radius=Math.sqrt(e*e+t*t+n*n),this.radius===0?(this.theta=0,this.phi=0):(this.theta=Math.atan2(e,n),this.phi=Math.acos(hn(t/this.radius,-1,1))),this}clone(){return new this.constructor().copy(this)}}class m5{constructor(e=1,t=0,n=0){this.radius=e,this.theta=t,this.y=n}set(e,t,n){return this.radius=e,this.theta=t,this.y=n,this}copy(e){return this.radius=e.radius,this.theta=e.theta,this.y=e.y,this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,t,n){return this.radius=Math.sqrt(e*e+n*n),this.theta=Math.atan2(e,n),this.y=t,this}clone(){return new this.constructor().copy(this)}}class MM{constructor(e,t,n,a){MM.prototype.isMatrix2=!0,this.elements=[1,0,0,1],e!==void 0&&this.set(e,t,n,a)}identity(){return this.set(1,0,0,1),this}fromArray(e,t=0){for(let n=0;n<4;n++)this.elements[n]=e[n+t];return this}set(e,t,n,a){const s=this.elements;return s[0]=e,s[2]=t,s[1]=n,s[3]=a,this}}const lC=new Ke;class g5{constructor(e=new Ke(1/0,1/0),t=new Ke(-1/0,-1/0)){this.isBox2=!0,this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromPoints(e){this.makeEmpty();for(let t=0,n=e.length;t<n;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){const n=lC.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(n),this.max.copy(e).add(n),this}clone(){return new this.constructor().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=1/0,this.max.x=this.max.y=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y}getCenter(e){return this.isEmpty()?e.set(0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}containsPoint(e){return e.x>=this.min.x&&e.x<=this.max.x&&e.y>=this.min.y&&e.y<=this.max.y}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y}getParameter(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y))}intersectsBox(e){return e.max.x>=this.min.x&&e.min.x<=this.max.x&&e.max.y>=this.min.y&&e.min.y<=this.max.y}clampPoint(e,t){return t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return this.clampPoint(e,lC).distanceTo(e)}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}const cC=new ee,Ry=new ee,zd=new ee,Bd=new ee,e1=new ee,v5=new ee,y5=new ee;class _5{constructor(e=new ee,t=new ee){this.start=e,this.end=t}set(e,t){return this.start.copy(e),this.end.copy(t),this}copy(e){return this.start.copy(e.start),this.end.copy(e.end),this}getCenter(e){return e.addVectors(this.start,this.end).multiplyScalar(.5)}delta(e){return e.subVectors(this.end,this.start)}distanceSq(){return this.start.distanceToSquared(this.end)}distance(){return this.start.distanceTo(this.end)}at(e,t){return this.delta(t).multiplyScalar(e).add(this.start)}closestPointToPointParameter(e,t){cC.subVectors(e,this.start),Ry.subVectors(this.end,this.start);const n=Ry.dot(Ry);let s=Ry.dot(cC)/n;return t&&(s=hn(s,0,1)),s}closestPointToPoint(e,t,n){const a=this.closestPointToPointParameter(e,t);return this.delta(n).multiplyScalar(a).add(this.start)}distanceSqToLine3(e,t=v5,n=y5){const a=10000000000000001e-32;let s,l;const u=this.start,d=e.start,p=this.end,g=e.end;zd.subVectors(p,u),Bd.subVectors(g,d),e1.subVectors(u,d);const y=zd.dot(zd),_=Bd.dot(Bd),b=Bd.dot(e1);if(y<=a&&_<=a)return t.copy(u),n.copy(d),t.sub(n),t.dot(t);if(y<=a)s=0,l=b/_,l=hn(l,0,1);else{const x=zd.dot(e1);if(_<=a)l=0,s=hn(-x/y,0,1);else{const T=zd.dot(Bd),w=y*_-T*T;w!==0?s=hn((T*b-x*_)/w,0,1):s=0,l=(T*s+b)/_,l<0?(l=0,s=hn(-x/y,0,1)):l>1&&(l=1,s=hn((T-x)/y,0,1))}}return t.copy(u).add(zd.multiplyScalar(s)),n.copy(d).add(Bd.multiplyScalar(l)),t.sub(n),t.dot(t)}applyMatrix4(e){return this.start.applyMatrix4(e),this.end.applyMatrix4(e),this}equals(e){return e.start.equals(this.start)&&e.end.equals(this.end)}clone(){return new this.constructor().copy(this)}}const uC=new ee;class b5 extends Yn{constructor(e,t){super(),this.light=e,this.matrixAutoUpdate=!1,this.color=t,this.type="SpotLightHelper";const n=new mn,a=[0,0,0,0,0,1,0,0,0,1,0,1,0,0,0,-1,0,1,0,0,0,0,1,1,0,0,0,0,-1,1];for(let l=0,u=1,d=32;l<d;l++,u++){const p=l/d*Math.PI*2,g=u/d*Math.PI*2;a.push(Math.cos(p),Math.sin(p),1,Math.cos(g),Math.sin(g),1)}n.setAttribute("position",new Ft(a,3));const s=new Gr({fog:!1,toneMapped:!1});this.cone=new El(n,s),this.add(this.cone),this.update()}dispose(){this.cone.geometry.dispose(),this.cone.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.light.target.updateWorldMatrix(!0,!1),this.parent?(this.parent.updateWorldMatrix(!0),this.matrix.copy(this.parent.matrixWorld).invert().multiply(this.light.matrixWorld)):this.matrix.copy(this.light.matrixWorld),this.matrixWorld.copy(this.light.matrixWorld);const e=this.light.distance?this.light.distance:1e3,t=e*Math.tan(this.light.angle);this.cone.scale.set(t,t,e),uC.setFromMatrixPosition(this.light.target.matrixWorld),this.cone.lookAt(uC),this.color!==void 0?this.cone.material.color.set(this.color):this.cone.material.color.copy(this.light.color)}}const lu=new ee,Ny=new on,t1=new on;class x5 extends El{constructor(e){const t=SO(e),n=new mn,a=[],s=[];for(let p=0;p<t.length;p++){const g=t[p];g.parent&&g.parent.isBone&&(a.push(0,0,0),a.push(0,0,0),s.push(0,0,0),s.push(0,0,0))}n.setAttribute("position",new Ft(a,3)),n.setAttribute("color",new Ft(s,3));const l=new Gr({vertexColors:!0,depthTest:!1,depthWrite:!1,toneMapped:!1,transparent:!0});super(n,l),this.isSkeletonHelper=!0,this.type="SkeletonHelper",this.root=e,this.bones=t,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1;const u=new Ut(255),d=new Ut(65280);this.setColors(u,d)}updateMatrixWorld(e){const t=this.bones,n=this.geometry,a=n.getAttribute("position");t1.copy(this.root.matrixWorld).invert();for(let s=0,l=0;s<t.length;s++){const u=t[s];u.parent&&u.parent.isBone&&(Ny.multiplyMatrices(t1,u.matrixWorld),lu.setFromMatrixPosition(Ny),a.setXYZ(l,lu.x,lu.y,lu.z),Ny.multiplyMatrices(t1,u.parent.matrixWorld),lu.setFromMatrixPosition(Ny),a.setXYZ(l+1,lu.x,lu.y,lu.z),l+=2)}n.getAttribute("position").needsUpdate=!0,super.updateMatrixWorld(e)}setColors(e,t){const a=this.geometry.getAttribute("color");for(let s=0;s<a.count;s+=2)a.setXYZ(s,e.r,e.g,e.b),a.setXYZ(s+1,t.r,t.g,t.b);return a.needsUpdate=!0,this}dispose(){this.geometry.dispose(),this.material.dispose()}}function SO(i){const e=[];i.isBone===!0&&e.push(i);for(let t=0;t<i.children.length;t++)e.push(...SO(i.children[t]));return e}class S5 extends Ui{constructor(e,t,n){const a=new uv(t,4,2),s=new mc({wireframe:!0,fog:!1,toneMapped:!1});super(a,s),this.light=e,this.color=n,this.type="PointLightHelper",this.matrix=this.light.matrixWorld,this.matrixAutoUpdate=!1,this.update()}dispose(){this.geometry.dispose(),this.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.color!==void 0?this.material.color.set(this.color):this.material.color.copy(this.light.color)}}const E5=new ee,hC=new Ut,fC=new Ut;class M5 extends Yn{constructor(e,t,n){super(),this.light=e,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=n,this.type="HemisphereLightHelper";const a=new cv(t);a.rotateY(Math.PI*.5),this.material=new mc({wireframe:!0,fog:!1,toneMapped:!1}),this.color===void 0&&(this.material.vertexColors=!0);const s=a.getAttribute("position"),l=new Float32Array(s.count*3);a.setAttribute("color",new ni(l,3)),this.add(new Ui(a,this.material)),this.update()}dispose(){this.children[0].geometry.dispose(),this.children[0].material.dispose()}update(){const e=this.children[0];if(this.color!==void 0)this.material.color.set(this.color);else{const t=e.geometry.getAttribute("color");hC.copy(this.light.color),fC.copy(this.light.groundColor);for(let n=0,a=t.count;n<a;n++){const s=n<a/2?hC:fC;t.setXYZ(n,s.r,s.g,s.b)}t.needsUpdate=!0}this.light.updateWorldMatrix(!0,!1),e.lookAt(E5.setFromMatrixPosition(this.light.matrixWorld).negate())}}class w5 extends El{constructor(e=10,t=10,n=4473924,a=8947848){n=new Ut(n),a=new Ut(a);const s=t/2,l=e/t,u=e/2,d=[],p=[];for(let _=0,b=0,x=-u;_<=t;_++,x+=l){d.push(-u,0,x,u,0,x),d.push(x,0,-u,x,0,u);const T=_===s?n:a;T.toArray(p,b),b+=3,T.toArray(p,b),b+=3,T.toArray(p,b),b+=3,T.toArray(p,b),b+=3}const g=new mn;g.setAttribute("position",new Ft(d,3)),g.setAttribute("color",new Ft(p,3));const y=new Gr({vertexColors:!0,toneMapped:!1});super(g,y),this.type="GridHelper"}dispose(){this.geometry.dispose(),this.material.dispose()}}class T5 extends El{constructor(e=10,t=16,n=8,a=64,s=4473924,l=8947848){s=new Ut(s),l=new Ut(l);const u=[],d=[];if(t>1)for(let y=0;y<t;y++){const _=y/t*(Math.PI*2),b=Math.sin(_)*e,x=Math.cos(_)*e;u.push(0,0,0),u.push(b,0,x);const T=y&1?s:l;d.push(T.r,T.g,T.b),d.push(T.r,T.g,T.b)}for(let y=0;y<n;y++){const _=y&1?s:l,b=e-e/n*y;for(let x=0;x<a;x++){let T=x/a*(Math.PI*2),w=Math.sin(T)*b,S=Math.cos(T)*b;u.push(w,0,S),d.push(_.r,_.g,_.b),T=(x+1)/a*(Math.PI*2),w=Math.sin(T)*b,S=Math.cos(T)*b,u.push(w,0,S),d.push(_.r,_.g,_.b)}}const p=new mn;p.setAttribute("position",new Ft(u,3)),p.setAttribute("color",new Ft(d,3));const g=new Gr({vertexColors:!0,toneMapped:!1});super(p,g),this.type="PolarGridHelper"}dispose(){this.geometry.dispose(),this.material.dispose()}}const dC=new ee,Oy=new ee,pC=new ee;class A5 extends Yn{constructor(e,t,n){super(),this.light=e,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=n,this.type="DirectionalLightHelper",t===void 0&&(t=1);let a=new mn;a.setAttribute("position",new Ft([-t,t,0,t,t,0,t,-t,0,-t,-t,0,-t,t,0],3));const s=new Gr({fog:!1,toneMapped:!1});this.lightPlane=new bu(a,s),this.add(this.lightPlane),a=new mn,a.setAttribute("position",new Ft([0,0,0,0,0,1],3)),this.targetLine=new bu(a,s),this.add(this.targetLine),this.update()}dispose(){this.lightPlane.geometry.dispose(),this.lightPlane.material.dispose(),this.targetLine.geometry.dispose(),this.targetLine.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.light.target.updateWorldMatrix(!0,!1),dC.setFromMatrixPosition(this.light.matrixWorld),Oy.setFromMatrixPosition(this.light.target.matrixWorld),pC.subVectors(Oy,dC),this.lightPlane.lookAt(Oy),this.color!==void 0?(this.lightPlane.material.color.set(this.color),this.targetLine.material.color.set(this.color)):(this.lightPlane.material.color.copy(this.light.color),this.targetLine.material.color.copy(this.light.color)),this.targetLine.lookAt(Oy),this.targetLine.scale.z=pC.length()}}const Dy=new ee,Ji=new Sb;class C5 extends El{constructor(e){const t=new mn,n=new Gr({color:16777215,vertexColors:!0,toneMapped:!1}),a=[],s=[],l={};u("n1","n2"),u("n2","n4"),u("n4","n3"),u("n3","n1"),u("f1","f2"),u("f2","f4"),u("f4","f3"),u("f3","f1"),u("n1","f1"),u("n2","f2"),u("n3","f3"),u("n4","f4"),u("p","n1"),u("p","n2"),u("p","n3"),u("p","n4"),u("u1","u2"),u("u2","u3"),u("u3","u1"),u("c","t"),u("p","c"),u("cn1","cn2"),u("cn3","cn4"),u("cf1","cf2"),u("cf3","cf4");function u(x,T){d(x),d(T)}function d(x){a.push(0,0,0),s.push(0,0,0),l[x]===void 0&&(l[x]=[]),l[x].push(a.length/3-1)}t.setAttribute("position",new Ft(a,3)),t.setAttribute("color",new Ft(s,3)),super(t,n),this.type="CameraHelper",this.camera=e,this.camera.updateProjectionMatrix&&this.camera.updateProjectionMatrix(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.pointMap=l,this.update();const p=new Ut(16755200),g=new Ut(16711680),y=new Ut(43775),_=new Ut(16777215),b=new Ut(3355443);this.setColors(p,g,y,_,b)}setColors(e,t,n,a,s){const u=this.geometry.getAttribute("color");return u.setXYZ(0,e.r,e.g,e.b),u.setXYZ(1,e.r,e.g,e.b),u.setXYZ(2,e.r,e.g,e.b),u.setXYZ(3,e.r,e.g,e.b),u.setXYZ(4,e.r,e.g,e.b),u.setXYZ(5,e.r,e.g,e.b),u.setXYZ(6,e.r,e.g,e.b),u.setXYZ(7,e.r,e.g,e.b),u.setXYZ(8,e.r,e.g,e.b),u.setXYZ(9,e.r,e.g,e.b),u.setXYZ(10,e.r,e.g,e.b),u.setXYZ(11,e.r,e.g,e.b),u.setXYZ(12,e.r,e.g,e.b),u.setXYZ(13,e.r,e.g,e.b),u.setXYZ(14,e.r,e.g,e.b),u.setXYZ(15,e.r,e.g,e.b),u.setXYZ(16,e.r,e.g,e.b),u.setXYZ(17,e.r,e.g,e.b),u.setXYZ(18,e.r,e.g,e.b),u.setXYZ(19,e.r,e.g,e.b),u.setXYZ(20,e.r,e.g,e.b),u.setXYZ(21,e.r,e.g,e.b),u.setXYZ(22,e.r,e.g,e.b),u.setXYZ(23,e.r,e.g,e.b),u.setXYZ(24,t.r,t.g,t.b),u.setXYZ(25,t.r,t.g,t.b),u.setXYZ(26,t.r,t.g,t.b),u.setXYZ(27,t.r,t.g,t.b),u.setXYZ(28,t.r,t.g,t.b),u.setXYZ(29,t.r,t.g,t.b),u.setXYZ(30,t.r,t.g,t.b),u.setXYZ(31,t.r,t.g,t.b),u.setXYZ(32,n.r,n.g,n.b),u.setXYZ(33,n.r,n.g,n.b),u.setXYZ(34,n.r,n.g,n.b),u.setXYZ(35,n.r,n.g,n.b),u.setXYZ(36,n.r,n.g,n.b),u.setXYZ(37,n.r,n.g,n.b),u.setXYZ(38,a.r,a.g,a.b),u.setXYZ(39,a.r,a.g,a.b),u.setXYZ(40,s.r,s.g,s.b),u.setXYZ(41,s.r,s.g,s.b),u.setXYZ(42,s.r,s.g,s.b),u.setXYZ(43,s.r,s.g,s.b),u.setXYZ(44,s.r,s.g,s.b),u.setXYZ(45,s.r,s.g,s.b),u.setXYZ(46,s.r,s.g,s.b),u.setXYZ(47,s.r,s.g,s.b),u.setXYZ(48,s.r,s.g,s.b),u.setXYZ(49,s.r,s.g,s.b),u.needsUpdate=!0,this}update(){const e=this.geometry,t=this.pointMap,n=1,a=1;let s,l;if(Ji.projectionMatrixInverse.copy(this.camera.projectionMatrixInverse),this.camera.reversedDepth===!0)s=1,l=0;else if(this.camera.coordinateSystem===_s)s=-1,l=1;else if(this.camera.coordinateSystem===sp)s=0,l=1;else throw new Error("THREE.CameraHelper.update(): Invalid coordinate system: "+this.camera.coordinateSystem);ia("c",t,e,Ji,0,0,s),ia("t",t,e,Ji,0,0,l),ia("n1",t,e,Ji,-n,-a,s),ia("n2",t,e,Ji,n,-a,s),ia("n3",t,e,Ji,-n,a,s),ia("n4",t,e,Ji,n,a,s),ia("f1",t,e,Ji,-n,-a,l),ia("f2",t,e,Ji,n,-a,l),ia("f3",t,e,Ji,-n,a,l),ia("f4",t,e,Ji,n,a,l),ia("u1",t,e,Ji,n*.7,a*1.1,s),ia("u2",t,e,Ji,-n*.7,a*1.1,s),ia("u3",t,e,Ji,0,a*2,s),ia("cf1",t,e,Ji,-n,0,l),ia("cf2",t,e,Ji,n,0,l),ia("cf3",t,e,Ji,0,-a,l),ia("cf4",t,e,Ji,0,a,l),ia("cn1",t,e,Ji,-n,0,s),ia("cn2",t,e,Ji,n,0,s),ia("cn3",t,e,Ji,0,-a,s),ia("cn4",t,e,Ji,0,a,s),e.getAttribute("position").needsUpdate=!0}dispose(){this.geometry.dispose(),this.material.dispose()}}function ia(i,e,t,n,a,s,l){Dy.set(a,s,l).unproject(n);const u=e[i];if(u!==void 0){const d=t.getAttribute("position");for(let p=0,g=u.length;p<g;p++)d.setXYZ(u[p],Dy.x,Dy.y,Dy.z)}}const Uy=new Ha;class R5 extends El{constructor(e,t=16776960){const n=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),a=new Float32Array(24),s=new mn;s.setIndex(new ni(n,1)),s.setAttribute("position",new ni(a,3)),super(s,new Gr({color:t,toneMapped:!1})),this.object=e,this.type="BoxHelper",this.matrixAutoUpdate=!1,this.update()}update(){if(this.object!==void 0&&Uy.setFromObject(this.object),Uy.isEmpty())return;const e=Uy.min,t=Uy.max,n=this.geometry.attributes.position,a=n.array;a[0]=t.x,a[1]=t.y,a[2]=t.z,a[3]=e.x,a[4]=t.y,a[5]=t.z,a[6]=e.x,a[7]=e.y,a[8]=t.z,a[9]=t.x,a[10]=e.y,a[11]=t.z,a[12]=t.x,a[13]=t.y,a[14]=e.z,a[15]=e.x,a[16]=t.y,a[17]=e.z,a[18]=e.x,a[19]=e.y,a[20]=e.z,a[21]=t.x,a[22]=e.y,a[23]=e.z,n.needsUpdate=!0,this.geometry.computeBoundingSphere()}setFromObject(e){return this.object=e,this.update(),this}copy(e,t){return super.copy(e,t),this.object=e.object,this}dispose(){this.geometry.dispose(),this.material.dispose()}}class N5 extends El{constructor(e,t=16776960){const n=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),a=[1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,-1,-1,1,-1,-1,-1,-1,1,-1,-1],s=new mn;s.setIndex(new ni(n,1)),s.setAttribute("position",new Ft(a,3)),super(s,new Gr({color:t,toneMapped:!1})),this.box=e,this.type="Box3Helper",this.geometry.computeBoundingSphere()}updateMatrixWorld(e){const t=this.box;t.isEmpty()||(t.getCenter(this.position),t.getSize(this.scale),this.scale.multiplyScalar(.5),super.updateMatrixWorld(e))}dispose(){this.geometry.dispose(),this.material.dispose()}}class O5 extends bu{constructor(e,t=1,n=16776960){const a=n,s=[1,-1,0,-1,1,0,-1,-1,0,1,1,0,-1,1,0,-1,-1,0,1,-1,0,1,1,0],l=new mn;l.setAttribute("position",new Ft(s,3)),l.computeBoundingSphere(),super(l,new Gr({color:a,toneMapped:!1})),this.type="PlaneHelper",this.plane=e,this.size=t;const u=[1,1,0,-1,1,0,-1,-1,0,1,1,0,-1,-1,0,1,-1,0],d=new mn;d.setAttribute("position",new Ft(u,3)),d.computeBoundingSphere(),this.add(new Ui(d,new mc({color:a,opacity:.2,transparent:!0,depthWrite:!1,toneMapped:!1})))}updateMatrixWorld(e){this.position.set(0,0,0),this.scale.set(.5*this.size,.5*this.size,1),this.lookAt(this.plane.normal),this.translateZ(-this.plane.constant),super.updateMatrixWorld(e)}dispose(){this.geometry.dispose(),this.material.dispose(),this.children[0].geometry.dispose(),this.children[0].material.dispose()}}const mC=new ee;let Ly,n1;class D5 extends Yn{constructor(e=new ee(0,0,1),t=new ee(0,0,0),n=1,a=16776960,s=n*.2,l=s*.2){super(),this.type="ArrowHelper",Ly===void 0&&(Ly=new mn,Ly.setAttribute("position",new Ft([0,0,0,0,1,0],3)),n1=new ov(.5,1,5,1),n1.translate(0,-.5,0)),this.position.copy(t),this.line=new bu(Ly,new Gr({color:a,toneMapped:!1})),this.line.matrixAutoUpdate=!1,this.add(this.line),this.cone=new Ui(n1,new mc({color:a,toneMapped:!1})),this.cone.matrixAutoUpdate=!1,this.add(this.cone),this.setDirection(e),this.setLength(n,s,l)}setDirection(e){if(e.y>.99999)this.quaternion.set(0,0,0,1);else if(e.y<-.99999)this.quaternion.set(1,0,0,0);else{mC.set(e.z,0,-e.x).normalize();const t=Math.acos(e.y);this.quaternion.setFromAxisAngle(mC,t)}}setLength(e,t=e*.2,n=t*.2){this.line.scale.set(1,Math.max(1e-4,e-t),1),this.line.updateMatrix(),this.cone.scale.set(n,t,n),this.cone.position.y=e,this.cone.updateMatrix()}setColor(e){this.line.material.color.set(e),this.cone.material.color.set(e)}copy(e){return super.copy(e,!1),this.line.copy(e.line),this.cone.copy(e.cone),this}dispose(){this.line.geometry.dispose(),this.line.material.dispose(),this.cone.geometry.dispose(),this.cone.material.dispose()}}class U5 extends El{constructor(e=1){const t=[0,0,0,e,0,0,0,0,0,0,e,0,0,0,0,0,0,e],n=[1,0,0,1,.6,0,0,1,0,.6,1,0,0,0,1,0,.6,1],a=new mn;a.setAttribute("position",new Ft(t,3)),a.setAttribute("color",new Ft(n,3));const s=new Gr({vertexColors:!0,toneMapped:!1});super(a,s),this.type="AxesHelper"}setColors(e,t,n){const a=new Ut,s=this.geometry.attributes.color.array;return a.set(e),a.toArray(s,0),a.toArray(s,3),a.set(t),a.toArray(s,6),a.toArray(s,9),a.set(n),a.toArray(s,12),a.toArray(s,15),this.geometry.attributes.color.needsUpdate=!0,this}dispose(){this.geometry.dispose(),this.material.dispose()}}class L5{constructor(){this.type="ShapePath",this.color=new Ut,this.subPaths=[],this.currentPath=null}moveTo(e,t){return this.currentPath=new eb,this.subPaths.push(this.currentPath),this.currentPath.moveTo(e,t),this}lineTo(e,t){return this.currentPath.lineTo(e,t),this}quadraticCurveTo(e,t,n,a){return this.currentPath.quadraticCurveTo(e,t,n,a),this}bezierCurveTo(e,t,n,a,s,l){return this.currentPath.bezierCurveTo(e,t,n,a,s,l),this}splineThru(e){return this.currentPath.splineThru(e),this}toShapes(e){function t(S){const C=[];for(let N=0,O=S.length;N<O;N++){const P=S[N],U=new Zh;U.curves=P.curves,C.push(U)}return C}function n(S,C){const N=C.length;let O=!1;for(let P=N-1,U=0;U<N;P=U++){let z=C[P],H=C[U],D=H.x-z.x,L=H.y-z.y;if(Math.abs(L)>Number.EPSILON){if(L<0&&(z=C[U],D=-D,H=C[P],L=-L),S.y<z.y||S.y>H.y)continue;if(S.y===z.y){if(S.x===z.x)return!0}else{const j=L*(S.x-z.x)-D*(S.y-z.y);if(j===0)return!0;if(j<0)continue;O=!O}}else{if(S.y!==z.y)continue;if(H.x<=S.x&&S.x<=z.x||z.x<=S.x&&S.x<=H.x)return!0}}return O}const a=Ao.isClockWise,s=this.subPaths;if(s.length===0)return[];let l,u,d;const p=[];if(s.length===1)return u=s[0],d=new Zh,d.curves=u.curves,p.push(d),p;let g=!a(s[0].getPoints());g=e?!g:g;const y=[],_=[];let b=[],x=0,T;_[x]=void 0,b[x]=[];for(let S=0,C=s.length;S<C;S++)u=s[S],T=u.getPoints(),l=a(T),l=e?!l:l,l?(!g&&_[x]&&x++,_[x]={s:new Zh,p:T},_[x].s.curves=u.curves,g&&x++,b[x]=[]):b[x].push({h:u,p:T[0]});if(!_[0])return t(s);if(_.length>1){let S=!1,C=0;for(let N=0,O=_.length;N<O;N++)y[N]=[];for(let N=0,O=_.length;N<O;N++){const P=b[N];for(let U=0;U<P.length;U++){const z=P[U];let H=!0;for(let D=0;D<_.length;D++)n(z.p,_[D].p)&&(N!==D&&C++,H?(H=!1,y[D].push(z)):S=!0);H&&y[N].push(z)}}C>0&&S===!1&&(b=y)}let w;for(let S=0,C=_.length;S<C;S++){d=_[S].s,p.push(d),w=b[S];for(let N=0,O=w.length;N<O;N++)d.holes.push(w[N].h)}return p}}class I5 extends Sl{constructor(e,t=null){super(),this.object=e,this.domElement=t,this.enabled=!0,this.state=-1,this.keys={},this.mouseButtons={LEFT:null,MIDDLE:null,RIGHT:null},this.touches={ONE:null,TWO:null}}connect(e){if(e===void 0){Rt("Controls: connect() now requires an element.");return}this.domElement!==null&&this.disconnect(),this.domElement=e}disconnect(){}dispose(){}update(){}}function P5(i,e){const t=i.image&&i.image.width?i.image.width/i.image.height:1;return t>e?(i.repeat.x=1,i.repeat.y=t/e,i.offset.x=0,i.offset.y=(1-i.repeat.y)/2):(i.repeat.x=e/t,i.repeat.y=1,i.offset.x=(1-i.repeat.x)/2,i.offset.y=0),i}function z5(i,e){const t=i.image&&i.image.width?i.image.width/i.image.height:1;return t>e?(i.repeat.x=e/t,i.repeat.y=1,i.offset.x=(1-i.repeat.x)/2,i.offset.y=0):(i.repeat.x=1,i.repeat.y=t/e,i.offset.x=0,i.offset.y=(1-i.repeat.y)/2),i}function B5(i){return i.repeat.x=1,i.repeat.y=1,i.offset.x=0,i.offset.y=0,i}function fE(i,e,t,n){const a=F5(n);switch(t){case qE:return i*e;case nv:return i*e/a.components*a.byteLength;case iv:return i*e/a.components*a.byteLength;case Jh:return i*e*2/a.components*a.byteLength;case mb:return i*e*2/a.components*a.byteLength;case XE:return i*e*3/a.components*a.byteLength;case sa:return i*e*4/a.components*a.byteLength;case gb:return i*e*4/a.components*a.byteLength;case bg:case xg:return Math.floor((i+3)/4)*Math.floor((e+3)/4)*8;case Sg:case Eg:return Math.floor((i+3)/4)*Math.floor((e+3)/4)*16;case __:case x_:return Math.max(i,16)*Math.max(e,8)/4;case y_:case b_:return Math.max(i,8)*Math.max(e,8)/2;case S_:case E_:case w_:case T_:return Math.floor((i+3)/4)*Math.floor((e+3)/4)*8;case M_:case A_:case C_:return Math.floor((i+3)/4)*Math.floor((e+3)/4)*16;case R_:return Math.floor((i+3)/4)*Math.floor((e+3)/4)*16;case N_:return Math.floor((i+4)/5)*Math.floor((e+3)/4)*16;case O_:return Math.floor((i+4)/5)*Math.floor((e+4)/5)*16;case D_:return Math.floor((i+5)/6)*Math.floor((e+4)/5)*16;case U_:return Math.floor((i+5)/6)*Math.floor((e+5)/6)*16;case L_:return Math.floor((i+7)/8)*Math.floor((e+4)/5)*16;case I_:return Math.floor((i+7)/8)*Math.floor((e+5)/6)*16;case P_:return Math.floor((i+7)/8)*Math.floor((e+7)/8)*16;case z_:return Math.floor((i+9)/10)*Math.floor((e+4)/5)*16;case B_:return Math.floor((i+9)/10)*Math.floor((e+5)/6)*16;case F_:return Math.floor((i+9)/10)*Math.floor((e+7)/8)*16;case k_:return Math.floor((i+9)/10)*Math.floor((e+9)/10)*16;case H_:return Math.floor((i+11)/12)*Math.floor((e+9)/10)*16;case V_:return Math.floor((i+11)/12)*Math.floor((e+11)/12)*16;case j_:case G_:case q_:return Math.ceil(i/4)*Math.ceil(e/4)*16;case X_:case W_:return Math.ceil(i/4)*Math.ceil(e/4)*8;case Y_:case Z_:return Math.ceil(i/4)*Math.ceil(e/4)*16}throw new Error(`Unable to determine texture byte length for ${t} format.`)}function F5(i){switch(i){case ka:case hb:return{byteLength:1,components:1};case ap:case fb:case ji:return{byteLength:2,components:1};case db:case pb:return{byteLength:2,components:4};case xs:case tv:case Di:return{byteLength:4,components:1};case jE:case GE:return{byteLength:4,components:3}}throw new Error(`Unknown texture type ${i}.`)}class k5{static contain(e,t){return P5(e,t)}static cover(e,t){return z5(e,t)}static fill(e){return B5(e)}static getByteLength(e,t,n,a){return fE(e,t,n,a)}}typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:yp}}));typeof window<"u"&&(window.__THREE__?Rt("WARNING: Multiple instances of Three.js being imported."):window.__THREE__=yp);/**
 * @license
 * Copyright 2010-2025 Three.js Authors
 * SPDX-License-Identifier: MIT
 */function EO(){let i=null,e=!1,t=null,n=null;function a(s,l){t(s,l),n=i.requestAnimationFrame(a)}return{start:function(){e!==!0&&t!==null&&(n=i.requestAnimationFrame(a),e=!0)},stop:function(){i.cancelAnimationFrame(n),e=!1},setAnimationLoop:function(s){t=s},setContext:function(s){i=s}}}function H5(i){const e=new WeakMap;function t(u,d){const p=u.array,g=u.usage,y=p.byteLength,_=i.createBuffer();i.bindBuffer(d,_),i.bufferData(d,p,g),u.onUploadCallback();let b;if(p instanceof Float32Array)b=i.FLOAT;else if(typeof Float16Array<"u"&&p instanceof Float16Array)b=i.HALF_FLOAT;else if(p instanceof Uint16Array)u.isFloat16BufferAttribute?b=i.HALF_FLOAT:b=i.UNSIGNED_SHORT;else if(p instanceof Int16Array)b=i.SHORT;else if(p instanceof Uint32Array)b=i.UNSIGNED_INT;else if(p instanceof Int32Array)b=i.INT;else if(p instanceof Int8Array)b=i.BYTE;else if(p instanceof Uint8Array)b=i.UNSIGNED_BYTE;else if(p instanceof Uint8ClampedArray)b=i.UNSIGNED_BYTE;else throw new Error("THREE.WebGLAttributes: Unsupported buffer data format: "+p);return{buffer:_,type:b,bytesPerElement:p.BYTES_PER_ELEMENT,version:u.version,size:y}}function n(u,d,p){const g=d.array,y=d.updateRanges;if(i.bindBuffer(p,u),y.length===0)i.bufferSubData(p,0,g);else{y.sort((b,x)=>b.start-x.start);let _=0;for(let b=1;b<y.length;b++){const x=y[_],T=y[b];T.start<=x.start+x.count+1?x.count=Math.max(x.count,T.start+T.count-x.start):(++_,y[_]=T)}y.length=_+1;for(let b=0,x=y.length;b<x;b++){const T=y[b];i.bufferSubData(p,T.start*g.BYTES_PER_ELEMENT,g,T.start,T.count)}d.clearUpdateRanges()}d.onUploadCallback()}function a(u){return u.isInterleavedBufferAttribute&&(u=u.data),e.get(u)}function s(u){u.isInterleavedBufferAttribute&&(u=u.data);const d=e.get(u);d&&(i.deleteBuffer(d.buffer),e.delete(u))}function l(u,d){if(u.isInterleavedBufferAttribute&&(u=u.data),u.isGLBufferAttribute){const g=e.get(u);(!g||g.version<u.version)&&e.set(u,{buffer:u.buffer,type:u.type,bytesPerElement:u.elementSize,version:u.version});return}const p=e.get(u);if(p===void 0)e.set(u,t(u,d));else if(p.version<u.version){if(p.size!==u.array.byteLength)throw new Error("THREE.WebGLAttributes: The size of the buffer attribute's array buffer does not match the original size. Resizing buffer attributes is not supported.");n(p.buffer,u,d),p.version=u.version}}return{get:a,remove:s,update:l}}var V5=`#ifdef USE_ALPHAHASH
	if ( diffuseColor.a < getAlphaHashThreshold( vPosition ) ) discard;
#endif`,j5=`#ifdef USE_ALPHAHASH
	const float ALPHA_HASH_SCALE = 0.05;
	float hash2D( vec2 value ) {
		return fract( 1.0e4 * sin( 17.0 * value.x + 0.1 * value.y ) * ( 0.1 + abs( sin( 13.0 * value.y + value.x ) ) ) );
	}
	float hash3D( vec3 value ) {
		return hash2D( vec2( hash2D( value.xy ), value.z ) );
	}
	float getAlphaHashThreshold( vec3 position ) {
		float maxDeriv = max(
			length( dFdx( position.xyz ) ),
			length( dFdy( position.xyz ) )
		);
		float pixScale = 1.0 / ( ALPHA_HASH_SCALE * maxDeriv );
		vec2 pixScales = vec2(
			exp2( floor( log2( pixScale ) ) ),
			exp2( ceil( log2( pixScale ) ) )
		);
		vec2 alpha = vec2(
			hash3D( floor( pixScales.x * position.xyz ) ),
			hash3D( floor( pixScales.y * position.xyz ) )
		);
		float lerpFactor = fract( log2( pixScale ) );
		float x = ( 1.0 - lerpFactor ) * alpha.x + lerpFactor * alpha.y;
		float a = min( lerpFactor, 1.0 - lerpFactor );
		vec3 cases = vec3(
			x * x / ( 2.0 * a * ( 1.0 - a ) ),
			( x - 0.5 * a ) / ( 1.0 - a ),
			1.0 - ( ( 1.0 - x ) * ( 1.0 - x ) / ( 2.0 * a * ( 1.0 - a ) ) )
		);
		float threshold = ( x < ( 1.0 - a ) )
			? ( ( x < a ) ? cases.x : cases.y )
			: cases.z;
		return clamp( threshold , 1.0e-6, 1.0 );
	}
#endif`,G5=`#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, vAlphaMapUv ).g;
#endif`,q5=`#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,X5=`#ifdef USE_ALPHATEST
	#ifdef ALPHA_TO_COVERAGE
	diffuseColor.a = smoothstep( alphaTest, alphaTest + fwidth( diffuseColor.a ), diffuseColor.a );
	if ( diffuseColor.a == 0.0 ) discard;
	#else
	if ( diffuseColor.a < alphaTest ) discard;
	#endif
#endif`,W5=`#ifdef USE_ALPHATEST
	uniform float alphaTest;
#endif`,Y5=`#ifdef USE_AOMAP
	float ambientOcclusion = ( texture2D( aoMap, vAoMapUv ).r - 1.0 ) * aoMapIntensity + 1.0;
	reflectedLight.indirectDiffuse *= ambientOcclusion;
	#if defined( USE_CLEARCOAT ) 
		clearcoatSpecularIndirect *= ambientOcclusion;
	#endif
	#if defined( USE_SHEEN ) 
		sheenSpecularIndirect *= ambientOcclusion;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD )
		float dotNV = saturate( dot( geometryNormal, geometryViewDir ) );
		reflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );
	#endif
#endif`,Z5=`#ifdef USE_AOMAP
	uniform sampler2D aoMap;
	uniform float aoMapIntensity;
#endif`,K5=`#ifdef USE_BATCHING
	#if ! defined( GL_ANGLE_multi_draw )
	#define gl_DrawID _gl_DrawID
	uniform int _gl_DrawID;
	#endif
	uniform highp sampler2D batchingTexture;
	uniform highp usampler2D batchingIdTexture;
	mat4 getBatchingMatrix( const in float i ) {
		int size = textureSize( batchingTexture, 0 ).x;
		int j = int( i ) * 4;
		int x = j % size;
		int y = j / size;
		vec4 v1 = texelFetch( batchingTexture, ivec2( x, y ), 0 );
		vec4 v2 = texelFetch( batchingTexture, ivec2( x + 1, y ), 0 );
		vec4 v3 = texelFetch( batchingTexture, ivec2( x + 2, y ), 0 );
		vec4 v4 = texelFetch( batchingTexture, ivec2( x + 3, y ), 0 );
		return mat4( v1, v2, v3, v4 );
	}
	float getIndirectIndex( const in int i ) {
		int size = textureSize( batchingIdTexture, 0 ).x;
		int x = i % size;
		int y = i / size;
		return float( texelFetch( batchingIdTexture, ivec2( x, y ), 0 ).r );
	}
#endif
#ifdef USE_BATCHING_COLOR
	uniform sampler2D batchingColorTexture;
	vec3 getBatchingColor( const in float i ) {
		int size = textureSize( batchingColorTexture, 0 ).x;
		int j = int( i );
		int x = j % size;
		int y = j / size;
		return texelFetch( batchingColorTexture, ivec2( x, y ), 0 ).rgb;
	}
#endif`,J5=`#ifdef USE_BATCHING
	mat4 batchingMatrix = getBatchingMatrix( getIndirectIndex( gl_DrawID ) );
#endif`,Q5=`vec3 transformed = vec3( position );
#ifdef USE_ALPHAHASH
	vPosition = vec3( position );
#endif`,$5=`vec3 objectNormal = vec3( normal );
#ifdef USE_TANGENT
	vec3 objectTangent = vec3( tangent.xyz );
#endif`,e2=`float G_BlinnPhong_Implicit( ) {
	return 0.25;
}
float D_BlinnPhong( const in float shininess, const in float dotNH ) {
	return RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );
}
vec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( specularColor, 1.0, dotVH );
	float G = G_BlinnPhong_Implicit( );
	float D = D_BlinnPhong( shininess, dotNH );
	return F * ( G * D );
} // validated`,t2=`#ifdef USE_IRIDESCENCE
	const mat3 XYZ_TO_REC709 = mat3(
		 3.2404542, -0.9692660,  0.0556434,
		-1.5371385,  1.8760108, -0.2040259,
		-0.4985314,  0.0415560,  1.0572252
	);
	vec3 Fresnel0ToIor( vec3 fresnel0 ) {
		vec3 sqrtF0 = sqrt( fresnel0 );
		return ( vec3( 1.0 ) + sqrtF0 ) / ( vec3( 1.0 ) - sqrtF0 );
	}
	vec3 IorToFresnel0( vec3 transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - vec3( incidentIor ) ) / ( transmittedIor + vec3( incidentIor ) ) );
	}
	float IorToFresnel0( float transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - incidentIor ) / ( transmittedIor + incidentIor ));
	}
	vec3 evalSensitivity( float OPD, vec3 shift ) {
		float phase = 2.0 * PI * OPD * 1.0e-9;
		vec3 val = vec3( 5.4856e-13, 4.4201e-13, 5.2481e-13 );
		vec3 pos = vec3( 1.6810e+06, 1.7953e+06, 2.2084e+06 );
		vec3 var = vec3( 4.3278e+09, 9.3046e+09, 6.6121e+09 );
		vec3 xyz = val * sqrt( 2.0 * PI * var ) * cos( pos * phase + shift ) * exp( - pow2( phase ) * var );
		xyz.x += 9.7470e-14 * sqrt( 2.0 * PI * 4.5282e+09 ) * cos( 2.2399e+06 * phase + shift[ 0 ] ) * exp( - 4.5282e+09 * pow2( phase ) );
		xyz /= 1.0685e-7;
		vec3 rgb = XYZ_TO_REC709 * xyz;
		return rgb;
	}
	vec3 evalIridescence( float outsideIOR, float eta2, float cosTheta1, float thinFilmThickness, vec3 baseF0 ) {
		vec3 I;
		float iridescenceIOR = mix( outsideIOR, eta2, smoothstep( 0.0, 0.03, thinFilmThickness ) );
		float sinTheta2Sq = pow2( outsideIOR / iridescenceIOR ) * ( 1.0 - pow2( cosTheta1 ) );
		float cosTheta2Sq = 1.0 - sinTheta2Sq;
		if ( cosTheta2Sq < 0.0 ) {
			return vec3( 1.0 );
		}
		float cosTheta2 = sqrt( cosTheta2Sq );
		float R0 = IorToFresnel0( iridescenceIOR, outsideIOR );
		float R12 = F_Schlick( R0, 1.0, cosTheta1 );
		float T121 = 1.0 - R12;
		float phi12 = 0.0;
		if ( iridescenceIOR < outsideIOR ) phi12 = PI;
		float phi21 = PI - phi12;
		vec3 baseIOR = Fresnel0ToIor( clamp( baseF0, 0.0, 0.9999 ) );		vec3 R1 = IorToFresnel0( baseIOR, iridescenceIOR );
		vec3 R23 = F_Schlick( R1, 1.0, cosTheta2 );
		vec3 phi23 = vec3( 0.0 );
		if ( baseIOR[ 0 ] < iridescenceIOR ) phi23[ 0 ] = PI;
		if ( baseIOR[ 1 ] < iridescenceIOR ) phi23[ 1 ] = PI;
		if ( baseIOR[ 2 ] < iridescenceIOR ) phi23[ 2 ] = PI;
		float OPD = 2.0 * iridescenceIOR * thinFilmThickness * cosTheta2;
		vec3 phi = vec3( phi21 ) + phi23;
		vec3 R123 = clamp( R12 * R23, 1e-5, 0.9999 );
		vec3 r123 = sqrt( R123 );
		vec3 Rs = pow2( T121 ) * R23 / ( vec3( 1.0 ) - R123 );
		vec3 C0 = R12 + Rs;
		I = C0;
		vec3 Cm = Rs - T121;
		for ( int m = 1; m <= 2; ++ m ) {
			Cm *= r123;
			vec3 Sm = 2.0 * evalSensitivity( float( m ) * OPD, float( m ) * phi );
			I += Cm * Sm;
		}
		return max( I, vec3( 0.0 ) );
	}
#endif`,n2=`#ifdef USE_BUMPMAP
	uniform sampler2D bumpMap;
	uniform float bumpScale;
	vec2 dHdxy_fwd() {
		vec2 dSTdx = dFdx( vBumpMapUv );
		vec2 dSTdy = dFdy( vBumpMapUv );
		float Hll = bumpScale * texture2D( bumpMap, vBumpMapUv ).x;
		float dBx = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdx ).x - Hll;
		float dBy = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdy ).x - Hll;
		return vec2( dBx, dBy );
	}
	vec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {
		vec3 vSigmaX = normalize( dFdx( surf_pos.xyz ) );
		vec3 vSigmaY = normalize( dFdy( surf_pos.xyz ) );
		vec3 vN = surf_norm;
		vec3 R1 = cross( vSigmaY, vN );
		vec3 R2 = cross( vN, vSigmaX );
		float fDet = dot( vSigmaX, R1 ) * faceDirection;
		vec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );
		return normalize( abs( fDet ) * surf_norm - vGrad );
	}
#endif`,i2=`#if NUM_CLIPPING_PLANES > 0
	vec4 plane;
	#ifdef ALPHA_TO_COVERAGE
		float distanceToPlane, distanceGradient;
		float clipOpacity = 1.0;
		#pragma unroll_loop_start
		for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			distanceToPlane = - dot( vClipPosition, plane.xyz ) + plane.w;
			distanceGradient = fwidth( distanceToPlane ) / 2.0;
			clipOpacity *= smoothstep( - distanceGradient, distanceGradient, distanceToPlane );
			if ( clipOpacity == 0.0 ) discard;
		}
		#pragma unroll_loop_end
		#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
			float unionClipOpacity = 1.0;
			#pragma unroll_loop_start
			for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
				plane = clippingPlanes[ i ];
				distanceToPlane = - dot( vClipPosition, plane.xyz ) + plane.w;
				distanceGradient = fwidth( distanceToPlane ) / 2.0;
				unionClipOpacity *= 1.0 - smoothstep( - distanceGradient, distanceGradient, distanceToPlane );
			}
			#pragma unroll_loop_end
			clipOpacity *= 1.0 - unionClipOpacity;
		#endif
		diffuseColor.a *= clipOpacity;
		if ( diffuseColor.a == 0.0 ) discard;
	#else
		#pragma unroll_loop_start
		for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			if ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;
		}
		#pragma unroll_loop_end
		#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
			bool clipped = true;
			#pragma unroll_loop_start
			for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
				plane = clippingPlanes[ i ];
				clipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;
			}
			#pragma unroll_loop_end
			if ( clipped ) discard;
		#endif
	#endif
#endif`,a2=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
	uniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];
#endif`,r2=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
#endif`,s2=`#if NUM_CLIPPING_PLANES > 0
	vClipPosition = - mvPosition.xyz;
#endif`,o2=`#if defined( USE_COLOR_ALPHA )
	diffuseColor *= vColor;
#elif defined( USE_COLOR )
	diffuseColor.rgb *= vColor;
#endif`,l2=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR )
	varying vec3 vColor;
#endif`,c2=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR ) || defined( USE_BATCHING_COLOR )
	varying vec3 vColor;
#endif`,u2=`#if defined( USE_COLOR_ALPHA )
	vColor = vec4( 1.0 );
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR ) || defined( USE_BATCHING_COLOR )
	vColor = vec3( 1.0 );
#endif
#ifdef USE_COLOR
	vColor *= color;
#endif
#ifdef USE_INSTANCING_COLOR
	vColor.xyz *= instanceColor.xyz;
#endif
#ifdef USE_BATCHING_COLOR
	vec3 batchingColor = getBatchingColor( getIndirectIndex( gl_DrawID ) );
	vColor.xyz *= batchingColor.xyz;
#endif`,h2=`#define PI 3.141592653589793
#define PI2 6.283185307179586
#define PI_HALF 1.5707963267948966
#define RECIPROCAL_PI 0.3183098861837907
#define RECIPROCAL_PI2 0.15915494309189535
#define EPSILON 1e-6
#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
#define whiteComplement( a ) ( 1.0 - saturate( a ) )
float pow2( const in float x ) { return x*x; }
vec3 pow2( const in vec3 x ) { return x*x; }
float pow3( const in float x ) { return x*x*x; }
float pow4( const in float x ) { float x2 = x*x; return x2*x2; }
float max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }
float average( const in vec3 v ) { return dot( v, vec3( 0.3333333 ) ); }
highp float rand( const in vec2 uv ) {
	const highp float a = 12.9898, b = 78.233, c = 43758.5453;
	highp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );
	return fract( sin( sn ) * c );
}
#ifdef HIGH_PRECISION
	float precisionSafeLength( vec3 v ) { return length( v ); }
#else
	float precisionSafeLength( vec3 v ) {
		float maxComponent = max3( abs( v ) );
		return length( v / maxComponent ) * maxComponent;
	}
#endif
struct IncidentLight {
	vec3 color;
	vec3 direction;
	bool visible;
};
struct ReflectedLight {
	vec3 directDiffuse;
	vec3 directSpecular;
	vec3 indirectDiffuse;
	vec3 indirectSpecular;
};
#ifdef USE_ALPHAHASH
	varying vec3 vPosition;
#endif
vec3 transformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );
}
vec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );
}
bool isPerspectiveMatrix( mat4 m ) {
	return m[ 2 ][ 3 ] == - 1.0;
}
vec2 equirectUv( in vec3 dir ) {
	float u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;
	float v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;
	return vec2( u, v );
}
vec3 BRDF_Lambert( const in vec3 diffuseColor ) {
	return RECIPROCAL_PI * diffuseColor;
}
vec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
}
float F_Schlick( const in float f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
} // validated`,f2=`#ifdef ENVMAP_TYPE_CUBE_UV
	#define cubeUV_minMipLevel 4.0
	#define cubeUV_minTileSize 16.0
	float getFace( vec3 direction ) {
		vec3 absDirection = abs( direction );
		float face = - 1.0;
		if ( absDirection.x > absDirection.z ) {
			if ( absDirection.x > absDirection.y )
				face = direction.x > 0.0 ? 0.0 : 3.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		} else {
			if ( absDirection.z > absDirection.y )
				face = direction.z > 0.0 ? 2.0 : 5.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		}
		return face;
	}
	vec2 getUV( vec3 direction, float face ) {
		vec2 uv;
		if ( face == 0.0 ) {
			uv = vec2( direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 1.0 ) {
			uv = vec2( - direction.x, - direction.z ) / abs( direction.y );
		} else if ( face == 2.0 ) {
			uv = vec2( - direction.x, direction.y ) / abs( direction.z );
		} else if ( face == 3.0 ) {
			uv = vec2( - direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 4.0 ) {
			uv = vec2( - direction.x, direction.z ) / abs( direction.y );
		} else {
			uv = vec2( direction.x, direction.y ) / abs( direction.z );
		}
		return 0.5 * ( uv + 1.0 );
	}
	vec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {
		float face = getFace( direction );
		float filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );
		mipInt = max( mipInt, cubeUV_minMipLevel );
		float faceSize = exp2( mipInt );
		highp vec2 uv = getUV( direction, face ) * ( faceSize - 2.0 ) + 1.0;
		if ( face > 2.0 ) {
			uv.y += faceSize;
			face -= 3.0;
		}
		uv.x += face * faceSize;
		uv.x += filterInt * 3.0 * cubeUV_minTileSize;
		uv.y += 4.0 * ( exp2( CUBEUV_MAX_MIP ) - faceSize );
		uv.x *= CUBEUV_TEXEL_WIDTH;
		uv.y *= CUBEUV_TEXEL_HEIGHT;
		#ifdef texture2DGradEXT
			return texture2DGradEXT( envMap, uv, vec2( 0.0 ), vec2( 0.0 ) ).rgb;
		#else
			return texture2D( envMap, uv ).rgb;
		#endif
	}
	#define cubeUV_r0 1.0
	#define cubeUV_m0 - 2.0
	#define cubeUV_r1 0.8
	#define cubeUV_m1 - 1.0
	#define cubeUV_r4 0.4
	#define cubeUV_m4 2.0
	#define cubeUV_r5 0.305
	#define cubeUV_m5 3.0
	#define cubeUV_r6 0.21
	#define cubeUV_m6 4.0
	float roughnessToMip( float roughness ) {
		float mip = 0.0;
		if ( roughness >= cubeUV_r1 ) {
			mip = ( cubeUV_r0 - roughness ) * ( cubeUV_m1 - cubeUV_m0 ) / ( cubeUV_r0 - cubeUV_r1 ) + cubeUV_m0;
		} else if ( roughness >= cubeUV_r4 ) {
			mip = ( cubeUV_r1 - roughness ) * ( cubeUV_m4 - cubeUV_m1 ) / ( cubeUV_r1 - cubeUV_r4 ) + cubeUV_m1;
		} else if ( roughness >= cubeUV_r5 ) {
			mip = ( cubeUV_r4 - roughness ) * ( cubeUV_m5 - cubeUV_m4 ) / ( cubeUV_r4 - cubeUV_r5 ) + cubeUV_m4;
		} else if ( roughness >= cubeUV_r6 ) {
			mip = ( cubeUV_r5 - roughness ) * ( cubeUV_m6 - cubeUV_m5 ) / ( cubeUV_r5 - cubeUV_r6 ) + cubeUV_m5;
		} else {
			mip = - 2.0 * log2( 1.16 * roughness );		}
		return mip;
	}
	vec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {
		float mip = clamp( roughnessToMip( roughness ), cubeUV_m0, CUBEUV_MAX_MIP );
		float mipF = fract( mip );
		float mipInt = floor( mip );
		vec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );
		if ( mipF == 0.0 ) {
			return vec4( color0, 1.0 );
		} else {
			vec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );
			return vec4( mix( color0, color1, mipF ), 1.0 );
		}
	}
#endif`,d2=`vec3 transformedNormal = objectNormal;
#ifdef USE_TANGENT
	vec3 transformedTangent = objectTangent;
#endif
#ifdef USE_BATCHING
	mat3 bm = mat3( batchingMatrix );
	transformedNormal /= vec3( dot( bm[ 0 ], bm[ 0 ] ), dot( bm[ 1 ], bm[ 1 ] ), dot( bm[ 2 ], bm[ 2 ] ) );
	transformedNormal = bm * transformedNormal;
	#ifdef USE_TANGENT
		transformedTangent = bm * transformedTangent;
	#endif
#endif
#ifdef USE_INSTANCING
	mat3 im = mat3( instanceMatrix );
	transformedNormal /= vec3( dot( im[ 0 ], im[ 0 ] ), dot( im[ 1 ], im[ 1 ] ), dot( im[ 2 ], im[ 2 ] ) );
	transformedNormal = im * transformedNormal;
	#ifdef USE_TANGENT
		transformedTangent = im * transformedTangent;
	#endif
#endif
transformedNormal = normalMatrix * transformedNormal;
#ifdef FLIP_SIDED
	transformedNormal = - transformedNormal;
#endif
#ifdef USE_TANGENT
	transformedTangent = ( modelViewMatrix * vec4( transformedTangent, 0.0 ) ).xyz;
	#ifdef FLIP_SIDED
		transformedTangent = - transformedTangent;
	#endif
#endif`,p2=`#ifdef USE_DISPLACEMENTMAP
	uniform sampler2D displacementMap;
	uniform float displacementScale;
	uniform float displacementBias;
#endif`,m2=`#ifdef USE_DISPLACEMENTMAP
	transformed += normalize( objectNormal ) * ( texture2D( displacementMap, vDisplacementMapUv ).x * displacementScale + displacementBias );
#endif`,g2=`#ifdef USE_EMISSIVEMAP
	vec4 emissiveColor = texture2D( emissiveMap, vEmissiveMapUv );
	#ifdef DECODE_VIDEO_TEXTURE_EMISSIVE
		emissiveColor = sRGBTransferEOTF( emissiveColor );
	#endif
	totalEmissiveRadiance *= emissiveColor.rgb;
#endif`,v2=`#ifdef USE_EMISSIVEMAP
	uniform sampler2D emissiveMap;
#endif`,y2="gl_FragColor = linearToOutputTexel( gl_FragColor );",_2=`vec4 LinearTransferOETF( in vec4 value ) {
	return value;
}
vec4 sRGBTransferEOTF( in vec4 value ) {
	return vec4( mix( pow( value.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), value.rgb * 0.0773993808, vec3( lessThanEqual( value.rgb, vec3( 0.04045 ) ) ) ), value.a );
}
vec4 sRGBTransferOETF( in vec4 value ) {
	return vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );
}`,b2=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vec3 cameraToFrag;
		if ( isOrthographic ) {
			cameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToFrag = normalize( vWorldPosition - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vec3 reflectVec = reflect( cameraToFrag, worldNormal );
		#else
			vec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );
		#endif
	#else
		vec3 reflectVec = vReflect;
	#endif
	#ifdef ENVMAP_TYPE_CUBE
		vec4 envColor = textureCube( envMap, envMapRotation * vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );
	#else
		vec4 envColor = vec4( 0.0 );
	#endif
	#ifdef ENVMAP_BLENDING_MULTIPLY
		outgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_MIX )
		outgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_ADD )
		outgoingLight += envColor.xyz * specularStrength * reflectivity;
	#endif
#endif`,x2=`#ifdef USE_ENVMAP
	uniform float envMapIntensity;
	uniform float flipEnvMap;
	uniform mat3 envMapRotation;
	#ifdef ENVMAP_TYPE_CUBE
		uniform samplerCube envMap;
	#else
		uniform sampler2D envMap;
	#endif
#endif`,S2=`#ifdef USE_ENVMAP
	uniform float reflectivity;
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		varying vec3 vWorldPosition;
		uniform float refractionRatio;
	#else
		varying vec3 vReflect;
	#endif
#endif`,E2=`#ifdef USE_ENVMAP
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		
		varying vec3 vWorldPosition;
	#else
		varying vec3 vReflect;
		uniform float refractionRatio;
	#endif
#endif`,M2=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vWorldPosition = worldPosition.xyz;
	#else
		vec3 cameraToVertex;
		if ( isOrthographic ) {
			cameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToVertex = normalize( worldPosition.xyz - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vReflect = reflect( cameraToVertex, worldNormal );
		#else
			vReflect = refract( cameraToVertex, worldNormal, refractionRatio );
		#endif
	#endif
#endif`,w2=`#ifdef USE_FOG
	vFogDepth = - mvPosition.z;
#endif`,T2=`#ifdef USE_FOG
	varying float vFogDepth;
#endif`,A2=`#ifdef USE_FOG
	#ifdef FOG_EXP2
		float fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );
	#else
		float fogFactor = smoothstep( fogNear, fogFar, vFogDepth );
	#endif
	gl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );
#endif`,C2=`#ifdef USE_FOG
	uniform vec3 fogColor;
	varying float vFogDepth;
	#ifdef FOG_EXP2
		uniform float fogDensity;
	#else
		uniform float fogNear;
		uniform float fogFar;
	#endif
#endif`,R2=`#ifdef USE_GRADIENTMAP
	uniform sampler2D gradientMap;
#endif
vec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {
	float dotNL = dot( normal, lightDirection );
	vec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );
	#ifdef USE_GRADIENTMAP
		return vec3( texture2D( gradientMap, coord ).r );
	#else
		vec2 fw = fwidth( coord ) * 0.5;
		return mix( vec3( 0.7 ), vec3( 1.0 ), smoothstep( 0.7 - fw.x, 0.7 + fw.x, coord.x ) );
	#endif
}`,N2=`#ifdef USE_LIGHTMAP
	uniform sampler2D lightMap;
	uniform float lightMapIntensity;
#endif`,O2=`LambertMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularStrength = specularStrength;`,D2=`varying vec3 vViewPosition;
struct LambertMaterial {
	vec3 diffuseColor;
	float specularStrength;
};
void RE_Direct_Lambert( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Lambert( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Lambert
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Lambert`,U2=`uniform bool receiveShadow;
uniform vec3 ambientLightColor;
#if defined( USE_LIGHT_PROBES )
	uniform vec3 lightProbe[ 9 ];
#endif
vec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {
	float x = normal.x, y = normal.y, z = normal.z;
	vec3 result = shCoefficients[ 0 ] * 0.886227;
	result += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;
	result += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;
	result += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;
	result += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;
	result += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;
	result += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );
	result += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;
	result += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );
	return result;
}
vec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {
	vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
	vec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );
	return irradiance;
}
vec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {
	vec3 irradiance = ambientLightColor;
	return irradiance;
}
float getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {
	float distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );
	if ( cutoffDistance > 0.0 ) {
		distanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );
	}
	return distanceFalloff;
}
float getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {
	return smoothstep( coneCosine, penumbraCosine, angleCosine );
}
#if NUM_DIR_LIGHTS > 0
	struct DirectionalLight {
		vec3 direction;
		vec3 color;
	};
	uniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];
	void getDirectionalLightInfo( const in DirectionalLight directionalLight, out IncidentLight light ) {
		light.color = directionalLight.color;
		light.direction = directionalLight.direction;
		light.visible = true;
	}
#endif
#if NUM_POINT_LIGHTS > 0
	struct PointLight {
		vec3 position;
		vec3 color;
		float distance;
		float decay;
	};
	uniform PointLight pointLights[ NUM_POINT_LIGHTS ];
	void getPointLightInfo( const in PointLight pointLight, const in vec3 geometryPosition, out IncidentLight light ) {
		vec3 lVector = pointLight.position - geometryPosition;
		light.direction = normalize( lVector );
		float lightDistance = length( lVector );
		light.color = pointLight.color;
		light.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );
		light.visible = ( light.color != vec3( 0.0 ) );
	}
#endif
#if NUM_SPOT_LIGHTS > 0
	struct SpotLight {
		vec3 position;
		vec3 direction;
		vec3 color;
		float distance;
		float decay;
		float coneCos;
		float penumbraCos;
	};
	uniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];
	void getSpotLightInfo( const in SpotLight spotLight, const in vec3 geometryPosition, out IncidentLight light ) {
		vec3 lVector = spotLight.position - geometryPosition;
		light.direction = normalize( lVector );
		float angleCos = dot( light.direction, spotLight.direction );
		float spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );
		if ( spotAttenuation > 0.0 ) {
			float lightDistance = length( lVector );
			light.color = spotLight.color * spotAttenuation;
			light.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );
			light.visible = ( light.color != vec3( 0.0 ) );
		} else {
			light.color = vec3( 0.0 );
			light.visible = false;
		}
	}
#endif
#if NUM_RECT_AREA_LIGHTS > 0
	struct RectAreaLight {
		vec3 color;
		vec3 position;
		vec3 halfWidth;
		vec3 halfHeight;
	};
	uniform sampler2D ltc_1;	uniform sampler2D ltc_2;
	uniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];
#endif
#if NUM_HEMI_LIGHTS > 0
	struct HemisphereLight {
		vec3 direction;
		vec3 skyColor;
		vec3 groundColor;
	};
	uniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];
	vec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {
		float dotNL = dot( normal, hemiLight.direction );
		float hemiDiffuseWeight = 0.5 * dotNL + 0.5;
		vec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );
		return irradiance;
	}
#endif`,L2=`#ifdef USE_ENVMAP
	vec3 getIBLIrradiance( const in vec3 normal ) {
		#ifdef ENVMAP_TYPE_CUBE_UV
			vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, envMapRotation * worldNormal, 1.0 );
			return PI * envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	vec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {
		#ifdef ENVMAP_TYPE_CUBE_UV
			vec3 reflectVec = reflect( - viewDir, normal );
			reflectVec = normalize( mix( reflectVec, normal, pow4( roughness ) ) );
			reflectVec = inverseTransformDirection( reflectVec, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, envMapRotation * reflectVec, roughness );
			return envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	#ifdef USE_ANISOTROPY
		vec3 getIBLAnisotropyRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness, const in vec3 bitangent, const in float anisotropy ) {
			#ifdef ENVMAP_TYPE_CUBE_UV
				vec3 bentNormal = cross( bitangent, viewDir );
				bentNormal = normalize( cross( bentNormal, bitangent ) );
				bentNormal = normalize( mix( bentNormal, normal, pow2( pow2( 1.0 - anisotropy * ( 1.0 - roughness ) ) ) ) );
				return getIBLRadiance( viewDir, bentNormal, roughness );
			#else
				return vec3( 0.0 );
			#endif
		}
	#endif
#endif`,I2=`ToonMaterial material;
material.diffuseColor = diffuseColor.rgb;`,P2=`varying vec3 vViewPosition;
struct ToonMaterial {
	vec3 diffuseColor;
};
void RE_Direct_Toon( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	vec3 irradiance = getGradientIrradiance( geometryNormal, directLight.direction ) * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Toon
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Toon`,z2=`BlinnPhongMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularColor = specular;
material.specularShininess = shininess;
material.specularStrength = specularStrength;`,B2=`varying vec3 vViewPosition;
struct BlinnPhongMaterial {
	vec3 diffuseColor;
	vec3 specularColor;
	float specularShininess;
	float specularStrength;
};
void RE_Direct_BlinnPhong( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
	reflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometryViewDir, geometryNormal, material.specularColor, material.specularShininess ) * material.specularStrength;
}
void RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_BlinnPhong
#define RE_IndirectDiffuse		RE_IndirectDiffuse_BlinnPhong`,F2=`PhysicalMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.diffuseContribution = diffuseColor.rgb * ( 1.0 - metalnessFactor );
material.metalness = metalnessFactor;
vec3 dxy = max( abs( dFdx( nonPerturbedNormal ) ), abs( dFdy( nonPerturbedNormal ) ) );
float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );
material.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;
material.roughness = min( material.roughness, 1.0 );
#ifdef IOR
	material.ior = ior;
	#ifdef USE_SPECULAR
		float specularIntensityFactor = specularIntensity;
		vec3 specularColorFactor = specularColor;
		#ifdef USE_SPECULAR_COLORMAP
			specularColorFactor *= texture2D( specularColorMap, vSpecularColorMapUv ).rgb;
		#endif
		#ifdef USE_SPECULAR_INTENSITYMAP
			specularIntensityFactor *= texture2D( specularIntensityMap, vSpecularIntensityMapUv ).a;
		#endif
		material.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );
	#else
		float specularIntensityFactor = 1.0;
		vec3 specularColorFactor = vec3( 1.0 );
		material.specularF90 = 1.0;
	#endif
	material.specularColor = min( pow2( ( material.ior - 1.0 ) / ( material.ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor;
	material.specularColorBlended = mix( material.specularColor, diffuseColor.rgb, metalnessFactor );
#else
	material.specularColor = vec3( 0.04 );
	material.specularColorBlended = mix( material.specularColor, diffuseColor.rgb, metalnessFactor );
	material.specularF90 = 1.0;
#endif
#ifdef USE_CLEARCOAT
	material.clearcoat = clearcoat;
	material.clearcoatRoughness = clearcoatRoughness;
	material.clearcoatF0 = vec3( 0.04 );
	material.clearcoatF90 = 1.0;
	#ifdef USE_CLEARCOATMAP
		material.clearcoat *= texture2D( clearcoatMap, vClearcoatMapUv ).x;
	#endif
	#ifdef USE_CLEARCOAT_ROUGHNESSMAP
		material.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vClearcoatRoughnessMapUv ).y;
	#endif
	material.clearcoat = saturate( material.clearcoat );	material.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );
	material.clearcoatRoughness += geometryRoughness;
	material.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );
#endif
#ifdef USE_DISPERSION
	material.dispersion = dispersion;
#endif
#ifdef USE_IRIDESCENCE
	material.iridescence = iridescence;
	material.iridescenceIOR = iridescenceIOR;
	#ifdef USE_IRIDESCENCEMAP
		material.iridescence *= texture2D( iridescenceMap, vIridescenceMapUv ).r;
	#endif
	#ifdef USE_IRIDESCENCE_THICKNESSMAP
		material.iridescenceThickness = (iridescenceThicknessMaximum - iridescenceThicknessMinimum) * texture2D( iridescenceThicknessMap, vIridescenceThicknessMapUv ).g + iridescenceThicknessMinimum;
	#else
		material.iridescenceThickness = iridescenceThicknessMaximum;
	#endif
#endif
#ifdef USE_SHEEN
	material.sheenColor = sheenColor;
	#ifdef USE_SHEEN_COLORMAP
		material.sheenColor *= texture2D( sheenColorMap, vSheenColorMapUv ).rgb;
	#endif
	material.sheenRoughness = clamp( sheenRoughness, 0.0001, 1.0 );
	#ifdef USE_SHEEN_ROUGHNESSMAP
		material.sheenRoughness *= texture2D( sheenRoughnessMap, vSheenRoughnessMapUv ).a;
	#endif
#endif
#ifdef USE_ANISOTROPY
	#ifdef USE_ANISOTROPYMAP
		mat2 anisotropyMat = mat2( anisotropyVector.x, anisotropyVector.y, - anisotropyVector.y, anisotropyVector.x );
		vec3 anisotropyPolar = texture2D( anisotropyMap, vAnisotropyMapUv ).rgb;
		vec2 anisotropyV = anisotropyMat * normalize( 2.0 * anisotropyPolar.rg - vec2( 1.0 ) ) * anisotropyPolar.b;
	#else
		vec2 anisotropyV = anisotropyVector;
	#endif
	material.anisotropy = length( anisotropyV );
	if( material.anisotropy == 0.0 ) {
		anisotropyV = vec2( 1.0, 0.0 );
	} else {
		anisotropyV /= material.anisotropy;
		material.anisotropy = saturate( material.anisotropy );
	}
	material.alphaT = mix( pow2( material.roughness ), 1.0, pow2( material.anisotropy ) );
	material.anisotropyT = tbn[ 0 ] * anisotropyV.x + tbn[ 1 ] * anisotropyV.y;
	material.anisotropyB = tbn[ 1 ] * anisotropyV.x - tbn[ 0 ] * anisotropyV.y;
#endif`,k2=`uniform sampler2D dfgLUT;
struct PhysicalMaterial {
	vec3 diffuseColor;
	vec3 diffuseContribution;
	vec3 specularColor;
	vec3 specularColorBlended;
	float roughness;
	float metalness;
	float specularF90;
	float dispersion;
	#ifdef USE_CLEARCOAT
		float clearcoat;
		float clearcoatRoughness;
		vec3 clearcoatF0;
		float clearcoatF90;
	#endif
	#ifdef USE_IRIDESCENCE
		float iridescence;
		float iridescenceIOR;
		float iridescenceThickness;
		vec3 iridescenceFresnel;
		vec3 iridescenceF0;
		vec3 iridescenceFresnelDielectric;
		vec3 iridescenceFresnelMetallic;
	#endif
	#ifdef USE_SHEEN
		vec3 sheenColor;
		float sheenRoughness;
	#endif
	#ifdef IOR
		float ior;
	#endif
	#ifdef USE_TRANSMISSION
		float transmission;
		float transmissionAlpha;
		float thickness;
		float attenuationDistance;
		vec3 attenuationColor;
	#endif
	#ifdef USE_ANISOTROPY
		float anisotropy;
		float alphaT;
		vec3 anisotropyT;
		vec3 anisotropyB;
	#endif
};
vec3 clearcoatSpecularDirect = vec3( 0.0 );
vec3 clearcoatSpecularIndirect = vec3( 0.0 );
vec3 sheenSpecularDirect = vec3( 0.0 );
vec3 sheenSpecularIndirect = vec3(0.0 );
vec3 Schlick_to_F0( const in vec3 f, const in float f90, const in float dotVH ) {
    float x = clamp( 1.0 - dotVH, 0.0, 1.0 );
    float x2 = x * x;
    float x5 = clamp( x * x2 * x2, 0.0, 0.9999 );
    return ( f - vec3( f90 ) * x5 ) / ( 1.0 - x5 );
}
float V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {
	float a2 = pow2( alpha );
	float gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );
	float gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );
	return 0.5 / max( gv + gl, EPSILON );
}
float D_GGX( const in float alpha, const in float dotNH ) {
	float a2 = pow2( alpha );
	float denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;
	return RECIPROCAL_PI * a2 / pow2( denom );
}
#ifdef USE_ANISOTROPY
	float V_GGX_SmithCorrelated_Anisotropic( const in float alphaT, const in float alphaB, const in float dotTV, const in float dotBV, const in float dotTL, const in float dotBL, const in float dotNV, const in float dotNL ) {
		float gv = dotNL * length( vec3( alphaT * dotTV, alphaB * dotBV, dotNV ) );
		float gl = dotNV * length( vec3( alphaT * dotTL, alphaB * dotBL, dotNL ) );
		float v = 0.5 / ( gv + gl );
		return v;
	}
	float D_GGX_Anisotropic( const in float alphaT, const in float alphaB, const in float dotNH, const in float dotTH, const in float dotBH ) {
		float a2 = alphaT * alphaB;
		highp vec3 v = vec3( alphaB * dotTH, alphaT * dotBH, a2 * dotNH );
		highp float v2 = dot( v, v );
		float w2 = a2 / v2;
		return RECIPROCAL_PI * a2 * pow2 ( w2 );
	}
#endif
#ifdef USE_CLEARCOAT
	vec3 BRDF_GGX_Clearcoat( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material) {
		vec3 f0 = material.clearcoatF0;
		float f90 = material.clearcoatF90;
		float roughness = material.clearcoatRoughness;
		float alpha = pow2( roughness );
		vec3 halfDir = normalize( lightDir + viewDir );
		float dotNL = saturate( dot( normal, lightDir ) );
		float dotNV = saturate( dot( normal, viewDir ) );
		float dotNH = saturate( dot( normal, halfDir ) );
		float dotVH = saturate( dot( viewDir, halfDir ) );
		vec3 F = F_Schlick( f0, f90, dotVH );
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
		return F * ( V * D );
	}
#endif
vec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material ) {
	vec3 f0 = material.specularColorBlended;
	float f90 = material.specularF90;
	float roughness = material.roughness;
	float alpha = pow2( roughness );
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( f0, f90, dotVH );
	#ifdef USE_IRIDESCENCE
		F = mix( F, material.iridescenceFresnel, material.iridescence );
	#endif
	#ifdef USE_ANISOTROPY
		float dotTL = dot( material.anisotropyT, lightDir );
		float dotTV = dot( material.anisotropyT, viewDir );
		float dotTH = dot( material.anisotropyT, halfDir );
		float dotBL = dot( material.anisotropyB, lightDir );
		float dotBV = dot( material.anisotropyB, viewDir );
		float dotBH = dot( material.anisotropyB, halfDir );
		float V = V_GGX_SmithCorrelated_Anisotropic( material.alphaT, alpha, dotTV, dotBV, dotTL, dotBL, dotNV, dotNL );
		float D = D_GGX_Anisotropic( material.alphaT, alpha, dotNH, dotTH, dotBH );
	#else
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
	#endif
	return F * ( V * D );
}
vec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {
	const float LUT_SIZE = 64.0;
	const float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;
	const float LUT_BIAS = 0.5 / LUT_SIZE;
	float dotNV = saturate( dot( N, V ) );
	vec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );
	uv = uv * LUT_SCALE + LUT_BIAS;
	return uv;
}
float LTC_ClippedSphereFormFactor( const in vec3 f ) {
	float l = length( f );
	return max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );
}
vec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {
	float x = dot( v1, v2 );
	float y = abs( x );
	float a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;
	float b = 3.4175940 + ( 4.1616724 + y ) * y;
	float v = a / b;
	float theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;
	return cross( v1, v2 ) * theta_sintheta;
}
vec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {
	vec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];
	vec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];
	vec3 lightNormal = cross( v1, v2 );
	if( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );
	vec3 T1, T2;
	T1 = normalize( V - N * dot( V, N ) );
	T2 = - cross( N, T1 );
	mat3 mat = mInv * transpose( mat3( T1, T2, N ) );
	vec3 coords[ 4 ];
	coords[ 0 ] = mat * ( rectCoords[ 0 ] - P );
	coords[ 1 ] = mat * ( rectCoords[ 1 ] - P );
	coords[ 2 ] = mat * ( rectCoords[ 2 ] - P );
	coords[ 3 ] = mat * ( rectCoords[ 3 ] - P );
	coords[ 0 ] = normalize( coords[ 0 ] );
	coords[ 1 ] = normalize( coords[ 1 ] );
	coords[ 2 ] = normalize( coords[ 2 ] );
	coords[ 3 ] = normalize( coords[ 3 ] );
	vec3 vectorFormFactor = vec3( 0.0 );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );
	float result = LTC_ClippedSphereFormFactor( vectorFormFactor );
	return vec3( result );
}
#if defined( USE_SHEEN )
float D_Charlie( float roughness, float dotNH ) {
	float alpha = pow2( roughness );
	float invAlpha = 1.0 / alpha;
	float cos2h = dotNH * dotNH;
	float sin2h = max( 1.0 - cos2h, 0.0078125 );
	return ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );
}
float V_Neubelt( float dotNV, float dotNL ) {
	return saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );
}
vec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float D = D_Charlie( sheenRoughness, dotNH );
	float V = V_Neubelt( dotNV, dotNL );
	return sheenColor * ( D * V );
}
#endif
float IBLSheenBRDF( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	float r2 = roughness * roughness;
	float rInv = 1.0 / ( roughness + 0.1 );
	float a = -1.9362 + 1.0678 * roughness + 0.4573 * r2 - 0.8469 * rInv;
	float b = -0.6014 + 0.5538 * roughness - 0.4670 * r2 - 0.1255 * rInv;
	float DG = exp( a * dotNV + b );
	return saturate( DG );
}
vec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	vec2 fab = texture2D( dfgLUT, vec2( roughness, dotNV ) ).rg;
	return specularColor * fab.x + specularF90 * fab.y;
}
#ifdef USE_IRIDESCENCE
void computeMultiscatteringIridescence( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float iridescence, const in vec3 iridescenceF0, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#else
void computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#endif
	float dotNV = saturate( dot( normal, viewDir ) );
	vec2 fab = texture2D( dfgLUT, vec2( roughness, dotNV ) ).rg;
	#ifdef USE_IRIDESCENCE
		vec3 Fr = mix( specularColor, iridescenceF0, iridescence );
	#else
		vec3 Fr = specularColor;
	#endif
	vec3 FssEss = Fr * fab.x + specularF90 * fab.y;
	float Ess = fab.x + fab.y;
	float Ems = 1.0 - Ess;
	vec3 Favg = Fr + ( 1.0 - Fr ) * 0.047619;	vec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );
	singleScatter += FssEss;
	multiScatter += Fms * Ems;
}
vec3 BRDF_GGX_Multiscatter( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material ) {
	vec3 singleScatter = BRDF_GGX( lightDir, viewDir, normal, material );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	vec2 dfgV = texture2D( dfgLUT, vec2( material.roughness, dotNV ) ).rg;
	vec2 dfgL = texture2D( dfgLUT, vec2( material.roughness, dotNL ) ).rg;
	vec3 FssEss_V = material.specularColorBlended * dfgV.x + material.specularF90 * dfgV.y;
	vec3 FssEss_L = material.specularColorBlended * dfgL.x + material.specularF90 * dfgL.y;
	float Ess_V = dfgV.x + dfgV.y;
	float Ess_L = dfgL.x + dfgL.y;
	float Ems_V = 1.0 - Ess_V;
	float Ems_L = 1.0 - Ess_L;
	vec3 Favg = material.specularColorBlended + ( 1.0 - material.specularColorBlended ) * 0.047619;
	vec3 Fms = FssEss_V * FssEss_L * Favg / ( 1.0 - Ems_V * Ems_L * Favg + EPSILON );
	float compensationFactor = Ems_V * Ems_L;
	vec3 multiScatter = Fms * compensationFactor;
	return singleScatter + multiScatter;
}
#if NUM_RECT_AREA_LIGHTS > 0
	void RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
		vec3 normal = geometryNormal;
		vec3 viewDir = geometryViewDir;
		vec3 position = geometryPosition;
		vec3 lightPos = rectAreaLight.position;
		vec3 halfWidth = rectAreaLight.halfWidth;
		vec3 halfHeight = rectAreaLight.halfHeight;
		vec3 lightColor = rectAreaLight.color;
		float roughness = material.roughness;
		vec3 rectCoords[ 4 ];
		rectCoords[ 0 ] = lightPos + halfWidth - halfHeight;		rectCoords[ 1 ] = lightPos - halfWidth - halfHeight;
		rectCoords[ 2 ] = lightPos - halfWidth + halfHeight;
		rectCoords[ 3 ] = lightPos + halfWidth + halfHeight;
		vec2 uv = LTC_Uv( normal, viewDir, roughness );
		vec4 t1 = texture2D( ltc_1, uv );
		vec4 t2 = texture2D( ltc_2, uv );
		mat3 mInv = mat3(
			vec3( t1.x, 0, t1.y ),
			vec3(    0, 1,    0 ),
			vec3( t1.z, 0, t1.w )
		);
		vec3 fresnel = ( material.specularColorBlended * t2.x + ( vec3( 1.0 ) - material.specularColorBlended ) * t2.y );
		reflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );
		reflectedLight.directDiffuse += lightColor * material.diffuseContribution * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );
	}
#endif
void RE_Direct_Physical( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	#ifdef USE_CLEARCOAT
		float dotNLcc = saturate( dot( geometryClearcoatNormal, directLight.direction ) );
		vec3 ccIrradiance = dotNLcc * directLight.color;
		clearcoatSpecularDirect += ccIrradiance * BRDF_GGX_Clearcoat( directLight.direction, geometryViewDir, geometryClearcoatNormal, material );
	#endif
	#ifdef USE_SHEEN
 
 		sheenSpecularDirect += irradiance * BRDF_Sheen( directLight.direction, geometryViewDir, geometryNormal, material.sheenColor, material.sheenRoughness );
 
 		float sheenAlbedoV = IBLSheenBRDF( geometryNormal, geometryViewDir, material.sheenRoughness );
 		float sheenAlbedoL = IBLSheenBRDF( geometryNormal, directLight.direction, material.sheenRoughness );
 
 		float sheenEnergyComp = 1.0 - max3( material.sheenColor ) * max( sheenAlbedoV, sheenAlbedoL );
 
 		irradiance *= sheenEnergyComp;
 
 	#endif
	reflectedLight.directSpecular += irradiance * BRDF_GGX_Multiscatter( directLight.direction, geometryViewDir, geometryNormal, material );
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseContribution );
}
void RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	vec3 diffuse = irradiance * BRDF_Lambert( material.diffuseContribution );
	#ifdef USE_SHEEN
		float sheenAlbedo = IBLSheenBRDF( geometryNormal, geometryViewDir, material.sheenRoughness );
		float sheenEnergyComp = 1.0 - max3( material.sheenColor ) * sheenAlbedo;
		diffuse *= sheenEnergyComp;
	#endif
	reflectedLight.indirectDiffuse += diffuse;
}
void RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {
	#ifdef USE_CLEARCOAT
		clearcoatSpecularIndirect += clearcoatRadiance * EnvironmentBRDF( geometryClearcoatNormal, geometryViewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );
	#endif
	#ifdef USE_SHEEN
		sheenSpecularIndirect += irradiance * material.sheenColor * IBLSheenBRDF( geometryNormal, geometryViewDir, material.sheenRoughness ) * RECIPROCAL_PI;
 	#endif
	vec3 singleScatteringDielectric = vec3( 0.0 );
	vec3 multiScatteringDielectric = vec3( 0.0 );
	vec3 singleScatteringMetallic = vec3( 0.0 );
	vec3 multiScatteringMetallic = vec3( 0.0 );
	#ifdef USE_IRIDESCENCE
		computeMultiscatteringIridescence( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnelDielectric, material.roughness, singleScatteringDielectric, multiScatteringDielectric );
		computeMultiscatteringIridescence( geometryNormal, geometryViewDir, material.diffuseColor, material.specularF90, material.iridescence, material.iridescenceFresnelMetallic, material.roughness, singleScatteringMetallic, multiScatteringMetallic );
	#else
		computeMultiscattering( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.roughness, singleScatteringDielectric, multiScatteringDielectric );
		computeMultiscattering( geometryNormal, geometryViewDir, material.diffuseColor, material.specularF90, material.roughness, singleScatteringMetallic, multiScatteringMetallic );
	#endif
	vec3 singleScattering = mix( singleScatteringDielectric, singleScatteringMetallic, material.metalness );
	vec3 multiScattering = mix( multiScatteringDielectric, multiScatteringMetallic, material.metalness );
	vec3 totalScatteringDielectric = singleScatteringDielectric + multiScatteringDielectric;
	vec3 diffuse = material.diffuseContribution * ( 1.0 - totalScatteringDielectric );
	vec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;
	vec3 indirectSpecular = radiance * singleScattering;
	indirectSpecular += multiScattering * cosineWeightedIrradiance;
	vec3 indirectDiffuse = diffuse * cosineWeightedIrradiance;
	#ifdef USE_SHEEN
		float sheenAlbedo = IBLSheenBRDF( geometryNormal, geometryViewDir, material.sheenRoughness );
		float sheenEnergyComp = 1.0 - max3( material.sheenColor ) * sheenAlbedo;
		indirectSpecular *= sheenEnergyComp;
		indirectDiffuse *= sheenEnergyComp;
	#endif
	reflectedLight.indirectSpecular += indirectSpecular;
	reflectedLight.indirectDiffuse += indirectDiffuse;
}
#define RE_Direct				RE_Direct_Physical
#define RE_Direct_RectArea		RE_Direct_RectArea_Physical
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Physical
#define RE_IndirectSpecular		RE_IndirectSpecular_Physical
float computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {
	return saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );
}`,H2=`
vec3 geometryPosition = - vViewPosition;
vec3 geometryNormal = normal;
vec3 geometryViewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );
vec3 geometryClearcoatNormal = vec3( 0.0 );
#ifdef USE_CLEARCOAT
	geometryClearcoatNormal = clearcoatNormal;
#endif
#ifdef USE_IRIDESCENCE
	float dotNVi = saturate( dot( normal, geometryViewDir ) );
	if ( material.iridescenceThickness == 0.0 ) {
		material.iridescence = 0.0;
	} else {
		material.iridescence = saturate( material.iridescence );
	}
	if ( material.iridescence > 0.0 ) {
		material.iridescenceFresnelDielectric = evalIridescence( 1.0, material.iridescenceIOR, dotNVi, material.iridescenceThickness, material.specularColor );
		material.iridescenceFresnelMetallic = evalIridescence( 1.0, material.iridescenceIOR, dotNVi, material.iridescenceThickness, material.diffuseColor );
		material.iridescenceFresnel = mix( material.iridescenceFresnelDielectric, material.iridescenceFresnelMetallic, material.metalness );
		material.iridescenceF0 = Schlick_to_F0( material.iridescenceFresnel, 1.0, dotNVi );
	}
#endif
IncidentLight directLight;
#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )
	PointLight pointLight;
	#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {
		pointLight = pointLights[ i ];
		getPointLightInfo( pointLight, geometryPosition, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS ) && ( defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_BASIC ) )
		pointLightShadow = pointLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowIntensity, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )
	SpotLight spotLight;
	vec4 spotColor;
	vec3 spotLightCoord;
	bool inSpotLightMap;
	#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {
		spotLight = spotLights[ i ];
		getSpotLightInfo( spotLight, geometryPosition, directLight );
		#if ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#define SPOT_LIGHT_MAP_INDEX UNROLLED_LOOP_INDEX
		#elif ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		#define SPOT_LIGHT_MAP_INDEX NUM_SPOT_LIGHT_MAPS
		#else
		#define SPOT_LIGHT_MAP_INDEX ( UNROLLED_LOOP_INDEX - NUM_SPOT_LIGHT_SHADOWS + NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#endif
		#if ( SPOT_LIGHT_MAP_INDEX < NUM_SPOT_LIGHT_MAPS )
			spotLightCoord = vSpotLightCoord[ i ].xyz / vSpotLightCoord[ i ].w;
			inSpotLightMap = all( lessThan( abs( spotLightCoord * 2. - 1. ), vec3( 1.0 ) ) );
			spotColor = texture2D( spotLightMap[ SPOT_LIGHT_MAP_INDEX ], spotLightCoord.xy );
			directLight.color = inSpotLightMap ? directLight.color * spotColor.rgb : directLight.color;
		#endif
		#undef SPOT_LIGHT_MAP_INDEX
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		spotLightShadow = spotLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowIntensity, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )
	DirectionalLight directionalLight;
	#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {
		directionalLight = directionalLights[ i ];
		getDirectionalLightInfo( directionalLight, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )
		directionalLightShadow = directionalLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowIntensity, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )
	RectAreaLight rectAreaLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {
		rectAreaLight = rectAreaLights[ i ];
		RE_Direct_RectArea( rectAreaLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if defined( RE_IndirectDiffuse )
	vec3 iblIrradiance = vec3( 0.0 );
	vec3 irradiance = getAmbientLightIrradiance( ambientLightColor );
	#if defined( USE_LIGHT_PROBES )
		irradiance += getLightProbeIrradiance( lightProbe, geometryNormal );
	#endif
	#if ( NUM_HEMI_LIGHTS > 0 )
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {
			irradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometryNormal );
		}
		#pragma unroll_loop_end
	#endif
#endif
#if defined( RE_IndirectSpecular )
	vec3 radiance = vec3( 0.0 );
	vec3 clearcoatRadiance = vec3( 0.0 );
#endif`,V2=`#if defined( RE_IndirectDiffuse )
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		vec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;
		irradiance += lightMapIrradiance;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )
		iblIrradiance += getIBLIrradiance( geometryNormal );
	#endif
#endif
#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )
	#ifdef USE_ANISOTROPY
		radiance += getIBLAnisotropyRadiance( geometryViewDir, geometryNormal, material.roughness, material.anisotropyB, material.anisotropy );
	#else
		radiance += getIBLRadiance( geometryViewDir, geometryNormal, material.roughness );
	#endif
	#ifdef USE_CLEARCOAT
		clearcoatRadiance += getIBLRadiance( geometryViewDir, geometryClearcoatNormal, material.clearcoatRoughness );
	#endif
#endif`,j2=`#if defined( RE_IndirectDiffuse )
	RE_IndirectDiffuse( irradiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
#endif
#if defined( RE_IndirectSpecular )
	RE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
#endif`,G2=`#if defined( USE_LOGARITHMIC_DEPTH_BUFFER )
	gl_FragDepth = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;
#endif`,q2=`#if defined( USE_LOGARITHMIC_DEPTH_BUFFER )
	uniform float logDepthBufFC;
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,X2=`#ifdef USE_LOGARITHMIC_DEPTH_BUFFER
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,W2=`#ifdef USE_LOGARITHMIC_DEPTH_BUFFER
	vFragDepth = 1.0 + gl_Position.w;
	vIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );
#endif`,Y2=`#ifdef USE_MAP
	vec4 sampledDiffuseColor = texture2D( map, vMapUv );
	#ifdef DECODE_VIDEO_TEXTURE
		sampledDiffuseColor = sRGBTransferEOTF( sampledDiffuseColor );
	#endif
	diffuseColor *= sampledDiffuseColor;
#endif`,Z2=`#ifdef USE_MAP
	uniform sampler2D map;
#endif`,K2=`#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
	#if defined( USE_POINTS_UV )
		vec2 uv = vUv;
	#else
		vec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;
	#endif
#endif
#ifdef USE_MAP
	diffuseColor *= texture2D( map, uv );
#endif
#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, uv ).g;
#endif`,J2=`#if defined( USE_POINTS_UV )
	varying vec2 vUv;
#else
	#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
		uniform mat3 uvTransform;
	#endif
#endif
#ifdef USE_MAP
	uniform sampler2D map;
#endif
#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,Q2=`float metalnessFactor = metalness;
#ifdef USE_METALNESSMAP
	vec4 texelMetalness = texture2D( metalnessMap, vMetalnessMapUv );
	metalnessFactor *= texelMetalness.b;
#endif`,$2=`#ifdef USE_METALNESSMAP
	uniform sampler2D metalnessMap;
#endif`,e6=`#ifdef USE_INSTANCING_MORPH
	float morphTargetInfluences[ MORPHTARGETS_COUNT ];
	float morphTargetBaseInfluence = texelFetch( morphTexture, ivec2( 0, gl_InstanceID ), 0 ).r;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		morphTargetInfluences[i] =  texelFetch( morphTexture, ivec2( i + 1, gl_InstanceID ), 0 ).r;
	}
#endif`,t6=`#if defined( USE_MORPHCOLORS )
	vColor *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		#if defined( USE_COLOR_ALPHA )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ) * morphTargetInfluences[ i ];
		#elif defined( USE_COLOR )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ).rgb * morphTargetInfluences[ i ];
		#endif
	}
#endif`,n6=`#ifdef USE_MORPHNORMALS
	objectNormal *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		if ( morphTargetInfluences[ i ] != 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1 ).xyz * morphTargetInfluences[ i ];
	}
#endif`,i6=`#ifdef USE_MORPHTARGETS
	#ifndef USE_INSTANCING_MORPH
		uniform float morphTargetBaseInfluence;
		uniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];
	#endif
	uniform sampler2DArray morphTargetsTexture;
	uniform ivec2 morphTargetsTextureSize;
	vec4 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset ) {
		int texelIndex = vertexIndex * MORPHTARGETS_TEXTURE_STRIDE + offset;
		int y = texelIndex / morphTargetsTextureSize.x;
		int x = texelIndex - y * morphTargetsTextureSize.x;
		ivec3 morphUV = ivec3( x, y, morphTargetIndex );
		return texelFetch( morphTargetsTexture, morphUV, 0 );
	}
#endif`,a6=`#ifdef USE_MORPHTARGETS
	transformed *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		if ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0 ).xyz * morphTargetInfluences[ i ];
	}
#endif`,r6=`float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;
#ifdef FLAT_SHADED
	vec3 fdx = dFdx( vViewPosition );
	vec3 fdy = dFdy( vViewPosition );
	vec3 normal = normalize( cross( fdx, fdy ) );
#else
	vec3 normal = normalize( vNormal );
	#ifdef DOUBLE_SIDED
		normal *= faceDirection;
	#endif
#endif
#if defined( USE_NORMALMAP_TANGENTSPACE ) || defined( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY )
	#ifdef USE_TANGENT
		mat3 tbn = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn = getTangentFrame( - vViewPosition, normal,
		#if defined( USE_NORMALMAP )
			vNormalMapUv
		#elif defined( USE_CLEARCOAT_NORMALMAP )
			vClearcoatNormalMapUv
		#else
			vUv
		#endif
		);
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn[0] *= faceDirection;
		tbn[1] *= faceDirection;
	#endif
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	#ifdef USE_TANGENT
		mat3 tbn2 = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn2 = getTangentFrame( - vViewPosition, normal, vClearcoatNormalMapUv );
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn2[0] *= faceDirection;
		tbn2[1] *= faceDirection;
	#endif
#endif
vec3 nonPerturbedNormal = normal;`,s6=`#ifdef USE_NORMALMAP_OBJECTSPACE
	normal = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	#ifdef FLIP_SIDED
		normal = - normal;
	#endif
	#ifdef DOUBLE_SIDED
		normal = normal * faceDirection;
	#endif
	normal = normalize( normalMatrix * normal );
#elif defined( USE_NORMALMAP_TANGENTSPACE )
	vec3 mapN = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	mapN.xy *= normalScale;
	normal = normalize( tbn * mapN );
#elif defined( USE_BUMPMAP )
	normal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );
#endif`,o6=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,l6=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,c6=`#ifndef FLAT_SHADED
	vNormal = normalize( transformedNormal );
	#ifdef USE_TANGENT
		vTangent = normalize( transformedTangent );
		vBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );
	#endif
#endif`,u6=`#ifdef USE_NORMALMAP
	uniform sampler2D normalMap;
	uniform vec2 normalScale;
#endif
#ifdef USE_NORMALMAP_OBJECTSPACE
	uniform mat3 normalMatrix;
#endif
#if ! defined ( USE_TANGENT ) && ( defined ( USE_NORMALMAP_TANGENTSPACE ) || defined ( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY ) )
	mat3 getTangentFrame( vec3 eye_pos, vec3 surf_norm, vec2 uv ) {
		vec3 q0 = dFdx( eye_pos.xyz );
		vec3 q1 = dFdy( eye_pos.xyz );
		vec2 st0 = dFdx( uv.st );
		vec2 st1 = dFdy( uv.st );
		vec3 N = surf_norm;
		vec3 q1perp = cross( q1, N );
		vec3 q0perp = cross( N, q0 );
		vec3 T = q1perp * st0.x + q0perp * st1.x;
		vec3 B = q1perp * st0.y + q0perp * st1.y;
		float det = max( dot( T, T ), dot( B, B ) );
		float scale = ( det == 0.0 ) ? 0.0 : inversesqrt( det );
		return mat3( T * scale, B * scale, N );
	}
#endif`,h6=`#ifdef USE_CLEARCOAT
	vec3 clearcoatNormal = nonPerturbedNormal;
#endif`,f6=`#ifdef USE_CLEARCOAT_NORMALMAP
	vec3 clearcoatMapN = texture2D( clearcoatNormalMap, vClearcoatNormalMapUv ).xyz * 2.0 - 1.0;
	clearcoatMapN.xy *= clearcoatNormalScale;
	clearcoatNormal = normalize( tbn2 * clearcoatMapN );
#endif`,d6=`#ifdef USE_CLEARCOATMAP
	uniform sampler2D clearcoatMap;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform sampler2D clearcoatNormalMap;
	uniform vec2 clearcoatNormalScale;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform sampler2D clearcoatRoughnessMap;
#endif`,p6=`#ifdef USE_IRIDESCENCEMAP
	uniform sampler2D iridescenceMap;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform sampler2D iridescenceThicknessMap;
#endif`,m6=`#ifdef OPAQUE
diffuseColor.a = 1.0;
#endif
#ifdef USE_TRANSMISSION
diffuseColor.a *= material.transmissionAlpha;
#endif
gl_FragColor = vec4( outgoingLight, diffuseColor.a );`,g6=`vec3 packNormalToRGB( const in vec3 normal ) {
	return normalize( normal ) * 0.5 + 0.5;
}
vec3 unpackRGBToNormal( const in vec3 rgb ) {
	return 2.0 * rgb.xyz - 1.0;
}
const float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;const float ShiftRight8 = 1. / 256.;
const float Inv255 = 1. / 255.;
const vec4 PackFactors = vec4( 1.0, 256.0, 256.0 * 256.0, 256.0 * 256.0 * 256.0 );
const vec2 UnpackFactors2 = vec2( UnpackDownscale, 1.0 / PackFactors.g );
const vec3 UnpackFactors3 = vec3( UnpackDownscale / PackFactors.rg, 1.0 / PackFactors.b );
const vec4 UnpackFactors4 = vec4( UnpackDownscale / PackFactors.rgb, 1.0 / PackFactors.a );
vec4 packDepthToRGBA( const in float v ) {
	if( v <= 0.0 )
		return vec4( 0., 0., 0., 0. );
	if( v >= 1.0 )
		return vec4( 1., 1., 1., 1. );
	float vuf;
	float af = modf( v * PackFactors.a, vuf );
	float bf = modf( vuf * ShiftRight8, vuf );
	float gf = modf( vuf * ShiftRight8, vuf );
	return vec4( vuf * Inv255, gf * PackUpscale, bf * PackUpscale, af );
}
vec3 packDepthToRGB( const in float v ) {
	if( v <= 0.0 )
		return vec3( 0., 0., 0. );
	if( v >= 1.0 )
		return vec3( 1., 1., 1. );
	float vuf;
	float bf = modf( v * PackFactors.b, vuf );
	float gf = modf( vuf * ShiftRight8, vuf );
	return vec3( vuf * Inv255, gf * PackUpscale, bf );
}
vec2 packDepthToRG( const in float v ) {
	if( v <= 0.0 )
		return vec2( 0., 0. );
	if( v >= 1.0 )
		return vec2( 1., 1. );
	float vuf;
	float gf = modf( v * 256., vuf );
	return vec2( vuf * Inv255, gf );
}
float unpackRGBAToDepth( const in vec4 v ) {
	return dot( v, UnpackFactors4 );
}
float unpackRGBToDepth( const in vec3 v ) {
	return dot( v, UnpackFactors3 );
}
float unpackRGToDepth( const in vec2 v ) {
	return v.r * UnpackFactors2.r + v.g * UnpackFactors2.g;
}
vec4 pack2HalfToRGBA( const in vec2 v ) {
	vec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );
	return vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );
}
vec2 unpackRGBATo2Half( const in vec4 v ) {
	return vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );
}
float viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {
	return ( viewZ + near ) / ( near - far );
}
float orthographicDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return depth * ( near - far ) - near;
}
float viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {
	return ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );
}
float perspectiveDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return ( near * far ) / ( ( far - near ) * depth - far );
}`,v6=`#ifdef PREMULTIPLIED_ALPHA
	gl_FragColor.rgb *= gl_FragColor.a;
#endif`,y6=`vec4 mvPosition = vec4( transformed, 1.0 );
#ifdef USE_BATCHING
	mvPosition = batchingMatrix * mvPosition;
#endif
#ifdef USE_INSTANCING
	mvPosition = instanceMatrix * mvPosition;
#endif
mvPosition = modelViewMatrix * mvPosition;
gl_Position = projectionMatrix * mvPosition;`,_6=`#ifdef DITHERING
	gl_FragColor.rgb = dithering( gl_FragColor.rgb );
#endif`,b6=`#ifdef DITHERING
	vec3 dithering( vec3 color ) {
		float grid_position = rand( gl_FragCoord.xy );
		vec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );
		dither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );
		return color + dither_shift_RGB;
	}
#endif`,x6=`float roughnessFactor = roughness;
#ifdef USE_ROUGHNESSMAP
	vec4 texelRoughness = texture2D( roughnessMap, vRoughnessMapUv );
	roughnessFactor *= texelRoughness.g;
#endif`,S6=`#ifdef USE_ROUGHNESSMAP
	uniform sampler2D roughnessMap;
#endif`,E6=`#if NUM_SPOT_LIGHT_COORDS > 0
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#if NUM_SPOT_LIGHT_MAPS > 0
	uniform sampler2D spotLightMap[ NUM_SPOT_LIGHT_MAPS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		#if defined( SHADOWMAP_TYPE_PCF )
			uniform sampler2DShadow directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];
		#else
			uniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];
		#endif
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		#if defined( SHADOWMAP_TYPE_PCF )
			uniform sampler2DShadow spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];
		#else
			uniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];
		#endif
		struct SpotLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		#if defined( SHADOWMAP_TYPE_PCF )
			uniform samplerCubeShadow pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];
		#elif defined( SHADOWMAP_TYPE_BASIC )
			uniform samplerCube pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];
		#endif
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
	#if defined( SHADOWMAP_TYPE_PCF )
		float interleavedGradientNoise( vec2 position ) {
			return fract( 52.9829189 * fract( dot( position, vec2( 0.06711056, 0.00583715 ) ) ) );
		}
		vec2 vogelDiskSample( int sampleIndex, int samplesCount, float phi ) {
			const float goldenAngle = 2.399963229728653;
			float r = sqrt( ( float( sampleIndex ) + 0.5 ) / float( samplesCount ) );
			float theta = float( sampleIndex ) * goldenAngle + phi;
			return vec2( cos( theta ), sin( theta ) ) * r;
		}
	#endif
	#if defined( SHADOWMAP_TYPE_PCF )
		float getShadow( sampler2DShadow shadowMap, vec2 shadowMapSize, float shadowIntensity, float shadowBias, float shadowRadius, vec4 shadowCoord ) {
			float shadow = 1.0;
			shadowCoord.xyz /= shadowCoord.w;
			shadowCoord.z += shadowBias;
			bool inFrustum = shadowCoord.x >= 0.0 && shadowCoord.x <= 1.0 && shadowCoord.y >= 0.0 && shadowCoord.y <= 1.0;
			bool frustumTest = inFrustum && shadowCoord.z <= 1.0;
			if ( frustumTest ) {
				vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
				float radius = shadowRadius * texelSize.x;
				float phi = interleavedGradientNoise( gl_FragCoord.xy ) * 6.28318530718;
				shadow = (
					texture( shadowMap, vec3( shadowCoord.xy + vogelDiskSample( 0, 5, phi ) * radius, shadowCoord.z ) ) +
					texture( shadowMap, vec3( shadowCoord.xy + vogelDiskSample( 1, 5, phi ) * radius, shadowCoord.z ) ) +
					texture( shadowMap, vec3( shadowCoord.xy + vogelDiskSample( 2, 5, phi ) * radius, shadowCoord.z ) ) +
					texture( shadowMap, vec3( shadowCoord.xy + vogelDiskSample( 3, 5, phi ) * radius, shadowCoord.z ) ) +
					texture( shadowMap, vec3( shadowCoord.xy + vogelDiskSample( 4, 5, phi ) * radius, shadowCoord.z ) )
				) * 0.2;
			}
			return mix( 1.0, shadow, shadowIntensity );
		}
	#elif defined( SHADOWMAP_TYPE_VSM )
		float getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowIntensity, float shadowBias, float shadowRadius, vec4 shadowCoord ) {
			float shadow = 1.0;
			shadowCoord.xyz /= shadowCoord.w;
			shadowCoord.z += shadowBias;
			bool inFrustum = shadowCoord.x >= 0.0 && shadowCoord.x <= 1.0 && shadowCoord.y >= 0.0 && shadowCoord.y <= 1.0;
			bool frustumTest = inFrustum && shadowCoord.z <= 1.0;
			if ( frustumTest ) {
				vec2 distribution = texture2D( shadowMap, shadowCoord.xy ).rg;
				float mean = distribution.x;
				float variance = distribution.y * distribution.y;
				#ifdef USE_REVERSED_DEPTH_BUFFER
					float hard_shadow = step( mean, shadowCoord.z );
				#else
					float hard_shadow = step( shadowCoord.z, mean );
				#endif
				if ( hard_shadow == 1.0 ) {
					shadow = 1.0;
				} else {
					variance = max( variance, 0.0000001 );
					float d = shadowCoord.z - mean;
					float p_max = variance / ( variance + d * d );
					p_max = clamp( ( p_max - 0.3 ) / 0.65, 0.0, 1.0 );
					shadow = max( hard_shadow, p_max );
				}
			}
			return mix( 1.0, shadow, shadowIntensity );
		}
	#else
		float getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowIntensity, float shadowBias, float shadowRadius, vec4 shadowCoord ) {
			float shadow = 1.0;
			shadowCoord.xyz /= shadowCoord.w;
			shadowCoord.z += shadowBias;
			bool inFrustum = shadowCoord.x >= 0.0 && shadowCoord.x <= 1.0 && shadowCoord.y >= 0.0 && shadowCoord.y <= 1.0;
			bool frustumTest = inFrustum && shadowCoord.z <= 1.0;
			if ( frustumTest ) {
				float depth = texture2D( shadowMap, shadowCoord.xy ).r;
				#ifdef USE_REVERSED_DEPTH_BUFFER
					shadow = step( depth, shadowCoord.z );
				#else
					shadow = step( shadowCoord.z, depth );
				#endif
			}
			return mix( 1.0, shadow, shadowIntensity );
		}
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
	#if defined( SHADOWMAP_TYPE_PCF )
	float getPointShadow( samplerCubeShadow shadowMap, vec2 shadowMapSize, float shadowIntensity, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {
		float shadow = 1.0;
		vec3 lightToPosition = shadowCoord.xyz;
		vec3 bd3D = normalize( lightToPosition );
		vec3 absVec = abs( lightToPosition );
		float viewSpaceZ = max( max( absVec.x, absVec.y ), absVec.z );
		if ( viewSpaceZ - shadowCameraFar <= 0.0 && viewSpaceZ - shadowCameraNear >= 0.0 ) {
			float dp = ( shadowCameraFar * ( viewSpaceZ - shadowCameraNear ) ) / ( viewSpaceZ * ( shadowCameraFar - shadowCameraNear ) );
			dp += shadowBias;
			float texelSize = shadowRadius / shadowMapSize.x;
			vec3 absDir = abs( bd3D );
			vec3 tangent = absDir.x > absDir.z ? vec3( 0.0, 1.0, 0.0 ) : vec3( 1.0, 0.0, 0.0 );
			tangent = normalize( cross( bd3D, tangent ) );
			vec3 bitangent = cross( bd3D, tangent );
			float phi = interleavedGradientNoise( gl_FragCoord.xy ) * 6.28318530718;
			shadow = (
				texture( shadowMap, vec4( bd3D + ( tangent * vogelDiskSample( 0, 5, phi ).x + bitangent * vogelDiskSample( 0, 5, phi ).y ) * texelSize, dp ) ) +
				texture( shadowMap, vec4( bd3D + ( tangent * vogelDiskSample( 1, 5, phi ).x + bitangent * vogelDiskSample( 1, 5, phi ).y ) * texelSize, dp ) ) +
				texture( shadowMap, vec4( bd3D + ( tangent * vogelDiskSample( 2, 5, phi ).x + bitangent * vogelDiskSample( 2, 5, phi ).y ) * texelSize, dp ) ) +
				texture( shadowMap, vec4( bd3D + ( tangent * vogelDiskSample( 3, 5, phi ).x + bitangent * vogelDiskSample( 3, 5, phi ).y ) * texelSize, dp ) ) +
				texture( shadowMap, vec4( bd3D + ( tangent * vogelDiskSample( 4, 5, phi ).x + bitangent * vogelDiskSample( 4, 5, phi ).y ) * texelSize, dp ) )
			) * 0.2;
		}
		return mix( 1.0, shadow, shadowIntensity );
	}
	#elif defined( SHADOWMAP_TYPE_BASIC )
	float getPointShadow( samplerCube shadowMap, vec2 shadowMapSize, float shadowIntensity, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {
		float shadow = 1.0;
		vec3 lightToPosition = shadowCoord.xyz;
		vec3 bd3D = normalize( lightToPosition );
		vec3 absVec = abs( lightToPosition );
		float viewSpaceZ = max( max( absVec.x, absVec.y ), absVec.z );
		if ( viewSpaceZ - shadowCameraFar <= 0.0 && viewSpaceZ - shadowCameraNear >= 0.0 ) {
			float dp = ( shadowCameraFar * ( viewSpaceZ - shadowCameraNear ) ) / ( viewSpaceZ * ( shadowCameraFar - shadowCameraNear ) );
			dp += shadowBias;
			float depth = textureCube( shadowMap, bd3D ).r;
			#ifdef USE_REVERSED_DEPTH_BUFFER
				shadow = step( depth, dp );
			#else
				shadow = step( dp, depth );
			#endif
		}
		return mix( 1.0, shadow, shadowIntensity );
	}
	#endif
	#endif
#endif`,M6=`#if NUM_SPOT_LIGHT_COORDS > 0
	uniform mat4 spotLightMatrix[ NUM_SPOT_LIGHT_COORDS ];
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		struct SpotLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
#endif`,w6=`#if ( defined( USE_SHADOWMAP ) && ( NUM_DIR_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0 ) ) || ( NUM_SPOT_LIGHT_COORDS > 0 )
	vec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
	vec4 shadowWorldPosition;
#endif
#if defined( USE_SHADOWMAP )
	#if NUM_DIR_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );
			vDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );
			vPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
#endif
#if NUM_SPOT_LIGHT_COORDS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_COORDS; i ++ ) {
		shadowWorldPosition = worldPosition;
		#if ( defined( USE_SHADOWMAP ) && UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
			shadowWorldPosition.xyz += shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias;
		#endif
		vSpotLightCoord[ i ] = spotLightMatrix[ i ] * shadowWorldPosition;
	}
	#pragma unroll_loop_end
#endif`,T6=`float getShadowMask() {
	float shadow = 1.0;
	#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
		directionalLight = directionalLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowIntensity, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {
		spotLight = spotLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowIntensity, spotLight.shadowBias, spotLight.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0 && ( defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_BASIC ) )
	PointLightShadow pointLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
		pointLight = pointLightShadows[ i ];
		shadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowIntensity, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#endif
	return shadow;
}`,A6=`#ifdef USE_SKINNING
	mat4 boneMatX = getBoneMatrix( skinIndex.x );
	mat4 boneMatY = getBoneMatrix( skinIndex.y );
	mat4 boneMatZ = getBoneMatrix( skinIndex.z );
	mat4 boneMatW = getBoneMatrix( skinIndex.w );
#endif`,C6=`#ifdef USE_SKINNING
	uniform mat4 bindMatrix;
	uniform mat4 bindMatrixInverse;
	uniform highp sampler2D boneTexture;
	mat4 getBoneMatrix( const in float i ) {
		int size = textureSize( boneTexture, 0 ).x;
		int j = int( i ) * 4;
		int x = j % size;
		int y = j / size;
		vec4 v1 = texelFetch( boneTexture, ivec2( x, y ), 0 );
		vec4 v2 = texelFetch( boneTexture, ivec2( x + 1, y ), 0 );
		vec4 v3 = texelFetch( boneTexture, ivec2( x + 2, y ), 0 );
		vec4 v4 = texelFetch( boneTexture, ivec2( x + 3, y ), 0 );
		return mat4( v1, v2, v3, v4 );
	}
#endif`,R6=`#ifdef USE_SKINNING
	vec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );
	vec4 skinned = vec4( 0.0 );
	skinned += boneMatX * skinVertex * skinWeight.x;
	skinned += boneMatY * skinVertex * skinWeight.y;
	skinned += boneMatZ * skinVertex * skinWeight.z;
	skinned += boneMatW * skinVertex * skinWeight.w;
	transformed = ( bindMatrixInverse * skinned ).xyz;
#endif`,N6=`#ifdef USE_SKINNING
	mat4 skinMatrix = mat4( 0.0 );
	skinMatrix += skinWeight.x * boneMatX;
	skinMatrix += skinWeight.y * boneMatY;
	skinMatrix += skinWeight.z * boneMatZ;
	skinMatrix += skinWeight.w * boneMatW;
	skinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;
	objectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;
	#ifdef USE_TANGENT
		objectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#endif
#endif`,O6=`float specularStrength;
#ifdef USE_SPECULARMAP
	vec4 texelSpecular = texture2D( specularMap, vSpecularMapUv );
	specularStrength = texelSpecular.r;
#else
	specularStrength = 1.0;
#endif`,D6=`#ifdef USE_SPECULARMAP
	uniform sampler2D specularMap;
#endif`,U6=`#if defined( TONE_MAPPING )
	gl_FragColor.rgb = toneMapping( gl_FragColor.rgb );
#endif`,L6=`#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
uniform float toneMappingExposure;
vec3 LinearToneMapping( vec3 color ) {
	return saturate( toneMappingExposure * color );
}
vec3 ReinhardToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	return saturate( color / ( vec3( 1.0 ) + color ) );
}
vec3 CineonToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	color = max( vec3( 0.0 ), color - 0.004 );
	return pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );
}
vec3 RRTAndODTFit( vec3 v ) {
	vec3 a = v * ( v + 0.0245786 ) - 0.000090537;
	vec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;
	return a / b;
}
vec3 ACESFilmicToneMapping( vec3 color ) {
	const mat3 ACESInputMat = mat3(
		vec3( 0.59719, 0.07600, 0.02840 ),		vec3( 0.35458, 0.90834, 0.13383 ),
		vec3( 0.04823, 0.01566, 0.83777 )
	);
	const mat3 ACESOutputMat = mat3(
		vec3(  1.60475, -0.10208, -0.00327 ),		vec3( -0.53108,  1.10813, -0.07276 ),
		vec3( -0.07367, -0.00605,  1.07602 )
	);
	color *= toneMappingExposure / 0.6;
	color = ACESInputMat * color;
	color = RRTAndODTFit( color );
	color = ACESOutputMat * color;
	return saturate( color );
}
const mat3 LINEAR_REC2020_TO_LINEAR_SRGB = mat3(
	vec3( 1.6605, - 0.1246, - 0.0182 ),
	vec3( - 0.5876, 1.1329, - 0.1006 ),
	vec3( - 0.0728, - 0.0083, 1.1187 )
);
const mat3 LINEAR_SRGB_TO_LINEAR_REC2020 = mat3(
	vec3( 0.6274, 0.0691, 0.0164 ),
	vec3( 0.3293, 0.9195, 0.0880 ),
	vec3( 0.0433, 0.0113, 0.8956 )
);
vec3 agxDefaultContrastApprox( vec3 x ) {
	vec3 x2 = x * x;
	vec3 x4 = x2 * x2;
	return + 15.5 * x4 * x2
		- 40.14 * x4 * x
		+ 31.96 * x4
		- 6.868 * x2 * x
		+ 0.4298 * x2
		+ 0.1191 * x
		- 0.00232;
}
vec3 AgXToneMapping( vec3 color ) {
	const mat3 AgXInsetMatrix = mat3(
		vec3( 0.856627153315983, 0.137318972929847, 0.11189821299995 ),
		vec3( 0.0951212405381588, 0.761241990602591, 0.0767994186031903 ),
		vec3( 0.0482516061458583, 0.101439036467562, 0.811302368396859 )
	);
	const mat3 AgXOutsetMatrix = mat3(
		vec3( 1.1271005818144368, - 0.1413297634984383, - 0.14132976349843826 ),
		vec3( - 0.11060664309660323, 1.157823702216272, - 0.11060664309660294 ),
		vec3( - 0.016493938717834573, - 0.016493938717834257, 1.2519364065950405 )
	);
	const float AgxMinEv = - 12.47393;	const float AgxMaxEv = 4.026069;
	color *= toneMappingExposure;
	color = LINEAR_SRGB_TO_LINEAR_REC2020 * color;
	color = AgXInsetMatrix * color;
	color = max( color, 1e-10 );	color = log2( color );
	color = ( color - AgxMinEv ) / ( AgxMaxEv - AgxMinEv );
	color = clamp( color, 0.0, 1.0 );
	color = agxDefaultContrastApprox( color );
	color = AgXOutsetMatrix * color;
	color = pow( max( vec3( 0.0 ), color ), vec3( 2.2 ) );
	color = LINEAR_REC2020_TO_LINEAR_SRGB * color;
	color = clamp( color, 0.0, 1.0 );
	return color;
}
vec3 NeutralToneMapping( vec3 color ) {
	const float StartCompression = 0.8 - 0.04;
	const float Desaturation = 0.15;
	color *= toneMappingExposure;
	float x = min( color.r, min( color.g, color.b ) );
	float offset = x < 0.08 ? x - 6.25 * x * x : 0.04;
	color -= offset;
	float peak = max( color.r, max( color.g, color.b ) );
	if ( peak < StartCompression ) return color;
	float d = 1. - StartCompression;
	float newPeak = 1. - d * d / ( peak + d - StartCompression );
	color *= newPeak / peak;
	float g = 1. - 1. / ( Desaturation * ( peak - newPeak ) + 1. );
	return mix( color, vec3( newPeak ), g );
}
vec3 CustomToneMapping( vec3 color ) { return color; }`,I6=`#ifdef USE_TRANSMISSION
	material.transmission = transmission;
	material.transmissionAlpha = 1.0;
	material.thickness = thickness;
	material.attenuationDistance = attenuationDistance;
	material.attenuationColor = attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		material.transmission *= texture2D( transmissionMap, vTransmissionMapUv ).r;
	#endif
	#ifdef USE_THICKNESSMAP
		material.thickness *= texture2D( thicknessMap, vThicknessMapUv ).g;
	#endif
	vec3 pos = vWorldPosition;
	vec3 v = normalize( cameraPosition - pos );
	vec3 n = inverseTransformDirection( normal, viewMatrix );
	vec4 transmitted = getIBLVolumeRefraction(
		n, v, material.roughness, material.diffuseContribution, material.specularColorBlended, material.specularF90,
		pos, modelMatrix, viewMatrix, projectionMatrix, material.dispersion, material.ior, material.thickness,
		material.attenuationColor, material.attenuationDistance );
	material.transmissionAlpha = mix( material.transmissionAlpha, transmitted.a, material.transmission );
	totalDiffuse = mix( totalDiffuse, transmitted.rgb, material.transmission );
#endif`,P6=`#ifdef USE_TRANSMISSION
	uniform float transmission;
	uniform float thickness;
	uniform float attenuationDistance;
	uniform vec3 attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		uniform sampler2D transmissionMap;
	#endif
	#ifdef USE_THICKNESSMAP
		uniform sampler2D thicknessMap;
	#endif
	uniform vec2 transmissionSamplerSize;
	uniform sampler2D transmissionSamplerMap;
	uniform mat4 modelMatrix;
	uniform mat4 projectionMatrix;
	varying vec3 vWorldPosition;
	float w0( float a ) {
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - a + 3.0 ) - 3.0 ) + 1.0 );
	}
	float w1( float a ) {
		return ( 1.0 / 6.0 ) * ( a *  a * ( 3.0 * a - 6.0 ) + 4.0 );
	}
	float w2( float a ){
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - 3.0 * a + 3.0 ) + 3.0 ) + 1.0 );
	}
	float w3( float a ) {
		return ( 1.0 / 6.0 ) * ( a * a * a );
	}
	float g0( float a ) {
		return w0( a ) + w1( a );
	}
	float g1( float a ) {
		return w2( a ) + w3( a );
	}
	float h0( float a ) {
		return - 1.0 + w1( a ) / ( w0( a ) + w1( a ) );
	}
	float h1( float a ) {
		return 1.0 + w3( a ) / ( w2( a ) + w3( a ) );
	}
	vec4 bicubic( sampler2D tex, vec2 uv, vec4 texelSize, float lod ) {
		uv = uv * texelSize.zw + 0.5;
		vec2 iuv = floor( uv );
		vec2 fuv = fract( uv );
		float g0x = g0( fuv.x );
		float g1x = g1( fuv.x );
		float h0x = h0( fuv.x );
		float h1x = h1( fuv.x );
		float h0y = h0( fuv.y );
		float h1y = h1( fuv.y );
		vec2 p0 = ( vec2( iuv.x + h0x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p1 = ( vec2( iuv.x + h1x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p2 = ( vec2( iuv.x + h0x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		vec2 p3 = ( vec2( iuv.x + h1x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		return g0( fuv.y ) * ( g0x * textureLod( tex, p0, lod ) + g1x * textureLod( tex, p1, lod ) ) +
			g1( fuv.y ) * ( g0x * textureLod( tex, p2, lod ) + g1x * textureLod( tex, p3, lod ) );
	}
	vec4 textureBicubic( sampler2D sampler, vec2 uv, float lod ) {
		vec2 fLodSize = vec2( textureSize( sampler, int( lod ) ) );
		vec2 cLodSize = vec2( textureSize( sampler, int( lod + 1.0 ) ) );
		vec2 fLodSizeInv = 1.0 / fLodSize;
		vec2 cLodSizeInv = 1.0 / cLodSize;
		vec4 fSample = bicubic( sampler, uv, vec4( fLodSizeInv, fLodSize ), floor( lod ) );
		vec4 cSample = bicubic( sampler, uv, vec4( cLodSizeInv, cLodSize ), ceil( lod ) );
		return mix( fSample, cSample, fract( lod ) );
	}
	vec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {
		vec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );
		vec3 modelScale;
		modelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );
		modelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );
		modelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );
		return normalize( refractionVector ) * thickness * modelScale;
	}
	float applyIorToRoughness( const in float roughness, const in float ior ) {
		return roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );
	}
	vec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {
		float lod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );
		return textureBicubic( transmissionSamplerMap, fragCoord.xy, lod );
	}
	vec3 volumeAttenuation( const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {
		if ( isinf( attenuationDistance ) ) {
			return vec3( 1.0 );
		} else {
			vec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;
			vec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );			return transmittance;
		}
	}
	vec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,
		const in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,
		const in mat4 viewMatrix, const in mat4 projMatrix, const in float dispersion, const in float ior, const in float thickness,
		const in vec3 attenuationColor, const in float attenuationDistance ) {
		vec4 transmittedLight;
		vec3 transmittance;
		#ifdef USE_DISPERSION
			float halfSpread = ( ior - 1.0 ) * 0.025 * dispersion;
			vec3 iors = vec3( ior - halfSpread, ior, ior + halfSpread );
			for ( int i = 0; i < 3; i ++ ) {
				vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, iors[ i ], modelMatrix );
				vec3 refractedRayExit = position + transmissionRay;
				vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
				vec2 refractionCoords = ndcPos.xy / ndcPos.w;
				refractionCoords += 1.0;
				refractionCoords /= 2.0;
				vec4 transmissionSample = getTransmissionSample( refractionCoords, roughness, iors[ i ] );
				transmittedLight[ i ] = transmissionSample[ i ];
				transmittedLight.a += transmissionSample.a;
				transmittance[ i ] = diffuseColor[ i ] * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance )[ i ];
			}
			transmittedLight.a /= 3.0;
		#else
			vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );
			vec3 refractedRayExit = position + transmissionRay;
			vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
			vec2 refractionCoords = ndcPos.xy / ndcPos.w;
			refractionCoords += 1.0;
			refractionCoords /= 2.0;
			transmittedLight = getTransmissionSample( refractionCoords, roughness, ior );
			transmittance = diffuseColor * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance );
		#endif
		vec3 attenuatedColor = transmittance * transmittedLight.rgb;
		vec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );
		float transmittanceFactor = ( transmittance.r + transmittance.g + transmittance.b ) / 3.0;
		return vec4( ( 1.0 - F ) * attenuatedColor, 1.0 - ( 1.0 - transmittedLight.a ) * transmittanceFactor );
	}
#endif`,z6=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_ANISOTROPYMAP
	varying vec2 vAnisotropyMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_SPECULARMAP
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,B6=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	uniform mat3 mapTransform;
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	uniform mat3 alphaMapTransform;
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	uniform mat3 lightMapTransform;
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	uniform mat3 aoMapTransform;
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	uniform mat3 bumpMapTransform;
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	uniform mat3 normalMapTransform;
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_DISPLACEMENTMAP
	uniform mat3 displacementMapTransform;
	varying vec2 vDisplacementMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	uniform mat3 emissiveMapTransform;
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	uniform mat3 metalnessMapTransform;
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	uniform mat3 roughnessMapTransform;
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_ANISOTROPYMAP
	uniform mat3 anisotropyMapTransform;
	varying vec2 vAnisotropyMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	uniform mat3 clearcoatMapTransform;
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform mat3 clearcoatNormalMapTransform;
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform mat3 clearcoatRoughnessMapTransform;
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	uniform mat3 sheenColorMapTransform;
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	uniform mat3 sheenRoughnessMapTransform;
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	uniform mat3 iridescenceMapTransform;
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform mat3 iridescenceThicknessMapTransform;
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SPECULARMAP
	uniform mat3 specularMapTransform;
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	uniform mat3 specularColorMapTransform;
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	uniform mat3 specularIntensityMapTransform;
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,F6=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	vUv = vec3( uv, 1 ).xy;
#endif
#ifdef USE_MAP
	vMapUv = ( mapTransform * vec3( MAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ALPHAMAP
	vAlphaMapUv = ( alphaMapTransform * vec3( ALPHAMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_LIGHTMAP
	vLightMapUv = ( lightMapTransform * vec3( LIGHTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_AOMAP
	vAoMapUv = ( aoMapTransform * vec3( AOMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_BUMPMAP
	vBumpMapUv = ( bumpMapTransform * vec3( BUMPMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_NORMALMAP
	vNormalMapUv = ( normalMapTransform * vec3( NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_DISPLACEMENTMAP
	vDisplacementMapUv = ( displacementMapTransform * vec3( DISPLACEMENTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_EMISSIVEMAP
	vEmissiveMapUv = ( emissiveMapTransform * vec3( EMISSIVEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_METALNESSMAP
	vMetalnessMapUv = ( metalnessMapTransform * vec3( METALNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ROUGHNESSMAP
	vRoughnessMapUv = ( roughnessMapTransform * vec3( ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ANISOTROPYMAP
	vAnisotropyMapUv = ( anisotropyMapTransform * vec3( ANISOTROPYMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOATMAP
	vClearcoatMapUv = ( clearcoatMapTransform * vec3( CLEARCOATMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	vClearcoatNormalMapUv = ( clearcoatNormalMapTransform * vec3( CLEARCOAT_NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	vClearcoatRoughnessMapUv = ( clearcoatRoughnessMapTransform * vec3( CLEARCOAT_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCEMAP
	vIridescenceMapUv = ( iridescenceMapTransform * vec3( IRIDESCENCEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	vIridescenceThicknessMapUv = ( iridescenceThicknessMapTransform * vec3( IRIDESCENCE_THICKNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_COLORMAP
	vSheenColorMapUv = ( sheenColorMapTransform * vec3( SHEEN_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	vSheenRoughnessMapUv = ( sheenRoughnessMapTransform * vec3( SHEEN_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULARMAP
	vSpecularMapUv = ( specularMapTransform * vec3( SPECULARMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_COLORMAP
	vSpecularColorMapUv = ( specularColorMapTransform * vec3( SPECULAR_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	vSpecularIntensityMapUv = ( specularIntensityMapTransform * vec3( SPECULAR_INTENSITYMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_TRANSMISSIONMAP
	vTransmissionMapUv = ( transmissionMapTransform * vec3( TRANSMISSIONMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_THICKNESSMAP
	vThicknessMapUv = ( thicknessMapTransform * vec3( THICKNESSMAP_UV, 1 ) ).xy;
#endif`,k6=`#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION ) || NUM_SPOT_LIGHT_COORDS > 0
	vec4 worldPosition = vec4( transformed, 1.0 );
	#ifdef USE_BATCHING
		worldPosition = batchingMatrix * worldPosition;
	#endif
	#ifdef USE_INSTANCING
		worldPosition = instanceMatrix * worldPosition;
	#endif
	worldPosition = modelMatrix * worldPosition;
#endif`;const H6=`varying vec2 vUv;
uniform mat3 uvTransform;
void main() {
	vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	gl_Position = vec4( position.xy, 1.0, 1.0 );
}`,V6=`uniform sampler2D t2D;
uniform float backgroundIntensity;
varying vec2 vUv;
void main() {
	vec4 texColor = texture2D( t2D, vUv );
	#ifdef DECODE_VIDEO_TEXTURE
		texColor = vec4( mix( pow( texColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), texColor.rgb * 0.0773993808, vec3( lessThanEqual( texColor.rgb, vec3( 0.04045 ) ) ) ), texColor.w );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,j6=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,G6=`#ifdef ENVMAP_TYPE_CUBE
	uniform samplerCube envMap;
#elif defined( ENVMAP_TYPE_CUBE_UV )
	uniform sampler2D envMap;
#endif
uniform float flipEnvMap;
uniform float backgroundBlurriness;
uniform float backgroundIntensity;
uniform mat3 backgroundRotation;
varying vec3 vWorldDirection;
#include <cube_uv_reflection_fragment>
void main() {
	#ifdef ENVMAP_TYPE_CUBE
		vec4 texColor = textureCube( envMap, backgroundRotation * vec3( flipEnvMap * vWorldDirection.x, vWorldDirection.yz ) );
	#elif defined( ENVMAP_TYPE_CUBE_UV )
		vec4 texColor = textureCubeUV( envMap, backgroundRotation * vWorldDirection, backgroundBlurriness );
	#else
		vec4 texColor = vec4( 0.0, 0.0, 0.0, 1.0 );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,q6=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,X6=`uniform samplerCube tCube;
uniform float tFlip;
uniform float opacity;
varying vec3 vWorldDirection;
void main() {
	vec4 texColor = textureCube( tCube, vec3( tFlip * vWorldDirection.x, vWorldDirection.yz ) );
	gl_FragColor = texColor;
	gl_FragColor.a *= opacity;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,W6=`#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
varying vec2 vHighPrecisionZW;
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <skinbase_vertex>
	#include <morphinstance_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vHighPrecisionZW = gl_Position.zw;
}`,Y6=`#if DEPTH_PACKING == 3200
	uniform float opacity;
#endif
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
varying vec2 vHighPrecisionZW;
void main() {
	vec4 diffuseColor = vec4( 1.0 );
	#include <clipping_planes_fragment>
	#if DEPTH_PACKING == 3200
		diffuseColor.a = opacity;
	#endif
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <logdepthbuf_fragment>
	#ifdef USE_REVERSED_DEPTH_BUFFER
		float fragCoordZ = vHighPrecisionZW[ 0 ] / vHighPrecisionZW[ 1 ];
	#else
		float fragCoordZ = 0.5 * vHighPrecisionZW[ 0 ] / vHighPrecisionZW[ 1 ] + 0.5;
	#endif
	#if DEPTH_PACKING == 3200
		gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );
	#elif DEPTH_PACKING == 3201
		gl_FragColor = packDepthToRGBA( fragCoordZ );
	#elif DEPTH_PACKING == 3202
		gl_FragColor = vec4( packDepthToRGB( fragCoordZ ), 1.0 );
	#elif DEPTH_PACKING == 3203
		gl_FragColor = vec4( packDepthToRG( fragCoordZ ), 0.0, 1.0 );
	#endif
}`,Z6=`#define DISTANCE
varying vec3 vWorldPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <skinbase_vertex>
	#include <morphinstance_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <worldpos_vertex>
	#include <clipping_planes_vertex>
	vWorldPosition = worldPosition.xyz;
}`,K6=`#define DISTANCE
uniform vec3 referencePosition;
uniform float nearDistance;
uniform float farDistance;
varying vec3 vWorldPosition;
#include <common>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <clipping_planes_pars_fragment>
void main () {
	vec4 diffuseColor = vec4( 1.0 );
	#include <clipping_planes_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	float dist = length( vWorldPosition - referencePosition );
	dist = ( dist - nearDistance ) / ( farDistance - nearDistance );
	dist = saturate( dist );
	gl_FragColor = vec4( dist, 0.0, 0.0, 1.0 );
}`,J6=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
}`,Q6=`uniform sampler2D tEquirect;
varying vec3 vWorldDirection;
#include <common>
void main() {
	vec3 direction = normalize( vWorldDirection );
	vec2 sampleUV = equirectUv( direction );
	gl_FragColor = texture2D( tEquirect, sampleUV );
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,$6=`uniform float scale;
attribute float lineDistance;
varying float vLineDistance;
#include <common>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	vLineDistance = scale * lineDistance;
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,e8=`uniform vec3 diffuse;
uniform float opacity;
uniform float dashSize;
uniform float totalSize;
varying float vLineDistance;
#include <common>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	if ( mod( vLineDistance, totalSize ) > dashSize ) {
		discard;
	}
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,t8=`#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinbase_vertex>
		#include <skinnormal_vertex>
		#include <defaultnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <fog_vertex>
}`,n8=`uniform vec3 diffuse;
uniform float opacity;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		reflectedLight.indirectDiffuse += lightMapTexel.rgb * lightMapIntensity * RECIPROCAL_PI;
	#else
		reflectedLight.indirectDiffuse += vec3( 1.0 );
	#endif
	#include <aomap_fragment>
	reflectedLight.indirectDiffuse *= diffuseColor.rgb;
	vec3 outgoingLight = reflectedLight.indirectDiffuse;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,i8=`#define LAMBERT
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,a8=`#define LAMBERT
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_lambert_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_lambert_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,r8=`#define MATCAP
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <displacementmap_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
	vViewPosition = - mvPosition.xyz;
}`,s8=`#define MATCAP
uniform vec3 diffuse;
uniform float opacity;
uniform sampler2D matcap;
varying vec3 vViewPosition;
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	vec3 viewDir = normalize( vViewPosition );
	vec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );
	vec3 y = cross( viewDir, x );
	vec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;
	#ifdef USE_MATCAP
		vec4 matcapColor = texture2D( matcap, uv );
	#else
		vec4 matcapColor = vec4( vec3( mix( 0.2, 0.8, uv.y ) ), 1.0 );
	#endif
	vec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,o8=`#define NORMAL
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	vViewPosition = - mvPosition.xyz;
#endif
}`,l8=`#define NORMAL
uniform float opacity;
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <uv_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( 0.0, 0.0, 0.0, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	gl_FragColor = vec4( normalize( normal ) * 0.5 + 0.5, diffuseColor.a );
	#ifdef OPAQUE
		gl_FragColor.a = 1.0;
	#endif
}`,c8=`#define PHONG
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,u8=`#define PHONG
uniform vec3 diffuse;
uniform vec3 emissive;
uniform vec3 specular;
uniform float shininess;
uniform float opacity;
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_phong_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_phong_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,h8=`#define STANDARD
varying vec3 vViewPosition;
#ifdef USE_TRANSMISSION
	varying vec3 vWorldPosition;
#endif
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
#ifdef USE_TRANSMISSION
	vWorldPosition = worldPosition.xyz;
#endif
}`,f8=`#define STANDARD
#ifdef PHYSICAL
	#define IOR
	#define USE_SPECULAR
#endif
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float roughness;
uniform float metalness;
uniform float opacity;
#ifdef IOR
	uniform float ior;
#endif
#ifdef USE_SPECULAR
	uniform float specularIntensity;
	uniform vec3 specularColor;
	#ifdef USE_SPECULAR_COLORMAP
		uniform sampler2D specularColorMap;
	#endif
	#ifdef USE_SPECULAR_INTENSITYMAP
		uniform sampler2D specularIntensityMap;
	#endif
#endif
#ifdef USE_CLEARCOAT
	uniform float clearcoat;
	uniform float clearcoatRoughness;
#endif
#ifdef USE_DISPERSION
	uniform float dispersion;
#endif
#ifdef USE_IRIDESCENCE
	uniform float iridescence;
	uniform float iridescenceIOR;
	uniform float iridescenceThicknessMinimum;
	uniform float iridescenceThicknessMaximum;
#endif
#ifdef USE_SHEEN
	uniform vec3 sheenColor;
	uniform float sheenRoughness;
	#ifdef USE_SHEEN_COLORMAP
		uniform sampler2D sheenColorMap;
	#endif
	#ifdef USE_SHEEN_ROUGHNESSMAP
		uniform sampler2D sheenRoughnessMap;
	#endif
#endif
#ifdef USE_ANISOTROPY
	uniform vec2 anisotropyVector;
	#ifdef USE_ANISOTROPYMAP
		uniform sampler2D anisotropyMap;
	#endif
#endif
varying vec3 vViewPosition;
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <iridescence_fragment>
#include <cube_uv_reflection_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_physical_pars_fragment>
#include <fog_pars_fragment>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_physical_pars_fragment>
#include <transmission_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <clearcoat_pars_fragment>
#include <iridescence_pars_fragment>
#include <roughnessmap_pars_fragment>
#include <metalnessmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <roughnessmap_fragment>
	#include <metalnessmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <clearcoat_normal_fragment_begin>
	#include <clearcoat_normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_physical_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;
	vec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;
	#include <transmission_fragment>
	vec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;
	#ifdef USE_SHEEN
 
		outgoingLight = outgoingLight + sheenSpecularDirect + sheenSpecularIndirect;
 
 	#endif
	#ifdef USE_CLEARCOAT
		float dotNVcc = saturate( dot( geometryClearcoatNormal, geometryViewDir ) );
		vec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );
		outgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + ( clearcoatSpecularDirect + clearcoatSpecularIndirect ) * material.clearcoat;
	#endif
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,d8=`#define TOON
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,p8=`#define TOON
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <gradientmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_toon_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_toon_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,m8=`uniform float size;
uniform float scale;
#include <common>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
#ifdef USE_POINTS_UV
	varying vec2 vUv;
	uniform mat3 uvTransform;
#endif
void main() {
	#ifdef USE_POINTS_UV
		vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	#endif
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	gl_PointSize = size;
	#ifdef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );
	#endif
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <fog_vertex>
}`,g8=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <color_pars_fragment>
#include <map_particle_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_particle_fragment>
	#include <color_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,v8=`#include <common>
#include <batching_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <shadowmap_pars_vertex>
void main() {
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,y8=`uniform vec3 color;
uniform float opacity;
#include <common>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <logdepthbuf_pars_fragment>
#include <shadowmap_pars_fragment>
#include <shadowmask_pars_fragment>
void main() {
	#include <logdepthbuf_fragment>
	gl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
}`,_8=`uniform float rotation;
uniform vec2 center;
#include <common>
#include <uv_pars_vertex>
#include <fog_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	vec4 mvPosition = modelViewMatrix[ 3 ];
	vec2 scale = vec2( length( modelMatrix[ 0 ].xyz ), length( modelMatrix[ 1 ].xyz ) );
	#ifndef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) scale *= - mvPosition.z;
	#endif
	vec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;
	vec2 rotatedPosition;
	rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;
	rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;
	mvPosition.xy += rotatedPosition;
	gl_Position = projectionMatrix * mvPosition;
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,b8=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
}`,An={alphahash_fragment:V5,alphahash_pars_fragment:j5,alphamap_fragment:G5,alphamap_pars_fragment:q5,alphatest_fragment:X5,alphatest_pars_fragment:W5,aomap_fragment:Y5,aomap_pars_fragment:Z5,batching_pars_vertex:K5,batching_vertex:J5,begin_vertex:Q5,beginnormal_vertex:$5,bsdfs:e2,iridescence_fragment:t2,bumpmap_pars_fragment:n2,clipping_planes_fragment:i2,clipping_planes_pars_fragment:a2,clipping_planes_pars_vertex:r2,clipping_planes_vertex:s2,color_fragment:o2,color_pars_fragment:l2,color_pars_vertex:c2,color_vertex:u2,common:h2,cube_uv_reflection_fragment:f2,defaultnormal_vertex:d2,displacementmap_pars_vertex:p2,displacementmap_vertex:m2,emissivemap_fragment:g2,emissivemap_pars_fragment:v2,colorspace_fragment:y2,colorspace_pars_fragment:_2,envmap_fragment:b2,envmap_common_pars_fragment:x2,envmap_pars_fragment:S2,envmap_pars_vertex:E2,envmap_physical_pars_fragment:L2,envmap_vertex:M2,fog_vertex:w2,fog_pars_vertex:T2,fog_fragment:A2,fog_pars_fragment:C2,gradientmap_pars_fragment:R2,lightmap_pars_fragment:N2,lights_lambert_fragment:O2,lights_lambert_pars_fragment:D2,lights_pars_begin:U2,lights_toon_fragment:I2,lights_toon_pars_fragment:P2,lights_phong_fragment:z2,lights_phong_pars_fragment:B2,lights_physical_fragment:F2,lights_physical_pars_fragment:k2,lights_fragment_begin:H2,lights_fragment_maps:V2,lights_fragment_end:j2,logdepthbuf_fragment:G2,logdepthbuf_pars_fragment:q2,logdepthbuf_pars_vertex:X2,logdepthbuf_vertex:W2,map_fragment:Y2,map_pars_fragment:Z2,map_particle_fragment:K2,map_particle_pars_fragment:J2,metalnessmap_fragment:Q2,metalnessmap_pars_fragment:$2,morphinstance_vertex:e6,morphcolor_vertex:t6,morphnormal_vertex:n6,morphtarget_pars_vertex:i6,morphtarget_vertex:a6,normal_fragment_begin:r6,normal_fragment_maps:s6,normal_pars_fragment:o6,normal_pars_vertex:l6,normal_vertex:c6,normalmap_pars_fragment:u6,clearcoat_normal_fragment_begin:h6,clearcoat_normal_fragment_maps:f6,clearcoat_pars_fragment:d6,iridescence_pars_fragment:p6,opaque_fragment:m6,packing:g6,premultiplied_alpha_fragment:v6,project_vertex:y6,dithering_fragment:_6,dithering_pars_fragment:b6,roughnessmap_fragment:x6,roughnessmap_pars_fragment:S6,shadowmap_pars_fragment:E6,shadowmap_pars_vertex:M6,shadowmap_vertex:w6,shadowmask_pars_fragment:T6,skinbase_vertex:A6,skinning_pars_vertex:C6,skinning_vertex:R6,skinnormal_vertex:N6,specularmap_fragment:O6,specularmap_pars_fragment:D6,tonemapping_fragment:U6,tonemapping_pars_fragment:L6,transmission_fragment:I6,transmission_pars_fragment:P6,uv_pars_fragment:z6,uv_pars_vertex:B6,uv_vertex:F6,worldpos_vertex:k6,background_vert:H6,background_frag:V6,backgroundCube_vert:j6,backgroundCube_frag:G6,cube_vert:q6,cube_frag:X6,depth_vert:W6,depth_frag:Y6,distance_vert:Z6,distance_frag:K6,equirect_vert:J6,equirect_frag:Q6,linedashed_vert:$6,linedashed_frag:e8,meshbasic_vert:t8,meshbasic_frag:n8,meshlambert_vert:i8,meshlambert_frag:a8,meshmatcap_vert:r8,meshmatcap_frag:s8,meshnormal_vert:o8,meshnormal_frag:l8,meshphong_vert:c8,meshphong_frag:u8,meshphysical_vert:h8,meshphysical_frag:f8,meshtoon_vert:d8,meshtoon_frag:p8,points_vert:m8,points_frag:g8,shadow_vert:v8,shadow_frag:y8,sprite_vert:_8,sprite_frag:b8},Dt={common:{diffuse:{value:new Ut(16777215)},opacity:{value:1},map:{value:null},mapTransform:{value:new Sn},alphaMap:{value:null},alphaMapTransform:{value:new Sn},alphaTest:{value:0}},specularmap:{specularMap:{value:null},specularMapTransform:{value:new Sn}},envmap:{envMap:{value:null},envMapRotation:{value:new Sn},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98},dfgLUT:{value:null}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1},aoMapTransform:{value:new Sn}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1},lightMapTransform:{value:new Sn}},bumpmap:{bumpMap:{value:null},bumpMapTransform:{value:new Sn},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalMapTransform:{value:new Sn},normalScale:{value:new Ke(1,1)}},displacementmap:{displacementMap:{value:null},displacementMapTransform:{value:new Sn},displacementScale:{value:1},displacementBias:{value:0}},emissivemap:{emissiveMap:{value:null},emissiveMapTransform:{value:new Sn}},metalnessmap:{metalnessMap:{value:null},metalnessMapTransform:{value:new Sn}},roughnessmap:{roughnessMap:{value:null},roughnessMapTransform:{value:new Sn}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new Ut(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotLightMap:{value:[]},spotShadowMap:{value:[]},spotLightMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new Ut(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaMapTransform:{value:new Sn},alphaTest:{value:0},uvTransform:{value:new Sn}},sprite:{diffuse:{value:new Ut(16777215)},opacity:{value:1},center:{value:new Ke(.5,.5)},rotation:{value:0},map:{value:null},mapTransform:{value:new Sn},alphaMap:{value:null},alphaMapTransform:{value:new Sn},alphaTest:{value:0}}},wo={basic:{uniforms:kr([Dt.common,Dt.specularmap,Dt.envmap,Dt.aomap,Dt.lightmap,Dt.fog]),vertexShader:An.meshbasic_vert,fragmentShader:An.meshbasic_frag},lambert:{uniforms:kr([Dt.common,Dt.specularmap,Dt.envmap,Dt.aomap,Dt.lightmap,Dt.emissivemap,Dt.bumpmap,Dt.normalmap,Dt.displacementmap,Dt.fog,Dt.lights,{emissive:{value:new Ut(0)}}]),vertexShader:An.meshlambert_vert,fragmentShader:An.meshlambert_frag},phong:{uniforms:kr([Dt.common,Dt.specularmap,Dt.envmap,Dt.aomap,Dt.lightmap,Dt.emissivemap,Dt.bumpmap,Dt.normalmap,Dt.displacementmap,Dt.fog,Dt.lights,{emissive:{value:new Ut(0)},specular:{value:new Ut(1118481)},shininess:{value:30}}]),vertexShader:An.meshphong_vert,fragmentShader:An.meshphong_frag},standard:{uniforms:kr([Dt.common,Dt.envmap,Dt.aomap,Dt.lightmap,Dt.emissivemap,Dt.bumpmap,Dt.normalmap,Dt.displacementmap,Dt.roughnessmap,Dt.metalnessmap,Dt.fog,Dt.lights,{emissive:{value:new Ut(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:An.meshphysical_vert,fragmentShader:An.meshphysical_frag},toon:{uniforms:kr([Dt.common,Dt.aomap,Dt.lightmap,Dt.emissivemap,Dt.bumpmap,Dt.normalmap,Dt.displacementmap,Dt.gradientmap,Dt.fog,Dt.lights,{emissive:{value:new Ut(0)}}]),vertexShader:An.meshtoon_vert,fragmentShader:An.meshtoon_frag},matcap:{uniforms:kr([Dt.common,Dt.bumpmap,Dt.normalmap,Dt.displacementmap,Dt.fog,{matcap:{value:null}}]),vertexShader:An.meshmatcap_vert,fragmentShader:An.meshmatcap_frag},points:{uniforms:kr([Dt.points,Dt.fog]),vertexShader:An.points_vert,fragmentShader:An.points_frag},dashed:{uniforms:kr([Dt.common,Dt.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:An.linedashed_vert,fragmentShader:An.linedashed_frag},depth:{uniforms:kr([Dt.common,Dt.displacementmap]),vertexShader:An.depth_vert,fragmentShader:An.depth_frag},normal:{uniforms:kr([Dt.common,Dt.bumpmap,Dt.normalmap,Dt.displacementmap,{opacity:{value:1}}]),vertexShader:An.meshnormal_vert,fragmentShader:An.meshnormal_frag},sprite:{uniforms:kr([Dt.sprite,Dt.fog]),vertexShader:An.sprite_vert,fragmentShader:An.sprite_frag},background:{uniforms:{uvTransform:{value:new Sn},t2D:{value:null},backgroundIntensity:{value:1}},vertexShader:An.background_vert,fragmentShader:An.background_frag},backgroundCube:{uniforms:{envMap:{value:null},flipEnvMap:{value:-1},backgroundBlurriness:{value:0},backgroundIntensity:{value:1},backgroundRotation:{value:new Sn}},vertexShader:An.backgroundCube_vert,fragmentShader:An.backgroundCube_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:An.cube_vert,fragmentShader:An.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:An.equirect_vert,fragmentShader:An.equirect_frag},distance:{uniforms:kr([Dt.common,Dt.displacementmap,{referencePosition:{value:new ee},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:An.distance_vert,fragmentShader:An.distance_frag},shadow:{uniforms:kr([Dt.lights,Dt.fog,{color:{value:new Ut(0)},opacity:{value:1}}]),vertexShader:An.shadow_vert,fragmentShader:An.shadow_frag}};wo.physical={uniforms:kr([wo.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatMapTransform:{value:new Sn},clearcoatNormalMap:{value:null},clearcoatNormalMapTransform:{value:new Sn},clearcoatNormalScale:{value:new Ke(1,1)},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatRoughnessMapTransform:{value:new Sn},dispersion:{value:0},iridescence:{value:0},iridescenceMap:{value:null},iridescenceMapTransform:{value:new Sn},iridescenceIOR:{value:1.3},iridescenceThicknessMinimum:{value:100},iridescenceThicknessMaximum:{value:400},iridescenceThicknessMap:{value:null},iridescenceThicknessMapTransform:{value:new Sn},sheen:{value:0},sheenColor:{value:new Ut(0)},sheenColorMap:{value:null},sheenColorMapTransform:{value:new Sn},sheenRoughness:{value:1},sheenRoughnessMap:{value:null},sheenRoughnessMapTransform:{value:new Sn},transmission:{value:0},transmissionMap:{value:null},transmissionMapTransform:{value:new Sn},transmissionSamplerSize:{value:new Ke},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},thicknessMapTransform:{value:new Sn},attenuationDistance:{value:0},attenuationColor:{value:new Ut(0)},specularColor:{value:new Ut(1,1,1)},specularColorMap:{value:null},specularColorMapTransform:{value:new Sn},specularIntensity:{value:1},specularIntensityMap:{value:null},specularIntensityMapTransform:{value:new Sn},anisotropyVector:{value:new Ke},anisotropyMap:{value:null},anisotropyMapTransform:{value:new Sn}}]),vertexShader:An.meshphysical_vert,fragmentShader:An.meshphysical_frag};const Iy={r:0,b:0,g:0},Ch=new Ss,x8=new on;function S8(i,e,t,n,a,s,l){const u=new Ut(0);let d=s===!0?0:1,p,g,y=null,_=0,b=null;function x(N){let O=N.isScene===!0?N.background:null;return O&&O.isTexture&&(O=(N.backgroundBlurriness>0?t:e).get(O)),O}function T(N){let O=!1;const P=x(N);P===null?S(u,d):P&&P.isColor&&(S(P,1),O=!0);const U=i.xr.getEnvironmentBlendMode();U==="additive"?n.buffers.color.setClear(0,0,0,1,l):U==="alpha-blend"&&n.buffers.color.setClear(0,0,0,0,l),(i.autoClear||O)&&(n.buffers.depth.setTest(!0),n.buffers.depth.setMask(!0),n.buffers.color.setMask(!0),i.clear(i.autoClearColor,i.autoClearDepth,i.autoClearStencil))}function w(N,O){const P=x(O);P&&(P.isCubeTexture||P.mapping===_p)?(g===void 0&&(g=new Ui(new sf(1,1,1),new ja({name:"BackgroundCubeMaterial",uniforms:up(wo.backgroundCube.uniforms),vertexShader:wo.backgroundCube.vertexShader,fragmentShader:wo.backgroundCube.fragmentShader,side:jr,depthTest:!1,depthWrite:!1,fog:!1,allowOverride:!1})),g.geometry.deleteAttribute("normal"),g.geometry.deleteAttribute("uv"),g.onBeforeRender=function(U,z,H){this.matrixWorld.copyPosition(H.matrixWorld)},Object.defineProperty(g.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),a.update(g)),Ch.copy(O.backgroundRotation),Ch.x*=-1,Ch.y*=-1,Ch.z*=-1,P.isCubeTexture&&P.isRenderTargetTexture===!1&&(Ch.y*=-1,Ch.z*=-1),g.material.uniforms.envMap.value=P,g.material.uniforms.flipEnvMap.value=P.isCubeTexture&&P.isRenderTargetTexture===!1?-1:1,g.material.uniforms.backgroundBlurriness.value=O.backgroundBlurriness,g.material.uniforms.backgroundIntensity.value=O.backgroundIntensity,g.material.uniforms.backgroundRotation.value.setFromMatrix4(x8.makeRotationFromEuler(Ch)),g.material.toneMapped=Pn.getTransfer(P.colorSpace)!==ri,(y!==P||_!==P.version||b!==i.toneMapping)&&(g.material.needsUpdate=!0,y=P,_=P.version,b=i.toneMapping),g.layers.enableAll(),N.unshift(g,g.geometry,g.material,0,0,null)):P&&P.isTexture&&(p===void 0&&(p=new Ui(new gc(2,2),new ja({name:"BackgroundMaterial",uniforms:up(wo.background.uniforms),vertexShader:wo.background.vertexShader,fragmentShader:wo.background.fragmentShader,side:dc,depthTest:!1,depthWrite:!1,fog:!1,allowOverride:!1})),p.geometry.deleteAttribute("normal"),Object.defineProperty(p.material,"map",{get:function(){return this.uniforms.t2D.value}}),a.update(p)),p.material.uniforms.t2D.value=P,p.material.uniforms.backgroundIntensity.value=O.backgroundIntensity,p.material.toneMapped=Pn.getTransfer(P.colorSpace)!==ri,P.matrixAutoUpdate===!0&&P.updateMatrix(),p.material.uniforms.uvTransform.value.copy(P.matrix),(y!==P||_!==P.version||b!==i.toneMapping)&&(p.material.needsUpdate=!0,y=P,_=P.version,b=i.toneMapping),p.layers.enableAll(),N.unshift(p,p.geometry,p.material,0,0,null))}function S(N,O){N.getRGB(Iy,AN(i)),n.buffers.color.setClear(Iy.r,Iy.g,Iy.b,O,l)}function C(){g!==void 0&&(g.geometry.dispose(),g.material.dispose(),g=void 0),p!==void 0&&(p.geometry.dispose(),p.material.dispose(),p=void 0)}return{getClearColor:function(){return u},setClearColor:function(N,O=1){u.set(N),d=O,S(u,d)},getClearAlpha:function(){return d},setClearAlpha:function(N){d=N,S(u,d)},render:T,addToRenderList:w,dispose:C}}function E8(i,e){const t=i.getParameter(i.MAX_VERTEX_ATTRIBS),n={},a=_(null);let s=a,l=!1;function u(L,j,W,X,K){let le=!1;const k=y(X,W,j);s!==k&&(s=k,p(s.object)),le=b(L,X,W,K),le&&x(L,X,W,K),K!==null&&e.update(K,i.ELEMENT_ARRAY_BUFFER),(le||l)&&(l=!1,O(L,j,W,X),K!==null&&i.bindBuffer(i.ELEMENT_ARRAY_BUFFER,e.get(K).buffer))}function d(){return i.createVertexArray()}function p(L){return i.bindVertexArray(L)}function g(L){return i.deleteVertexArray(L)}function y(L,j,W){const X=W.wireframe===!0;let K=n[L.id];K===void 0&&(K={},n[L.id]=K);let le=K[j.id];le===void 0&&(le={},K[j.id]=le);let k=le[X];return k===void 0&&(k=_(d()),le[X]=k),k}function _(L){const j=[],W=[],X=[];for(let K=0;K<t;K++)j[K]=0,W[K]=0,X[K]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:j,enabledAttributes:W,attributeDivisors:X,object:L,attributes:{},index:null}}function b(L,j,W,X){const K=s.attributes,le=j.attributes;let k=0;const Z=W.getAttributes();for(const ne in Z)if(Z[ne].location>=0){const ge=K[ne];let J=le[ne];if(J===void 0&&(ne==="instanceMatrix"&&L.instanceMatrix&&(J=L.instanceMatrix),ne==="instanceColor"&&L.instanceColor&&(J=L.instanceColor)),ge===void 0||ge.attribute!==J||J&&ge.data!==J.data)return!0;k++}return s.attributesNum!==k||s.index!==X}function x(L,j,W,X){const K={},le=j.attributes;let k=0;const Z=W.getAttributes();for(const ne in Z)if(Z[ne].location>=0){let ge=le[ne];ge===void 0&&(ne==="instanceMatrix"&&L.instanceMatrix&&(ge=L.instanceMatrix),ne==="instanceColor"&&L.instanceColor&&(ge=L.instanceColor));const J={};J.attribute=ge,ge&&ge.data&&(J.data=ge.data),K[ne]=J,k++}s.attributes=K,s.attributesNum=k,s.index=X}function T(){const L=s.newAttributes;for(let j=0,W=L.length;j<W;j++)L[j]=0}function w(L){S(L,0)}function S(L,j){const W=s.newAttributes,X=s.enabledAttributes,K=s.attributeDivisors;W[L]=1,X[L]===0&&(i.enableVertexAttribArray(L),X[L]=1),K[L]!==j&&(i.vertexAttribDivisor(L,j),K[L]=j)}function C(){const L=s.newAttributes,j=s.enabledAttributes;for(let W=0,X=j.length;W<X;W++)j[W]!==L[W]&&(i.disableVertexAttribArray(W),j[W]=0)}function N(L,j,W,X,K,le,k){k===!0?i.vertexAttribIPointer(L,j,W,K,le):i.vertexAttribPointer(L,j,W,X,K,le)}function O(L,j,W,X){T();const K=X.attributes,le=W.getAttributes(),k=j.defaultAttributeValues;for(const Z in le){const ne=le[Z];if(ne.location>=0){let pe=K[Z];if(pe===void 0&&(Z==="instanceMatrix"&&L.instanceMatrix&&(pe=L.instanceMatrix),Z==="instanceColor"&&L.instanceColor&&(pe=L.instanceColor)),pe!==void 0){const ge=pe.normalized,J=pe.itemSize,ce=e.get(pe);if(ce===void 0)continue;const Se=ce.buffer,Le=ce.type,nt=ce.bytesPerElement,ve=Le===i.INT||Le===i.UNSIGNED_INT||pe.gpuType===tv;if(pe.isInterleavedBufferAttribute){const Ce=pe.data,Je=Ce.stride,yt=pe.offset;if(Ce.isInstancedInterleavedBuffer){for(let St=0;St<ne.locationSize;St++)S(ne.location+St,Ce.meshPerAttribute);L.isInstancedMesh!==!0&&X._maxInstanceCount===void 0&&(X._maxInstanceCount=Ce.meshPerAttribute*Ce.count)}else for(let St=0;St<ne.locationSize;St++)w(ne.location+St);i.bindBuffer(i.ARRAY_BUFFER,Se);for(let St=0;St<ne.locationSize;St++)N(ne.location+St,J/ne.locationSize,Le,ge,Je*nt,(yt+J/ne.locationSize*St)*nt,ve)}else{if(pe.isInstancedBufferAttribute){for(let Ce=0;Ce<ne.locationSize;Ce++)S(ne.location+Ce,pe.meshPerAttribute);L.isInstancedMesh!==!0&&X._maxInstanceCount===void 0&&(X._maxInstanceCount=pe.meshPerAttribute*pe.count)}else for(let Ce=0;Ce<ne.locationSize;Ce++)w(ne.location+Ce);i.bindBuffer(i.ARRAY_BUFFER,Se);for(let Ce=0;Ce<ne.locationSize;Ce++)N(ne.location+Ce,J/ne.locationSize,Le,ge,J*nt,J/ne.locationSize*Ce*nt,ve)}}else if(k!==void 0){const ge=k[Z];if(ge!==void 0)switch(ge.length){case 2:i.vertexAttrib2fv(ne.location,ge);break;case 3:i.vertexAttrib3fv(ne.location,ge);break;case 4:i.vertexAttrib4fv(ne.location,ge);break;default:i.vertexAttrib1fv(ne.location,ge)}}}}C()}function P(){H();for(const L in n){const j=n[L];for(const W in j){const X=j[W];for(const K in X)g(X[K].object),delete X[K];delete j[W]}delete n[L]}}function U(L){if(n[L.id]===void 0)return;const j=n[L.id];for(const W in j){const X=j[W];for(const K in X)g(X[K].object),delete X[K];delete j[W]}delete n[L.id]}function z(L){for(const j in n){const W=n[j];if(W[L.id]===void 0)continue;const X=W[L.id];for(const K in X)g(X[K].object),delete X[K];delete W[L.id]}}function H(){D(),l=!0,s!==a&&(s=a,p(s.object))}function D(){a.geometry=null,a.program=null,a.wireframe=!1}return{setup:u,reset:H,resetDefaultState:D,dispose:P,releaseStatesOfGeometry:U,releaseStatesOfProgram:z,initAttributes:T,enableAttribute:w,disableUnusedAttributes:C}}function M8(i,e,t){let n;function a(p){n=p}function s(p,g){i.drawArrays(n,p,g),t.update(g,n,1)}function l(p,g,y){y!==0&&(i.drawArraysInstanced(n,p,g,y),t.update(g,n,y))}function u(p,g,y){if(y===0)return;e.get("WEBGL_multi_draw").multiDrawArraysWEBGL(n,p,0,g,0,y);let b=0;for(let x=0;x<y;x++)b+=g[x];t.update(b,n,1)}function d(p,g,y,_){if(y===0)return;const b=e.get("WEBGL_multi_draw");if(b===null)for(let x=0;x<p.length;x++)l(p[x],g[x],_[x]);else{b.multiDrawArraysInstancedWEBGL(n,p,0,g,0,_,0,y);let x=0;for(let T=0;T<y;T++)x+=g[T]*_[T];t.update(x,n,1)}}this.setMode=a,this.render=s,this.renderInstances=l,this.renderMultiDraw=u,this.renderMultiDrawInstances=d}function w8(i,e,t,n){let a;function s(){if(a!==void 0)return a;if(e.has("EXT_texture_filter_anisotropic")===!0){const z=e.get("EXT_texture_filter_anisotropic");a=i.getParameter(z.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else a=0;return a}function l(z){return!(z!==sa&&n.convert(z)!==i.getParameter(i.IMPLEMENTATION_COLOR_READ_FORMAT))}function u(z){const H=z===ji&&(e.has("EXT_color_buffer_half_float")||e.has("EXT_color_buffer_float"));return!(z!==ka&&n.convert(z)!==i.getParameter(i.IMPLEMENTATION_COLOR_READ_TYPE)&&z!==Di&&!H)}function d(z){if(z==="highp"){if(i.getShaderPrecisionFormat(i.VERTEX_SHADER,i.HIGH_FLOAT).precision>0&&i.getShaderPrecisionFormat(i.FRAGMENT_SHADER,i.HIGH_FLOAT).precision>0)return"highp";z="mediump"}return z==="mediump"&&i.getShaderPrecisionFormat(i.VERTEX_SHADER,i.MEDIUM_FLOAT).precision>0&&i.getShaderPrecisionFormat(i.FRAGMENT_SHADER,i.MEDIUM_FLOAT).precision>0?"mediump":"lowp"}let p=t.precision!==void 0?t.precision:"highp";const g=d(p);g!==p&&(Rt("WebGLRenderer:",p,"not supported, using",g,"instead."),p=g);const y=t.logarithmicDepthBuffer===!0,_=t.reversedDepthBuffer===!0&&e.has("EXT_clip_control"),b=i.getParameter(i.MAX_TEXTURE_IMAGE_UNITS),x=i.getParameter(i.MAX_VERTEX_TEXTURE_IMAGE_UNITS),T=i.getParameter(i.MAX_TEXTURE_SIZE),w=i.getParameter(i.MAX_CUBE_MAP_TEXTURE_SIZE),S=i.getParameter(i.MAX_VERTEX_ATTRIBS),C=i.getParameter(i.MAX_VERTEX_UNIFORM_VECTORS),N=i.getParameter(i.MAX_VARYING_VECTORS),O=i.getParameter(i.MAX_FRAGMENT_UNIFORM_VECTORS),P=i.getParameter(i.MAX_SAMPLES),U=i.getParameter(i.SAMPLES);return{isWebGL2:!0,getMaxAnisotropy:s,getMaxPrecision:d,textureFormatReadable:l,textureTypeReadable:u,precision:p,logarithmicDepthBuffer:y,reversedDepthBuffer:_,maxTextures:b,maxVertexTextures:x,maxTextureSize:T,maxCubemapSize:w,maxAttributes:S,maxVertexUniforms:C,maxVaryings:N,maxFragmentUniforms:O,maxSamples:P,samples:U}}function T8(i){const e=this;let t=null,n=0,a=!1,s=!1;const l=new cc,u=new Sn,d={value:null,needsUpdate:!1};this.uniform=d,this.numPlanes=0,this.numIntersection=0,this.init=function(y,_){const b=y.length!==0||_||n!==0||a;return a=_,n=y.length,b},this.beginShadows=function(){s=!0,g(null)},this.endShadows=function(){s=!1},this.setGlobalState=function(y,_){t=g(y,_,0)},this.setState=function(y,_,b){const x=y.clippingPlanes,T=y.clipIntersection,w=y.clipShadows,S=i.get(y);if(!a||x===null||x.length===0||s&&!w)s?g(null):p();else{const C=s?0:n,N=C*4;let O=S.clippingState||null;d.value=O,O=g(x,_,N,b);for(let P=0;P!==N;++P)O[P]=t[P];S.clippingState=O,this.numIntersection=T?this.numPlanes:0,this.numPlanes+=C}};function p(){d.value!==t&&(d.value=t,d.needsUpdate=n>0),e.numPlanes=n,e.numIntersection=0}function g(y,_,b,x){const T=y!==null?y.length:0;let w=null;if(T!==0){if(w=d.value,x!==!0||w===null){const S=b+T*4,C=_.matrixWorldInverse;u.getNormalMatrix(C),(w===null||w.length<S)&&(w=new Float32Array(S));for(let N=0,O=b;N!==T;++N,O+=4)l.copy(y[N]).applyMatrix4(C,u),l.normal.toArray(w,O),w[O+3]=l.constant}d.value=w,d.needsUpdate=!0}return e.numPlanes=T,e.numIntersection=0,w}}function A8(i){let e=new WeakMap;function t(l,u){return u===ip?l.mapping=No:u===Ug&&(l.mapping=yu),l}function n(l){if(l&&l.isTexture){const u=l.mapping;if(u===ip||u===Ug)if(e.has(l)){const d=e.get(l).texture;return t(d,l.mapping)}else{const d=l.image;if(d&&d.height>0){const p=new Eb(d.height);return p.fromEquirectangularTexture(i,l),e.set(l,p),l.addEventListener("dispose",a),t(p.texture,l.mapping)}else return null}}return l}function a(l){const u=l.target;u.removeEventListener("dispose",a);const d=e.get(u);d!==void 0&&(e.delete(u),d.dispose())}function s(){e=new WeakMap}return{get:n,dispose:s}}const mu=4,gC=[.125,.215,.35,.446,.526,.582],Fh=20,C8=256,lg=new bl,vC=new Ut;let i1=null,a1=0,r1=0,s1=!1;const R8=new ee;class dE{constructor(e){this._renderer=e,this._pingPongRenderTarget=null,this._lodMax=0,this._cubeSize=0,this._sizeLods=[],this._sigmas=[],this._lodMeshes=[],this._backgroundBox=null,this._cubemapMaterial=null,this._equirectMaterial=null,this._blurMaterial=null,this._ggxMaterial=null}fromScene(e,t=0,n=.1,a=100,s={}){const{size:l=256,position:u=R8}=s;i1=this._renderer.getRenderTarget(),a1=this._renderer.getActiveCubeFace(),r1=this._renderer.getActiveMipmapLevel(),s1=this._renderer.xr.enabled,this._renderer.xr.enabled=!1,this._setSize(l);const d=this._allocateTargets();return d.depthBuffer=!0,this._sceneToCubeUV(e,n,a,d,u),t>0&&this._blur(d,0,0,t),this._applyPMREM(d),this._cleanup(d),d}fromEquirectangular(e,t=null){return this._fromTexture(e,t)}fromCubemap(e,t=null){return this._fromTexture(e,t)}compileCubemapShader(){this._cubemapMaterial===null&&(this._cubemapMaterial=bC(),this._compileMaterial(this._cubemapMaterial))}compileEquirectangularShader(){this._equirectMaterial===null&&(this._equirectMaterial=_C(),this._compileMaterial(this._equirectMaterial))}dispose(){this._dispose(),this._cubemapMaterial!==null&&this._cubemapMaterial.dispose(),this._equirectMaterial!==null&&this._equirectMaterial.dispose(),this._backgroundBox!==null&&(this._backgroundBox.geometry.dispose(),this._backgroundBox.material.dispose())}_setSize(e){this._lodMax=Math.floor(Math.log2(e)),this._cubeSize=Math.pow(2,this._lodMax)}_dispose(){this._blurMaterial!==null&&this._blurMaterial.dispose(),this._ggxMaterial!==null&&this._ggxMaterial.dispose(),this._pingPongRenderTarget!==null&&this._pingPongRenderTarget.dispose();for(let e=0;e<this._lodMeshes.length;e++)this._lodMeshes[e].geometry.dispose()}_cleanup(e){this._renderer.setRenderTarget(i1,a1,r1),this._renderer.xr.enabled=s1,e.scissorTest=!1,Fd(e,0,0,e.width,e.height)}_fromTexture(e,t){e.mapping===No||e.mapping===yu?this._setSize(e.image.length===0?16:e.image[0].width||e.image[0].image.width):this._setSize(e.image.width/4),i1=this._renderer.getRenderTarget(),a1=this._renderer.getActiveCubeFace(),r1=this._renderer.getActiveMipmapLevel(),s1=this._renderer.xr.enabled,this._renderer.xr.enabled=!1;const n=t||this._allocateTargets();return this._textureToCubeUV(e,n),this._applyPMREM(n),this._cleanup(n),n}_allocateTargets(){const e=3*Math.max(this._cubeSize,112),t=4*this._cubeSize,n={magFilter:Vn,minFilter:Vn,generateMipmaps:!1,type:ji,format:sa,colorSpace:Oo,depthBuffer:!1},a=yC(e,t,n);if(this._pingPongRenderTarget===null||this._pingPongRenderTarget.width!==e||this._pingPongRenderTarget.height!==t){this._pingPongRenderTarget!==null&&this._dispose(),this._pingPongRenderTarget=yC(e,t,n);const{_lodMax:s}=this;({lodMeshes:this._lodMeshes,sizeLods:this._sizeLods,sigmas:this._sigmas}=N8(s)),this._blurMaterial=D8(s,e,t),this._ggxMaterial=O8(s,e,t)}return a}_compileMaterial(e){const t=new Ui(new mn,e);this._renderer.compile(t,lg)}_sceneToCubeUV(e,t,n,a,s){const d=new ra(90,1,t,n),p=[1,-1,1,1,1,1],g=[1,1,1,-1,-1,-1],y=this._renderer,_=y.autoClear,b=y.toneMapping;y.getClearColor(vC),y.toneMapping=qs,y.autoClear=!1,y.state.buffers.depth.getReversed()&&(y.setRenderTarget(a),y.clearDepth(),y.setRenderTarget(null)),this._backgroundBox===null&&(this._backgroundBox=new Ui(new sf,new mc({name:"PMREM.Background",side:jr,depthWrite:!1,depthTest:!1})));const T=this._backgroundBox,w=T.material;let S=!1;const C=e.background;C?C.isColor&&(w.color.copy(C),e.background=null,S=!0):(w.color.copy(vC),S=!0);for(let N=0;N<6;N++){const O=N%3;O===0?(d.up.set(0,p[N],0),d.position.set(s.x,s.y,s.z),d.lookAt(s.x+g[N],s.y,s.z)):O===1?(d.up.set(0,0,p[N]),d.position.set(s.x,s.y,s.z),d.lookAt(s.x,s.y+g[N],s.z)):(d.up.set(0,p[N],0),d.position.set(s.x,s.y,s.z),d.lookAt(s.x,s.y,s.z+g[N]));const P=this._cubeSize;Fd(a,O*P,N>2?P:0,P,P),y.setRenderTarget(a),S&&y.render(T,d),y.render(e,d)}y.toneMapping=b,y.autoClear=_,e.background=C}_textureToCubeUV(e,t){const n=this._renderer,a=e.mapping===No||e.mapping===yu;a?(this._cubemapMaterial===null&&(this._cubemapMaterial=bC()),this._cubemapMaterial.uniforms.flipEnvMap.value=e.isRenderTargetTexture===!1?-1:1):this._equirectMaterial===null&&(this._equirectMaterial=_C());const s=a?this._cubemapMaterial:this._equirectMaterial,l=this._lodMeshes[0];l.material=s;const u=s.uniforms;u.envMap.value=e;const d=this._cubeSize;Fd(t,0,0,3*d,2*d),n.setRenderTarget(t),n.render(l,lg)}_applyPMREM(e){const t=this._renderer,n=t.autoClear;t.autoClear=!1;const a=this._lodMeshes.length;for(let s=1;s<a;s++)this._applyGGXFilter(e,s-1,s);t.autoClear=n}_applyGGXFilter(e,t,n){const a=this._renderer,s=this._pingPongRenderTarget,l=this._ggxMaterial,u=this._lodMeshes[n];u.material=l;const d=l.uniforms,p=n/(this._lodMeshes.length-1),g=t/(this._lodMeshes.length-1),y=Math.sqrt(p*p-g*g),_=0+p*1.25,b=y*_,{_lodMax:x}=this,T=this._sizeLods[n],w=3*T*(n>x-mu?n-x+mu:0),S=4*(this._cubeSize-T);d.envMap.value=e.texture,d.roughness.value=b,d.mipInt.value=x-t,Fd(s,w,S,3*T,2*T),a.setRenderTarget(s),a.render(u,lg),d.envMap.value=s.texture,d.roughness.value=0,d.mipInt.value=x-n,Fd(e,w,S,3*T,2*T),a.setRenderTarget(e),a.render(u,lg)}_blur(e,t,n,a,s){const l=this._pingPongRenderTarget;this._halfBlur(e,l,t,n,a,"latitudinal",s),this._halfBlur(l,e,n,n,a,"longitudinal",s)}_halfBlur(e,t,n,a,s,l,u){const d=this._renderer,p=this._blurMaterial;l!=="latitudinal"&&l!=="longitudinal"&&Qt("blur direction must be either latitudinal or longitudinal!");const g=3,y=this._lodMeshes[a];y.material=p;const _=p.uniforms,b=this._sizeLods[n]-1,x=isFinite(s)?Math.PI/(2*b):2*Math.PI/(2*Fh-1),T=s/x,w=isFinite(s)?1+Math.floor(g*T):Fh;w>Fh&&Rt(`sigmaRadians, ${s}, is too large and will clip, as it requested ${w} samples when the maximum is set to ${Fh}`);const S=[];let C=0;for(let z=0;z<Fh;++z){const H=z/T,D=Math.exp(-H*H/2);S.push(D),z===0?C+=D:z<w&&(C+=2*D)}for(let z=0;z<S.length;z++)S[z]=S[z]/C;_.envMap.value=e.texture,_.samples.value=w,_.weights.value=S,_.latitudinal.value=l==="latitudinal",u&&(_.poleAxis.value=u);const{_lodMax:N}=this;_.dTheta.value=x,_.mipInt.value=N-n;const O=this._sizeLods[a],P=3*O*(a>N-mu?a-N+mu:0),U=4*(this._cubeSize-O);Fd(t,P,U,3*O,2*O),d.setRenderTarget(t),d.render(y,lg)}}function N8(i){const e=[],t=[],n=[];let a=i;const s=i-mu+1+gC.length;for(let l=0;l<s;l++){const u=Math.pow(2,a);e.push(u);let d=1/u;l>i-mu?d=gC[l-i+mu-1]:l===0&&(d=0),t.push(d);const p=1/(u-2),g=-p,y=1+p,_=[g,g,y,g,y,y,g,g,y,y,g,y],b=6,x=6,T=3,w=2,S=1,C=new Float32Array(T*x*b),N=new Float32Array(w*x*b),O=new Float32Array(S*x*b);for(let U=0;U<b;U++){const z=U%3*2/3-1,H=U>2?0:-1,D=[z,H,0,z+2/3,H,0,z+2/3,H+1,0,z,H,0,z+2/3,H+1,0,z,H+1,0];C.set(D,T*x*U),N.set(_,w*x*U);const L=[U,U,U,U,U,U];O.set(L,S*x*U)}const P=new mn;P.setAttribute("position",new ni(C,T)),P.setAttribute("uv",new ni(N,w)),P.setAttribute("faceIndex",new ni(O,S)),n.push(new Ui(P,null)),a>mu&&a--}return{lodMeshes:n,sizeLods:e,sigmas:t}}function yC(i,e,t){const n=new Ta(i,e,t);return n.texture.mapping=_p,n.texture.name="PMREM.cubeUv",n.scissorTest=!0,n}function Fd(i,e,t,n,a){i.viewport.set(e,t,n,a),i.scissor.set(e,t,n,a)}function O8(i,e,t){return new ja({name:"PMREMGGXConvolution",defines:{GGX_SAMPLES:C8,CUBEUV_TEXEL_WIDTH:1/e,CUBEUV_TEXEL_HEIGHT:1/t,CUBEUV_MAX_MIP:`${i}.0`},uniforms:{envMap:{value:null},roughness:{value:0},mipInt:{value:0}},vertexShader:Xb(),fragmentShader:`

			precision highp float;
			precision highp int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;
			uniform float roughness;
			uniform float mipInt;

			#define ENVMAP_TYPE_CUBE_UV
			#include <cube_uv_reflection_fragment>

			#define PI 3.14159265359

			// Van der Corput radical inverse
			float radicalInverse_VdC(uint bits) {
				bits = (bits << 16u) | (bits >> 16u);
				bits = ((bits & 0x55555555u) << 1u) | ((bits & 0xAAAAAAAAu) >> 1u);
				bits = ((bits & 0x33333333u) << 2u) | ((bits & 0xCCCCCCCCu) >> 2u);
				bits = ((bits & 0x0F0F0F0Fu) << 4u) | ((bits & 0xF0F0F0F0u) >> 4u);
				bits = ((bits & 0x00FF00FFu) << 8u) | ((bits & 0xFF00FF00u) >> 8u);
				return float(bits) * 2.3283064365386963e-10; // / 0x100000000
			}

			// Hammersley sequence
			vec2 hammersley(uint i, uint N) {
				return vec2(float(i) / float(N), radicalInverse_VdC(i));
			}

			// GGX VNDF importance sampling (Eric Heitz 2018)
			// "Sampling the GGX Distribution of Visible Normals"
			// https://jcgt.org/published/0007/04/01/
			vec3 importanceSampleGGX_VNDF(vec2 Xi, vec3 V, float roughness) {
				float alpha = roughness * roughness;

				// Section 3.2: Transform view direction to hemisphere configuration
				vec3 Vh = normalize(vec3(alpha * V.x, alpha * V.y, V.z));

				// Section 4.1: Orthonormal basis
				float lensq = Vh.x * Vh.x + Vh.y * Vh.y;
				vec3 T1 = lensq > 0.0 ? vec3(-Vh.y, Vh.x, 0.0) / sqrt(lensq) : vec3(1.0, 0.0, 0.0);
				vec3 T2 = cross(Vh, T1);

				// Section 4.2: Parameterization of projected area
				float r = sqrt(Xi.x);
				float phi = 2.0 * PI * Xi.y;
				float t1 = r * cos(phi);
				float t2 = r * sin(phi);
				float s = 0.5 * (1.0 + Vh.z);
				t2 = (1.0 - s) * sqrt(1.0 - t1 * t1) + s * t2;

				// Section 4.3: Reprojection onto hemisphere
				vec3 Nh = t1 * T1 + t2 * T2 + sqrt(max(0.0, 1.0 - t1 * t1 - t2 * t2)) * Vh;

				// Section 3.4: Transform back to ellipsoid configuration
				return normalize(vec3(alpha * Nh.x, alpha * Nh.y, max(0.0, Nh.z)));
			}

			void main() {
				vec3 N = normalize(vOutputDirection);
				vec3 V = N; // Assume view direction equals normal for pre-filtering

				vec3 prefilteredColor = vec3(0.0);
				float totalWeight = 0.0;

				// For very low roughness, just sample the environment directly
				if (roughness < 0.001) {
					gl_FragColor = vec4(bilinearCubeUV(envMap, N, mipInt), 1.0);
					return;
				}

				// Tangent space basis for VNDF sampling
				vec3 up = abs(N.z) < 0.999 ? vec3(0.0, 0.0, 1.0) : vec3(1.0, 0.0, 0.0);
				vec3 tangent = normalize(cross(up, N));
				vec3 bitangent = cross(N, tangent);

				for(uint i = 0u; i < uint(GGX_SAMPLES); i++) {
					vec2 Xi = hammersley(i, uint(GGX_SAMPLES));

					// For PMREM, V = N, so in tangent space V is always (0, 0, 1)
					vec3 H_tangent = importanceSampleGGX_VNDF(Xi, vec3(0.0, 0.0, 1.0), roughness);

					// Transform H back to world space
					vec3 H = normalize(tangent * H_tangent.x + bitangent * H_tangent.y + N * H_tangent.z);
					vec3 L = normalize(2.0 * dot(V, H) * H - V);

					float NdotL = max(dot(N, L), 0.0);

					if(NdotL > 0.0) {
						// Sample environment at fixed mip level
						// VNDF importance sampling handles the distribution filtering
						vec3 sampleColor = bilinearCubeUV(envMap, L, mipInt);

						// Weight by NdotL for the split-sum approximation
						// VNDF PDF naturally accounts for the visible microfacet distribution
						prefilteredColor += sampleColor * NdotL;
						totalWeight += NdotL;
					}
				}

				if (totalWeight > 0.0) {
					prefilteredColor = prefilteredColor / totalWeight;
				}

				gl_FragColor = vec4(prefilteredColor, 1.0);
			}
		`,blending:Ro,depthTest:!1,depthWrite:!1})}function D8(i,e,t){const n=new Float32Array(Fh),a=new ee(0,1,0);return new ja({name:"SphericalGaussianBlur",defines:{n:Fh,CUBEUV_TEXEL_WIDTH:1/e,CUBEUV_TEXEL_HEIGHT:1/t,CUBEUV_MAX_MIP:`${i}.0`},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:n},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:a}},vertexShader:Xb(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;
			uniform int samples;
			uniform float weights[ n ];
			uniform bool latitudinal;
			uniform float dTheta;
			uniform float mipInt;
			uniform vec3 poleAxis;

			#define ENVMAP_TYPE_CUBE_UV
			#include <cube_uv_reflection_fragment>

			vec3 getSample( float theta, vec3 axis ) {

				float cosTheta = cos( theta );
				// Rodrigues' axis-angle rotation
				vec3 sampleDirection = vOutputDirection * cosTheta
					+ cross( axis, vOutputDirection ) * sin( theta )
					+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );

				return bilinearCubeUV( envMap, sampleDirection, mipInt );

			}

			void main() {

				vec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );

				if ( all( equal( axis, vec3( 0.0 ) ) ) ) {

					axis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );

				}

				axis = normalize( axis );

				gl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );
				gl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );

				for ( int i = 1; i < n; i++ ) {

					if ( i >= samples ) {

						break;

					}

					float theta = dTheta * float( i );
					gl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );
					gl_FragColor.rgb += weights[ i ] * getSample( theta, axis );

				}

			}
		`,blending:Ro,depthTest:!1,depthWrite:!1})}function _C(){return new ja({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null}},vertexShader:Xb(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;

			#include <common>

			void main() {

				vec3 outputDirection = normalize( vOutputDirection );
				vec2 uv = equirectUv( outputDirection );

				gl_FragColor = vec4( texture2D ( envMap, uv ).rgb, 1.0 );

			}
		`,blending:Ro,depthTest:!1,depthWrite:!1})}function bC(){return new ja({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},flipEnvMap:{value:-1}},vertexShader:Xb(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			uniform float flipEnvMap;

			varying vec3 vOutputDirection;

			uniform samplerCube envMap;

			void main() {

				gl_FragColor = textureCube( envMap, vec3( flipEnvMap * vOutputDirection.x, vOutputDirection.yz ) );

			}
		`,blending:Ro,depthTest:!1,depthWrite:!1})}function Xb(){return`

		precision mediump float;
		precision mediump int;

		attribute float faceIndex;

		varying vec3 vOutputDirection;

		// RH coordinate system; PMREM face-indexing convention
		vec3 getDirection( vec2 uv, float face ) {

			uv = 2.0 * uv - 1.0;

			vec3 direction = vec3( uv, 1.0 );

			if ( face == 0.0 ) {

				direction = direction.zyx; // ( 1, v, u ) pos x

			} else if ( face == 1.0 ) {

				direction = direction.xzy;
				direction.xz *= -1.0; // ( -u, 1, -v ) pos y

			} else if ( face == 2.0 ) {

				direction.x *= -1.0; // ( -u, v, 1 ) pos z

			} else if ( face == 3.0 ) {

				direction = direction.zyx;
				direction.xz *= -1.0; // ( -1, v, -u ) neg x

			} else if ( face == 4.0 ) {

				direction = direction.xzy;
				direction.xy *= -1.0; // ( -u, -1, v ) neg y

			} else if ( face == 5.0 ) {

				direction.z *= -1.0; // ( u, v, -1 ) neg z

			}

			return direction;

		}

		void main() {

			vOutputDirection = getDirection( uv, faceIndex );
			gl_Position = vec4( position, 1.0 );

		}
	`}function U8(i){let e=new WeakMap,t=null;function n(u){if(u&&u.isTexture){const d=u.mapping,p=d===ip||d===Ug,g=d===No||d===yu;if(p||g){let y=e.get(u);const _=y!==void 0?y.texture.pmremVersion:0;if(u.isRenderTargetTexture&&u.pmremVersion!==_)return t===null&&(t=new dE(i)),y=p?t.fromEquirectangular(u,y):t.fromCubemap(u,y),y.texture.pmremVersion=u.pmremVersion,e.set(u,y),y.texture;if(y!==void 0)return y.texture;{const b=u.image;return p&&b&&b.height>0||g&&b&&a(b)?(t===null&&(t=new dE(i)),y=p?t.fromEquirectangular(u):t.fromCubemap(u),y.texture.pmremVersion=u.pmremVersion,e.set(u,y),u.addEventListener("dispose",s),y.texture):null}}}return u}function a(u){let d=0;const p=6;for(let g=0;g<p;g++)u[g]!==void 0&&d++;return d===p}function s(u){const d=u.target;d.removeEventListener("dispose",s);const p=e.get(d);p!==void 0&&(e.delete(d),p.dispose())}function l(){e=new WeakMap,t!==null&&(t.dispose(),t=null)}return{get:n,dispose:l}}function L8(i){const e={};function t(n){if(e[n]!==void 0)return e[n];const a=i.getExtension(n);return e[n]=a,a}return{has:function(n){return t(n)!==null},init:function(){t("EXT_color_buffer_float"),t("WEBGL_clip_cull_distance"),t("OES_texture_float_linear"),t("EXT_color_buffer_half_float"),t("WEBGL_multisampled_render_to_texture"),t("WEBGL_render_shared_exponent")},get:function(n){const a=t(n);return a===null&&op("WebGLRenderer: "+n+" extension not supported."),a}}}function I8(i,e,t,n){const a={},s=new WeakMap;function l(y){const _=y.target;_.index!==null&&e.remove(_.index);for(const x in _.attributes)e.remove(_.attributes[x]);_.removeEventListener("dispose",l),delete a[_.id];const b=s.get(_);b&&(e.remove(b),s.delete(_)),n.releaseStatesOfGeometry(_),_.isInstancedBufferGeometry===!0&&delete _._maxInstanceCount,t.memory.geometries--}function u(y,_){return a[_.id]===!0||(_.addEventListener("dispose",l),a[_.id]=!0,t.memory.geometries++),_}function d(y){const _=y.attributes;for(const b in _)e.update(_[b],i.ARRAY_BUFFER)}function p(y){const _=[],b=y.index,x=y.attributes.position;let T=0;if(b!==null){const C=b.array;T=b.version;for(let N=0,O=C.length;N<O;N+=3){const P=C[N+0],U=C[N+1],z=C[N+2];_.push(P,U,U,z,z,P)}}else if(x!==void 0){const C=x.array;T=x.version;for(let N=0,O=C.length/3-1;N<O;N+=3){const P=N+0,U=N+1,z=N+2;_.push(P,U,U,z,z,P)}}else return;const w=new(SN(_)?JE:KE)(_,1);w.version=T;const S=s.get(y);S&&e.remove(S),s.set(y,w)}function g(y){const _=s.get(y);if(_){const b=y.index;b!==null&&_.version<b.version&&p(y)}else p(y);return s.get(y)}return{get:u,update:d,getWireframeAttribute:g}}function P8(i,e,t){let n;function a(_){n=_}let s,l;function u(_){s=_.type,l=_.bytesPerElement}function d(_,b){i.drawElements(n,b,s,_*l),t.update(b,n,1)}function p(_,b,x){x!==0&&(i.drawElementsInstanced(n,b,s,_*l,x),t.update(b,n,x))}function g(_,b,x){if(x===0)return;e.get("WEBGL_multi_draw").multiDrawElementsWEBGL(n,b,0,s,_,0,x);let w=0;for(let S=0;S<x;S++)w+=b[S];t.update(w,n,1)}function y(_,b,x,T){if(x===0)return;const w=e.get("WEBGL_multi_draw");if(w===null)for(let S=0;S<_.length;S++)p(_[S]/l,b[S],T[S]);else{w.multiDrawElementsInstancedWEBGL(n,b,0,s,_,0,T,0,x);let S=0;for(let C=0;C<x;C++)S+=b[C]*T[C];t.update(S,n,1)}}this.setMode=a,this.setIndex=u,this.render=d,this.renderInstances=p,this.renderMultiDraw=g,this.renderMultiDrawInstances=y}function z8(i){const e={geometries:0,textures:0},t={frame:0,calls:0,triangles:0,points:0,lines:0};function n(s,l,u){switch(t.calls++,l){case i.TRIANGLES:t.triangles+=u*(s/3);break;case i.LINES:t.lines+=u*(s/2);break;case i.LINE_STRIP:t.lines+=u*(s-1);break;case i.LINE_LOOP:t.lines+=u*s;break;case i.POINTS:t.points+=u*s;break;default:Qt("WebGLInfo: Unknown draw mode:",l);break}}function a(){t.calls=0,t.triangles=0,t.points=0,t.lines=0}return{memory:e,render:t,programs:null,autoReset:!0,reset:a,update:n}}function B8(i,e,t){const n=new WeakMap,a=new yi;function s(l,u,d){const p=l.morphTargetInfluences,g=u.morphAttributes.position||u.morphAttributes.normal||u.morphAttributes.color,y=g!==void 0?g.length:0;let _=n.get(u);if(_===void 0||_.count!==y){let b=function(){H.dispose(),n.delete(u),u.removeEventListener("dispose",b)};_!==void 0&&_.texture.dispose();const x=u.morphAttributes.position!==void 0,T=u.morphAttributes.normal!==void 0,w=u.morphAttributes.color!==void 0,S=u.morphAttributes.position||[],C=u.morphAttributes.normal||[],N=u.morphAttributes.color||[];let O=0;x===!0&&(O=1),T===!0&&(O=2),w===!0&&(O=3);let P=u.attributes.position.count*O,U=1;P>e.maxTextureSize&&(U=Math.ceil(P/e.maxTextureSize),P=e.maxTextureSize);const z=new Float32Array(P*U*4*y),H=new bb(z,P,U,y);H.type=Di,H.needsUpdate=!0;const D=O*4;for(let L=0;L<y;L++){const j=S[L],W=C[L],X=N[L],K=P*U*4*L;for(let le=0;le<j.count;le++){const k=le*D;x===!0&&(a.fromBufferAttribute(j,le),z[K+k+0]=a.x,z[K+k+1]=a.y,z[K+k+2]=a.z,z[K+k+3]=0),T===!0&&(a.fromBufferAttribute(W,le),z[K+k+4]=a.x,z[K+k+5]=a.y,z[K+k+6]=a.z,z[K+k+7]=0),w===!0&&(a.fromBufferAttribute(X,le),z[K+k+8]=a.x,z[K+k+9]=a.y,z[K+k+10]=a.z,z[K+k+11]=X.itemSize===4?a.w:1)}}_={count:y,texture:H,size:new Ke(P,U)},n.set(u,_),u.addEventListener("dispose",b)}if(l.isInstancedMesh===!0&&l.morphTexture!==null)d.getUniforms().setValue(i,"morphTexture",l.morphTexture,t);else{let b=0;for(let T=0;T<p.length;T++)b+=p[T];const x=u.morphTargetsRelative?1:1-b;d.getUniforms().setValue(i,"morphTargetBaseInfluence",x),d.getUniforms().setValue(i,"morphTargetInfluences",p)}d.getUniforms().setValue(i,"morphTargetsTexture",_.texture,t),d.getUniforms().setValue(i,"morphTargetsTextureSize",_.size)}return{update:s}}function F8(i,e,t,n){let a=new WeakMap;function s(d){const p=n.render.frame,g=d.geometry,y=e.get(d,g);if(a.get(y)!==p&&(e.update(y),a.set(y,p)),d.isInstancedMesh&&(d.hasEventListener("dispose",u)===!1&&d.addEventListener("dispose",u),a.get(d)!==p&&(t.update(d.instanceMatrix,i.ARRAY_BUFFER),d.instanceColor!==null&&t.update(d.instanceColor,i.ARRAY_BUFFER),a.set(d,p))),d.isSkinnedMesh){const _=d.skeleton;a.get(_)!==p&&(_.update(),a.set(_,p))}return y}function l(){a=new WeakMap}function u(d){const p=d.target;p.removeEventListener("dispose",u),t.remove(p.instanceMatrix),p.instanceColor!==null&&t.remove(p.instanceColor)}return{update:s,dispose:l}}const k8={[PE]:"LINEAR_TONE_MAPPING",[zE]:"REINHARD_TONE_MAPPING",[BE]:"CINEON_TONE_MAPPING",[ub]:"ACES_FILMIC_TONE_MAPPING",[kE]:"AGX_TONE_MAPPING",[HE]:"NEUTRAL_TONE_MAPPING",[FE]:"CUSTOM_TONE_MAPPING"};function H8(i,e,t,n,a){const s=new Ta(e,t,{type:i,depthBuffer:n,stencilBuffer:a}),l=new Ta(e,t,{type:ji,depthBuffer:!1,stencilBuffer:!1}),u=new mn;u.setAttribute("position",new Ft([-1,3,0,-1,-1,0,3,-1,0],3)),u.setAttribute("uv",new Ft([0,2,0,0,2,0],2));const d=new cM({uniforms:{tDiffuse:{value:null}},vertexShader:`
			precision highp float;

			uniform mat4 modelViewMatrix;
			uniform mat4 projectionMatrix;

			attribute vec3 position;
			attribute vec2 uv;

			varying vec2 vUv;

			void main() {
				vUv = uv;
				gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
			}`,fragmentShader:`
			precision highp float;

			uniform sampler2D tDiffuse;

			varying vec2 vUv;

			#include <tonemapping_pars_fragment>
			#include <colorspace_pars_fragment>

			void main() {
				gl_FragColor = texture2D( tDiffuse, vUv );

				#ifdef LINEAR_TONE_MAPPING
					gl_FragColor.rgb = LinearToneMapping( gl_FragColor.rgb );
				#elif defined( REINHARD_TONE_MAPPING )
					gl_FragColor.rgb = ReinhardToneMapping( gl_FragColor.rgb );
				#elif defined( CINEON_TONE_MAPPING )
					gl_FragColor.rgb = CineonToneMapping( gl_FragColor.rgb );
				#elif defined( ACES_FILMIC_TONE_MAPPING )
					gl_FragColor.rgb = ACESFilmicToneMapping( gl_FragColor.rgb );
				#elif defined( AGX_TONE_MAPPING )
					gl_FragColor.rgb = AgXToneMapping( gl_FragColor.rgb );
				#elif defined( NEUTRAL_TONE_MAPPING )
					gl_FragColor.rgb = NeutralToneMapping( gl_FragColor.rgb );
				#elif defined( CUSTOM_TONE_MAPPING )
					gl_FragColor.rgb = CustomToneMapping( gl_FragColor.rgb );
				#endif

				#ifdef SRGB_TRANSFER
					gl_FragColor = sRGBTransferOETF( gl_FragColor );
				#endif
			}`,depthTest:!1,depthWrite:!1}),p=new Ui(u,d),g=new bl(-1,1,1,-1,0,1);let y=null,_=null,b=!1,x,T=null,w=[],S=!1;this.setSize=function(C,N){s.setSize(C,N),l.setSize(C,N);for(let O=0;O<w.length;O++){const P=w[O];P.setSize&&P.setSize(C,N)}},this.setEffects=function(C){w=C,S=w.length>0&&w[0].isRenderPass===!0;const N=s.width,O=s.height;for(let P=0;P<w.length;P++){const U=w[P];U.setSize&&U.setSize(N,O)}},this.begin=function(C,N){if(b||C.toneMapping===qs&&w.length===0)return!1;if(T=N,N!==null){const O=N.width,P=N.height;(s.width!==O||s.height!==P)&&this.setSize(O,P)}return S===!1&&C.setRenderTarget(s),x=C.toneMapping,C.toneMapping=qs,!0},this.hasRenderPass=function(){return S},this.end=function(C,N){C.toneMapping=x,b=!0;let O=s,P=l;for(let U=0;U<w.length;U++){const z=w[U];if(z.enabled!==!1&&(z.render(C,P,O,N),z.needsSwap!==!1)){const H=O;O=P,P=H}}if(y!==C.outputColorSpace||_!==C.toneMapping){y=C.outputColorSpace,_=C.toneMapping,d.defines={},Pn.getTransfer(y)===ri&&(d.defines.SRGB_TRANSFER="");const U=k8[_];U&&(d.defines[U]=""),d.needsUpdate=!0}d.uniforms.tDiffuse.value=O.texture,C.setRenderTarget(T),C.render(p,g),T=null,b=!1},this.isCompositing=function(){return b},this.dispose=function(){s.dispose(),l.dispose(),u.dispose(),d.dispose()}}const MO=new hi,pE=new fp(1,1),wO=new bb,TO=new xb,AO=new av,xC=[],SC=[],EC=new Float32Array(16),MC=new Float32Array(9),wC=new Float32Array(4);function xp(i,e,t){const n=i[0];if(n<=0||n>0)return i;const a=e*t;let s=xC[a];if(s===void 0&&(s=new Float32Array(a),xC[a]=s),e!==0){n.toArray(s,0);for(let l=1,u=0;l!==e;++l)u+=t,i[l].toArray(s,u)}return s}function Aa(i,e){if(i.length!==e.length)return!1;for(let t=0,n=i.length;t<n;t++)if(i[t]!==e[t])return!1;return!0}function Ca(i,e){for(let t=0,n=e.length;t<n;t++)i[t]=e[t]}function Wb(i,e){let t=SC[e];t===void 0&&(t=new Int32Array(e),SC[e]=t);for(let n=0;n!==e;++n)t[n]=i.allocateTextureUnit();return t}function V8(i,e){const t=this.cache;t[0]!==e&&(i.uniform1f(this.addr,e),t[0]=e)}function j8(i,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(i.uniform2f(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(Aa(t,e))return;i.uniform2fv(this.addr,e),Ca(t,e)}}function G8(i,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(i.uniform3f(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else if(e.r!==void 0)(t[0]!==e.r||t[1]!==e.g||t[2]!==e.b)&&(i.uniform3f(this.addr,e.r,e.g,e.b),t[0]=e.r,t[1]=e.g,t[2]=e.b);else{if(Aa(t,e))return;i.uniform3fv(this.addr,e),Ca(t,e)}}function q8(i,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(i.uniform4f(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(Aa(t,e))return;i.uniform4fv(this.addr,e),Ca(t,e)}}function X8(i,e){const t=this.cache,n=e.elements;if(n===void 0){if(Aa(t,e))return;i.uniformMatrix2fv(this.addr,!1,e),Ca(t,e)}else{if(Aa(t,n))return;wC.set(n),i.uniformMatrix2fv(this.addr,!1,wC),Ca(t,n)}}function W8(i,e){const t=this.cache,n=e.elements;if(n===void 0){if(Aa(t,e))return;i.uniformMatrix3fv(this.addr,!1,e),Ca(t,e)}else{if(Aa(t,n))return;MC.set(n),i.uniformMatrix3fv(this.addr,!1,MC),Ca(t,n)}}function Y8(i,e){const t=this.cache,n=e.elements;if(n===void 0){if(Aa(t,e))return;i.uniformMatrix4fv(this.addr,!1,e),Ca(t,e)}else{if(Aa(t,n))return;EC.set(n),i.uniformMatrix4fv(this.addr,!1,EC),Ca(t,n)}}function Z8(i,e){const t=this.cache;t[0]!==e&&(i.uniform1i(this.addr,e),t[0]=e)}function K8(i,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(i.uniform2i(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(Aa(t,e))return;i.uniform2iv(this.addr,e),Ca(t,e)}}function J8(i,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(i.uniform3i(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else{if(Aa(t,e))return;i.uniform3iv(this.addr,e),Ca(t,e)}}function Q8(i,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(i.uniform4i(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(Aa(t,e))return;i.uniform4iv(this.addr,e),Ca(t,e)}}function $8(i,e){const t=this.cache;t[0]!==e&&(i.uniform1ui(this.addr,e),t[0]=e)}function eF(i,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(i.uniform2ui(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(Aa(t,e))return;i.uniform2uiv(this.addr,e),Ca(t,e)}}function tF(i,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(i.uniform3ui(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else{if(Aa(t,e))return;i.uniform3uiv(this.addr,e),Ca(t,e)}}function nF(i,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(i.uniform4ui(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(Aa(t,e))return;i.uniform4uiv(this.addr,e),Ca(t,e)}}function iF(i,e,t){const n=this.cache,a=t.allocateTextureUnit();n[0]!==a&&(i.uniform1i(this.addr,a),n[0]=a);let s;this.type===i.SAMPLER_2D_SHADOW?(pE.compareFunction=t.isReversedDepthBuffer()?_b:yb,s=pE):s=MO,t.setTexture2D(e||s,a)}function aF(i,e,t){const n=this.cache,a=t.allocateTextureUnit();n[0]!==a&&(i.uniform1i(this.addr,a),n[0]=a),t.setTexture3D(e||TO,a)}function rF(i,e,t){const n=this.cache,a=t.allocateTextureUnit();n[0]!==a&&(i.uniform1i(this.addr,a),n[0]=a),t.setTextureCube(e||AO,a)}function sF(i,e,t){const n=this.cache,a=t.allocateTextureUnit();n[0]!==a&&(i.uniform1i(this.addr,a),n[0]=a),t.setTexture2DArray(e||wO,a)}function oF(i){switch(i){case 5126:return V8;case 35664:return j8;case 35665:return G8;case 35666:return q8;case 35674:return X8;case 35675:return W8;case 35676:return Y8;case 5124:case 35670:return Z8;case 35667:case 35671:return K8;case 35668:case 35672:return J8;case 35669:case 35673:return Q8;case 5125:return $8;case 36294:return eF;case 36295:return tF;case 36296:return nF;case 35678:case 36198:case 36298:case 36306:case 35682:return iF;case 35679:case 36299:case 36307:return aF;case 35680:case 36300:case 36308:case 36293:return rF;case 36289:case 36303:case 36311:case 36292:return sF}}function lF(i,e){i.uniform1fv(this.addr,e)}function cF(i,e){const t=xp(e,this.size,2);i.uniform2fv(this.addr,t)}function uF(i,e){const t=xp(e,this.size,3);i.uniform3fv(this.addr,t)}function hF(i,e){const t=xp(e,this.size,4);i.uniform4fv(this.addr,t)}function fF(i,e){const t=xp(e,this.size,4);i.uniformMatrix2fv(this.addr,!1,t)}function dF(i,e){const t=xp(e,this.size,9);i.uniformMatrix3fv(this.addr,!1,t)}function pF(i,e){const t=xp(e,this.size,16);i.uniformMatrix4fv(this.addr,!1,t)}function mF(i,e){i.uniform1iv(this.addr,e)}function gF(i,e){i.uniform2iv(this.addr,e)}function vF(i,e){i.uniform3iv(this.addr,e)}function yF(i,e){i.uniform4iv(this.addr,e)}function _F(i,e){i.uniform1uiv(this.addr,e)}function bF(i,e){i.uniform2uiv(this.addr,e)}function xF(i,e){i.uniform3uiv(this.addr,e)}function SF(i,e){i.uniform4uiv(this.addr,e)}function EF(i,e,t){const n=this.cache,a=e.length,s=Wb(t,a);Aa(n,s)||(i.uniform1iv(this.addr,s),Ca(n,s));let l;this.type===i.SAMPLER_2D_SHADOW?l=pE:l=MO;for(let u=0;u!==a;++u)t.setTexture2D(e[u]||l,s[u])}function MF(i,e,t){const n=this.cache,a=e.length,s=Wb(t,a);Aa(n,s)||(i.uniform1iv(this.addr,s),Ca(n,s));for(let l=0;l!==a;++l)t.setTexture3D(e[l]||TO,s[l])}function wF(i,e,t){const n=this.cache,a=e.length,s=Wb(t,a);Aa(n,s)||(i.uniform1iv(this.addr,s),Ca(n,s));for(let l=0;l!==a;++l)t.setTextureCube(e[l]||AO,s[l])}function TF(i,e,t){const n=this.cache,a=e.length,s=Wb(t,a);Aa(n,s)||(i.uniform1iv(this.addr,s),Ca(n,s));for(let l=0;l!==a;++l)t.setTexture2DArray(e[l]||wO,s[l])}function AF(i){switch(i){case 5126:return lF;case 35664:return cF;case 35665:return uF;case 35666:return hF;case 35674:return fF;case 35675:return dF;case 35676:return pF;case 5124:case 35670:return mF;case 35667:case 35671:return gF;case 35668:case 35672:return vF;case 35669:case 35673:return yF;case 5125:return _F;case 36294:return bF;case 36295:return xF;case 36296:return SF;case 35678:case 36198:case 36298:case 36306:case 35682:return EF;case 35679:case 36299:case 36307:return MF;case 35680:case 36300:case 36308:case 36293:return wF;case 36289:case 36303:case 36311:case 36292:return TF}}class CF{constructor(e,t,n){this.id=e,this.addr=n,this.cache=[],this.type=t.type,this.setValue=oF(t.type)}}class RF{constructor(e,t,n){this.id=e,this.addr=n,this.cache=[],this.type=t.type,this.size=t.size,this.setValue=AF(t.type)}}class NF{constructor(e){this.id=e,this.seq=[],this.map={}}setValue(e,t,n){const a=this.seq;for(let s=0,l=a.length;s!==l;++s){const u=a[s];u.setValue(e,t[u.id],n)}}}const o1=/(\w+)(\])?(\[|\.)?/g;function TC(i,e){i.seq.push(e),i.map[e.id]=e}function OF(i,e,t){const n=i.name,a=n.length;for(o1.lastIndex=0;;){const s=o1.exec(n),l=o1.lastIndex;let u=s[1];const d=s[2]==="]",p=s[3];if(d&&(u=u|0),p===void 0||p==="["&&l+2===a){TC(t,p===void 0?new CF(u,i,e):new RF(u,i,e));break}else{let y=t.map[u];y===void 0&&(y=new NF(u),TC(t,y)),t=y}}}class Zy{constructor(e,t){this.seq=[],this.map={};const n=e.getProgramParameter(t,e.ACTIVE_UNIFORMS);for(let l=0;l<n;++l){const u=e.getActiveUniform(t,l),d=e.getUniformLocation(t,u.name);OF(u,d,this)}const a=[],s=[];for(const l of this.seq)l.type===e.SAMPLER_2D_SHADOW||l.type===e.SAMPLER_CUBE_SHADOW||l.type===e.SAMPLER_2D_ARRAY_SHADOW?a.push(l):s.push(l);a.length>0&&(this.seq=a.concat(s))}setValue(e,t,n,a){const s=this.map[t];s!==void 0&&s.setValue(e,n,a)}setOptional(e,t,n){const a=t[n];a!==void 0&&this.setValue(e,n,a)}static upload(e,t,n,a){for(let s=0,l=t.length;s!==l;++s){const u=t[s],d=n[u.id];d.needsUpdate!==!1&&u.setValue(e,d.value,a)}}static seqWithValue(e,t){const n=[];for(let a=0,s=e.length;a!==s;++a){const l=e[a];l.id in t&&n.push(l)}return n}}function AC(i,e,t){const n=i.createShader(e);return i.shaderSource(n,t),i.compileShader(n),n}const DF=37297;let UF=0;function LF(i,e){const t=i.split(`
`),n=[],a=Math.max(e-6,0),s=Math.min(e+6,t.length);for(let l=a;l<s;l++){const u=l+1;n.push(`${u===e?">":" "} ${u}: ${t[l]}`)}return n.join(`
`)}const CC=new Sn;function IF(i){Pn._getMatrix(CC,Pn.workingColorSpace,i);const e=`mat3( ${CC.elements.map(t=>t.toFixed(4))} )`;switch(Pn.getTransfer(i)){case Bg:return[e,"LinearTransferOETF"];case ri:return[e,"sRGBTransferOETF"];default:return Rt("WebGLProgram: Unsupported color space: ",i),[e,"LinearTransferOETF"]}}function RC(i,e,t){const n=i.getShaderParameter(e,i.COMPILE_STATUS),s=(i.getShaderInfoLog(e)||"").trim();if(n&&s==="")return"";const l=/ERROR: 0:(\d+)/.exec(s);if(l){const u=parseInt(l[1]);return t.toUpperCase()+`

`+s+`

`+LF(i.getShaderSource(e),u)}else return s}function PF(i,e){const t=IF(e);return[`vec4 ${i}( vec4 value ) {`,`	return ${t[1]}( vec4( value.rgb * ${t[0]}, value.a ) );`,"}"].join(`
`)}const zF={[PE]:"Linear",[zE]:"Reinhard",[BE]:"Cineon",[ub]:"ACESFilmic",[kE]:"AgX",[HE]:"Neutral",[FE]:"Custom"};function BF(i,e){const t=zF[e];return t===void 0?(Rt("WebGLProgram: Unsupported toneMapping:",e),"vec3 "+i+"( vec3 color ) { return LinearToneMapping( color ); }"):"vec3 "+i+"( vec3 color ) { return "+t+"ToneMapping( color ); }"}const Py=new ee;function FF(){Pn.getLuminanceCoefficients(Py);const i=Py.x.toFixed(4),e=Py.y.toFixed(4),t=Py.z.toFixed(4);return["float luminance( const in vec3 rgb ) {",`	const vec3 weights = vec3( ${i}, ${e}, ${t} );`,"	return dot( weights, rgb );","}"].join(`
`)}function kF(i){return[i.extensionClipCullDistance?"#extension GL_ANGLE_clip_cull_distance : require":"",i.extensionMultiDraw?"#extension GL_ANGLE_multi_draw : require":""].filter(vg).join(`
`)}function HF(i){const e=[];for(const t in i){const n=i[t];n!==!1&&e.push("#define "+t+" "+n)}return e.join(`
`)}function VF(i,e){const t={},n=i.getProgramParameter(e,i.ACTIVE_ATTRIBUTES);for(let a=0;a<n;a++){const s=i.getActiveAttrib(e,a),l=s.name;let u=1;s.type===i.FLOAT_MAT2&&(u=2),s.type===i.FLOAT_MAT3&&(u=3),s.type===i.FLOAT_MAT4&&(u=4),t[l]={type:s.type,location:i.getAttribLocation(e,l),locationSize:u}}return t}function vg(i){return i!==""}function NC(i,e){const t=e.numSpotLightShadows+e.numSpotLightMaps-e.numSpotLightShadowsWithMaps;return i.replace(/NUM_DIR_LIGHTS/g,e.numDirLights).replace(/NUM_SPOT_LIGHTS/g,e.numSpotLights).replace(/NUM_SPOT_LIGHT_MAPS/g,e.numSpotLightMaps).replace(/NUM_SPOT_LIGHT_COORDS/g,t).replace(/NUM_RECT_AREA_LIGHTS/g,e.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,e.numPointLights).replace(/NUM_HEMI_LIGHTS/g,e.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,e.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS/g,e.numSpotLightShadowsWithMaps).replace(/NUM_SPOT_LIGHT_SHADOWS/g,e.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,e.numPointLightShadows)}function OC(i,e){return i.replace(/NUM_CLIPPING_PLANES/g,e.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,e.numClippingPlanes-e.numClipIntersection)}const jF=/^[ \t]*#include +<([\w\d./]+)>/gm;function mE(i){return i.replace(jF,qF)}const GF=new Map;function qF(i,e){let t=An[e];if(t===void 0){const n=GF.get(e);if(n!==void 0)t=An[n],Rt('WebGLRenderer: Shader chunk "%s" has been deprecated. Use "%s" instead.',e,n);else throw new Error("Can not resolve #include <"+e+">")}return mE(t)}const XF=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function DC(i){return i.replace(XF,WF)}function WF(i,e,t,n){let a="";for(let s=parseInt(e);s<parseInt(t);s++)a+=n.replace(/\[\s*i\s*\]/g,"[ "+s+" ]").replace(/UNROLLED_LOOP_INDEX/g,s);return a}function UC(i){let e=`precision ${i.precision} float;
	precision ${i.precision} int;
	precision ${i.precision} sampler2D;
	precision ${i.precision} samplerCube;
	precision ${i.precision} sampler3D;
	precision ${i.precision} sampler2DArray;
	precision ${i.precision} sampler2DShadow;
	precision ${i.precision} samplerCubeShadow;
	precision ${i.precision} sampler2DArrayShadow;
	precision ${i.precision} isampler2D;
	precision ${i.precision} isampler3D;
	precision ${i.precision} isamplerCube;
	precision ${i.precision} isampler2DArray;
	precision ${i.precision} usampler2D;
	precision ${i.precision} usampler3D;
	precision ${i.precision} usamplerCube;
	precision ${i.precision} usampler2DArray;
	`;return i.precision==="highp"?e+=`
#define HIGH_PRECISION`:i.precision==="mediump"?e+=`
#define MEDIUM_PRECISION`:i.precision==="lowp"&&(e+=`
#define LOW_PRECISION`),e}const YF={[Jd]:"SHADOWMAP_TYPE_PCF",[Hh]:"SHADOWMAP_TYPE_VSM"};function ZF(i){return YF[i.shadowMapType]||"SHADOWMAP_TYPE_BASIC"}const KF={[No]:"ENVMAP_TYPE_CUBE",[yu]:"ENVMAP_TYPE_CUBE",[_p]:"ENVMAP_TYPE_CUBE_UV"};function JF(i){return i.envMap===!1?"ENVMAP_TYPE_CUBE":KF[i.envMapMode]||"ENVMAP_TYPE_CUBE"}const QF={[yu]:"ENVMAP_MODE_REFRACTION"};function $F(i){return i.envMap===!1?"ENVMAP_MODE_REFLECTION":QF[i.envMapMode]||"ENVMAP_MODE_REFLECTION"}const ek={[ev]:"ENVMAP_BLENDING_MULTIPLY",[lN]:"ENVMAP_BLENDING_MIX",[cN]:"ENVMAP_BLENDING_ADD"};function tk(i){return i.envMap===!1?"ENVMAP_BLENDING_NONE":ek[i.combine]||"ENVMAP_BLENDING_NONE"}function nk(i){const e=i.envMapCubeUVHeight;if(e===null)return null;const t=Math.log2(e)-2,n=1/e;return{texelWidth:1/(3*Math.max(Math.pow(2,t),112)),texelHeight:n,maxMip:t}}function ik(i,e,t,n){const a=i.getContext(),s=t.defines;let l=t.vertexShader,u=t.fragmentShader;const d=ZF(t),p=JF(t),g=$F(t),y=tk(t),_=nk(t),b=kF(t),x=HF(s),T=a.createProgram();let w,S,C=t.glslVersion?"#version "+t.glslVersion+`
`:"";t.isRawShaderMaterial?(w=["#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,x].filter(vg).join(`
`),w.length>0&&(w+=`
`),S=["#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,x].filter(vg).join(`
`),S.length>0&&(S+=`
`)):(w=[UC(t),"#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,x,t.extensionClipCullDistance?"#define USE_CLIP_DISTANCE":"",t.batching?"#define USE_BATCHING":"",t.batchingColor?"#define USE_BATCHING_COLOR":"",t.instancing?"#define USE_INSTANCING":"",t.instancingColor?"#define USE_INSTANCING_COLOR":"",t.instancingMorph?"#define USE_INSTANCING_MORPH":"",t.useFog&&t.fog?"#define USE_FOG":"",t.useFog&&t.fogExp2?"#define FOG_EXP2":"",t.map?"#define USE_MAP":"",t.envMap?"#define USE_ENVMAP":"",t.envMap?"#define "+g:"",t.lightMap?"#define USE_LIGHTMAP":"",t.aoMap?"#define USE_AOMAP":"",t.bumpMap?"#define USE_BUMPMAP":"",t.normalMap?"#define USE_NORMALMAP":"",t.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",t.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",t.displacementMap?"#define USE_DISPLACEMENTMAP":"",t.emissiveMap?"#define USE_EMISSIVEMAP":"",t.anisotropy?"#define USE_ANISOTROPY":"",t.anisotropyMap?"#define USE_ANISOTROPYMAP":"",t.clearcoatMap?"#define USE_CLEARCOATMAP":"",t.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",t.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",t.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",t.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",t.specularMap?"#define USE_SPECULARMAP":"",t.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",t.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",t.roughnessMap?"#define USE_ROUGHNESSMAP":"",t.metalnessMap?"#define USE_METALNESSMAP":"",t.alphaMap?"#define USE_ALPHAMAP":"",t.alphaHash?"#define USE_ALPHAHASH":"",t.transmission?"#define USE_TRANSMISSION":"",t.transmissionMap?"#define USE_TRANSMISSIONMAP":"",t.thicknessMap?"#define USE_THICKNESSMAP":"",t.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",t.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",t.mapUv?"#define MAP_UV "+t.mapUv:"",t.alphaMapUv?"#define ALPHAMAP_UV "+t.alphaMapUv:"",t.lightMapUv?"#define LIGHTMAP_UV "+t.lightMapUv:"",t.aoMapUv?"#define AOMAP_UV "+t.aoMapUv:"",t.emissiveMapUv?"#define EMISSIVEMAP_UV "+t.emissiveMapUv:"",t.bumpMapUv?"#define BUMPMAP_UV "+t.bumpMapUv:"",t.normalMapUv?"#define NORMALMAP_UV "+t.normalMapUv:"",t.displacementMapUv?"#define DISPLACEMENTMAP_UV "+t.displacementMapUv:"",t.metalnessMapUv?"#define METALNESSMAP_UV "+t.metalnessMapUv:"",t.roughnessMapUv?"#define ROUGHNESSMAP_UV "+t.roughnessMapUv:"",t.anisotropyMapUv?"#define ANISOTROPYMAP_UV "+t.anisotropyMapUv:"",t.clearcoatMapUv?"#define CLEARCOATMAP_UV "+t.clearcoatMapUv:"",t.clearcoatNormalMapUv?"#define CLEARCOAT_NORMALMAP_UV "+t.clearcoatNormalMapUv:"",t.clearcoatRoughnessMapUv?"#define CLEARCOAT_ROUGHNESSMAP_UV "+t.clearcoatRoughnessMapUv:"",t.iridescenceMapUv?"#define IRIDESCENCEMAP_UV "+t.iridescenceMapUv:"",t.iridescenceThicknessMapUv?"#define IRIDESCENCE_THICKNESSMAP_UV "+t.iridescenceThicknessMapUv:"",t.sheenColorMapUv?"#define SHEEN_COLORMAP_UV "+t.sheenColorMapUv:"",t.sheenRoughnessMapUv?"#define SHEEN_ROUGHNESSMAP_UV "+t.sheenRoughnessMapUv:"",t.specularMapUv?"#define SPECULARMAP_UV "+t.specularMapUv:"",t.specularColorMapUv?"#define SPECULAR_COLORMAP_UV "+t.specularColorMapUv:"",t.specularIntensityMapUv?"#define SPECULAR_INTENSITYMAP_UV "+t.specularIntensityMapUv:"",t.transmissionMapUv?"#define TRANSMISSIONMAP_UV "+t.transmissionMapUv:"",t.thicknessMapUv?"#define THICKNESSMAP_UV "+t.thicknessMapUv:"",t.vertexTangents&&t.flatShading===!1?"#define USE_TANGENT":"",t.vertexColors?"#define USE_COLOR":"",t.vertexAlphas?"#define USE_COLOR_ALPHA":"",t.vertexUv1s?"#define USE_UV1":"",t.vertexUv2s?"#define USE_UV2":"",t.vertexUv3s?"#define USE_UV3":"",t.pointsUvs?"#define USE_POINTS_UV":"",t.flatShading?"#define FLAT_SHADED":"",t.skinning?"#define USE_SKINNING":"",t.morphTargets?"#define USE_MORPHTARGETS":"",t.morphNormals&&t.flatShading===!1?"#define USE_MORPHNORMALS":"",t.morphColors?"#define USE_MORPHCOLORS":"",t.morphTargetsCount>0?"#define MORPHTARGETS_TEXTURE_STRIDE "+t.morphTextureStride:"",t.morphTargetsCount>0?"#define MORPHTARGETS_COUNT "+t.morphTargetsCount:"",t.doubleSided?"#define DOUBLE_SIDED":"",t.flipSided?"#define FLIP_SIDED":"",t.shadowMapEnabled?"#define USE_SHADOWMAP":"",t.shadowMapEnabled?"#define "+d:"",t.sizeAttenuation?"#define USE_SIZEATTENUATION":"",t.numLightProbes>0?"#define USE_LIGHT_PROBES":"",t.logarithmicDepthBuffer?"#define USE_LOGARITHMIC_DEPTH_BUFFER":"",t.reversedDepthBuffer?"#define USE_REVERSED_DEPTH_BUFFER":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","	attribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","	attribute vec3 instanceColor;","#endif","#ifdef USE_INSTANCING_MORPH","	uniform sampler2D morphTexture;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_UV1","	attribute vec2 uv1;","#endif","#ifdef USE_UV2","	attribute vec2 uv2;","#endif","#ifdef USE_UV3","	attribute vec2 uv3;","#endif","#ifdef USE_TANGENT","	attribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","	attribute vec4 color;","#elif defined( USE_COLOR )","	attribute vec3 color;","#endif","#ifdef USE_SKINNING","	attribute vec4 skinIndex;","	attribute vec4 skinWeight;","#endif",`
`].filter(vg).join(`
`),S=[UC(t),"#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,x,t.useFog&&t.fog?"#define USE_FOG":"",t.useFog&&t.fogExp2?"#define FOG_EXP2":"",t.alphaToCoverage?"#define ALPHA_TO_COVERAGE":"",t.map?"#define USE_MAP":"",t.matcap?"#define USE_MATCAP":"",t.envMap?"#define USE_ENVMAP":"",t.envMap?"#define "+p:"",t.envMap?"#define "+g:"",t.envMap?"#define "+y:"",_?"#define CUBEUV_TEXEL_WIDTH "+_.texelWidth:"",_?"#define CUBEUV_TEXEL_HEIGHT "+_.texelHeight:"",_?"#define CUBEUV_MAX_MIP "+_.maxMip+".0":"",t.lightMap?"#define USE_LIGHTMAP":"",t.aoMap?"#define USE_AOMAP":"",t.bumpMap?"#define USE_BUMPMAP":"",t.normalMap?"#define USE_NORMALMAP":"",t.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",t.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",t.emissiveMap?"#define USE_EMISSIVEMAP":"",t.anisotropy?"#define USE_ANISOTROPY":"",t.anisotropyMap?"#define USE_ANISOTROPYMAP":"",t.clearcoat?"#define USE_CLEARCOAT":"",t.clearcoatMap?"#define USE_CLEARCOATMAP":"",t.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",t.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",t.dispersion?"#define USE_DISPERSION":"",t.iridescence?"#define USE_IRIDESCENCE":"",t.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",t.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",t.specularMap?"#define USE_SPECULARMAP":"",t.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",t.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",t.roughnessMap?"#define USE_ROUGHNESSMAP":"",t.metalnessMap?"#define USE_METALNESSMAP":"",t.alphaMap?"#define USE_ALPHAMAP":"",t.alphaTest?"#define USE_ALPHATEST":"",t.alphaHash?"#define USE_ALPHAHASH":"",t.sheen?"#define USE_SHEEN":"",t.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",t.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",t.transmission?"#define USE_TRANSMISSION":"",t.transmissionMap?"#define USE_TRANSMISSIONMAP":"",t.thicknessMap?"#define USE_THICKNESSMAP":"",t.vertexTangents&&t.flatShading===!1?"#define USE_TANGENT":"",t.vertexColors||t.instancingColor||t.batchingColor?"#define USE_COLOR":"",t.vertexAlphas?"#define USE_COLOR_ALPHA":"",t.vertexUv1s?"#define USE_UV1":"",t.vertexUv2s?"#define USE_UV2":"",t.vertexUv3s?"#define USE_UV3":"",t.pointsUvs?"#define USE_POINTS_UV":"",t.gradientMap?"#define USE_GRADIENTMAP":"",t.flatShading?"#define FLAT_SHADED":"",t.doubleSided?"#define DOUBLE_SIDED":"",t.flipSided?"#define FLIP_SIDED":"",t.shadowMapEnabled?"#define USE_SHADOWMAP":"",t.shadowMapEnabled?"#define "+d:"",t.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",t.numLightProbes>0?"#define USE_LIGHT_PROBES":"",t.decodeVideoTexture?"#define DECODE_VIDEO_TEXTURE":"",t.decodeVideoTextureEmissive?"#define DECODE_VIDEO_TEXTURE_EMISSIVE":"",t.logarithmicDepthBuffer?"#define USE_LOGARITHMIC_DEPTH_BUFFER":"",t.reversedDepthBuffer?"#define USE_REVERSED_DEPTH_BUFFER":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",t.toneMapping!==qs?"#define TONE_MAPPING":"",t.toneMapping!==qs?An.tonemapping_pars_fragment:"",t.toneMapping!==qs?BF("toneMapping",t.toneMapping):"",t.dithering?"#define DITHERING":"",t.opaque?"#define OPAQUE":"",An.colorspace_pars_fragment,PF("linearToOutputTexel",t.outputColorSpace),FF(),t.useDepthPacking?"#define DEPTH_PACKING "+t.depthPacking:"",`
`].filter(vg).join(`
`)),l=mE(l),l=NC(l,t),l=OC(l,t),u=mE(u),u=NC(u,t),u=OC(u,t),l=DC(l),u=DC(u),t.isRawShaderMaterial!==!0&&(C=`#version 300 es
`,w=[b,"#define attribute in","#define varying out","#define texture2D texture"].join(`
`)+`
`+w,S=["#define varying in",t.glslVersion===aE?"":"layout(location = 0) out highp vec4 pc_fragColor;",t.glslVersion===aE?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join(`
`)+`
`+S);const N=C+w+l,O=C+S+u,P=AC(a,a.VERTEX_SHADER,N),U=AC(a,a.FRAGMENT_SHADER,O);a.attachShader(T,P),a.attachShader(T,U),t.index0AttributeName!==void 0?a.bindAttribLocation(T,0,t.index0AttributeName):t.morphTargets===!0&&a.bindAttribLocation(T,0,"position"),a.linkProgram(T);function z(j){if(i.debug.checkShaderErrors){const W=a.getProgramInfoLog(T)||"",X=a.getShaderInfoLog(P)||"",K=a.getShaderInfoLog(U)||"",le=W.trim(),k=X.trim(),Z=K.trim();let ne=!0,pe=!0;if(a.getProgramParameter(T,a.LINK_STATUS)===!1)if(ne=!1,typeof i.debug.onShaderError=="function")i.debug.onShaderError(a,T,P,U);else{const ge=RC(a,P,"vertex"),J=RC(a,U,"fragment");Qt("THREE.WebGLProgram: Shader Error "+a.getError()+" - VALIDATE_STATUS "+a.getProgramParameter(T,a.VALIDATE_STATUS)+`

Material Name: `+j.name+`
Material Type: `+j.type+`

Program Info Log: `+le+`
`+ge+`
`+J)}else le!==""?Rt("WebGLProgram: Program Info Log:",le):(k===""||Z==="")&&(pe=!1);pe&&(j.diagnostics={runnable:ne,programLog:le,vertexShader:{log:k,prefix:w},fragmentShader:{log:Z,prefix:S}})}a.deleteShader(P),a.deleteShader(U),H=new Zy(a,T),D=VF(a,T)}let H;this.getUniforms=function(){return H===void 0&&z(this),H};let D;this.getAttributes=function(){return D===void 0&&z(this),D};let L=t.rendererExtensionParallelShaderCompile===!1;return this.isReady=function(){return L===!1&&(L=a.getProgramParameter(T,DF)),L},this.destroy=function(){n.releaseStatesOfProgram(this),a.deleteProgram(T),this.program=void 0},this.type=t.shaderType,this.name=t.shaderName,this.id=UF++,this.cacheKey=e,this.usedTimes=1,this.program=T,this.vertexShader=P,this.fragmentShader=U,this}let ak=0;class rk{constructor(){this.shaderCache=new Map,this.materialCache=new Map}update(e){const t=e.vertexShader,n=e.fragmentShader,a=this._getShaderStage(t),s=this._getShaderStage(n),l=this._getShaderCacheForMaterial(e);return l.has(a)===!1&&(l.add(a),a.usedTimes++),l.has(s)===!1&&(l.add(s),s.usedTimes++),this}remove(e){const t=this.materialCache.get(e);for(const n of t)n.usedTimes--,n.usedTimes===0&&this.shaderCache.delete(n.code);return this.materialCache.delete(e),this}getVertexShaderID(e){return this._getShaderStage(e.vertexShader).id}getFragmentShaderID(e){return this._getShaderStage(e.fragmentShader).id}dispose(){this.shaderCache.clear(),this.materialCache.clear()}_getShaderCacheForMaterial(e){const t=this.materialCache;let n=t.get(e);return n===void 0&&(n=new Set,t.set(e,n)),n}_getShaderStage(e){const t=this.shaderCache;let n=t.get(e);return n===void 0&&(n=new sk(e),t.set(e,n)),n}}class sk{constructor(e){this.id=ak++,this.code=e,this.usedTimes=0}}function ok(i,e,t,n,a,s,l){const u=new cp,d=new rk,p=new Set,g=[],y=new Map,_=a.logarithmicDepthBuffer;let b=a.precision;const x={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distance",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"};function T(D){return p.add(D),D===0?"uv":`uv${D}`}function w(D,L,j,W,X){const K=W.fog,le=X.geometry,k=D.isMeshStandardMaterial?W.environment:null,Z=(D.isMeshStandardMaterial?t:e).get(D.envMap||k),ne=Z&&Z.mapping===_p?Z.image.height:null,pe=x[D.type];D.precision!==null&&(b=a.getMaxPrecision(D.precision),b!==D.precision&&Rt("WebGLProgram.getParameters:",D.precision,"not supported, using",b,"instead."));const ge=le.morphAttributes.position||le.morphAttributes.normal||le.morphAttributes.color,J=ge!==void 0?ge.length:0;let ce=0;le.morphAttributes.position!==void 0&&(ce=1),le.morphAttributes.normal!==void 0&&(ce=2),le.morphAttributes.color!==void 0&&(ce=3);let Se,Le,nt,ve;if(pe){const dn=wo[pe];Se=dn.vertexShader,Le=dn.fragmentShader}else Se=D.vertexShader,Le=D.fragmentShader,d.update(D),nt=d.getVertexShaderID(D),ve=d.getFragmentShaderID(D);const Ce=i.getRenderTarget(),Je=i.state.buffers.depth.getReversed(),yt=X.isInstancedMesh===!0,St=X.isBatchedMesh===!0,$t=!!D.map,nn=!!D.matcap,Vt=!!Z,xe=!!D.aoMap,ze=!!D.lightMap,je=!!D.bumpMap,ot=!!D.normalMap,ie=!!D.displacementMap,zt=!!D.emissiveMap,mt=!!D.metalnessMap,Bt=!!D.roughnessMap,gt=D.anisotropy>0,te=D.clearcoat>0,B=D.dispersion>0,se=D.iridescence>0,Re=D.sheen>0,ke=D.transmission>0,Oe=gt&&!!D.anisotropyMap,Tt=te&&!!D.clearcoatMap,dt=te&&!!D.clearcoatNormalMap,Nt=te&&!!D.clearcoatRoughnessMap,jt=se&&!!D.iridescenceMap,Xe=se&&!!D.iridescenceThicknessMap,qe=Re&&!!D.sheenColorMap,Et=Re&&!!D.sheenRoughnessMap,ae=!!D.specularMap,Ee=!!D.specularColorMap,Qe=!!D.specularIntensityMap,ue=ke&&!!D.transmissionMap,Ae=ke&&!!D.thicknessMap,et=!!D.gradientMap,Mt=!!D.alphaMap,it=D.alphaTest>0,Ye=!!D.alphaHash,lt=!!D.extensions;let Gt=qs;D.toneMapped&&(Ce===null||Ce.isXRRenderTarget===!0)&&(Gt=i.toneMapping);const yn={shaderID:pe,shaderType:D.type,shaderName:D.name,vertexShader:Se,fragmentShader:Le,defines:D.defines,customVertexShaderID:nt,customFragmentShaderID:ve,isRawShaderMaterial:D.isRawShaderMaterial===!0,glslVersion:D.glslVersion,precision:b,batching:St,batchingColor:St&&X._colorsTexture!==null,instancing:yt,instancingColor:yt&&X.instanceColor!==null,instancingMorph:yt&&X.morphTexture!==null,outputColorSpace:Ce===null?i.outputColorSpace:Ce.isXRRenderTarget===!0?Ce.texture.colorSpace:Oo,alphaToCoverage:!!D.alphaToCoverage,map:$t,matcap:nn,envMap:Vt,envMapMode:Vt&&Z.mapping,envMapCubeUVHeight:ne,aoMap:xe,lightMap:ze,bumpMap:je,normalMap:ot,displacementMap:ie,emissiveMap:zt,normalMapObjectSpace:ot&&D.normalMapType===mN,normalMapTangentSpace:ot&&D.normalMapType===Su,metalnessMap:mt,roughnessMap:Bt,anisotropy:gt,anisotropyMap:Oe,clearcoat:te,clearcoatMap:Tt,clearcoatNormalMap:dt,clearcoatRoughnessMap:Nt,dispersion:B,iridescence:se,iridescenceMap:jt,iridescenceThicknessMap:Xe,sheen:Re,sheenColorMap:qe,sheenRoughnessMap:Et,specularMap:ae,specularColorMap:Ee,specularIntensityMap:Qe,transmission:ke,transmissionMap:ue,thicknessMap:Ae,gradientMap:et,opaque:D.transparent===!1&&D.blending===Wh&&D.alphaToCoverage===!1,alphaMap:Mt,alphaTest:it,alphaHash:Ye,combine:D.combine,mapUv:$t&&T(D.map.channel),aoMapUv:xe&&T(D.aoMap.channel),lightMapUv:ze&&T(D.lightMap.channel),bumpMapUv:je&&T(D.bumpMap.channel),normalMapUv:ot&&T(D.normalMap.channel),displacementMapUv:ie&&T(D.displacementMap.channel),emissiveMapUv:zt&&T(D.emissiveMap.channel),metalnessMapUv:mt&&T(D.metalnessMap.channel),roughnessMapUv:Bt&&T(D.roughnessMap.channel),anisotropyMapUv:Oe&&T(D.anisotropyMap.channel),clearcoatMapUv:Tt&&T(D.clearcoatMap.channel),clearcoatNormalMapUv:dt&&T(D.clearcoatNormalMap.channel),clearcoatRoughnessMapUv:Nt&&T(D.clearcoatRoughnessMap.channel),iridescenceMapUv:jt&&T(D.iridescenceMap.channel),iridescenceThicknessMapUv:Xe&&T(D.iridescenceThicknessMap.channel),sheenColorMapUv:qe&&T(D.sheenColorMap.channel),sheenRoughnessMapUv:Et&&T(D.sheenRoughnessMap.channel),specularMapUv:ae&&T(D.specularMap.channel),specularColorMapUv:Ee&&T(D.specularColorMap.channel),specularIntensityMapUv:Qe&&T(D.specularIntensityMap.channel),transmissionMapUv:ue&&T(D.transmissionMap.channel),thicknessMapUv:Ae&&T(D.thicknessMap.channel),alphaMapUv:Mt&&T(D.alphaMap.channel),vertexTangents:!!le.attributes.tangent&&(ot||gt),vertexColors:D.vertexColors,vertexAlphas:D.vertexColors===!0&&!!le.attributes.color&&le.attributes.color.itemSize===4,pointsUvs:X.isPoints===!0&&!!le.attributes.uv&&($t||Mt),fog:!!K,useFog:D.fog===!0,fogExp2:!!K&&K.isFogExp2,flatShading:D.flatShading===!0&&D.wireframe===!1,sizeAttenuation:D.sizeAttenuation===!0,logarithmicDepthBuffer:_,reversedDepthBuffer:Je,skinning:X.isSkinnedMesh===!0,morphTargets:le.morphAttributes.position!==void 0,morphNormals:le.morphAttributes.normal!==void 0,morphColors:le.morphAttributes.color!==void 0,morphTargetsCount:J,morphTextureStride:ce,numDirLights:L.directional.length,numPointLights:L.point.length,numSpotLights:L.spot.length,numSpotLightMaps:L.spotLightMap.length,numRectAreaLights:L.rectArea.length,numHemiLights:L.hemi.length,numDirLightShadows:L.directionalShadowMap.length,numPointLightShadows:L.pointShadowMap.length,numSpotLightShadows:L.spotShadowMap.length,numSpotLightShadowsWithMaps:L.numSpotLightShadowsWithMaps,numLightProbes:L.numLightProbes,numClippingPlanes:l.numPlanes,numClipIntersection:l.numIntersection,dithering:D.dithering,shadowMapEnabled:i.shadowMap.enabled&&j.length>0,shadowMapType:i.shadowMap.type,toneMapping:Gt,decodeVideoTexture:$t&&D.map.isVideoTexture===!0&&Pn.getTransfer(D.map.colorSpace)===ri,decodeVideoTextureEmissive:zt&&D.emissiveMap.isVideoTexture===!0&&Pn.getTransfer(D.emissiveMap.colorSpace)===ri,premultipliedAlpha:D.premultipliedAlpha,doubleSided:D.side===To,flipSided:D.side===jr,useDepthPacking:D.depthPacking>=0,depthPacking:D.depthPacking||0,index0AttributeName:D.index0AttributeName,extensionClipCullDistance:lt&&D.extensions.clipCullDistance===!0&&n.has("WEBGL_clip_cull_distance"),extensionMultiDraw:(lt&&D.extensions.multiDraw===!0||St)&&n.has("WEBGL_multi_draw"),rendererExtensionParallelShaderCompile:n.has("KHR_parallel_shader_compile"),customProgramCacheKey:D.customProgramCacheKey()};return yn.vertexUv1s=p.has(1),yn.vertexUv2s=p.has(2),yn.vertexUv3s=p.has(3),p.clear(),yn}function S(D){const L=[];if(D.shaderID?L.push(D.shaderID):(L.push(D.customVertexShaderID),L.push(D.customFragmentShaderID)),D.defines!==void 0)for(const j in D.defines)L.push(j),L.push(D.defines[j]);return D.isRawShaderMaterial===!1&&(C(L,D),N(L,D),L.push(i.outputColorSpace)),L.push(D.customProgramCacheKey),L.join()}function C(D,L){D.push(L.precision),D.push(L.outputColorSpace),D.push(L.envMapMode),D.push(L.envMapCubeUVHeight),D.push(L.mapUv),D.push(L.alphaMapUv),D.push(L.lightMapUv),D.push(L.aoMapUv),D.push(L.bumpMapUv),D.push(L.normalMapUv),D.push(L.displacementMapUv),D.push(L.emissiveMapUv),D.push(L.metalnessMapUv),D.push(L.roughnessMapUv),D.push(L.anisotropyMapUv),D.push(L.clearcoatMapUv),D.push(L.clearcoatNormalMapUv),D.push(L.clearcoatRoughnessMapUv),D.push(L.iridescenceMapUv),D.push(L.iridescenceThicknessMapUv),D.push(L.sheenColorMapUv),D.push(L.sheenRoughnessMapUv),D.push(L.specularMapUv),D.push(L.specularColorMapUv),D.push(L.specularIntensityMapUv),D.push(L.transmissionMapUv),D.push(L.thicknessMapUv),D.push(L.combine),D.push(L.fogExp2),D.push(L.sizeAttenuation),D.push(L.morphTargetsCount),D.push(L.morphAttributeCount),D.push(L.numDirLights),D.push(L.numPointLights),D.push(L.numSpotLights),D.push(L.numSpotLightMaps),D.push(L.numHemiLights),D.push(L.numRectAreaLights),D.push(L.numDirLightShadows),D.push(L.numPointLightShadows),D.push(L.numSpotLightShadows),D.push(L.numSpotLightShadowsWithMaps),D.push(L.numLightProbes),D.push(L.shadowMapType),D.push(L.toneMapping),D.push(L.numClippingPlanes),D.push(L.numClipIntersection),D.push(L.depthPacking)}function N(D,L){u.disableAll(),L.instancing&&u.enable(0),L.instancingColor&&u.enable(1),L.instancingMorph&&u.enable(2),L.matcap&&u.enable(3),L.envMap&&u.enable(4),L.normalMapObjectSpace&&u.enable(5),L.normalMapTangentSpace&&u.enable(6),L.clearcoat&&u.enable(7),L.iridescence&&u.enable(8),L.alphaTest&&u.enable(9),L.vertexColors&&u.enable(10),L.vertexAlphas&&u.enable(11),L.vertexUv1s&&u.enable(12),L.vertexUv2s&&u.enable(13),L.vertexUv3s&&u.enable(14),L.vertexTangents&&u.enable(15),L.anisotropy&&u.enable(16),L.alphaHash&&u.enable(17),L.batching&&u.enable(18),L.dispersion&&u.enable(19),L.batchingColor&&u.enable(20),L.gradientMap&&u.enable(21),D.push(u.mask),u.disableAll(),L.fog&&u.enable(0),L.useFog&&u.enable(1),L.flatShading&&u.enable(2),L.logarithmicDepthBuffer&&u.enable(3),L.reversedDepthBuffer&&u.enable(4),L.skinning&&u.enable(5),L.morphTargets&&u.enable(6),L.morphNormals&&u.enable(7),L.morphColors&&u.enable(8),L.premultipliedAlpha&&u.enable(9),L.shadowMapEnabled&&u.enable(10),L.doubleSided&&u.enable(11),L.flipSided&&u.enable(12),L.useDepthPacking&&u.enable(13),L.dithering&&u.enable(14),L.transmission&&u.enable(15),L.sheen&&u.enable(16),L.opaque&&u.enable(17),L.pointsUvs&&u.enable(18),L.decodeVideoTexture&&u.enable(19),L.decodeVideoTextureEmissive&&u.enable(20),L.alphaToCoverage&&u.enable(21),D.push(u.mask)}function O(D){const L=x[D.type];let j;if(L){const W=wo[L];j=QE.clone(W.uniforms)}else j=D.uniforms;return j}function P(D,L){let j=y.get(L);return j!==void 0?++j.usedTimes:(j=new ik(i,L,D,s),g.push(j),y.set(L,j)),j}function U(D){if(--D.usedTimes===0){const L=g.indexOf(D);g[L]=g[g.length-1],g.pop(),y.delete(D.cacheKey),D.destroy()}}function z(D){d.remove(D)}function H(){d.dispose()}return{getParameters:w,getProgramCacheKey:S,getUniforms:O,acquireProgram:P,releaseProgram:U,releaseShaderCache:z,programs:g,dispose:H}}function lk(){let i=new WeakMap;function e(l){return i.has(l)}function t(l){let u=i.get(l);return u===void 0&&(u={},i.set(l,u)),u}function n(l){i.delete(l)}function a(l,u,d){i.get(l)[u]=d}function s(){i=new WeakMap}return{has:e,get:t,remove:n,update:a,dispose:s}}function ck(i,e){return i.groupOrder!==e.groupOrder?i.groupOrder-e.groupOrder:i.renderOrder!==e.renderOrder?i.renderOrder-e.renderOrder:i.material.id!==e.material.id?i.material.id-e.material.id:i.z!==e.z?i.z-e.z:i.id-e.id}function LC(i,e){return i.groupOrder!==e.groupOrder?i.groupOrder-e.groupOrder:i.renderOrder!==e.renderOrder?i.renderOrder-e.renderOrder:i.z!==e.z?e.z-i.z:i.id-e.id}function IC(){const i=[];let e=0;const t=[],n=[],a=[];function s(){e=0,t.length=0,n.length=0,a.length=0}function l(y,_,b,x,T,w){let S=i[e];return S===void 0?(S={id:y.id,object:y,geometry:_,material:b,groupOrder:x,renderOrder:y.renderOrder,z:T,group:w},i[e]=S):(S.id=y.id,S.object=y,S.geometry=_,S.material=b,S.groupOrder=x,S.renderOrder=y.renderOrder,S.z=T,S.group=w),e++,S}function u(y,_,b,x,T,w){const S=l(y,_,b,x,T,w);b.transmission>0?n.push(S):b.transparent===!0?a.push(S):t.push(S)}function d(y,_,b,x,T,w){const S=l(y,_,b,x,T,w);b.transmission>0?n.unshift(S):b.transparent===!0?a.unshift(S):t.unshift(S)}function p(y,_){t.length>1&&t.sort(y||ck),n.length>1&&n.sort(_||LC),a.length>1&&a.sort(_||LC)}function g(){for(let y=e,_=i.length;y<_;y++){const b=i[y];if(b.id===null)break;b.id=null,b.object=null,b.geometry=null,b.material=null,b.group=null}}return{opaque:t,transmissive:n,transparent:a,init:s,push:u,unshift:d,finish:g,sort:p}}function uk(){let i=new WeakMap;function e(n,a){const s=i.get(n);let l;return s===void 0?(l=new IC,i.set(n,[l])):a>=s.length?(l=new IC,s.push(l)):l=s[a],l}function t(){i=new WeakMap}return{get:e,dispose:t}}function hk(){const i={};return{get:function(e){if(i[e.id]!==void 0)return i[e.id];let t;switch(e.type){case"DirectionalLight":t={direction:new ee,color:new Ut};break;case"SpotLight":t={position:new ee,direction:new ee,color:new Ut,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":t={position:new ee,color:new Ut,distance:0,decay:0};break;case"HemisphereLight":t={direction:new ee,skyColor:new Ut,groundColor:new Ut};break;case"RectAreaLight":t={color:new Ut,position:new ee,halfWidth:new ee,halfHeight:new ee};break}return i[e.id]=t,t}}}function fk(){const i={};return{get:function(e){if(i[e.id]!==void 0)return i[e.id];let t;switch(e.type){case"DirectionalLight":t={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Ke};break;case"SpotLight":t={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Ke};break;case"PointLight":t={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Ke,shadowCameraNear:1,shadowCameraFar:1e3};break}return i[e.id]=t,t}}}let dk=0;function pk(i,e){return(e.castShadow?2:0)-(i.castShadow?2:0)+(e.map?1:0)-(i.map?1:0)}function mk(i){const e=new hk,t=fk(),n={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1,numSpotMaps:-1,numLightProbes:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotLightMap:[],spotShadow:[],spotShadowMap:[],spotLightMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[],numSpotLightShadowsWithMaps:0,numLightProbes:0};for(let p=0;p<9;p++)n.probe.push(new ee);const a=new ee,s=new on,l=new on;function u(p){let g=0,y=0,_=0;for(let D=0;D<9;D++)n.probe[D].set(0,0,0);let b=0,x=0,T=0,w=0,S=0,C=0,N=0,O=0,P=0,U=0,z=0;p.sort(pk);for(let D=0,L=p.length;D<L;D++){const j=p[D],W=j.color,X=j.intensity,K=j.distance;let le=null;if(j.shadow&&j.shadow.map&&(j.shadow.map.texture.format===Jh?le=j.shadow.map.texture:le=j.shadow.map.depthTexture||j.shadow.map.texture),j.isAmbientLight)g+=W.r*X,y+=W.g*X,_+=W.b*X;else if(j.isLightProbe){for(let k=0;k<9;k++)n.probe[k].addScaledVector(j.sh.coefficients[k],X);z++}else if(j.isDirectionalLight){const k=e.get(j);if(k.color.copy(j.color).multiplyScalar(j.intensity),j.castShadow){const Z=j.shadow,ne=t.get(j);ne.shadowIntensity=Z.intensity,ne.shadowBias=Z.bias,ne.shadowNormalBias=Z.normalBias,ne.shadowRadius=Z.radius,ne.shadowMapSize=Z.mapSize,n.directionalShadow[b]=ne,n.directionalShadowMap[b]=le,n.directionalShadowMatrix[b]=j.shadow.matrix,C++}n.directional[b]=k,b++}else if(j.isSpotLight){const k=e.get(j);k.position.setFromMatrixPosition(j.matrixWorld),k.color.copy(W).multiplyScalar(X),k.distance=K,k.coneCos=Math.cos(j.angle),k.penumbraCos=Math.cos(j.angle*(1-j.penumbra)),k.decay=j.decay,n.spot[T]=k;const Z=j.shadow;if(j.map&&(n.spotLightMap[P]=j.map,P++,Z.updateMatrices(j),j.castShadow&&U++),n.spotLightMatrix[T]=Z.matrix,j.castShadow){const ne=t.get(j);ne.shadowIntensity=Z.intensity,ne.shadowBias=Z.bias,ne.shadowNormalBias=Z.normalBias,ne.shadowRadius=Z.radius,ne.shadowMapSize=Z.mapSize,n.spotShadow[T]=ne,n.spotShadowMap[T]=le,O++}T++}else if(j.isRectAreaLight){const k=e.get(j);k.color.copy(W).multiplyScalar(X),k.halfWidth.set(j.width*.5,0,0),k.halfHeight.set(0,j.height*.5,0),n.rectArea[w]=k,w++}else if(j.isPointLight){const k=e.get(j);if(k.color.copy(j.color).multiplyScalar(j.intensity),k.distance=j.distance,k.decay=j.decay,j.castShadow){const Z=j.shadow,ne=t.get(j);ne.shadowIntensity=Z.intensity,ne.shadowBias=Z.bias,ne.shadowNormalBias=Z.normalBias,ne.shadowRadius=Z.radius,ne.shadowMapSize=Z.mapSize,ne.shadowCameraNear=Z.camera.near,ne.shadowCameraFar=Z.camera.far,n.pointShadow[x]=ne,n.pointShadowMap[x]=le,n.pointShadowMatrix[x]=j.shadow.matrix,N++}n.point[x]=k,x++}else if(j.isHemisphereLight){const k=e.get(j);k.skyColor.copy(j.color).multiplyScalar(X),k.groundColor.copy(j.groundColor).multiplyScalar(X),n.hemi[S]=k,S++}}w>0&&(i.has("OES_texture_float_linear")===!0?(n.rectAreaLTC1=Dt.LTC_FLOAT_1,n.rectAreaLTC2=Dt.LTC_FLOAT_2):(n.rectAreaLTC1=Dt.LTC_HALF_1,n.rectAreaLTC2=Dt.LTC_HALF_2)),n.ambient[0]=g,n.ambient[1]=y,n.ambient[2]=_;const H=n.hash;(H.directionalLength!==b||H.pointLength!==x||H.spotLength!==T||H.rectAreaLength!==w||H.hemiLength!==S||H.numDirectionalShadows!==C||H.numPointShadows!==N||H.numSpotShadows!==O||H.numSpotMaps!==P||H.numLightProbes!==z)&&(n.directional.length=b,n.spot.length=T,n.rectArea.length=w,n.point.length=x,n.hemi.length=S,n.directionalShadow.length=C,n.directionalShadowMap.length=C,n.pointShadow.length=N,n.pointShadowMap.length=N,n.spotShadow.length=O,n.spotShadowMap.length=O,n.directionalShadowMatrix.length=C,n.pointShadowMatrix.length=N,n.spotLightMatrix.length=O+P-U,n.spotLightMap.length=P,n.numSpotLightShadowsWithMaps=U,n.numLightProbes=z,H.directionalLength=b,H.pointLength=x,H.spotLength=T,H.rectAreaLength=w,H.hemiLength=S,H.numDirectionalShadows=C,H.numPointShadows=N,H.numSpotShadows=O,H.numSpotMaps=P,H.numLightProbes=z,n.version=dk++)}function d(p,g){let y=0,_=0,b=0,x=0,T=0;const w=g.matrixWorldInverse;for(let S=0,C=p.length;S<C;S++){const N=p[S];if(N.isDirectionalLight){const O=n.directional[y];O.direction.setFromMatrixPosition(N.matrixWorld),a.setFromMatrixPosition(N.target.matrixWorld),O.direction.sub(a),O.direction.transformDirection(w),y++}else if(N.isSpotLight){const O=n.spot[b];O.position.setFromMatrixPosition(N.matrixWorld),O.position.applyMatrix4(w),O.direction.setFromMatrixPosition(N.matrixWorld),a.setFromMatrixPosition(N.target.matrixWorld),O.direction.sub(a),O.direction.transformDirection(w),b++}else if(N.isRectAreaLight){const O=n.rectArea[x];O.position.setFromMatrixPosition(N.matrixWorld),O.position.applyMatrix4(w),l.identity(),s.copy(N.matrixWorld),s.premultiply(w),l.extractRotation(s),O.halfWidth.set(N.width*.5,0,0),O.halfHeight.set(0,N.height*.5,0),O.halfWidth.applyMatrix4(l),O.halfHeight.applyMatrix4(l),x++}else if(N.isPointLight){const O=n.point[_];O.position.setFromMatrixPosition(N.matrixWorld),O.position.applyMatrix4(w),_++}else if(N.isHemisphereLight){const O=n.hemi[T];O.direction.setFromMatrixPosition(N.matrixWorld),O.direction.transformDirection(w),T++}}}return{setup:u,setupView:d,state:n}}function PC(i){const e=new mk(i),t=[],n=[];function a(g){p.camera=g,t.length=0,n.length=0}function s(g){t.push(g)}function l(g){n.push(g)}function u(){e.setup(t)}function d(g){e.setupView(t,g)}const p={lightsArray:t,shadowsArray:n,camera:null,lights:e,transmissionRenderTarget:{}};return{init:a,state:p,setupLights:u,setupLightsView:d,pushLight:s,pushShadow:l}}function gk(i){let e=new WeakMap;function t(a,s=0){const l=e.get(a);let u;return l===void 0?(u=new PC(i),e.set(a,[u])):s>=l.length?(u=new PC(i),l.push(u)):u=l[s],u}function n(){e=new WeakMap}return{get:t,dispose:n}}const vk=`void main() {
	gl_Position = vec4( position, 1.0 );
}`,yk=`uniform sampler2D shadow_pass;
uniform vec2 resolution;
uniform float radius;
void main() {
	const float samples = float( VSM_SAMPLES );
	float mean = 0.0;
	float squared_mean = 0.0;
	float uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );
	float uvStart = samples <= 1.0 ? 0.0 : - 1.0;
	for ( float i = 0.0; i < samples; i ++ ) {
		float uvOffset = uvStart + i * uvStride;
		#ifdef HORIZONTAL_PASS
			vec2 distribution = texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ).rg;
			mean += distribution.x;
			squared_mean += distribution.y * distribution.y + distribution.x * distribution.x;
		#else
			float depth = texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ).r;
			mean += depth;
			squared_mean += depth * depth;
		#endif
	}
	mean = mean / samples;
	squared_mean = squared_mean / samples;
	float std_dev = sqrt( max( 0.0, squared_mean - mean * mean ) );
	gl_FragColor = vec4( mean, std_dev, 0.0, 1.0 );
}`,_k=[new ee(1,0,0),new ee(-1,0,0),new ee(0,1,0),new ee(0,-1,0),new ee(0,0,1),new ee(0,0,-1)],bk=[new ee(0,-1,0),new ee(0,-1,0),new ee(0,0,1),new ee(0,0,-1),new ee(0,-1,0),new ee(0,-1,0)],zC=new on,cg=new ee,l1=new ee;function xk(i,e,t){let n=new bp;const a=new Ke,s=new Ke,l=new yi,u=new Vb,d=new fM,p={},g=t.maxTextureSize,y={[dc]:jr,[jr]:dc,[To]:To},_=new ja({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new Ke},radius:{value:4}},vertexShader:vk,fragmentShader:yk}),b=_.clone();b.defines.HORIZONTAL_PASS=1;const x=new mn;x.setAttribute("position",new ni(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));const T=new Ui(x,_),w=this;this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=Jd;let S=this.type;this.render=function(U,z,H){if(w.enabled===!1||w.autoUpdate===!1&&w.needsUpdate===!1||U.length===0)return;U.type===yg&&(Rt("WebGLShadowMap: PCFSoftShadowMap has been deprecated. Using PCFShadowMap instead."),U.type=Jd);const D=i.getRenderTarget(),L=i.getActiveCubeFace(),j=i.getActiveMipmapLevel(),W=i.state;W.setBlending(Ro),W.buffers.depth.getReversed()===!0?W.buffers.color.setClear(0,0,0,0):W.buffers.color.setClear(1,1,1,1),W.buffers.depth.setTest(!0),W.setScissorTest(!1);const X=S!==this.type;X&&z.traverse(function(K){K.material&&(Array.isArray(K.material)?K.material.forEach(le=>le.needsUpdate=!0):K.material.needsUpdate=!0)});for(let K=0,le=U.length;K<le;K++){const k=U[K],Z=k.shadow;if(Z===void 0){Rt("WebGLShadowMap:",k,"has no shadow.");continue}if(Z.autoUpdate===!1&&Z.needsUpdate===!1)continue;a.copy(Z.mapSize);const ne=Z.getFrameExtents();if(a.multiply(ne),s.copy(Z.mapSize),(a.x>g||a.y>g)&&(a.x>g&&(s.x=Math.floor(g/ne.x),a.x=s.x*ne.x,Z.mapSize.x=s.x),a.y>g&&(s.y=Math.floor(g/ne.y),a.y=s.y*ne.y,Z.mapSize.y=s.y)),Z.map===null||X===!0){if(Z.map!==null&&(Z.map.depthTexture!==null&&(Z.map.depthTexture.dispose(),Z.map.depthTexture=null),Z.map.dispose()),this.type===Hh){if(k.isPointLight){Rt("WebGLShadowMap: VSM shadow maps are not supported for PointLights. Use PCF or BasicShadowMap instead.");continue}Z.map=new Ta(a.x,a.y,{format:Jh,type:ji,minFilter:Vn,magFilter:Vn,generateMipmaps:!1}),Z.map.texture.name=k.name+".shadowMap",Z.map.depthTexture=new fp(a.x,a.y,Di),Z.map.depthTexture.name=k.name+".shadowMapDepth",Z.map.depthTexture.format=xl,Z.map.depthTexture.compareFunction=null,Z.map.depthTexture.minFilter=Vi,Z.map.depthTexture.magFilter=Vi}else{k.isPointLight?(Z.map=new Eb(a.x),Z.map.depthTexture=new BN(a.x,xs)):(Z.map=new Ta(a.x,a.y),Z.map.depthTexture=new fp(a.x,a.y,xs)),Z.map.depthTexture.name=k.name+".shadowMap",Z.map.depthTexture.format=xl;const ge=i.state.buffers.depth.getReversed();this.type===Jd?(Z.map.depthTexture.compareFunction=ge?_b:yb,Z.map.depthTexture.minFilter=Vn,Z.map.depthTexture.magFilter=Vn):(Z.map.depthTexture.compareFunction=null,Z.map.depthTexture.minFilter=Vi,Z.map.depthTexture.magFilter=Vi)}Z.camera.updateProjectionMatrix()}const pe=Z.map.isWebGLCubeRenderTarget?6:1;for(let ge=0;ge<pe;ge++){if(Z.map.isWebGLCubeRenderTarget)i.setRenderTarget(Z.map,ge),i.clear();else{ge===0&&(i.setRenderTarget(Z.map),i.clear());const J=Z.getViewport(ge);l.set(s.x*J.x,s.y*J.y,s.x*J.z,s.y*J.w),W.viewport(l)}if(k.isPointLight){const J=Z.camera,ce=Z.matrix,Se=k.distance||J.far;Se!==J.far&&(J.far=Se,J.updateProjectionMatrix()),cg.setFromMatrixPosition(k.matrixWorld),J.position.copy(cg),l1.copy(J.position),l1.add(_k[ge]),J.up.copy(bk[ge]),J.lookAt(l1),J.updateMatrixWorld(),ce.makeTranslation(-cg.x,-cg.y,-cg.z),zC.multiplyMatrices(J.projectionMatrix,J.matrixWorldInverse),Z._frustum.setFromProjectionMatrix(zC,J.coordinateSystem,J.reversedDepth)}else Z.updateMatrices(k);n=Z.getFrustum(),O(z,H,Z.camera,k,this.type)}Z.isPointLightShadow!==!0&&this.type===Hh&&C(Z,H),Z.needsUpdate=!1}S=this.type,w.needsUpdate=!1,i.setRenderTarget(D,L,j)};function C(U,z){const H=e.update(T);_.defines.VSM_SAMPLES!==U.blurSamples&&(_.defines.VSM_SAMPLES=U.blurSamples,b.defines.VSM_SAMPLES=U.blurSamples,_.needsUpdate=!0,b.needsUpdate=!0),U.mapPass===null&&(U.mapPass=new Ta(a.x,a.y,{format:Jh,type:ji})),_.uniforms.shadow_pass.value=U.map.depthTexture,_.uniforms.resolution.value=U.mapSize,_.uniforms.radius.value=U.radius,i.setRenderTarget(U.mapPass),i.clear(),i.renderBufferDirect(z,null,H,_,T,null),b.uniforms.shadow_pass.value=U.mapPass.texture,b.uniforms.resolution.value=U.mapSize,b.uniforms.radius.value=U.radius,i.setRenderTarget(U.map),i.clear(),i.renderBufferDirect(z,null,H,b,T,null)}function N(U,z,H,D){let L=null;const j=H.isPointLight===!0?U.customDistanceMaterial:U.customDepthMaterial;if(j!==void 0)L=j;else if(L=H.isPointLight===!0?d:u,i.localClippingEnabled&&z.clipShadows===!0&&Array.isArray(z.clippingPlanes)&&z.clippingPlanes.length!==0||z.displacementMap&&z.displacementScale!==0||z.alphaMap&&z.alphaTest>0||z.map&&z.alphaTest>0||z.alphaToCoverage===!0){const W=L.uuid,X=z.uuid;let K=p[W];K===void 0&&(K={},p[W]=K);let le=K[X];le===void 0&&(le=L.clone(),K[X]=le,z.addEventListener("dispose",P)),L=le}if(L.visible=z.visible,L.wireframe=z.wireframe,D===Hh?L.side=z.shadowSide!==null?z.shadowSide:z.side:L.side=z.shadowSide!==null?z.shadowSide:y[z.side],L.alphaMap=z.alphaMap,L.alphaTest=z.alphaToCoverage===!0?.5:z.alphaTest,L.map=z.map,L.clipShadows=z.clipShadows,L.clippingPlanes=z.clippingPlanes,L.clipIntersection=z.clipIntersection,L.displacementMap=z.displacementMap,L.displacementScale=z.displacementScale,L.displacementBias=z.displacementBias,L.wireframeLinewidth=z.wireframeLinewidth,L.linewidth=z.linewidth,H.isPointLight===!0&&L.isMeshDistanceMaterial===!0){const W=i.properties.get(L);W.light=H}return L}function O(U,z,H,D,L){if(U.visible===!1)return;if(U.layers.test(z.layers)&&(U.isMesh||U.isLine||U.isPoints)&&(U.castShadow||U.receiveShadow&&L===Hh)&&(!U.frustumCulled||n.intersectsObject(U))){U.modelViewMatrix.multiplyMatrices(H.matrixWorldInverse,U.matrixWorld);const X=e.update(U),K=U.material;if(Array.isArray(K)){const le=X.groups;for(let k=0,Z=le.length;k<Z;k++){const ne=le[k],pe=K[ne.materialIndex];if(pe&&pe.visible){const ge=N(U,pe,D,L);U.onBeforeShadow(i,U,z,H,X,ge,ne),i.renderBufferDirect(H,null,X,ge,U,ne),U.onAfterShadow(i,U,z,H,X,ge,ne)}}}else if(K.visible){const le=N(U,K,D,L);U.onBeforeShadow(i,U,z,H,X,le,null),i.renderBufferDirect(H,null,X,le,U,null),U.onAfterShadow(i,U,z,H,X,le,null)}}const W=U.children;for(let X=0,K=W.length;X<K;X++)O(W[X],z,H,D,L)}function P(U){U.target.removeEventListener("dispose",P);for(const H in p){const D=p[H],L=U.target.uuid;L in D&&(D[L].dispose(),delete D[L])}}}const Sk={[h_]:f_,[d_]:g_,[p_]:v_,[Kh]:m_,[f_]:h_,[g_]:d_,[v_]:p_,[m_]:Kh};function Ek(i,e){function t(){let ue=!1;const Ae=new yi;let et=null;const Mt=new yi(0,0,0,0);return{setMask:function(it){et!==it&&!ue&&(i.colorMask(it,it,it,it),et=it)},setLocked:function(it){ue=it},setClear:function(it,Ye,lt,Gt,yn){yn===!0&&(it*=Gt,Ye*=Gt,lt*=Gt),Ae.set(it,Ye,lt,Gt),Mt.equals(Ae)===!1&&(i.clearColor(it,Ye,lt,Gt),Mt.copy(Ae))},reset:function(){ue=!1,et=null,Mt.set(-1,0,0,0)}}}function n(){let ue=!1,Ae=!1,et=null,Mt=null,it=null;return{setReversed:function(Ye){if(Ae!==Ye){const lt=e.get("EXT_clip_control");Ye?lt.clipControlEXT(lt.LOWER_LEFT_EXT,lt.ZERO_TO_ONE_EXT):lt.clipControlEXT(lt.LOWER_LEFT_EXT,lt.NEGATIVE_ONE_TO_ONE_EXT),Ae=Ye;const Gt=it;it=null,this.setClear(Gt)}},getReversed:function(){return Ae},setTest:function(Ye){Ye?Ce(i.DEPTH_TEST):Je(i.DEPTH_TEST)},setMask:function(Ye){et!==Ye&&!ue&&(i.depthMask(Ye),et=Ye)},setFunc:function(Ye){if(Ae&&(Ye=Sk[Ye]),Mt!==Ye){switch(Ye){case h_:i.depthFunc(i.NEVER);break;case f_:i.depthFunc(i.ALWAYS);break;case d_:i.depthFunc(i.LESS);break;case Kh:i.depthFunc(i.LEQUAL);break;case p_:i.depthFunc(i.EQUAL);break;case m_:i.depthFunc(i.GEQUAL);break;case g_:i.depthFunc(i.GREATER);break;case v_:i.depthFunc(i.NOTEQUAL);break;default:i.depthFunc(i.LEQUAL)}Mt=Ye}},setLocked:function(Ye){ue=Ye},setClear:function(Ye){it!==Ye&&(Ae&&(Ye=1-Ye),i.clearDepth(Ye),it=Ye)},reset:function(){ue=!1,et=null,Mt=null,it=null,Ae=!1}}}function a(){let ue=!1,Ae=null,et=null,Mt=null,it=null,Ye=null,lt=null,Gt=null,yn=null;return{setTest:function(dn){ue||(dn?Ce(i.STENCIL_TEST):Je(i.STENCIL_TEST))},setMask:function(dn){Ae!==dn&&!ue&&(i.stencilMask(dn),Ae=dn)},setFunc:function(dn,fi,$i){(et!==dn||Mt!==fi||it!==$i)&&(i.stencilFunc(dn,fi,$i),et=dn,Mt=fi,it=$i)},setOp:function(dn,fi,$i){(Ye!==dn||lt!==fi||Gt!==$i)&&(i.stencilOp(dn,fi,$i),Ye=dn,lt=fi,Gt=$i)},setLocked:function(dn){ue=dn},setClear:function(dn){yn!==dn&&(i.clearStencil(dn),yn=dn)},reset:function(){ue=!1,Ae=null,et=null,Mt=null,it=null,Ye=null,lt=null,Gt=null,yn=null}}}const s=new t,l=new n,u=new a,d=new WeakMap,p=new WeakMap;let g={},y={},_=new WeakMap,b=[],x=null,T=!1,w=null,S=null,C=null,N=null,O=null,P=null,U=null,z=new Ut(0,0,0),H=0,D=!1,L=null,j=null,W=null,X=null,K=null;const le=i.getParameter(i.MAX_COMBINED_TEXTURE_IMAGE_UNITS);let k=!1,Z=0;const ne=i.getParameter(i.VERSION);ne.indexOf("WebGL")!==-1?(Z=parseFloat(/^WebGL (\d)/.exec(ne)[1]),k=Z>=1):ne.indexOf("OpenGL ES")!==-1&&(Z=parseFloat(/^OpenGL ES (\d)/.exec(ne)[1]),k=Z>=2);let pe=null,ge={};const J=i.getParameter(i.SCISSOR_BOX),ce=i.getParameter(i.VIEWPORT),Se=new yi().fromArray(J),Le=new yi().fromArray(ce);function nt(ue,Ae,et,Mt){const it=new Uint8Array(4),Ye=i.createTexture();i.bindTexture(ue,Ye),i.texParameteri(ue,i.TEXTURE_MIN_FILTER,i.NEAREST),i.texParameteri(ue,i.TEXTURE_MAG_FILTER,i.NEAREST);for(let lt=0;lt<et;lt++)ue===i.TEXTURE_3D||ue===i.TEXTURE_2D_ARRAY?i.texImage3D(Ae,0,i.RGBA,1,1,Mt,0,i.RGBA,i.UNSIGNED_BYTE,it):i.texImage2D(Ae+lt,0,i.RGBA,1,1,0,i.RGBA,i.UNSIGNED_BYTE,it);return Ye}const ve={};ve[i.TEXTURE_2D]=nt(i.TEXTURE_2D,i.TEXTURE_2D,1),ve[i.TEXTURE_CUBE_MAP]=nt(i.TEXTURE_CUBE_MAP,i.TEXTURE_CUBE_MAP_POSITIVE_X,6),ve[i.TEXTURE_2D_ARRAY]=nt(i.TEXTURE_2D_ARRAY,i.TEXTURE_2D_ARRAY,1,1),ve[i.TEXTURE_3D]=nt(i.TEXTURE_3D,i.TEXTURE_3D,1,1),s.setClear(0,0,0,1),l.setClear(1),u.setClear(0),Ce(i.DEPTH_TEST),l.setFunc(Kh),je(!1),ot(J1),Ce(i.CULL_FACE),xe(Ro);function Ce(ue){g[ue]!==!0&&(i.enable(ue),g[ue]=!0)}function Je(ue){g[ue]!==!1&&(i.disable(ue),g[ue]=!1)}function yt(ue,Ae){return y[ue]!==Ae?(i.bindFramebuffer(ue,Ae),y[ue]=Ae,ue===i.DRAW_FRAMEBUFFER&&(y[i.FRAMEBUFFER]=Ae),ue===i.FRAMEBUFFER&&(y[i.DRAW_FRAMEBUFFER]=Ae),!0):!1}function St(ue,Ae){let et=b,Mt=!1;if(ue){et=_.get(Ae),et===void 0&&(et=[],_.set(Ae,et));const it=ue.textures;if(et.length!==it.length||et[0]!==i.COLOR_ATTACHMENT0){for(let Ye=0,lt=it.length;Ye<lt;Ye++)et[Ye]=i.COLOR_ATTACHMENT0+Ye;et.length=it.length,Mt=!0}}else et[0]!==i.BACK&&(et[0]=i.BACK,Mt=!0);Mt&&i.drawBuffers(et)}function $t(ue){return x!==ue?(i.useProgram(ue),x=ue,!0):!1}const nn={[fu]:i.FUNC_ADD,[q3]:i.FUNC_SUBTRACT,[X3]:i.FUNC_REVERSE_SUBTRACT};nn[W3]=i.MIN,nn[Y3]=i.MAX;const Vt={[Z3]:i.ZERO,[K3]:i.ONE,[J3]:i.SRC_COLOR,[c_]:i.SRC_ALPHA,[iN]:i.SRC_ALPHA_SATURATE,[tN]:i.DST_COLOR,[$3]:i.DST_ALPHA,[Q3]:i.ONE_MINUS_SRC_COLOR,[u_]:i.ONE_MINUS_SRC_ALPHA,[nN]:i.ONE_MINUS_DST_COLOR,[eN]:i.ONE_MINUS_DST_ALPHA,[aN]:i.CONSTANT_COLOR,[rN]:i.ONE_MINUS_CONSTANT_COLOR,[sN]:i.CONSTANT_ALPHA,[oN]:i.ONE_MINUS_CONSTANT_ALPHA};function xe(ue,Ae,et,Mt,it,Ye,lt,Gt,yn,dn){if(ue===Ro){T===!0&&(Je(i.BLEND),T=!1);return}if(T===!1&&(Ce(i.BLEND),T=!0),ue!==G3){if(ue!==w||dn!==D){if((S!==fu||O!==fu)&&(i.blendEquation(i.FUNC_ADD),S=fu,O=fu),dn)switch(ue){case Wh:i.blendFuncSeparate(i.ONE,i.ONE_MINUS_SRC_ALPHA,i.ONE,i.ONE_MINUS_SRC_ALPHA);break;case Q1:i.blendFunc(i.ONE,i.ONE);break;case $1:i.blendFuncSeparate(i.ZERO,i.ONE_MINUS_SRC_COLOR,i.ZERO,i.ONE);break;case eE:i.blendFuncSeparate(i.DST_COLOR,i.ONE_MINUS_SRC_ALPHA,i.ZERO,i.ONE);break;default:Qt("WebGLState: Invalid blending: ",ue);break}else switch(ue){case Wh:i.blendFuncSeparate(i.SRC_ALPHA,i.ONE_MINUS_SRC_ALPHA,i.ONE,i.ONE_MINUS_SRC_ALPHA);break;case Q1:i.blendFuncSeparate(i.SRC_ALPHA,i.ONE,i.ONE,i.ONE);break;case $1:Qt("WebGLState: SubtractiveBlending requires material.premultipliedAlpha = true");break;case eE:Qt("WebGLState: MultiplyBlending requires material.premultipliedAlpha = true");break;default:Qt("WebGLState: Invalid blending: ",ue);break}C=null,N=null,P=null,U=null,z.set(0,0,0),H=0,w=ue,D=dn}return}it=it||Ae,Ye=Ye||et,lt=lt||Mt,(Ae!==S||it!==O)&&(i.blendEquationSeparate(nn[Ae],nn[it]),S=Ae,O=it),(et!==C||Mt!==N||Ye!==P||lt!==U)&&(i.blendFuncSeparate(Vt[et],Vt[Mt],Vt[Ye],Vt[lt]),C=et,N=Mt,P=Ye,U=lt),(Gt.equals(z)===!1||yn!==H)&&(i.blendColor(Gt.r,Gt.g,Gt.b,yn),z.copy(Gt),H=yn),w=ue,D=!1}function ze(ue,Ae){ue.side===To?Je(i.CULL_FACE):Ce(i.CULL_FACE);let et=ue.side===jr;Ae&&(et=!et),je(et),ue.blending===Wh&&ue.transparent===!1?xe(Ro):xe(ue.blending,ue.blendEquation,ue.blendSrc,ue.blendDst,ue.blendEquationAlpha,ue.blendSrcAlpha,ue.blendDstAlpha,ue.blendColor,ue.blendAlpha,ue.premultipliedAlpha),l.setFunc(ue.depthFunc),l.setTest(ue.depthTest),l.setMask(ue.depthWrite),s.setMask(ue.colorWrite);const Mt=ue.stencilWrite;u.setTest(Mt),Mt&&(u.setMask(ue.stencilWriteMask),u.setFunc(ue.stencilFunc,ue.stencilRef,ue.stencilFuncMask),u.setOp(ue.stencilFail,ue.stencilZFail,ue.stencilZPass)),zt(ue.polygonOffset,ue.polygonOffsetFactor,ue.polygonOffsetUnits),ue.alphaToCoverage===!0?Ce(i.SAMPLE_ALPHA_TO_COVERAGE):Je(i.SAMPLE_ALPHA_TO_COVERAGE)}function je(ue){L!==ue&&(ue?i.frontFace(i.CW):i.frontFace(i.CCW),L=ue)}function ot(ue){ue!==H3?(Ce(i.CULL_FACE),ue!==j&&(ue===J1?i.cullFace(i.BACK):ue===V3?i.cullFace(i.FRONT):i.cullFace(i.FRONT_AND_BACK))):Je(i.CULL_FACE),j=ue}function ie(ue){ue!==W&&(k&&i.lineWidth(ue),W=ue)}function zt(ue,Ae,et){ue?(Ce(i.POLYGON_OFFSET_FILL),(X!==Ae||K!==et)&&(i.polygonOffset(Ae,et),X=Ae,K=et)):Je(i.POLYGON_OFFSET_FILL)}function mt(ue){ue?Ce(i.SCISSOR_TEST):Je(i.SCISSOR_TEST)}function Bt(ue){ue===void 0&&(ue=i.TEXTURE0+le-1),pe!==ue&&(i.activeTexture(ue),pe=ue)}function gt(ue,Ae,et){et===void 0&&(pe===null?et=i.TEXTURE0+le-1:et=pe);let Mt=ge[et];Mt===void 0&&(Mt={type:void 0,texture:void 0},ge[et]=Mt),(Mt.type!==ue||Mt.texture!==Ae)&&(pe!==et&&(i.activeTexture(et),pe=et),i.bindTexture(ue,Ae||ve[ue]),Mt.type=ue,Mt.texture=Ae)}function te(){const ue=ge[pe];ue!==void 0&&ue.type!==void 0&&(i.bindTexture(ue.type,null),ue.type=void 0,ue.texture=void 0)}function B(){try{i.compressedTexImage2D(...arguments)}catch(ue){Qt("WebGLState:",ue)}}function se(){try{i.compressedTexImage3D(...arguments)}catch(ue){Qt("WebGLState:",ue)}}function Re(){try{i.texSubImage2D(...arguments)}catch(ue){Qt("WebGLState:",ue)}}function ke(){try{i.texSubImage3D(...arguments)}catch(ue){Qt("WebGLState:",ue)}}function Oe(){try{i.compressedTexSubImage2D(...arguments)}catch(ue){Qt("WebGLState:",ue)}}function Tt(){try{i.compressedTexSubImage3D(...arguments)}catch(ue){Qt("WebGLState:",ue)}}function dt(){try{i.texStorage2D(...arguments)}catch(ue){Qt("WebGLState:",ue)}}function Nt(){try{i.texStorage3D(...arguments)}catch(ue){Qt("WebGLState:",ue)}}function jt(){try{i.texImage2D(...arguments)}catch(ue){Qt("WebGLState:",ue)}}function Xe(){try{i.texImage3D(...arguments)}catch(ue){Qt("WebGLState:",ue)}}function qe(ue){Se.equals(ue)===!1&&(i.scissor(ue.x,ue.y,ue.z,ue.w),Se.copy(ue))}function Et(ue){Le.equals(ue)===!1&&(i.viewport(ue.x,ue.y,ue.z,ue.w),Le.copy(ue))}function ae(ue,Ae){let et=p.get(Ae);et===void 0&&(et=new WeakMap,p.set(Ae,et));let Mt=et.get(ue);Mt===void 0&&(Mt=i.getUniformBlockIndex(Ae,ue.name),et.set(ue,Mt))}function Ee(ue,Ae){const Mt=p.get(Ae).get(ue);d.get(Ae)!==Mt&&(i.uniformBlockBinding(Ae,Mt,ue.__bindingPointIndex),d.set(Ae,Mt))}function Qe(){i.disable(i.BLEND),i.disable(i.CULL_FACE),i.disable(i.DEPTH_TEST),i.disable(i.POLYGON_OFFSET_FILL),i.disable(i.SCISSOR_TEST),i.disable(i.STENCIL_TEST),i.disable(i.SAMPLE_ALPHA_TO_COVERAGE),i.blendEquation(i.FUNC_ADD),i.blendFunc(i.ONE,i.ZERO),i.blendFuncSeparate(i.ONE,i.ZERO,i.ONE,i.ZERO),i.blendColor(0,0,0,0),i.colorMask(!0,!0,!0,!0),i.clearColor(0,0,0,0),i.depthMask(!0),i.depthFunc(i.LESS),l.setReversed(!1),i.clearDepth(1),i.stencilMask(4294967295),i.stencilFunc(i.ALWAYS,0,4294967295),i.stencilOp(i.KEEP,i.KEEP,i.KEEP),i.clearStencil(0),i.cullFace(i.BACK),i.frontFace(i.CCW),i.polygonOffset(0,0),i.activeTexture(i.TEXTURE0),i.bindFramebuffer(i.FRAMEBUFFER,null),i.bindFramebuffer(i.DRAW_FRAMEBUFFER,null),i.bindFramebuffer(i.READ_FRAMEBUFFER,null),i.useProgram(null),i.lineWidth(1),i.scissor(0,0,i.canvas.width,i.canvas.height),i.viewport(0,0,i.canvas.width,i.canvas.height),g={},pe=null,ge={},y={},_=new WeakMap,b=[],x=null,T=!1,w=null,S=null,C=null,N=null,O=null,P=null,U=null,z=new Ut(0,0,0),H=0,D=!1,L=null,j=null,W=null,X=null,K=null,Se.set(0,0,i.canvas.width,i.canvas.height),Le.set(0,0,i.canvas.width,i.canvas.height),s.reset(),l.reset(),u.reset()}return{buffers:{color:s,depth:l,stencil:u},enable:Ce,disable:Je,bindFramebuffer:yt,drawBuffers:St,useProgram:$t,setBlending:xe,setMaterial:ze,setFlipSided:je,setCullFace:ot,setLineWidth:ie,setPolygonOffset:zt,setScissorTest:mt,activeTexture:Bt,bindTexture:gt,unbindTexture:te,compressedTexImage2D:B,compressedTexImage3D:se,texImage2D:jt,texImage3D:Xe,updateUBOMapping:ae,uniformBlockBinding:Ee,texStorage2D:dt,texStorage3D:Nt,texSubImage2D:Re,texSubImage3D:ke,compressedTexSubImage2D:Oe,compressedTexSubImage3D:Tt,scissor:qe,viewport:Et,reset:Qe}}function Mk(i,e,t,n,a,s,l){const u=e.has("WEBGL_multisampled_render_to_texture")?e.get("WEBGL_multisampled_render_to_texture"):null,d=typeof navigator>"u"?!1:/OculusBrowser/g.test(navigator.userAgent),p=new Ke,g=new WeakMap;let y;const _=new WeakMap;let b=!1;try{b=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")!==null}catch{}function x(te,B){return b?new OffscreenCanvas(te,B):kg("canvas")}function T(te,B,se){let Re=1;const ke=gt(te);if((ke.width>se||ke.height>se)&&(Re=se/Math.max(ke.width,ke.height)),Re<1)if(typeof HTMLImageElement<"u"&&te instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&te instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&te instanceof ImageBitmap||typeof VideoFrame<"u"&&te instanceof VideoFrame){const Oe=Math.floor(Re*ke.width),Tt=Math.floor(Re*ke.height);y===void 0&&(y=x(Oe,Tt));const dt=B?x(Oe,Tt):y;return dt.width=Oe,dt.height=Tt,dt.getContext("2d").drawImage(te,0,0,Oe,Tt),Rt("WebGLRenderer: Texture has been resized from ("+ke.width+"x"+ke.height+") to ("+Oe+"x"+Tt+")."),dt}else return"data"in te&&Rt("WebGLRenderer: Image in DataTexture is too big ("+ke.width+"x"+ke.height+")."),te;return te}function w(te){return te.generateMipmaps}function S(te){i.generateMipmap(te)}function C(te){return te.isWebGLCubeRenderTarget?i.TEXTURE_CUBE_MAP:te.isWebGL3DRenderTarget?i.TEXTURE_3D:te.isWebGLArrayRenderTarget||te.isCompressedArrayTexture?i.TEXTURE_2D_ARRAY:i.TEXTURE_2D}function N(te,B,se,Re,ke=!1){if(te!==null){if(i[te]!==void 0)return i[te];Rt("WebGLRenderer: Attempt to use non-existing WebGL internal format '"+te+"'")}let Oe=B;if(B===i.RED&&(se===i.FLOAT&&(Oe=i.R32F),se===i.HALF_FLOAT&&(Oe=i.R16F),se===i.UNSIGNED_BYTE&&(Oe=i.R8)),B===i.RED_INTEGER&&(se===i.UNSIGNED_BYTE&&(Oe=i.R8UI),se===i.UNSIGNED_SHORT&&(Oe=i.R16UI),se===i.UNSIGNED_INT&&(Oe=i.R32UI),se===i.BYTE&&(Oe=i.R8I),se===i.SHORT&&(Oe=i.R16I),se===i.INT&&(Oe=i.R32I)),B===i.RG&&(se===i.FLOAT&&(Oe=i.RG32F),se===i.HALF_FLOAT&&(Oe=i.RG16F),se===i.UNSIGNED_BYTE&&(Oe=i.RG8)),B===i.RG_INTEGER&&(se===i.UNSIGNED_BYTE&&(Oe=i.RG8UI),se===i.UNSIGNED_SHORT&&(Oe=i.RG16UI),se===i.UNSIGNED_INT&&(Oe=i.RG32UI),se===i.BYTE&&(Oe=i.RG8I),se===i.SHORT&&(Oe=i.RG16I),se===i.INT&&(Oe=i.RG32I)),B===i.RGB_INTEGER&&(se===i.UNSIGNED_BYTE&&(Oe=i.RGB8UI),se===i.UNSIGNED_SHORT&&(Oe=i.RGB16UI),se===i.UNSIGNED_INT&&(Oe=i.RGB32UI),se===i.BYTE&&(Oe=i.RGB8I),se===i.SHORT&&(Oe=i.RGB16I),se===i.INT&&(Oe=i.RGB32I)),B===i.RGBA_INTEGER&&(se===i.UNSIGNED_BYTE&&(Oe=i.RGBA8UI),se===i.UNSIGNED_SHORT&&(Oe=i.RGBA16UI),se===i.UNSIGNED_INT&&(Oe=i.RGBA32UI),se===i.BYTE&&(Oe=i.RGBA8I),se===i.SHORT&&(Oe=i.RGBA16I),se===i.INT&&(Oe=i.RGBA32I)),B===i.RGB&&(se===i.UNSIGNED_INT_5_9_9_9_REV&&(Oe=i.RGB9_E5),se===i.UNSIGNED_INT_10F_11F_11F_REV&&(Oe=i.R11F_G11F_B10F)),B===i.RGBA){const Tt=ke?Bg:Pn.getTransfer(Re);se===i.FLOAT&&(Oe=i.RGBA32F),se===i.HALF_FLOAT&&(Oe=i.RGBA16F),se===i.UNSIGNED_BYTE&&(Oe=Tt===ri?i.SRGB8_ALPHA8:i.RGBA8),se===i.UNSIGNED_SHORT_4_4_4_4&&(Oe=i.RGBA4),se===i.UNSIGNED_SHORT_5_5_5_1&&(Oe=i.RGB5_A1)}return(Oe===i.R16F||Oe===i.R32F||Oe===i.RG16F||Oe===i.RG32F||Oe===i.RGBA16F||Oe===i.RGBA32F)&&e.get("EXT_color_buffer_float"),Oe}function O(te,B){let se;return te?B===null||B===xs||B===rp?se=i.DEPTH24_STENCIL8:B===Di?se=i.DEPTH32F_STENCIL8:B===ap&&(se=i.DEPTH24_STENCIL8,Rt("DepthTexture: 16 bit depth attachment is not supported with stencil. Using 24-bit attachment.")):B===null||B===xs||B===rp?se=i.DEPTH_COMPONENT24:B===Di?se=i.DEPTH_COMPONENT32F:B===ap&&(se=i.DEPTH_COMPONENT16),se}function P(te,B){return w(te)===!0||te.isFramebufferTexture&&te.minFilter!==Vi&&te.minFilter!==Vn?Math.log2(Math.max(B.width,B.height))+1:te.mipmaps!==void 0&&te.mipmaps.length>0?te.mipmaps.length:te.isCompressedTexture&&Array.isArray(te.image)?B.mipmaps.length:1}function U(te){const B=te.target;B.removeEventListener("dispose",U),H(B),B.isVideoTexture&&g.delete(B)}function z(te){const B=te.target;B.removeEventListener("dispose",z),L(B)}function H(te){const B=n.get(te);if(B.__webglInit===void 0)return;const se=te.source,Re=_.get(se);if(Re){const ke=Re[B.__cacheKey];ke.usedTimes--,ke.usedTimes===0&&D(te),Object.keys(Re).length===0&&_.delete(se)}n.remove(te)}function D(te){const B=n.get(te);i.deleteTexture(B.__webglTexture);const se=te.source,Re=_.get(se);delete Re[B.__cacheKey],l.memory.textures--}function L(te){const B=n.get(te);if(te.depthTexture&&(te.depthTexture.dispose(),n.remove(te.depthTexture)),te.isWebGLCubeRenderTarget)for(let Re=0;Re<6;Re++){if(Array.isArray(B.__webglFramebuffer[Re]))for(let ke=0;ke<B.__webglFramebuffer[Re].length;ke++)i.deleteFramebuffer(B.__webglFramebuffer[Re][ke]);else i.deleteFramebuffer(B.__webglFramebuffer[Re]);B.__webglDepthbuffer&&i.deleteRenderbuffer(B.__webglDepthbuffer[Re])}else{if(Array.isArray(B.__webglFramebuffer))for(let Re=0;Re<B.__webglFramebuffer.length;Re++)i.deleteFramebuffer(B.__webglFramebuffer[Re]);else i.deleteFramebuffer(B.__webglFramebuffer);if(B.__webglDepthbuffer&&i.deleteRenderbuffer(B.__webglDepthbuffer),B.__webglMultisampledFramebuffer&&i.deleteFramebuffer(B.__webglMultisampledFramebuffer),B.__webglColorRenderbuffer)for(let Re=0;Re<B.__webglColorRenderbuffer.length;Re++)B.__webglColorRenderbuffer[Re]&&i.deleteRenderbuffer(B.__webglColorRenderbuffer[Re]);B.__webglDepthRenderbuffer&&i.deleteRenderbuffer(B.__webglDepthRenderbuffer)}const se=te.textures;for(let Re=0,ke=se.length;Re<ke;Re++){const Oe=n.get(se[Re]);Oe.__webglTexture&&(i.deleteTexture(Oe.__webglTexture),l.memory.textures--),n.remove(se[Re])}n.remove(te)}let j=0;function W(){j=0}function X(){const te=j;return te>=a.maxTextures&&Rt("WebGLTextures: Trying to use "+te+" texture units while this GPU supports only "+a.maxTextures),j+=1,te}function K(te){const B=[];return B.push(te.wrapS),B.push(te.wrapT),B.push(te.wrapR||0),B.push(te.magFilter),B.push(te.minFilter),B.push(te.anisotropy),B.push(te.internalFormat),B.push(te.format),B.push(te.type),B.push(te.generateMipmaps),B.push(te.premultiplyAlpha),B.push(te.flipY),B.push(te.unpackAlignment),B.push(te.colorSpace),B.join()}function le(te,B){const se=n.get(te);if(te.isVideoTexture&&mt(te),te.isRenderTargetTexture===!1&&te.isExternalTexture!==!0&&te.version>0&&se.__version!==te.version){const Re=te.image;if(Re===null)Rt("WebGLRenderer: Texture marked for update but no image data found.");else if(Re.complete===!1)Rt("WebGLRenderer: Texture marked for update but image is incomplete");else{ve(se,te,B);return}}else te.isExternalTexture&&(se.__webglTexture=te.sourceTexture?te.sourceTexture:null);t.bindTexture(i.TEXTURE_2D,se.__webglTexture,i.TEXTURE0+B)}function k(te,B){const se=n.get(te);if(te.isRenderTargetTexture===!1&&te.version>0&&se.__version!==te.version){ve(se,te,B);return}else te.isExternalTexture&&(se.__webglTexture=te.sourceTexture?te.sourceTexture:null);t.bindTexture(i.TEXTURE_2D_ARRAY,se.__webglTexture,i.TEXTURE0+B)}function Z(te,B){const se=n.get(te);if(te.isRenderTargetTexture===!1&&te.version>0&&se.__version!==te.version){ve(se,te,B);return}t.bindTexture(i.TEXTURE_3D,se.__webglTexture,i.TEXTURE0+B)}function ne(te,B){const se=n.get(te);if(te.isCubeDepthTexture!==!0&&te.version>0&&se.__version!==te.version){Ce(se,te,B);return}t.bindTexture(i.TEXTURE_CUBE_MAP,se.__webglTexture,i.TEXTURE0+B)}const pe={[Lg]:i.REPEAT,[Qi]:i.CLAMP_TO_EDGE,[Ig]:i.MIRRORED_REPEAT},ge={[Vi]:i.NEAREST,[VE]:i.NEAREST_MIPMAP_NEAREST,[Xd]:i.NEAREST_MIPMAP_LINEAR,[Vn]:i.LINEAR,[_g]:i.LINEAR_MIPMAP_NEAREST,[yl]:i.LINEAR_MIPMAP_LINEAR},J={[gN]:i.NEVER,[xN]:i.ALWAYS,[vN]:i.LESS,[yb]:i.LEQUAL,[yN]:i.EQUAL,[_b]:i.GEQUAL,[_N]:i.GREATER,[bN]:i.NOTEQUAL};function ce(te,B){if(B.type===Di&&e.has("OES_texture_float_linear")===!1&&(B.magFilter===Vn||B.magFilter===_g||B.magFilter===Xd||B.magFilter===yl||B.minFilter===Vn||B.minFilter===_g||B.minFilter===Xd||B.minFilter===yl)&&Rt("WebGLRenderer: Unable to use linear filtering with floating point textures. OES_texture_float_linear not supported on this device."),i.texParameteri(te,i.TEXTURE_WRAP_S,pe[B.wrapS]),i.texParameteri(te,i.TEXTURE_WRAP_T,pe[B.wrapT]),(te===i.TEXTURE_3D||te===i.TEXTURE_2D_ARRAY)&&i.texParameteri(te,i.TEXTURE_WRAP_R,pe[B.wrapR]),i.texParameteri(te,i.TEXTURE_MAG_FILTER,ge[B.magFilter]),i.texParameteri(te,i.TEXTURE_MIN_FILTER,ge[B.minFilter]),B.compareFunction&&(i.texParameteri(te,i.TEXTURE_COMPARE_MODE,i.COMPARE_REF_TO_TEXTURE),i.texParameteri(te,i.TEXTURE_COMPARE_FUNC,J[B.compareFunction])),e.has("EXT_texture_filter_anisotropic")===!0){if(B.magFilter===Vi||B.minFilter!==Xd&&B.minFilter!==yl||B.type===Di&&e.has("OES_texture_float_linear")===!1)return;if(B.anisotropy>1||n.get(B).__currentAnisotropy){const se=e.get("EXT_texture_filter_anisotropic");i.texParameterf(te,se.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(B.anisotropy,a.getMaxAnisotropy())),n.get(B).__currentAnisotropy=B.anisotropy}}}function Se(te,B){let se=!1;te.__webglInit===void 0&&(te.__webglInit=!0,B.addEventListener("dispose",U));const Re=B.source;let ke=_.get(Re);ke===void 0&&(ke={},_.set(Re,ke));const Oe=K(B);if(Oe!==te.__cacheKey){ke[Oe]===void 0&&(ke[Oe]={texture:i.createTexture(),usedTimes:0},l.memory.textures++,se=!0),ke[Oe].usedTimes++;const Tt=ke[te.__cacheKey];Tt!==void 0&&(ke[te.__cacheKey].usedTimes--,Tt.usedTimes===0&&D(B)),te.__cacheKey=Oe,te.__webglTexture=ke[Oe].texture}return se}function Le(te,B,se){return Math.floor(Math.floor(te/se)/B)}function nt(te,B,se,Re){const Oe=te.updateRanges;if(Oe.length===0)t.texSubImage2D(i.TEXTURE_2D,0,0,0,B.width,B.height,se,Re,B.data);else{Oe.sort((Xe,qe)=>Xe.start-qe.start);let Tt=0;for(let Xe=1;Xe<Oe.length;Xe++){const qe=Oe[Tt],Et=Oe[Xe],ae=qe.start+qe.count,Ee=Le(Et.start,B.width,4),Qe=Le(qe.start,B.width,4);Et.start<=ae+1&&Ee===Qe&&Le(Et.start+Et.count-1,B.width,4)===Ee?qe.count=Math.max(qe.count,Et.start+Et.count-qe.start):(++Tt,Oe[Tt]=Et)}Oe.length=Tt+1;const dt=i.getParameter(i.UNPACK_ROW_LENGTH),Nt=i.getParameter(i.UNPACK_SKIP_PIXELS),jt=i.getParameter(i.UNPACK_SKIP_ROWS);i.pixelStorei(i.UNPACK_ROW_LENGTH,B.width);for(let Xe=0,qe=Oe.length;Xe<qe;Xe++){const Et=Oe[Xe],ae=Math.floor(Et.start/4),Ee=Math.ceil(Et.count/4),Qe=ae%B.width,ue=Math.floor(ae/B.width),Ae=Ee,et=1;i.pixelStorei(i.UNPACK_SKIP_PIXELS,Qe),i.pixelStorei(i.UNPACK_SKIP_ROWS,ue),t.texSubImage2D(i.TEXTURE_2D,0,Qe,ue,Ae,et,se,Re,B.data)}te.clearUpdateRanges(),i.pixelStorei(i.UNPACK_ROW_LENGTH,dt),i.pixelStorei(i.UNPACK_SKIP_PIXELS,Nt),i.pixelStorei(i.UNPACK_SKIP_ROWS,jt)}}function ve(te,B,se){let Re=i.TEXTURE_2D;(B.isDataArrayTexture||B.isCompressedArrayTexture)&&(Re=i.TEXTURE_2D_ARRAY),B.isData3DTexture&&(Re=i.TEXTURE_3D);const ke=Se(te,B),Oe=B.source;t.bindTexture(Re,te.__webglTexture,i.TEXTURE0+se);const Tt=n.get(Oe);if(Oe.version!==Tt.__version||ke===!0){t.activeTexture(i.TEXTURE0+se);const dt=Pn.getPrimaries(Pn.workingColorSpace),Nt=B.colorSpace===uc?null:Pn.getPrimaries(B.colorSpace),jt=B.colorSpace===uc||dt===Nt?i.NONE:i.BROWSER_DEFAULT_WEBGL;i.pixelStorei(i.UNPACK_FLIP_Y_WEBGL,B.flipY),i.pixelStorei(i.UNPACK_PREMULTIPLY_ALPHA_WEBGL,B.premultiplyAlpha),i.pixelStorei(i.UNPACK_ALIGNMENT,B.unpackAlignment),i.pixelStorei(i.UNPACK_COLORSPACE_CONVERSION_WEBGL,jt);let Xe=T(B.image,!1,a.maxTextureSize);Xe=Bt(B,Xe);const qe=s.convert(B.format,B.colorSpace),Et=s.convert(B.type);let ae=N(B.internalFormat,qe,Et,B.colorSpace,B.isVideoTexture);ce(Re,B);let Ee;const Qe=B.mipmaps,ue=B.isVideoTexture!==!0,Ae=Tt.__version===void 0||ke===!0,et=Oe.dataReady,Mt=P(B,Xe);if(B.isDepthTexture)ae=O(B.format===du,B.type),Ae&&(ue?t.texStorage2D(i.TEXTURE_2D,1,ae,Xe.width,Xe.height):t.texImage2D(i.TEXTURE_2D,0,ae,Xe.width,Xe.height,0,qe,Et,null));else if(B.isDataTexture)if(Qe.length>0){ue&&Ae&&t.texStorage2D(i.TEXTURE_2D,Mt,ae,Qe[0].width,Qe[0].height);for(let it=0,Ye=Qe.length;it<Ye;it++)Ee=Qe[it],ue?et&&t.texSubImage2D(i.TEXTURE_2D,it,0,0,Ee.width,Ee.height,qe,Et,Ee.data):t.texImage2D(i.TEXTURE_2D,it,ae,Ee.width,Ee.height,0,qe,Et,Ee.data);B.generateMipmaps=!1}else ue?(Ae&&t.texStorage2D(i.TEXTURE_2D,Mt,ae,Xe.width,Xe.height),et&&nt(B,Xe,qe,Et)):t.texImage2D(i.TEXTURE_2D,0,ae,Xe.width,Xe.height,0,qe,Et,Xe.data);else if(B.isCompressedTexture)if(B.isCompressedArrayTexture){ue&&Ae&&t.texStorage3D(i.TEXTURE_2D_ARRAY,Mt,ae,Qe[0].width,Qe[0].height,Xe.depth);for(let it=0,Ye=Qe.length;it<Ye;it++)if(Ee=Qe[it],B.format!==sa)if(qe!==null)if(ue){if(et)if(B.layerUpdates.size>0){const lt=fE(Ee.width,Ee.height,B.format,B.type);for(const Gt of B.layerUpdates){const yn=Ee.data.subarray(Gt*lt/Ee.data.BYTES_PER_ELEMENT,(Gt+1)*lt/Ee.data.BYTES_PER_ELEMENT);t.compressedTexSubImage3D(i.TEXTURE_2D_ARRAY,it,0,0,Gt,Ee.width,Ee.height,1,qe,yn)}B.clearLayerUpdates()}else t.compressedTexSubImage3D(i.TEXTURE_2D_ARRAY,it,0,0,0,Ee.width,Ee.height,Xe.depth,qe,Ee.data)}else t.compressedTexImage3D(i.TEXTURE_2D_ARRAY,it,ae,Ee.width,Ee.height,Xe.depth,0,Ee.data,0,0);else Rt("WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()");else ue?et&&t.texSubImage3D(i.TEXTURE_2D_ARRAY,it,0,0,0,Ee.width,Ee.height,Xe.depth,qe,Et,Ee.data):t.texImage3D(i.TEXTURE_2D_ARRAY,it,ae,Ee.width,Ee.height,Xe.depth,0,qe,Et,Ee.data)}else{ue&&Ae&&t.texStorage2D(i.TEXTURE_2D,Mt,ae,Qe[0].width,Qe[0].height);for(let it=0,Ye=Qe.length;it<Ye;it++)Ee=Qe[it],B.format!==sa?qe!==null?ue?et&&t.compressedTexSubImage2D(i.TEXTURE_2D,it,0,0,Ee.width,Ee.height,qe,Ee.data):t.compressedTexImage2D(i.TEXTURE_2D,it,ae,Ee.width,Ee.height,0,Ee.data):Rt("WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):ue?et&&t.texSubImage2D(i.TEXTURE_2D,it,0,0,Ee.width,Ee.height,qe,Et,Ee.data):t.texImage2D(i.TEXTURE_2D,it,ae,Ee.width,Ee.height,0,qe,Et,Ee.data)}else if(B.isDataArrayTexture)if(ue){if(Ae&&t.texStorage3D(i.TEXTURE_2D_ARRAY,Mt,ae,Xe.width,Xe.height,Xe.depth),et)if(B.layerUpdates.size>0){const it=fE(Xe.width,Xe.height,B.format,B.type);for(const Ye of B.layerUpdates){const lt=Xe.data.subarray(Ye*it/Xe.data.BYTES_PER_ELEMENT,(Ye+1)*it/Xe.data.BYTES_PER_ELEMENT);t.texSubImage3D(i.TEXTURE_2D_ARRAY,0,0,0,Ye,Xe.width,Xe.height,1,qe,Et,lt)}B.clearLayerUpdates()}else t.texSubImage3D(i.TEXTURE_2D_ARRAY,0,0,0,0,Xe.width,Xe.height,Xe.depth,qe,Et,Xe.data)}else t.texImage3D(i.TEXTURE_2D_ARRAY,0,ae,Xe.width,Xe.height,Xe.depth,0,qe,Et,Xe.data);else if(B.isData3DTexture)ue?(Ae&&t.texStorage3D(i.TEXTURE_3D,Mt,ae,Xe.width,Xe.height,Xe.depth),et&&t.texSubImage3D(i.TEXTURE_3D,0,0,0,0,Xe.width,Xe.height,Xe.depth,qe,Et,Xe.data)):t.texImage3D(i.TEXTURE_3D,0,ae,Xe.width,Xe.height,Xe.depth,0,qe,Et,Xe.data);else if(B.isFramebufferTexture){if(Ae)if(ue)t.texStorage2D(i.TEXTURE_2D,Mt,ae,Xe.width,Xe.height);else{let it=Xe.width,Ye=Xe.height;for(let lt=0;lt<Mt;lt++)t.texImage2D(i.TEXTURE_2D,lt,ae,it,Ye,0,qe,Et,null),it>>=1,Ye>>=1}}else if(Qe.length>0){if(ue&&Ae){const it=gt(Qe[0]);t.texStorage2D(i.TEXTURE_2D,Mt,ae,it.width,it.height)}for(let it=0,Ye=Qe.length;it<Ye;it++)Ee=Qe[it],ue?et&&t.texSubImage2D(i.TEXTURE_2D,it,0,0,qe,Et,Ee):t.texImage2D(i.TEXTURE_2D,it,ae,qe,Et,Ee);B.generateMipmaps=!1}else if(ue){if(Ae){const it=gt(Xe);t.texStorage2D(i.TEXTURE_2D,Mt,ae,it.width,it.height)}et&&t.texSubImage2D(i.TEXTURE_2D,0,0,0,qe,Et,Xe)}else t.texImage2D(i.TEXTURE_2D,0,ae,qe,Et,Xe);w(B)&&S(Re),Tt.__version=Oe.version,B.onUpdate&&B.onUpdate(B)}te.__version=B.version}function Ce(te,B,se){if(B.image.length!==6)return;const Re=Se(te,B),ke=B.source;t.bindTexture(i.TEXTURE_CUBE_MAP,te.__webglTexture,i.TEXTURE0+se);const Oe=n.get(ke);if(ke.version!==Oe.__version||Re===!0){t.activeTexture(i.TEXTURE0+se);const Tt=Pn.getPrimaries(Pn.workingColorSpace),dt=B.colorSpace===uc?null:Pn.getPrimaries(B.colorSpace),Nt=B.colorSpace===uc||Tt===dt?i.NONE:i.BROWSER_DEFAULT_WEBGL;i.pixelStorei(i.UNPACK_FLIP_Y_WEBGL,B.flipY),i.pixelStorei(i.UNPACK_PREMULTIPLY_ALPHA_WEBGL,B.premultiplyAlpha),i.pixelStorei(i.UNPACK_ALIGNMENT,B.unpackAlignment),i.pixelStorei(i.UNPACK_COLORSPACE_CONVERSION_WEBGL,Nt);const jt=B.isCompressedTexture||B.image[0].isCompressedTexture,Xe=B.image[0]&&B.image[0].isDataTexture,qe=[];for(let Ye=0;Ye<6;Ye++)!jt&&!Xe?qe[Ye]=T(B.image[Ye],!0,a.maxCubemapSize):qe[Ye]=Xe?B.image[Ye].image:B.image[Ye],qe[Ye]=Bt(B,qe[Ye]);const Et=qe[0],ae=s.convert(B.format,B.colorSpace),Ee=s.convert(B.type),Qe=N(B.internalFormat,ae,Ee,B.colorSpace),ue=B.isVideoTexture!==!0,Ae=Oe.__version===void 0||Re===!0,et=ke.dataReady;let Mt=P(B,Et);ce(i.TEXTURE_CUBE_MAP,B);let it;if(jt){ue&&Ae&&t.texStorage2D(i.TEXTURE_CUBE_MAP,Mt,Qe,Et.width,Et.height);for(let Ye=0;Ye<6;Ye++){it=qe[Ye].mipmaps;for(let lt=0;lt<it.length;lt++){const Gt=it[lt];B.format!==sa?ae!==null?ue?et&&t.compressedTexSubImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+Ye,lt,0,0,Gt.width,Gt.height,ae,Gt.data):t.compressedTexImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+Ye,lt,Qe,Gt.width,Gt.height,0,Gt.data):Rt("WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):ue?et&&t.texSubImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+Ye,lt,0,0,Gt.width,Gt.height,ae,Ee,Gt.data):t.texImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+Ye,lt,Qe,Gt.width,Gt.height,0,ae,Ee,Gt.data)}}}else{if(it=B.mipmaps,ue&&Ae){it.length>0&&Mt++;const Ye=gt(qe[0]);t.texStorage2D(i.TEXTURE_CUBE_MAP,Mt,Qe,Ye.width,Ye.height)}for(let Ye=0;Ye<6;Ye++)if(Xe){ue?et&&t.texSubImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+Ye,0,0,0,qe[Ye].width,qe[Ye].height,ae,Ee,qe[Ye].data):t.texImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+Ye,0,Qe,qe[Ye].width,qe[Ye].height,0,ae,Ee,qe[Ye].data);for(let lt=0;lt<it.length;lt++){const yn=it[lt].image[Ye].image;ue?et&&t.texSubImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+Ye,lt+1,0,0,yn.width,yn.height,ae,Ee,yn.data):t.texImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+Ye,lt+1,Qe,yn.width,yn.height,0,ae,Ee,yn.data)}}else{ue?et&&t.texSubImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+Ye,0,0,0,ae,Ee,qe[Ye]):t.texImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+Ye,0,Qe,ae,Ee,qe[Ye]);for(let lt=0;lt<it.length;lt++){const Gt=it[lt];ue?et&&t.texSubImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+Ye,lt+1,0,0,ae,Ee,Gt.image[Ye]):t.texImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+Ye,lt+1,Qe,ae,Ee,Gt.image[Ye])}}}w(B)&&S(i.TEXTURE_CUBE_MAP),Oe.__version=ke.version,B.onUpdate&&B.onUpdate(B)}te.__version=B.version}function Je(te,B,se,Re,ke,Oe){const Tt=s.convert(se.format,se.colorSpace),dt=s.convert(se.type),Nt=N(se.internalFormat,Tt,dt,se.colorSpace),jt=n.get(B),Xe=n.get(se);if(Xe.__renderTarget=B,!jt.__hasExternalTextures){const qe=Math.max(1,B.width>>Oe),Et=Math.max(1,B.height>>Oe);ke===i.TEXTURE_3D||ke===i.TEXTURE_2D_ARRAY?t.texImage3D(ke,Oe,Nt,qe,Et,B.depth,0,Tt,dt,null):t.texImage2D(ke,Oe,Nt,qe,Et,0,Tt,dt,null)}t.bindFramebuffer(i.FRAMEBUFFER,te),zt(B)?u.framebufferTexture2DMultisampleEXT(i.FRAMEBUFFER,Re,ke,Xe.__webglTexture,0,ie(B)):(ke===i.TEXTURE_2D||ke>=i.TEXTURE_CUBE_MAP_POSITIVE_X&&ke<=i.TEXTURE_CUBE_MAP_NEGATIVE_Z)&&i.framebufferTexture2D(i.FRAMEBUFFER,Re,ke,Xe.__webglTexture,Oe),t.bindFramebuffer(i.FRAMEBUFFER,null)}function yt(te,B,se){if(i.bindRenderbuffer(i.RENDERBUFFER,te),B.depthBuffer){const Re=B.depthTexture,ke=Re&&Re.isDepthTexture?Re.type:null,Oe=O(B.stencilBuffer,ke),Tt=B.stencilBuffer?i.DEPTH_STENCIL_ATTACHMENT:i.DEPTH_ATTACHMENT;zt(B)?u.renderbufferStorageMultisampleEXT(i.RENDERBUFFER,ie(B),Oe,B.width,B.height):se?i.renderbufferStorageMultisample(i.RENDERBUFFER,ie(B),Oe,B.width,B.height):i.renderbufferStorage(i.RENDERBUFFER,Oe,B.width,B.height),i.framebufferRenderbuffer(i.FRAMEBUFFER,Tt,i.RENDERBUFFER,te)}else{const Re=B.textures;for(let ke=0;ke<Re.length;ke++){const Oe=Re[ke],Tt=s.convert(Oe.format,Oe.colorSpace),dt=s.convert(Oe.type),Nt=N(Oe.internalFormat,Tt,dt,Oe.colorSpace);zt(B)?u.renderbufferStorageMultisampleEXT(i.RENDERBUFFER,ie(B),Nt,B.width,B.height):se?i.renderbufferStorageMultisample(i.RENDERBUFFER,ie(B),Nt,B.width,B.height):i.renderbufferStorage(i.RENDERBUFFER,Nt,B.width,B.height)}}i.bindRenderbuffer(i.RENDERBUFFER,null)}function St(te,B,se){const Re=B.isWebGLCubeRenderTarget===!0;if(t.bindFramebuffer(i.FRAMEBUFFER,te),!(B.depthTexture&&B.depthTexture.isDepthTexture))throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");const ke=n.get(B.depthTexture);if(ke.__renderTarget=B,(!ke.__webglTexture||B.depthTexture.image.width!==B.width||B.depthTexture.image.height!==B.height)&&(B.depthTexture.image.width=B.width,B.depthTexture.image.height=B.height,B.depthTexture.needsUpdate=!0),Re){if(ke.__webglInit===void 0&&(ke.__webglInit=!0,B.depthTexture.addEventListener("dispose",U)),ke.__webglTexture===void 0){ke.__webglTexture=i.createTexture(),t.bindTexture(i.TEXTURE_CUBE_MAP,ke.__webglTexture),ce(i.TEXTURE_CUBE_MAP,B.depthTexture);const jt=s.convert(B.depthTexture.format),Xe=s.convert(B.depthTexture.type);let qe;B.depthTexture.format===xl?qe=i.DEPTH_COMPONENT24:B.depthTexture.format===du&&(qe=i.DEPTH24_STENCIL8);for(let Et=0;Et<6;Et++)i.texImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+Et,0,qe,B.width,B.height,0,jt,Xe,null)}}else le(B.depthTexture,0);const Oe=ke.__webglTexture,Tt=ie(B),dt=Re?i.TEXTURE_CUBE_MAP_POSITIVE_X+se:i.TEXTURE_2D,Nt=B.depthTexture.format===du?i.DEPTH_STENCIL_ATTACHMENT:i.DEPTH_ATTACHMENT;if(B.depthTexture.format===xl)zt(B)?u.framebufferTexture2DMultisampleEXT(i.FRAMEBUFFER,Nt,dt,Oe,0,Tt):i.framebufferTexture2D(i.FRAMEBUFFER,Nt,dt,Oe,0);else if(B.depthTexture.format===du)zt(B)?u.framebufferTexture2DMultisampleEXT(i.FRAMEBUFFER,Nt,dt,Oe,0,Tt):i.framebufferTexture2D(i.FRAMEBUFFER,Nt,dt,Oe,0);else throw new Error("Unknown depthTexture format")}function $t(te){const B=n.get(te),se=te.isWebGLCubeRenderTarget===!0;if(B.__boundDepthTexture!==te.depthTexture){const Re=te.depthTexture;if(B.__depthDisposeCallback&&B.__depthDisposeCallback(),Re){const ke=()=>{delete B.__boundDepthTexture,delete B.__depthDisposeCallback,Re.removeEventListener("dispose",ke)};Re.addEventListener("dispose",ke),B.__depthDisposeCallback=ke}B.__boundDepthTexture=Re}if(te.depthTexture&&!B.__autoAllocateDepthBuffer)if(se)for(let Re=0;Re<6;Re++)St(B.__webglFramebuffer[Re],te,Re);else{const Re=te.texture.mipmaps;Re&&Re.length>0?St(B.__webglFramebuffer[0],te,0):St(B.__webglFramebuffer,te,0)}else if(se){B.__webglDepthbuffer=[];for(let Re=0;Re<6;Re++)if(t.bindFramebuffer(i.FRAMEBUFFER,B.__webglFramebuffer[Re]),B.__webglDepthbuffer[Re]===void 0)B.__webglDepthbuffer[Re]=i.createRenderbuffer(),yt(B.__webglDepthbuffer[Re],te,!1);else{const ke=te.stencilBuffer?i.DEPTH_STENCIL_ATTACHMENT:i.DEPTH_ATTACHMENT,Oe=B.__webglDepthbuffer[Re];i.bindRenderbuffer(i.RENDERBUFFER,Oe),i.framebufferRenderbuffer(i.FRAMEBUFFER,ke,i.RENDERBUFFER,Oe)}}else{const Re=te.texture.mipmaps;if(Re&&Re.length>0?t.bindFramebuffer(i.FRAMEBUFFER,B.__webglFramebuffer[0]):t.bindFramebuffer(i.FRAMEBUFFER,B.__webglFramebuffer),B.__webglDepthbuffer===void 0)B.__webglDepthbuffer=i.createRenderbuffer(),yt(B.__webglDepthbuffer,te,!1);else{const ke=te.stencilBuffer?i.DEPTH_STENCIL_ATTACHMENT:i.DEPTH_ATTACHMENT,Oe=B.__webglDepthbuffer;i.bindRenderbuffer(i.RENDERBUFFER,Oe),i.framebufferRenderbuffer(i.FRAMEBUFFER,ke,i.RENDERBUFFER,Oe)}}t.bindFramebuffer(i.FRAMEBUFFER,null)}function nn(te,B,se){const Re=n.get(te);B!==void 0&&Je(Re.__webglFramebuffer,te,te.texture,i.COLOR_ATTACHMENT0,i.TEXTURE_2D,0),se!==void 0&&$t(te)}function Vt(te){const B=te.texture,se=n.get(te),Re=n.get(B);te.addEventListener("dispose",z);const ke=te.textures,Oe=te.isWebGLCubeRenderTarget===!0,Tt=ke.length>1;if(Tt||(Re.__webglTexture===void 0&&(Re.__webglTexture=i.createTexture()),Re.__version=B.version,l.memory.textures++),Oe){se.__webglFramebuffer=[];for(let dt=0;dt<6;dt++)if(B.mipmaps&&B.mipmaps.length>0){se.__webglFramebuffer[dt]=[];for(let Nt=0;Nt<B.mipmaps.length;Nt++)se.__webglFramebuffer[dt][Nt]=i.createFramebuffer()}else se.__webglFramebuffer[dt]=i.createFramebuffer()}else{if(B.mipmaps&&B.mipmaps.length>0){se.__webglFramebuffer=[];for(let dt=0;dt<B.mipmaps.length;dt++)se.__webglFramebuffer[dt]=i.createFramebuffer()}else se.__webglFramebuffer=i.createFramebuffer();if(Tt)for(let dt=0,Nt=ke.length;dt<Nt;dt++){const jt=n.get(ke[dt]);jt.__webglTexture===void 0&&(jt.__webglTexture=i.createTexture(),l.memory.textures++)}if(te.samples>0&&zt(te)===!1){se.__webglMultisampledFramebuffer=i.createFramebuffer(),se.__webglColorRenderbuffer=[],t.bindFramebuffer(i.FRAMEBUFFER,se.__webglMultisampledFramebuffer);for(let dt=0;dt<ke.length;dt++){const Nt=ke[dt];se.__webglColorRenderbuffer[dt]=i.createRenderbuffer(),i.bindRenderbuffer(i.RENDERBUFFER,se.__webglColorRenderbuffer[dt]);const jt=s.convert(Nt.format,Nt.colorSpace),Xe=s.convert(Nt.type),qe=N(Nt.internalFormat,jt,Xe,Nt.colorSpace,te.isXRRenderTarget===!0),Et=ie(te);i.renderbufferStorageMultisample(i.RENDERBUFFER,Et,qe,te.width,te.height),i.framebufferRenderbuffer(i.FRAMEBUFFER,i.COLOR_ATTACHMENT0+dt,i.RENDERBUFFER,se.__webglColorRenderbuffer[dt])}i.bindRenderbuffer(i.RENDERBUFFER,null),te.depthBuffer&&(se.__webglDepthRenderbuffer=i.createRenderbuffer(),yt(se.__webglDepthRenderbuffer,te,!0)),t.bindFramebuffer(i.FRAMEBUFFER,null)}}if(Oe){t.bindTexture(i.TEXTURE_CUBE_MAP,Re.__webglTexture),ce(i.TEXTURE_CUBE_MAP,B);for(let dt=0;dt<6;dt++)if(B.mipmaps&&B.mipmaps.length>0)for(let Nt=0;Nt<B.mipmaps.length;Nt++)Je(se.__webglFramebuffer[dt][Nt],te,B,i.COLOR_ATTACHMENT0,i.TEXTURE_CUBE_MAP_POSITIVE_X+dt,Nt);else Je(se.__webglFramebuffer[dt],te,B,i.COLOR_ATTACHMENT0,i.TEXTURE_CUBE_MAP_POSITIVE_X+dt,0);w(B)&&S(i.TEXTURE_CUBE_MAP),t.unbindTexture()}else if(Tt){for(let dt=0,Nt=ke.length;dt<Nt;dt++){const jt=ke[dt],Xe=n.get(jt);let qe=i.TEXTURE_2D;(te.isWebGL3DRenderTarget||te.isWebGLArrayRenderTarget)&&(qe=te.isWebGL3DRenderTarget?i.TEXTURE_3D:i.TEXTURE_2D_ARRAY),t.bindTexture(qe,Xe.__webglTexture),ce(qe,jt),Je(se.__webglFramebuffer,te,jt,i.COLOR_ATTACHMENT0+dt,qe,0),w(jt)&&S(qe)}t.unbindTexture()}else{let dt=i.TEXTURE_2D;if((te.isWebGL3DRenderTarget||te.isWebGLArrayRenderTarget)&&(dt=te.isWebGL3DRenderTarget?i.TEXTURE_3D:i.TEXTURE_2D_ARRAY),t.bindTexture(dt,Re.__webglTexture),ce(dt,B),B.mipmaps&&B.mipmaps.length>0)for(let Nt=0;Nt<B.mipmaps.length;Nt++)Je(se.__webglFramebuffer[Nt],te,B,i.COLOR_ATTACHMENT0,dt,Nt);else Je(se.__webglFramebuffer,te,B,i.COLOR_ATTACHMENT0,dt,0);w(B)&&S(dt),t.unbindTexture()}te.depthBuffer&&$t(te)}function xe(te){const B=te.textures;for(let se=0,Re=B.length;se<Re;se++){const ke=B[se];if(w(ke)){const Oe=C(te),Tt=n.get(ke).__webglTexture;t.bindTexture(Oe,Tt),S(Oe),t.unbindTexture()}}}const ze=[],je=[];function ot(te){if(te.samples>0){if(zt(te)===!1){const B=te.textures,se=te.width,Re=te.height;let ke=i.COLOR_BUFFER_BIT;const Oe=te.stencilBuffer?i.DEPTH_STENCIL_ATTACHMENT:i.DEPTH_ATTACHMENT,Tt=n.get(te),dt=B.length>1;if(dt)for(let jt=0;jt<B.length;jt++)t.bindFramebuffer(i.FRAMEBUFFER,Tt.__webglMultisampledFramebuffer),i.framebufferRenderbuffer(i.FRAMEBUFFER,i.COLOR_ATTACHMENT0+jt,i.RENDERBUFFER,null),t.bindFramebuffer(i.FRAMEBUFFER,Tt.__webglFramebuffer),i.framebufferTexture2D(i.DRAW_FRAMEBUFFER,i.COLOR_ATTACHMENT0+jt,i.TEXTURE_2D,null,0);t.bindFramebuffer(i.READ_FRAMEBUFFER,Tt.__webglMultisampledFramebuffer);const Nt=te.texture.mipmaps;Nt&&Nt.length>0?t.bindFramebuffer(i.DRAW_FRAMEBUFFER,Tt.__webglFramebuffer[0]):t.bindFramebuffer(i.DRAW_FRAMEBUFFER,Tt.__webglFramebuffer);for(let jt=0;jt<B.length;jt++){if(te.resolveDepthBuffer&&(te.depthBuffer&&(ke|=i.DEPTH_BUFFER_BIT),te.stencilBuffer&&te.resolveStencilBuffer&&(ke|=i.STENCIL_BUFFER_BIT)),dt){i.framebufferRenderbuffer(i.READ_FRAMEBUFFER,i.COLOR_ATTACHMENT0,i.RENDERBUFFER,Tt.__webglColorRenderbuffer[jt]);const Xe=n.get(B[jt]).__webglTexture;i.framebufferTexture2D(i.DRAW_FRAMEBUFFER,i.COLOR_ATTACHMENT0,i.TEXTURE_2D,Xe,0)}i.blitFramebuffer(0,0,se,Re,0,0,se,Re,ke,i.NEAREST),d===!0&&(ze.length=0,je.length=0,ze.push(i.COLOR_ATTACHMENT0+jt),te.depthBuffer&&te.resolveDepthBuffer===!1&&(ze.push(Oe),je.push(Oe),i.invalidateFramebuffer(i.DRAW_FRAMEBUFFER,je)),i.invalidateFramebuffer(i.READ_FRAMEBUFFER,ze))}if(t.bindFramebuffer(i.READ_FRAMEBUFFER,null),t.bindFramebuffer(i.DRAW_FRAMEBUFFER,null),dt)for(let jt=0;jt<B.length;jt++){t.bindFramebuffer(i.FRAMEBUFFER,Tt.__webglMultisampledFramebuffer),i.framebufferRenderbuffer(i.FRAMEBUFFER,i.COLOR_ATTACHMENT0+jt,i.RENDERBUFFER,Tt.__webglColorRenderbuffer[jt]);const Xe=n.get(B[jt]).__webglTexture;t.bindFramebuffer(i.FRAMEBUFFER,Tt.__webglFramebuffer),i.framebufferTexture2D(i.DRAW_FRAMEBUFFER,i.COLOR_ATTACHMENT0+jt,i.TEXTURE_2D,Xe,0)}t.bindFramebuffer(i.DRAW_FRAMEBUFFER,Tt.__webglMultisampledFramebuffer)}else if(te.depthBuffer&&te.resolveDepthBuffer===!1&&d){const B=te.stencilBuffer?i.DEPTH_STENCIL_ATTACHMENT:i.DEPTH_ATTACHMENT;i.invalidateFramebuffer(i.DRAW_FRAMEBUFFER,[B])}}}function ie(te){return Math.min(a.maxSamples,te.samples)}function zt(te){const B=n.get(te);return te.samples>0&&e.has("WEBGL_multisampled_render_to_texture")===!0&&B.__useRenderToTexture!==!1}function mt(te){const B=l.render.frame;g.get(te)!==B&&(g.set(te,B),te.update())}function Bt(te,B){const se=te.colorSpace,Re=te.format,ke=te.type;return te.isCompressedTexture===!0||te.isVideoTexture===!0||se!==Oo&&se!==uc&&(Pn.getTransfer(se)===ri?(Re!==sa||ke!==ka)&&Rt("WebGLTextures: sRGB encoded textures have to use RGBAFormat and UnsignedByteType."):Qt("WebGLTextures: Unsupported texture color space:",se)),B}function gt(te){return typeof HTMLImageElement<"u"&&te instanceof HTMLImageElement?(p.width=te.naturalWidth||te.width,p.height=te.naturalHeight||te.height):typeof VideoFrame<"u"&&te instanceof VideoFrame?(p.width=te.displayWidth,p.height=te.displayHeight):(p.width=te.width,p.height=te.height),p}this.allocateTextureUnit=X,this.resetTextureUnits=W,this.setTexture2D=le,this.setTexture2DArray=k,this.setTexture3D=Z,this.setTextureCube=ne,this.rebindTextures=nn,this.setupRenderTarget=Vt,this.updateRenderTargetMipmap=xe,this.updateMultisampleRenderTarget=ot,this.setupDepthRenderbuffer=$t,this.setupFrameBufferTexture=Je,this.useMultisampledRTT=zt,this.isReversedDepthBuffer=function(){return t.buffers.depth.getReversed()}}function CO(i,e){function t(n,a=uc){let s;const l=Pn.getTransfer(a);if(n===ka)return i.UNSIGNED_BYTE;if(n===db)return i.UNSIGNED_SHORT_4_4_4_4;if(n===pb)return i.UNSIGNED_SHORT_5_5_5_1;if(n===jE)return i.UNSIGNED_INT_5_9_9_9_REV;if(n===GE)return i.UNSIGNED_INT_10F_11F_11F_REV;if(n===hb)return i.BYTE;if(n===fb)return i.SHORT;if(n===ap)return i.UNSIGNED_SHORT;if(n===tv)return i.INT;if(n===xs)return i.UNSIGNED_INT;if(n===Di)return i.FLOAT;if(n===ji)return i.HALF_FLOAT;if(n===qE)return i.ALPHA;if(n===XE)return i.RGB;if(n===sa)return i.RGBA;if(n===xl)return i.DEPTH_COMPONENT;if(n===du)return i.DEPTH_STENCIL;if(n===nv)return i.RED;if(n===iv)return i.RED_INTEGER;if(n===Jh)return i.RG;if(n===mb)return i.RG_INTEGER;if(n===gb)return i.RGBA_INTEGER;if(n===bg||n===xg||n===Sg||n===Eg)if(l===ri)if(s=e.get("WEBGL_compressed_texture_s3tc_srgb"),s!==null){if(n===bg)return s.COMPRESSED_SRGB_S3TC_DXT1_EXT;if(n===xg)return s.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;if(n===Sg)return s.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;if(n===Eg)return s.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}else return null;else if(s=e.get("WEBGL_compressed_texture_s3tc"),s!==null){if(n===bg)return s.COMPRESSED_RGB_S3TC_DXT1_EXT;if(n===xg)return s.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(n===Sg)return s.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(n===Eg)return s.COMPRESSED_RGBA_S3TC_DXT5_EXT}else return null;if(n===y_||n===__||n===b_||n===x_)if(s=e.get("WEBGL_compressed_texture_pvrtc"),s!==null){if(n===y_)return s.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(n===__)return s.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(n===b_)return s.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(n===x_)return s.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}else return null;if(n===S_||n===E_||n===M_||n===w_||n===T_||n===A_||n===C_)if(s=e.get("WEBGL_compressed_texture_etc"),s!==null){if(n===S_||n===E_)return l===ri?s.COMPRESSED_SRGB8_ETC2:s.COMPRESSED_RGB8_ETC2;if(n===M_)return l===ri?s.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:s.COMPRESSED_RGBA8_ETC2_EAC;if(n===w_)return s.COMPRESSED_R11_EAC;if(n===T_)return s.COMPRESSED_SIGNED_R11_EAC;if(n===A_)return s.COMPRESSED_RG11_EAC;if(n===C_)return s.COMPRESSED_SIGNED_RG11_EAC}else return null;if(n===R_||n===N_||n===O_||n===D_||n===U_||n===L_||n===I_||n===P_||n===z_||n===B_||n===F_||n===k_||n===H_||n===V_)if(s=e.get("WEBGL_compressed_texture_astc"),s!==null){if(n===R_)return l===ri?s.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:s.COMPRESSED_RGBA_ASTC_4x4_KHR;if(n===N_)return l===ri?s.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:s.COMPRESSED_RGBA_ASTC_5x4_KHR;if(n===O_)return l===ri?s.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:s.COMPRESSED_RGBA_ASTC_5x5_KHR;if(n===D_)return l===ri?s.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:s.COMPRESSED_RGBA_ASTC_6x5_KHR;if(n===U_)return l===ri?s.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:s.COMPRESSED_RGBA_ASTC_6x6_KHR;if(n===L_)return l===ri?s.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:s.COMPRESSED_RGBA_ASTC_8x5_KHR;if(n===I_)return l===ri?s.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:s.COMPRESSED_RGBA_ASTC_8x6_KHR;if(n===P_)return l===ri?s.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:s.COMPRESSED_RGBA_ASTC_8x8_KHR;if(n===z_)return l===ri?s.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:s.COMPRESSED_RGBA_ASTC_10x5_KHR;if(n===B_)return l===ri?s.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:s.COMPRESSED_RGBA_ASTC_10x6_KHR;if(n===F_)return l===ri?s.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:s.COMPRESSED_RGBA_ASTC_10x8_KHR;if(n===k_)return l===ri?s.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:s.COMPRESSED_RGBA_ASTC_10x10_KHR;if(n===H_)return l===ri?s.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:s.COMPRESSED_RGBA_ASTC_12x10_KHR;if(n===V_)return l===ri?s.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:s.COMPRESSED_RGBA_ASTC_12x12_KHR}else return null;if(n===j_||n===G_||n===q_)if(s=e.get("EXT_texture_compression_bptc"),s!==null){if(n===j_)return l===ri?s.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT:s.COMPRESSED_RGBA_BPTC_UNORM_EXT;if(n===G_)return s.COMPRESSED_RGB_BPTC_SIGNED_FLOAT_EXT;if(n===q_)return s.COMPRESSED_RGB_BPTC_UNSIGNED_FLOAT_EXT}else return null;if(n===X_||n===W_||n===Y_||n===Z_)if(s=e.get("EXT_texture_compression_rgtc"),s!==null){if(n===X_)return s.COMPRESSED_RED_RGTC1_EXT;if(n===W_)return s.COMPRESSED_SIGNED_RED_RGTC1_EXT;if(n===Y_)return s.COMPRESSED_RED_GREEN_RGTC2_EXT;if(n===Z_)return s.COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT}else return null;return n===rp?i.UNSIGNED_INT_24_8:i[n]!==void 0?i[n]:null}return{convert:t}}const wk=`
void main() {

	gl_Position = vec4( position, 1.0 );

}`,Tk=`
uniform sampler2DArray depthColor;
uniform float depthWidth;
uniform float depthHeight;

void main() {

	vec2 coord = vec2( gl_FragCoord.x / depthWidth, gl_FragCoord.y / depthHeight );

	if ( coord.x >= 1.0 ) {

		gl_FragDepth = texture( depthColor, vec3( coord.x - 1.0, coord.y, 1 ) ).r;

	} else {

		gl_FragDepth = texture( depthColor, vec3( coord.x, coord.y, 0 ) ).r;

	}

}`;class Ak{constructor(){this.texture=null,this.mesh=null,this.depthNear=0,this.depthFar=0}init(e,t){if(this.texture===null){const n=new nM(e.texture);(e.depthNear!==t.depthNear||e.depthFar!==t.depthFar)&&(this.depthNear=e.depthNear,this.depthFar=e.depthFar),this.texture=n}}getMesh(e){if(this.texture!==null&&this.mesh===null){const t=e.cameras[0].viewport,n=new ja({vertexShader:wk,fragmentShader:Tk,uniforms:{depthColor:{value:this.texture},depthWidth:{value:t.z},depthHeight:{value:t.w}}});this.mesh=new Ui(new gc(20,20),n)}return this.mesh}reset(){this.texture=null,this.mesh=null}getDepthTexture(){return this.texture}}class Ck extends Sl{constructor(e,t){super();const n=this;let a=null,s=1,l=null,u="local-floor",d=1,p=null,g=null,y=null,_=null,b=null,x=null;const T=typeof XRWebGLBinding<"u",w=new Ak,S={},C=t.getContextAttributes();let N=null,O=null;const P=[],U=[],z=new Ke;let H=null;const D=new ra;D.viewport=new yi;const L=new ra;L.viewport=new yi;const j=[D,L],W=new yO;let X=null,K=null;this.cameraAutoUpdate=!0,this.enabled=!1,this.isPresenting=!1,this.getController=function(ve){let Ce=P[ve];return Ce===void 0&&(Ce=new Yy,P[ve]=Ce),Ce.getTargetRaySpace()},this.getControllerGrip=function(ve){let Ce=P[ve];return Ce===void 0&&(Ce=new Yy,P[ve]=Ce),Ce.getGripSpace()},this.getHand=function(ve){let Ce=P[ve];return Ce===void 0&&(Ce=new Yy,P[ve]=Ce),Ce.getHandSpace()};function le(ve){const Ce=U.indexOf(ve.inputSource);if(Ce===-1)return;const Je=P[Ce];Je!==void 0&&(Je.update(ve.inputSource,ve.frame,p||l),Je.dispatchEvent({type:ve.type,data:ve.inputSource}))}function k(){a.removeEventListener("select",le),a.removeEventListener("selectstart",le),a.removeEventListener("selectend",le),a.removeEventListener("squeeze",le),a.removeEventListener("squeezestart",le),a.removeEventListener("squeezeend",le),a.removeEventListener("end",k),a.removeEventListener("inputsourceschange",Z);for(let ve=0;ve<P.length;ve++){const Ce=U[ve];Ce!==null&&(U[ve]=null,P[ve].disconnect(Ce))}X=null,K=null,w.reset();for(const ve in S)delete S[ve];e.setRenderTarget(N),b=null,_=null,y=null,a=null,O=null,nt.stop(),n.isPresenting=!1,e.setPixelRatio(H),e.setSize(z.width,z.height,!1),n.dispatchEvent({type:"sessionend"})}this.setFramebufferScaleFactor=function(ve){s=ve,n.isPresenting===!0&&Rt("WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(ve){u=ve,n.isPresenting===!0&&Rt("WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return p||l},this.setReferenceSpace=function(ve){p=ve},this.getBaseLayer=function(){return _!==null?_:b},this.getBinding=function(){return y===null&&T&&(y=new XRWebGLBinding(a,t)),y},this.getFrame=function(){return x},this.getSession=function(){return a},this.setSession=async function(ve){if(a=ve,a!==null){if(N=e.getRenderTarget(),a.addEventListener("select",le),a.addEventListener("selectstart",le),a.addEventListener("selectend",le),a.addEventListener("squeeze",le),a.addEventListener("squeezestart",le),a.addEventListener("squeezeend",le),a.addEventListener("end",k),a.addEventListener("inputsourceschange",Z),C.xrCompatible!==!0&&await t.makeXRCompatible(),H=e.getPixelRatio(),e.getSize(z),T&&"createProjectionLayer"in XRWebGLBinding.prototype){let Je=null,yt=null,St=null;C.depth&&(St=C.stencil?t.DEPTH24_STENCIL8:t.DEPTH_COMPONENT24,Je=C.stencil?du:xl,yt=C.stencil?rp:xs);const $t={colorFormat:t.RGBA8,depthFormat:St,scaleFactor:s};y=this.getBinding(),_=y.createProjectionLayer($t),a.updateRenderState({layers:[_]}),e.setPixelRatio(1),e.setSize(_.textureWidth,_.textureHeight,!1),O=new Ta(_.textureWidth,_.textureHeight,{format:sa,type:ka,depthTexture:new fp(_.textureWidth,_.textureHeight,yt,void 0,void 0,void 0,void 0,void 0,void 0,Je),stencilBuffer:C.stencil,colorSpace:e.outputColorSpace,samples:C.antialias?4:0,resolveDepthBuffer:_.ignoreDepthValues===!1,resolveStencilBuffer:_.ignoreDepthValues===!1})}else{const Je={antialias:C.antialias,alpha:!0,depth:C.depth,stencil:C.stencil,framebufferScaleFactor:s};b=new XRWebGLLayer(a,t,Je),a.updateRenderState({baseLayer:b}),e.setPixelRatio(1),e.setSize(b.framebufferWidth,b.framebufferHeight,!1),O=new Ta(b.framebufferWidth,b.framebufferHeight,{format:sa,type:ka,colorSpace:e.outputColorSpace,stencilBuffer:C.stencil,resolveDepthBuffer:b.ignoreDepthValues===!1,resolveStencilBuffer:b.ignoreDepthValues===!1})}O.isXRRenderTarget=!0,this.setFoveation(d),p=null,l=await a.requestReferenceSpace(u),nt.setContext(a),nt.start(),n.isPresenting=!0,n.dispatchEvent({type:"sessionstart"})}},this.getEnvironmentBlendMode=function(){if(a!==null)return a.environmentBlendMode},this.getDepthTexture=function(){return w.getDepthTexture()};function Z(ve){for(let Ce=0;Ce<ve.removed.length;Ce++){const Je=ve.removed[Ce],yt=U.indexOf(Je);yt>=0&&(U[yt]=null,P[yt].disconnect(Je))}for(let Ce=0;Ce<ve.added.length;Ce++){const Je=ve.added[Ce];let yt=U.indexOf(Je);if(yt===-1){for(let $t=0;$t<P.length;$t++)if($t>=U.length){U.push(Je),yt=$t;break}else if(U[$t]===null){U[$t]=Je,yt=$t;break}if(yt===-1)break}const St=P[yt];St&&St.connect(Je)}}const ne=new ee,pe=new ee;function ge(ve,Ce,Je){ne.setFromMatrixPosition(Ce.matrixWorld),pe.setFromMatrixPosition(Je.matrixWorld);const yt=ne.distanceTo(pe),St=Ce.projectionMatrix.elements,$t=Je.projectionMatrix.elements,nn=St[14]/(St[10]-1),Vt=St[14]/(St[10]+1),xe=(St[9]+1)/St[5],ze=(St[9]-1)/St[5],je=(St[8]-1)/St[0],ot=($t[8]+1)/$t[0],ie=nn*je,zt=nn*ot,mt=yt/(-je+ot),Bt=mt*-je;if(Ce.matrixWorld.decompose(ve.position,ve.quaternion,ve.scale),ve.translateX(Bt),ve.translateZ(mt),ve.matrixWorld.compose(ve.position,ve.quaternion,ve.scale),ve.matrixWorldInverse.copy(ve.matrixWorld).invert(),St[10]===-1)ve.projectionMatrix.copy(Ce.projectionMatrix),ve.projectionMatrixInverse.copy(Ce.projectionMatrixInverse);else{const gt=nn+mt,te=Vt+mt,B=ie-Bt,se=zt+(yt-Bt),Re=xe*Vt/te*gt,ke=ze*Vt/te*gt;ve.projectionMatrix.makePerspective(B,se,Re,ke,gt,te),ve.projectionMatrixInverse.copy(ve.projectionMatrix).invert()}}function J(ve,Ce){Ce===null?ve.matrixWorld.copy(ve.matrix):ve.matrixWorld.multiplyMatrices(Ce.matrixWorld,ve.matrix),ve.matrixWorldInverse.copy(ve.matrixWorld).invert()}this.updateCamera=function(ve){if(a===null)return;let Ce=ve.near,Je=ve.far;w.texture!==null&&(w.depthNear>0&&(Ce=w.depthNear),w.depthFar>0&&(Je=w.depthFar)),W.near=L.near=D.near=Ce,W.far=L.far=D.far=Je,(X!==W.near||K!==W.far)&&(a.updateRenderState({depthNear:W.near,depthFar:W.far}),X=W.near,K=W.far),W.layers.mask=ve.layers.mask|6,D.layers.mask=W.layers.mask&3,L.layers.mask=W.layers.mask&5;const yt=ve.parent,St=W.cameras;J(W,yt);for(let $t=0;$t<St.length;$t++)J(St[$t],yt);St.length===2?ge(W,D,L):W.projectionMatrix.copy(D.projectionMatrix),ce(ve,W,yt)};function ce(ve,Ce,Je){Je===null?ve.matrix.copy(Ce.matrixWorld):(ve.matrix.copy(Je.matrixWorld),ve.matrix.invert(),ve.matrix.multiply(Ce.matrixWorld)),ve.matrix.decompose(ve.position,ve.quaternion,ve.scale),ve.updateMatrixWorld(!0),ve.projectionMatrix.copy(Ce.projectionMatrix),ve.projectionMatrixInverse.copy(Ce.projectionMatrixInverse),ve.isPerspectiveCamera&&(ve.fov=lp*2*Math.atan(1/ve.projectionMatrix.elements[5]),ve.zoom=1)}this.getCamera=function(){return W},this.getFoveation=function(){if(!(_===null&&b===null))return d},this.setFoveation=function(ve){d=ve,_!==null&&(_.fixedFoveation=ve),b!==null&&b.fixedFoveation!==void 0&&(b.fixedFoveation=ve)},this.hasDepthSensing=function(){return w.texture!==null},this.getDepthSensingMesh=function(){return w.getMesh(W)},this.getCameraTexture=function(ve){return S[ve]};let Se=null;function Le(ve,Ce){if(g=Ce.getViewerPose(p||l),x=Ce,g!==null){const Je=g.views;b!==null&&(e.setRenderTargetFramebuffer(O,b.framebuffer),e.setRenderTarget(O));let yt=!1;Je.length!==W.cameras.length&&(W.cameras.length=0,yt=!0);for(let Vt=0;Vt<Je.length;Vt++){const xe=Je[Vt];let ze=null;if(b!==null)ze=b.getViewport(xe);else{const ot=y.getViewSubImage(_,xe);ze=ot.viewport,Vt===0&&(e.setRenderTargetTextures(O,ot.colorTexture,ot.depthStencilTexture),e.setRenderTarget(O))}let je=j[Vt];je===void 0&&(je=new ra,je.layers.enable(Vt),je.viewport=new yi,j[Vt]=je),je.matrix.fromArray(xe.transform.matrix),je.matrix.decompose(je.position,je.quaternion,je.scale),je.projectionMatrix.fromArray(xe.projectionMatrix),je.projectionMatrixInverse.copy(je.projectionMatrix).invert(),je.viewport.set(ze.x,ze.y,ze.width,ze.height),Vt===0&&(W.matrix.copy(je.matrix),W.matrix.decompose(W.position,W.quaternion,W.scale)),yt===!0&&W.cameras.push(je)}const St=a.enabledFeatures;if(St&&St.includes("depth-sensing")&&a.depthUsage=="gpu-optimized"&&T){y=n.getBinding();const Vt=y.getDepthInformation(Je[0]);Vt&&Vt.isValid&&Vt.texture&&w.init(Vt,a.renderState)}if(St&&St.includes("camera-access")&&T){e.state.unbindTexture(),y=n.getBinding();for(let Vt=0;Vt<Je.length;Vt++){const xe=Je[Vt].camera;if(xe){let ze=S[xe];ze||(ze=new nM,S[xe]=ze);const je=y.getCameraImage(xe);ze.sourceTexture=je}}}}for(let Je=0;Je<P.length;Je++){const yt=U[Je],St=P[Je];yt!==null&&St!==void 0&&St.update(yt,Ce,p||l)}Se&&Se(ve,Ce),Ce.detectedPlanes&&n.dispatchEvent({type:"planesdetected",data:Ce}),x=null}const nt=new EO;nt.setAnimationLoop(Le),this.setAnimationLoop=function(ve){Se=ve},this.dispose=function(){}}}const Rh=new Ss,Rk=new on;function Nk(i,e){function t(w,S){w.matrixAutoUpdate===!0&&w.updateMatrix(),S.value.copy(w.matrix)}function n(w,S){S.color.getRGB(w.fogColor.value,AN(i)),S.isFog?(w.fogNear.value=S.near,w.fogFar.value=S.far):S.isFogExp2&&(w.fogDensity.value=S.density)}function a(w,S,C,N,O){S.isMeshBasicMaterial||S.isMeshLambertMaterial?s(w,S):S.isMeshToonMaterial?(s(w,S),y(w,S)):S.isMeshPhongMaterial?(s(w,S),g(w,S)):S.isMeshStandardMaterial?(s(w,S),_(w,S),S.isMeshPhysicalMaterial&&b(w,S,O)):S.isMeshMatcapMaterial?(s(w,S),x(w,S)):S.isMeshDepthMaterial?s(w,S):S.isMeshDistanceMaterial?(s(w,S),T(w,S)):S.isMeshNormalMaterial?s(w,S):S.isLineBasicMaterial?(l(w,S),S.isLineDashedMaterial&&u(w,S)):S.isPointsMaterial?d(w,S,C,N):S.isSpriteMaterial?p(w,S):S.isShadowMaterial?(w.color.value.copy(S.color),w.opacity.value=S.opacity):S.isShaderMaterial&&(S.uniformsNeedUpdate=!1)}function s(w,S){w.opacity.value=S.opacity,S.color&&w.diffuse.value.copy(S.color),S.emissive&&w.emissive.value.copy(S.emissive).multiplyScalar(S.emissiveIntensity),S.map&&(w.map.value=S.map,t(S.map,w.mapTransform)),S.alphaMap&&(w.alphaMap.value=S.alphaMap,t(S.alphaMap,w.alphaMapTransform)),S.bumpMap&&(w.bumpMap.value=S.bumpMap,t(S.bumpMap,w.bumpMapTransform),w.bumpScale.value=S.bumpScale,S.side===jr&&(w.bumpScale.value*=-1)),S.normalMap&&(w.normalMap.value=S.normalMap,t(S.normalMap,w.normalMapTransform),w.normalScale.value.copy(S.normalScale),S.side===jr&&w.normalScale.value.negate()),S.displacementMap&&(w.displacementMap.value=S.displacementMap,t(S.displacementMap,w.displacementMapTransform),w.displacementScale.value=S.displacementScale,w.displacementBias.value=S.displacementBias),S.emissiveMap&&(w.emissiveMap.value=S.emissiveMap,t(S.emissiveMap,w.emissiveMapTransform)),S.specularMap&&(w.specularMap.value=S.specularMap,t(S.specularMap,w.specularMapTransform)),S.alphaTest>0&&(w.alphaTest.value=S.alphaTest);const C=e.get(S),N=C.envMap,O=C.envMapRotation;N&&(w.envMap.value=N,Rh.copy(O),Rh.x*=-1,Rh.y*=-1,Rh.z*=-1,N.isCubeTexture&&N.isRenderTargetTexture===!1&&(Rh.y*=-1,Rh.z*=-1),w.envMapRotation.value.setFromMatrix4(Rk.makeRotationFromEuler(Rh)),w.flipEnvMap.value=N.isCubeTexture&&N.isRenderTargetTexture===!1?-1:1,w.reflectivity.value=S.reflectivity,w.ior.value=S.ior,w.refractionRatio.value=S.refractionRatio),S.lightMap&&(w.lightMap.value=S.lightMap,w.lightMapIntensity.value=S.lightMapIntensity,t(S.lightMap,w.lightMapTransform)),S.aoMap&&(w.aoMap.value=S.aoMap,w.aoMapIntensity.value=S.aoMapIntensity,t(S.aoMap,w.aoMapTransform))}function l(w,S){w.diffuse.value.copy(S.color),w.opacity.value=S.opacity,S.map&&(w.map.value=S.map,t(S.map,w.mapTransform))}function u(w,S){w.dashSize.value=S.dashSize,w.totalSize.value=S.dashSize+S.gapSize,w.scale.value=S.scale}function d(w,S,C,N){w.diffuse.value.copy(S.color),w.opacity.value=S.opacity,w.size.value=S.size*C,w.scale.value=N*.5,S.map&&(w.map.value=S.map,t(S.map,w.uvTransform)),S.alphaMap&&(w.alphaMap.value=S.alphaMap,t(S.alphaMap,w.alphaMapTransform)),S.alphaTest>0&&(w.alphaTest.value=S.alphaTest)}function p(w,S){w.diffuse.value.copy(S.color),w.opacity.value=S.opacity,w.rotation.value=S.rotation,S.map&&(w.map.value=S.map,t(S.map,w.mapTransform)),S.alphaMap&&(w.alphaMap.value=S.alphaMap,t(S.alphaMap,w.alphaMapTransform)),S.alphaTest>0&&(w.alphaTest.value=S.alphaTest)}function g(w,S){w.specular.value.copy(S.specular),w.shininess.value=Math.max(S.shininess,1e-4)}function y(w,S){S.gradientMap&&(w.gradientMap.value=S.gradientMap)}function _(w,S){w.metalness.value=S.metalness,S.metalnessMap&&(w.metalnessMap.value=S.metalnessMap,t(S.metalnessMap,w.metalnessMapTransform)),w.roughness.value=S.roughness,S.roughnessMap&&(w.roughnessMap.value=S.roughnessMap,t(S.roughnessMap,w.roughnessMapTransform)),S.envMap&&(w.envMapIntensity.value=S.envMapIntensity)}function b(w,S,C){w.ior.value=S.ior,S.sheen>0&&(w.sheenColor.value.copy(S.sheenColor).multiplyScalar(S.sheen),w.sheenRoughness.value=S.sheenRoughness,S.sheenColorMap&&(w.sheenColorMap.value=S.sheenColorMap,t(S.sheenColorMap,w.sheenColorMapTransform)),S.sheenRoughnessMap&&(w.sheenRoughnessMap.value=S.sheenRoughnessMap,t(S.sheenRoughnessMap,w.sheenRoughnessMapTransform))),S.clearcoat>0&&(w.clearcoat.value=S.clearcoat,w.clearcoatRoughness.value=S.clearcoatRoughness,S.clearcoatMap&&(w.clearcoatMap.value=S.clearcoatMap,t(S.clearcoatMap,w.clearcoatMapTransform)),S.clearcoatRoughnessMap&&(w.clearcoatRoughnessMap.value=S.clearcoatRoughnessMap,t(S.clearcoatRoughnessMap,w.clearcoatRoughnessMapTransform)),S.clearcoatNormalMap&&(w.clearcoatNormalMap.value=S.clearcoatNormalMap,t(S.clearcoatNormalMap,w.clearcoatNormalMapTransform),w.clearcoatNormalScale.value.copy(S.clearcoatNormalScale),S.side===jr&&w.clearcoatNormalScale.value.negate())),S.dispersion>0&&(w.dispersion.value=S.dispersion),S.iridescence>0&&(w.iridescence.value=S.iridescence,w.iridescenceIOR.value=S.iridescenceIOR,w.iridescenceThicknessMinimum.value=S.iridescenceThicknessRange[0],w.iridescenceThicknessMaximum.value=S.iridescenceThicknessRange[1],S.iridescenceMap&&(w.iridescenceMap.value=S.iridescenceMap,t(S.iridescenceMap,w.iridescenceMapTransform)),S.iridescenceThicknessMap&&(w.iridescenceThicknessMap.value=S.iridescenceThicknessMap,t(S.iridescenceThicknessMap,w.iridescenceThicknessMapTransform))),S.transmission>0&&(w.transmission.value=S.transmission,w.transmissionSamplerMap.value=C.texture,w.transmissionSamplerSize.value.set(C.width,C.height),S.transmissionMap&&(w.transmissionMap.value=S.transmissionMap,t(S.transmissionMap,w.transmissionMapTransform)),w.thickness.value=S.thickness,S.thicknessMap&&(w.thicknessMap.value=S.thicknessMap,t(S.thicknessMap,w.thicknessMapTransform)),w.attenuationDistance.value=S.attenuationDistance,w.attenuationColor.value.copy(S.attenuationColor)),S.anisotropy>0&&(w.anisotropyVector.value.set(S.anisotropy*Math.cos(S.anisotropyRotation),S.anisotropy*Math.sin(S.anisotropyRotation)),S.anisotropyMap&&(w.anisotropyMap.value=S.anisotropyMap,t(S.anisotropyMap,w.anisotropyMapTransform))),w.specularIntensity.value=S.specularIntensity,w.specularColor.value.copy(S.specularColor),S.specularColorMap&&(w.specularColorMap.value=S.specularColorMap,t(S.specularColorMap,w.specularColorMapTransform)),S.specularIntensityMap&&(w.specularIntensityMap.value=S.specularIntensityMap,t(S.specularIntensityMap,w.specularIntensityMapTransform))}function x(w,S){S.matcap&&(w.matcap.value=S.matcap)}function T(w,S){const C=e.get(S).light;w.referencePosition.value.setFromMatrixPosition(C.matrixWorld),w.nearDistance.value=C.shadow.camera.near,w.farDistance.value=C.shadow.camera.far}return{refreshFogUniforms:n,refreshMaterialUniforms:a}}function Ok(i,e,t,n){let a={},s={},l=[];const u=i.getParameter(i.MAX_UNIFORM_BUFFER_BINDINGS);function d(C,N){const O=N.program;n.uniformBlockBinding(C,O)}function p(C,N){let O=a[C.id];O===void 0&&(x(C),O=g(C),a[C.id]=O,C.addEventListener("dispose",w));const P=N.program;n.updateUBOMapping(C,P);const U=e.render.frame;s[C.id]!==U&&(_(C),s[C.id]=U)}function g(C){const N=y();C.__bindingPointIndex=N;const O=i.createBuffer(),P=C.__size,U=C.usage;return i.bindBuffer(i.UNIFORM_BUFFER,O),i.bufferData(i.UNIFORM_BUFFER,P,U),i.bindBuffer(i.UNIFORM_BUFFER,null),i.bindBufferBase(i.UNIFORM_BUFFER,N,O),O}function y(){for(let C=0;C<u;C++)if(l.indexOf(C)===-1)return l.push(C),C;return Qt("WebGLRenderer: Maximum number of simultaneously usable uniforms groups reached."),0}function _(C){const N=a[C.id],O=C.uniforms,P=C.__cache;i.bindBuffer(i.UNIFORM_BUFFER,N);for(let U=0,z=O.length;U<z;U++){const H=Array.isArray(O[U])?O[U]:[O[U]];for(let D=0,L=H.length;D<L;D++){const j=H[D];if(b(j,U,D,P)===!0){const W=j.__offset,X=Array.isArray(j.value)?j.value:[j.value];let K=0;for(let le=0;le<X.length;le++){const k=X[le],Z=T(k);typeof k=="number"||typeof k=="boolean"?(j.__data[0]=k,i.bufferSubData(i.UNIFORM_BUFFER,W+K,j.__data)):k.isMatrix3?(j.__data[0]=k.elements[0],j.__data[1]=k.elements[1],j.__data[2]=k.elements[2],j.__data[3]=0,j.__data[4]=k.elements[3],j.__data[5]=k.elements[4],j.__data[6]=k.elements[5],j.__data[7]=0,j.__data[8]=k.elements[6],j.__data[9]=k.elements[7],j.__data[10]=k.elements[8],j.__data[11]=0):(k.toArray(j.__data,K),K+=Z.storage/Float32Array.BYTES_PER_ELEMENT)}i.bufferSubData(i.UNIFORM_BUFFER,W,j.__data)}}}i.bindBuffer(i.UNIFORM_BUFFER,null)}function b(C,N,O,P){const U=C.value,z=N+"_"+O;if(P[z]===void 0)return typeof U=="number"||typeof U=="boolean"?P[z]=U:P[z]=U.clone(),!0;{const H=P[z];if(typeof U=="number"||typeof U=="boolean"){if(H!==U)return P[z]=U,!0}else if(H.equals(U)===!1)return H.copy(U),!0}return!1}function x(C){const N=C.uniforms;let O=0;const P=16;for(let z=0,H=N.length;z<H;z++){const D=Array.isArray(N[z])?N[z]:[N[z]];for(let L=0,j=D.length;L<j;L++){const W=D[L],X=Array.isArray(W.value)?W.value:[W.value];for(let K=0,le=X.length;K<le;K++){const k=X[K],Z=T(k),ne=O%P,pe=ne%Z.boundary,ge=ne+pe;O+=pe,ge!==0&&P-ge<Z.storage&&(O+=P-ge),W.__data=new Float32Array(Z.storage/Float32Array.BYTES_PER_ELEMENT),W.__offset=O,O+=Z.storage}}}const U=O%P;return U>0&&(O+=P-U),C.__size=O,C.__cache={},this}function T(C){const N={boundary:0,storage:0};return typeof C=="number"||typeof C=="boolean"?(N.boundary=4,N.storage=4):C.isVector2?(N.boundary=8,N.storage=8):C.isVector3||C.isColor?(N.boundary=16,N.storage=12):C.isVector4?(N.boundary=16,N.storage=16):C.isMatrix3?(N.boundary=48,N.storage=48):C.isMatrix4?(N.boundary=64,N.storage=64):C.isTexture?Rt("WebGLRenderer: Texture samplers can not be part of an uniforms group."):Rt("WebGLRenderer: Unsupported uniform value type.",C),N}function w(C){const N=C.target;N.removeEventListener("dispose",w);const O=l.indexOf(N.__bindingPointIndex);l.splice(O,1),i.deleteBuffer(a[N.id]),delete a[N.id],delete s[N.id]}function S(){for(const C in a)i.deleteBuffer(a[C]);l=[],a={},s={}}return{bind:d,update:p,dispose:S}}const Dk=new Uint16Array([12469,15057,12620,14925,13266,14620,13807,14376,14323,13990,14545,13625,14713,13328,14840,12882,14931,12528,14996,12233,15039,11829,15066,11525,15080,11295,15085,10976,15082,10705,15073,10495,13880,14564,13898,14542,13977,14430,14158,14124,14393,13732,14556,13410,14702,12996,14814,12596,14891,12291,14937,11834,14957,11489,14958,11194,14943,10803,14921,10506,14893,10278,14858,9960,14484,14039,14487,14025,14499,13941,14524,13740,14574,13468,14654,13106,14743,12678,14818,12344,14867,11893,14889,11509,14893,11180,14881,10751,14852,10428,14812,10128,14765,9754,14712,9466,14764,13480,14764,13475,14766,13440,14766,13347,14769,13070,14786,12713,14816,12387,14844,11957,14860,11549,14868,11215,14855,10751,14825,10403,14782,10044,14729,9651,14666,9352,14599,9029,14967,12835,14966,12831,14963,12804,14954,12723,14936,12564,14917,12347,14900,11958,14886,11569,14878,11247,14859,10765,14828,10401,14784,10011,14727,9600,14660,9289,14586,8893,14508,8533,15111,12234,15110,12234,15104,12216,15092,12156,15067,12010,15028,11776,14981,11500,14942,11205,14902,10752,14861,10393,14812,9991,14752,9570,14682,9252,14603,8808,14519,8445,14431,8145,15209,11449,15208,11451,15202,11451,15190,11438,15163,11384,15117,11274,15055,10979,14994,10648,14932,10343,14871,9936,14803,9532,14729,9218,14645,8742,14556,8381,14461,8020,14365,7603,15273,10603,15272,10607,15267,10619,15256,10631,15231,10614,15182,10535,15118,10389,15042,10167,14963,9787,14883,9447,14800,9115,14710,8665,14615,8318,14514,7911,14411,7507,14279,7198,15314,9675,15313,9683,15309,9712,15298,9759,15277,9797,15229,9773,15166,9668,15084,9487,14995,9274,14898,8910,14800,8539,14697,8234,14590,7790,14479,7409,14367,7067,14178,6621,15337,8619,15337,8631,15333,8677,15325,8769,15305,8871,15264,8940,15202,8909,15119,8775,15022,8565,14916,8328,14804,8009,14688,7614,14569,7287,14448,6888,14321,6483,14088,6171,15350,7402,15350,7419,15347,7480,15340,7613,15322,7804,15287,7973,15229,8057,15148,8012,15046,7846,14933,7611,14810,7357,14682,7069,14552,6656,14421,6316,14251,5948,14007,5528,15356,5942,15356,5977,15353,6119,15348,6294,15332,6551,15302,6824,15249,7044,15171,7122,15070,7050,14949,6861,14818,6611,14679,6349,14538,6067,14398,5651,14189,5311,13935,4958,15359,4123,15359,4153,15356,4296,15353,4646,15338,5160,15311,5508,15263,5829,15188,6042,15088,6094,14966,6001,14826,5796,14678,5543,14527,5287,14377,4985,14133,4586,13869,4257,15360,1563,15360,1642,15358,2076,15354,2636,15341,3350,15317,4019,15273,4429,15203,4732,15105,4911,14981,4932,14836,4818,14679,4621,14517,4386,14359,4156,14083,3795,13808,3437,15360,122,15360,137,15358,285,15355,636,15344,1274,15322,2177,15281,2765,15215,3223,15120,3451,14995,3569,14846,3567,14681,3466,14511,3305,14344,3121,14037,2800,13753,2467,15360,0,15360,1,15359,21,15355,89,15346,253,15325,479,15287,796,15225,1148,15133,1492,15008,1749,14856,1882,14685,1886,14506,1783,14324,1608,13996,1398,13702,1183]);let ml=null;function Uk(){return ml===null&&(ml=new Xs(Dk,16,16,Jh,ji),ml.name="DFG_LUT",ml.minFilter=Vn,ml.magFilter=Vn,ml.wrapS=Qi,ml.wrapT=Qi,ml.generateMipmaps=!1,ml.needsUpdate=!0),ml}class wM{constructor(e={}){const{canvas:t=MN(),context:n=null,depth:a=!0,stencil:s=!1,alpha:l=!1,antialias:u=!1,premultipliedAlpha:d=!0,preserveDrawingBuffer:p=!1,powerPreference:g="default",failIfMajorPerformanceCaveat:y=!1,reversedDepthBuffer:_=!1,outputBufferType:b=ka}=e;this.isWebGLRenderer=!0;let x;if(n!==null){if(typeof WebGLRenderingContext<"u"&&n instanceof WebGLRenderingContext)throw new Error("THREE.WebGLRenderer: WebGL 1 is not supported since r163.");x=n.getContextAttributes().alpha}else x=l;const T=b,w=new Set([gb,mb,iv]),S=new Set([ka,xs,ap,rp,db,pb]),C=new Uint32Array(4),N=new Int32Array(4);let O=null,P=null;const U=[],z=[];let H=null;this.domElement=t,this.debug={checkShaderErrors:!0,onShaderError:null},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this.toneMapping=qs,this.toneMappingExposure=1,this.transmissionResolutionScale=1;const D=this;let L=!1;this._outputColorSpace=Fa;let j=0,W=0,X=null,K=-1,le=null;const k=new yi,Z=new yi;let ne=null;const pe=new Ut(0);let ge=0,J=t.width,ce=t.height,Se=1,Le=null,nt=null;const ve=new yi(0,0,J,ce),Ce=new yi(0,0,J,ce);let Je=!1;const yt=new bp;let St=!1,$t=!1;const nn=new on,Vt=new ee,xe=new yi,ze={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};let je=!1;function ot(){return X===null?Se:1}let ie=n;function zt(G,oe){return t.getContext(G,oe)}try{const G={alpha:!0,depth:a,stencil:s,antialias:u,premultipliedAlpha:d,preserveDrawingBuffer:p,powerPreference:g,failIfMajorPerformanceCaveat:y};if("setAttribute"in t&&t.setAttribute("data-engine",`three.js r${yp}`),t.addEventListener("webglcontextlost",Gt,!1),t.addEventListener("webglcontextrestored",yn,!1),t.addEventListener("webglcontextcreationerror",dn,!1),ie===null){const oe="webgl2";if(ie=zt(oe,G),ie===null)throw zt(oe)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}}catch(G){throw Qt("WebGLRenderer: "+G.message),G}let mt,Bt,gt,te,B,se,Re,ke,Oe,Tt,dt,Nt,jt,Xe,qe,Et,ae,Ee,Qe,ue,Ae,et,Mt,it;function Ye(){mt=new L8(ie),mt.init(),et=new CO(ie,mt),Bt=new w8(ie,mt,e,et),gt=new Ek(ie,mt),Bt.reversedDepthBuffer&&_&&gt.buffers.depth.setReversed(!0),te=new z8(ie),B=new lk,se=new Mk(ie,mt,gt,B,Bt,et,te),Re=new A8(D),ke=new U8(D),Oe=new H5(ie),Mt=new E8(ie,Oe),Tt=new I8(ie,Oe,te,Mt),dt=new F8(ie,Tt,Oe,te),Qe=new B8(ie,Bt,se),Et=new T8(B),Nt=new ok(D,Re,ke,mt,Bt,Mt,Et),jt=new Nk(D,B),Xe=new uk,qe=new gk(mt),Ee=new S8(D,Re,ke,gt,dt,x,d),ae=new xk(D,dt,Bt),it=new Ok(ie,te,Bt,gt),ue=new M8(ie,mt,te),Ae=new P8(ie,mt,te),te.programs=Nt.programs,D.capabilities=Bt,D.extensions=mt,D.properties=B,D.renderLists=Xe,D.shadowMap=ae,D.state=gt,D.info=te}Ye(),T!==ka&&(H=new H8(T,t.width,t.height,a,s));const lt=new Ck(D,ie);this.xr=lt,this.getContext=function(){return ie},this.getContextAttributes=function(){return ie.getContextAttributes()},this.forceContextLoss=function(){const G=mt.get("WEBGL_lose_context");G&&G.loseContext()},this.forceContextRestore=function(){const G=mt.get("WEBGL_lose_context");G&&G.restoreContext()},this.getPixelRatio=function(){return Se},this.setPixelRatio=function(G){G!==void 0&&(Se=G,this.setSize(J,ce,!1))},this.getSize=function(G){return G.set(J,ce)},this.setSize=function(G,oe,ye=!0){if(lt.isPresenting){Rt("WebGLRenderer: Can't change size while VR device is presenting.");return}J=G,ce=oe,t.width=Math.floor(G*Se),t.height=Math.floor(oe*Se),ye===!0&&(t.style.width=G+"px",t.style.height=oe+"px"),H!==null&&H.setSize(t.width,t.height),this.setViewport(0,0,G,oe)},this.getDrawingBufferSize=function(G){return G.set(J*Se,ce*Se).floor()},this.setDrawingBufferSize=function(G,oe,ye){J=G,ce=oe,Se=ye,t.width=Math.floor(G*ye),t.height=Math.floor(oe*ye),this.setViewport(0,0,G,oe)},this.setEffects=function(G){if(T===ka){console.error("THREE.WebGLRenderer: setEffects() requires outputBufferType set to HalfFloatType or FloatType.");return}if(G){for(let oe=0;oe<G.length;oe++)if(G[oe].isOutputPass===!0){console.warn("THREE.WebGLRenderer: OutputPass is not needed in setEffects(). Tone mapping and color space conversion are applied automatically.");break}}H.setEffects(G||[])},this.getCurrentViewport=function(G){return G.copy(k)},this.getViewport=function(G){return G.copy(ve)},this.setViewport=function(G,oe,ye,be){G.isVector4?ve.set(G.x,G.y,G.z,G.w):ve.set(G,oe,ye,be),gt.viewport(k.copy(ve).multiplyScalar(Se).round())},this.getScissor=function(G){return G.copy(Ce)},this.setScissor=function(G,oe,ye,be){G.isVector4?Ce.set(G.x,G.y,G.z,G.w):Ce.set(G,oe,ye,be),gt.scissor(Z.copy(Ce).multiplyScalar(Se).round())},this.getScissorTest=function(){return Je},this.setScissorTest=function(G){gt.setScissorTest(Je=G)},this.setOpaqueSort=function(G){Le=G},this.setTransparentSort=function(G){nt=G},this.getClearColor=function(G){return G.copy(Ee.getClearColor())},this.setClearColor=function(){Ee.setClearColor(...arguments)},this.getClearAlpha=function(){return Ee.getClearAlpha()},this.setClearAlpha=function(){Ee.setClearAlpha(...arguments)},this.clear=function(G=!0,oe=!0,ye=!0){let be=0;if(G){let me=!1;if(X!==null){const at=X.texture.format;me=w.has(at)}if(me){const at=X.texture.type,ut=S.has(at),ht=Ee.getClearColor(),wt=Ee.getClearAlpha(),_t=ht.r,kt=ht.g,bt=ht.b;ut?(C[0]=_t,C[1]=kt,C[2]=bt,C[3]=wt,ie.clearBufferuiv(ie.COLOR,0,C)):(N[0]=_t,N[1]=kt,N[2]=bt,N[3]=wt,ie.clearBufferiv(ie.COLOR,0,N))}else be|=ie.COLOR_BUFFER_BIT}oe&&(be|=ie.DEPTH_BUFFER_BIT),ye&&(be|=ie.STENCIL_BUFFER_BIT,this.state.buffers.stencil.setMask(4294967295)),ie.clear(be)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){t.removeEventListener("webglcontextlost",Gt,!1),t.removeEventListener("webglcontextrestored",yn,!1),t.removeEventListener("webglcontextcreationerror",dn,!1),Ee.dispose(),Xe.dispose(),qe.dispose(),B.dispose(),Re.dispose(),ke.dispose(),dt.dispose(),Mt.dispose(),it.dispose(),Nt.dispose(),lt.dispose(),lt.removeEventListener("sessionstart",br),lt.removeEventListener("sessionend",oa),en.stop()};function Gt(G){G.preventDefault(),Hg("WebGLRenderer: Context Lost."),L=!0}function yn(){Hg("WebGLRenderer: Context Restored."),L=!1;const G=te.autoReset,oe=ae.enabled,ye=ae.autoUpdate,be=ae.needsUpdate,me=ae.type;Ye(),te.autoReset=G,ae.enabled=oe,ae.autoUpdate=ye,ae.needsUpdate=be,ae.type=me}function dn(G){Qt("WebGLRenderer: A WebGL context could not be created. Reason: ",G.statusMessage)}function fi(G){const oe=G.target;oe.removeEventListener("dispose",fi),$i(oe)}function $i(G){Ml(G),B.remove(G)}function Ml(G){const oe=B.get(G).programs;oe!==void 0&&(oe.forEach(function(ye){Nt.releaseProgram(ye)}),G.isShaderMaterial&&Nt.releaseShaderCache(G))}this.renderBufferDirect=function(G,oe,ye,be,me,at){oe===null&&(oe=ze);const ut=me.isMesh&&me.matrixWorld.determinant()<0,ht=ct(G,oe,ye,be,me);gt.setMaterial(be,ut);let wt=ye.index,_t=1;if(be.wireframe===!0){if(wt=Tt.getWireframeAttribute(ye),wt===void 0)return;_t=2}const kt=ye.drawRange,bt=ye.attributes.position;let Lt=kt.start*_t,_n=(kt.start+kt.count)*_t;at!==null&&(Lt=Math.max(Lt,at.start*_t),_n=Math.min(_n,(at.start+at.count)*_t)),wt!==null?(Lt=Math.max(Lt,0),_n=Math.min(_n,wt.count)):bt!=null&&(Lt=Math.max(Lt,0),_n=Math.min(_n,bt.count));const Gn=_n-Lt;if(Gn<0||Gn===1/0)return;Mt.setup(me,be,ht,ye,wt);let En,qt=ue;if(wt!==null&&(En=Oe.get(wt),qt=Ae,qt.setIndex(En)),me.isMesh)be.wireframe===!0?(gt.setLineWidth(be.wireframeLinewidth*ot()),qt.setMode(ie.LINES)):qt.setMode(ie.TRIANGLES);else if(me.isLine){let At=be.linewidth;At===void 0&&(At=1),gt.setLineWidth(At*ot()),me.isLineSegments?qt.setMode(ie.LINES):me.isLineLoop?qt.setMode(ie.LINE_LOOP):qt.setMode(ie.LINE_STRIP)}else me.isPoints?qt.setMode(ie.POINTS):me.isSprite&&qt.setMode(ie.TRIANGLES);if(me.isBatchedMesh)if(me._multiDrawInstances!==null)op("WebGLRenderer: renderMultiDrawInstances has been deprecated and will be removed in r184. Append to renderMultiDraw arguments and use indirection."),qt.renderMultiDrawInstances(me._multiDrawStarts,me._multiDrawCounts,me._multiDrawCount,me._multiDrawInstances);else if(mt.get("WEBGL_multi_draw"))qt.renderMultiDraw(me._multiDrawStarts,me._multiDrawCounts,me._multiDrawCount);else{const At=me._multiDrawStarts,Zt=me._multiDrawCounts,Ct=me._multiDrawCount,qn=wt?Oe.get(wt).bytesPerElement:1,ca=B.get(be).currentProgram.getUniforms();for(let jn=0;jn<Ct;jn++)ca.setValue(ie,"_gl_DrawID",jn),qt.render(At[jn]/qn,Zt[jn])}else if(me.isInstancedMesh)qt.renderInstances(Lt,Gn,me.count);else if(ye.isInstancedBufferGeometry){const At=ye._maxInstanceCount!==void 0?ye._maxInstanceCount:1/0,Zt=Math.min(ye.instanceCount,At);qt.renderInstances(Lt,Gn,Zt)}else qt.render(Lt,Gn)};function Ys(G,oe,ye){G.transparent===!0&&G.side===To&&G.forceSinglePass===!1?(G.side=jr,G.needsUpdate=!0,Ue(G,oe,ye),G.side=dc,G.needsUpdate=!0,Ue(G,oe,ye),G.side=To):Ue(G,oe,ye)}this.compile=function(G,oe,ye=null){ye===null&&(ye=G),P=qe.get(ye),P.init(oe),z.push(P),ye.traverseVisible(function(me){me.isLight&&me.layers.test(oe.layers)&&(P.pushLight(me),me.castShadow&&P.pushShadow(me))}),G!==ye&&G.traverseVisible(function(me){me.isLight&&me.layers.test(oe.layers)&&(P.pushLight(me),me.castShadow&&P.pushShadow(me))}),P.setupLights();const be=new Set;return G.traverse(function(me){if(!(me.isMesh||me.isPoints||me.isLine||me.isSprite))return;const at=me.material;if(at)if(Array.isArray(at))for(let ut=0;ut<at.length;ut++){const ht=at[ut];Ys(ht,ye,me),be.add(ht)}else Ys(at,ye,me),be.add(at)}),P=z.pop(),be},this.compileAsync=function(G,oe,ye=null){const be=this.compile(G,oe,ye);return new Promise(me=>{function at(){if(be.forEach(function(ut){B.get(ut).currentProgram.isReady()&&be.delete(ut)}),be.size===0){me(G);return}setTimeout(at,10)}mt.get("KHR_parallel_shader_compile")!==null?at():setTimeout(at,10)})};let _r=null;function er(G){_r&&_r(G)}function br(){en.stop()}function oa(){en.start()}const en=new EO;en.setAnimationLoop(er),typeof self<"u"&&en.setContext(self),this.setAnimationLoop=function(G){_r=G,lt.setAnimationLoop(G),G===null?en.stop():en.start()},lt.addEventListener("sessionstart",br),lt.addEventListener("sessionend",oa),this.render=function(G,oe){if(oe!==void 0&&oe.isCamera!==!0){Qt("WebGLRenderer.render: camera is not an instance of THREE.Camera.");return}if(L===!0)return;const ye=lt.enabled===!0&&lt.isPresenting===!0,be=H!==null&&(X===null||ye)&&H.begin(D,X);if(G.matrixWorldAutoUpdate===!0&&G.updateMatrixWorld(),oe.parent===null&&oe.matrixWorldAutoUpdate===!0&&oe.updateMatrixWorld(),lt.enabled===!0&&lt.isPresenting===!0&&(H===null||H.isCompositing()===!1)&&(lt.cameraAutoUpdate===!0&&lt.updateCamera(oe),oe=lt.getCamera()),G.isScene===!0&&G.onBeforeRender(D,G,oe,X),P=qe.get(G,z.length),P.init(oe),z.push(P),nn.multiplyMatrices(oe.projectionMatrix,oe.matrixWorldInverse),yt.setFromProjectionMatrix(nn,_s,oe.reversedDepth),$t=this.localClippingEnabled,St=Et.init(this.clippingPlanes,$t),O=Xe.get(G,U.length),O.init(),U.push(O),lt.enabled===!0&&lt.isPresenting===!0){const ut=D.xr.getDepthSensingMesh();ut!==null&&la(ut,oe,-1/0,D.sortObjects)}la(G,oe,0,D.sortObjects),O.finish(),D.sortObjects===!0&&O.sort(Le,nt),je=lt.enabled===!1||lt.isPresenting===!1||lt.hasDepthSensing()===!1,je&&Ee.addToRenderList(O,G),this.info.render.frame++,St===!0&&Et.beginShadows();const me=P.state.shadowsArray;if(ae.render(me,G,oe),St===!0&&Et.endShadows(),this.info.autoReset===!0&&this.info.reset(),(be&&H.hasRenderPass())===!1){const ut=O.opaque,ht=O.transmissive;if(P.setupLights(),oe.isArrayCamera){const wt=oe.cameras;if(ht.length>0)for(let _t=0,kt=wt.length;_t<kt;_t++){const bt=wt[_t];V(ut,ht,G,bt)}je&&Ee.render(G);for(let _t=0,kt=wt.length;_t<kt;_t++){const bt=wt[_t];gn(O,G,bt,bt.viewport)}}else ht.length>0&&V(ut,ht,G,oe),je&&Ee.render(G),gn(O,G,oe)}X!==null&&W===0&&(se.updateMultisampleRenderTarget(X),se.updateRenderTargetMipmap(X)),be&&H.end(D),G.isScene===!0&&G.onAfterRender(D,G,oe),Mt.resetDefaultState(),K=-1,le=null,z.pop(),z.length>0?(P=z[z.length-1],St===!0&&Et.setGlobalState(D.clippingPlanes,P.state.camera)):P=null,U.pop(),U.length>0?O=U[U.length-1]:O=null};function la(G,oe,ye,be){if(G.visible===!1)return;if(G.layers.test(oe.layers)){if(G.isGroup)ye=G.renderOrder;else if(G.isLOD)G.autoUpdate===!0&&G.update(oe);else if(G.isLight)P.pushLight(G),G.castShadow&&P.pushShadow(G);else if(G.isSprite){if(!G.frustumCulled||yt.intersectsSprite(G)){be&&xe.setFromMatrixPosition(G.matrixWorld).applyMatrix4(nn);const ut=dt.update(G),ht=G.material;ht.visible&&O.push(G,ut,ht,ye,xe.z,null)}}else if((G.isMesh||G.isLine||G.isPoints)&&(!G.frustumCulled||yt.intersectsObject(G))){const ut=dt.update(G),ht=G.material;if(be&&(G.boundingSphere!==void 0?(G.boundingSphere===null&&G.computeBoundingSphere(),xe.copy(G.boundingSphere.center)):(ut.boundingSphere===null&&ut.computeBoundingSphere(),xe.copy(ut.boundingSphere.center)),xe.applyMatrix4(G.matrixWorld).applyMatrix4(nn)),Array.isArray(ht)){const wt=ut.groups;for(let _t=0,kt=wt.length;_t<kt;_t++){const bt=wt[_t],Lt=ht[bt.materialIndex];Lt&&Lt.visible&&O.push(G,ut,Lt,ye,xe.z,bt)}}else ht.visible&&O.push(G,ut,ht,ye,xe.z,null)}}const at=G.children;for(let ut=0,ht=at.length;ut<ht;ut++)la(at[ut],oe,ye,be)}function gn(G,oe,ye,be){const{opaque:me,transmissive:at,transparent:ut}=G;P.setupLightsView(ye),St===!0&&Et.setGlobalState(D.clippingPlanes,ye),be&&gt.viewport(k.copy(be)),me.length>0&&$(me,oe,ye),at.length>0&&$(at,oe,ye),ut.length>0&&$(ut,oe,ye),gt.buffers.depth.setTest(!0),gt.buffers.depth.setMask(!0),gt.buffers.color.setMask(!0),gt.setPolygonOffset(!1)}function V(G,oe,ye,be){if((ye.isScene===!0?ye.overrideMaterial:null)!==null)return;if(P.state.transmissionRenderTarget[be.id]===void 0){const Lt=mt.has("EXT_color_buffer_half_float")||mt.has("EXT_color_buffer_float");P.state.transmissionRenderTarget[be.id]=new Ta(1,1,{generateMipmaps:!0,type:Lt?ji:ka,minFilter:yl,samples:Bt.samples,stencilBuffer:s,resolveDepthBuffer:!1,resolveStencilBuffer:!1,colorSpace:Pn.workingColorSpace})}const at=P.state.transmissionRenderTarget[be.id],ut=be.viewport||k;at.setSize(ut.z*D.transmissionResolutionScale,ut.w*D.transmissionResolutionScale);const ht=D.getRenderTarget(),wt=D.getActiveCubeFace(),_t=D.getActiveMipmapLevel();D.setRenderTarget(at),D.getClearColor(pe),ge=D.getClearAlpha(),ge<1&&D.setClearColor(16777215,.5),D.clear(),je&&Ee.render(ye);const kt=D.toneMapping;D.toneMapping=qs;const bt=be.viewport;if(be.viewport!==void 0&&(be.viewport=void 0),P.setupLightsView(be),St===!0&&Et.setGlobalState(D.clippingPlanes,be),$(G,ye,be),se.updateMultisampleRenderTarget(at),se.updateRenderTargetMipmap(at),mt.has("WEBGL_multisampled_render_to_texture")===!1){let Lt=!1;for(let _n=0,Gn=oe.length;_n<Gn;_n++){const En=oe[_n],{object:qt,geometry:At,material:Zt,group:Ct}=En;if(Zt.side===To&&qt.layers.test(be.layers)){const qn=Zt.side;Zt.side=jr,Zt.needsUpdate=!0,de(qt,ye,be,At,Zt,Ct),Zt.side=qn,Zt.needsUpdate=!0,Lt=!0}}Lt===!0&&(se.updateMultisampleRenderTarget(at),se.updateRenderTargetMipmap(at))}D.setRenderTarget(ht,wt,_t),D.setClearColor(pe,ge),bt!==void 0&&(be.viewport=bt),D.toneMapping=kt}function $(G,oe,ye){const be=oe.isScene===!0?oe.overrideMaterial:null;for(let me=0,at=G.length;me<at;me++){const ut=G[me],{object:ht,geometry:wt,group:_t}=ut;let kt=ut.material;kt.allowOverride===!0&&be!==null&&(kt=be),ht.layers.test(ye.layers)&&de(ht,oe,ye,wt,kt,_t)}}function de(G,oe,ye,be,me,at){G.onBeforeRender(D,oe,ye,be,me,at),G.modelViewMatrix.multiplyMatrices(ye.matrixWorldInverse,G.matrixWorld),G.normalMatrix.getNormalMatrix(G.modelViewMatrix),me.onBeforeRender(D,oe,ye,be,G,at),me.transparent===!0&&me.side===To&&me.forceSinglePass===!1?(me.side=jr,me.needsUpdate=!0,D.renderBufferDirect(ye,oe,be,me,G,at),me.side=dc,me.needsUpdate=!0,D.renderBufferDirect(ye,oe,be,me,G,at),me.side=To):D.renderBufferDirect(ye,oe,be,me,G,at),G.onAfterRender(D,oe,ye,be,me,at)}function Ue(G,oe,ye){oe.isScene!==!0&&(oe=ze);const be=B.get(G),me=P.state.lights,at=P.state.shadowsArray,ut=me.state.version,ht=Nt.getParameters(G,me.state,at,oe,ye),wt=Nt.getProgramCacheKey(ht);let _t=be.programs;be.environment=G.isMeshStandardMaterial?oe.environment:null,be.fog=oe.fog,be.envMap=(G.isMeshStandardMaterial?ke:Re).get(G.envMap||be.environment),be.envMapRotation=be.environment!==null&&G.envMap===null?oe.environmentRotation:G.envMapRotation,_t===void 0&&(G.addEventListener("dispose",fi),_t=new Map,be.programs=_t);let kt=_t.get(wt);if(kt!==void 0){if(be.currentProgram===kt&&be.lightsStateVersion===ut)return He(G,ht),kt}else ht.uniforms=Nt.getUniforms(G),G.onBeforeCompile(ht,D),kt=Nt.acquireProgram(ht,wt),_t.set(wt,kt),be.uniforms=ht.uniforms;const bt=be.uniforms;return(!G.isShaderMaterial&&!G.isRawShaderMaterial||G.clipping===!0)&&(bt.clippingPlanes=Et.uniform),He(G,ht),be.needsLights=st(G),be.lightsStateVersion=ut,be.needsLights&&(bt.ambientLightColor.value=me.state.ambient,bt.lightProbe.value=me.state.probe,bt.directionalLights.value=me.state.directional,bt.directionalLightShadows.value=me.state.directionalShadow,bt.spotLights.value=me.state.spot,bt.spotLightShadows.value=me.state.spotShadow,bt.rectAreaLights.value=me.state.rectArea,bt.ltc_1.value=me.state.rectAreaLTC1,bt.ltc_2.value=me.state.rectAreaLTC2,bt.pointLights.value=me.state.point,bt.pointLightShadows.value=me.state.pointShadow,bt.hemisphereLights.value=me.state.hemi,bt.directionalShadowMap.value=me.state.directionalShadowMap,bt.directionalShadowMatrix.value=me.state.directionalShadowMatrix,bt.spotShadowMap.value=me.state.spotShadowMap,bt.spotLightMatrix.value=me.state.spotLightMatrix,bt.spotLightMap.value=me.state.spotLightMap,bt.pointShadowMap.value=me.state.pointShadowMap,bt.pointShadowMatrix.value=me.state.pointShadowMatrix),be.currentProgram=kt,be.uniformsList=null,kt}function Ve(G){if(G.uniformsList===null){const oe=G.currentProgram.getUniforms();G.uniformsList=Zy.seqWithValue(oe.seq,G.uniforms)}return G.uniformsList}function He(G,oe){const ye=B.get(G);ye.outputColorSpace=oe.outputColorSpace,ye.batching=oe.batching,ye.batchingColor=oe.batchingColor,ye.instancing=oe.instancing,ye.instancingColor=oe.instancingColor,ye.instancingMorph=oe.instancingMorph,ye.skinning=oe.skinning,ye.morphTargets=oe.morphTargets,ye.morphNormals=oe.morphNormals,ye.morphColors=oe.morphColors,ye.morphTargetsCount=oe.morphTargetsCount,ye.numClippingPlanes=oe.numClippingPlanes,ye.numIntersection=oe.numClipIntersection,ye.vertexAlphas=oe.vertexAlphas,ye.vertexTangents=oe.vertexTangents,ye.toneMapping=oe.toneMapping}function ct(G,oe,ye,be,me){oe.isScene!==!0&&(oe=ze),se.resetTextureUnits();const at=oe.fog,ut=be.isMeshStandardMaterial?oe.environment:null,ht=X===null?D.outputColorSpace:X.isXRRenderTarget===!0?X.texture.colorSpace:Oo,wt=(be.isMeshStandardMaterial?ke:Re).get(be.envMap||ut),_t=be.vertexColors===!0&&!!ye.attributes.color&&ye.attributes.color.itemSize===4,kt=!!ye.attributes.tangent&&(!!be.normalMap||be.anisotropy>0),bt=!!ye.morphAttributes.position,Lt=!!ye.morphAttributes.normal,_n=!!ye.morphAttributes.color;let Gn=qs;be.toneMapped&&(X===null||X.isXRRenderTarget===!0)&&(Gn=D.toneMapping);const En=ye.morphAttributes.position||ye.morphAttributes.normal||ye.morphAttributes.color,qt=En!==void 0?En.length:0,At=B.get(be),Zt=P.state.lights;if(St===!0&&($t===!0||G!==le)){const qi=G===le&&be.id===K;Et.setState(be,G,qi)}let Ct=!1;be.version===At.__version?(At.needsLights&&At.lightsStateVersion!==Zt.state.version||At.outputColorSpace!==ht||me.isBatchedMesh&&At.batching===!1||!me.isBatchedMesh&&At.batching===!0||me.isBatchedMesh&&At.batchingColor===!0&&me.colorTexture===null||me.isBatchedMesh&&At.batchingColor===!1&&me.colorTexture!==null||me.isInstancedMesh&&At.instancing===!1||!me.isInstancedMesh&&At.instancing===!0||me.isSkinnedMesh&&At.skinning===!1||!me.isSkinnedMesh&&At.skinning===!0||me.isInstancedMesh&&At.instancingColor===!0&&me.instanceColor===null||me.isInstancedMesh&&At.instancingColor===!1&&me.instanceColor!==null||me.isInstancedMesh&&At.instancingMorph===!0&&me.morphTexture===null||me.isInstancedMesh&&At.instancingMorph===!1&&me.morphTexture!==null||At.envMap!==wt||be.fog===!0&&At.fog!==at||At.numClippingPlanes!==void 0&&(At.numClippingPlanes!==Et.numPlanes||At.numIntersection!==Et.numIntersection)||At.vertexAlphas!==_t||At.vertexTangents!==kt||At.morphTargets!==bt||At.morphNormals!==Lt||At.morphColors!==_n||At.toneMapping!==Gn||At.morphTargetsCount!==qt)&&(Ct=!0):(Ct=!0,At.__version=be.version);let qn=At.currentProgram;Ct===!0&&(qn=Ue(be,oe,me));let ca=!1,jn=!1,Li=!1;const Zn=qn.getUniforms(),Ei=At.uniforms;if(gt.useProgram(qn.program)&&(ca=!0,jn=!0,Li=!0),be.id!==K&&(K=be.id,jn=!0),ca||le!==G){gt.buffers.depth.getReversed()&&G.reversedDepth!==!0&&(G._reversedDepth=!0,G.updateProjectionMatrix()),Zn.setValue(ie,"projectionMatrix",G.projectionMatrix),Zn.setValue(ie,"viewMatrix",G.matrixWorldInverse);const Xi=Zn.map.cameraPosition;Xi!==void 0&&Xi.setValue(ie,Vt.setFromMatrixPosition(G.matrixWorld)),Bt.logarithmicDepthBuffer&&Zn.setValue(ie,"logDepthBufFC",2/(Math.log(G.far+1)/Math.LN2)),(be.isMeshPhongMaterial||be.isMeshToonMaterial||be.isMeshLambertMaterial||be.isMeshBasicMaterial||be.isMeshStandardMaterial||be.isShaderMaterial)&&Zn.setValue(ie,"isOrthographic",G.isOrthographicCamera===!0),le!==G&&(le=G,jn=!0,Li=!0)}if(At.needsLights&&(Zt.state.directionalShadowMap.length>0&&Zn.setValue(ie,"directionalShadowMap",Zt.state.directionalShadowMap,se),Zt.state.spotShadowMap.length>0&&Zn.setValue(ie,"spotShadowMap",Zt.state.spotShadowMap,se),Zt.state.pointShadowMap.length>0&&Zn.setValue(ie,"pointShadowMap",Zt.state.pointShadowMap,se)),me.isSkinnedMesh){Zn.setOptional(ie,me,"bindMatrix"),Zn.setOptional(ie,me,"bindMatrixInverse");const qi=me.skeleton;qi&&(qi.boneTexture===null&&qi.computeBoneTexture(),Zn.setValue(ie,"boneTexture",qi.boneTexture,se))}me.isBatchedMesh&&(Zn.setOptional(ie,me,"batchingTexture"),Zn.setValue(ie,"batchingTexture",me._matricesTexture,se),Zn.setOptional(ie,me,"batchingIdTexture"),Zn.setValue(ie,"batchingIdTexture",me._indirectTexture,se),Zn.setOptional(ie,me,"batchingColorTexture"),me._colorsTexture!==null&&Zn.setValue(ie,"batchingColorTexture",me._colorsTexture,se));const Gi=ye.morphAttributes;if((Gi.position!==void 0||Gi.normal!==void 0||Gi.color!==void 0)&&Qe.update(me,ye,qn),(jn||At.receiveShadow!==me.receiveShadow)&&(At.receiveShadow=me.receiveShadow,Zn.setValue(ie,"receiveShadow",me.receiveShadow)),be.isMeshGouraudMaterial&&be.envMap!==null&&(Ei.envMap.value=wt,Ei.flipEnvMap.value=wt.isCubeTexture&&wt.isRenderTargetTexture===!1?-1:1),be.isMeshStandardMaterial&&be.envMap===null&&oe.environment!==null&&(Ei.envMapIntensity.value=oe.environmentIntensity),Ei.dfgLUT!==void 0&&(Ei.dfgLUT.value=Uk()),jn&&(Zn.setValue(ie,"toneMappingExposure",D.toneMappingExposure),At.needsLights&&rt(Ei,Li),at&&be.fog===!0&&jt.refreshFogUniforms(Ei,at),jt.refreshMaterialUniforms(Ei,be,Se,ce,P.state.transmissionRenderTarget[G.id]),Zy.upload(ie,Ve(At),Ei,se)),be.isShaderMaterial&&be.uniformsNeedUpdate===!0&&(Zy.upload(ie,Ve(At),Ei,se),be.uniformsNeedUpdate=!1),be.isSpriteMaterial&&Zn.setValue(ie,"center",me.center),Zn.setValue(ie,"modelViewMatrix",me.modelViewMatrix),Zn.setValue(ie,"normalMatrix",me.normalMatrix),Zn.setValue(ie,"modelMatrix",me.matrixWorld),be.isShaderMaterial||be.isRawShaderMaterial){const qi=be.uniformsGroups;for(let Xi=0,wl=qi.length;Xi<wl;Xi++){const xr=qi[Xi];it.update(xr,qn),it.bind(xr,qn)}}return qn}function rt(G,oe){G.ambientLightColor.needsUpdate=oe,G.lightProbe.needsUpdate=oe,G.directionalLights.needsUpdate=oe,G.directionalLightShadows.needsUpdate=oe,G.pointLights.needsUpdate=oe,G.pointLightShadows.needsUpdate=oe,G.spotLights.needsUpdate=oe,G.spotLightShadows.needsUpdate=oe,G.rectAreaLights.needsUpdate=oe,G.hemisphereLights.needsUpdate=oe}function st(G){return G.isMeshLambertMaterial||G.isMeshToonMaterial||G.isMeshPhongMaterial||G.isMeshStandardMaterial||G.isShadowMaterial||G.isShaderMaterial&&G.lights===!0}this.getActiveCubeFace=function(){return j},this.getActiveMipmapLevel=function(){return W},this.getRenderTarget=function(){return X},this.setRenderTargetTextures=function(G,oe,ye){const be=B.get(G);be.__autoAllocateDepthBuffer=G.resolveDepthBuffer===!1,be.__autoAllocateDepthBuffer===!1&&(be.__useRenderToTexture=!1),B.get(G.texture).__webglTexture=oe,B.get(G.depthTexture).__webglTexture=be.__autoAllocateDepthBuffer?void 0:ye,be.__hasExternalTextures=!0},this.setRenderTargetFramebuffer=function(G,oe){const ye=B.get(G);ye.__webglFramebuffer=oe,ye.__useDefaultFramebuffer=oe===void 0};const tt=ie.createFramebuffer();this.setRenderTarget=function(G,oe=0,ye=0){X=G,j=oe,W=ye;let be=null,me=!1,at=!1;if(G){const ht=B.get(G);if(ht.__useDefaultFramebuffer!==void 0){gt.bindFramebuffer(ie.FRAMEBUFFER,ht.__webglFramebuffer),k.copy(G.viewport),Z.copy(G.scissor),ne=G.scissorTest,gt.viewport(k),gt.scissor(Z),gt.setScissorTest(ne),K=-1;return}else if(ht.__webglFramebuffer===void 0)se.setupRenderTarget(G);else if(ht.__hasExternalTextures)se.rebindTextures(G,B.get(G.texture).__webglTexture,B.get(G.depthTexture).__webglTexture);else if(G.depthBuffer){const kt=G.depthTexture;if(ht.__boundDepthTexture!==kt){if(kt!==null&&B.has(kt)&&(G.width!==kt.image.width||G.height!==kt.image.height))throw new Error("WebGLRenderTarget: Attached DepthTexture is initialized to the incorrect size.");se.setupDepthRenderbuffer(G)}}const wt=G.texture;(wt.isData3DTexture||wt.isDataArrayTexture||wt.isCompressedArrayTexture)&&(at=!0);const _t=B.get(G).__webglFramebuffer;G.isWebGLCubeRenderTarget?(Array.isArray(_t[oe])?be=_t[oe][ye]:be=_t[oe],me=!0):G.samples>0&&se.useMultisampledRTT(G)===!1?be=B.get(G).__webglMultisampledFramebuffer:Array.isArray(_t)?be=_t[ye]:be=_t,k.copy(G.viewport),Z.copy(G.scissor),ne=G.scissorTest}else k.copy(ve).multiplyScalar(Se).floor(),Z.copy(Ce).multiplyScalar(Se).floor(),ne=Je;if(ye!==0&&(be=tt),gt.bindFramebuffer(ie.FRAMEBUFFER,be)&&gt.drawBuffers(G,be),gt.viewport(k),gt.scissor(Z),gt.setScissorTest(ne),me){const ht=B.get(G.texture);ie.framebufferTexture2D(ie.FRAMEBUFFER,ie.COLOR_ATTACHMENT0,ie.TEXTURE_CUBE_MAP_POSITIVE_X+oe,ht.__webglTexture,ye)}else if(at){const ht=oe;for(let wt=0;wt<G.textures.length;wt++){const _t=B.get(G.textures[wt]);ie.framebufferTextureLayer(ie.FRAMEBUFFER,ie.COLOR_ATTACHMENT0+wt,_t.__webglTexture,ye,ht)}}else if(G!==null&&ye!==0){const ht=B.get(G.texture);ie.framebufferTexture2D(ie.FRAMEBUFFER,ie.COLOR_ATTACHMENT0,ie.TEXTURE_2D,ht.__webglTexture,ye)}K=-1},this.readRenderTargetPixels=function(G,oe,ye,be,me,at,ut,ht=0){if(!(G&&G.isWebGLRenderTarget)){Qt("WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");return}let wt=B.get(G).__webglFramebuffer;if(G.isWebGLCubeRenderTarget&&ut!==void 0&&(wt=wt[ut]),wt){gt.bindFramebuffer(ie.FRAMEBUFFER,wt);try{const _t=G.textures[ht],kt=_t.format,bt=_t.type;if(!Bt.textureFormatReadable(kt)){Qt("WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");return}if(!Bt.textureTypeReadable(bt)){Qt("WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");return}oe>=0&&oe<=G.width-be&&ye>=0&&ye<=G.height-me&&(G.textures.length>1&&ie.readBuffer(ie.COLOR_ATTACHMENT0+ht),ie.readPixels(oe,ye,be,me,et.convert(kt),et.convert(bt),at))}finally{const _t=X!==null?B.get(X).__webglFramebuffer:null;gt.bindFramebuffer(ie.FRAMEBUFFER,_t)}}},this.readRenderTargetPixelsAsync=async function(G,oe,ye,be,me,at,ut,ht=0){if(!(G&&G.isWebGLRenderTarget))throw new Error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");let wt=B.get(G).__webglFramebuffer;if(G.isWebGLCubeRenderTarget&&ut!==void 0&&(wt=wt[ut]),wt)if(oe>=0&&oe<=G.width-be&&ye>=0&&ye<=G.height-me){gt.bindFramebuffer(ie.FRAMEBUFFER,wt);const _t=G.textures[ht],kt=_t.format,bt=_t.type;if(!Bt.textureFormatReadable(kt))throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: renderTarget is not in RGBA or implementation defined format.");if(!Bt.textureTypeReadable(bt))throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: renderTarget is not in UnsignedByteType or implementation defined type.");const Lt=ie.createBuffer();ie.bindBuffer(ie.PIXEL_PACK_BUFFER,Lt),ie.bufferData(ie.PIXEL_PACK_BUFFER,at.byteLength,ie.STREAM_READ),G.textures.length>1&&ie.readBuffer(ie.COLOR_ATTACHMENT0+ht),ie.readPixels(oe,ye,be,me,et.convert(kt),et.convert(bt),0);const _n=X!==null?B.get(X).__webglFramebuffer:null;gt.bindFramebuffer(ie.FRAMEBUFFER,_n);const Gn=ie.fenceSync(ie.SYNC_GPU_COMMANDS_COMPLETE,0);return ie.flush(),await XP(ie,Gn,4),ie.bindBuffer(ie.PIXEL_PACK_BUFFER,Lt),ie.getBufferSubData(ie.PIXEL_PACK_BUFFER,0,at),ie.deleteBuffer(Lt),ie.deleteSync(Gn),at}else throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: requested read bounds are out of range.")},this.copyFramebufferToTexture=function(G,oe=null,ye=0){const be=Math.pow(2,-ye),me=Math.floor(G.image.width*be),at=Math.floor(G.image.height*be),ut=oe!==null?oe.x:0,ht=oe!==null?oe.y:0;se.setTexture2D(G,0),ie.copyTexSubImage2D(ie.TEXTURE_2D,ye,0,0,ut,ht,me,at),gt.unbindTexture()};const vt=ie.createFramebuffer(),pt=ie.createFramebuffer();this.copyTextureToTexture=function(G,oe,ye=null,be=null,me=0,at=null){at===null&&(me!==0?(op("WebGLRenderer: copyTextureToTexture function signature has changed to support src and dst mipmap levels."),at=me,me=0):at=0);let ut,ht,wt,_t,kt,bt,Lt,_n,Gn;const En=G.isCompressedTexture?G.mipmaps[at]:G.image;if(ye!==null)ut=ye.max.x-ye.min.x,ht=ye.max.y-ye.min.y,wt=ye.isBox3?ye.max.z-ye.min.z:1,_t=ye.min.x,kt=ye.min.y,bt=ye.isBox3?ye.min.z:0;else{const Gi=Math.pow(2,-me);ut=Math.floor(En.width*Gi),ht=Math.floor(En.height*Gi),G.isDataArrayTexture?wt=En.depth:G.isData3DTexture?wt=Math.floor(En.depth*Gi):wt=1,_t=0,kt=0,bt=0}be!==null?(Lt=be.x,_n=be.y,Gn=be.z):(Lt=0,_n=0,Gn=0);const qt=et.convert(oe.format),At=et.convert(oe.type);let Zt;oe.isData3DTexture?(se.setTexture3D(oe,0),Zt=ie.TEXTURE_3D):oe.isDataArrayTexture||oe.isCompressedArrayTexture?(se.setTexture2DArray(oe,0),Zt=ie.TEXTURE_2D_ARRAY):(se.setTexture2D(oe,0),Zt=ie.TEXTURE_2D),ie.pixelStorei(ie.UNPACK_FLIP_Y_WEBGL,oe.flipY),ie.pixelStorei(ie.UNPACK_PREMULTIPLY_ALPHA_WEBGL,oe.premultiplyAlpha),ie.pixelStorei(ie.UNPACK_ALIGNMENT,oe.unpackAlignment);const Ct=ie.getParameter(ie.UNPACK_ROW_LENGTH),qn=ie.getParameter(ie.UNPACK_IMAGE_HEIGHT),ca=ie.getParameter(ie.UNPACK_SKIP_PIXELS),jn=ie.getParameter(ie.UNPACK_SKIP_ROWS),Li=ie.getParameter(ie.UNPACK_SKIP_IMAGES);ie.pixelStorei(ie.UNPACK_ROW_LENGTH,En.width),ie.pixelStorei(ie.UNPACK_IMAGE_HEIGHT,En.height),ie.pixelStorei(ie.UNPACK_SKIP_PIXELS,_t),ie.pixelStorei(ie.UNPACK_SKIP_ROWS,kt),ie.pixelStorei(ie.UNPACK_SKIP_IMAGES,bt);const Zn=G.isDataArrayTexture||G.isData3DTexture,Ei=oe.isDataArrayTexture||oe.isData3DTexture;if(G.isDepthTexture){const Gi=B.get(G),qi=B.get(oe),Xi=B.get(Gi.__renderTarget),wl=B.get(qi.__renderTarget);gt.bindFramebuffer(ie.READ_FRAMEBUFFER,Xi.__webglFramebuffer),gt.bindFramebuffer(ie.DRAW_FRAMEBUFFER,wl.__webglFramebuffer);for(let xr=0;xr<wt;xr++)Zn&&(ie.framebufferTextureLayer(ie.READ_FRAMEBUFFER,ie.COLOR_ATTACHMENT0,B.get(G).__webglTexture,me,bt+xr),ie.framebufferTextureLayer(ie.DRAW_FRAMEBUFFER,ie.COLOR_ATTACHMENT0,B.get(oe).__webglTexture,at,Gn+xr)),ie.blitFramebuffer(_t,kt,ut,ht,Lt,_n,ut,ht,ie.DEPTH_BUFFER_BIT,ie.NEAREST);gt.bindFramebuffer(ie.READ_FRAMEBUFFER,null),gt.bindFramebuffer(ie.DRAW_FRAMEBUFFER,null)}else if(me!==0||G.isRenderTargetTexture||B.has(G)){const Gi=B.get(G),qi=B.get(oe);gt.bindFramebuffer(ie.READ_FRAMEBUFFER,vt),gt.bindFramebuffer(ie.DRAW_FRAMEBUFFER,pt);for(let Xi=0;Xi<wt;Xi++)Zn?ie.framebufferTextureLayer(ie.READ_FRAMEBUFFER,ie.COLOR_ATTACHMENT0,Gi.__webglTexture,me,bt+Xi):ie.framebufferTexture2D(ie.READ_FRAMEBUFFER,ie.COLOR_ATTACHMENT0,ie.TEXTURE_2D,Gi.__webglTexture,me),Ei?ie.framebufferTextureLayer(ie.DRAW_FRAMEBUFFER,ie.COLOR_ATTACHMENT0,qi.__webglTexture,at,Gn+Xi):ie.framebufferTexture2D(ie.DRAW_FRAMEBUFFER,ie.COLOR_ATTACHMENT0,ie.TEXTURE_2D,qi.__webglTexture,at),me!==0?ie.blitFramebuffer(_t,kt,ut,ht,Lt,_n,ut,ht,ie.COLOR_BUFFER_BIT,ie.NEAREST):Ei?ie.copyTexSubImage3D(Zt,at,Lt,_n,Gn+Xi,_t,kt,ut,ht):ie.copyTexSubImage2D(Zt,at,Lt,_n,_t,kt,ut,ht);gt.bindFramebuffer(ie.READ_FRAMEBUFFER,null),gt.bindFramebuffer(ie.DRAW_FRAMEBUFFER,null)}else Ei?G.isDataTexture||G.isData3DTexture?ie.texSubImage3D(Zt,at,Lt,_n,Gn,ut,ht,wt,qt,At,En.data):oe.isCompressedArrayTexture?ie.compressedTexSubImage3D(Zt,at,Lt,_n,Gn,ut,ht,wt,qt,En.data):ie.texSubImage3D(Zt,at,Lt,_n,Gn,ut,ht,wt,qt,At,En):G.isDataTexture?ie.texSubImage2D(ie.TEXTURE_2D,at,Lt,_n,ut,ht,qt,At,En.data):G.isCompressedTexture?ie.compressedTexSubImage2D(ie.TEXTURE_2D,at,Lt,_n,En.width,En.height,qt,En.data):ie.texSubImage2D(ie.TEXTURE_2D,at,Lt,_n,ut,ht,qt,At,En);ie.pixelStorei(ie.UNPACK_ROW_LENGTH,Ct),ie.pixelStorei(ie.UNPACK_IMAGE_HEIGHT,qn),ie.pixelStorei(ie.UNPACK_SKIP_PIXELS,ca),ie.pixelStorei(ie.UNPACK_SKIP_ROWS,jn),ie.pixelStorei(ie.UNPACK_SKIP_IMAGES,Li),at===0&&oe.generateMipmaps&&ie.generateMipmap(Zt),gt.unbindTexture()},this.initRenderTarget=function(G){B.get(G).__webglFramebuffer===void 0&&se.setupRenderTarget(G)},this.initTexture=function(G){G.isCubeTexture?se.setTextureCube(G,0):G.isData3DTexture?se.setTexture3D(G,0):G.isDataArrayTexture||G.isCompressedArrayTexture?se.setTexture2DArray(G,0):se.setTexture2D(G,0),gt.unbindTexture()},this.resetState=function(){j=0,W=0,X=null,gt.reset(),Mt.reset()},typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}get coordinateSystem(){return _s}get outputColorSpace(){return this._outputColorSpace}set outputColorSpace(e){this._outputColorSpace=e;const t=this.getContext();t.drawingBufferColorSpace=Pn._getDrawingBufferColorSpace(e),t.unpackColorSpace=Pn._getUnpackColorSpace()}}const Lk=Object.freeze(Object.defineProperty({__proto__:null,ACESFilmicToneMapping:ub,AddEquation:fu,AddOperation:cN,AdditiveAnimationBlendMode:WE,AdditiveBlending:Q1,AgXToneMapping:kE,AlphaFormat:qE,AlwaysCompare:xN,AlwaysDepth:f_,AlwaysStencilFunc:iE,AmbientLight:dO,AnimationAction:xO,AnimationClip:Wg,AnimationLoader:LB,AnimationMixer:o5,AnimationObjectGroup:r5,AnimationUtils:NB,ArcCurve:kN,ArrayCamera:yO,ArrowHelper:D5,AttachedBindMode:tE,Audio:_O,AudioAnalyser:ZB,AudioContext:_M,AudioListener:XB,AudioLoader:jB,AxesHelper:U5,BackSide:jr,BasicDepthPacking:pN,BasicShadowMap:j3,BatchedMesh:LN,Bone:eM,BooleanKeyframeTrack:of,Box2:g5,Box3:Ha,Box3Helper:N5,BoxGeometry:sf,BoxHelper:R5,BufferAttribute:ni,BufferGeometry:mn,BufferGeometryLoader:vO,ByteType:hb,Cache:_l,Camera:Sb,CameraHelper:C5,CanvasTexture:$z,CapsuleGeometry:Nb,CatmullRomCurve3:HN,CineonToneMapping:BE,CircleGeometry:Ob,ClampToEdgeWrapping:Qi,Clock:bM,Color:Ut,ColorKeyframeTrack:mM,ColorManagement:Pn,CompressedArrayTexture:Jz,CompressedCubeTexture:Qz,CompressedTexture:Rb,CompressedTextureLoader:IB,ConeGeometry:ov,ConstantAlphaFactor:sN,ConstantColorFactor:aN,Controls:I5,CubeCamera:CN,CubeDepthTexture:BN,CubeReflectionMapping:No,CubeRefractionMapping:yu,CubeTexture:av,CubeTextureLoader:lO,CubeUVReflectionMapping:_p,CubicBezierCurve:aM,CubicBezierCurve3:VN,CubicInterpolant:aO,CullFaceBack:J1,CullFaceFront:V3,CullFaceFrontBack:iP,CullFaceNone:H3,Curve:Do,CurvePath:GN,CustomBlending:G3,CustomToneMapping:FE,CylinderGeometry:sv,Cylindrical:m5,Data3DTexture:xb,DataArrayTexture:bb,DataTexture:Xs,DataTextureLoader:gM,DataUtils:Gh,DecrementStencilOp:bP,DecrementWrapStencilOp:SP,DefaultLoadingManager:oO,DepthFormat:xl,DepthStencilFormat:du,DepthTexture:fp,DetachedBindMode:uN,DirectionalLight:fO,DirectionalLightHelper:A5,DiscreteInterpolant:rO,DodecahedronGeometry:Db,DoubleSide:To,DstAlphaFactor:$3,DstColorFactor:tN,DynamicCopyUsage:zP,DynamicDrawUsage:OP,DynamicReadUsage:LP,EdgesGeometry:FN,EllipseCurve:Ub,EqualCompare:yN,EqualDepth:p_,EqualStencilFunc:TP,EquirectangularReflectionMapping:ip,EquirectangularRefractionMapping:Ug,Euler:Ss,EventDispatcher:Sl,ExternalTexture:nM,ExtrudeGeometry:Lb,FileLoader:as,Float16BufferAttribute:Rz,Float32BufferAttribute:Ft,FloatType:Di,Fog:wb,FogExp2:Mb,FramebufferTexture:Kz,FrontSide:dc,Frustum:bp,FrustumArray:Cb,GLBufferAttribute:f5,GLSL1:FP,GLSL3:aE,GreaterCompare:_N,GreaterDepth:g_,GreaterEqualCompare:_b,GreaterEqualDepth:m_,GreaterEqualStencilFunc:NP,GreaterStencilFunc:CP,GridHelper:w5,Group:Yd,HalfFloatType:ji,HemisphereLight:cO,HemisphereLightHelper:M5,IcosahedronGeometry:lv,ImageBitmapLoader:VB,ImageLoader:Yg,ImageUtils:wN,IncrementStencilOp:_P,IncrementWrapStencilOp:xP,InstancedBufferAttribute:hp,InstancedBufferGeometry:gO,InstancedInterleavedBuffer:h5,InstancedMesh:UN,Int16BufferAttribute:Az,Int32BufferAttribute:Cz,Int8BufferAttribute:Mz,IntType:tv,InterleavedBuffer:Tb,InterleavedBufferAttribute:Qh,Interpolant:hv,InterpolateDiscrete:Pg,InterpolateLinear:K_,InterpolateSmooth:Wy,InterpolationSamplingMode:VP,InterpolationSamplingType:HP,InvertStencilOp:EP,KeepStencilOp:Ih,KeyframeTrack:Ws,LOD:ON,LatheGeometry:Ib,Layers:cp,LessCompare:vN,LessDepth:d_,LessEqualCompare:yb,LessEqualDepth:Kh,LessEqualStencilFunc:AP,LessStencilFunc:wP,Light:Mu,LightProbe:mO,Line:bu,Line3:_5,LineBasicMaterial:Gr,LineCurve:rM,LineCurve3:jN,LineDashedMaterial:nO,LineLoop:IN,LineSegments:El,LinearFilter:Vn,LinearInterpolant:pM,LinearMipMapLinearFilter:nE,LinearMipMapNearestFilter:sP,LinearMipmapLinearFilter:yl,LinearMipmapNearestFilter:_g,LinearSRGBColorSpace:Oo,LinearToneMapping:PE,LinearTransfer:Bg,Loader:yr,LoaderUtils:cE,LoadingManager:jb,LoopOnce:hN,LoopPingPong:dN,LoopRepeat:fN,MOUSE:Uh,Material:vr,MaterialLoader:Gb,MathUtils:wg,Matrix2:MM,Matrix3:Sn,Matrix4:on,MaxEquation:Y3,Mesh:Ui,MeshBasicMaterial:mc,MeshDepthMaterial:Vb,MeshDistanceMaterial:fM,MeshLambertMaterial:hM,MeshMatcapMaterial:tO,MeshNormalMaterial:eO,MeshPhongMaterial:QN,MeshPhysicalMaterial:JN,MeshStandardMaterial:uM,MeshToonMaterial:$N,MinEquation:W3,MirroredRepeatWrapping:Ig,MixOperation:lN,MultiplyBlending:eE,MultiplyOperation:ev,NearestFilter:Vi,NearestMipMapLinearFilter:rP,NearestMipMapNearestFilter:aP,NearestMipmapLinearFilter:Xd,NearestMipmapNearestFilter:VE,NeutralToneMapping:HE,NeverCompare:gN,NeverDepth:h_,NeverStencilFunc:MP,NoBlending:Ro,NoColorSpace:uc,NoNormalPacking:pP,NoToneMapping:qs,NormalAnimationBlendMode:vb,NormalBlending:Wh,NormalGAPacking:gP,NormalRGPacking:mP,NotEqualCompare:bN,NotEqualDepth:v_,NotEqualStencilFunc:RP,NumberKeyframeTrack:qg,Object3D:Yn,ObjectLoader:kB,ObjectSpaceNormalMap:mN,OctahedronGeometry:cv,OneFactor:K3,OneMinusConstantAlphaFactor:oN,OneMinusConstantColorFactor:rN,OneMinusDstAlphaFactor:eN,OneMinusDstColorFactor:nN,OneMinusSrcAlphaFactor:u_,OneMinusSrcColorFactor:Q3,OrthographicCamera:bl,PCFShadowMap:Jd,PCFSoftShadowMap:yg,PMREMGenerator:dE,Path:eb,PerspectiveCamera:ra,Plane:cc,PlaneGeometry:gc,PlaneHelper:O5,PointLight:hO,PointLightHelper:S5,Points:PN,PointsMaterial:tM,PolarGridHelper:T5,PolyhedronGeometry:Eu,PositionalAudio:YB,PropertyBinding:Wn,PropertyMixer:bO,QuadraticBezierCurve:sM,QuadraticBezierCurve3:oM,Quaternion:wa,QuaternionKeyframeTrack:fv,QuaternionLinearInterpolant:sO,R11_EAC_Format:w_,RED_GREEN_RGTC2_Format:Y_,RED_RGTC1_Format:X_,REVISION:yp,RG11_EAC_Format:A_,RGBADepthPacking:hP,RGBAFormat:sa,RGBAIntegerFormat:gb,RGBA_ASTC_10x10_Format:k_,RGBA_ASTC_10x5_Format:z_,RGBA_ASTC_10x6_Format:B_,RGBA_ASTC_10x8_Format:F_,RGBA_ASTC_12x10_Format:H_,RGBA_ASTC_12x12_Format:V_,RGBA_ASTC_4x4_Format:R_,RGBA_ASTC_5x4_Format:N_,RGBA_ASTC_5x5_Format:O_,RGBA_ASTC_6x5_Format:D_,RGBA_ASTC_6x6_Format:U_,RGBA_ASTC_8x5_Format:L_,RGBA_ASTC_8x6_Format:I_,RGBA_ASTC_8x8_Format:P_,RGBA_BPTC_Format:j_,RGBA_ETC2_EAC_Format:M_,RGBA_PVRTC_2BPPV1_Format:x_,RGBA_PVRTC_4BPPV1_Format:b_,RGBA_S3TC_DXT1_Format:xg,RGBA_S3TC_DXT3_Format:Sg,RGBA_S3TC_DXT5_Format:Eg,RGBDepthPacking:fP,RGBFormat:XE,RGBIntegerFormat:oP,RGB_BPTC_SIGNED_Format:G_,RGB_BPTC_UNSIGNED_Format:q_,RGB_ETC1_Format:S_,RGB_ETC2_Format:E_,RGB_PVRTC_2BPPV1_Format:__,RGB_PVRTC_4BPPV1_Format:y_,RGB_S3TC_DXT1_Format:bg,RGDepthPacking:dP,RGFormat:Jh,RGIntegerFormat:mb,RawShaderMaterial:cM,Ray:rf,Raycaster:EM,RectAreaLight:pO,RedFormat:nv,RedIntegerFormat:iv,ReinhardToneMapping:zE,RenderTarget:ZE,RenderTarget3D:l5,RepeatWrapping:Lg,ReplaceStencilOp:yP,ReverseSubtractEquation:X3,RingGeometry:Pb,SIGNED_R11_EAC_Format:T_,SIGNED_RED_GREEN_RGTC2_Format:Z_,SIGNED_RED_RGTC1_Format:W_,SIGNED_RG11_EAC_Format:C_,SRGBColorSpace:Fa,SRGBTransfer:ri,Scene:rv,ShaderChunk:An,ShaderLib:wo,ShaderMaterial:ja,ShadowMaterial:KN,Shape:Zh,ShapeGeometry:zb,ShapePath:L5,ShapeUtils:Ao,ShortType:fb,Skeleton:Ab,SkeletonHelper:x5,SkinnedMesh:DN,Source:pu,Sphere:Va,SphereGeometry:uv,Spherical:hE,SphericalHarmonics3:yM,SplineCurve:lM,SpotLight:uO,SpotLightHelper:b5,Sprite:NN,SpriteMaterial:$E,SrcAlphaFactor:c_,SrcAlphaSaturateFactor:iN,SrcColorFactor:J3,StaticCopyUsage:PP,StaticDrawUsage:Fg,StaticReadUsage:UP,StereoCamera:GB,StreamCopyUsage:BP,StreamDrawUsage:DP,StreamReadUsage:IP,StringKeyframeTrack:lf,SubtractEquation:q3,SubtractiveBlending:$1,TOUCH:Lh,TangentSpaceNormalMap:Su,TetrahedronGeometry:Bb,Texture:hi,TextureLoader:PB,TextureUtils:k5,Timer:d5,TimestampQuery:kP,TorusGeometry:Fb,TorusKnotGeometry:kb,Triangle:is,TriangleFanDrawMode:uP,TriangleStripDrawMode:cP,TrianglesDrawMode:lP,TubeGeometry:Hb,UVMapping:vu,Uint16BufferAttribute:KE,Uint32BufferAttribute:JE,Uint8BufferAttribute:wz,Uint8ClampedBufferAttribute:Tz,Uniform:qb,UniformsGroup:u5,UniformsLib:Dt,UniformsUtils:QE,UnsignedByteType:ka,UnsignedInt101111Type:GE,UnsignedInt248Type:rp,UnsignedInt5999Type:jE,UnsignedIntType:xs,UnsignedShort4444Type:db,UnsignedShort5551Type:pb,UnsignedShortType:ap,VSMShadowMap:Hh,Vector2:Ke,Vector3:ee,Vector4:yi,VectorKeyframeTrack:Xg,VideoFrameTexture:Zz,VideoTexture:zN,WebGL3DRenderTarget:dz,WebGLArrayRenderTarget:fz,WebGLCoordinateSystem:_s,WebGLCubeRenderTarget:Eb,WebGLRenderTarget:Ta,WebGLRenderer:wM,WebGLUtils:CO,WebGPUCoordinateSystem:sp,WebXRController:Yy,WireframeGeometry:ZN,WrapAroundEnding:zg,ZeroCurvatureEnding:Vh,ZeroFactor:Z3,ZeroSlopeEnding:jh,ZeroStencilOp:vP,createCanvasElement:MN,error:Qt,getConsoleFunction:qP,log:Hg,setConsoleFunction:GP,warn:Rt,warnOnce:op},Symbol.toStringTag,{value:"Module"}));var c1={exports:{}},u1={},h1={exports:{}},f1={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var BC;function Ik(){if(BC)return f1;BC=1;var i=mp();function e(y,_){return y===_&&(y!==0||1/y===1/_)||y!==y&&_!==_}var t=typeof Object.is=="function"?Object.is:e,n=i.useState,a=i.useEffect,s=i.useLayoutEffect,l=i.useDebugValue;function u(y,_){var b=_(),x=n({inst:{value:b,getSnapshot:_}}),T=x[0].inst,w=x[1];return s(function(){T.value=b,T.getSnapshot=_,d(T)&&w({inst:T})},[y,b,_]),a(function(){return d(T)&&w({inst:T}),y(function(){d(T)&&w({inst:T})})},[y]),l(b),b}function d(y){var _=y.getSnapshot;y=y.value;try{var b=_();return!t(y,b)}catch{return!0}}function p(y,_){return _()}var g=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?p:u;return f1.useSyncExternalStore=i.useSyncExternalStore!==void 0?i.useSyncExternalStore:g,f1}var FC;function Pk(){return FC||(FC=1,h1.exports=Ik()),h1.exports}/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var kC;function zk(){if(kC)return u1;kC=1;var i=mp(),e=Pk();function t(p,g){return p===g&&(p!==0||1/p===1/g)||p!==p&&g!==g}var n=typeof Object.is=="function"?Object.is:t,a=e.useSyncExternalStore,s=i.useRef,l=i.useEffect,u=i.useMemo,d=i.useDebugValue;return u1.useSyncExternalStoreWithSelector=function(p,g,y,_,b){var x=s(null);if(x.current===null){var T={hasValue:!1,value:null};x.current=T}else T=x.current;x=u(function(){function S(U){if(!C){if(C=!0,N=U,U=_(U),b!==void 0&&T.hasValue){var z=T.value;if(b(z,U))return O=z}return O=U}if(z=O,n(N,U))return z;var H=_(U);return b!==void 0&&b(z,H)?(N=U,z):(N=U,O=H)}var C=!1,N,O,P=y===void 0?null:y;return[function(){return S(g())},P===null?void 0:function(){return S(P())}]},[g,y,_,b]);var w=a(p,x[0],x[1]);return l(function(){T.hasValue=!0,T.value=w},[w]),d(w),w},u1}var HC;function Bk(){return HC||(HC=1,c1.exports=zk()),c1.exports}var Fk=Bk();const kk=xu(Fk),VC=i=>{let e;const t=new Set,n=(p,g)=>{const y=typeof p=="function"?p(e):p;if(!Object.is(y,e)){const _=e;e=g??(typeof y!="object"||y===null)?y:Object.assign({},e,y),t.forEach(b=>b(e,_))}},a=()=>e,u={setState:n,getState:a,getInitialState:()=>d,subscribe:p=>(t.add(p),()=>t.delete(p))},d=e=i(n,a,u);return u},Hk=(i=>i?VC(i):VC),{useSyncExternalStoreWithSelector:Vk}=kk,jk=i=>i;function Gk(i,e=jk,t){const n=Vk(i.subscribe,i.getState,i.getInitialState,e,t);return EE.useDebugValue(n),n}const jC=(i,e)=>{const t=Hk(i),n=(a,s=e)=>Gk(t,a,s);return Object.assign(n,t),n},RO=((i,e)=>i?jC(i,e):jC),qk=i=>typeof i=="object"&&typeof i.then=="function",Xh=[];function NO(i,e,t=(n,a)=>n===a){if(i===e)return!0;if(!i||!e)return!1;const n=i.length;if(e.length!==n)return!1;for(let a=0;a<n;a++)if(!t(i[a],e[a]))return!1;return!0}function OO(i,e=null,t=!1,n={}){e===null&&(e=[i]);for(const s of Xh)if(NO(e,s.keys,s.equal)){if(t)return;if(Object.prototype.hasOwnProperty.call(s,"error"))throw s.error;if(Object.prototype.hasOwnProperty.call(s,"response"))return n.lifespan&&n.lifespan>0&&(s.timeout&&clearTimeout(s.timeout),s.timeout=setTimeout(s.remove,n.lifespan)),s.response;if(!t)throw s.promise}const a={keys:e,equal:n.equal,remove:()=>{const s=Xh.indexOf(a);s!==-1&&Xh.splice(s,1)},promise:(qk(i)?i:i(...e)).then(s=>{a.response=s,n.lifespan&&n.lifespan>0&&(a.timeout=setTimeout(a.remove,n.lifespan))}).catch(s=>a.error=s)};if(Xh.push(a),!t)throw a.promise}const Xk=(i,e,t)=>OO(i,e,!1,t),Wk=(i,e,t)=>void OO(i,e,!0,t),Yk=i=>{if(i===void 0||i.length===0)Xh.splice(0,Xh.length);else{const e=Xh.find(t=>NO(i,t.keys,t.equal));e&&e.remove()}};var d1={exports:{}},p1={exports:{}},m1={exports:{}},g1={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var GC;function Zk(){return GC||(GC=1,(function(i){function e(k,Z){var ne=k.length;k.push(Z);e:for(;0<ne;){var pe=ne-1>>>1,ge=k[pe];if(0<a(ge,Z))k[pe]=Z,k[ne]=ge,ne=pe;else break e}}function t(k){return k.length===0?null:k[0]}function n(k){if(k.length===0)return null;var Z=k[0],ne=k.pop();if(ne!==Z){k[0]=ne;e:for(var pe=0,ge=k.length,J=ge>>>1;pe<J;){var ce=2*(pe+1)-1,Se=k[ce],Le=ce+1,nt=k[Le];if(0>a(Se,ne))Le<ge&&0>a(nt,Se)?(k[pe]=nt,k[Le]=ne,pe=Le):(k[pe]=Se,k[ce]=ne,pe=ce);else if(Le<ge&&0>a(nt,ne))k[pe]=nt,k[Le]=ne,pe=Le;else break e}}return Z}function a(k,Z){var ne=k.sortIndex-Z.sortIndex;return ne!==0?ne:k.id-Z.id}if(i.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var s=performance;i.unstable_now=function(){return s.now()}}else{var l=Date,u=l.now();i.unstable_now=function(){return l.now()-u}}var d=[],p=[],g=1,y=null,_=3,b=!1,x=!1,T=!1,w=typeof setTimeout=="function"?setTimeout:null,S=typeof clearTimeout=="function"?clearTimeout:null,C=typeof setImmediate<"u"?setImmediate:null;function N(k){for(var Z=t(p);Z!==null;){if(Z.callback===null)n(p);else if(Z.startTime<=k)n(p),Z.sortIndex=Z.expirationTime,e(d,Z);else break;Z=t(p)}}function O(k){if(T=!1,N(k),!x)if(t(d)!==null)x=!0,K();else{var Z=t(p);Z!==null&&le(O,Z.startTime-k)}}var P=!1,U=-1,z=5,H=-1;function D(){return!(i.unstable_now()-H<z)}function L(){if(P){var k=i.unstable_now();H=k;var Z=!0;try{e:{x=!1,T&&(T=!1,S(U),U=-1),b=!0;var ne=_;try{t:{for(N(k),y=t(d);y!==null&&!(y.expirationTime>k&&D());){var pe=y.callback;if(typeof pe=="function"){y.callback=null,_=y.priorityLevel;var ge=pe(y.expirationTime<=k);if(k=i.unstable_now(),typeof ge=="function"){y.callback=ge,N(k),Z=!0;break t}y===t(d)&&n(d),N(k)}else n(d);y=t(d)}if(y!==null)Z=!0;else{var J=t(p);J!==null&&le(O,J.startTime-k),Z=!1}}break e}finally{y=null,_=ne,b=!1}Z=void 0}}finally{Z?j():P=!1}}}var j;if(typeof C=="function")j=function(){C(L)};else if(typeof MessageChannel<"u"){var W=new MessageChannel,X=W.port2;W.port1.onmessage=L,j=function(){X.postMessage(null)}}else j=function(){w(L,0)};function K(){P||(P=!0,j())}function le(k,Z){U=w(function(){k(i.unstable_now())},Z)}i.unstable_IdlePriority=5,i.unstable_ImmediatePriority=1,i.unstable_LowPriority=4,i.unstable_NormalPriority=3,i.unstable_Profiling=null,i.unstable_UserBlockingPriority=2,i.unstable_cancelCallback=function(k){k.callback=null},i.unstable_continueExecution=function(){x||b||(x=!0,K())},i.unstable_forceFrameRate=function(k){0>k||125<k?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):z=0<k?Math.floor(1e3/k):5},i.unstable_getCurrentPriorityLevel=function(){return _},i.unstable_getFirstCallbackNode=function(){return t(d)},i.unstable_next=function(k){switch(_){case 1:case 2:case 3:var Z=3;break;default:Z=_}var ne=_;_=Z;try{return k()}finally{_=ne}},i.unstable_pauseExecution=function(){},i.unstable_requestPaint=function(){},i.unstable_runWithPriority=function(k,Z){switch(k){case 1:case 2:case 3:case 4:case 5:break;default:k=3}var ne=_;_=k;try{return Z()}finally{_=ne}},i.unstable_scheduleCallback=function(k,Z,ne){var pe=i.unstable_now();switch(typeof ne=="object"&&ne!==null?(ne=ne.delay,ne=typeof ne=="number"&&0<ne?pe+ne:pe):ne=pe,k){case 1:var ge=-1;break;case 2:ge=250;break;case 5:ge=1073741823;break;case 4:ge=1e4;break;default:ge=5e3}return ge=ne+ge,k={id:g++,callback:Z,priorityLevel:k,startTime:ne,expirationTime:ge,sortIndex:-1},ne>pe?(k.sortIndex=ne,e(p,k),t(d)===null&&k===t(p)&&(T?(S(U),U=-1):T=!0,le(O,ne-pe))):(k.sortIndex=ge,e(d,k),x||b||(x=!0,K())),k},i.unstable_shouldYield=D,i.unstable_wrapCallback=function(k){var Z=_;return function(){var ne=_;_=Z;try{return k.apply(this,arguments)}finally{_=ne}}}})(g1)),g1}var qC;function Kk(){return qC||(qC=1,m1.exports=Zk()),m1.exports}var XC;function Jk(){return XC||(XC=1,(function(i){/**
 * @license React
 * react-reconciler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */i.exports=function(e){function t(c,h,v,M){return new Wp(c,h,v,M)}function n(){}function a(c){var h="https://react.dev/errors/"+c;if(1<arguments.length){h+="?args[]="+encodeURIComponent(arguments[1]);for(var v=2;v<arguments.length;v++)h+="&args[]="+encodeURIComponent(arguments[v])}return"Minified React error #"+c+"; visit "+h+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function s(c){return c===null||typeof c!="object"?null:(c=em&&c[em]||c["@@iterator"],typeof c=="function"?c:null)}function l(c){if(c==null)return null;if(typeof c=="function")return c.$$typeof===Fl?null:c.displayName||c.name||null;if(typeof c=="string")return c;switch(c){case Dc:return"Fragment";case ls:return"Portal";case $p:return"Profiler";case Qp:return"StrictMode";case Lf:return"Suspense";case Jo:return"SuspenseList"}if(typeof c=="object")switch(c.$$typeof){case Ns:return(c.displayName||"Context")+".Provider";case Ko:return(c._context.displayName||"Context")+".Consumer";case Uc:var h=c.render;return c=c.displayName,c||(c=h.displayName||h.name||"",c=c!==""?"ForwardRef("+c+")":"ForwardRef"),c;case Gu:return h=c.displayName||null,h!==null?h:l(c.type)||"Memo";case cs:h=c._payload,c=c._init;try{return l(c(h))}catch{}}return null}function u(c){if(If===void 0)try{throw Error()}catch(v){var h=v.stack.trim().match(/\n( *(at )?)/);If=h&&h[1]||"",tm=-1<v.stack.indexOf(`
    at`)?" (<anonymous>)":-1<v.stack.indexOf("@")?"@unknown:0:0":""}return`
`+If+c+tm}function d(c,h){if(!c||Qo)return"";Qo=!0;var v=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var M={DetermineComponentFrameRoot:function(){try{if(h){var Ot=function(){throw Error()};if(Object.defineProperty(Ot.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(Ot,[])}catch(fn){var It=fn}Reflect.construct(c,[],Ot)}else{try{Ot.call()}catch(fn){It=fn}c.call(Ot.prototype)}}else{try{throw Error()}catch(fn){It=fn}(Ot=c())&&typeof Ot.catch=="function"&&Ot.catch(function(){})}}catch(fn){if(fn&&It&&typeof fn.stack=="string")return[fn.stack,It.stack]}return[null,null]}};M.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var R=Object.getOwnPropertyDescriptor(M.DetermineComponentFrameRoot,"name");R&&R.configurable&&Object.defineProperty(M.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var I=M.DetermineComponentFrameRoot(),Q=I[0],he=I[1];if(Q&&he){var Te=Q.split(`
`),We=he.split(`
`);for(R=M=0;M<Te.length&&!Te[M].includes("DetermineComponentFrameRoot");)M++;for(;R<We.length&&!We[R].includes("DetermineComponentFrameRoot");)R++;if(M===Te.length||R===We.length)for(M=Te.length-1,R=We.length-1;1<=M&&0<=R&&Te[M]!==We[R];)R--;for(;1<=M&&0<=R;M--,R--)if(Te[M]!==We[R]){if(M!==1||R!==1)do if(M--,R--,0>R||Te[M]!==We[R]){var xt=`
`+Te[M].replace(" at new "," at ");return c.displayName&&xt.includes("<anonymous>")&&(xt=xt.replace("<anonymous>",c.displayName)),xt}while(1<=M&&0<=R);break}}}finally{Qo=!1,Error.prepareStackTrace=v}return(v=c?c.displayName||c.name:"")?u(v):""}function p(c){switch(c.tag){case 26:case 27:case 5:return u(c.type);case 16:return u("Lazy");case 13:return u("Suspense");case 19:return u("SuspenseList");case 0:case 15:return c=d(c.type,!1),c;case 11:return c=d(c.type.render,!1),c;case 1:return c=d(c.type,!0),c;default:return""}}function g(c){try{var h="";do h+=p(c),c=c.return;while(c);return h}catch(v){return`
Error generating stack: `+v.message+`
`+v.stack}}function y(c){var h=c,v=c;if(c.alternate)for(;h.return;)h=h.return;else{c=h;do h=c,(h.flags&4098)!==0&&(v=h.return),c=h.return;while(c)}return h.tag===3?v:null}function _(c){if(y(c)!==c)throw Error(a(188))}function b(c){var h=c.alternate;if(!h){if(h=y(c),h===null)throw Error(a(188));return h!==c?null:c}for(var v=c,M=h;;){var R=v.return;if(R===null)break;var I=R.alternate;if(I===null){if(M=R.return,M!==null){v=M;continue}break}if(R.child===I.child){for(I=R.child;I;){if(I===v)return _(R),c;if(I===M)return _(R),h;I=I.sibling}throw Error(a(188))}if(v.return!==M.return)v=R,M=I;else{for(var Q=!1,he=R.child;he;){if(he===v){Q=!0,v=R,M=I;break}if(he===M){Q=!0,M=R,v=I;break}he=he.sibling}if(!Q){for(he=I.child;he;){if(he===v){Q=!0,v=I,M=R;break}if(he===M){Q=!0,M=I,v=R;break}he=he.sibling}if(!Q)throw Error(a(189))}}if(v.alternate!==M)throw Error(a(190))}if(v.tag!==3)throw Error(a(188));return v.stateNode.current===v?c:h}function x(c){var h=c.tag;if(h===5||h===26||h===27||h===6)return c;for(c=c.child;c!==null;){if(h=x(c),h!==null)return h;c=c.sibling}return null}function T(c){var h=c.tag;if(h===5||h===26||h===27||h===6)return c;for(c=c.child;c!==null;){if(c.tag!==4&&(h=T(c),h!==null))return h;c=c.sibling}return null}function w(c){return{current:c}}function S(c){0>lo||(c.current=$u[lo],$u[lo]=null,lo--)}function C(c,h){lo++,$u[lo]=c.current,c.current=h}function N(c){return c>>>=0,c===0?32:31-(eh(c)/c0|0)|0}function O(c){var h=c&42;if(h!==0)return h;switch(c&-c){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return c&4194176;case 4194304:case 8388608:case 16777216:case 33554432:return c&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return c}}function P(c,h){var v=c.pendingLanes;if(v===0)return 0;var M=0,R=c.suspendedLanes,I=c.pingedLanes,Q=c.warmLanes;c=c.finishedLanes!==0;var he=v&134217727;return he!==0?(v=he&~R,v!==0?M=O(v):(I&=he,I!==0?M=O(I):c||(Q=he&~Q,Q!==0&&(M=O(Q))))):(he=v&~R,he!==0?M=O(he):I!==0?M=O(I):c||(Q=v&~Q,Q!==0&&(M=O(Q)))),M===0?0:h!==0&&h!==M&&(h&R)===0&&(R=M&-M,Q=h&-h,R>=Q||R===32&&(Q&4194176)!==0)?h:M}function U(c,h){return(c.pendingLanes&~(c.suspendedLanes&~c.pingedLanes)&h)===0}function z(c,h){switch(c){case 1:case 2:case 4:case 8:return h+250;case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return h+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function H(){var c=zc;return zc<<=1,(zc&4194176)===0&&(zc=128),c}function D(){var c=th;return th<<=1,(th&62914560)===0&&(th=4194304),c}function L(c){for(var h=[],v=0;31>v;v++)h.push(c);return h}function j(c,h){c.pendingLanes|=h,h!==268435456&&(c.suspendedLanes=0,c.pingedLanes=0,c.warmLanes=0)}function W(c,h,v,M,R,I){var Q=c.pendingLanes;c.pendingLanes=v,c.suspendedLanes=0,c.pingedLanes=0,c.warmLanes=0,c.expiredLanes&=v,c.entangledLanes&=v,c.errorRecoveryDisabledLanes&=v,c.shellSuspendCounter=0;var he=c.entanglements,Te=c.expirationTimes,We=c.hiddenUpdates;for(v=Q&~v;0<v;){var xt=31-rr(v),Ot=1<<xt;he[xt]=0,Te[xt]=-1;var It=We[xt];if(It!==null)for(We[xt]=null,xt=0;xt<It.length;xt++){var fn=It[xt];fn!==null&&(fn.lane&=-536870913)}v&=~Ot}M!==0&&X(c,M,0),I!==0&&R===0&&c.tag!==0&&(c.suspendedLanes|=I&~(Q&~h))}function X(c,h,v){c.pendingLanes|=h,c.suspendedLanes&=~h;var M=31-rr(h);c.entangledLanes|=h,c.entanglements[M]=c.entanglements[M]|1073741824|v&4194218}function K(c,h){var v=c.entangledLanes|=h;for(c=c.entanglements;v;){var M=31-rr(v),R=1<<M;R&h|c[M]&h&&(c[M]|=h),v&=~R}}function le(c){return c&=-c,2<c?8<c?(c&134217727)!==0?32:268435456:8:2}function k(c){if(sr&&typeof sr.onCommitFiberRoot=="function")try{sr.onCommitFiberRoot(Fc,c,void 0,(c.current.flags&128)===128)}catch{}}function Z(c){if(typeof d0=="function"&&Dm(c),sr&&typeof sr.setStrictMode=="function")try{sr.setStrictMode(Fc,c)}catch{}}function ne(c,h){return c===h&&(c!==0||1/c===1/h)||c!==c&&h!==h}function pe(c,h){if(typeof c=="object"&&c!==null){var v=Qf.get(c);return v!==void 0?v:(h={value:c,source:h,stack:g(h)},Qf.set(c,h),h)}return{value:c,source:h,stack:g(h)}}function ge(c,h){mi[Ti++]=ah,mi[Ti++]=ih,ih=c,ah=h}function J(c,h,v){Rr[Nr++]=Is,Rr[Nr++]=Wr,Rr[Nr++]=us,us=c;var M=Is;c=Wr;var R=32-rr(M)-1;M&=~(1<<R),v+=1;var I=32-rr(h)+R;if(30<I){var Q=R-R%5;I=(M&(1<<Q)-1).toString(32),M>>=Q,R-=Q,Is=1<<32-rr(h)+R|v<<R|M,Wr=I+c}else Is=1<<I|v<<R|M,Wr=c}function ce(c){c.return!==null&&(ge(c,1),J(c,1,0))}function Se(c){for(;c===ih;)ih=mi[--Ti],mi[Ti]=null,ah=mi[--Ti],mi[Ti]=null;for(;c===us;)us=Rr[--Nr],Rr[Nr]=null,Wr=Rr[--Nr],Rr[Nr]=null,Is=Rr[--Nr],Rr[Nr]=null}function Le(c,h){C(hs,h),C(rh,c),C(pa,null),c=kl(h),S(pa),C(pa,c)}function nt(){S(pa),S(rh),S(hs)}function ve(c){c.memoizedState!==null&&C(kc,c);var h=pa.current,v=Vv(h,c.type);h!==v&&(C(rh,c),C(pa,v))}function Ce(c){rh.current===c&&(S(pa),S(rh)),kc.current===c&&(S(kc),Ds?ln._currentValue=ar:ln._currentValue2=ar)}function Je(c){var h=Error(a(418,""));throw Vt(pe(h,c)),sh}function yt(c,h){if(!Wa)throw Error(a(175));ex(c.stateNode,c.type,c.memoizedProps,h,c)||Je(c)}function St(c){for(La=c.return;La;)switch(La.tag){case 3:case 27:Yr=!0;return;case 5:case 13:Yr=!1;return;default:La=La.return}}function $t(c){if(!Wa||c!==La)return!1;if(!zn)return St(c),zn=!0,!1;var h=!1;if(Sa?c.tag!==3&&c.tag!==27&&(c.tag!==5||a0(c.type)&&!tl(c.type,c.memoizedProps))&&(h=!0):c.tag!==3&&(c.tag!==5||a0(c.type)&&!tl(c.type,c.memoizedProps))&&(h=!0),h&&Ma&&Je(c),St(c),c.tag===13){if(!Wa)throw Error(a(316));if(c=c.memoizedState,c=c!==null?c.dehydrated:null,!c)throw Error(a(317));Ma=n0(c)}else Ma=La?_m(c.stateNode):null;return!0}function nn(){Wa&&(Ma=La=null,zn=!1)}function Vt(c){Or===null?Or=[c]:Or.push(c)}function xe(){for(var c=il,h=Hc=il=0;h<c;){var v=Dr[h];Dr[h++]=null;var M=Dr[h];Dr[h++]=null;var R=Dr[h];Dr[h++]=null;var I=Dr[h];if(Dr[h++]=null,M!==null&&R!==null){var Q=M.pending;Q===null?R.next=R:(R.next=Q.next,Q.next=R),M.pending=R}I!==0&&ie(v,R,I)}}function ze(c,h,v,M){Dr[il++]=c,Dr[il++]=h,Dr[il++]=v,Dr[il++]=M,Hc|=M,c.lanes|=M,c=c.alternate,c!==null&&(c.lanes|=M)}function je(c,h,v,M){return ze(c,h,v,M),zt(c)}function ot(c,h){return ze(c,null,null,h),zt(c)}function ie(c,h,v){c.lanes|=v;var M=c.alternate;M!==null&&(M.lanes|=v);for(var R=!1,I=c.return;I!==null;)I.childLanes|=v,M=I.alternate,M!==null&&(M.childLanes|=v),I.tag===22&&(c=I.stateNode,c===null||c._visibility&1||(R=!0)),c=I,I=I.return;R&&h!==null&&c.tag===3&&(I=c.stateNode,R=31-rr(v),I=I.hiddenUpdates,c=I[R],c===null?I[R]=[h]:c.push(h),h.lane=v|536870912)}function zt(c){if(50<Jl)throw Jl=0,Ka=null,Error(a(185));for(var h=c.return;h!==null;)c=h,h=c.return;return c.tag===3?c.stateNode:null}function mt(c){c!==Gl&&c.next===null&&(Gl===null?Vc=Gl=c:Gl=Gl.next=c),lh=!0,oh||(oh=!0,Re(gt))}function Bt(c,h){if(!fs&&lh){fs=!0;do for(var v=!1,M=Vc;M!==null;){if(c!==0){var R=M.pendingLanes;if(R===0)var I=0;else{var Q=M.suspendedLanes,he=M.pingedLanes;I=(1<<31-rr(42|c)+1)-1,I&=R&~(Q&~he),I=I&201326677?I&201326677|1:I?I|2:0}I!==0&&(v=!0,se(M,I))}else I=wn,I=P(M,M===Cn?I:0),(I&3)===0||U(M,I)||(v=!0,se(M,I));M=M.next}while(v);fs=!1}}function gt(){lh=oh=!1;var c=0;al!==0&&(nl()&&(c=al),al=0);for(var h=Ea(),v=null,M=Vc;M!==null;){var R=M.next,I=te(M,h);I===0?(M.next=null,v===null?Vc=R:v.next=R,R===null&&(Gl=v)):(v=M,(c!==0||(I&3)!==0)&&(lh=!0)),M=R}Bt(c)}function te(c,h){for(var v=c.suspendedLanes,M=c.pingedLanes,R=c.expirationTimes,I=c.pendingLanes&-62914561;0<I;){var Q=31-rr(I),he=1<<Q,Te=R[Q];Te===-1?((he&v)===0||(he&M)!==0)&&(R[Q]=z(he,h)):Te<=h&&(c.expiredLanes|=he),I&=~he}if(h=Cn,v=wn,v=P(c,c===h?v:0),M=c.callbackNode,v===0||c===h&&ai===2||c.cancelPendingCommit!==null)return M!==null&&M!==null&&nh(M),c.callbackNode=null,c.callbackPriority=0;if((v&3)===0||U(c,v)){if(h=v&-v,h===c.callbackPriority)return h;switch(M!==null&&nh(M),le(v)){case 2:case 8:v=f0;break;case 32:v=Kf;break;case 268435456:v=Jf;break;default:v=Kf}return M=B.bind(null,c),v=Bc(v,M),c.callbackPriority=h,c.callbackNode=v,h}return M!==null&&M!==null&&nh(M),c.callbackPriority=2,c.callbackNode=null,2}function B(c,h){var v=c.callbackNode;if(fa()&&c.callbackNode!==v)return null;var M=wn;return M=P(c,c===Cn?M:0),M===0?null:(Fu(c,M,h),te(c,Ea()),c.callbackNode!=null&&c.callbackNode===v?B.bind(null,c):null)}function se(c,h){if(fa())return null;Fu(c,h,!0)}function Re(c){Wi?Ff(function(){(Jt&6)!==0?Bc(Om,c):c()}):Bc(Om,c)}function ke(){return al===0&&(al=H()),al}function Oe(c,h){if(ch===null){var v=ch=[];$f=0,or=ke(),rl={status:"pending",value:void 0,then:function(M){v.push(M)}}}return $f++,h.then(Tt,Tt),h}function Tt(){if(--$f===0&&ch!==null){rl!==null&&(rl.status="fulfilled");var c=ch;ch=null,or=0,rl=null;for(var h=0;h<c.length;h++)(0,c[h])()}}function dt(c,h){var v=[],M={status:"pending",value:null,reason:null,then:function(R){v.push(R)}};return c.then(function(){M.status="fulfilled",M.value=h;for(var R=0;R<v.length;R++)(0,v[R])(h)},function(R){for(M.status="rejected",M.reason=R,R=0;R<v.length;R++)(0,v[R])(void 0)}),M}function Nt(c){c.updateQueue={baseState:c.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function jt(c,h){c=c.updateQueue,h.updateQueue===c&&(h.updateQueue={baseState:c.baseState,firstBaseUpdate:c.firstBaseUpdate,lastBaseUpdate:c.lastBaseUpdate,shared:c.shared,callbacks:null})}function Xe(c){return{lane:c,tag:0,payload:null,callback:null,next:null}}function qe(c,h,v){var M=c.updateQueue;if(M===null)return null;if(M=M.shared,(Jt&2)!==0){var R=M.pending;return R===null?h.next=h:(h.next=R.next,R.next=h),M.pending=h,h=zt(c),ie(c,null,v),h}return ze(c,M,h,v),zt(c)}function Et(c,h,v){if(h=h.updateQueue,h!==null&&(h=h.shared,(v&4194176)!==0)){var M=h.lanes;M&=c.pendingLanes,v|=M,h.lanes=v,K(c,v)}}function ae(c,h){var v=c.updateQueue,M=c.alternate;if(M!==null&&(M=M.updateQueue,v===M)){var R=null,I=null;if(v=v.firstBaseUpdate,v!==null){do{var Q={lane:v.lane,tag:v.tag,payload:v.payload,callback:null,next:null};I===null?R=I=Q:I=I.next=Q,v=v.next}while(v!==null);I===null?R=I=h:I=I.next=h}else R=I=h;v={baseState:M.baseState,firstBaseUpdate:R,lastBaseUpdate:I,shared:M.shared,callbacks:M.callbacks},c.updateQueue=v;return}c=v.lastBaseUpdate,c===null?v.firstBaseUpdate=h:c.next=h,v.lastBaseUpdate=h}function Ee(){if(jc){var c=rl;if(c!==null)throw c}}function Qe(c,h,v,M){jc=!1;var R=c.updateQueue;co=!1;var I=R.firstBaseUpdate,Q=R.lastBaseUpdate,he=R.shared.pending;if(he!==null){R.shared.pending=null;var Te=he,We=Te.next;Te.next=null,Q===null?I=We:Q.next=We,Q=Te;var xt=c.alternate;xt!==null&&(xt=xt.updateQueue,he=xt.lastBaseUpdate,he!==Q&&(he===null?xt.firstBaseUpdate=We:he.next=We,xt.lastBaseUpdate=Te))}if(I!==null){var Ot=R.baseState;Q=0,xt=We=Te=null,he=I;do{var It=he.lane&-536870913,fn=It!==he.lane;if(fn?(wn&It)===It:(M&It)===It){It!==0&&It===or&&(jc=!0),xt!==null&&(xt=xt.next={lane:0,tag:he.tag,payload:he.payload,callback:null,next:null});e:{var hr=c,dh=he;It=h;var Ql=v;switch(dh.tag){case 1:if(hr=dh.payload,typeof hr=="function"){Ot=hr.call(Ql,Ot,It);break e}Ot=hr;break e;case 3:hr.flags=hr.flags&-65537|128;case 0:if(hr=dh.payload,It=typeof hr=="function"?hr.call(Ql,Ot,It):hr,It==null)break e;Ot=Bl({},Ot,It);break e;case 2:co=!0}}It=he.callback,It!==null&&(c.flags|=64,fn&&(c.flags|=8192),fn=R.callbacks,fn===null?R.callbacks=[It]:fn.push(It))}else fn={lane:It,tag:he.tag,payload:he.payload,callback:he.callback,next:null},xt===null?(We=xt=fn,Te=Ot):xt=xt.next=fn,Q|=It;if(he=he.next,he===null){if(he=R.shared.pending,he===null)break;fn=he,he=fn.next,fn.next=null,R.lastBaseUpdate=fn,R.shared.pending=null}}while(!0);xt===null&&(Te=Ot),R.baseState=Te,R.firstBaseUpdate=We,R.lastBaseUpdate=xt,I===null&&(R.shared.lanes=0),Pr|=Q,c.lanes=Q,c.memoizedState=Ot}}function ue(c,h){if(typeof c!="function")throw Error(a(191,c));c.call(h)}function Ae(c,h){var v=c.callbacks;if(v!==null)for(c.callbacks=null,c=0;c<v.length;c++)ue(v[c],h)}function et(c,h){if(Cr(c,h))return!0;if(typeof c!="object"||c===null||typeof h!="object"||h===null)return!1;var v=Object.keys(c),M=Object.keys(h);if(v.length!==M.length)return!1;for(M=0;M<v.length;M++){var R=v[M];if(!uh.call(h,R)||!Cr(c[R],h[R]))return!1}return!0}function Mt(c){return c=c.status,c==="fulfilled"||c==="rejected"}function it(){}function Ye(c,h,v){switch(v=c[v],v===void 0?c.push(h):v!==h&&(h.then(it,it),h=v),h.status){case"fulfilled":return h.value;case"rejected":throw c=h.reason,c===ti?Error(a(483)):c;default:if(typeof h.status=="string")h.then(it,it);else{if(c=Cn,c!==null&&100<c.shellSuspendCounter)throw Error(a(482));c=h,c.status="pending",c.then(function(M){if(h.status==="pending"){var R=h;R.status="fulfilled",R.value=M}},function(M){if(h.status==="pending"){var R=h;R.status="rejected",R.reason=M}})}switch(h.status){case"fulfilled":return h.value;case"rejected":throw c=h.reason,c===ti?Error(a(483)):c}throw ql=h,ti}}function lt(){if(ql===null)throw Error(a(459));var c=ql;return ql=null,c}function Gt(c){var h=Zr;return Zr+=1,Ps===null&&(Ps=[]),Ye(Ps,c,h)}function yn(c,h){h=h.props.ref,c.ref=h!==void 0?h:null}function dn(c,h){throw h.$$typeof===Jp?Error(a(525)):(c=Object.prototype.toString.call(h),Error(a(31,c==="[object Object]"?"object with keys {"+Object.keys(h).join(", ")+"}":c)))}function fi(c){var h=c._init;return h(c._payload)}function $i(c){function h(Ie,Me){if(c){var Be=Ie.deletions;Be===null?(Ie.deletions=[Me],Ie.flags|=16):Be.push(Me)}}function v(Ie,Me){if(!c)return null;for(;Me!==null;)h(Ie,Me),Me=Me.sibling;return null}function M(Ie){for(var Me=new Map;Ie!==null;)Ie.key!==null?Me.set(Ie.key,Ie):Me.set(Ie.index,Ie),Ie=Ie.sibling;return Me}function R(Ie,Me){return Ie=Da(Ie,Me),Ie.index=0,Ie.sibling=null,Ie}function I(Ie,Me,Be){return Ie.index=Be,c?(Be=Ie.alternate,Be!==null?(Be=Be.index,Be<Me?(Ie.flags|=33554434,Me):Be):(Ie.flags|=33554434,Me)):(Ie.flags|=1048576,Me)}function Q(Ie){return c&&Ie.alternate===null&&(Ie.flags|=33554434),Ie}function he(Ie,Me,Be,ft){return Me===null||Me.tag!==6?(Me=Zo(Be,Ie.mode,ft),Me.return=Ie,Me):(Me=R(Me,Be),Me.return=Ie,Me)}function Te(Ie,Me,Be,ft){var Wt=Be.type;return Wt===Dc?xt(Ie,Me,Be.props.children,ft,Be.key):Me!==null&&(Me.elementType===Wt||typeof Wt=="object"&&Wt!==null&&Wt.$$typeof===cs&&fi(Wt)===Me.type)?(Me=R(Me,Be.props),yn(Me,Be),Me.return=Ie,Me):(Me=qr(Be.type,Be.key,Be.props,null,Ie.mode,ft),yn(Me,Be),Me.return=Ie,Me)}function We(Ie,Me,Be,ft){return Me===null||Me.tag!==4||Me.stateNode.containerInfo!==Be.containerInfo||Me.stateNode.implementation!==Be.implementation?(Me=Oc(Be,Ie.mode,ft),Me.return=Ie,Me):(Me=R(Me,Be.children||[]),Me.return=Ie,Me)}function xt(Ie,Me,Be,ft,Wt){return Me===null||Me.tag!==7?(Me=io(Be,Ie.mode,ft,Wt),Me.return=Ie,Me):(Me=R(Me,Be),Me.return=Ie,Me)}function Ot(Ie,Me,Be){if(typeof Me=="string"&&Me!==""||typeof Me=="number"||typeof Me=="bigint")return Me=Zo(""+Me,Ie.mode,Be),Me.return=Ie,Me;if(typeof Me=="object"&&Me!==null){switch(Me.$$typeof){case ao:return Be=qr(Me.type,Me.key,Me.props,null,Ie.mode,Be),yn(Be,Me),Be.return=Ie,Be;case ls:return Me=Oc(Me,Ie.mode,Be),Me.return=Ie,Me;case cs:var ft=Me._init;return Me=ft(Me._payload),Ot(Ie,Me,Be)}if($o(Me)||s(Me))return Me=io(Me,Ie.mode,Be,null),Me.return=Ie,Me;if(typeof Me.then=="function")return Ot(Ie,Gt(Me),Be);if(Me.$$typeof===Ns)return Ot(Ie,Lu(Ie,Me),Be);dn(Ie,Me)}return null}function It(Ie,Me,Be,ft){var Wt=Me!==null?Me.key:null;if(typeof Be=="string"&&Be!==""||typeof Be=="number"||typeof Be=="bigint")return Wt!==null?null:he(Ie,Me,""+Be,ft);if(typeof Be=="object"&&Be!==null){switch(Be.$$typeof){case ao:return Be.key===Wt?Te(Ie,Me,Be,ft):null;case ls:return Be.key===Wt?We(Ie,Me,Be,ft):null;case cs:return Wt=Be._init,Be=Wt(Be._payload),It(Ie,Me,Be,ft)}if($o(Be)||s(Be))return Wt!==null?null:xt(Ie,Me,Be,ft,null);if(typeof Be.then=="function")return It(Ie,Me,Gt(Be),ft);if(Be.$$typeof===Ns)return It(Ie,Me,Lu(Ie,Be),ft);dn(Ie,Be)}return null}function fn(Ie,Me,Be,ft,Wt){if(typeof ft=="string"&&ft!==""||typeof ft=="number"||typeof ft=="bigint")return Ie=Ie.get(Be)||null,he(Me,Ie,""+ft,Wt);if(typeof ft=="object"&&ft!==null){switch(ft.$$typeof){case ao:return Ie=Ie.get(ft.key===null?Be:ft.key)||null,Te(Me,Ie,ft,Wt);case ls:return Ie=Ie.get(ft.key===null?Be:ft.key)||null,We(Me,Ie,ft,Wt);case cs:var li=ft._init;return ft=li(ft._payload),fn(Ie,Me,Be,ft,Wt)}if($o(ft)||s(ft))return Ie=Ie.get(Be)||null,xt(Me,Ie,ft,Wt,null);if(typeof ft.then=="function")return fn(Ie,Me,Be,Gt(ft),Wt);if(ft.$$typeof===Ns)return fn(Ie,Me,Be,Lu(Me,ft),Wt);dn(Me,ft)}return null}function hr(Ie,Me,Be,ft){for(var Wt=null,li=null,cn=Me,Fn=Me=0,na=null;cn!==null&&Fn<Be.length;Fn++){cn.index>Fn?(na=cn,cn=null):na=cn.sibling;var kn=It(Ie,cn,Be[Fn],ft);if(kn===null){cn===null&&(cn=na);break}c&&cn&&kn.alternate===null&&h(Ie,cn),Me=I(kn,Me,Fn),li===null?Wt=kn:li.sibling=kn,li=kn,cn=na}if(Fn===Be.length)return v(Ie,cn),zn&&ge(Ie,Fn),Wt;if(cn===null){for(;Fn<Be.length;Fn++)cn=Ot(Ie,Be[Fn],ft),cn!==null&&(Me=I(cn,Me,Fn),li===null?Wt=cn:li.sibling=cn,li=cn);return zn&&ge(Ie,Fn),Wt}for(cn=M(cn);Fn<Be.length;Fn++)na=fn(cn,Ie,Fn,Be[Fn],ft),na!==null&&(c&&na.alternate!==null&&cn.delete(na.key===null?Fn:na.key),Me=I(na,Me,Fn),li===null?Wt=na:li.sibling=na,li=na);return c&&cn.forEach(function(vo){return h(Ie,vo)}),zn&&ge(Ie,Fn),Wt}function dh(Ie,Me,Be,ft){if(Be==null)throw Error(a(151));for(var Wt=null,li=null,cn=Me,Fn=Me=0,na=null,kn=Be.next();cn!==null&&!kn.done;Fn++,kn=Be.next()){cn.index>Fn?(na=cn,cn=null):na=cn.sibling;var vo=It(Ie,cn,kn.value,ft);if(vo===null){cn===null&&(cn=na);break}c&&cn&&vo.alternate===null&&h(Ie,cn),Me=I(vo,Me,Fn),li===null?Wt=vo:li.sibling=vo,li=vo,cn=na}if(kn.done)return v(Ie,cn),zn&&ge(Ie,Fn),Wt;if(cn===null){for(;!kn.done;Fn++,kn=Be.next())kn=Ot(Ie,kn.value,ft),kn!==null&&(Me=I(kn,Me,Fn),li===null?Wt=kn:li.sibling=kn,li=kn);return zn&&ge(Ie,Fn),Wt}for(cn=M(cn);!kn.done;Fn++,kn=Be.next())kn=fn(cn,Ie,Fn,kn.value,ft),kn!==null&&(c&&kn.alternate!==null&&cn.delete(kn.key===null?Fn:kn.key),Me=I(kn,Me,Fn),li===null?Wt=kn:li.sibling=kn,li=kn);return c&&cn.forEach(function(ld){return h(Ie,ld)}),zn&&ge(Ie,Fn),Wt}function Ql(Ie,Me,Be,ft){if(typeof Be=="object"&&Be!==null&&Be.type===Dc&&Be.key===null&&(Be=Be.props.children),typeof Be=="object"&&Be!==null){switch(Be.$$typeof){case ao:e:{for(var Wt=Be.key;Me!==null;){if(Me.key===Wt){if(Wt=Be.type,Wt===Dc){if(Me.tag===7){v(Ie,Me.sibling),ft=R(Me,Be.props.children),ft.return=Ie,Ie=ft;break e}}else if(Me.elementType===Wt||typeof Wt=="object"&&Wt!==null&&Wt.$$typeof===cs&&fi(Wt)===Me.type){v(Ie,Me.sibling),ft=R(Me,Be.props),yn(ft,Be),ft.return=Ie,Ie=ft;break e}v(Ie,Me);break}else h(Ie,Me);Me=Me.sibling}Be.type===Dc?(ft=io(Be.props.children,Ie.mode,ft,Be.key),ft.return=Ie,Ie=ft):(ft=qr(Be.type,Be.key,Be.props,null,Ie.mode,ft),yn(ft,Be),ft.return=Ie,Ie=ft)}return Q(Ie);case ls:e:{for(Wt=Be.key;Me!==null;){if(Me.key===Wt)if(Me.tag===4&&Me.stateNode.containerInfo===Be.containerInfo&&Me.stateNode.implementation===Be.implementation){v(Ie,Me.sibling),ft=R(Me,Be.children||[]),ft.return=Ie,Ie=ft;break e}else{v(Ie,Me);break}else h(Ie,Me);Me=Me.sibling}ft=Oc(Be,Ie.mode,ft),ft.return=Ie,Ie=ft}return Q(Ie);case cs:return Wt=Be._init,Be=Wt(Be._payload),Ql(Ie,Me,Be,ft)}if($o(Be))return hr(Ie,Me,Be,ft);if(s(Be)){if(Wt=s(Be),typeof Wt!="function")throw Error(a(150));return Be=Wt.call(Be),dh(Ie,Me,Be,ft)}if(typeof Be.then=="function")return Ql(Ie,Me,Gt(Be),ft);if(Be.$$typeof===Ns)return Ql(Ie,Me,Lu(Ie,Be),ft);dn(Ie,Be)}return typeof Be=="string"&&Be!==""||typeof Be=="number"||typeof Be=="bigint"?(Be=""+Be,Me!==null&&Me.tag===6?(v(Ie,Me.sibling),ft=R(Me,Be),ft.return=Ie,Ie=ft):(v(Ie,Me),ft=Zo(Be,Ie.mode,ft),ft.return=Ie,Ie=ft),Q(Ie)):v(Ie,Me)}return function(Ie,Me,Be,ft){try{Zr=0;var Wt=Ql(Ie,Me,Be,ft);return Ps=null,Wt}catch(cn){if(cn===ti)throw cn;var li=t(29,cn,null,Ie.mode);return li.lanes=ft,li.return=Ie,li}finally{}}}function Ml(c,h){c=ds,C(Ur,c),C(zs,h),ds=c|h.baseLanes}function Ys(){C(Ur,ds),C(zs,zs.current)}function _r(){ds=Ur.current,S(zs),S(Ur)}function er(c){var h=c.alternate;C(Yi,Yi.current&1),C(Lr,c),Kr===null&&(h===null||zs.current!==null||h.memoizedState!==null)&&(Kr=c)}function br(c){if(c.tag===22){if(C(Yi,Yi.current),C(Lr,c),Kr===null){var h=c.alternate;h!==null&&h.memoizedState!==null&&(Kr=c)}}else oa()}function oa(){C(Yi,Yi.current),C(Lr,Lr.current)}function en(c){S(Lr),Kr===c&&(Kr=null),S(Yi)}function la(c){for(var h=c;h!==null;){if(h.tag===13){var v=h.memoizedState;if(v!==null&&(v=v.dehydrated,v===null||Gf(v)||Qu(v)))return h}else if(h.tag===19&&h.memoizedProps.revealOrder!==void 0){if((h.flags&128)!==0)return h}else if(h.child!==null){h.child.return=h,h=h.child;continue}if(h===c)break;for(;h.sibling===null;){if(h.return===null||h.return===c)return null;h=h.return}h.sibling.return=h.return,h=h.sibling}return null}function gn(){throw Error(a(321))}function V(c,h){if(h===null)return!1;for(var v=0;v<h.length&&v<c.length;v++)if(!Cr(c[v],h[v]))return!1;return!0}function $(c,h,v,M,R,I){return Bs=I,bn=h,h.memoizedState=null,h.updateQueue=null,h.lanes=0,an.H=c===null||c.memoizedState===null?Zi:Ia,uo=!1,I=v(M,R),uo=!1,gi&&(I=Ue(h,v,M,R)),de(c),I}function de(c){an.H=Bn;var h=Xn!==null&&Xn.next!==null;if(Bs=0,Pi=Xn=bn=null,Jr=!1,Ai=0,Gc=null,h)throw Error(a(300));c===null||zi||(c=c.dependencies,c!==null&&Bo(c)&&(zi=!0))}function Ue(c,h,v,M){bn=c;var R=0;do{if(gi&&(Gc=null),Ai=0,gi=!1,25<=R)throw Error(a(301));if(R+=1,Pi=Xn=null,c.updateQueue!=null){var I=c.updateQueue;I.lastEffect=null,I.events=null,I.stores=null,I.memoCache!=null&&(I.memoCache.index=0)}an.H=ol,I=h(v,M)}while(gi);return I}function Ve(){var c=an.H,h=c.useState()[0];return h=typeof h.then=="function"?vt(h):h,c=c.useState()[0],(Xn!==null?Xn.memoizedState:null)!==c&&(bn.flags|=1024),h}function He(){var c=hh!==0;return hh=0,c}function ct(c,h,v){h.updateQueue=c.updateQueue,h.flags&=-2053,c.lanes&=~v}function rt(c){if(Jr){for(c=c.memoizedState;c!==null;){var h=c.queue;h!==null&&(h.pending=null),c=c.next}Jr=!1}Bs=0,Pi=Xn=bn=null,gi=!1,Ai=hh=0,Gc=null}function st(){var c={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Pi===null?bn.memoizedState=Pi=c:Pi=Pi.next=c,Pi}function tt(){if(Xn===null){var c=bn.alternate;c=c!==null?c.memoizedState:null}else c=Xn.next;var h=Pi===null?bn.memoizedState:Pi.next;if(h!==null)Pi=h,Xn=c;else{if(c===null)throw bn.alternate===null?Error(a(467)):Error(a(310));Xn=c,c={memoizedState:Xn.memoizedState,baseState:Xn.baseState,baseQueue:Xn.baseQueue,queue:Xn.queue,next:null},Pi===null?bn.memoizedState=Pi=c:Pi=Pi.next=c}return Pi}function vt(c){var h=Ai;return Ai+=1,Gc===null&&(Gc=[]),c=Ye(Gc,c,h),h=bn,(Pi===null?h.memoizedState:Pi.next)===null&&(h=h.alternate,an.H=h===null||h.memoizedState===null?Zi:Ia),c}function pt(c){if(c!==null&&typeof c=="object"){if(typeof c.then=="function")return vt(c);if(c.$$typeof===Ns)return _a(c)}throw Error(a(438,String(c)))}function G(c){var h=null,v=bn.updateQueue;if(v!==null&&(h=v.memoCache),h==null){var M=bn.alternate;M!==null&&(M=M.updateQueue,M!==null&&(M=M.memoCache,M!=null&&(h={data:M.data.map(function(R){return R.slice()}),index:0})))}if(h==null&&(h={data:[],index:0}),v===null&&(v=td(),bn.updateQueue=v),v.memoCache=h,v=h.data[h.index],v===void 0)for(v=h.data[h.index]=Array(c),M=0;M<c;M++)v[M]=Hv;return h.index++,v}function oe(c,h){return typeof h=="function"?h(c):h}function ye(c){var h=tt();return be(h,Xn,c)}function be(c,h,v){var M=c.queue;if(M===null)throw Error(a(311));M.lastRenderedReducer=v;var R=c.baseQueue,I=M.pending;if(I!==null){if(R!==null){var Q=R.next;R.next=I.next,I.next=Q}h.baseQueue=R=I,M.pending=null}if(I=c.baseState,R===null)c.memoizedState=I;else{h=R.next;var he=Q=null,Te=null,We=h,xt=!1;do{var Ot=We.lane&-536870913;if(Ot!==We.lane?(wn&Ot)===Ot:(Bs&Ot)===Ot){var It=We.revertLane;if(It===0)Te!==null&&(Te=Te.next={lane:0,revertLane:0,action:We.action,hasEagerState:We.hasEagerState,eagerState:We.eagerState,next:null}),Ot===or&&(xt=!0);else if((Bs&It)===It){We=We.next,It===or&&(xt=!0);continue}else Ot={lane:0,revertLane:We.revertLane,action:We.action,hasEagerState:We.hasEagerState,eagerState:We.eagerState,next:null},Te===null?(he=Te=Ot,Q=I):Te=Te.next=Ot,bn.lanes|=It,Pr|=It;Ot=We.action,uo&&v(I,Ot),I=We.hasEagerState?We.eagerState:v(I,Ot)}else It={lane:Ot,revertLane:We.revertLane,action:We.action,hasEagerState:We.hasEagerState,eagerState:We.eagerState,next:null},Te===null?(he=Te=It,Q=I):Te=Te.next=It,bn.lanes|=Ot,Pr|=Ot;We=We.next}while(We!==null&&We!==h);if(Te===null?Q=I:Te.next=he,!Cr(I,c.memoizedState)&&(zi=!0,xt&&(v=rl,v!==null)))throw v;c.memoizedState=I,c.baseState=Q,c.baseQueue=Te,M.lastRenderedState=I}return R===null&&(M.lanes=0),[c.memoizedState,M.dispatch]}function me(c){var h=tt(),v=h.queue;if(v===null)throw Error(a(311));v.lastRenderedReducer=c;var M=v.dispatch,R=v.pending,I=h.memoizedState;if(R!==null){v.pending=null;var Q=R=R.next;do I=c(I,Q.action),Q=Q.next;while(Q!==R);Cr(I,h.memoizedState)||(zi=!0),h.memoizedState=I,h.baseQueue===null&&(h.baseState=I),v.lastRenderedState=I}return[I,M]}function at(c,h,v){var M=bn,R=tt(),I=zn;if(I){if(v===void 0)throw Error(a(407));v=v()}else v=h();var Q=!Cr((Xn||R).memoizedState,v);if(Q&&(R.memoizedState=v,zi=!0),R=R.queue,xr(wt.bind(null,M,R,c),[c]),R.getSnapshot!==h||Q||Pi!==null&&Pi.memoizedState.tag&1){if(M.flags|=2048,Ei(9,ht.bind(null,M,R,v,h),{destroy:void 0},null),Cn===null)throw Error(a(349));I||(Bs&60)!==0||ut(M,h,v)}return v}function ut(c,h,v){c.flags|=16384,c={getSnapshot:h,value:v},h=bn.updateQueue,h===null?(h=td(),bn.updateQueue=h,h.stores=[c]):(v=h.stores,v===null?h.stores=[c]:v.push(c))}function ht(c,h,v,M){h.value=v,h.getSnapshot=M,_t(h)&&kt(c)}function wt(c,h,v){return v(function(){_t(h)&&kt(c)})}function _t(c){var h=c.getSnapshot;c=c.value;try{var v=h();return!Cr(c,v)}catch{return!0}}function kt(c){var h=ot(c,2);h!==null&&Oa(h,c,2)}function bt(c){var h=st();if(typeof c=="function"){var v=c;if(c=v(),uo){Z(!0);try{v()}finally{Z(!1)}}}return h.memoizedState=h.baseState=c,h.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:oe,lastRenderedState:c},h}function Lt(c,h,v,M){return c.baseState=v,be(c,Xn,typeof M=="function"?M:oe)}function _n(c,h,v,M,R){if(Cl(c))throw Error(a(485));if(c=h.action,c!==null){var I={payload:R,action:c,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(Q){I.listeners.push(Q)}};an.T!==null?v(!0):I.isTransition=!1,M(I),v=h.pending,v===null?(I.next=h.pending=I,Gn(h,I)):(I.next=v.next,h.pending=v.next=I)}}function Gn(c,h){var v=h.action,M=h.payload,R=c.state;if(h.isTransition){var I=an.T,Q={};an.T=Q;try{var he=v(R,M),Te=an.S;Te!==null&&Te(Q,he),En(c,h,he)}catch(We){At(c,h,We)}finally{an.T=I}}else try{I=v(R,M),En(c,h,I)}catch(We){At(c,h,We)}}function En(c,h,v){v!==null&&typeof v=="object"&&typeof v.then=="function"?v.then(function(M){qt(c,h,M)},function(M){return At(c,h,M)}):qt(c,h,v)}function qt(c,h,v){h.status="fulfilled",h.value=v,Zt(h),c.state=v,h=c.pending,h!==null&&(v=h.next,v===h?c.pending=null:(v=v.next,h.next=v,Gn(c,v)))}function At(c,h,v){var M=c.pending;if(c.pending=null,M!==null){M=M.next;do h.status="rejected",h.reason=v,Zt(h),h=h.next;while(h!==M)}c.action=null}function Zt(c){c=c.listeners;for(var h=0;h<c.length;h++)(0,c[h])()}function Ct(c,h){return h}function qn(c,h){if(zn){var v=Cn.formState;if(v!==null){e:{var M=bn;if(zn){if(Ma){var R=Yv(Ma,Yr);if(R){Ma=_m(R),M=Zv(R);break e}}Je(M)}M=!1}M&&(h=v[0])}}v=st(),v.memoizedState=v.baseState=h,M={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ct,lastRenderedState:h},v.queue=M,v=ff.bind(null,bn,M),M.dispatch=v,M=bt(!1);var I=df.bind(null,bn,!1,M.queue);return M=st(),R={state:h,dispatch:null,action:c,pending:null},M.queue=R,v=_n.bind(null,bn,R,I,v),R.dispatch=v,M.memoizedState=c,[h,v,!1]}function ca(c){var h=tt();return jn(h,Xn,c)}function jn(c,h,v){h=be(c,h,Ct)[0],c=ye(oe)[0],h=typeof h=="object"&&h!==null&&typeof h.then=="function"?vt(h):h;var M=tt(),R=M.queue,I=R.dispatch;return v!==M.memoizedState&&(bn.flags|=2048,Ei(9,Li.bind(null,R,v),{destroy:void 0},null)),[h,I,c]}function Li(c,h){c.action=h}function Zn(c){var h=tt(),v=Xn;if(v!==null)return jn(h,v,c);tt(),h=h.memoizedState,v=tt();var M=v.queue.dispatch;return v.memoizedState=c,[h,M,!1]}function Ei(c,h,v,M){return c={tag:c,create:h,inst:v,deps:M,next:null},h=bn.updateQueue,h===null&&(h=td(),bn.updateQueue=h),v=h.lastEffect,v===null?h.lastEffect=c.next=c:(M=v.next,v.next=c,c.next=M,h.lastEffect=c),c}function Gi(){return tt().memoizedState}function qi(c,h,v,M){var R=st();bn.flags|=c,R.memoizedState=Ei(1|h,v,{destroy:void 0},M===void 0?null:M)}function Xi(c,h,v,M){var R=tt();M=M===void 0?null:M;var I=R.memoizedState.inst;Xn!==null&&M!==null&&V(M,Xn.memoizedState.deps)?R.memoizedState=Ei(h,v,I,M):(bn.flags|=c,R.memoizedState=Ei(1|h,v,I,M))}function wl(c,h){qi(8390656,8,c,h)}function xr(c,h){Xi(2048,8,c,h)}function gv(c,h){return Xi(4,2,c,h)}function vv(c,h){return Xi(4,4,c,h)}function wu(c,h){if(typeof h=="function"){c=c();var v=h(c);return function(){typeof v=="function"?v():h(null)}}if(h!=null)return c=c(),h.current=c,function(){h.current=null}}function Es(c,h,v){v=v!=null?v.concat([c]):null,Xi(4,4,wu.bind(null,h,c),v)}function Tu(){}function cf(c,h){var v=tt();h=h===void 0?null:h;var M=v.memoizedState;return h!==null&&V(h,M[1])?M[0]:(v.memoizedState=[c,h],c)}function Tl(c,h){var v=tt();h=h===void 0?null:h;var M=v.memoizedState;if(h!==null&&V(h,M[1]))return M[0];if(M=c(),uo){Z(!0);try{c()}finally{Z(!1)}}return v.memoizedState=[M,h],M}function Uo(c,h,v){return v===void 0||(Bs&1073741824)!==0?c.memoizedState=h:(c.memoizedState=v,c=Ts(),bn.lanes|=c,Pr|=c,v)}function Ep(c,h,v,M){return Cr(v,h)?v:zs.current!==null?(c=Uo(c,v,M),Cr(c,h)||(zi=!0),c):(Bs&42)===0?(zi=!0,c.memoizedState=v):(c=Ts(),bn.lanes|=c,Pr|=c,h)}function uf(c,h,v,M,R){var I=ea();Ua(I!==0&&8>I?I:8);var Q=an.T,he={};an.T=he,df(c,!1,h,v);try{var Te=R(),We=an.S;if(We!==null&&We(he,Te),Te!==null&&typeof Te=="object"&&typeof Te.then=="function"){var xt=dt(Te,M);Io(c,h,xt,Xa(c))}else Io(c,h,M,Xa(c))}catch(Ot){Io(c,h,{then:function(){},status:"rejected",reason:Ot},Xa())}finally{Ua(I),an.T=Q}}function Mp(c){var h=c.memoizedState;if(h!==null)return h;h={memoizedState:ar,baseState:ar,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:oe,lastRenderedState:ar},next:null};var v={};return h.next={memoizedState:v,baseState:v,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:oe,lastRenderedState:v},next:null},c.memoizedState=h,c=c.alternate,c!==null&&(c.memoizedState=h),h}function Al(){return _a(ln)}function Ms(){return tt().memoizedState}function hf(){return tt().memoizedState}function Au(c){for(var h=c.return;h!==null;){switch(h.tag){case 24:case 3:var v=Xa();c=Xe(v);var M=qe(h,c,v);M!==null&&(Oa(M,h,v),Et(M,h,v)),h={cache:yf()},c.payload=h;return}h=h.return}}function Lo(c,h,v){var M=Xa();v={lane:M,revertLane:0,action:v,hasEagerState:!1,eagerState:null,next:null},Cl(c)?Cu(h,v):(v=je(c,h,v,M),v!==null&&(Oa(v,c,M),wp(v,h,M)))}function ff(c,h,v){var M=Xa();Io(c,h,v,M)}function Io(c,h,v,M){var R={lane:M,revertLane:0,action:v,hasEagerState:!1,eagerState:null,next:null};if(Cl(c))Cu(h,R);else{var I=c.alternate;if(c.lanes===0&&(I===null||I.lanes===0)&&(I=h.lastRenderedReducer,I!==null))try{var Q=h.lastRenderedState,he=I(Q,v);if(R.hasEagerState=!0,R.eagerState=he,Cr(he,Q))return ze(c,h,R,0),Cn===null&&xe(),!1}catch{}finally{}if(v=je(c,h,R,M),v!==null)return Oa(v,c,M),wp(v,h,M),!0}return!1}function df(c,h,v,M){if(M={lane:2,revertLane:ke(),action:M,hasEagerState:!1,eagerState:null,next:null},Cl(c)){if(h)throw Error(a(479))}else h=je(c,v,M,2),h!==null&&Oa(h,c,2)}function Cl(c){var h=c.alternate;return c===bn||h!==null&&h===bn}function Cu(c,h){gi=Jr=!0;var v=c.pending;v===null?h.next=h:(h.next=v.next,v.next=h),c.pending=h}function wp(c,h,v){if((v&4194176)!==0){var M=h.lanes;M&=c.pendingLanes,v|=M,h.lanes=v,K(c,v)}}function Ra(c,h,v,M){h=c.memoizedState,v=v(M,h),v=v==null?h:Bl({},h,v),c.memoizedState=v,c.lanes===0&&(c.updateQueue.baseState=v)}function Po(c,h,v,M,R,I,Q){return c=c.stateNode,typeof c.shouldComponentUpdate=="function"?c.shouldComponentUpdate(M,I,Q):h.prototype&&h.prototype.isPureReactComponent?!et(v,M)||!et(R,I):!0}function Ru(c,h,v,M){c=h.state,typeof h.componentWillReceiveProps=="function"&&h.componentWillReceiveProps(v,M),typeof h.UNSAFE_componentWillReceiveProps=="function"&&h.UNSAFE_componentWillReceiveProps(v,M),h.state!==c&&nd.enqueueReplaceState(h,h.state,null)}function rs(c,h){var v=h;if("ref"in h){v={};for(var M in h)M!=="ref"&&(v[M]=h[M])}if(c=c.defaultProps){v===h&&(v=Bl({},v));for(var R in c)v[R]===void 0&&(v[R]=c[R])}return v}function pf(c,h){try{var v=c.onUncaughtError;v(h.value,{componentStack:h.stack})}catch(M){setTimeout(function(){throw M})}}function mf(c,h,v){try{var M=c.onCaughtError;M(v.value,{componentStack:v.stack,errorBoundary:h.tag===1?h.stateNode:null})}catch(R){setTimeout(function(){throw R})}}function Nu(c,h,v){return v=Xe(v),v.tag=3,v.payload={element:null},v.callback=function(){pf(c,h)},v}function vc(c){return c=Xe(c),c.tag=3,c}function Ou(c,h,v,M){var R=v.type.getDerivedStateFromError;if(typeof R=="function"){var I=M.value;c.payload=function(){return R(I)},c.callback=function(){mf(h,v,M)}}var Q=v.stateNode;Q!==null&&typeof Q.componentDidCatch=="function"&&(c.callback=function(){mf(h,v,M),typeof R!="function"&&(Br===null?Br=new Set([this]):Br.add(this));var he=M.stack;this.componentDidCatch(M.value,{componentStack:he!==null?he:""})})}function yv(c,h,v,M,R){if(v.flags|=32768,M!==null&&typeof M=="object"&&typeof M.then=="function"){if(h=v.alternate,h!==null&&Rl(h,v,R,!0),v=Lr.current,v!==null){switch(v.tag){case 13:return Kr===null?ir():v.alternate===null&&Ln===0&&(Ln=3),v.flags&=-257,v.flags|=65536,v.lanes=R,M===ed?v.flags|=16384:(h=v.updateQueue,h===null?v.updateQueue=new Set([M]):h.add(M),Df(c,M,R)),!1;case 22:return v.flags|=65536,M===ed?v.flags|=16384:(h=v.updateQueue,h===null?(h={transitions:null,markerInstances:null,retryQueue:new Set([M])},v.updateQueue=h):(v=h.retryQueue,v===null?h.retryQueue=new Set([M]):v.add(M)),Df(c,M,R)),!1}throw Error(a(435,v.tag))}return Df(c,M,R),ir(),!1}if(zn)return h=Lr.current,h!==null?((h.flags&65536)===0&&(h.flags|=256),h.flags|=65536,h.lanes=R,M!==sh&&(c=Error(a(422),{cause:M}),Vt(pe(c,v)))):(M!==sh&&(h=Error(a(423),{cause:M}),Vt(pe(h,v))),c=c.current.alternate,c.flags|=65536,R&=-R,c.lanes|=R,M=pe(M,v),R=Nu(c.stateNode,M,R),ae(c,R),Ln!==4&&(Ln=2)),!1;var I=Error(a(520),{cause:M});if(I=pe(I,v),Xc===null?Xc=[I]:Xc.push(I),Ln!==4&&(Ln=2),h===null)return!0;M=pe(M,v),v=h;do{switch(v.tag){case 3:return v.flags|=65536,c=R&-R,v.lanes|=c,c=Nu(v.stateNode,M,c),ae(v,c),!1;case 1:if(h=v.type,I=v.stateNode,(v.flags&128)===0&&(typeof h.getDerivedStateFromError=="function"||I!==null&&typeof I.componentDidCatch=="function"&&(Br===null||!Br.has(I))))return v.flags|=65536,R&=-R,v.lanes|=R,R=vc(R),Ou(R,c,v,M),ae(v,R),!1}v=v.return}while(v!==null);return!1}function ya(c,h,v,M){h.child=c===null?Lm(h,null,v,M):sl(h,c.child,v,M)}function _v(c,h,v,M,R){v=v.render;var I=h.ref;if("ref"in M){var Q={};for(var he in M)he!=="ref"&&(Q[he]=M[he])}else Q=M;return Nl(h),M=$(c,h,v,Q,I,R),he=He(),c!==null&&!zi?(ct(c,h,R),Zs(c,h,R)):(zn&&he&&ce(h),h.flags|=1,ya(c,h,M,R),h.child)}function bv(c,h,v,M,R){if(c===null){var I=v.type;return typeof I=="function"&&!to(I)&&I.defaultProps===void 0&&v.compare===null?(h.tag=15,h.type=I,gf(c,h,I,M,R)):(c=qr(v.type,null,M,h,h.mode,R),c.ref=h.ref,c.return=h,h.child=c)}if(I=c.child,!Dp(c,R)){var Q=I.memoizedProps;if(v=v.compare,v=v!==null?v:et,v(Q,M)&&c.ref===h.ref)return Zs(c,h,R)}return h.flags|=1,c=Da(I,M),c.ref=h.ref,c.return=h,h.child=c}function gf(c,h,v,M,R){if(c!==null){var I=c.memoizedProps;if(et(I,M)&&c.ref===h.ref)if(zi=!1,h.pendingProps=M=I,Dp(c,R))(c.flags&131072)!==0&&(zi=!0);else return h.lanes=c.lanes,Zs(c,h,R)}return Tp(c,h,v,M,R)}function xv(c,h,v){var M=h.pendingProps,R=M.children,I=(h.stateNode._pendingVisibility&2)!==0,Q=c!==null?c.memoizedState:null;if(Du(c,h),M.mode==="hidden"||I){if((h.flags&128)!==0){if(M=Q!==null?Q.baseLanes|v:v,c!==null){for(R=h.child=c.child,I=0;R!==null;)I=I|R.lanes|R.childLanes,R=R.sibling;h.childLanes=I&~M}else h.childLanes=0,h.child=null;return Sv(c,h,M,v)}if((v&536870912)!==0)h.memoizedState={baseLanes:0,cachePool:null},c!==null&&_f(h,Q!==null?Q.cachePool:null),Q!==null?Ml(h,Q):Ys(),br(h);else return h.lanes=h.childLanes=536870912,Sv(c,h,Q!==null?Q.baseLanes|v:v,v)}else Q!==null?(_f(h,Q.cachePool),Ml(h,Q),oa(),h.memoizedState=null):(c!==null&&_f(h,null),Ys(),oa());return ya(c,h,R,v),h.child}function Sv(c,h,v,M){var R=Fo();return R=R===null?null:{parent:Ds?Kn._currentValue:Kn._currentValue2,pool:R},h.memoizedState={baseLanes:v,cachePool:R},c!==null&&_f(h,null),Ys(),br(h),c!==null&&Rl(c,h,M,!0),null}function Du(c,h){var v=h.ref;if(v===null)c!==null&&c.ref!==null&&(h.flags|=2097664);else{if(typeof v!="function"&&typeof v!="object")throw Error(a(284));(c===null||c.ref!==v)&&(h.flags|=2097664)}}function Tp(c,h,v,M,R){return Nl(h),v=$(c,h,v,M,void 0,R),M=He(),c!==null&&!zi?(ct(c,h,R),Zs(c,h,R)):(zn&&M&&ce(h),h.flags|=1,ya(c,h,v,R),h.child)}function Ev(c,h,v,M,R,I){return Nl(h),h.updateQueue=null,v=Ue(h,M,v,R),de(c),M=He(),c!==null&&!zi?(ct(c,h,I),Zs(c,h,I)):(zn&&M&&ce(h),h.flags|=1,ya(c,h,v,I),h.child)}function Ap(c,h,v,M,R){if(Nl(h),h.stateNode===null){var I=jl,Q=v.contextType;typeof Q=="object"&&Q!==null&&(I=_a(Q)),I=new v(M,I),h.memoizedState=I.state!==null&&I.state!==void 0?I.state:null,I.updater=nd,h.stateNode=I,I._reactInternals=h,I=h.stateNode,I.props=M,I.state=h.memoizedState,I.refs={},Nt(h),Q=v.contextType,I.context=typeof Q=="object"&&Q!==null?_a(Q):jl,I.state=h.memoizedState,Q=v.getDerivedStateFromProps,typeof Q=="function"&&(Ra(h,v,Q,M),I.state=h.memoizedState),typeof v.getDerivedStateFromProps=="function"||typeof I.getSnapshotBeforeUpdate=="function"||typeof I.UNSAFE_componentWillMount!="function"&&typeof I.componentWillMount!="function"||(Q=I.state,typeof I.componentWillMount=="function"&&I.componentWillMount(),typeof I.UNSAFE_componentWillMount=="function"&&I.UNSAFE_componentWillMount(),Q!==I.state&&nd.enqueueReplaceState(I,I.state,null),Qe(h,M,I,R),Ee(),I.state=h.memoizedState),typeof I.componentDidMount=="function"&&(h.flags|=4194308),M=!0}else if(c===null){I=h.stateNode;var he=h.memoizedProps,Te=rs(v,he);I.props=Te;var We=I.context,xt=v.contextType;Q=jl,typeof xt=="object"&&xt!==null&&(Q=_a(xt));var Ot=v.getDerivedStateFromProps;xt=typeof Ot=="function"||typeof I.getSnapshotBeforeUpdate=="function",he=h.pendingProps!==he,xt||typeof I.UNSAFE_componentWillReceiveProps!="function"&&typeof I.componentWillReceiveProps!="function"||(he||We!==Q)&&Ru(h,I,M,Q),co=!1;var It=h.memoizedState;I.state=It,Qe(h,M,I,R),Ee(),We=h.memoizedState,he||It!==We||co?(typeof Ot=="function"&&(Ra(h,v,Ot,M),We=h.memoizedState),(Te=co||Po(h,v,Te,M,It,We,Q))?(xt||typeof I.UNSAFE_componentWillMount!="function"&&typeof I.componentWillMount!="function"||(typeof I.componentWillMount=="function"&&I.componentWillMount(),typeof I.UNSAFE_componentWillMount=="function"&&I.UNSAFE_componentWillMount()),typeof I.componentDidMount=="function"&&(h.flags|=4194308)):(typeof I.componentDidMount=="function"&&(h.flags|=4194308),h.memoizedProps=M,h.memoizedState=We),I.props=M,I.state=We,I.context=Q,M=Te):(typeof I.componentDidMount=="function"&&(h.flags|=4194308),M=!1)}else{I=h.stateNode,jt(c,h),Q=h.memoizedProps,xt=rs(v,Q),I.props=xt,Ot=h.pendingProps,It=I.context,We=v.contextType,Te=jl,typeof We=="object"&&We!==null&&(Te=_a(We)),he=v.getDerivedStateFromProps,(We=typeof he=="function"||typeof I.getSnapshotBeforeUpdate=="function")||typeof I.UNSAFE_componentWillReceiveProps!="function"&&typeof I.componentWillReceiveProps!="function"||(Q!==Ot||It!==Te)&&Ru(h,I,M,Te),co=!1,It=h.memoizedState,I.state=It,Qe(h,M,I,R),Ee();var fn=h.memoizedState;Q!==Ot||It!==fn||co||c!==null&&c.dependencies!==null&&Bo(c.dependencies)?(typeof he=="function"&&(Ra(h,v,he,M),fn=h.memoizedState),(xt=co||Po(h,v,xt,M,It,fn,Te)||c!==null&&c.dependencies!==null&&Bo(c.dependencies))?(We||typeof I.UNSAFE_componentWillUpdate!="function"&&typeof I.componentWillUpdate!="function"||(typeof I.componentWillUpdate=="function"&&I.componentWillUpdate(M,fn,Te),typeof I.UNSAFE_componentWillUpdate=="function"&&I.UNSAFE_componentWillUpdate(M,fn,Te)),typeof I.componentDidUpdate=="function"&&(h.flags|=4),typeof I.getSnapshotBeforeUpdate=="function"&&(h.flags|=1024)):(typeof I.componentDidUpdate!="function"||Q===c.memoizedProps&&It===c.memoizedState||(h.flags|=4),typeof I.getSnapshotBeforeUpdate!="function"||Q===c.memoizedProps&&It===c.memoizedState||(h.flags|=1024),h.memoizedProps=M,h.memoizedState=fn),I.props=M,I.state=fn,I.context=Te,M=xt):(typeof I.componentDidUpdate!="function"||Q===c.memoizedProps&&It===c.memoizedState||(h.flags|=4),typeof I.getSnapshotBeforeUpdate!="function"||Q===c.memoizedProps&&It===c.memoizedState||(h.flags|=1024),M=!1)}return I=M,Du(c,h),M=(h.flags&128)!==0,I||M?(I=h.stateNode,v=M&&typeof v.getDerivedStateFromError!="function"?null:I.render(),h.flags|=1,c!==null&&M?(h.child=sl(h,c.child,null,R),h.child=sl(h,null,v,R)):ya(c,h,v,R),h.memoizedState=I.state,c=h.child):c=Zs(c,h,R),c}function Mv(c,h,v,M){return nn(),h.flags|=256,ya(c,h,v,M),h.child}function Cp(c){return{baseLanes:c,cachePool:Rv()}}function Rp(c,h,v){return c=c!==null?c.childLanes&~v:0,h&&(c|=ur),c}function wv(c,h,v){var M=h.pendingProps,R=!1,I=(h.flags&128)!==0,Q;if((Q=I)||(Q=c!==null&&c.memoizedState===null?!1:(Yi.current&2)!==0),Q&&(R=!0,h.flags&=-129),Q=(h.flags&32)!==0,h.flags&=-33,c===null){if(zn){if(R?er(h):oa(),zn){var he=Ma,Te;(Te=he)&&(he=e0(he,Yr),he!==null?(h.memoizedState={dehydrated:he,treeContext:us!==null?{id:Is,overflow:Wr}:null,retryLane:536870912},Te=t(18,null,null,0),Te.stateNode=he,Te.return=h,h.child=Te,La=h,Ma=null,Te=!0):Te=!1),Te||Je(h)}if(he=h.memoizedState,he!==null&&(he=he.dehydrated,he!==null))return Qu(he)?h.lanes=16:h.lanes=536870912,null;en(h)}return he=M.children,M=M.fallback,R?(oa(),R=h.mode,he=Np({mode:"hidden",children:he},R),M=io(M,R,v,null),he.return=h,M.return=h,he.sibling=M,h.child=he,R=h.child,R.memoizedState=Cp(v),R.childLanes=Rp(c,Q,v),h.memoizedState=Pa,M):(er(h),Uu(h,he))}if(Te=c.memoizedState,Te!==null&&(he=Te.dehydrated,he!==null)){if(I)h.flags&256?(er(h),h.flags&=-257,h=Op(c,h,v)):h.memoizedState!==null?(oa(),h.child=c.child,h.flags|=128,h=null):(oa(),R=M.fallback,he=h.mode,M=Np({mode:"visible",children:M.children},he),R=io(R,he,v,null),R.flags|=2,M.return=h,R.return=h,M.sibling=R,h.child=M,sl(h,c.child,null,v),M=h.child,M.memoizedState=Cp(v),M.childLanes=Rp(c,Q,v),h.memoizedState=Pa,h=R);else if(er(h),Qu(he))Q=Wv(he).digest,M=Error(a(419)),M.stack="",M.digest=Q,Vt({value:M,source:null,stack:null}),h=Op(c,h,v);else if(zi||Rl(c,h,v,!1),Q=(v&c.childLanes)!==0,zi||Q){if(Q=Cn,Q!==null){if(M=v&-v,(M&42)!==0)M=1;else switch(M){case 2:M=1;break;case 8:M=4;break;case 32:M=16;break;case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:M=64;break;case 268435456:M=134217728;break;default:M=0}if(M=(M&(Q.suspendedLanes|v))!==0?0:M,M!==0&&M!==Te.retryLane)throw Te.retryLane=M,ot(c,M),Oa(Q,c,M),m0}Gf(he)||ir(),h=Op(c,h,v)}else Gf(he)?(h.flags|=128,h.child=c.child,h=Pl.bind(null,c),$b(he,h),h=null):(c=Te.treeContext,Wa&&(Ma=Jv(he),La=h,zn=!0,Or=null,Yr=!1,c!==null&&(Rr[Nr++]=Is,Rr[Nr++]=Wr,Rr[Nr++]=us,Is=c.id,Wr=c.overflow,us=h)),h=Uu(h,M.children),h.flags|=4096);return h}return R?(oa(),R=M.fallback,he=h.mode,Te=c.child,I=Te.sibling,M=Da(Te,{mode:"hidden",children:M.children}),M.subtreeFlags=Te.subtreeFlags&31457280,I!==null?R=Da(I,R):(R=io(R,he,v,null),R.flags|=2),R.return=h,M.return=h,M.sibling=R,h.child=M,M=R,R=h.child,he=c.child.memoizedState,he===null?he=Cp(v):(Te=he.cachePool,Te!==null?(I=Ds?Kn._currentValue:Kn._currentValue2,Te=Te.parent!==I?{parent:I,pool:I}:Te):Te=Rv(),he={baseLanes:he.baseLanes|v,cachePool:Te}),R.memoizedState=he,R.childLanes=Rp(c,Q,v),h.memoizedState=Pa,M):(er(h),v=c.child,c=v.sibling,v=Da(v,{mode:"visible",children:M.children}),v.return=h,v.sibling=null,c!==null&&(Q=h.deletions,Q===null?(h.deletions=[c],h.flags|=16):Q.push(c)),h.child=v,h.memoizedState=null,v)}function Uu(c,h){return h=Np({mode:"visible",children:h},c.mode),h.return=c,c.child=h}function Np(c,h){return Uf(c,h,0,null)}function Op(c,h,v){return sl(h,c.child,null,v),c=Uu(h,h.pendingProps.children),c.flags|=2,h.memoizedState=null,c}function Tv(c,h,v){c.lanes|=h;var M=c.alternate;M!==null&&(M.lanes|=h),Up(c.return,h,v)}function vf(c,h,v,M,R){var I=c.memoizedState;I===null?c.memoizedState={isBackwards:h,rendering:null,renderingStartTime:0,last:M,tail:v,tailMode:R}:(I.isBackwards=h,I.rendering=null,I.renderingStartTime=0,I.last=M,I.tail=v,I.tailMode=R)}function Av(c,h,v){var M=h.pendingProps,R=M.revealOrder,I=M.tail;if(ya(c,h,M.children,v),M=Yi.current,(M&2)!==0)M=M&1|2,h.flags|=128;else{if(c!==null&&(c.flags&128)!==0)e:for(c=h.child;c!==null;){if(c.tag===13)c.memoizedState!==null&&Tv(c,v,h);else if(c.tag===19)Tv(c,v,h);else if(c.child!==null){c.child.return=c,c=c.child;continue}if(c===h)break e;for(;c.sibling===null;){if(c.return===null||c.return===h)break e;c=c.return}c.sibling.return=c.return,c=c.sibling}M&=1}switch(C(Yi,M),R){case"forwards":for(v=h.child,R=null;v!==null;)c=v.alternate,c!==null&&la(c)===null&&(R=v),v=v.sibling;v=R,v===null?(R=h.child,h.child=null):(R=v.sibling,v.sibling=null),vf(h,!1,R,v,I);break;case"backwards":for(v=null,R=h.child,h.child=null;R!==null;){if(c=R.alternate,c!==null&&la(c)===null){h.child=R;break}c=R.sibling,R.sibling=v,v=R,R=c}vf(h,!0,v,null,I);break;case"together":vf(h,!1,null,null,void 0);break;default:h.memoizedState=null}return h.child}function Zs(c,h,v){if(c!==null&&(h.dependencies=c.dependencies),Pr|=h.lanes,(v&h.childLanes)===0)if(c!==null){if(Rl(c,h,v,!1),(v&h.childLanes)===0)return null}else return null;if(c!==null&&h.child!==c.child)throw Error(a(153));if(h.child!==null){for(c=h.child,v=Da(c,c.pendingProps),h.child=v,v.return=h;c.sibling!==null;)c=c.sibling,v=v.sibling=Da(c,c.pendingProps),v.return=h;v.sibling=null}return h.child}function Dp(c,h){return(c.lanes&h)!==0?!0:(c=c.dependencies,!!(c!==null&&Bo(c)))}function Kb(c,h,v){switch(h.tag){case 3:Le(h,h.stateNode.containerInfo),zo(h,Kn,c.memoizedState.cache),nn();break;case 27:case 5:ve(h);break;case 4:Le(h,h.stateNode.containerInfo);break;case 10:zo(h,h.type,h.memoizedProps.value);break;case 13:var M=h.memoizedState;if(M!==null)return M.dehydrated!==null?(er(h),h.flags|=128,null):(v&h.child.childLanes)!==0?wv(c,h,v):(er(h),c=Zs(c,h,v),c!==null?c.sibling:null);er(h);break;case 19:var R=(c.flags&128)!==0;if(M=(v&h.childLanes)!==0,M||(Rl(c,h,v,!1),M=(v&h.childLanes)!==0),R){if(M)return Av(c,h,v);h.flags|=128}if(R=h.memoizedState,R!==null&&(R.rendering=null,R.tail=null,R.lastEffect=null),C(Yi,Yi.current),M)break;return null;case 22:case 23:return h.lanes=0,xv(c,h,v);case 24:zo(h,Kn,c.memoizedState.cache)}return Zs(c,h,v)}function Cv(c,h,v){if(c!==null)if(c.memoizedProps!==h.pendingProps)zi=!0;else{if(!Dp(c,v)&&(h.flags&128)===0)return zi=!1,Kb(c,h,v);zi=(c.flags&131072)!==0}else zi=!1,zn&&(h.flags&1048576)!==0&&J(h,ah,h.index);switch(h.lanes=0,h.tag){case 16:e:{c=h.pendingProps;var M=h.elementType,R=M._init;if(M=R(M._payload),h.type=M,typeof M=="function")to(M)?(c=rs(M,c),h.tag=1,h=Ap(null,h,M,c,v)):(h.tag=0,h=Tp(null,h,M,c,v));else{if(M!=null){if(R=M.$$typeof,R===Uc){h.tag=11,h=_v(null,h,M,c,v);break e}else if(R===Gu){h.tag=14,h=bv(null,h,M,c,v);break e}}throw h=l(M)||M,Error(a(306,h,""))}}return h;case 0:return Tp(c,h,h.type,h.pendingProps,v);case 1:return M=h.type,R=rs(M,h.pendingProps),Ap(c,h,M,R,v);case 3:e:{if(Le(h,h.stateNode.containerInfo),c===null)throw Error(a(387));var I=h.pendingProps;R=h.memoizedState,M=R.element,jt(c,h),Qe(h,I,null,v);var Q=h.memoizedState;if(I=Q.cache,zo(h,Kn,I),I!==R.cache&&Lp(h,[Kn],v,!0),Ee(),I=Q.element,Wa&&R.isDehydrated)if(R={element:I,isDehydrated:!1,cache:Q.cache},h.updateQueue.baseState=R,h.memoizedState=R,h.flags&256){h=Mv(c,h,I,v);break e}else if(I!==M){M=pe(Error(a(424)),h),Vt(M),h=Mv(c,h,I,v);break e}else for(Wa&&(Ma=Kv(h.stateNode.containerInfo),La=h,zn=!0,Or=null,Yr=!0),v=Lm(h,null,I,v),h.child=v;v;)v.flags=v.flags&-3|4096,v=v.sibling;else{if(nn(),I===M){h=Zs(c,h,v);break e}ya(c,h,I,v)}h=h.child}return h;case 26:if(Ar)return Du(c,h),c===null?(v=Zf(h.type,null,h.pendingProps,null))?h.memoizedState=v:zn||(h.stateNode=tx(h.type,h.pendingProps,hs.current,h)):h.memoizedState=Zf(h.type,c.memoizedProps,h.pendingProps,c.memoizedState),null;case 27:if(Sa)return ve(h),c===null&&Sa&&zn&&(M=h.stateNode=Nm(h.type,h.pendingProps,hs.current,pa.current,!1),La=h,Yr=!0,Ma=qf(M)),M=h.pendingProps.children,c!==null||zn?ya(c,h,M,v):h.child=sl(h,null,M,v),Du(c,h),h.child;case 5:return c===null&&zn&&(r0(h.type,h.pendingProps,pa.current),(R=M=Ma)&&(M=Qv(M,h.type,h.pendingProps,Yr),M!==null?(h.stateNode=M,La=h,Ma=qf(M),Yr=!1,R=!0):R=!1),R||Je(h)),ve(h),R=h.type,I=h.pendingProps,Q=c!==null?c.memoizedProps:null,M=I.children,tl(R,I)?M=null:Q!==null&&tl(R,Q)&&(h.flags|=32),h.memoizedState!==null&&(R=$(c,h,Ve,null,null,v),Ds?ln._currentValue=R:ln._currentValue2=R),Du(c,h),ya(c,h,M,v),h.child;case 6:return c===null&&zn&&(s0(h.pendingProps,pa.current),(c=v=Ma)&&(v=$v(v,h.pendingProps,Yr),v!==null?(h.stateNode=v,La=h,Ma=null,c=!0):c=!1),c||Je(h)),null;case 13:return wv(c,h,v);case 4:return Le(h,h.stateNode.containerInfo),M=h.pendingProps,c===null?h.child=sl(h,null,M,v):ya(c,h,M,v),h.child;case 11:return _v(c,h,h.type,h.pendingProps,v);case 7:return ya(c,h,h.pendingProps,v),h.child;case 8:return ya(c,h,h.pendingProps.children,v),h.child;case 12:return ya(c,h,h.pendingProps.children,v),h.child;case 10:return M=h.pendingProps,zo(h,h.type,M.value),ya(c,h,M.children,v),h.child;case 9:return R=h.type._context,M=h.pendingProps.children,Nl(h),R=_a(R),M=M(R),h.flags|=1,ya(c,h,M,v),h.child;case 14:return bv(c,h,h.type,h.pendingProps,v);case 15:return gf(c,h,h.type,h.pendingProps,v);case 19:return Av(c,h,v);case 22:return xv(c,h,v);case 24:return Nl(h),M=_a(Kn),c===null?(R=Fo(),R===null&&(R=Cn,I=yf(),R.pooledCache=I,I.refCount++,I!==null&&(R.pooledCacheLanes|=v),R=I),h.memoizedState={parent:M,cache:R},Nt(h),zo(h,Kn,R)):((c.lanes&v)!==0&&(jt(c,h),Qe(h,null,null,v),Ee()),R=c.memoizedState,I=h.memoizedState,R.parent!==M?(R={parent:M,cache:M},h.memoizedState=R,h.lanes===0&&(h.memoizedState=h.updateQueue.baseState=R),zo(h,Kn,M)):(M=I.cache,zo(h,Kn,M),M!==R.cache&&Lp(h,[Kn],v,!0))),ya(c,h,h.pendingProps.children,v),h.child;case 29:throw h.pendingProps}throw Error(a(156,h.tag))}function zo(c,h,v){Ds?(C(lr,h._currentValue),h._currentValue=v):(C(lr,h._currentValue2),h._currentValue2=v)}function Ks(c){var h=lr.current;Ds?c._currentValue=h:c._currentValue2=h,S(lr)}function Up(c,h,v){for(;c!==null;){var M=c.alternate;if((c.childLanes&h)!==h?(c.childLanes|=h,M!==null&&(M.childLanes|=h)):M!==null&&(M.childLanes&h)!==h&&(M.childLanes|=h),c===v)break;c=c.return}}function Lp(c,h,v,M){var R=c.child;for(R!==null&&(R.return=c);R!==null;){var I=R.dependencies;if(I!==null){var Q=R.child;I=I.firstContext;e:for(;I!==null;){var he=I;I=R;for(var Te=0;Te<h.length;Te++)if(he.context===h[Te]){I.lanes|=v,he=I.alternate,he!==null&&(he.lanes|=v),Up(I.return,v,c),M||(Q=null);break e}I=he.next}}else if(R.tag===18){if(Q=R.return,Q===null)throw Error(a(341));Q.lanes|=v,I=Q.alternate,I!==null&&(I.lanes|=v),Up(Q,v,c),Q=null}else Q=R.child;if(Q!==null)Q.return=R;else for(Q=R;Q!==null;){if(Q===c){Q=null;break}if(R=Q.sibling,R!==null){R.return=Q.return,Q=R;break}Q=Q.return}R=Q}}function Rl(c,h,v,M){c=null;for(var R=h,I=!1;R!==null;){if(!I){if((R.flags&524288)!==0)I=!0;else if((R.flags&262144)!==0)break}if(R.tag===10){var Q=R.alternate;if(Q===null)throw Error(a(387));if(Q=Q.memoizedProps,Q!==null){var he=R.type;Cr(R.pendingProps.value,Q.value)||(c!==null?c.push(he):c=[he])}}else if(R===kc.current){if(Q=R.alternate,Q===null)throw Error(a(387));Q.memoizedState.memoizedState!==R.memoizedState.memoizedState&&(c!==null?c.push(ln):c=[ln])}R=R.return}c!==null&&Lp(h,c,v,M),h.flags|=262144}function Bo(c){for(c=c.firstContext;c!==null;){var h=c.context;if(!Cr(Ds?h._currentValue:h._currentValue2,c.memoizedValue))return!0;c=c.next}return!1}function Nl(c){ll=c,Ci=null,c=c.dependencies,c!==null&&(c.firstContext=null)}function _a(c){return Ip(ll,c)}function Lu(c,h){return ll===null&&Nl(c),Ip(c,h)}function Ip(c,h){var v=Ds?h._currentValue:h._currentValue2;if(h={context:h,memoizedValue:v,next:null},Ci===null){if(c===null)throw Error(a(308));Ci=h,c.dependencies={lanes:0,firstContext:h},c.flags|=524288}else Ci=Ci.next=h;return v}function yf(){return{controller:new g0,data:new Map,refCount:0}}function yc(c){c.refCount--,c.refCount===0&&ho(Xl,function(){c.controller.abort()})}function Fo(){var c=fo.current;return c!==null?c:Cn.pooledCache}function _f(c,h){h===null?C(fo,fo.current):C(fo,h.pool)}function Rv(){var c=Fo();return c===null?null:{parent:Ds?Kn._currentValue:Kn._currentValue2,pool:c}}function Sr(c){c.flags|=4}function Pp(c,h){if(c!==null&&c.child===h.child)return!1;if((h.flags&16)!==0)return!0;for(c=h.child;c!==null;){if((c.flags&13878)!==0||(c.subtreeFlags&13878)!==0)return!0;c=c.sibling}return!1}function bf(c,h,v,M){if(xa)for(v=h.child;v!==null;){if(v.tag===5||v.tag===6)Os(c,v.stateNode);else if(!(v.tag===4||Sa&&v.tag===27)&&v.child!==null){v.child.return=v,v=v.child;continue}if(v===h)break;for(;v.sibling===null;){if(v.return===null||v.return===h)return;v=v.return}v.sibling.return=v.return,v=v.sibling}else if(wr)for(var R=h.child;R!==null;){if(R.tag===5){var I=R.stateNode;v&&M&&(I=vm(I,R.type,R.memoizedProps)),Os(c,I)}else if(R.tag===6)I=R.stateNode,v&&M&&(I=ym(I,R.memoizedProps)),Os(c,I);else if(R.tag!==4){if(R.tag===22&&R.memoizedState!==null)I=R.child,I!==null&&(I.return=R),bf(c,R,!0,!0);else if(R.child!==null){R.child.return=R,R=R.child;continue}}if(R===h)break;for(;R.sibling===null;){if(R.return===null||R.return===h)return;R=R.return}R.sibling.return=R.return,R=R.sibling}}function _c(c,h,v,M){if(wr)for(var R=h.child;R!==null;){if(R.tag===5){var I=R.stateNode;v&&M&&(I=vm(I,R.type,R.memoizedProps)),mm(c,I)}else if(R.tag===6)I=R.stateNode,v&&M&&(I=ym(I,R.memoizedProps)),mm(c,I);else if(R.tag!==4){if(R.tag===22&&R.memoizedState!==null)I=R.child,I!==null&&(I.return=R),_c(c,R,!(R.memoizedProps!==null&&R.memoizedProps.mode==="manual"),!0);else if(R.child!==null){R.child.return=R,R=R.child;continue}}if(R===h)break;for(;R.sibling===null;){if(R.return===null||R.return===h)return;R=R.return}R.sibling.return=R.return,R=R.sibling}}function bc(c,h){if(wr&&Pp(c,h)){c=h.stateNode;var v=c.containerInfo,M=jf();_c(M,h,!1,!1),c.pendingChildren=M,Sr(h),Xv(v,M)}}function zp(c,h,v,M){if(xa)c.memoizedProps!==M&&Sr(h);else if(wr){var R=c.stateNode,I=c.memoizedProps;if((c=Pp(c,h))||I!==M){var Q=pa.current;I=pm(R,v,I,M,!c,null),I===R?h.stateNode=R:(ro(I,v,M,Q)&&Sr(h),h.stateNode=I,c?bf(I,h,!1,!1):Sr(h))}else h.stateNode=R}}function xc(c,h,v){if(jv(h,v)){if(c.flags|=16777216,!so(h,v))if(ku())c.flags|=8192;else throw ql=ed,Um}else c.flags&=-16777217}function Bp(c,h){if(o0(h)){if(c.flags|=16777216,!Cm(h))if(ku())c.flags|=8192;else throw ql=ed,Um}else c.flags&=-16777217}function Iu(c,h){h!==null&&(c.flags|=4),c.flags&16384&&(h=c.tag!==22?D():536870912,c.lanes|=h,mo|=h)}function Ol(c,h){if(!zn)switch(c.tailMode){case"hidden":h=c.tail;for(var v=null;h!==null;)h.alternate!==null&&(v=h),h=h.sibling;v===null?c.tail=null:v.sibling=null;break;case"collapsed":v=c.tail;for(var M=null;v!==null;)v.alternate!==null&&(M=v),v=v.sibling;M===null?h||c.tail===null?c.tail=null:c.tail.sibling=null:M.sibling=null}}function di(c){var h=c.alternate!==null&&c.alternate.child===c.child,v=0,M=0;if(h)for(var R=c.child;R!==null;)v|=R.lanes|R.childLanes,M|=R.subtreeFlags&31457280,M|=R.flags&31457280,R.return=c,R=R.sibling;else for(R=c.child;R!==null;)v|=R.lanes|R.childLanes,M|=R.subtreeFlags,M|=R.flags,R.return=c,R=R.sibling;return c.subtreeFlags|=M,c.childLanes=v,h}function Nv(c,h,v){var M=h.pendingProps;switch(Se(h),h.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return di(h),null;case 1:return di(h),null;case 3:return v=h.stateNode,M=null,c!==null&&(M=c.memoizedState.cache),h.memoizedState.cache!==M&&(h.flags|=2048),Ks(Kn),nt(),v.pendingContext&&(v.context=v.pendingContext,v.pendingContext=null),(c===null||c.child===null)&&($t(h)?Sr(h):c===null||c.memoizedState.isDehydrated&&(h.flags&256)===0||(h.flags|=1024,Or!==null&&(Qs(Or),Or=null))),bc(c,h),di(h),null;case 26:if(Ar){v=h.type;var R=h.memoizedState;return c===null?(Sr(h),R!==null?(di(h),Bp(h,R)):(di(h),xc(h,v,M))):R?R!==c.memoizedState?(Sr(h),di(h),Bp(h,R)):(di(h),h.flags&=-16777217):(xa?c.memoizedProps!==M&&Sr(h):zp(c,h,v,M),di(h),xc(h,v,M)),null}case 27:if(Sa){if(Ce(h),v=hs.current,R=h.type,c!==null&&h.stateNode!=null)xa?c.memoizedProps!==M&&Sr(h):zp(c,h,R,M);else{if(!M){if(h.stateNode===null)throw Error(a(166));return di(h),null}c=pa.current,$t(h)?yt(h,c):(c=Nm(R,M,v,c,!0),h.stateNode=c,Sr(h))}return di(h),null}case 5:if(Ce(h),v=h.type,c!==null&&h.stateNode!=null)zp(c,h,v,M);else{if(!M){if(h.stateNode===null)throw Error(a(166));return di(h),null}c=pa.current,$t(h)?yt(h,c):(R=im(v,M,hs.current,c,h),bf(R,h,!1,!1),h.stateNode=R,ro(R,v,M,c)&&Sr(h))}return di(h),xc(h,h.type,h.pendingProps),null;case 6:if(c&&h.stateNode!=null)v=c.memoizedProps,xa?v!==M&&Sr(h):wr&&(v!==M?(h.stateNode=zf(M,hs.current,pa.current,h),Sr(h)):h.stateNode=c.stateNode);else{if(typeof M!="string"&&h.stateNode===null)throw Error(a(166));if(c=hs.current,v=pa.current,$t(h)){if(!Wa)throw Error(a(176));if(c=h.stateNode,v=h.memoizedProps,M=null,R=La,R!==null)switch(R.tag){case 27:case 5:M=R.memoizedProps}t0(c,v,h,M)||Je(h)}else h.stateNode=zf(M,c,v,h)}return di(h),null;case 13:if(M=h.memoizedState,c===null||c.memoizedState!==null&&c.memoizedState.dehydrated!==null){if(R=$t(h),M!==null&&M.dehydrated!==null){if(c===null){if(!R)throw Error(a(318));if(!Wa)throw Error(a(344));if(R=h.memoizedState,R=R!==null?R.dehydrated:null,!R)throw Error(a(317));Ic(R,h)}else nn(),(h.flags&128)===0&&(h.memoizedState=null),h.flags|=4;di(h),R=!1}else Or!==null&&(Qs(Or),Or=null),R=!0;if(!R)return h.flags&256?(en(h),h):(en(h),null)}if(en(h),(h.flags&128)!==0)return h.lanes=v,h;if(v=M!==null,c=c!==null&&c.memoizedState!==null,v){M=h.child,R=null,M.alternate!==null&&M.alternate.memoizedState!==null&&M.alternate.memoizedState.cachePool!==null&&(R=M.alternate.memoizedState.cachePool.pool);var I=null;M.memoizedState!==null&&M.memoizedState.cachePool!==null&&(I=M.memoizedState.cachePool.pool),I!==R&&(M.flags|=2048)}return v!==c&&v&&(h.child.flags|=8192),Iu(h,h.updateQueue),di(h),null;case 4:return nt(),bc(c,h),c===null&&sm(h.stateNode.containerInfo),di(h),null;case 10:return Ks(h.type),di(h),null;case 19:if(S(Yi),R=h.memoizedState,R===null)return di(h),null;if(M=(h.flags&128)!==0,I=R.rendering,I===null)if(M)Ol(R,!1);else{if(Ln!==0||c!==null&&(c.flags&128)!==0)for(c=h.child;c!==null;){if(I=la(c),I!==null){for(h.flags|=128,Ol(R,!1),c=I.updateQueue,h.updateQueue=c,Iu(h,c),h.subtreeFlags=0,c=v,v=h.child;v!==null;)no(v,c),v=v.sibling;return C(Yi,Yi.current&1|2),h.child}c=c.sibling}R.tail!==null&&Ea()>xi&&(h.flags|=128,M=!0,Ol(R,!1),h.lanes=4194304)}else{if(!M)if(c=la(I),c!==null){if(h.flags|=128,M=!0,c=c.updateQueue,h.updateQueue=c,Iu(h,c),Ol(R,!0),R.tail===null&&R.tailMode==="hidden"&&!I.alternate&&!zn)return di(h),null}else 2*Ea()-R.renderingStartTime>xi&&v!==536870912&&(h.flags|=128,M=!0,Ol(R,!1),h.lanes=4194304);R.isBackwards?(I.sibling=h.child,h.child=I):(c=R.last,c!==null?c.sibling=I:h.child=I,R.last=I)}return R.tail!==null?(h=R.tail,R.rendering=h,R.tail=h.sibling,R.renderingStartTime=Ea(),h.sibling=null,c=Yi.current,C(Yi,M?c&1|2:c&1),h):(di(h),null);case 22:case 23:return en(h),_r(),M=h.memoizedState!==null,c!==null?c.memoizedState!==null!==M&&(h.flags|=8192):M&&(h.flags|=8192),M?(v&536870912)!==0&&(h.flags&128)===0&&(di(h),h.subtreeFlags&6&&(h.flags|=8192)):di(h),v=h.updateQueue,v!==null&&Iu(h,v.retryQueue),v=null,c!==null&&c.memoizedState!==null&&c.memoizedState.cachePool!==null&&(v=c.memoizedState.cachePool.pool),M=null,h.memoizedState!==null&&h.memoizedState.cachePool!==null&&(M=h.memoizedState.cachePool.pool),M!==v&&(h.flags|=2048),c!==null&&S(fo),null;case 24:return v=null,c!==null&&(v=c.memoizedState.cache),h.memoizedState.cache!==v&&(h.flags|=2048),Ks(Kn),di(h),null;case 25:return null}throw Error(a(156,h.tag))}function Ov(c,h){switch(Se(h),h.tag){case 1:return c=h.flags,c&65536?(h.flags=c&-65537|128,h):null;case 3:return Ks(Kn),nt(),c=h.flags,(c&65536)!==0&&(c&128)===0?(h.flags=c&-65537|128,h):null;case 26:case 27:case 5:return Ce(h),null;case 13:if(en(h),c=h.memoizedState,c!==null&&c.dehydrated!==null){if(h.alternate===null)throw Error(a(340));nn()}return c=h.flags,c&65536?(h.flags=c&-65537|128,h):null;case 19:return S(Yi),null;case 4:return nt(),null;case 10:return Ks(h.type),null;case 22:case 23:return en(h),_r(),c!==null&&S(fo),c=h.flags,c&65536?(h.flags=c&-65537|128,h):null;case 24:return Ks(Kn),null;case 25:return null;default:return null}}function Fp(c,h){switch(Se(h),h.tag){case 3:Ks(Kn),nt();break;case 26:case 27:case 5:Ce(h);break;case 4:nt();break;case 13:en(h);break;case 19:S(Yi);break;case 10:Ks(h.type);break;case 22:case 23:en(h),_r(),c!==null&&S(fo);break;case 24:Ks(Kn)}}function Pu(c,h){try{var v=h.updateQueue,M=v!==null?v.lastEffect:null;if(M!==null){var R=M.next;v=R;do{if((v.tag&c)===c){M=void 0;var I=v.create,Q=v.inst;M=I(),Q.destroy=M}v=v.next}while(v!==R)}}catch(he){Rn(h,h.return,he)}}function ko(c,h,v){try{var M=h.updateQueue,R=M!==null?M.lastEffect:null;if(R!==null){var I=R.next;M=I;do{if((M.tag&c)===c){var Q=M.inst,he=Q.destroy;if(he!==void 0){Q.destroy=void 0,R=h;var Te=v;try{he()}catch(We){Rn(R,Te,We)}}}M=M.next}while(M!==I)}}catch(We){Rn(h,h.return,We)}}function Dv(c){var h=c.updateQueue;if(h!==null){var v=c.stateNode;try{Ae(h,v)}catch(M){Rn(c,c.return,M)}}}function Uv(c,h,v){v.props=rs(c.type,c.memoizedProps),v.state=c.memoizedState;try{v.componentWillUnmount()}catch(M){Rn(c,h,M)}}function Dl(c,h){try{var v=c.ref;if(v!==null){var M=c.stateNode;switch(c.tag){case 26:case 27:case 5:var R=Lc(M);break;default:R=M}typeof v=="function"?c.refCleanup=v(R):v.current=R}}catch(I){Rn(c,h,I)}}function pi(c,h){var v=c.ref,M=c.refCleanup;if(v!==null)if(typeof M=="function")try{M()}catch(R){Rn(c,h,R)}finally{c.refCleanup=null,c=c.alternate,c!=null&&(c.refCleanup=null)}else if(typeof v=="function")try{v(null)}catch(R){Rn(c,h,R)}else v.current=null}function Sc(c){var h=c.type,v=c.memoizedProps,M=c.stateNode;try{Qb(M,h,v,c)}catch(R){Rn(c,c.return,R)}}function kp(c,h,v){try{um(c.stateNode,c.type,v,h,c)}catch(M){Rn(c,c.return,M)}}function Hp(c){return c.tag===5||c.tag===3||(Ar?c.tag===26:!1)||(Sa?c.tag===27:!1)||c.tag===4}function xf(c){e:for(;;){for(;c.sibling===null;){if(c.return===null||Hp(c.return))return null;c=c.return}for(c.sibling.return=c.return,c=c.sibling;c.tag!==5&&c.tag!==6&&(!Sa||c.tag!==27)&&c.tag!==18;){if(c.flags&2||c.child===null||c.tag===4)continue e;c.child.return=c,c=c.child}if(!(c.flags&2))return c.stateNode}}function Sf(c,h,v){var M=c.tag;if(M===5||M===6)c=c.stateNode,h?fm(v,c,h):Gv(v,c);else if(!(M===4||Sa&&M===27)&&(c=c.child,c!==null))for(Sf(c,h,v),c=c.sibling;c!==null;)Sf(c,h,v),c=c.sibling}function Ec(c,h,v){var M=c.tag;if(M===5||M===6)c=c.stateNode,h?hm(v,c,h):cm(v,c);else if(!(M===4||Sa&&M===27)&&(c=c.child,c!==null))for(Ec(c,h,v),c=c.sibling;c!==null;)Ec(c,h,v),c=c.sibling}function Lv(c,h,v){c=c.containerInfo;try{gm(c,v)}catch(M){Rn(h,h.return,M)}}function Mc(c,h){for(el(c.containerInfo),Ri=h;Ri!==null;)if(c=Ri,h=c.child,(c.subtreeFlags&1028)!==0&&h!==null)h.return=c,Ri=h;else for(;Ri!==null;){c=Ri;var v=c.alternate;switch(h=c.flags,c.tag){case 0:break;case 11:case 15:break;case 1:if((h&1024)!==0&&v!==null){h=void 0;var M=c,R=v.memoizedProps;v=v.memoizedState;var I=M.stateNode;try{var Q=rs(M.type,R,M.elementType===M.type);h=I.getSnapshotBeforeUpdate(Q,v),I.__reactInternalSnapshotBeforeUpdate=h}catch(he){Rn(M,M.return,he)}}break;case 3:(h&1024)!==0&&xa&&Vf(c.stateNode.containerInfo);break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((h&1024)!==0)throw Error(a(163))}if(h=c.sibling,h!==null){h.return=c.return,Ri=h;break}Ri=c.return}return Q=Wl,Wl=!1,Q}function Ef(c,h,v){var M=v.flags;switch(v.tag){case 0:case 11:case 15:ws(c,v),M&4&&Pu(5,v);break;case 1:if(ws(c,v),M&4)if(c=v.stateNode,h===null)try{c.componentDidMount()}catch(he){Rn(v,v.return,he)}else{var R=rs(v.type,h.memoizedProps);h=h.memoizedState;try{c.componentDidUpdate(R,h,c.__reactInternalSnapshotBeforeUpdate)}catch(he){Rn(v,v.return,he)}}M&64&&Dv(v),M&512&&Dl(v,v.return);break;case 3:if(ws(c,v),M&64&&(M=v.updateQueue,M!==null)){if(c=null,v.child!==null)switch(v.child.tag){case 27:case 5:c=Lc(v.child.stateNode);break;case 1:c=v.child.stateNode}try{Ae(M,c)}catch(he){Rn(v,v.return,he)}}break;case 26:if(Ar){ws(c,v),M&512&&Dl(v,v.return);break}case 27:case 5:ws(c,v),h===null&&M&4&&Sc(v),M&512&&Dl(v,v.return);break;case 12:ws(c,v);break;case 13:ws(c,v),M&4&&Ho(c,v);break;case 22:if(R=v.memoizedState!==null||ta,!R){h=h!==null&&h.memoizedState!==null||bi;var I=ta,Q=bi;ta=R,(bi=h)&&!Q?jo(c,v,(v.subtreeFlags&8772)!==0):ws(c,v),ta=I,bi=Q}M&512&&(v.memoizedProps.mode==="manual"?Dl(v,v.return):pi(v,v.return));break;default:ws(c,v)}}function wc(c){var h=c.alternate;h!==null&&(c.alternate=null,wc(h)),c.child=null,c.deletions=null,c.sibling=null,c.tag===5&&(h=c.stateNode,h!==null&&om(h)),c.stateNode=null,c.return=null,c.dependencies=null,c.memoizedProps=null,c.memoizedState=null,c.pendingProps=null,c.stateNode=null,c.updateQueue=null}function Er(c,h,v){for(v=v.child;v!==null;)Mf(c,h,v),v=v.sibling}function Mf(c,h,v){if(sr&&typeof sr.onCommitFiberUnmount=="function")try{sr.onCommitFiberUnmount(Fc,v)}catch{}switch(v.tag){case 26:if(Ar){bi||pi(v,h),Er(c,h,v),v.memoizedState?Em(v.memoizedState):v.stateNode&&Tm(v.stateNode);break}case 27:if(Sa){bi||pi(v,h);var M=Bi,R=cr;Bi=v.stateNode,Er(c,h,v),l0(v.stateNode),Bi=M,cr=R;break}case 5:bi||pi(v,h);case 6:if(xa){if(M=Bi,R=cr,Bi=null,Er(c,h,v),Bi=M,cr=R,Bi!==null)if(cr)try{Ii(Bi,v.stateNode)}catch(I){Rn(v,h,I)}else try{Ya(Bi,v.stateNode)}catch(I){Rn(v,h,I)}}else Er(c,h,v);break;case 18:xa&&Bi!==null&&(cr?bm(Bi,v.stateNode):i0(Bi,v.stateNode));break;case 4:xa?(M=Bi,R=cr,Bi=v.stateNode.containerInfo,cr=!0,Er(c,h,v),Bi=M,cr=R):(wr&&Lv(v.stateNode,v,jf()),Er(c,h,v));break;case 0:case 11:case 14:case 15:bi||ko(2,v,h),bi||ko(4,v,h),Er(c,h,v);break;case 1:bi||(pi(v,h),M=v.stateNode,typeof M.componentWillUnmount=="function"&&Uv(v,h,M)),Er(c,h,v);break;case 21:Er(c,h,v);break;case 22:bi||pi(v,h),bi=(M=bi)||v.memoizedState!==null,Er(c,h,v),bi=M;break;default:Er(c,h,v)}}function Ho(c,h){if(Wa&&h.memoizedState===null&&(c=h.alternate,c!==null&&(c=c.memoizedState,c!==null&&(c=c.dehydrated,c!==null))))try{Wf(c)}catch(v){Rn(h,h.return,v)}}function Tc(c){switch(c.tag){case 13:case 19:var h=c.stateNode;return h===null&&(h=c.stateNode=new qc),h;case 22:return c=c.stateNode,h=c._retryCache,h===null&&(h=c._retryCache=new qc),h;default:throw Error(a(435,c.tag))}}function zu(c,h){var v=Tc(c);h.forEach(function(M){var R=Xp.bind(null,c,M);v.has(M)||(v.add(M),M.then(R,R))})}function Ga(c,h){var v=h.deletions;if(v!==null)for(var M=0;M<v.length;M++){var R=v[M],I=c,Q=h;if(xa){var he=Q;e:for(;he!==null;){switch(he.tag){case 27:case 5:Bi=he.stateNode,cr=!1;break e;case 3:Bi=he.stateNode.containerInfo,cr=!0;break e;case 4:Bi=he.stateNode.containerInfo,cr=!0;break e}he=he.return}if(Bi===null)throw Error(a(160));Mf(I,Q,R),Bi=null,cr=!1}else Mf(I,Q,R);I=R.alternate,I!==null&&(I.return=null),R.return=null}if(h.subtreeFlags&13878)for(h=h.child;h!==null;)Vo(h,c),h=h.sibling}function Vo(c,h){var v=c.alternate,M=c.flags;switch(c.tag){case 0:case 11:case 14:case 15:Ga(h,c),tr(c),M&4&&(ko(3,c,c.return),Pu(3,c),ko(5,c,c.return));break;case 1:Ga(h,c),tr(c),M&512&&(bi||v===null||pi(v,v.return)),M&64&&ta&&(c=c.updateQueue,c!==null&&(M=c.callbacks,M!==null&&(v=c.shared.hiddenCallbacks,c.shared.hiddenCallbacks=v===null?M:v.concat(M))));break;case 26:if(Ar){var R=Za;Ga(h,c),tr(c),M&512&&(bi||v===null||pi(v,v.return)),M&4&&(M=v!==null?v.memoizedState:null,h=c.memoizedState,v===null?h===null?c.stateNode===null?c.stateNode=Mm(R,c.type,c.memoizedProps,c):wm(R,c.type,c.stateNode):c.stateNode=Sm(R,h,c.memoizedProps):M!==h?(M===null?v.stateNode!==null&&Tm(v.stateNode):Em(M),h===null?wm(R,c.type,c.stateNode):Sm(R,h,c.memoizedProps)):h===null&&c.stateNode!==null&&kp(c,c.memoizedProps,v.memoizedProps));break}case 27:if(Sa&&M&4&&c.alternate===null){R=c.stateNode;var I=c.memoizedProps;try{nx(R),ix(c.type,I,R,c)}catch(xt){Rn(c,c.return,xt)}}case 5:if(Ga(h,c),tr(c),M&512&&(bi||v===null||pi(v,v.return)),xa){if(c.flags&32){h=c.stateNode;try{Ku(h)}catch(xt){Rn(c,c.return,xt)}}M&4&&c.stateNode!=null&&(h=c.memoizedProps,kp(c,h,v!==null?v.memoizedProps:h)),M&1024&&(cl=!0)}break;case 6:if(Ga(h,c),tr(c),M&4&&xa){if(c.stateNode===null)throw Error(a(162));M=c.memoizedProps,v=v!==null?v.memoizedProps:M,h=c.stateNode;try{qv(h,v,M)}catch(xt){Rn(c,c.return,xt)}}break;case 3:if(Ar?(Am(),R=Za,Za=Yf(h.containerInfo),Ga(h,c),Za=R):Ga(h,c),tr(c),M&4){if(xa&&Wa&&v!==null&&v.memoizedState.isDehydrated)try{Xf(h.containerInfo)}catch(xt){Rn(c,c.return,xt)}if(wr){M=h.containerInfo,v=h.pendingChildren;try{gm(M,v)}catch(xt){Rn(c,c.return,xt)}}}cl&&(cl=!1,Vp(c));break;case 4:Ar?(v=Za,Za=Yf(c.stateNode.containerInfo),Ga(h,c),tr(c),Za=v):(Ga(h,c),tr(c)),M&4&&wr&&Lv(c.stateNode,c,c.stateNode.pendingChildren);break;case 12:Ga(h,c),tr(c);break;case 13:Ga(h,c),tr(c),c.child.flags&8192&&c.memoizedState!==null!=(v!==null&&v.memoizedState!==null)&&(Fs=Ea()),M&4&&(M=c.updateQueue,M!==null&&(c.updateQueue=null,zu(c,M)));break;case 22:M&512&&(bi||v===null||pi(v,v.return)),R=c.memoizedState!==null;var Q=v!==null&&v.memoizedState!==null,he=ta,Te=bi;if(ta=he||R,bi=Te||Q,Ga(h,c),bi=Te,ta=he,tr(c),h=c.stateNode,h._current=c,h._visibility&=-3,h._visibility|=h._pendingVisibility&2,M&8192&&(h._visibility=R?h._visibility&-2:h._visibility|1,R&&(h=ta||bi,v===null||Q||h||Ac(c)),xa&&(c.memoizedProps===null||c.memoizedProps.mode!=="manual"))){e:if(v=null,xa)for(h=c;;){if(h.tag===5||Ar&&h.tag===26||Sa&&h.tag===27){if(v===null){Q=v=h;try{I=Q.stateNode,R?Ju(I):dm(Q.stateNode,Q.memoizedProps)}catch(xt){Rn(Q,Q.return,xt)}}}else if(h.tag===6){if(v===null){Q=h;try{var We=Q.stateNode;R?Hf(We):oo(We,Q.memoizedProps)}catch(xt){Rn(Q,Q.return,xt)}}}else if((h.tag!==22&&h.tag!==23||h.memoizedState===null||h===c)&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===c)break e;for(;h.sibling===null;){if(h.return===null||h.return===c)break e;v===h&&(v=null),h=h.return}v===h&&(v=null),h.sibling.return=h.return,h=h.sibling}}M&4&&(M=c.updateQueue,M!==null&&(v=M.retryQueue,v!==null&&(M.retryQueue=null,zu(c,v))));break;case 19:Ga(h,c),tr(c),M&4&&(M=c.updateQueue,M!==null&&(c.updateQueue=null,zu(c,M)));break;case 21:break;default:Ga(h,c),tr(c)}}function tr(c){var h=c.flags;if(h&2){try{if(xa&&(!Sa||c.tag!==27)){e:{for(var v=c.return;v!==null;){if(Hp(v)){var M=v;break e}v=v.return}throw Error(a(160))}switch(M.tag){case 27:if(Sa){var R=M.stateNode,I=xf(c);Ec(c,I,R);break}case 5:var Q=M.stateNode;M.flags&32&&(Ku(Q),M.flags&=-33);var he=xf(c);Ec(c,he,Q);break;case 3:case 4:var Te=M.stateNode.containerInfo,We=xf(c);Sf(c,We,Te);break;default:throw Error(a(161))}}}catch(xt){Rn(c,c.return,xt)}c.flags&=-3}h&4096&&(c.flags&=-4097)}function Vp(c){if(c.subtreeFlags&1024)for(c=c.child;c!==null;){var h=c;Vp(h),h.tag===5&&h.flags&1024&&ii(h.stateNode),c=c.sibling}}function ws(c,h){if(h.subtreeFlags&8772)for(h=h.child;h!==null;)Ef(c,h.alternate,h),h=h.sibling}function Ac(c){for(c=c.child;c!==null;){var h=c;switch(h.tag){case 0:case 11:case 14:case 15:ko(4,h,h.return),Ac(h);break;case 1:pi(h,h.return);var v=h.stateNode;typeof v.componentWillUnmount=="function"&&Uv(h,h.return,v),Ac(h);break;case 26:case 27:case 5:pi(h,h.return),Ac(h);break;case 22:pi(h,h.return),h.memoizedState===null&&Ac(h);break;default:Ac(h)}c=c.sibling}}function jo(c,h,v){for(v=v&&(h.subtreeFlags&8772)!==0,h=h.child;h!==null;){var M=h.alternate,R=c,I=h,Q=I.flags;switch(I.tag){case 0:case 11:case 15:jo(R,I,v),Pu(4,I);break;case 1:if(jo(R,I,v),M=I,R=M.stateNode,typeof R.componentDidMount=="function")try{R.componentDidMount()}catch(We){Rn(M,M.return,We)}if(M=I,R=M.updateQueue,R!==null){var he=M.stateNode;try{var Te=R.shared.hiddenCallbacks;if(Te!==null)for(R.shared.hiddenCallbacks=null,R=0;R<Te.length;R++)ue(Te[R],he)}catch(We){Rn(M,M.return,We)}}v&&Q&64&&Dv(I),Dl(I,I.return);break;case 26:case 27:case 5:jo(R,I,v),v&&M===null&&Q&4&&Sc(I),Dl(I,I.return);break;case 12:jo(R,I,v);break;case 13:jo(R,I,v),v&&Q&4&&Ho(R,I);break;case 22:I.memoizedState===null&&jo(R,I,v),Dl(I,I.return);break;default:jo(R,I,v)}h=h.sibling}}function jp(c,h){var v=null;c!==null&&c.memoizedState!==null&&c.memoizedState.cachePool!==null&&(v=c.memoizedState.cachePool.pool),c=null,h.memoizedState!==null&&h.memoizedState.cachePool!==null&&(c=h.memoizedState.cachePool.pool),c!==v&&(c!=null&&c.refCount++,v!=null&&yc(v))}function wf(c,h){c=null,h.alternate!==null&&(c=h.alternate.memoizedState.cache),h=h.memoizedState.cache,h!==c&&(h.refCount++,c!=null&&yc(c))}function Js(c,h,v,M){if(h.subtreeFlags&10256)for(h=h.child;h!==null;)Tf(c,h,v,M),h=h.sibling}function Tf(c,h,v,M){var R=h.flags;switch(h.tag){case 0:case 11:case 15:Js(c,h,v,M),R&2048&&Pu(9,h);break;case 3:Js(c,h,v,M),R&2048&&(c=null,h.alternate!==null&&(c=h.alternate.memoizedState.cache),h=h.memoizedState.cache,h!==c&&(h.refCount++,c!=null&&yc(c)));break;case 12:if(R&2048){Js(c,h,v,M),c=h.stateNode;try{var I=h.memoizedProps,Q=I.id,he=I.onPostCommit;typeof he=="function"&&he(Q,h.alternate===null?"mount":"update",c.passiveEffectDuration,-0)}catch(Te){Rn(h,h.return,Te)}}else Js(c,h,v,M);break;case 23:break;case 22:I=h.stateNode,h.memoizedState!==null?I._visibility&4?Js(c,h,v,M):Go(c,h):I._visibility&4?Js(c,h,v,M):(I._visibility|=4,Na(c,h,v,M,(h.subtreeFlags&10256)!==0)),R&2048&&jp(h.alternate,h);break;case 24:Js(c,h,v,M),R&2048&&wf(h.alternate,h);break;default:Js(c,h,v,M)}}function Na(c,h,v,M,R){for(R=R&&(h.subtreeFlags&10256)!==0,h=h.child;h!==null;){var I=c,Q=h,he=v,Te=M,We=Q.flags;switch(Q.tag){case 0:case 11:case 15:Na(I,Q,he,Te,R),Pu(8,Q);break;case 23:break;case 22:var xt=Q.stateNode;Q.memoizedState!==null?xt._visibility&4?Na(I,Q,he,Te,R):Go(I,Q):(xt._visibility|=4,Na(I,Q,he,Te,R)),R&&We&2048&&jp(Q.alternate,Q);break;case 24:Na(I,Q,he,Te,R),R&&We&2048&&wf(Q.alternate,Q);break;default:Na(I,Q,he,Te,R)}h=h.sibling}}function Go(c,h){if(h.subtreeFlags&10256)for(h=h.child;h!==null;){var v=c,M=h,R=M.flags;switch(M.tag){case 22:Go(v,M),R&2048&&jp(M.alternate,M);break;case 24:Go(v,M),R&2048&&wf(M.alternate,M);break;default:Go(v,M)}h=h.sibling}}function ua(c){if(c.subtreeFlags&Yl)for(c=c.child;c!==null;)Ul(c),c=c.sibling}function Ul(c){switch(c.tag){case 26:ua(c),c.flags&Yl&&(c.memoizedState!==null?Rm(Za,c.memoizedState,c.memoizedProps):Mi(c.type,c.memoizedProps));break;case 5:ua(c),c.flags&Yl&&Mi(c.type,c.memoizedProps);break;case 3:case 4:if(Ar){var h=Za;Za=Yf(c.stateNode.containerInfo),ua(c),Za=h}else ua(c);break;case 22:c.memoizedState===null&&(h=c.alternate,h!==null&&h.memoizedState!==null?(h=Yl,Yl=16777216,ua(c),Yl=h):ua(c));break;default:ua(c)}}function Af(c){var h=c.alternate;if(h!==null&&(c=h.child,c!==null)){h.child=null;do h=c.sibling,c.sibling=null,c=h;while(c!==null)}}function qo(c){var h=c.deletions;if((c.flags&16)!==0){if(h!==null)for(var v=0;v<h.length;v++){var M=h[v];Ri=M,Xo(M,c)}Af(c)}if(c.subtreeFlags&10256)for(c=c.child;c!==null;)Bu(c),c=c.sibling}function Bu(c){switch(c.tag){case 0:case 11:case 15:qo(c),c.flags&2048&&ko(9,c,c.return);break;case 3:qo(c);break;case 12:qo(c);break;case 22:var h=c.stateNode;c.memoizedState!==null&&h._visibility&4&&(c.return===null||c.return.tag!==13)?(h._visibility&=-5,Cc(c)):qo(c);break;default:qo(c)}}function Cc(c){var h=c.deletions;if((c.flags&16)!==0){if(h!==null)for(var v=0;v<h.length;v++){var M=h[v];Ri=M,Xo(M,c)}Af(c)}for(c=c.child;c!==null;){switch(h=c,h.tag){case 0:case 11:case 15:ko(8,h,h.return),Cc(h);break;case 22:v=h.stateNode,v._visibility&4&&(v._visibility&=-5,Cc(h));break;default:Cc(h)}c=c.sibling}}function Xo(c,h){for(;Ri!==null;){var v=Ri;switch(v.tag){case 0:case 11:case 15:ko(8,v,h);break;case 23:case 22:if(v.memoizedState!==null&&v.memoizedState.cachePool!==null){var M=v.memoizedState.cachePool.pool;M!=null&&M.refCount++}break;case 24:yc(v.memoizedState.cache)}if(M=v.child,M!==null)M.return=v,Ri=M;else e:for(v=c;Ri!==null;){M=Ri;var R=M.sibling,I=M.return;if(wc(M),M===v){Ri=null;break e}if(R!==null){R.return=I,Ri=R;break e}Ri=I}}}function Cf(c){var h=rm(c);if(h!=null){if(typeof h.memoizedProps["data-testname"]!="string")throw Error(a(364));return h}if(c=Vl(c),c===null)throw Error(a(362));return c.stateNode.current}function Rc(c,h){var v=c.tag;switch(h.$$typeof){case fh:if(c.type===h.value)return!0;break;case rd:e:{for(h=h.value,c=[c,0],v=0;v<c.length;){var M=c[v++],R=M.tag,I=c[v++],Q=h[I];if(R!==5&&R!==26&&R!==27||!Ls(M)){for(;Q!=null&&Rc(M,Q);)I++,Q=h[I];if(I===h.length){h=!0;break e}else for(M=M.child;M!==null;)c.push(M,I),M=M.sibling}}h=!1}return h;case sd:if((v===5||v===26||v===27)&&Jb(c.stateNode,h.value))return!0;break;case Jn:if((v===5||v===6||v===26||v===27)&&(c=Zu(c),c!==null&&0<=c.indexOf(h.value)))return!0;break;case Un:if((v===5||v===26||v===27)&&(c=c.memoizedProps["data-testname"],typeof c=="string"&&c.toLowerCase()===h.value.toLowerCase()))return!0;break;default:throw Error(a(365))}return!1}function Wo(c){switch(c.$$typeof){case fh:return"<"+(l(c.value)||"Unknown")+">";case rd:return":has("+(Wo(c)||"")+")";case sd:return'[role="'+c.value+'"]';case Jn:return'"'+c.value+'"';case Un:return'[data-testname="'+c.value+'"]';default:throw Error(a(365))}}function Iv(c,h){var v=[];c=[c,0];for(var M=0;M<c.length;){var R=c[M++],I=R.tag,Q=c[M++],he=h[Q];if(I!==5&&I!==26&&I!==27||!Ls(R)){for(;he!=null&&Rc(R,he);)Q++,he=h[Q];if(Q===h.length)v.push(R);else for(R=R.child;R!==null;)c.push(R,Q),R=R.sibling}}return v}function qa(c,h){if(!Us)throw Error(a(363));c=Cf(c),c=Iv(c,h),h=[],c=Array.from(c);for(var v=0;v<c.length;){var M=c[v++],R=M.tag;if(R===5||R===26||R===27)Ls(M)||h.push(M.stateNode);else for(M=M.child;M!==null;)c.push(M),M=M.sibling}return h}function Xa(){if((Jt&2)!==0&&wn!==0)return wn&-wn;if(an.T!==null){var c=or;return c!==0?c:ke()}return Xr()}function Ts(){ur===0&&(ur=(wn&536870912)===0||zn?H():536870912);var c=Lr.current;return c!==null&&(c.flags|=32),ur}function Oa(c,h,v){(c===Cn&&ai===2||c.cancelPendingCommit!==null)&&(os(c,0),ss(c,wn,ur,!1)),j(c,v),((Jt&2)===0||c!==Cn)&&(c===Cn&&((Jt&2)===0&&(ps|=v),Ln===4&&ss(c,wn,ur,!1)),mt(c))}function Fu(c,h,v){if((Jt&6)!==0)throw Error(a(327));var M=!v&&(h&60)===0&&(h&c.expiredLanes)===0||U(c,h),R=M?Rs(c,h):As(c,h,!0),I=M;do{if(R===0){Ir&&!M&&ss(c,h,0,!1);break}else if(R===6)ss(c,h,0,!Qn);else{if(v=c.current.alternate,I&&!Pv(v)){R=As(c,h,!1),I=!1;continue}if(R===2){if(I=h,c.errorRecoveryDisabledLanes&I)var Q=0;else Q=c.pendingLanes&-536870913,Q=Q!==0?Q:Q&536870912?536870912:0;if(Q!==0){h=Q;e:{var he=c;R=Xc;var Te=Wa&&he.current.memoizedState.isDehydrated;if(Te&&(os(he,Q).flags|=256),Q=As(he,Q,!1),Q!==2){if(po&&!Te){he.errorRecoveryDisabledLanes|=I,ps|=I,R=4;break e}I=zr,zr=R,I!==null&&Qs(I)}R=Q}if(I=!1,R!==2)continue}}if(R===1){os(c,0),ss(c,h,0,!0);break}e:{switch(M=c,R){case 0:case 1:throw Error(a(345));case 4:if((h&4194176)===h){ss(M,h,ur,!Qn);break e}break;case 2:zr=null;break;case 3:case 5:break;default:throw Error(a(329))}if(M.finishedWork=v,M.finishedLanes=h,(h&62914560)===h&&(I=Fs+300-Ea(),10<I)){if(ss(M,h,ur,!Qn),P(M,0)!==0)break e;M.timeoutHandle=am(Rf.bind(null,M,v,zr,ms,Wc,h,ur,ps,mo,Qn,2,-0,0),I);break e}Rf(M,v,zr,ms,Wc,h,ur,ps,mo,Qn,0,-0,0)}}break}while(!0);mt(c)}function Qs(c){zr===null?zr=c:zr.push.apply(zr,c)}function Rf(c,h,v,M,R,I,Q,he,Te,We,xt,Ot,It){var fn=h.subtreeFlags;if((fn&8192||(fn&16785408)===16785408)&&(Tr(),Ul(h),h=Bf(),h!==null)){c.cancelPendingCommit=h(oi.bind(null,c,v,M,R,Q,he,Te,1,Ot,It)),ss(c,I,Q,!We);return}oi(c,v,M,R,Q,he,Te,xt,Ot,It)}function Pv(c){for(var h=c;;){var v=h.tag;if((v===0||v===11||v===15)&&h.flags&16384&&(v=h.updateQueue,v!==null&&(v=v.stores,v!==null)))for(var M=0;M<v.length;M++){var R=v[M],I=R.getSnapshot;R=R.value;try{if(!Cr(I(),R))return!1}catch{return!1}}if(v=h.child,h.subtreeFlags&16384&&v!==null)v.return=h,h=v;else{if(h===c)break;for(;h.sibling===null;){if(h.return===null||h.return===c)return!0;h=h.return}h.sibling.return=h.return,h=h.sibling}}return!0}function ss(c,h,v,M){h&=~za,h&=~ps,c.suspendedLanes|=h,c.pingedLanes&=~h,M&&(c.warmLanes|=h),M=c.expirationTimes;for(var R=h;0<R;){var I=31-rr(R),Q=1<<I;M[I]=-1,R&=~Q}v!==0&&X(c,v,h)}function Gp(){return(Jt&6)===0?(Bt(0),!1):!0}function nr(){if(pn!==null){if(ai===0)var c=pn.return;else c=pn,Ci=ll=null,rt(c),Ps=null,Zr=0,c=pn;for(;c!==null;)Fp(c.alternate,c),c=c.return;pn=null}}function os(c,h){c.finishedWork=null,c.finishedLanes=0;var v=c.timeoutHandle;v!==Hl&&(c.timeoutHandle=Hl,Yu(v)),v=c.cancelPendingCommit,v!==null&&(c.cancelPendingCommit=null,v()),nr(),Cn=c,pn=v=Da(c.current,null),wn=h,ai=0,Fi=null,Qn=!1,Ir=U(c,h),po=!1,mo=ur=za=ps=Pr=Ln=0,zr=Xc=null,Wc=!1,(h&8)!==0&&(h|=h&32);var M=c.entangledLanes;if(M!==0)for(c=c.entanglements,M&=h;0<M;){var R=31-rr(M),I=1<<R;h|=c[R],M&=~I}return ds=h,xe(),v}function Ll(c,h){bn=null,an.H=Bn,h===ti?(h=lt(),ai=3):h===Um?(h=lt(),ai=4):ai=h===m0?8:h!==null&&typeof h=="object"&&typeof h.then=="function"?6:1,Fi=h,pn===null&&(Ln=1,pf(c,pe(h,c.current)))}function ku(){var c=Lr.current;return c===null?!0:(wn&4194176)===wn?Kr===null:(wn&62914560)===wn||(wn&536870912)!==0?c===Kr:!1}function Nc(){var c=an.H;return an.H=Bn,c===null?Bn:c}function Mr(){var c=an.A;return an.A=ad,c}function ir(){Ln=4,Qn||(wn&4194176)!==wn&&Lr.current!==null||(Ir=!0),(Pr&134217727)===0&&(ps&134217727)===0||Cn===null||ss(Cn,wn,ur,!1)}function As(c,h,v){var M=Jt;Jt|=2;var R=Nc(),I=Mr();(Cn!==c||wn!==h)&&(ms=null,os(c,h)),h=!1;var Q=Ln;e:do try{if(ai!==0&&pn!==null){var he=pn,Te=Fi;switch(ai){case 8:nr(),Q=6;break e;case 3:case 2:case 6:Lr.current===null&&(h=!0);var We=ai;if(ai=0,Fi=null,Yo(c,he,Te,We),v&&Ir){Q=0;break e}break;default:We=ai,ai=0,Fi=null,Yo(c,he,Te,We)}}Cs(),Q=Ln;break}catch(xt){Ll(c,xt)}while(!0);return h&&c.shellSuspendCounter++,Ci=ll=null,Jt=M,an.H=R,an.A=I,pn===null&&(Cn=null,wn=0,xe()),Q}function Cs(){for(;pn!==null;)qp(pn)}function Rs(c,h){var v=Jt;Jt|=2;var M=Nc(),R=Mr();Cn!==c||wn!==h?(ms=null,xi=Ea()+500,os(c,h)):Ir=U(c,h);e:do try{if(ai!==0&&pn!==null){h=pn;var I=Fi;t:switch(ai){case 1:ai=0,Fi=null,Yo(c,h,I,1);break;case 2:if(Mt(I)){ai=0,Fi=null,Nf(h);break}h=function(){ai===2&&Cn===c&&(ai=7),mt(c)},I.then(h,h);break e;case 3:ai=7;break e;case 4:ai=5;break e;case 7:Mt(I)?(ai=0,Fi=null,Nf(h)):(ai=0,Fi=null,Yo(c,h,I,7));break;case 5:var Q=null;switch(pn.tag){case 26:Q=pn.memoizedState;case 5:case 27:var he=pn,Te=he.type,We=he.pendingProps;if(Q?Cm(Q):so(Te,We)){ai=0,Fi=null;var xt=he.sibling;if(xt!==null)pn=xt;else{var Ot=he.return;Ot!==null?(pn=Ot,Hu(Ot)):pn=null}break t}}ai=0,Fi=null,Yo(c,h,I,5);break;case 6:ai=0,Fi=null,Yo(c,h,I,6);break;case 8:nr(),Ln=6;break e;default:throw Error(a(462))}}$s();break}catch(It){Ll(c,It)}while(!0);return Ci=ll=null,an.H=M,an.A=R,Jt=v,pn!==null?0:(Cn=null,wn=0,xe(),Ln)}function $s(){for(;pn!==null&&!u0();)qp(pn)}function qp(c){var h=Cv(c.alternate,c,ds);c.memoizedProps=c.pendingProps,h===null?Hu(c):pn=h}function Nf(c){var h=c,v=h.alternate;switch(h.tag){case 15:case 0:h=Ev(v,h,h.pendingProps,h.type,void 0,wn);break;case 11:h=Ev(v,h,h.pendingProps,h.type.render,h.ref,wn);break;case 5:rt(h);default:Fp(v,h),h=pn=no(h,ds),h=Cv(v,h,ds)}c.memoizedProps=c.pendingProps,h===null?Hu(c):pn=h}function Yo(c,h,v,M){Ci=ll=null,rt(h),Ps=null,Zr=0;var R=h.return;try{if(yv(c,R,h,v,wn)){Ln=1,pf(c,pe(v,c.current)),pn=null;return}}catch(I){if(R!==null)throw pn=R,I;Ln=1,pf(c,pe(v,c.current)),pn=null;return}h.flags&32768?(zn||M===1?c=!0:Ir||(wn&536870912)!==0?c=!1:(Qn=c=!0,(M===2||M===3||M===6)&&(M=Lr.current,M!==null&&M.tag===13&&(M.flags|=16384))),ha(h,c)):Hu(h)}function Hu(c){var h=c;do{if((h.flags&32768)!==0){ha(h,Qn);return}c=h.return;var v=Nv(h.alternate,h,ds);if(v!==null){pn=v;return}if(h=h.sibling,h!==null){pn=h;return}pn=h=c}while(h!==null);Ln===0&&(Ln=5)}function ha(c,h){do{var v=Ov(c.alternate,c);if(v!==null){v.flags&=32767,pn=v;return}if(v=c.return,v!==null&&(v.flags|=32768,v.subtreeFlags=0,v.deletions=null),!h&&(c=c.sibling,c!==null)){pn=c;return}pn=c=v}while(c!==null);Ln=6,pn=null}function oi(c,h,v,M,R,I,Q,he,Te,We){var xt=an.T,Ot=ea();try{Ua(2),an.T=null,On(c,h,v,M,Ot,R,I,Q,he,Te,We)}finally{an.T=xt,Ua(Ot)}}function On(c,h,v,M,R,I,Q,he){do fa();while(go!==null);if((Jt&6)!==0)throw Error(a(327));var Te=c.finishedWork;if(M=c.finishedLanes,Te===null)return null;if(c.finishedWork=null,c.finishedLanes=0,Te===c.current)throw Error(a(177));c.callbackNode=null,c.callbackPriority=0,c.cancelPendingCommit=null;var We=Te.lanes|Te.childLanes;if(We|=Hc,W(c,M,We,I,Q,he),c===Cn&&(pn=Cn=null,wn=0),(Te.subtreeFlags&10256)===0&&(Te.flags&10256)===0||Qr||(Qr=!0,od=We,Kl=v,Vu(Kf,function(){return fa(),null})),v=(Te.flags&15990)!==0,(Te.subtreeFlags&15990)!==0||v?(v=an.T,an.T=null,I=ea(),Ua(2),Q=Jt,Jt|=4,Mc(c,Te),Vo(Te,c),nm(c.containerInfo),c.current=Te,Ef(c,Te.alternate,Te),h0(),Jt=Q,Ua(I),an.T=v):c.current=Te,Qr?(Qr=!1,go=c,Zl=M):eo(c,We),We=c.pendingLanes,We===0&&(Br=null),k(Te.stateNode),mt(c),h!==null)for(R=c.onRecoverableError,Te=0;Te<h.length;Te++)We=h[Te],R(We.value,{componentStack:We.stack});return(Zl&3)!==0&&fa(),We=c.pendingLanes,(M&4194218)!==0&&(We&42)!==0?c===Ka?Jl++:(Jl=0,Ka=c):Jl=0,Bt(0),null}function eo(c,h){(c.pooledCacheLanes&=h)===0&&(h=c.pooledCache,h!=null&&(c.pooledCache=null,yc(h)))}function fa(){if(go!==null){var c=go,h=od;od=0;var v=le(Zl),M=32>v?32:v;v=an.T;var R=ea();try{if(Ua(M),an.T=null,go===null)var I=!1;else{M=Kl,Kl=null;var Q=go,he=Zl;if(go=null,Zl=0,(Jt&6)!==0)throw Error(a(331));var Te=Jt;if(Jt|=4,Bu(Q.current),Tf(Q,Q.current,he,M),Jt=Te,Bt(0,!1),sr&&typeof sr.onPostCommitFiberRoot=="function")try{sr.onPostCommitFiberRoot(Fc,Q)}catch{}I=!0}return I}finally{Ua(R),an.T=v,eo(c,h)}}return!1}function Of(c,h,v){h=pe(v,h),h=Nu(c.stateNode,h,2),c=qe(c,h,2),c!==null&&(j(c,2),mt(c))}function Rn(c,h,v){if(c.tag===3)Of(c,c,v);else for(;h!==null;){if(h.tag===3){Of(h,c,v);break}else if(h.tag===1){var M=h.stateNode;if(typeof h.type.getDerivedStateFromError=="function"||typeof M.componentDidCatch=="function"&&(Br===null||!Br.has(M))){c=pe(v,c),v=vc(2),M=qe(h,v,2),M!==null&&(Ou(v,M,h,c),j(M,2),mt(M));break}}h=h.return}}function Df(c,h,v){var M=c.pingCache;if(M===null){M=c.pingCache=new Nn;var R=new Set;M.set(h,R)}else R=M.get(h),R===void 0&&(R=new Set,M.set(h,R));R.has(v)||(po=!0,R.add(v),c=zv.bind(null,c,h,v),h.then(c,c))}function zv(c,h,v){var M=c.pingCache;M!==null&&M.delete(h),c.pingedLanes|=c.suspendedLanes&v,c.warmLanes&=~v,Cn===c&&(wn&v)===v&&(Ln===4||Ln===3&&(wn&62914560)===wn&&300>Ea()-Fs?(Jt&2)===0&&os(c,0):za|=v,mo===wn&&(mo=0)),mt(c)}function Il(c,h){h===0&&(h=D()),c=ot(c,h),c!==null&&(j(c,h),mt(c))}function Pl(c){var h=c.memoizedState,v=0;h!==null&&(v=h.retryLane),Il(c,v)}function Xp(c,h){var v=0;switch(c.tag){case 13:var M=c.stateNode,R=c.memoizedState;R!==null&&(v=R.retryLane);break;case 19:M=c.stateNode;break;case 22:M=c.stateNode._retryCache;break;default:throw Error(a(314))}M!==null&&M.delete(h),Il(c,v)}function Vu(c,h){return Bc(c,h)}function Wp(c,h,v,M){this.tag=c,this.key=v,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=h,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=M,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function to(c){return c=c.prototype,!(!c||!c.isReactComponent)}function Da(c,h){var v=c.alternate;return v===null?(v=t(c.tag,h,c.key,c.mode),v.elementType=c.elementType,v.type=c.type,v.stateNode=c.stateNode,v.alternate=c,c.alternate=v):(v.pendingProps=h,v.type=c.type,v.flags=0,v.subtreeFlags=0,v.deletions=null),v.flags=c.flags&31457280,v.childLanes=c.childLanes,v.lanes=c.lanes,v.child=c.child,v.memoizedProps=c.memoizedProps,v.memoizedState=c.memoizedState,v.updateQueue=c.updateQueue,h=c.dependencies,v.dependencies=h===null?null:{lanes:h.lanes,firstContext:h.firstContext},v.sibling=c.sibling,v.index=c.index,v.ref=c.ref,v.refCleanup=c.refCleanup,v}function no(c,h){c.flags&=31457282;var v=c.alternate;return v===null?(c.childLanes=0,c.lanes=h,c.child=null,c.subtreeFlags=0,c.memoizedProps=null,c.memoizedState=null,c.updateQueue=null,c.dependencies=null,c.stateNode=null):(c.childLanes=v.childLanes,c.lanes=v.lanes,c.child=v.child,c.subtreeFlags=0,c.deletions=null,c.memoizedProps=v.memoizedProps,c.memoizedState=v.memoizedState,c.updateQueue=v.updateQueue,c.type=v.type,h=v.dependencies,c.dependencies=h===null?null:{lanes:h.lanes,firstContext:h.firstContext}),c}function qr(c,h,v,M,R,I){var Q=0;if(M=c,typeof c=="function")to(c)&&(Q=1);else if(typeof c=="string")Q=Ar&&Sa?xm(c,v,pa.current)?26:Pc(c)?27:5:Ar?xm(c,v,pa.current)?26:5:Sa&&Pc(c)?27:5;else e:switch(c){case Dc:return io(v.children,R,I,h);case Qp:Q=8,R|=24;break;case $p:return c=t(12,v,h,R|2),c.elementType=$p,c.lanes=I,c;case Lf:return c=t(13,v,h,R),c.elementType=Lf,c.lanes=I,c;case Jo:return c=t(19,v,h,R),c.elementType=Jo,c.lanes=I,c;case qu:return Uf(v,R,I,h);default:if(typeof c=="object"&&c!==null)switch(c.$$typeof){case kv:case Ns:Q=10;break e;case Ko:Q=9;break e;case Uc:Q=11;break e;case Gu:Q=14;break e;case cs:Q=16,M=null;break e}Q=29,v=Error(a(130,c===null?"null":typeof c,"")),M=null}return h=t(Q,v,h,R),h.elementType=c,h.type=M,h.lanes=I,h}function io(c,h,v,M){return c=t(7,c,M,h),c.lanes=v,c}function Uf(c,h,v,M){c=t(22,c,M,h),c.elementType=qu,c.lanes=v;var R={_visibility:1,_pendingVisibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null,_current:null,detach:function(){var I=R._current;if(I===null)throw Error(a(456));if((R._pendingVisibility&2)===0){var Q=ot(I,2);Q!==null&&(R._pendingVisibility|=2,Oa(Q,I,2))}},attach:function(){var I=R._current;if(I===null)throw Error(a(456));if((R._pendingVisibility&2)!==0){var Q=ot(I,2);Q!==null&&(R._pendingVisibility&=-3,Oa(Q,I,2))}}};return c.stateNode=R,c}function Zo(c,h,v){return c=t(6,c,null,h),c.lanes=v,c}function Oc(c,h,v){return h=t(4,c.children!==null?c.children:[],c.key,h),h.lanes=v,h.stateNode={containerInfo:c.containerInfo,pendingChildren:null,implementation:c.implementation},h}function zl(c,h,v,M,R,I,Q,he){this.tag=1,this.containerInfo=c,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=Hl,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=L(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.finishedLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=L(0),this.hiddenUpdates=L(null),this.identifierPrefix=M,this.onUncaughtError=R,this.onCaughtError=I,this.onRecoverableError=Q,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=he,this.incompleteTransitions=new Map}function da(c,h,v,M,R,I,Q,he,Te,We,xt,Ot){return c=new zl(c,h,v,Q,he,Te,We,Ot),h=1,I===!0&&(h|=24),I=t(3,null,null,h),c.current=I,I.stateNode=c,h=yf(),h.refCount++,c.pooledCache=h,h.refCount++,I.memoizedState={element:M,isDehydrated:v,cache:h},Nt(I),c}function ju(c){return c?(c=jl,c):jl}function Yp(c){var h=c._reactInternals;if(h===void 0)throw typeof c.render=="function"?Error(a(188)):(c=Object.keys(c).join(","),Error(a(268,c)));return c=b(h),c=c!==null?x(c):null,c===null?null:Lc(c.stateNode)}function Bv(c,h,v,M,R,I){R=ju(R),M.context===null?M.context=R:M.pendingContext=R,M=Xe(h),M.payload={element:v},I=I===void 0?null:I,I!==null&&(M.callback=I),v=qe(c,M,h),v!==null&&(Oa(v,c,h),Et(v,c,h))}function Fv(c,h){if(c=c.memoizedState,c!==null&&c.dehydrated!==null){var v=c.retryLane;c.retryLane=v!==0&&v<h?v:h}}function Zp(c,h){Fv(c,h),(c=c.alternate)&&Fv(c,h)}var Kt={},Kp=mp(),ba=Kk(),Bl=Object.assign,Jp=Symbol.for("react.element"),ao=Symbol.for("react.transitional.element"),ls=Symbol.for("react.portal"),Dc=Symbol.for("react.fragment"),Qp=Symbol.for("react.strict_mode"),$p=Symbol.for("react.profiler"),kv=Symbol.for("react.provider"),Ko=Symbol.for("react.consumer"),Ns=Symbol.for("react.context"),Uc=Symbol.for("react.forward_ref"),Lf=Symbol.for("react.suspense"),Jo=Symbol.for("react.suspense_list"),Gu=Symbol.for("react.memo"),cs=Symbol.for("react.lazy"),qu=Symbol.for("react.offscreen"),Hv=Symbol.for("react.memo_cache_sentinel"),em=Symbol.iterator,Fl=Symbol.for("react.client.reference"),an=Kp.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,If,tm,Qo=!1,$o=Array.isArray,Pf=e.rendererVersion,Xu=e.rendererPackageName,Wu=e.extraDevToolsConfig,Lc=e.getPublicInstance,kl=e.getRootHostContext,Vv=e.getChildHostContext,el=e.prepareForCommit,nm=e.resetAfterCommit,im=e.createInstance,Os=e.appendInitialChild,ro=e.finalizeInitialChildren,tl=e.shouldSetTextContent,zf=e.createTextInstance,am=e.scheduleTimeout,Yu=e.cancelTimeout,Hl=e.noTimeout,Ds=e.isPrimaryRenderer;e.warnsIfNotActing;var xa=e.supportsMutation,wr=e.supportsPersistence,Wa=e.supportsHydration,rm=e.getInstanceFromNode;e.beforeActiveInstanceBlur,e.afterActiveInstanceBlur;var sm=e.preparePortalMount;e.prepareScopeUpdate,e.getInstanceFromScope;var Ua=e.setCurrentUpdatePriority,ea=e.getCurrentUpdatePriority,Xr=e.resolveUpdatePriority;e.resolveEventType,e.resolveEventTimeStamp;var nl=e.shouldAttemptEagerTransition,om=e.detachDeletedInstance;e.requestPostPaintCallback;var jv=e.maySuspendCommit,so=e.preloadInstance,Tr=e.startSuspendingCommit,Mi=e.suspendInstance,Bf=e.waitForCommitToBeReady,ar=e.NotPendingTransition,ln=e.HostTransitionContext,ii=e.resetFormInstance;e.bindToConsole;var Wi=e.supportsMicrotasks,Ff=e.scheduleMicrotask,Us=e.supportsTestSelectors,Vl=e.findFiberRoot,kf=e.getBoundingRect,Zu=e.getTextContent,Ls=e.isHiddenSubtree,Jb=e.matchAccessibilityRole,wi=e.setFocusIfFocusable,lm=e.setupIntersectionObserver,cm=e.appendChild,Gv=e.appendChildToContainer,qv=e.commitTextUpdate,Qb=e.commitMount,um=e.commitUpdate,hm=e.insertBefore,fm=e.insertInContainerBefore,Ya=e.removeChild,Ii=e.removeChildFromContainer,Ku=e.resetTextContent,Ju=e.hideInstance,Hf=e.hideTextInstance,dm=e.unhideInstance,oo=e.unhideTextInstance,Vf=e.clearContainer,pm=e.cloneInstance,jf=e.createContainerChildSet,mm=e.appendChildToContainerChildSet,Xv=e.finalizeContainerChildren,gm=e.replaceContainerChildren,vm=e.cloneHiddenInstance,ym=e.cloneHiddenTextInstance,Gf=e.isSuspenseInstancePending,Qu=e.isSuspenseInstanceFallback,Wv=e.getSuspenseInstanceFallbackErrorDetails,$b=e.registerSuspenseInstanceRetry,Yv=e.canHydrateFormStateMarker,Zv=e.isFormStateMarkerMatching,_m=e.getNextHydratableSibling,qf=e.getFirstHydratableChild,Kv=e.getFirstHydratableChildWithinContainer,Jv=e.getFirstHydratableChildWithinSuspenseInstance,Qv=e.canHydrateInstance,$v=e.canHydrateTextInstance,e0=e.canHydrateSuspenseInstance,ex=e.hydrateInstance,t0=e.hydrateTextInstance,Ic=e.hydrateSuspenseInstance,n0=e.getNextHydratableInstanceAfterSuspenseInstance,Xf=e.commitHydratedContainer,Wf=e.commitHydratedSuspenseInstance,i0=e.clearSuspenseBoundary,bm=e.clearSuspenseBoundaryFromContainer,a0=e.shouldDeleteUnhydratedTailInstances;e.diffHydratedPropsForDevWarnings,e.diffHydratedTextForDevWarnings,e.describeHydratableInstanceForDevWarnings;var r0=e.validateHydratableInstance,s0=e.validateHydratableTextInstance,Ar=e.supportsResources,xm=e.isHostHoistableType,Yf=e.getHoistableRoot,Zf=e.getResource,Sm=e.acquireResource,Em=e.releaseResource,Mm=e.hydrateHoistable,wm=e.mountHoistable,Tm=e.unmountHoistable,tx=e.createHoistableInstance,Am=e.prepareToCommitHoistables,o0=e.mayResourceSuspendCommit,Cm=e.preloadResource,Rm=e.suspendResource,Sa=e.supportsSingletons,Nm=e.resolveSingletonInstance,nx=e.clearSingleton,ix=e.acquireSingletonInstance,l0=e.releaseSingletonInstance,Pc=e.isHostSingletonType,$u=[],lo=-1,jl={},rr=Math.clz32?Math.clz32:N,eh=Math.log,c0=Math.LN2,zc=128,th=4194304,Bc=ba.unstable_scheduleCallback,nh=ba.unstable_cancelCallback,u0=ba.unstable_shouldYield,h0=ba.unstable_requestPaint,Ea=ba.unstable_now,Om=ba.unstable_ImmediatePriority,f0=ba.unstable_UserBlockingPriority,Kf=ba.unstable_NormalPriority,Jf=ba.unstable_IdlePriority,d0=ba.log,Dm=ba.unstable_setDisableYieldValue,Fc=null,sr=null,Cr=typeof Object.is=="function"?Object.is:ne,Qf=new WeakMap,mi=[],Ti=0,ih=null,ah=0,Rr=[],Nr=0,us=null,Is=1,Wr="",pa=w(null),rh=w(null),hs=w(null),kc=w(null),La=null,Ma=null,zn=!1,Or=null,Yr=!1,sh=Error(a(519)),Dr=[],il=0,Hc=0,Vc=null,Gl=null,oh=!1,lh=!1,fs=!1,al=0,ch=null,$f=0,or=0,rl=null,co=!1,jc=!1,uh=Object.prototype.hasOwnProperty,ti=Error(a(460)),Um=Error(a(474)),ed={then:function(){}},ql=null,Ps=null,Zr=0,sl=$i(!0),Lm=$i(!1),zs=w(null),Ur=w(0),Lr=w(null),Kr=null,Yi=w(0),Bs=0,bn=null,Xn=null,Pi=null,Jr=!1,gi=!1,uo=!1,hh=0,Ai=0,Gc=null,p0=0,td=function(){return{lastEffect:null,events:null,stores:null,memoCache:null}},Bn={readContext:_a,use:pt,useCallback:gn,useContext:gn,useEffect:gn,useImperativeHandle:gn,useLayoutEffect:gn,useInsertionEffect:gn,useMemo:gn,useReducer:gn,useRef:gn,useState:gn,useDebugValue:gn,useDeferredValue:gn,useTransition:gn,useSyncExternalStore:gn,useId:gn};Bn.useCacheRefresh=gn,Bn.useMemoCache=gn,Bn.useHostTransitionStatus=gn,Bn.useFormState=gn,Bn.useActionState=gn,Bn.useOptimistic=gn;var Zi={readContext:_a,use:pt,useCallback:function(c,h){return st().memoizedState=[c,h===void 0?null:h],c},useContext:_a,useEffect:wl,useImperativeHandle:function(c,h,v){v=v!=null?v.concat([c]):null,qi(4194308,4,wu.bind(null,h,c),v)},useLayoutEffect:function(c,h){return qi(4194308,4,c,h)},useInsertionEffect:function(c,h){qi(4,2,c,h)},useMemo:function(c,h){var v=st();h=h===void 0?null:h;var M=c();if(uo){Z(!0);try{c()}finally{Z(!1)}}return v.memoizedState=[M,h],M},useReducer:function(c,h,v){var M=st();if(v!==void 0){var R=v(h);if(uo){Z(!0);try{v(h)}finally{Z(!1)}}}else R=h;return M.memoizedState=M.baseState=R,c={pending:null,lanes:0,dispatch:null,lastRenderedReducer:c,lastRenderedState:R},M.queue=c,c=c.dispatch=Lo.bind(null,bn,c),[M.memoizedState,c]},useRef:function(c){var h=st();return c={current:c},h.memoizedState=c},useState:function(c){c=bt(c);var h=c.queue,v=ff.bind(null,bn,h);return h.dispatch=v,[c.memoizedState,v]},useDebugValue:Tu,useDeferredValue:function(c,h){var v=st();return Uo(v,c,h)},useTransition:function(){var c=bt(!1);return c=uf.bind(null,bn,c.queue,!0,!1),st().memoizedState=c,[!1,c]},useSyncExternalStore:function(c,h,v){var M=bn,R=st();if(zn){if(v===void 0)throw Error(a(407));v=v()}else{if(v=h(),Cn===null)throw Error(a(349));(wn&60)!==0||ut(M,h,v)}R.memoizedState=v;var I={value:v,getSnapshot:h};return R.queue=I,wl(wt.bind(null,M,I,c),[c]),M.flags|=2048,Ei(9,ht.bind(null,M,I,v,h),{destroy:void 0},null),v},useId:function(){var c=st(),h=Cn.identifierPrefix;if(zn){var v=Wr,M=Is;v=(M&~(1<<32-rr(M)-1)).toString(32)+v,h=":"+h+"R"+v,v=hh++,0<v&&(h+="H"+v.toString(32)),h+=":"}else v=p0++,h=":"+h+"r"+v.toString(32)+":";return c.memoizedState=h},useCacheRefresh:function(){return st().memoizedState=Au.bind(null,bn)}};Zi.useMemoCache=G,Zi.useHostTransitionStatus=Al,Zi.useFormState=qn,Zi.useActionState=qn,Zi.useOptimistic=function(c){var h=st();h.memoizedState=h.baseState=c;var v={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return h.queue=v,h=df.bind(null,bn,!0,v),v.dispatch=h,[c,h]};var Ia={readContext:_a,use:pt,useCallback:cf,useContext:_a,useEffect:xr,useImperativeHandle:Es,useInsertionEffect:gv,useLayoutEffect:vv,useMemo:Tl,useReducer:ye,useRef:Gi,useState:function(){return ye(oe)},useDebugValue:Tu,useDeferredValue:function(c,h){var v=tt();return Ep(v,Xn.memoizedState,c,h)},useTransition:function(){var c=ye(oe)[0],h=tt().memoizedState;return[typeof c=="boolean"?c:vt(c),h]},useSyncExternalStore:at,useId:Ms};Ia.useCacheRefresh=hf,Ia.useMemoCache=G,Ia.useHostTransitionStatus=Al,Ia.useFormState=ca,Ia.useActionState=ca,Ia.useOptimistic=function(c,h){var v=tt();return Lt(v,Xn,c,h)};var ol={readContext:_a,use:pt,useCallback:cf,useContext:_a,useEffect:xr,useImperativeHandle:Es,useInsertionEffect:gv,useLayoutEffect:vv,useMemo:Tl,useReducer:me,useRef:Gi,useState:function(){return me(oe)},useDebugValue:Tu,useDeferredValue:function(c,h){var v=tt();return Xn===null?Uo(v,c,h):Ep(v,Xn.memoizedState,c,h)},useTransition:function(){var c=me(oe)[0],h=tt().memoizedState;return[typeof c=="boolean"?c:vt(c),h]},useSyncExternalStore:at,useId:Ms};ol.useCacheRefresh=hf,ol.useMemoCache=G,ol.useHostTransitionStatus=Al,ol.useFormState=Zn,ol.useActionState=Zn,ol.useOptimistic=function(c,h){var v=tt();return Xn!==null?Lt(v,Xn,c,h):(v.baseState=c,[c,v.queue.dispatch])};var nd={isMounted:function(c){return(c=c._reactInternals)?y(c)===c:!1},enqueueSetState:function(c,h,v){c=c._reactInternals;var M=Xa(),R=Xe(M);R.payload=h,v!=null&&(R.callback=v),h=qe(c,R,M),h!==null&&(Oa(h,c,M),Et(h,c,M))},enqueueReplaceState:function(c,h,v){c=c._reactInternals;var M=Xa(),R=Xe(M);R.tag=1,R.payload=h,v!=null&&(R.callback=v),h=qe(c,R,M),h!==null&&(Oa(h,c,M),Et(h,c,M))},enqueueForceUpdate:function(c,h){c=c._reactInternals;var v=Xa(),M=Xe(v);M.tag=2,h!=null&&(M.callback=h),h=qe(c,M,v),h!==null&&(Oa(h,c,v),Et(h,c,v))}},Im=typeof reportError=="function"?reportError:function(c){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var h=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof c=="object"&&c!==null&&typeof c.message=="string"?String(c.message):String(c),error:c});if(!window.dispatchEvent(h))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",c);return}console.error(c)},m0=Error(a(461)),zi=!1,Pa={dehydrated:null,treeContext:null,retryLane:0},lr=w(null),ll=null,Ci=null,g0=typeof AbortController<"u"?AbortController:function(){var c=[],h=this.signal={aborted:!1,addEventListener:function(v,M){c.push(M)}};this.abort=function(){h.aborted=!0,c.forEach(function(v){return v()})}},ho=ba.unstable_scheduleCallback,Xl=ba.unstable_NormalPriority,Kn={$$typeof:Ns,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0},id=an.S;an.S=function(c,h){typeof h=="object"&&h!==null&&typeof h.then=="function"&&Oe(c,h),id!==null&&id(c,h)};var fo=w(null),ta=!1,bi=!1,cl=!1,qc=typeof WeakSet=="function"?WeakSet:Set,Ri=null,Wl=!1,Bi=null,cr=!1,Za=null,Yl=8192,ad={getCacheForType:function(c){var h=_a(Kn),v=h.data.get(c);return v===void 0&&(v=c(),h.data.set(c,v)),v}},fh=0,rd=1,sd=2,Un=3,Jn=4;if(typeof Symbol=="function"&&Symbol.for){var xn=Symbol.for;fh=xn("selector.component"),rd=xn("selector.has_pseudo_class"),sd=xn("selector.role"),Un=xn("selector.test_id"),Jn=xn("selector.text")}var Nn=typeof WeakMap=="function"?WeakMap:Map,Jt=0,Cn=null,pn=null,wn=0,ai=0,Fi=null,Qn=!1,Ir=!1,po=!1,ds=0,Ln=0,Pr=0,ps=0,za=0,ur=0,mo=0,Xc=null,zr=null,Wc=!1,Fs=0,xi=1/0,ms=null,Br=null,Qr=!1,go=null,Zl=0,od=0,Kl=null,Jl=0,Ka=null;return Kt.attemptContinuousHydration=function(c){if(c.tag===13){var h=ot(c,67108864);h!==null&&Oa(h,c,67108864),Zp(c,67108864)}},Kt.attemptHydrationAtCurrentPriority=function(c){if(c.tag===13){var h=Xa(),v=ot(c,h);v!==null&&Oa(v,c,h),Zp(c,h)}},Kt.attemptSynchronousHydration=function(c){switch(c.tag){case 3:if(c=c.stateNode,c.current.memoizedState.isDehydrated){var h=O(c.pendingLanes);if(h!==0){for(c.pendingLanes|=2,c.entangledLanes|=2;h;){var v=1<<31-rr(h);c.entanglements[1]|=v,h&=~v}mt(c),(Jt&6)===0&&(xi=Ea()+500,Bt(0))}}break;case 13:h=ot(c,2),h!==null&&Oa(h,c,2),Gp(),Zp(c,2)}},Kt.batchedUpdates=function(c,h){return c(h)},Kt.createComponentSelector=function(c){return{$$typeof:fh,value:c}},Kt.createContainer=function(c,h,v,M,R,I,Q,he,Te,We){return da(c,h,!1,null,v,M,I,Q,he,Te,We,null)},Kt.createHasPseudoClassSelector=function(c){return{$$typeof:rd,value:c}},Kt.createHydrationContainer=function(c,h,v,M,R,I,Q,he,Te,We,xt,Ot,It){return c=da(v,M,!0,c,R,I,he,Te,We,xt,Ot,It),c.context=ju(null),v=c.current,M=Xa(),R=Xe(M),R.callback=h??null,qe(v,R,M),c.current.lanes=M,j(c,M),mt(c),c},Kt.createPortal=function(c,h,v){var M=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:ls,key:M==null?null:""+M,children:c,containerInfo:h,implementation:v}},Kt.createRoleSelector=function(c){return{$$typeof:sd,value:c}},Kt.createTestNameSelector=function(c){return{$$typeof:Un,value:c}},Kt.createTextSelector=function(c){return{$$typeof:Jn,value:c}},Kt.defaultOnCaughtError=function(c){console.error(c)},Kt.defaultOnRecoverableError=function(c){Im(c)},Kt.defaultOnUncaughtError=function(c){Im(c)},Kt.deferredUpdates=function(c){var h=an.T,v=ea();try{return Ua(32),an.T=null,c()}finally{Ua(v),an.T=h}},Kt.discreteUpdates=function(c,h,v,M,R){var I=an.T,Q=ea();try{return Ua(2),an.T=null,c(h,v,M,R)}finally{Ua(Q),an.T=I,Jt===0&&(xi=Ea()+500)}},Kt.findAllNodes=qa,Kt.findBoundingRects=function(c,h){if(!Us)throw Error(a(363));h=qa(c,h),c=[];for(var v=0;v<h.length;v++)c.push(kf(h[v]));for(h=c.length-1;0<h;h--){v=c[h];for(var M=v.x,R=M+v.width,I=v.y,Q=I+v.height,he=h-1;0<=he;he--)if(h!==he){var Te=c[he],We=Te.x,xt=We+Te.width,Ot=Te.y,It=Ot+Te.height;if(M>=We&&I>=Ot&&R<=xt&&Q<=It){c.splice(h,1);break}else if(M!==We||v.width!==Te.width||It<I||Ot>Q){if(!(I!==Ot||v.height!==Te.height||xt<M||We>R)){We>M&&(Te.width+=We-M,Te.x=M),xt<R&&(Te.width=R-We),c.splice(h,1);break}}else{Ot>I&&(Te.height+=Ot-I,Te.y=I),It<Q&&(Te.height=Q-Ot),c.splice(h,1);break}}}return c},Kt.findHostInstance=Yp,Kt.findHostInstanceWithNoPortals=function(c){return c=b(c),c=c!==null?T(c):null,c===null?null:Lc(c.stateNode)},Kt.findHostInstanceWithWarning=function(c){return Yp(c)},Kt.flushPassiveEffects=fa,Kt.flushSyncFromReconciler=function(c){var h=Jt;Jt|=1;var v=an.T,M=ea();try{if(Ua(2),an.T=null,c)return c()}finally{Ua(M),an.T=v,Jt=h,(Jt&6)===0&&Bt(0)}},Kt.flushSyncWork=Gp,Kt.focusWithin=function(c,h){if(!Us)throw Error(a(363));for(c=Cf(c),h=Iv(c,h),h=Array.from(h),c=0;c<h.length;){var v=h[c++],M=v.tag;if(!Ls(v)){if((M===5||M===26||M===27)&&wi(v.stateNode))return!0;for(v=v.child;v!==null;)h.push(v),v=v.sibling}}return!1},Kt.getFindAllNodesFailureDescription=function(c,h){if(!Us)throw Error(a(363));var v=0,M=[];c=[Cf(c),0];for(var R=0;R<c.length;){var I=c[R++],Q=I.tag,he=c[R++],Te=h[he];if((Q!==5&&Q!==26&&Q!==27||!Ls(I))&&(Rc(I,Te)&&(M.push(Wo(Te)),he++,he>v&&(v=he)),he<h.length))for(I=I.child;I!==null;)c.push(I,he),I=I.sibling}if(v<h.length){for(c=[];v<h.length;v++)c.push(Wo(h[v]));return`findAllNodes was able to match part of the selector:
  `+(M.join(" > ")+`

No matching component was found for:
  `)+c.join(" > ")}return null},Kt.getPublicRootInstance=function(c){if(c=c.current,!c.child)return null;switch(c.child.tag){case 27:case 5:return Lc(c.child.stateNode);default:return c.child.stateNode}},Kt.injectIntoDevTools=function(){var c={bundleType:0,version:Pf,rendererPackageName:Xu,currentDispatcherRef:an,findFiberByHostInstance:rm,reconcilerVersion:"19.0.0"};if(Wu!==null&&(c.rendererConfig=Wu),typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u")c=!1;else{var h=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(h.isDisabled||!h.supportsFiber)c=!0;else{try{Fc=h.inject(c),sr=h}catch{}c=!!h.checkDCE}}return c},Kt.isAlreadyRendering=function(){return!1},Kt.observeVisibleRects=function(c,h,v,M){if(!Us)throw Error(a(363));c=qa(c,h);var R=lm(c,v,M).disconnect;return{disconnect:function(){R()}}},Kt.shouldError=function(){return null},Kt.shouldSuspend=function(){return!1},Kt.startHostTransition=function(c,h,v,M){if(c.tag!==5)throw Error(a(476));var R=Mp(c).queue;uf(c,R,h,ar,v===null?n:function(){var I=Mp(c).next.queue;return Io(c,I,{},Xa()),v(M)})},Kt.updateContainer=function(c,h,v,M){var R=h.current,I=Xa();return Bv(R,I,c,h,v,M),I},Kt.updateContainerSync=function(c,h,v,M){return h.tag===0&&fa(),Bv(h.current,2,c,h,v,M),2},Kt},i.exports.default=i.exports,Object.defineProperty(i.exports,"__esModule",{value:!0})})(p1)),p1.exports}var WC;function Qk(){return WC||(WC=1,d1.exports=Jk()),d1.exports}var $k=Qk();const eH=xu($k);var v1={exports:{}},y1={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var YC;function tH(){return YC||(YC=1,(function(i){function e(k,Z){var ne=k.length;k.push(Z);e:for(;0<ne;){var pe=ne-1>>>1,ge=k[pe];if(0<a(ge,Z))k[pe]=Z,k[ne]=ge,ne=pe;else break e}}function t(k){return k.length===0?null:k[0]}function n(k){if(k.length===0)return null;var Z=k[0],ne=k.pop();if(ne!==Z){k[0]=ne;e:for(var pe=0,ge=k.length,J=ge>>>1;pe<J;){var ce=2*(pe+1)-1,Se=k[ce],Le=ce+1,nt=k[Le];if(0>a(Se,ne))Le<ge&&0>a(nt,Se)?(k[pe]=nt,k[Le]=ne,pe=Le):(k[pe]=Se,k[ce]=ne,pe=ce);else if(Le<ge&&0>a(nt,ne))k[pe]=nt,k[Le]=ne,pe=Le;else break e}}return Z}function a(k,Z){var ne=k.sortIndex-Z.sortIndex;return ne!==0?ne:k.id-Z.id}if(i.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var s=performance;i.unstable_now=function(){return s.now()}}else{var l=Date,u=l.now();i.unstable_now=function(){return l.now()-u}}var d=[],p=[],g=1,y=null,_=3,b=!1,x=!1,T=!1,w=typeof setTimeout=="function"?setTimeout:null,S=typeof clearTimeout=="function"?clearTimeout:null,C=typeof setImmediate<"u"?setImmediate:null;function N(k){for(var Z=t(p);Z!==null;){if(Z.callback===null)n(p);else if(Z.startTime<=k)n(p),Z.sortIndex=Z.expirationTime,e(d,Z);else break;Z=t(p)}}function O(k){if(T=!1,N(k),!x)if(t(d)!==null)x=!0,K();else{var Z=t(p);Z!==null&&le(O,Z.startTime-k)}}var P=!1,U=-1,z=5,H=-1;function D(){return!(i.unstable_now()-H<z)}function L(){if(P){var k=i.unstable_now();H=k;var Z=!0;try{e:{x=!1,T&&(T=!1,S(U),U=-1),b=!0;var ne=_;try{t:{for(N(k),y=t(d);y!==null&&!(y.expirationTime>k&&D());){var pe=y.callback;if(typeof pe=="function"){y.callback=null,_=y.priorityLevel;var ge=pe(y.expirationTime<=k);if(k=i.unstable_now(),typeof ge=="function"){y.callback=ge,N(k),Z=!0;break t}y===t(d)&&n(d),N(k)}else n(d);y=t(d)}if(y!==null)Z=!0;else{var J=t(p);J!==null&&le(O,J.startTime-k),Z=!1}}break e}finally{y=null,_=ne,b=!1}Z=void 0}}finally{Z?j():P=!1}}}var j;if(typeof C=="function")j=function(){C(L)};else if(typeof MessageChannel<"u"){var W=new MessageChannel,X=W.port2;W.port1.onmessage=L,j=function(){X.postMessage(null)}}else j=function(){w(L,0)};function K(){P||(P=!0,j())}function le(k,Z){U=w(function(){k(i.unstable_now())},Z)}i.unstable_IdlePriority=5,i.unstable_ImmediatePriority=1,i.unstable_LowPriority=4,i.unstable_NormalPriority=3,i.unstable_Profiling=null,i.unstable_UserBlockingPriority=2,i.unstable_cancelCallback=function(k){k.callback=null},i.unstable_continueExecution=function(){x||b||(x=!0,K())},i.unstable_forceFrameRate=function(k){0>k||125<k?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):z=0<k?Math.floor(1e3/k):5},i.unstable_getCurrentPriorityLevel=function(){return _},i.unstable_getFirstCallbackNode=function(){return t(d)},i.unstable_next=function(k){switch(_){case 1:case 2:case 3:var Z=3;break;default:Z=_}var ne=_;_=Z;try{return k()}finally{_=ne}},i.unstable_pauseExecution=function(){},i.unstable_requestPaint=function(){},i.unstable_runWithPriority=function(k,Z){switch(k){case 1:case 2:case 3:case 4:case 5:break;default:k=3}var ne=_;_=k;try{return Z()}finally{_=ne}},i.unstable_scheduleCallback=function(k,Z,ne){var pe=i.unstable_now();switch(typeof ne=="object"&&ne!==null?(ne=ne.delay,ne=typeof ne=="number"&&0<ne?pe+ne:pe):ne=pe,k){case 1:var ge=-1;break;case 2:ge=250;break;case 5:ge=1073741823;break;case 4:ge=1e4;break;default:ge=5e3}return ge=ne+ge,k={id:g++,callback:Z,priorityLevel:k,startTime:ne,expirationTime:ge,sortIndex:-1},ne>pe?(k.sortIndex=ne,e(p,k),t(d)===null&&k===t(p)&&(T?(S(U),U=-1):T=!0,le(O,ne-pe))):(k.sortIndex=ge,e(d,k),x||b||(x=!0,K())),k},i.unstable_shouldYield=D,i.unstable_wrapCallback=function(k){var Z=_;return function(){var ne=_;_=Z;try{return k.apply(this,arguments)}finally{_=ne}}}})(y1)),y1}var ZC;function nH(){return ZC||(ZC=1,v1.exports=tH()),v1.exports}var KC=nH();function TM(i,e,t){if(!i)return;if(t(i)===!0)return i;let n=e?i.return:i.child;for(;n;){const a=TM(n,e,t);if(a)return a;n=e?null:n.sibling}}function DO(i){try{return Object.defineProperties(i,{_currentRenderer:{get(){return null},set(){}},_currentRenderer2:{get(){return null},set(){}}})}catch{return i}}const AM=DO(re.createContext(null));class UO extends re.Component{render(){return re.createElement(AM.Provider,{value:this._reactInternals},this.props.children)}}function LO(){const i=re.useContext(AM);if(i===null)throw new Error("its-fine: useFiber must be called within a <FiberProvider />!");const e=re.useId();return re.useMemo(()=>{for(const t of[i,i==null?void 0:i.alternate]){if(!t)continue;const n=TM(t,!1,a=>{let s=a.memoizedState;for(;s;){if(s.memoizedState===e)return!0;s=s.next}});if(n)return n}},[i,e])}const iH=Symbol.for("react.context"),aH=i=>i!==null&&typeof i=="object"&&"$$typeof"in i&&i.$$typeof===iH;function rH(){const i=LO(),[e]=re.useState(()=>new Map);e.clear();let t=i;for(;t;){const n=t.type;aH(n)&&n!==AM&&!e.has(n)&&e.set(n,re.use(DO(n))),t=t.return}return e}function sH(){const i=rH();return re.useMemo(()=>Array.from(i.keys()).reduce((e,t)=>n=>re.createElement(e,null,re.createElement(t.Provider,{...n,value:i.get(t)})),e=>re.createElement(UO,{...e})),[i])}function IO(i){let e=i.root;for(;e.getState().previousRoot;)e=e.getState().previousRoot;return e}const PO=i=>i&&i.isOrthographicCamera,oH=i=>i&&i.hasOwnProperty("current"),lH=i=>i!=null&&(typeof i=="string"||typeof i=="number"||i.isColor),dv=((i,e)=>typeof window<"u"&&(((i=window.document)==null?void 0:i.createElement)||((e=window.navigator)==null?void 0:e.product)==="ReactNative"))()?re.useLayoutEffect:re.useEffect;function CM(i){const e=re.useRef(i);return dv(()=>void(e.current=i),[i]),e}function cH(){const i=LO(),e=sH();return re.useMemo(()=>({children:t})=>{const a=!!TM(i,!0,s=>s.type===re.StrictMode)?re.StrictMode:re.Fragment;return q.jsx(a,{children:q.jsx(e,{children:t})})},[i,e])}function uH({set:i}){return dv(()=>(i(new Promise(()=>null)),()=>i(!1)),[i]),null}const hH=(i=>(i=class extends re.Component{constructor(...t){super(...t),this.state={error:!1}}componentDidCatch(t){this.props.set(t)}render(){return this.state.error?null:this.props.children}},i.getDerivedStateFromError=()=>({error:!0}),i))();function zO(i){var e;const t=typeof window<"u"?(e=window.devicePixelRatio)!=null?e:2:1;return Array.isArray(i)?Math.min(Math.max(i[0],t),i[1]):i}function kd(i){var e;return(e=i.__r3f)==null?void 0:e.root.getState()}const Oi={obj:i=>i===Object(i)&&!Oi.arr(i)&&typeof i!="function",fun:i=>typeof i=="function",str:i=>typeof i=="string",num:i=>typeof i=="number",boo:i=>typeof i=="boolean",und:i=>i===void 0,nul:i=>i===null,arr:i=>Array.isArray(i),equ(i,e,{arrays:t="shallow",objects:n="reference",strict:a=!0}={}){if(typeof i!=typeof e||!!i!=!!e)return!1;if(Oi.str(i)||Oi.num(i)||Oi.boo(i))return i===e;const s=Oi.obj(i);if(s&&n==="reference")return i===e;const l=Oi.arr(i);if(l&&t==="reference")return i===e;if((l||s)&&i===e)return!0;let u;for(u in i)if(!(u in e))return!1;if(s&&t==="shallow"&&n==="shallow"){for(u in a?e:i)if(!Oi.equ(i[u],e[u],{strict:a,objects:"reference"}))return!1}else for(u in a?e:i)if(i[u]!==e[u])return!1;if(Oi.und(u)){if(l&&i.length===0&&e.length===0||s&&Object.keys(i).length===0&&Object.keys(e).length===0)return!0;if(i!==e)return!1}return!0}};function fH(i){const e={nodes:{},materials:{},meshes:{}};return i&&i.traverse(t=>{t.name&&(e.nodes[t.name]=t),t.material&&!e.materials[t.material.name]&&(e.materials[t.material.name]=t.material),t.isMesh&&!e.meshes[t.name]&&(e.meshes[t.name]=t)}),e}function dH(i){i.type!=="Scene"&&(i.dispose==null||i.dispose());for(const e in i){const t=i[e];(t==null?void 0:t.type)!=="Scene"&&(t==null||t.dispose==null||t.dispose())}}const BO=["children","key","ref"];function pH(i){const e={};for(const t in i)BO.includes(t)||(e[t]=i[t]);return e}function tb(i,e,t,n){const a=i;let s=a==null?void 0:a.__r3f;return s||(s={root:e,type:t,parent:null,children:[],props:pH(n),object:a,eventCount:0,handlers:{},isHidden:!1},a&&(a.__r3f=s)),s}function Zg(i,e){if(!e.includes("-"))return{root:i,key:e,target:i[e]};if(e in i)return{root:i,key:e,target:i[e]};let t=i;const n=e.split("-");for(const a of n){if(typeof t!="object"||t===null){if(t!==void 0){const s=n.slice(n.indexOf(a)).join("-");return{root:t,key:s,target:void 0}}return{root:i,key:e,target:void 0}}e=a,i=t,t=t[e]}return{root:i,key:e,target:t}}const JC=/-\d+$/;function nb(i,e){if(Oi.str(e.props.attach)){if(JC.test(e.props.attach)){const a=e.props.attach.replace(JC,""),{root:s,key:l}=Zg(i.object,a);Array.isArray(s[l])||(s[l]=[])}const{root:t,key:n}=Zg(i.object,e.props.attach);e.previousAttach=t[n],t[n]=e.object}else Oi.fun(e.props.attach)&&(e.previousAttach=e.props.attach(i.object,e.object))}function ib(i,e){if(Oi.str(e.props.attach)){const{root:t,key:n}=Zg(i.object,e.props.attach),a=e.previousAttach;a===void 0?delete t[n]:t[n]=a}else e.previousAttach==null||e.previousAttach(i.object,e.object);delete e.previousAttach}const gE=[...BO,"args","dispose","attach","object","onUpdate","dispose"],QC=new Map;function mH(i){let e=QC.get(i.constructor);try{e||(e=new i.constructor,QC.set(i.constructor,e))}catch{}return e}function gH(i,e){const t={};for(const n in e)if(!gE.includes(n)&&!Oi.equ(e[n],i.props[n])){t[n]=e[n];for(const a in e)a.startsWith(`${n}-`)&&(t[a]=e[a])}for(const n in i.props){if(gE.includes(n)||e.hasOwnProperty(n))continue;const{root:a,key:s}=Zg(i.object,n);if(a.constructor&&a.constructor.length===0){const l=mH(a);Oi.und(l)||(t[s]=l[s])}else t[s]=0}return t}const vH=["map","emissiveMap","sheenColorMap","specularColorMap","envMap"],yH=/^on(Pointer|Click|DoubleClick|ContextMenu|Wheel)/;function vl(i,e){var t;const n=i.__r3f,a=n&&IO(n).getState(),s=n==null?void 0:n.eventCount;for(const u in e){let d=e[u];if(gE.includes(u))continue;if(n&&yH.test(u)){typeof d=="function"?n.handlers[u]=d:delete n.handlers[u],n.eventCount=Object.keys(n.handlers).length;continue}if(d===void 0)continue;let{root:p,key:g,target:y}=Zg(i,u);if(y===void 0&&(typeof p!="object"||p===null))throw Error(`R3F: Cannot set "${u}". Ensure it is an object before setting "${g}".`);if(y instanceof cp&&d instanceof cp)y.mask=d.mask;else if(y instanceof Ut&&lH(d))y.set(d);else if(y!==null&&typeof y=="object"&&typeof y.set=="function"&&typeof y.copy=="function"&&d!=null&&d.constructor&&y.constructor===d.constructor)y.copy(d);else if(y!==null&&typeof y=="object"&&typeof y.set=="function"&&Array.isArray(d))typeof y.fromArray=="function"?y.fromArray(d):y.set(...d);else if(y!==null&&typeof y=="object"&&typeof y.set=="function"&&typeof d=="number")typeof y.setScalar=="function"?y.setScalar(d):y.set(d);else{var l;p[g]=d,a&&!a.linear&&vH.includes(g)&&(l=p[g])!=null&&l.isTexture&&p[g].format===sa&&p[g].type===ka&&(p[g].colorSpace=Fa)}}if(n!=null&&n.parent&&a!=null&&a.internal&&(t=n.object)!=null&&t.isObject3D&&s!==n.eventCount){const u=n.object,d=a.internal.interaction.indexOf(u);d>-1&&a.internal.interaction.splice(d,1),n.eventCount&&u.raycast!==null&&a.internal.interaction.push(u)}return n&&n.props.attach===void 0&&(n.object.isBufferGeometry?n.props.attach="geometry":n.object.isMaterial&&(n.props.attach="material")),n&&Sp(n),i}function Sp(i){var e;if(!i.parent)return;i.props.onUpdate==null||i.props.onUpdate(i.object);const t=(e=i.root)==null||e.getState==null?void 0:e.getState();t&&t.internal.frames===0&&t.invalidate()}function FO(i,e){i.manual||(PO(i)?(i.left=e.width/-2,i.right=e.width/2,i.top=e.height/2,i.bottom=e.height/-2):i.aspect=e.width/e.height,i.updateProjectionMatrix())}const Hr=i=>i==null?void 0:i.isObject3D;function zy(i){return(i.eventObject||i.object).uuid+"/"+i.index+i.instanceId}function kO(i,e,t,n){const a=t.get(e);a&&(t.delete(e),t.size===0&&(i.delete(n),a.target.releasePointerCapture(n)))}function _H(i,e){const{internal:t}=i.getState();t.interaction=t.interaction.filter(n=>n!==e),t.initialHits=t.initialHits.filter(n=>n!==e),t.hovered.forEach((n,a)=>{(n.eventObject===e||n.object===e)&&t.hovered.delete(a)}),t.capturedMap.forEach((n,a)=>{kO(t.capturedMap,e,n,a)})}function bH(i){function e(d){const{internal:p}=i.getState(),g=d.offsetX-p.initialClick[0],y=d.offsetY-p.initialClick[1];return Math.round(Math.sqrt(g*g+y*y))}function t(d){return d.filter(p=>["Move","Over","Enter","Out","Leave"].some(g=>{var y;return(y=p.__r3f)==null?void 0:y.handlers["onPointer"+g]}))}function n(d,p){const g=i.getState(),y=new Set,_=[],b=p?p(g.internal.interaction):g.internal.interaction;for(let S=0;S<b.length;S++){const C=kd(b[S]);C&&(C.raycaster.camera=void 0)}g.previousRoot||g.events.compute==null||g.events.compute(d,g);function x(S){const C=kd(S);if(!C||!C.events.enabled||C.raycaster.camera===null)return[];if(C.raycaster.camera===void 0){var N;C.events.compute==null||C.events.compute(d,C,(N=C.previousRoot)==null?void 0:N.getState()),C.raycaster.camera===void 0&&(C.raycaster.camera=null)}return C.raycaster.camera?C.raycaster.intersectObject(S,!0):[]}let T=b.flatMap(x).sort((S,C)=>{const N=kd(S.object),O=kd(C.object);return!N||!O?S.distance-C.distance:O.events.priority-N.events.priority||S.distance-C.distance}).filter(S=>{const C=zy(S);return y.has(C)?!1:(y.add(C),!0)});g.events.filter&&(T=g.events.filter(T,g));for(const S of T){let C=S.object;for(;C;){var w;(w=C.__r3f)!=null&&w.eventCount&&_.push({...S,eventObject:C}),C=C.parent}}if("pointerId"in d&&g.internal.capturedMap.has(d.pointerId))for(let S of g.internal.capturedMap.get(d.pointerId).values())y.has(zy(S.intersection))||_.push(S.intersection);return _}function a(d,p,g,y){if(d.length){const _={stopped:!1};for(const b of d){let x=kd(b.object);if(x||b.object.traverseAncestors(T=>{const w=kd(T);if(w)return x=w,!1}),x){const{raycaster:T,pointer:w,camera:S,internal:C}=x,N=new ee(w.x,w.y,0).unproject(S),O=D=>{var L,j;return(L=(j=C.capturedMap.get(D))==null?void 0:j.has(b.eventObject))!=null?L:!1},P=D=>{const L={intersection:b,target:p.target};C.capturedMap.has(D)?C.capturedMap.get(D).set(b.eventObject,L):C.capturedMap.set(D,new Map([[b.eventObject,L]])),p.target.setPointerCapture(D)},U=D=>{const L=C.capturedMap.get(D);L&&kO(C.capturedMap,b.eventObject,L,D)};let z={};for(let D in p){let L=p[D];typeof L!="function"&&(z[D]=L)}let H={...b,...z,pointer:w,intersections:d,stopped:_.stopped,delta:g,unprojectedPoint:N,ray:T.ray,camera:S,stopPropagation(){const D="pointerId"in p&&C.capturedMap.get(p.pointerId);if((!D||D.has(b.eventObject))&&(H.stopped=_.stopped=!0,C.hovered.size&&Array.from(C.hovered.values()).find(L=>L.eventObject===b.eventObject))){const L=d.slice(0,d.indexOf(b));s([...L,b])}},target:{hasPointerCapture:O,setPointerCapture:P,releasePointerCapture:U},currentTarget:{hasPointerCapture:O,setPointerCapture:P,releasePointerCapture:U},nativeEvent:p};if(y(H),_.stopped===!0)break}}}return d}function s(d){const{internal:p}=i.getState();for(const g of p.hovered.values())if(!d.length||!d.find(y=>y.object===g.object&&y.index===g.index&&y.instanceId===g.instanceId)){const _=g.eventObject.__r3f;if(p.hovered.delete(zy(g)),_!=null&&_.eventCount){const b=_.handlers,x={...g,intersections:d};b.onPointerOut==null||b.onPointerOut(x),b.onPointerLeave==null||b.onPointerLeave(x)}}}function l(d,p){for(let g=0;g<p.length;g++){const y=p[g].__r3f;y==null||y.handlers.onPointerMissed==null||y.handlers.onPointerMissed(d)}}function u(d){switch(d){case"onPointerLeave":case"onPointerCancel":return()=>s([]);case"onLostPointerCapture":return p=>{const{internal:g}=i.getState();"pointerId"in p&&g.capturedMap.has(p.pointerId)&&requestAnimationFrame(()=>{g.capturedMap.has(p.pointerId)&&(g.capturedMap.delete(p.pointerId),s([]))})}}return function(g){const{onPointerMissed:y,internal:_}=i.getState();_.lastEvent.current=g;const b=d==="onPointerMove",x=d==="onClick"||d==="onContextMenu"||d==="onDoubleClick",w=n(g,b?t:void 0),S=x?e(g):0;d==="onPointerDown"&&(_.initialClick=[g.offsetX,g.offsetY],_.initialHits=w.map(N=>N.eventObject)),x&&!w.length&&S<=2&&(l(g,_.interaction),y&&y(g)),b&&s(w);function C(N){const O=N.eventObject,P=O.__r3f;if(!(P!=null&&P.eventCount))return;const U=P.handlers;if(b){if(U.onPointerOver||U.onPointerEnter||U.onPointerOut||U.onPointerLeave){const z=zy(N),H=_.hovered.get(z);H?H.stopped&&N.stopPropagation():(_.hovered.set(z,N),U.onPointerOver==null||U.onPointerOver(N),U.onPointerEnter==null||U.onPointerEnter(N))}U.onPointerMove==null||U.onPointerMove(N)}else{const z=U[d];z?(!x||_.initialHits.includes(O))&&(l(g,_.interaction.filter(H=>!_.initialHits.includes(H))),z(N)):x&&_.initialHits.includes(O)&&l(g,_.interaction.filter(H=>!_.initialHits.includes(H)))}}a(w,g,S,C)}}return{handlePointer:u}}const $C=i=>!!(i!=null&&i.render),RM=re.createContext(null),xH=(i,e)=>{const t=RO((u,d)=>{const p=new ee,g=new ee,y=new ee;function _(S=d().camera,C=g,N=d().size){const{width:O,height:P,top:U,left:z}=N,H=O/P;C.isVector3?y.copy(C):y.set(...C);const D=S.getWorldPosition(p).distanceTo(y);if(PO(S))return{width:O/S.zoom,height:P/S.zoom,top:U,left:z,factor:1,distance:D,aspect:H};{const L=S.fov*Math.PI/180,j=2*Math.tan(L/2)*D,W=j*(O/P);return{width:W,height:j,top:U,left:z,factor:O/W,distance:D,aspect:H}}}let b;const x=S=>u(C=>({performance:{...C.performance,current:S}})),T=new Ke;return{set:u,get:d,gl:null,camera:null,raycaster:null,events:{priority:1,enabled:!0,connected:!1},scene:null,xr:null,invalidate:(S=1)=>i(d(),S),advance:(S,C)=>e(S,C,d()),legacy:!1,linear:!1,flat:!1,controls:null,clock:new bM,pointer:T,mouse:T,frameloop:"always",onPointerMissed:void 0,performance:{current:1,min:.5,max:1,debounce:200,regress:()=>{const S=d();b&&clearTimeout(b),S.performance.current!==S.performance.min&&x(S.performance.min),b=setTimeout(()=>x(d().performance.max),S.performance.debounce)}},size:{width:0,height:0,top:0,left:0},viewport:{initialDpr:0,dpr:0,width:0,height:0,top:0,left:0,aspect:0,distance:0,factor:0,getCurrentViewport:_},setEvents:S=>u(C=>({...C,events:{...C.events,...S}})),setSize:(S,C,N=0,O=0)=>{const P=d().camera,U={width:S,height:C,top:N,left:O};u(z=>({size:U,viewport:{...z.viewport,..._(P,g,U)}}))},setDpr:S=>u(C=>{const N=zO(S);return{viewport:{...C.viewport,dpr:N,initialDpr:C.viewport.initialDpr||N}}}),setFrameloop:(S="always")=>{const C=d().clock;C.stop(),C.elapsedTime=0,S!=="never"&&(C.start(),C.elapsedTime=0),u(()=>({frameloop:S}))},previousRoot:void 0,internal:{interaction:[],hovered:new Map,subscribers:[],initialClick:[0,0],initialHits:[],capturedMap:new Map,lastEvent:re.createRef(),active:!1,frames:0,priority:0,subscribe:(S,C,N)=>{const O=d().internal;return O.priority=O.priority+(C>0?1:0),O.subscribers.push({ref:S,priority:C,store:N}),O.subscribers=O.subscribers.sort((P,U)=>P.priority-U.priority),()=>{const P=d().internal;P!=null&&P.subscribers&&(P.priority=P.priority-(C>0?1:0),P.subscribers=P.subscribers.filter(U=>U.ref!==S))}}}}}),n=t.getState();let a=n.size,s=n.viewport.dpr,l=n.camera;return t.subscribe(()=>{const{camera:u,size:d,viewport:p,gl:g,set:y}=t.getState();if(d.width!==a.width||d.height!==a.height||p.dpr!==s){a=d,s=p.dpr,FO(u,d),p.dpr>0&&g.setPixelRatio(p.dpr);const _=typeof HTMLCanvasElement<"u"&&g.domElement instanceof HTMLCanvasElement;g.setSize(d.width,d.height,_)}u!==l&&(l=u,y(_=>({viewport:{..._.viewport,..._.viewport.getCurrentViewport(u)}})))}),t.subscribe(u=>i(u)),t};function NM(){const i=re.useContext(RM);if(!i)throw new Error("R3F: Hooks can only be used within the Canvas component!");return i}function aa(i=t=>t,e){return NM()(i,e)}function pv(i,e=0){const t=NM(),n=t.getState().internal.subscribe,a=CM(i);return dv(()=>n(a,e,t),[e,n,t]),null}const eR=new WeakMap,SH=i=>{var e;return typeof i=="function"&&(i==null||(e=i.prototype)==null?void 0:e.constructor)===i};function HO(i,e){return function(t,...n){let a;return SH(t)?(a=eR.get(t),a||(a=new t,eR.set(t,a))):a=t,i&&i(a),Promise.all(n.map(s=>new Promise((l,u)=>a.load(s,d=>{Hr(d==null?void 0:d.scene)&&Object.assign(d,fH(d.scene)),l(d)},e,d=>u(new Error(`Could not load ${s}: ${d==null?void 0:d.message}`))))))}}function ef(i,e,t,n){const a=Array.isArray(e)?e:[e],s=Xk(HO(t,n),[i,...a],{equal:Oi.equ});return Array.isArray(e)?s:s[0]}ef.preload=function(i,e,t){const n=Array.isArray(e)?e:[e];return Wk(HO(t),[i,...n])};ef.clear=function(i,e){const t=Array.isArray(e)?e:[e];return Yk([i,...t])};var EH={version:"9.4.2"};function MH(i){const e=eH(i);return e.injectIntoDevTools(),e}const VO=0,pp={},wH=/^three(?=[A-Z])/,Yb=i=>`${i[0].toUpperCase()}${i.slice(1)}`;let TH=0;const AH=i=>typeof i=="function";function OM(i){if(AH(i)){const e=`${TH++}`;return pp[e]=i,e}else Object.assign(pp,i)}function jO(i,e){const t=Yb(i),n=pp[t];if(i!=="primitive"&&!n)throw new Error(`R3F: ${t} is not part of the THREE namespace! Did you forget to extend? See: https://docs.pmnd.rs/react-three-fiber/api/objects#using-3rd-party-objects-declaratively`);if(i==="primitive"&&!e.object)throw new Error("R3F: Primitives without 'object' are invalid!");if(e.args!==void 0&&!Array.isArray(e.args))throw new Error("R3F: The args prop must be an array!")}function CH(i,e,t){var n;return i=Yb(i)in pp?i:i.replace(wH,""),jO(i,e),i==="primitive"&&(n=e.object)!=null&&n.__r3f&&delete e.object.__r3f,tb(e.object,t,i,e)}function RH(i){if(!i.isHidden){var e;i.props.attach&&(e=i.parent)!=null&&e.object?ib(i.parent,i):Hr(i.object)&&(i.object.visible=!1),i.isHidden=!0,Sp(i)}}function GO(i){if(i.isHidden){var e;i.props.attach&&(e=i.parent)!=null&&e.object?nb(i.parent,i):Hr(i.object)&&i.props.visible!==!1&&(i.object.visible=!0),i.isHidden=!1,Sp(i)}}function DM(i,e,t){const n=e.root.getState();if(!(!i.parent&&i.object!==n.scene)){if(!e.object){var a,s;const l=pp[Yb(e.type)];e.object=(a=e.props.object)!=null?a:new l(...(s=e.props.args)!=null?s:[]),e.object.__r3f=e}if(vl(e.object,e.props),e.props.attach)nb(i,e);else if(Hr(e.object)&&Hr(i.object)){const l=i.object.children.indexOf(t==null?void 0:t.object);if(t&&l!==-1){const u=i.object.children.indexOf(e.object);if(u!==-1){i.object.children.splice(u,1);const d=u<l?l-1:l;i.object.children.splice(d,0,e.object)}else e.object.parent=i.object,i.object.children.splice(l,0,e.object),e.object.dispatchEvent({type:"added"}),i.object.dispatchEvent({type:"childadded",child:e.object})}else i.object.add(e.object)}for(const l of e.children)DM(e,l);Sp(e)}}function _1(i,e){e&&(e.parent=i,i.children.push(e),DM(i,e))}function tR(i,e,t){if(!e||!t)return;e.parent=i;const n=i.children.indexOf(t);n!==-1?i.children.splice(n,0,e):i.children.push(e),DM(i,e,t)}function qO(i){if(typeof i.dispose=="function"){const e=()=>{try{i.dispose()}catch{}};typeof IS_REACT_ACT_ENVIRONMENT<"u"?e():KC.unstable_scheduleCallback(KC.unstable_IdlePriority,e)}}function vE(i,e,t){if(!e)return;e.parent=null;const n=i.children.indexOf(e);n!==-1&&i.children.splice(n,1),e.props.attach?ib(i,e):Hr(e.object)&&Hr(i.object)&&(i.object.remove(e.object),_H(IO(e),e.object));const a=e.props.dispose!==null&&t!==!1;for(let s=e.children.length-1;s>=0;s--){const l=e.children[s];vE(e,l,a)}e.children.length=0,delete e.object.__r3f,a&&e.type!=="primitive"&&e.object.type!=="Scene"&&qO(e.object),t===void 0&&Sp(e)}function NH(i,e){for(const t of[i,i.alternate])if(t!==null)if(typeof t.ref=="function"){t.refCleanup==null||t.refCleanup();const n=t.ref(e);typeof n=="function"&&(t.refCleanup=n)}else t.ref&&(t.ref.current=e)}const Ky=[];function OH(){for(const[t]of Ky){const n=t.parent;if(n){t.props.attach?ib(n,t):Hr(t.object)&&Hr(n.object)&&n.object.remove(t.object);for(const a of t.children)a.props.attach?ib(t,a):Hr(a.object)&&Hr(t.object)&&t.object.remove(a.object)}t.isHidden&&GO(t),t.object.__r3f&&delete t.object.__r3f,t.type!=="primitive"&&qO(t.object)}for(const[t,n,a]of Ky){t.props=n;const s=t.parent;if(s){var i,e;const l=pp[Yb(t.type)];t.object=(i=t.props.object)!=null?i:new l(...(e=t.props.args)!=null?e:[]),t.object.__r3f=t,NH(a,t.object),vl(t.object,t.props),t.props.attach?nb(s,t):Hr(t.object)&&Hr(s.object)&&s.object.add(t.object);for(const u of t.children)u.props.attach?nb(t,u):Hr(u.object)&&Hr(t.object)&&t.object.add(u.object);Sp(t)}}Ky.length=0}const b1=()=>{},nR={};let By=VO;const DH=0,UH=4,ab=MH({isPrimaryRenderer:!1,warnsIfNotActing:!1,supportsMutation:!0,supportsPersistence:!1,supportsHydration:!1,createInstance:CH,removeChild:vE,appendChild:_1,appendInitialChild:_1,insertBefore:tR,appendChildToContainer(i,e){const t=i.getState().scene.__r3f;!e||!t||_1(t,e)},removeChildFromContainer(i,e){const t=i.getState().scene.__r3f;!e||!t||vE(t,e)},insertInContainerBefore(i,e,t){const n=i.getState().scene.__r3f;!e||!t||!n||tR(n,e,t)},getRootHostContext:()=>nR,getChildHostContext:()=>nR,commitUpdate(i,e,t,n,a){var s,l,u;jO(e,n);let d=!1;if((i.type==="primitive"&&t.object!==n.object||((s=n.args)==null?void 0:s.length)!==((l=t.args)==null?void 0:l.length)||(u=n.args)!=null&&u.some((g,y)=>{var _;return g!==((_=t.args)==null?void 0:_[y])}))&&(d=!0),d)Ky.push([i,{...n},a]);else{const g=gH(i,n);Object.keys(g).length&&(Object.assign(i.props,g),vl(i.object,g))}(a.sibling===null||(a.flags&UH)===DH)&&OH()},finalizeInitialChildren:()=>!1,commitMount(){},getPublicInstance:i=>i==null?void 0:i.object,prepareForCommit:()=>null,preparePortalMount:i=>tb(i.getState().scene,i,"",{}),resetAfterCommit:()=>{},shouldSetTextContent:()=>!1,clearContainer:()=>!1,hideInstance:RH,unhideInstance:GO,createTextInstance:b1,hideTextInstance:b1,unhideTextInstance:b1,scheduleTimeout:typeof setTimeout=="function"?setTimeout:void 0,cancelTimeout:typeof clearTimeout=="function"?clearTimeout:void 0,noTimeout:-1,getInstanceFromNode:()=>null,beforeActiveInstanceBlur(){},afterActiveInstanceBlur(){},detachDeletedInstance(){},prepareScopeUpdate(){},getInstanceFromScope:()=>null,shouldAttemptEagerTransition:()=>!1,trackSchedulerEvent:()=>{},resolveEventType:()=>null,resolveEventTimeStamp:()=>-1.1,requestPostPaintCallback(){},maySuspendCommit:()=>!1,preloadInstance:()=>!0,startSuspendingCommit(){},suspendInstance(){},waitForCommitToBeReady:()=>null,NotPendingTransition:null,HostTransitionContext:re.createContext(null),setCurrentUpdatePriority(i){By=i},getCurrentUpdatePriority(){return By},resolveUpdatePriority(){var i;if(By!==VO)return By;switch(typeof window<"u"&&((i=window.event)==null?void 0:i.type)){case"click":case"contextmenu":case"dblclick":case"pointercancel":case"pointerdown":case"pointerup":return Xy.DiscreteEventPriority;case"pointermove":case"pointerout":case"pointerover":case"pointerenter":case"pointerleave":case"wheel":return Xy.ContinuousEventPriority;default:return Xy.DefaultEventPriority}},resetFormInstance(){},rendererPackageName:"@react-three/fiber",rendererVersion:EH.version}),tf=new Map,Hd={objects:"shallow",strict:!1};function LH(i,e){if(!e&&typeof HTMLCanvasElement<"u"&&i instanceof HTMLCanvasElement&&i.parentElement){const{width:t,height:n,top:a,left:s}=i.parentElement.getBoundingClientRect();return{width:t,height:n,top:a,left:s}}else if(!e&&typeof OffscreenCanvas<"u"&&i instanceof OffscreenCanvas)return{width:i.width,height:i.height,top:0,left:0};return{width:0,height:0,top:0,left:0,...e}}function IH(i){const e=tf.get(i),t=e==null?void 0:e.fiber,n=e==null?void 0:e.store;e&&console.warn("R3F.createRoot should only be called once!");const a=typeof reportError=="function"?reportError:console.error,s=n||xH(bE,aR),l=t||ab.createContainer(s,Xy.ConcurrentRoot,null,!1,null,"",a,a,a,null);e||tf.set(i,{fiber:l,store:s});let u,d,p=!1,g=null;return{async configure(y={}){let _;g=new Promise(J=>_=J);let{gl:b,size:x,scene:T,events:w,onCreated:S,shadows:C=!1,linear:N=!1,flat:O=!1,legacy:P=!1,orthographic:U=!1,frameloop:z="always",dpr:H=[1,2],performance:D,raycaster:L,camera:j,onPointerMissed:W}=y,X=s.getState(),K=X.gl;if(!X.gl){const J={canvas:i,powerPreference:"high-performance",antialias:!0,alpha:!0},ce=typeof b=="function"?await b(J):b;$C(ce)?K=ce:K=new wM({...J,...b}),X.set({gl:K})}let le=X.raycaster;le||X.set({raycaster:le=new EM});const{params:k,...Z}=L||{};if(Oi.equ(Z,le,Hd)||vl(le,{...Z}),Oi.equ(k,le.params,Hd)||vl(le,{params:{...le.params,...k}}),!X.camera||X.camera===d&&!Oi.equ(d,j,Hd)){d=j;const J=j==null?void 0:j.isCamera,ce=J?j:U?new bl(0,0,0,0,.1,1e3):new ra(75,0,.1,1e3);J||(ce.position.z=5,j&&(vl(ce,j),ce.manual||("aspect"in j||"left"in j||"right"in j||"bottom"in j||"top"in j)&&(ce.manual=!0,ce.updateProjectionMatrix())),!X.camera&&!(j!=null&&j.rotation)&&ce.lookAt(0,0,0)),X.set({camera:ce}),le.camera=ce}if(!X.scene){let J;T!=null&&T.isScene?(J=T,tb(J,s,"",{})):(J=new rv,tb(J,s,"",{}),T&&vl(J,T)),X.set({scene:J})}w&&!X.events.handlers&&X.set({events:w(s)});const ne=LH(i,x);if(Oi.equ(ne,X.size,Hd)||X.setSize(ne.width,ne.height,ne.top,ne.left),H&&X.viewport.dpr!==zO(H)&&X.setDpr(H),X.frameloop!==z&&X.setFrameloop(z),X.onPointerMissed||X.set({onPointerMissed:W}),D&&!Oi.equ(D,X.performance,Hd)&&X.set(J=>({performance:{...J.performance,...D}})),!X.xr){var pe;const J=(Le,nt)=>{const ve=s.getState();ve.frameloop!=="never"&&aR(Le,!0,ve,nt)},ce=()=>{const Le=s.getState();Le.gl.xr.enabled=Le.gl.xr.isPresenting,Le.gl.xr.setAnimationLoop(Le.gl.xr.isPresenting?J:null),Le.gl.xr.isPresenting||bE(Le)},Se={connect(){const Le=s.getState().gl;Le.xr.addEventListener("sessionstart",ce),Le.xr.addEventListener("sessionend",ce)},disconnect(){const Le=s.getState().gl;Le.xr.removeEventListener("sessionstart",ce),Le.xr.removeEventListener("sessionend",ce)}};typeof((pe=K.xr)==null?void 0:pe.addEventListener)=="function"&&Se.connect(),X.set({xr:Se})}if(K.shadowMap){const J=K.shadowMap.enabled,ce=K.shadowMap.type;if(K.shadowMap.enabled=!!C,Oi.boo(C))K.shadowMap.type=yg;else if(Oi.str(C)){var ge;const Se={basic:j3,percentage:Jd,soft:yg,variance:Hh};K.shadowMap.type=(ge=Se[C])!=null?ge:yg}else Oi.obj(C)&&Object.assign(K.shadowMap,C);(J!==K.shadowMap.enabled||ce!==K.shadowMap.type)&&(K.shadowMap.needsUpdate=!0)}return Pn.enabled=!P,p||(K.outputColorSpace=N?Oo:Fa,K.toneMapping=O?qs:ub),X.legacy!==P&&X.set(()=>({legacy:P})),X.linear!==N&&X.set(()=>({linear:N})),X.flat!==O&&X.set(()=>({flat:O})),b&&!Oi.fun(b)&&!$C(b)&&!Oi.equ(b,K,Hd)&&vl(K,b),u=S,p=!0,_(),this},render(y){return!p&&!g&&this.configure(),g.then(()=>{ab.updateContainer(q.jsx(PH,{store:s,children:y,onCreated:u,rootElement:i}),l,null,()=>{})}),s},unmount(){XO(i)}}}function PH({store:i,children:e,onCreated:t,rootElement:n}){return dv(()=>{const a=i.getState();a.set(s=>({internal:{...s.internal,active:!0}})),t&&t(a),i.getState().events.connected||a.events.connect==null||a.events.connect(n)},[]),q.jsx(RM.Provider,{value:i,children:e})}function XO(i,e){const t=tf.get(i),n=t==null?void 0:t.fiber;if(n){const a=t==null?void 0:t.store.getState();a&&(a.internal.active=!1),ab.updateContainer(null,n,null,()=>{a&&setTimeout(()=>{try{var s,l,u,d;a.events.disconnect==null||a.events.disconnect(),(s=a.gl)==null||(l=s.renderLists)==null||l.dispose==null||l.dispose(),(u=a.gl)==null||u.forceContextLoss==null||u.forceContextLoss(),(d=a.gl)!=null&&d.xr&&a.xr.disconnect(),dH(a.scene),tf.delete(i)}catch{}},500)})}}function zH(i,e,t){return q.jsx(BH,{children:i,container:e,state:t})}function BH({state:i={},children:e,container:t}){const{events:n,size:a,...s}=i,l=NM(),[u]=re.useState(()=>new EM),[d]=re.useState(()=>new Ke),p=CM((y,_)=>{let b;if(_.camera&&a){const x=_.camera;b=y.viewport.getCurrentViewport(x,new ee,a),x!==y.camera&&FO(x,a)}return{...y,..._,scene:t,raycaster:u,pointer:d,mouse:d,previousRoot:l,events:{...y.events,..._.events,...n},size:{...y.size,...a},viewport:{...y.viewport,...b},setEvents:x=>_.set(T=>({...T,events:{...T.events,...x}}))}}),g=re.useMemo(()=>{const y=RO((b,x)=>({...s,set:b,get:x})),_=b=>y.setState(x=>p.current(b,x));return _(l.getState()),l.subscribe(_),y},[l,t]);return q.jsx(q.Fragment,{children:ab.createPortal(q.jsx(RM.Provider,{value:g,children:e}),g,null)})}const FH=new Set,kH=new Set,HH=new Set;function x1(i,e){if(i.size)for(const{callback:t}of i.values())t(e)}function Cg(i,e){switch(i){case"before":return x1(FH,e);case"after":return x1(kH,e);case"tail":return x1(HH,e)}}let S1,E1;function yE(i,e,t){let n=e.clock.getDelta();e.frameloop==="never"&&typeof i=="number"&&(n=i-e.clock.elapsedTime,e.clock.oldTime=e.clock.elapsedTime,e.clock.elapsedTime=i),S1=e.internal.subscribers;for(let a=0;a<S1.length;a++)E1=S1[a],E1.ref.current(E1.store.getState(),n,t);return!e.internal.priority&&e.gl.render&&e.gl.render(e.scene,e.camera),e.internal.frames=Math.max(0,e.internal.frames-1),e.frameloop==="always"?1:e.internal.frames}let rb=!1,_E=!1,M1,iR,Vd;function WO(i){iR=requestAnimationFrame(WO),rb=!0,M1=0,Cg("before",i),_E=!0;for(const t of tf.values()){var e;Vd=t.store.getState(),Vd.internal.active&&(Vd.frameloop==="always"||Vd.internal.frames>0)&&!((e=Vd.gl.xr)!=null&&e.isPresenting)&&(M1+=yE(i,Vd))}if(_E=!1,Cg("after",i),M1===0)return Cg("tail",i),rb=!1,cancelAnimationFrame(iR)}function bE(i,e=1){var t;if(!i)return tf.forEach(n=>bE(n.store.getState(),e));(t=i.gl.xr)!=null&&t.isPresenting||!i.internal.active||i.frameloop==="never"||(e>1?i.internal.frames=Math.min(60,i.internal.frames+e):_E?i.internal.frames=2:i.internal.frames=1,rb||(rb=!0,requestAnimationFrame(WO)))}function aR(i,e=!0,t,n){if(e&&Cg("before",i),t)yE(i,t,n);else for(const a of tf.values())yE(i,a.store.getState());e&&Cg("after",i)}const w1={onClick:["click",!1],onContextMenu:["contextmenu",!1],onDoubleClick:["dblclick",!1],onWheel:["wheel",!0],onPointerDown:["pointerdown",!0],onPointerUp:["pointerup",!0],onPointerLeave:["pointerleave",!0],onPointerMove:["pointermove",!0],onPointerCancel:["pointercancel",!0],onLostPointerCapture:["lostpointercapture",!0]};function VH(i){const{handlePointer:e}=bH(i);return{priority:1,enabled:!0,compute(t,n,a){n.pointer.set(t.offsetX/n.size.width*2-1,-(t.offsetY/n.size.height)*2+1),n.raycaster.setFromCamera(n.pointer,n.camera)},connected:void 0,handlers:Object.keys(w1).reduce((t,n)=>({...t,[n]:e(n)}),{}),update:()=>{var t;const{events:n,internal:a}=i.getState();(t=a.lastEvent)!=null&&t.current&&n.handlers&&n.handlers.onPointerMove(a.lastEvent.current)},connect:t=>{const{set:n,events:a}=i.getState();if(a.disconnect==null||a.disconnect(),n(s=>({events:{...s.events,connected:t}})),a.handlers)for(const s in a.handlers){const l=a.handlers[s],[u,d]=w1[s];t.addEventListener(u,l,{passive:d})}},disconnect:()=>{const{set:t,events:n}=i.getState();if(n.connected){if(n.handlers)for(const a in n.handlers){const s=n.handlers[a],[l]=w1[a];n.connected.removeEventListener(l,s)}t(a=>({events:{...a.events,connected:void 0}}))}}}}function rR(i,e){let t;return(...n)=>{window.clearTimeout(t),t=window.setTimeout(()=>i(...n),e)}}function jH({debounce:i,scroll:e,polyfill:t,offsetSize:n}={debounce:0,scroll:!1,offsetSize:!1}){const a=t||(typeof window>"u"?class{}:window.ResizeObserver);if(!a)throw new Error("This browser does not support ResizeObserver out of the box. See: https://github.com/react-spring/react-use-measure/#resize-observer-polyfills");const[s,l]=re.useState({left:0,top:0,width:0,height:0,bottom:0,right:0,x:0,y:0}),u=re.useRef({element:null,scrollContainers:null,resizeObserver:null,lastBounds:s,orientationHandler:null}),d=i?typeof i=="number"?i:i.scroll:null,p=i?typeof i=="number"?i:i.resize:null,g=re.useRef(!1);re.useEffect(()=>(g.current=!0,()=>void(g.current=!1)));const[y,_,b]=re.useMemo(()=>{const S=()=>{if(!u.current.element)return;const{left:C,top:N,width:O,height:P,bottom:U,right:z,x:H,y:D}=u.current.element.getBoundingClientRect(),L={left:C,top:N,width:O,height:P,bottom:U,right:z,x:H,y:D};u.current.element instanceof HTMLElement&&n&&(L.height=u.current.element.offsetHeight,L.width=u.current.element.offsetWidth),Object.freeze(L),g.current&&!WH(u.current.lastBounds,L)&&l(u.current.lastBounds=L)};return[S,p?rR(S,p):S,d?rR(S,d):S]},[l,n,d,p]);function x(){u.current.scrollContainers&&(u.current.scrollContainers.forEach(S=>S.removeEventListener("scroll",b,!0)),u.current.scrollContainers=null),u.current.resizeObserver&&(u.current.resizeObserver.disconnect(),u.current.resizeObserver=null),u.current.orientationHandler&&("orientation"in screen&&"removeEventListener"in screen.orientation?screen.orientation.removeEventListener("change",u.current.orientationHandler):"onorientationchange"in window&&window.removeEventListener("orientationchange",u.current.orientationHandler))}function T(){u.current.element&&(u.current.resizeObserver=new a(b),u.current.resizeObserver.observe(u.current.element),e&&u.current.scrollContainers&&u.current.scrollContainers.forEach(S=>S.addEventListener("scroll",b,{capture:!0,passive:!0})),u.current.orientationHandler=()=>{b()},"orientation"in screen&&"addEventListener"in screen.orientation?screen.orientation.addEventListener("change",u.current.orientationHandler):"onorientationchange"in window&&window.addEventListener("orientationchange",u.current.orientationHandler))}const w=S=>{!S||S===u.current.element||(x(),u.current.element=S,u.current.scrollContainers=YO(S),T())};return qH(b,!!e),GH(_),re.useEffect(()=>{x(),T()},[e,b,_]),re.useEffect(()=>x,[]),[w,s,y]}function GH(i){re.useEffect(()=>{const e=i;return window.addEventListener("resize",e),()=>void window.removeEventListener("resize",e)},[i])}function qH(i,e){re.useEffect(()=>{if(e){const t=i;return window.addEventListener("scroll",t,{capture:!0,passive:!0}),()=>void window.removeEventListener("scroll",t,!0)}},[i,e])}function YO(i){const e=[];if(!i||i===document.body)return e;const{overflow:t,overflowX:n,overflowY:a}=window.getComputedStyle(i);return[t,n,a].some(s=>s==="auto"||s==="scroll")&&e.push(i),[...e,...YO(i.parentElement)]}const XH=["x","y","top","bottom","left","right","width","height"],WH=(i,e)=>XH.every(t=>i[t]===e[t]);function YH({ref:i,children:e,fallback:t,resize:n,style:a,gl:s,events:l=VH,eventSource:u,eventPrefix:d,shadows:p,linear:g,flat:y,legacy:_,orthographic:b,frameloop:x,dpr:T,performance:w,raycaster:S,camera:C,scene:N,onPointerMissed:O,onCreated:P,...U}){re.useMemo(()=>OM(Lk),[]);const z=cH(),[H,D]=jH({scroll:!0,debounce:{scroll:50,resize:0},...n}),L=re.useRef(null),j=re.useRef(null);re.useImperativeHandle(i,()=>L.current);const W=CM(O),[X,K]=re.useState(!1),[le,k]=re.useState(!1);if(X)throw X;if(le)throw le;const Z=re.useRef(null);dv(()=>{const pe=L.current;if(D.width>0&&D.height>0&&pe){Z.current||(Z.current=IH(pe));async function ge(){await Z.current.configure({gl:s,scene:N,events:l,shadows:p,linear:g,flat:y,legacy:_,orthographic:b,frameloop:x,dpr:T,performance:w,raycaster:S,camera:C,size:D,onPointerMissed:(...J)=>W.current==null?void 0:W.current(...J),onCreated:J=>{J.events.connect==null||J.events.connect(u?oH(u)?u.current:u:j.current),d&&J.setEvents({compute:(ce,Se)=>{const Le=ce[d+"X"],nt=ce[d+"Y"];Se.pointer.set(Le/Se.size.width*2-1,-(nt/Se.size.height)*2+1),Se.raycaster.setFromCamera(Se.pointer,Se.camera)}}),P==null||P(J)}}),Z.current.render(q.jsx(z,{children:q.jsx(hH,{set:k,children:q.jsx(re.Suspense,{fallback:q.jsx(uH,{set:K}),children:e??null})})}))}ge()}}),re.useEffect(()=>{const pe=L.current;if(pe)return()=>XO(pe)},[]);const ne=u?"none":"auto";return q.jsx("div",{ref:j,style:{position:"relative",width:"100%",height:"100%",overflow:"hidden",pointerEvents:ne,...a},...U,children:q.jsx("div",{ref:H,style:{width:"100%",height:"100%"},children:q.jsx("canvas",{ref:L,style:{display:"block"},children:t})})})}function ZH(i){return q.jsx(UO,{children:q.jsx(YH,{...i})})}class KH extends yr{constructor(e){super(e)}load(e,t,n,a){const s=this,l=new as(this.manager);l.setPath(this.path),l.setResponseType("arraybuffer"),l.setRequestHeader(this.requestHeader),l.setWithCredentials(this.withCredentials),l.load(e,function(u){try{t(s.parse(u))}catch(d){a?a(d):console.error(d),s.manager.itemError(e)}},n,a)}parse(e){function t(p){const g=new DataView(p),y=32/8*3+32/8*3*3+16/8,_=g.getUint32(80,!0);if(80+32/8+_*y===g.byteLength)return!0;const x=[115,111,108,105,100];for(let T=0;T<5;T++)if(n(x,g,T))return!1;return!0}function n(p,g,y){for(let _=0,b=p.length;_<b;_++)if(p[_]!==g.getUint8(y+_))return!1;return!0}function a(p){const g=new DataView(p),y=g.getUint32(80,!0);let _,b,x,T=!1,w,S,C,N,O;for(let j=0;j<70;j++)g.getUint32(j,!1)==1129270351&&g.getUint8(j+4)==82&&g.getUint8(j+5)==61&&(T=!0,w=new Float32Array(y*3*3),S=g.getUint8(j+6)/255,C=g.getUint8(j+7)/255,N=g.getUint8(j+8)/255,O=g.getUint8(j+9)/255);const P=84,U=50,z=new mn,H=new Float32Array(y*3*3),D=new Float32Array(y*3*3),L=new Ut;for(let j=0;j<y;j++){const W=P+j*U,X=g.getFloat32(W,!0),K=g.getFloat32(W+4,!0),le=g.getFloat32(W+8,!0);if(T){const k=g.getUint16(W+48,!0);(k&32768)===0?(_=(k&31)/31,b=(k>>5&31)/31,x=(k>>10&31)/31):(_=S,b=C,x=N)}for(let k=1;k<=3;k++){const Z=W+k*12,ne=j*3*3+(k-1)*3;H[ne]=g.getFloat32(Z,!0),H[ne+1]=g.getFloat32(Z+4,!0),H[ne+2]=g.getFloat32(Z+8,!0),D[ne]=X,D[ne+1]=K,D[ne+2]=le,T&&(L.setRGB(_,b,x,Fa),w[ne]=L.r,w[ne+1]=L.g,w[ne+2]=L.b)}}return z.setAttribute("position",new ni(H,3)),z.setAttribute("normal",new ni(D,3)),T&&(z.setAttribute("color",new ni(w,3)),z.hasColors=!0,z.alpha=O),z}function s(p){const g=new mn,y=/solid([\s\S]*?)endsolid/g,_=/facet([\s\S]*?)endfacet/g,b=/solid\s(.+)/;let x=0;const T=/[\s]+([+-]?(?:\d*)(?:\.\d*)?(?:[eE][+-]?\d+)?)/.source,w=new RegExp("vertex"+T+T+T,"g"),S=new RegExp("normal"+T+T+T,"g"),C=[],N=[],O=[],P=new ee;let U,z=0,H=0,D=0;for(;(U=y.exec(p))!==null;){H=D;const L=U[0],j=(U=b.exec(L))!==null?U[1]:"";for(O.push(j);(U=_.exec(L))!==null;){let K=0,le=0;const k=U[0];for(;(U=S.exec(k))!==null;)P.x=parseFloat(U[1]),P.y=parseFloat(U[2]),P.z=parseFloat(U[3]),le++;for(;(U=w.exec(k))!==null;)C.push(parseFloat(U[1]),parseFloat(U[2]),parseFloat(U[3])),N.push(P.x,P.y,P.z),K++,D++;le!==1&&console.error("THREE.STLLoader: Something isn't right with the normal of face number "+x),K!==3&&console.error("THREE.STLLoader: Something isn't right with the vertices of face number "+x),x++}const W=H,X=D-H;g.userData.groupNames=O,g.addGroup(W,X,z),z++}return g.setAttribute("position",new Ft(C,3)),g.setAttribute("normal",new Ft(N,3)),g}function l(p){return typeof p!="string"?new TextDecoder().decode(p):p}function u(p){if(typeof p=="string"){const g=new Uint8Array(p.length);for(let y=0;y<p.length;y++)g[y]=p.charCodeAt(y)&255;return g.buffer||g}else return p}const d=u(e);return t(d)?a(d):s(l(e))}}function Co(){return Co=Object.assign?Object.assign.bind():function(i){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var n in t)({}).hasOwnProperty.call(t,n)&&(i[n]=t[n])}return i},Co.apply(null,arguments)}const ZO=parseInt(yp.replace(/\D+/g,""));var Gs=Uint8Array,gu=Uint16Array,xE=Uint32Array,KO=new Gs([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),JO=new Gs([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),JH=new Gs([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),QO=function(i,e){for(var t=new gu(31),n=0;n<31;++n)t[n]=e+=1<<i[n-1];for(var a=new xE(t[30]),n=1;n<30;++n)for(var s=t[n];s<t[n+1];++s)a[s]=s-t[n]<<5|n;return[t,a]},$O=QO(KO,2),eD=$O[0],QH=$O[1];eD[28]=258,QH[258]=28;var $H=QO(JO,0),eV=$H[0],SE=new gu(32768);for(var Si=0;Si<32768;++Si){var cu=(Si&43690)>>>1|(Si&21845)<<1;cu=(cu&52428)>>>2|(cu&13107)<<2,cu=(cu&61680)>>>4|(cu&3855)<<4,SE[Si]=((cu&65280)>>>8|(cu&255)<<8)>>>1}var Rg=(function(i,e,t){for(var n=i.length,a=0,s=new gu(e);a<n;++a)++s[i[a]-1];var l=new gu(e);for(a=0;a<e;++a)l[a]=l[a-1]+s[a-1]<<1;var u;if(t){u=new gu(1<<e);var d=15-e;for(a=0;a<n;++a)if(i[a])for(var p=a<<4|i[a],g=e-i[a],y=l[i[a]-1]++<<g,_=y|(1<<g)-1;y<=_;++y)u[SE[y]>>>d]=p}else for(u=new gu(n),a=0;a<n;++a)i[a]&&(u[a]=SE[l[i[a]-1]++]>>>15-i[a]);return u}),mv=new Gs(288);for(var Si=0;Si<144;++Si)mv[Si]=8;for(var Si=144;Si<256;++Si)mv[Si]=9;for(var Si=256;Si<280;++Si)mv[Si]=7;for(var Si=280;Si<288;++Si)mv[Si]=8;var tD=new Gs(32);for(var Si=0;Si<32;++Si)tD[Si]=5;var tV=Rg(mv,9,1),nV=Rg(tD,5,1),T1=function(i){for(var e=i[0],t=1;t<i.length;++t)i[t]>e&&(e=i[t]);return e},xo=function(i,e,t){var n=e/8|0;return(i[n]|i[n+1]<<8)>>(e&7)&t},A1=function(i,e){var t=e/8|0;return(i[t]|i[t+1]<<8|i[t+2]<<16)>>(e&7)},iV=function(i){return(i/8|0)+(i&7&&1)},aV=function(i,e,t){(t==null||t>i.length)&&(t=i.length);var n=new(i instanceof gu?gu:i instanceof xE?xE:Gs)(t-e);return n.set(i.subarray(e,t)),n},rV=function(i,e,t){var n=i.length;if(!n||t&&!t.l&&n<5)return e||new Gs(0);var a=!e||t,s=!t||t.i;t||(t={}),e||(e=new Gs(n*3));var l=function(ve){var Ce=e.length;if(ve>Ce){var Je=new Gs(Math.max(Ce*2,ve));Je.set(e),e=Je}},u=t.f||0,d=t.p||0,p=t.b||0,g=t.l,y=t.d,_=t.m,b=t.n,x=n*8;do{if(!g){t.f=u=xo(i,d,1);var T=xo(i,d+1,3);if(d+=3,T)if(T==1)g=tV,y=nV,_=9,b=5;else if(T==2){var N=xo(i,d,31)+257,O=xo(i,d+10,15)+4,P=N+xo(i,d+5,31)+1;d+=14;for(var U=new Gs(P),z=new Gs(19),H=0;H<O;++H)z[JH[H]]=xo(i,d+H*3,7);d+=O*3;for(var D=T1(z),L=(1<<D)-1,j=Rg(z,D,1),H=0;H<P;){var W=j[xo(i,d,L)];d+=W&15;var w=W>>>4;if(w<16)U[H++]=w;else{var X=0,K=0;for(w==16?(K=3+xo(i,d,3),d+=2,X=U[H-1]):w==17?(K=3+xo(i,d,7),d+=3):w==18&&(K=11+xo(i,d,127),d+=7);K--;)U[H++]=X}}var le=U.subarray(0,N),k=U.subarray(N);_=T1(le),b=T1(k),g=Rg(le,_,1),y=Rg(k,b,1)}else throw"invalid block type";else{var w=iV(d)+4,S=i[w-4]|i[w-3]<<8,C=w+S;if(C>n){if(s)throw"unexpected EOF";break}a&&l(p+S),e.set(i.subarray(w,C),p),t.b=p+=S,t.p=d=C*8;continue}if(d>x){if(s)throw"unexpected EOF";break}}a&&l(p+131072);for(var Z=(1<<_)-1,ne=(1<<b)-1,pe=d;;pe=d){var X=g[A1(i,d)&Z],ge=X>>>4;if(d+=X&15,d>x){if(s)throw"unexpected EOF";break}if(!X)throw"invalid length/literal";if(ge<256)e[p++]=ge;else if(ge==256){pe=d,g=null;break}else{var J=ge-254;if(ge>264){var H=ge-257,ce=KO[H];J=xo(i,d,(1<<ce)-1)+eD[H],d+=ce}var Se=y[A1(i,d)&ne],Le=Se>>>4;if(!Se)throw"invalid distance";d+=Se&15;var k=eV[Le];if(Le>3){var ce=JO[Le];k+=A1(i,d)&(1<<ce)-1,d+=ce}if(d>x){if(s)throw"unexpected EOF";break}a&&l(p+131072);for(var nt=p+J;p<nt;p+=4)e[p]=e[p-k],e[p+1]=e[p+1-k],e[p+2]=e[p+2-k],e[p+3]=e[p+3-k];p=nt}}t.l=g,t.p=pe,t.b=p,g&&(u=1,t.m=_,t.d=y,t.n=b)}while(!u);return p==e.length?e:aV(e,0,p)},sV=new Gs(0),oV=function(i){if((i[0]&15)!=8||i[0]>>>4>7||(i[0]<<8|i[1])%31)throw"invalid zlib data";if(i[1]&32)throw"invalid zlib data: preset dictionaries not supported"};function Fy(i,e){return rV((oV(i),i.subarray(2,-4)),e)}var lV=typeof TextDecoder<"u"&&new TextDecoder,cV=0;try{lV.decode(sV,{stream:!0}),cV=1}catch{}const uV=i=>i&&i.isCubeTexture;class hV extends Ui{constructor(e,t){var n,a;const s=uV(e),u=((a=s?(n=e.image[0])==null?void 0:n.width:e.image.width)!=null?a:1024)/4,d=Math.floor(Math.log2(u)),p=Math.pow(2,d),g=3*Math.max(p,112),y=4*p,_=[s?"#define ENVMAP_TYPE_CUBE":"",`#define CUBEUV_TEXEL_WIDTH ${1/g}`,`#define CUBEUV_TEXEL_HEIGHT ${1/y}`,`#define CUBEUV_MAX_MIP ${d}.0`],b=`
        varying vec3 vWorldPosition;
        void main() 
        {
            vec4 worldPosition = ( modelMatrix * vec4( position, 1.0 ) );
            vWorldPosition = worldPosition.xyz;
            
            gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
        }
        `,x=_.join(`
`)+`
        #define ENVMAP_TYPE_CUBE_UV
        varying vec3 vWorldPosition;
        uniform float radius;
        uniform float height;
        uniform float angle;
        #ifdef ENVMAP_TYPE_CUBE
            uniform samplerCube map;
        #else
            uniform sampler2D map;
        #endif
        // From: https://www.shadertoy.com/view/4tsBD7
        float diskIntersectWithBackFaceCulling( vec3 ro, vec3 rd, vec3 c, vec3 n, float r ) 
        {
            float d = dot ( rd, n );
            
            if( d > 0.0 ) { return 1e6; }
            
            vec3  o = ro - c;
            float t = - dot( n, o ) / d;
            vec3  q = o + rd * t;
            
            return ( dot( q, q ) < r * r ) ? t : 1e6;
        }
        // From: https://www.iquilezles.org/www/articles/intersectors/intersectors.htm
        float sphereIntersect( vec3 ro, vec3 rd, vec3 ce, float ra ) 
        {
            vec3 oc = ro - ce;
            float b = dot( oc, rd );
            float c = dot( oc, oc ) - ra * ra;
            float h = b * b - c;
            
            if( h < 0.0 ) { return -1.0; }
            
            h = sqrt( h );
            
            return - b + h;
        }
        vec3 project() 
        {
            vec3 p = normalize( vWorldPosition );
            vec3 camPos = cameraPosition;
            camPos.y -= height;
            float intersection = sphereIntersect( camPos, p, vec3( 0.0 ), radius );
            if( intersection > 0.0 ) {
                
                vec3 h = vec3( 0.0, - height, 0.0 );
                float intersection2 = diskIntersectWithBackFaceCulling( camPos, p, h, vec3( 0.0, 1.0, 0.0 ), radius );
                p = ( camPos + min( intersection, intersection2 ) * p ) / radius;
            } else {
                p = vec3( 0.0, 1.0, 0.0 );
            }
            return p;
        }
        #include <common>
        #include <cube_uv_reflection_fragment>
        void main() 
        {
            vec3 projectedWorldPosition = project();
            
            #ifdef ENVMAP_TYPE_CUBE
                vec3 outcolor = textureCube( map, projectedWorldPosition ).rgb;
            #else
                vec3 direction = normalize( projectedWorldPosition );
                vec2 uv = equirectUv( direction );
                vec3 outcolor = texture2D( map, uv ).rgb;
            #endif
            gl_FragColor = vec4( outcolor, 1.0 );
            #include <tonemapping_fragment>
            #include <${ZO>=154?"colorspace_fragment":"encodings_fragment"}>
        }
        `,T={map:{value:e},height:{value:(t==null?void 0:t.height)||15},radius:{value:(t==null?void 0:t.radius)||100}},w=new lv(1,16),S=new ja({uniforms:T,fragmentShader:x,vertexShader:b,side:To});super(w,S)}set radius(e){this.material.uniforms.radius.value=e}get radius(){return this.material.uniforms.radius.value}set height(e){this.material.uniforms.height.value=e}get height(){return this.material.uniforms.height.value}}var fV=Object.defineProperty,dV=(i,e,t)=>e in i?fV(i,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):i[e]=t,pV=(i,e,t)=>(dV(i,e+"",t),t);class mV{constructor(){pV(this,"_listeners")}addEventListener(e,t){this._listeners===void 0&&(this._listeners={});const n=this._listeners;n[e]===void 0&&(n[e]=[]),n[e].indexOf(t)===-1&&n[e].push(t)}hasEventListener(e,t){if(this._listeners===void 0)return!1;const n=this._listeners;return n[e]!==void 0&&n[e].indexOf(t)!==-1}removeEventListener(e,t){if(this._listeners===void 0)return;const a=this._listeners[e];if(a!==void 0){const s=a.indexOf(t);s!==-1&&a.splice(s,1)}}dispatchEvent(e){if(this._listeners===void 0)return;const n=this._listeners[e.type];if(n!==void 0){e.target=this;const a=n.slice(0);for(let s=0,l=a.length;s<l;s++)a[s].call(this,e);e.target=null}}}var gV=Object.defineProperty,vV=(i,e,t)=>e in i?gV(i,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):i[e]=t,rn=(i,e,t)=>(vV(i,typeof e!="symbol"?e+"":e,t),t);const ky=new rf,sR=new cc,yV=Math.cos(70*(Math.PI/180)),oR=(i,e)=>(i%e+e)%e;let _V=class extends mV{constructor(e,t){super(),rn(this,"object"),rn(this,"domElement"),rn(this,"enabled",!0),rn(this,"target",new ee),rn(this,"minDistance",0),rn(this,"maxDistance",1/0),rn(this,"minZoom",0),rn(this,"maxZoom",1/0),rn(this,"minPolarAngle",0),rn(this,"maxPolarAngle",Math.PI),rn(this,"minAzimuthAngle",-1/0),rn(this,"maxAzimuthAngle",1/0),rn(this,"enableDamping",!1),rn(this,"dampingFactor",.05),rn(this,"enableZoom",!0),rn(this,"zoomSpeed",1),rn(this,"enableRotate",!0),rn(this,"rotateSpeed",1),rn(this,"enablePan",!0),rn(this,"panSpeed",1),rn(this,"screenSpacePanning",!0),rn(this,"keyPanSpeed",7),rn(this,"zoomToCursor",!1),rn(this,"autoRotate",!1),rn(this,"autoRotateSpeed",2),rn(this,"reverseOrbit",!1),rn(this,"reverseHorizontalOrbit",!1),rn(this,"reverseVerticalOrbit",!1),rn(this,"keys",{LEFT:"ArrowLeft",UP:"ArrowUp",RIGHT:"ArrowRight",BOTTOM:"ArrowDown"}),rn(this,"mouseButtons",{LEFT:Uh.ROTATE,MIDDLE:Uh.DOLLY,RIGHT:Uh.PAN}),rn(this,"touches",{ONE:Lh.ROTATE,TWO:Lh.DOLLY_PAN}),rn(this,"target0"),rn(this,"position0"),rn(this,"zoom0"),rn(this,"_domElementKeyEvents",null),rn(this,"getPolarAngle"),rn(this,"getAzimuthalAngle"),rn(this,"setPolarAngle"),rn(this,"setAzimuthalAngle"),rn(this,"getDistance"),rn(this,"getZoomScale"),rn(this,"listenToKeyEvents"),rn(this,"stopListenToKeyEvents"),rn(this,"saveState"),rn(this,"reset"),rn(this,"update"),rn(this,"connect"),rn(this,"dispose"),rn(this,"dollyIn"),rn(this,"dollyOut"),rn(this,"getScale"),rn(this,"setScale"),this.object=e,this.domElement=t,this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.zoom0=this.object.zoom,this.getPolarAngle=()=>g.phi,this.getAzimuthalAngle=()=>g.theta,this.setPolarAngle=ae=>{let Ee=oR(ae,2*Math.PI),Qe=g.phi;Qe<0&&(Qe+=2*Math.PI),Ee<0&&(Ee+=2*Math.PI);let ue=Math.abs(Ee-Qe);2*Math.PI-ue<ue&&(Ee<Qe?Ee+=2*Math.PI:Qe+=2*Math.PI),y.phi=Ee-Qe,n.update()},this.setAzimuthalAngle=ae=>{let Ee=oR(ae,2*Math.PI),Qe=g.theta;Qe<0&&(Qe+=2*Math.PI),Ee<0&&(Ee+=2*Math.PI);let ue=Math.abs(Ee-Qe);2*Math.PI-ue<ue&&(Ee<Qe?Ee+=2*Math.PI:Qe+=2*Math.PI),y.theta=Ee-Qe,n.update()},this.getDistance=()=>n.object.position.distanceTo(n.target),this.listenToKeyEvents=ae=>{ae.addEventListener("keydown",Oe),this._domElementKeyEvents=ae},this.stopListenToKeyEvents=()=>{this._domElementKeyEvents.removeEventListener("keydown",Oe),this._domElementKeyEvents=null},this.saveState=()=>{n.target0.copy(n.target),n.position0.copy(n.object.position),n.zoom0=n.object.zoom},this.reset=()=>{n.target.copy(n.target0),n.object.position.copy(n.position0),n.object.zoom=n.zoom0,n.object.updateProjectionMatrix(),n.dispatchEvent(a),n.update(),d=u.NONE},this.update=(()=>{const ae=new ee,Ee=new ee(0,1,0),Qe=new wa().setFromUnitVectors(e.up,Ee),ue=Qe.clone().invert(),Ae=new ee,et=new wa,Mt=2*Math.PI;return function(){const Ye=n.object.position;Qe.setFromUnitVectors(e.up,Ee),ue.copy(Qe).invert(),ae.copy(Ye).sub(n.target),ae.applyQuaternion(Qe),g.setFromVector3(ae),n.autoRotate&&d===u.NONE&&K(W()),n.enableDamping?(g.theta+=y.theta*n.dampingFactor,g.phi+=y.phi*n.dampingFactor):(g.theta+=y.theta,g.phi+=y.phi);let lt=n.minAzimuthAngle,Gt=n.maxAzimuthAngle;isFinite(lt)&&isFinite(Gt)&&(lt<-Math.PI?lt+=Mt:lt>Math.PI&&(lt-=Mt),Gt<-Math.PI?Gt+=Mt:Gt>Math.PI&&(Gt-=Mt),lt<=Gt?g.theta=Math.max(lt,Math.min(Gt,g.theta)):g.theta=g.theta>(lt+Gt)/2?Math.max(lt,g.theta):Math.min(Gt,g.theta)),g.phi=Math.max(n.minPolarAngle,Math.min(n.maxPolarAngle,g.phi)),g.makeSafe(),n.enableDamping===!0?n.target.addScaledVector(b,n.dampingFactor):n.target.add(b),n.zoomToCursor&&D||n.object.isOrthographicCamera?g.radius=Se(g.radius):g.radius=Se(g.radius*_),ae.setFromSpherical(g),ae.applyQuaternion(ue),Ye.copy(n.target).add(ae),n.object.matrixAutoUpdate||n.object.updateMatrix(),n.object.lookAt(n.target),n.enableDamping===!0?(y.theta*=1-n.dampingFactor,y.phi*=1-n.dampingFactor,b.multiplyScalar(1-n.dampingFactor)):(y.set(0,0,0),b.set(0,0,0));let yn=!1;if(n.zoomToCursor&&D){let dn=null;if(n.object instanceof ra&&n.object.isPerspectiveCamera){const fi=ae.length();dn=Se(fi*_);const $i=fi-dn;n.object.position.addScaledVector(z,$i),n.object.updateMatrixWorld()}else if(n.object.isOrthographicCamera){const fi=new ee(H.x,H.y,0);fi.unproject(n.object),n.object.zoom=Math.max(n.minZoom,Math.min(n.maxZoom,n.object.zoom/_)),n.object.updateProjectionMatrix(),yn=!0;const $i=new ee(H.x,H.y,0);$i.unproject(n.object),n.object.position.sub($i).add(fi),n.object.updateMatrixWorld(),dn=ae.length()}else console.warn("WARNING: OrbitControls.js encountered an unknown camera type - zoom to cursor disabled."),n.zoomToCursor=!1;dn!==null&&(n.screenSpacePanning?n.target.set(0,0,-1).transformDirection(n.object.matrix).multiplyScalar(dn).add(n.object.position):(ky.origin.copy(n.object.position),ky.direction.set(0,0,-1).transformDirection(n.object.matrix),Math.abs(n.object.up.dot(ky.direction))<yV?e.lookAt(n.target):(sR.setFromNormalAndCoplanarPoint(n.object.up,n.target),ky.intersectPlane(sR,n.target))))}else n.object instanceof bl&&n.object.isOrthographicCamera&&(yn=_!==1,yn&&(n.object.zoom=Math.max(n.minZoom,Math.min(n.maxZoom,n.object.zoom/_)),n.object.updateProjectionMatrix()));return _=1,D=!1,yn||Ae.distanceToSquared(n.object.position)>p||8*(1-et.dot(n.object.quaternion))>p?(n.dispatchEvent(a),Ae.copy(n.object.position),et.copy(n.object.quaternion),yn=!1,!0):!1}})(),this.connect=ae=>{n.domElement=ae,n.domElement.style.touchAction="none",n.domElement.addEventListener("contextmenu",Nt),n.domElement.addEventListener("pointerdown",gt),n.domElement.addEventListener("pointercancel",B),n.domElement.addEventListener("wheel",ke)},this.dispose=()=>{var ae,Ee,Qe,ue,Ae,et;n.domElement&&(n.domElement.style.touchAction="auto"),(ae=n.domElement)==null||ae.removeEventListener("contextmenu",Nt),(Ee=n.domElement)==null||Ee.removeEventListener("pointerdown",gt),(Qe=n.domElement)==null||Qe.removeEventListener("pointercancel",B),(ue=n.domElement)==null||ue.removeEventListener("wheel",ke),(Ae=n.domElement)==null||Ae.ownerDocument.removeEventListener("pointermove",te),(et=n.domElement)==null||et.ownerDocument.removeEventListener("pointerup",B),n._domElementKeyEvents!==null&&n._domElementKeyEvents.removeEventListener("keydown",Oe)};const n=this,a={type:"change"},s={type:"start"},l={type:"end"},u={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_PAN:4,TOUCH_DOLLY_PAN:5,TOUCH_DOLLY_ROTATE:6};let d=u.NONE;const p=1e-6,g=new hE,y=new hE;let _=1;const b=new ee,x=new Ke,T=new Ke,w=new Ke,S=new Ke,C=new Ke,N=new Ke,O=new Ke,P=new Ke,U=new Ke,z=new ee,H=new Ke;let D=!1;const L=[],j={};function W(){return 2*Math.PI/60/60*n.autoRotateSpeed}function X(){return Math.pow(.95,n.zoomSpeed)}function K(ae){n.reverseOrbit||n.reverseHorizontalOrbit?y.theta+=ae:y.theta-=ae}function le(ae){n.reverseOrbit||n.reverseVerticalOrbit?y.phi+=ae:y.phi-=ae}const k=(()=>{const ae=new ee;return function(Qe,ue){ae.setFromMatrixColumn(ue,0),ae.multiplyScalar(-Qe),b.add(ae)}})(),Z=(()=>{const ae=new ee;return function(Qe,ue){n.screenSpacePanning===!0?ae.setFromMatrixColumn(ue,1):(ae.setFromMatrixColumn(ue,0),ae.crossVectors(n.object.up,ae)),ae.multiplyScalar(Qe),b.add(ae)}})(),ne=(()=>{const ae=new ee;return function(Qe,ue){const Ae=n.domElement;if(Ae&&n.object instanceof ra&&n.object.isPerspectiveCamera){const et=n.object.position;ae.copy(et).sub(n.target);let Mt=ae.length();Mt*=Math.tan(n.object.fov/2*Math.PI/180),k(2*Qe*Mt/Ae.clientHeight,n.object.matrix),Z(2*ue*Mt/Ae.clientHeight,n.object.matrix)}else Ae&&n.object instanceof bl&&n.object.isOrthographicCamera?(k(Qe*(n.object.right-n.object.left)/n.object.zoom/Ae.clientWidth,n.object.matrix),Z(ue*(n.object.top-n.object.bottom)/n.object.zoom/Ae.clientHeight,n.object.matrix)):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled."),n.enablePan=!1)}})();function pe(ae){n.object instanceof ra&&n.object.isPerspectiveCamera||n.object instanceof bl&&n.object.isOrthographicCamera?_=ae:(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),n.enableZoom=!1)}function ge(ae){pe(_/ae)}function J(ae){pe(_*ae)}function ce(ae){if(!n.zoomToCursor||!n.domElement)return;D=!0;const Ee=n.domElement.getBoundingClientRect(),Qe=ae.clientX-Ee.left,ue=ae.clientY-Ee.top,Ae=Ee.width,et=Ee.height;H.x=Qe/Ae*2-1,H.y=-(ue/et)*2+1,z.set(H.x,H.y,1).unproject(n.object).sub(n.object.position).normalize()}function Se(ae){return Math.max(n.minDistance,Math.min(n.maxDistance,ae))}function Le(ae){x.set(ae.clientX,ae.clientY)}function nt(ae){ce(ae),O.set(ae.clientX,ae.clientY)}function ve(ae){S.set(ae.clientX,ae.clientY)}function Ce(ae){T.set(ae.clientX,ae.clientY),w.subVectors(T,x).multiplyScalar(n.rotateSpeed);const Ee=n.domElement;Ee&&(K(2*Math.PI*w.x/Ee.clientHeight),le(2*Math.PI*w.y/Ee.clientHeight)),x.copy(T),n.update()}function Je(ae){P.set(ae.clientX,ae.clientY),U.subVectors(P,O),U.y>0?ge(X()):U.y<0&&J(X()),O.copy(P),n.update()}function yt(ae){C.set(ae.clientX,ae.clientY),N.subVectors(C,S).multiplyScalar(n.panSpeed),ne(N.x,N.y),S.copy(C),n.update()}function St(ae){ce(ae),ae.deltaY<0?J(X()):ae.deltaY>0&&ge(X()),n.update()}function $t(ae){let Ee=!1;switch(ae.code){case n.keys.UP:ne(0,n.keyPanSpeed),Ee=!0;break;case n.keys.BOTTOM:ne(0,-n.keyPanSpeed),Ee=!0;break;case n.keys.LEFT:ne(n.keyPanSpeed,0),Ee=!0;break;case n.keys.RIGHT:ne(-n.keyPanSpeed,0),Ee=!0;break}Ee&&(ae.preventDefault(),n.update())}function nn(){if(L.length==1)x.set(L[0].pageX,L[0].pageY);else{const ae=.5*(L[0].pageX+L[1].pageX),Ee=.5*(L[0].pageY+L[1].pageY);x.set(ae,Ee)}}function Vt(){if(L.length==1)S.set(L[0].pageX,L[0].pageY);else{const ae=.5*(L[0].pageX+L[1].pageX),Ee=.5*(L[0].pageY+L[1].pageY);S.set(ae,Ee)}}function xe(){const ae=L[0].pageX-L[1].pageX,Ee=L[0].pageY-L[1].pageY,Qe=Math.sqrt(ae*ae+Ee*Ee);O.set(0,Qe)}function ze(){n.enableZoom&&xe(),n.enablePan&&Vt()}function je(){n.enableZoom&&xe(),n.enableRotate&&nn()}function ot(ae){if(L.length==1)T.set(ae.pageX,ae.pageY);else{const Qe=Et(ae),ue=.5*(ae.pageX+Qe.x),Ae=.5*(ae.pageY+Qe.y);T.set(ue,Ae)}w.subVectors(T,x).multiplyScalar(n.rotateSpeed);const Ee=n.domElement;Ee&&(K(2*Math.PI*w.x/Ee.clientHeight),le(2*Math.PI*w.y/Ee.clientHeight)),x.copy(T)}function ie(ae){if(L.length==1)C.set(ae.pageX,ae.pageY);else{const Ee=Et(ae),Qe=.5*(ae.pageX+Ee.x),ue=.5*(ae.pageY+Ee.y);C.set(Qe,ue)}N.subVectors(C,S).multiplyScalar(n.panSpeed),ne(N.x,N.y),S.copy(C)}function zt(ae){const Ee=Et(ae),Qe=ae.pageX-Ee.x,ue=ae.pageY-Ee.y,Ae=Math.sqrt(Qe*Qe+ue*ue);P.set(0,Ae),U.set(0,Math.pow(P.y/O.y,n.zoomSpeed)),ge(U.y),O.copy(P)}function mt(ae){n.enableZoom&&zt(ae),n.enablePan&&ie(ae)}function Bt(ae){n.enableZoom&&zt(ae),n.enableRotate&&ot(ae)}function gt(ae){var Ee,Qe;n.enabled!==!1&&(L.length===0&&((Ee=n.domElement)==null||Ee.ownerDocument.addEventListener("pointermove",te),(Qe=n.domElement)==null||Qe.ownerDocument.addEventListener("pointerup",B)),jt(ae),ae.pointerType==="touch"?Tt(ae):se(ae))}function te(ae){n.enabled!==!1&&(ae.pointerType==="touch"?dt(ae):Re(ae))}function B(ae){var Ee,Qe,ue;Xe(ae),L.length===0&&((Ee=n.domElement)==null||Ee.releasePointerCapture(ae.pointerId),(Qe=n.domElement)==null||Qe.ownerDocument.removeEventListener("pointermove",te),(ue=n.domElement)==null||ue.ownerDocument.removeEventListener("pointerup",B)),n.dispatchEvent(l),d=u.NONE}function se(ae){let Ee;switch(ae.button){case 0:Ee=n.mouseButtons.LEFT;break;case 1:Ee=n.mouseButtons.MIDDLE;break;case 2:Ee=n.mouseButtons.RIGHT;break;default:Ee=-1}switch(Ee){case Uh.DOLLY:if(n.enableZoom===!1)return;nt(ae),d=u.DOLLY;break;case Uh.ROTATE:if(ae.ctrlKey||ae.metaKey||ae.shiftKey){if(n.enablePan===!1)return;ve(ae),d=u.PAN}else{if(n.enableRotate===!1)return;Le(ae),d=u.ROTATE}break;case Uh.PAN:if(ae.ctrlKey||ae.metaKey||ae.shiftKey){if(n.enableRotate===!1)return;Le(ae),d=u.ROTATE}else{if(n.enablePan===!1)return;ve(ae),d=u.PAN}break;default:d=u.NONE}d!==u.NONE&&n.dispatchEvent(s)}function Re(ae){if(n.enabled!==!1)switch(d){case u.ROTATE:if(n.enableRotate===!1)return;Ce(ae);break;case u.DOLLY:if(n.enableZoom===!1)return;Je(ae);break;case u.PAN:if(n.enablePan===!1)return;yt(ae);break}}function ke(ae){n.enabled===!1||n.enableZoom===!1||d!==u.NONE&&d!==u.ROTATE||(ae.preventDefault(),n.dispatchEvent(s),St(ae),n.dispatchEvent(l))}function Oe(ae){n.enabled===!1||n.enablePan===!1||$t(ae)}function Tt(ae){switch(qe(ae),L.length){case 1:switch(n.touches.ONE){case Lh.ROTATE:if(n.enableRotate===!1)return;nn(),d=u.TOUCH_ROTATE;break;case Lh.PAN:if(n.enablePan===!1)return;Vt(),d=u.TOUCH_PAN;break;default:d=u.NONE}break;case 2:switch(n.touches.TWO){case Lh.DOLLY_PAN:if(n.enableZoom===!1&&n.enablePan===!1)return;ze(),d=u.TOUCH_DOLLY_PAN;break;case Lh.DOLLY_ROTATE:if(n.enableZoom===!1&&n.enableRotate===!1)return;je(),d=u.TOUCH_DOLLY_ROTATE;break;default:d=u.NONE}break;default:d=u.NONE}d!==u.NONE&&n.dispatchEvent(s)}function dt(ae){switch(qe(ae),d){case u.TOUCH_ROTATE:if(n.enableRotate===!1)return;ot(ae),n.update();break;case u.TOUCH_PAN:if(n.enablePan===!1)return;ie(ae),n.update();break;case u.TOUCH_DOLLY_PAN:if(n.enableZoom===!1&&n.enablePan===!1)return;mt(ae),n.update();break;case u.TOUCH_DOLLY_ROTATE:if(n.enableZoom===!1&&n.enableRotate===!1)return;Bt(ae),n.update();break;default:d=u.NONE}}function Nt(ae){n.enabled!==!1&&ae.preventDefault()}function jt(ae){L.push(ae)}function Xe(ae){delete j[ae.pointerId];for(let Ee=0;Ee<L.length;Ee++)if(L[Ee].pointerId==ae.pointerId){L.splice(Ee,1);return}}function qe(ae){let Ee=j[ae.pointerId];Ee===void 0&&(Ee=new Ke,j[ae.pointerId]=Ee),Ee.set(ae.pageX,ae.pageY)}function Et(ae){const Ee=ae.pointerId===L[0].pointerId?L[1]:L[0];return j[Ee.pointerId]}this.dollyIn=(ae=X())=>{J(ae),n.update()},this.dollyOut=(ae=X())=>{ge(ae),n.update()},this.getScale=()=>_,this.setScale=ae=>{pe(ae),n.update()},this.getZoomScale=()=>X(),t!==void 0&&this.connect(t),this.update()}};const bV={uniforms:{tDiffuse:{value:null},h:{value:1/512}},vertexShader:`
      varying vec2 vUv;

      void main() {

        vUv = uv;
        gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );

      }
  `,fragmentShader:`
    uniform sampler2D tDiffuse;
    uniform float h;

    varying vec2 vUv;

    void main() {

    	vec4 sum = vec4( 0.0 );

    	sum += texture2D( tDiffuse, vec2( vUv.x - 4.0 * h, vUv.y ) ) * 0.051;
    	sum += texture2D( tDiffuse, vec2( vUv.x - 3.0 * h, vUv.y ) ) * 0.0918;
    	sum += texture2D( tDiffuse, vec2( vUv.x - 2.0 * h, vUv.y ) ) * 0.12245;
    	sum += texture2D( tDiffuse, vec2( vUv.x - 1.0 * h, vUv.y ) ) * 0.1531;
    	sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y ) ) * 0.1633;
    	sum += texture2D( tDiffuse, vec2( vUv.x + 1.0 * h, vUv.y ) ) * 0.1531;
    	sum += texture2D( tDiffuse, vec2( vUv.x + 2.0 * h, vUv.y ) ) * 0.12245;
    	sum += texture2D( tDiffuse, vec2( vUv.x + 3.0 * h, vUv.y ) ) * 0.0918;
    	sum += texture2D( tDiffuse, vec2( vUv.x + 4.0 * h, vUv.y ) ) * 0.051;

    	gl_FragColor = sum;

    }
  `},xV={uniforms:{tDiffuse:{value:null},v:{value:1/512}},vertexShader:`
    varying vec2 vUv;

    void main() {

      vUv = uv;
      gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );

    }
  `,fragmentShader:`

  uniform sampler2D tDiffuse;
  uniform float v;

  varying vec2 vUv;

  void main() {

    vec4 sum = vec4( 0.0 );

    sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y - 4.0 * v ) ) * 0.051;
    sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y - 3.0 * v ) ) * 0.0918;
    sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y - 2.0 * v ) ) * 0.12245;
    sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y - 1.0 * v ) ) * 0.1531;
    sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y ) ) * 0.1633;
    sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y + 1.0 * v ) ) * 0.1531;
    sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y + 2.0 * v ) ) * 0.12245;
    sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y + 3.0 * v ) ) * 0.0918;
    sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y + 4.0 * v ) ) * 0.051;

    gl_FragColor = sum;

  }
  `};class SV extends gM{constructor(e){super(e),this.type=ji}parse(e){const l=function(H,D){switch(H){case 1:throw new Error("THREE.RGBELoader: Read Error: "+(D||""));case 2:throw new Error("THREE.RGBELoader: Write Error: "+(D||""));case 3:throw new Error("THREE.RGBELoader: Bad File Format: "+(D||""));default:case 4:throw new Error("THREE.RGBELoader: Memory Error: "+(D||""))}},y=function(H,D,L){D=D||1024;let W=H.pos,X=-1,K=0,le="",k=String.fromCharCode.apply(null,new Uint16Array(H.subarray(W,W+128)));for(;0>(X=k.indexOf(`
`))&&K<D&&W<H.byteLength;)le+=k,K+=k.length,W+=128,k+=String.fromCharCode.apply(null,new Uint16Array(H.subarray(W,W+128)));return-1<X?(H.pos+=K+X+1,le+k.slice(0,X)):!1},_=function(H){const D=/^#\?(\S+)/,L=/^\s*GAMMA\s*=\s*(\d+(\.\d+)?)\s*$/,j=/^\s*EXPOSURE\s*=\s*(\d+(\.\d+)?)\s*$/,W=/^\s*FORMAT=(\S+)\s*$/,X=/^\s*\-Y\s+(\d+)\s+\+X\s+(\d+)\s*$/,K={valid:0,string:"",comments:"",programtype:"RGBE",format:"",gamma:1,exposure:1,width:0,height:0};let le,k;for((H.pos>=H.byteLength||!(le=y(H)))&&l(1,"no header found"),(k=le.match(D))||l(3,"bad initial token"),K.valid|=1,K.programtype=k[1],K.string+=le+`
`;le=y(H),le!==!1;){if(K.string+=le+`
`,le.charAt(0)==="#"){K.comments+=le+`
`;continue}if((k=le.match(L))&&(K.gamma=parseFloat(k[1])),(k=le.match(j))&&(K.exposure=parseFloat(k[1])),(k=le.match(W))&&(K.valid|=2,K.format=k[1]),(k=le.match(X))&&(K.valid|=4,K.height=parseInt(k[1],10),K.width=parseInt(k[2],10)),K.valid&2&&K.valid&4)break}return K.valid&2||l(3,"missing format specifier"),K.valid&4||l(3,"missing image size specifier"),K},b=function(H,D,L){const j=D;if(j<8||j>32767||H[0]!==2||H[1]!==2||H[2]&128)return new Uint8Array(H);j!==(H[2]<<8|H[3])&&l(3,"wrong scanline width");const W=new Uint8Array(4*D*L);W.length||l(4,"unable to allocate buffer space");let X=0,K=0;const le=4*j,k=new Uint8Array(4),Z=new Uint8Array(le);let ne=L;for(;ne>0&&K<H.byteLength;){K+4>H.byteLength&&l(1),k[0]=H[K++],k[1]=H[K++],k[2]=H[K++],k[3]=H[K++],(k[0]!=2||k[1]!=2||(k[2]<<8|k[3])!=j)&&l(3,"bad rgbe scanline format");let pe=0,ge;for(;pe<le&&K<H.byteLength;){ge=H[K++];const ce=ge>128;if(ce&&(ge-=128),(ge===0||pe+ge>le)&&l(3,"bad scanline data"),ce){const Se=H[K++];for(let Le=0;Le<ge;Le++)Z[pe++]=Se}else Z.set(H.subarray(K,K+ge),pe),pe+=ge,K+=ge}const J=j;for(let ce=0;ce<J;ce++){let Se=0;W[X]=Z[ce+Se],Se+=j,W[X+1]=Z[ce+Se],Se+=j,W[X+2]=Z[ce+Se],Se+=j,W[X+3]=Z[ce+Se],X+=4}ne--}return W},x=function(H,D,L,j){const W=H[D+3],X=Math.pow(2,W-128)/255;L[j+0]=H[D+0]*X,L[j+1]=H[D+1]*X,L[j+2]=H[D+2]*X,L[j+3]=1},T=function(H,D,L,j){const W=H[D+3],X=Math.pow(2,W-128)/255;L[j+0]=Gh.toHalfFloat(Math.min(H[D+0]*X,65504)),L[j+1]=Gh.toHalfFloat(Math.min(H[D+1]*X,65504)),L[j+2]=Gh.toHalfFloat(Math.min(H[D+2]*X,65504)),L[j+3]=Gh.toHalfFloat(1)},w=new Uint8Array(e);w.pos=0;const S=_(w),C=S.width,N=S.height,O=b(w.subarray(w.pos),C,N);let P,U,z;switch(this.type){case Di:z=O.length/4;const H=new Float32Array(z*4);for(let L=0;L<z;L++)x(O,L*4,H,L*4);P=H,U=Di;break;case ji:z=O.length/4;const D=new Uint16Array(z*4);for(let L=0;L<z;L++)T(O,L*4,D,L*4);P=D,U=ji;break;default:throw new Error("THREE.RGBELoader: Unsupported type: "+this.type)}return{width:C,height:N,data:P,header:S.string,gamma:S.gamma,exposure:S.exposure,type:U}}setDataType(e){return this.type=e,this}load(e,t,n,a){function s(l,u){switch(l.type){case Di:case ji:"colorSpace"in l?l.colorSpace="srgb-linear":l.encoding=3e3,l.minFilter=Vn,l.magFilter=Vn,l.generateMipmaps=!1,l.flipY=!0;break}t&&t(l,u)}return super.load(e,s,n,a)}}const ug=ZO>=152;class EV extends gM{constructor(e){super(e),this.type=ji}parse(e){const D=Math.pow(2.7182818,2.2);function L(V,$){for(var de=0,Ue=0;Ue<65536;++Ue)(Ue==0||V[Ue>>3]&1<<(Ue&7))&&($[de++]=Ue);for(var Ve=de-1;de<65536;)$[de++]=0;return Ve}function j(V){for(var $=0;$<16384;$++)V[$]={},V[$].len=0,V[$].lit=0,V[$].p=null}const W={l:0,c:0,lc:0};function X(V,$,de,Ue,Ve){for(;de<V;)$=$<<8|Et(Ue,Ve),de+=8;de-=V,W.l=$>>de&(1<<V)-1,W.c=$,W.lc=de}const K=new Array(59);function le(V){for(var $=0;$<=58;++$)K[$]=0;for(var $=0;$<65537;++$)K[V[$]]+=1;for(var de=0,$=58;$>0;--$){var Ue=de+K[$]>>1;K[$]=de,de=Ue}for(var $=0;$<65537;++$){var Ve=V[$];Ve>0&&(V[$]=Ve|K[Ve]++<<6)}}function k(V,$,de,Ue,Ve,He,ct){for(var rt=de,st=0,tt=0;Ve<=He;Ve++){if(rt.value-de.value>Ue)return!1;X(6,st,tt,V,rt);var vt=W.l;if(st=W.c,tt=W.lc,ct[Ve]=vt,vt==63){if(rt.value-de.value>Ue)throw"Something wrong with hufUnpackEncTable";X(8,st,tt,V,rt);var pt=W.l+6;if(st=W.c,tt=W.lc,Ve+pt>He+1)throw"Something wrong with hufUnpackEncTable";for(;pt--;)ct[Ve++]=0;Ve--}else if(vt>=59){var pt=vt-59+2;if(Ve+pt>He+1)throw"Something wrong with hufUnpackEncTable";for(;pt--;)ct[Ve++]=0;Ve--}}le(ct)}function Z(V){return V&63}function ne(V){return V>>6}function pe(V,$,de,Ue){for(;$<=de;$++){var Ve=ne(V[$]),He=Z(V[$]);if(Ve>>He)throw"Invalid table entry";if(He>14){var ct=Ue[Ve>>He-14];if(ct.len)throw"Invalid table entry";if(ct.lit++,ct.p){var rt=ct.p;ct.p=new Array(ct.lit);for(var st=0;st<ct.lit-1;++st)ct.p[st]=rt[st]}else ct.p=new Array(1);ct.p[ct.lit-1]=$}else if(He)for(var tt=0,st=1<<14-He;st>0;st--){var ct=Ue[(Ve<<14-He)+tt];if(ct.len||ct.p)throw"Invalid table entry";ct.len=He,ct.lit=$,tt++}}return!0}const ge={c:0,lc:0};function J(V,$,de,Ue){V=V<<8|Et(de,Ue),$+=8,ge.c=V,ge.lc=$}const ce={c:0,lc:0};function Se(V,$,de,Ue,Ve,He,ct,rt,st,tt){if(V==$){Ue<8&&(J(de,Ue,Ve,ct),de=ge.c,Ue=ge.lc),Ue-=8;var vt=de>>Ue,vt=new Uint8Array([vt])[0];if(st.value+vt>tt)return!1;for(var pt=rt[st.value-1];vt-- >0;)rt[st.value++]=pt}else if(st.value<tt)rt[st.value++]=V;else return!1;ce.c=de,ce.lc=Ue}function Le(V){return V&65535}function nt(V){var $=Le(V);return $>32767?$-65536:$}const ve={a:0,b:0};function Ce(V,$){var de=nt(V),Ue=nt($),Ve=Ue,He=de+(Ve&1)+(Ve>>1),ct=He,rt=He-Ve;ve.a=ct,ve.b=rt}function Je(V,$){var de=Le(V),Ue=Le($),Ve=de-(Ue>>1)&65535,He=Ue+Ve-32768&65535;ve.a=He,ve.b=Ve}function yt(V,$,de,Ue,Ve,He,ct){for(var rt=ct<16384,st=de>Ve?Ve:de,tt=1,vt;tt<=st;)tt<<=1;for(tt>>=1,vt=tt,tt>>=1;tt>=1;){for(var pt=0,G=pt+He*(Ve-vt),oe=He*tt,ye=He*vt,be=Ue*tt,me=Ue*vt,at,ut,ht,wt;pt<=G;pt+=ye){for(var _t=pt,kt=pt+Ue*(de-vt);_t<=kt;_t+=me){var bt=_t+be,Lt=_t+oe,_n=Lt+be;rt?(Ce(V[_t+$],V[Lt+$]),at=ve.a,ht=ve.b,Ce(V[bt+$],V[_n+$]),ut=ve.a,wt=ve.b,Ce(at,ut),V[_t+$]=ve.a,V[bt+$]=ve.b,Ce(ht,wt),V[Lt+$]=ve.a,V[_n+$]=ve.b):(Je(V[_t+$],V[Lt+$]),at=ve.a,ht=ve.b,Je(V[bt+$],V[_n+$]),ut=ve.a,wt=ve.b,Je(at,ut),V[_t+$]=ve.a,V[bt+$]=ve.b,Je(ht,wt),V[Lt+$]=ve.a,V[_n+$]=ve.b)}if(de&tt){var Lt=_t+oe;rt?Ce(V[_t+$],V[Lt+$]):Je(V[_t+$],V[Lt+$]),at=ve.a,V[Lt+$]=ve.b,V[_t+$]=at}}if(Ve&tt)for(var _t=pt,kt=pt+Ue*(de-vt);_t<=kt;_t+=me){var bt=_t+be;rt?Ce(V[_t+$],V[bt+$]):Je(V[_t+$],V[bt+$]),at=ve.a,V[bt+$]=ve.b,V[_t+$]=at}vt=tt,tt>>=1}return pt}function St(V,$,de,Ue,Ve,He,ct,rt,st,tt){for(var vt=0,pt=0,G=rt,oe=Math.trunc(Ve.value+(He+7)/8);Ve.value<oe;)for(J(vt,pt,de,Ve),vt=ge.c,pt=ge.lc;pt>=14;){var ye=vt>>pt-14&16383,be=$[ye];if(be.len)pt-=be.len,Se(be.lit,ct,vt,pt,de,Ue,Ve,st,tt,G),vt=ce.c,pt=ce.lc;else{if(!be.p)throw"hufDecode issues";var me;for(me=0;me<be.lit;me++){for(var at=Z(V[be.p[me]]);pt<at&&Ve.value<oe;)J(vt,pt,de,Ve),vt=ge.c,pt=ge.lc;if(pt>=at&&ne(V[be.p[me]])==(vt>>pt-at&(1<<at)-1)){pt-=at,Se(be.p[me],ct,vt,pt,de,Ue,Ve,st,tt,G),vt=ce.c,pt=ce.lc;break}}if(me==be.lit)throw"hufDecode issues"}}var ut=8-He&7;for(vt>>=ut,pt-=ut;pt>0;){var be=$[vt<<14-pt&16383];if(be.len)pt-=be.len,Se(be.lit,ct,vt,pt,de,Ue,Ve,st,tt,G),vt=ce.c,pt=ce.lc;else throw"hufDecode issues"}return!0}function $t(V,$,de,Ue,Ve,He){var ct={value:0},rt=de.value,st=qe($,de),tt=qe($,de);de.value+=4;var vt=qe($,de);if(de.value+=4,st<0||st>=65537||tt<0||tt>=65537)throw"Something wrong with HUF_ENCSIZE";var pt=new Array(65537),G=new Array(16384);j(G);var oe=Ue-(de.value-rt);if(k(V,$,de,oe,st,tt,pt),vt>8*(Ue-(de.value-rt)))throw"Something wrong with hufUncompress";pe(pt,st,tt,G),St(pt,G,V,$,de,vt,tt,He,Ve,ct)}function nn(V,$,de){for(var Ue=0;Ue<de;++Ue)$[Ue]=V[$[Ue]]}function Vt(V){for(var $=1;$<V.length;$++){var de=V[$-1]+V[$]-128;V[$]=de}}function xe(V,$){for(var de=0,Ue=Math.floor((V.length+1)/2),Ve=0,He=V.length-1;!(Ve>He||($[Ve++]=V[de++],Ve>He));)$[Ve++]=V[Ue++]}function ze(V){for(var $=V.byteLength,de=new Array,Ue=0,Ve=new DataView(V);$>0;){var He=Ve.getInt8(Ue++);if(He<0){var ct=-He;$-=ct+1;for(var rt=0;rt<ct;rt++)de.push(Ve.getUint8(Ue++))}else{var ct=He;$-=2;for(var st=Ve.getUint8(Ue++),rt=0;rt<ct+1;rt++)de.push(st)}}return de}function je(V,$,de,Ue,Ve,He){var bt=new DataView(He.buffer),ct=de[V.idx[0]].width,rt=de[V.idx[0]].height,st=3,tt=Math.floor(ct/8),vt=Math.ceil(ct/8),pt=Math.ceil(rt/8),G=ct-(vt-1)*8,oe=rt-(pt-1)*8,ye={value:0},be=new Array(st),me=new Array(st),at=new Array(st),ut=new Array(st),ht=new Array(st);for(let qt=0;qt<st;++qt)ht[qt]=$[V.idx[qt]],be[qt]=qt<1?0:be[qt-1]+vt*pt,me[qt]=new Float32Array(64),at[qt]=new Uint16Array(64),ut[qt]=new Uint16Array(vt*64);for(let qt=0;qt<pt;++qt){var wt=8;qt==pt-1&&(wt=oe);var _t=8;for(let Zt=0;Zt<vt;++Zt){Zt==vt-1&&(_t=G);for(let Ct=0;Ct<st;++Ct)at[Ct].fill(0),at[Ct][0]=Ve[be[Ct]++],ot(ye,Ue,at[Ct]),ie(at[Ct],me[Ct]),zt(me[Ct]);mt(me);for(let Ct=0;Ct<st;++Ct)Bt(me[Ct],ut[Ct],Zt*64)}let At=0;for(let Zt=0;Zt<st;++Zt){const Ct=de[V.idx[Zt]].type;for(let qn=8*qt;qn<8*qt+wt;++qn){At=ht[Zt][qn];for(let ca=0;ca<tt;++ca){const jn=ca*64+(qn&7)*8;bt.setUint16(At+0*Ct,ut[Zt][jn+0],!0),bt.setUint16(At+2*Ct,ut[Zt][jn+1],!0),bt.setUint16(At+4*Ct,ut[Zt][jn+2],!0),bt.setUint16(At+6*Ct,ut[Zt][jn+3],!0),bt.setUint16(At+8*Ct,ut[Zt][jn+4],!0),bt.setUint16(At+10*Ct,ut[Zt][jn+5],!0),bt.setUint16(At+12*Ct,ut[Zt][jn+6],!0),bt.setUint16(At+14*Ct,ut[Zt][jn+7],!0),At+=16*Ct}}if(tt!=vt)for(let qn=8*qt;qn<8*qt+wt;++qn){const ca=ht[Zt][qn]+8*tt*2*Ct,jn=tt*64+(qn&7)*8;for(let Li=0;Li<_t;++Li)bt.setUint16(ca+Li*2*Ct,ut[Zt][jn+Li],!0)}}}for(var kt=new Uint16Array(ct),bt=new DataView(He.buffer),Lt=0;Lt<st;++Lt){de[V.idx[Lt]].decoded=!0;var _n=de[V.idx[Lt]].type;if(de[Lt].type==2)for(var Gn=0;Gn<rt;++Gn){const qt=ht[Lt][Gn];for(var En=0;En<ct;++En)kt[En]=bt.getUint16(qt+En*2*_n,!0);for(var En=0;En<ct;++En)bt.setFloat32(qt+En*2*_n,Ae(kt[En]),!0)}}}function ot(V,$,de){for(var Ue,Ve=1;Ve<64;)Ue=$[V.value],Ue==65280?Ve=64:Ue>>8==255?Ve+=Ue&255:(de[Ve]=Ue,Ve++),V.value++}function ie(V,$){$[0]=Ae(V[0]),$[1]=Ae(V[1]),$[2]=Ae(V[5]),$[3]=Ae(V[6]),$[4]=Ae(V[14]),$[5]=Ae(V[15]),$[6]=Ae(V[27]),$[7]=Ae(V[28]),$[8]=Ae(V[2]),$[9]=Ae(V[4]),$[10]=Ae(V[7]),$[11]=Ae(V[13]),$[12]=Ae(V[16]),$[13]=Ae(V[26]),$[14]=Ae(V[29]),$[15]=Ae(V[42]),$[16]=Ae(V[3]),$[17]=Ae(V[8]),$[18]=Ae(V[12]),$[19]=Ae(V[17]),$[20]=Ae(V[25]),$[21]=Ae(V[30]),$[22]=Ae(V[41]),$[23]=Ae(V[43]),$[24]=Ae(V[9]),$[25]=Ae(V[11]),$[26]=Ae(V[18]),$[27]=Ae(V[24]),$[28]=Ae(V[31]),$[29]=Ae(V[40]),$[30]=Ae(V[44]),$[31]=Ae(V[53]),$[32]=Ae(V[10]),$[33]=Ae(V[19]),$[34]=Ae(V[23]),$[35]=Ae(V[32]),$[36]=Ae(V[39]),$[37]=Ae(V[45]),$[38]=Ae(V[52]),$[39]=Ae(V[54]),$[40]=Ae(V[20]),$[41]=Ae(V[22]),$[42]=Ae(V[33]),$[43]=Ae(V[38]),$[44]=Ae(V[46]),$[45]=Ae(V[51]),$[46]=Ae(V[55]),$[47]=Ae(V[60]),$[48]=Ae(V[21]),$[49]=Ae(V[34]),$[50]=Ae(V[37]),$[51]=Ae(V[47]),$[52]=Ae(V[50]),$[53]=Ae(V[56]),$[54]=Ae(V[59]),$[55]=Ae(V[61]),$[56]=Ae(V[35]),$[57]=Ae(V[36]),$[58]=Ae(V[48]),$[59]=Ae(V[49]),$[60]=Ae(V[57]),$[61]=Ae(V[58]),$[62]=Ae(V[62]),$[63]=Ae(V[63])}function zt(V){const $=.5*Math.cos(.7853975),de=.5*Math.cos(3.14159/16),Ue=.5*Math.cos(3.14159/8),Ve=.5*Math.cos(3*3.14159/16),He=.5*Math.cos(5*3.14159/16),ct=.5*Math.cos(3*3.14159/8),rt=.5*Math.cos(7*3.14159/16);for(var st=new Array(4),tt=new Array(4),vt=new Array(4),pt=new Array(4),G=0;G<8;++G){var oe=G*8;st[0]=Ue*V[oe+2],st[1]=ct*V[oe+2],st[2]=Ue*V[oe+6],st[3]=ct*V[oe+6],tt[0]=de*V[oe+1]+Ve*V[oe+3]+He*V[oe+5]+rt*V[oe+7],tt[1]=Ve*V[oe+1]-rt*V[oe+3]-de*V[oe+5]-He*V[oe+7],tt[2]=He*V[oe+1]-de*V[oe+3]+rt*V[oe+5]+Ve*V[oe+7],tt[3]=rt*V[oe+1]-He*V[oe+3]+Ve*V[oe+5]-de*V[oe+7],vt[0]=$*(V[oe+0]+V[oe+4]),vt[3]=$*(V[oe+0]-V[oe+4]),vt[1]=st[0]+st[3],vt[2]=st[1]-st[2],pt[0]=vt[0]+vt[1],pt[1]=vt[3]+vt[2],pt[2]=vt[3]-vt[2],pt[3]=vt[0]-vt[1],V[oe+0]=pt[0]+tt[0],V[oe+1]=pt[1]+tt[1],V[oe+2]=pt[2]+tt[2],V[oe+3]=pt[3]+tt[3],V[oe+4]=pt[3]-tt[3],V[oe+5]=pt[2]-tt[2],V[oe+6]=pt[1]-tt[1],V[oe+7]=pt[0]-tt[0]}for(var ye=0;ye<8;++ye)st[0]=Ue*V[16+ye],st[1]=ct*V[16+ye],st[2]=Ue*V[48+ye],st[3]=ct*V[48+ye],tt[0]=de*V[8+ye]+Ve*V[24+ye]+He*V[40+ye]+rt*V[56+ye],tt[1]=Ve*V[8+ye]-rt*V[24+ye]-de*V[40+ye]-He*V[56+ye],tt[2]=He*V[8+ye]-de*V[24+ye]+rt*V[40+ye]+Ve*V[56+ye],tt[3]=rt*V[8+ye]-He*V[24+ye]+Ve*V[40+ye]-de*V[56+ye],vt[0]=$*(V[ye]+V[32+ye]),vt[3]=$*(V[ye]-V[32+ye]),vt[1]=st[0]+st[3],vt[2]=st[1]-st[2],pt[0]=vt[0]+vt[1],pt[1]=vt[3]+vt[2],pt[2]=vt[3]-vt[2],pt[3]=vt[0]-vt[1],V[0+ye]=pt[0]+tt[0],V[8+ye]=pt[1]+tt[1],V[16+ye]=pt[2]+tt[2],V[24+ye]=pt[3]+tt[3],V[32+ye]=pt[3]-tt[3],V[40+ye]=pt[2]-tt[2],V[48+ye]=pt[1]-tt[1],V[56+ye]=pt[0]-tt[0]}function mt(V){for(var $=0;$<64;++$){var de=V[0][$],Ue=V[1][$],Ve=V[2][$];V[0][$]=de+1.5747*Ve,V[1][$]=de-.1873*Ue-.4682*Ve,V[2][$]=de+1.8556*Ue}}function Bt(V,$,de){for(var Ue=0;Ue<64;++Ue)$[de+Ue]=Gh.toHalfFloat(gt(V[Ue]))}function gt(V){return V<=1?Math.sign(V)*Math.pow(Math.abs(V),2.2):Math.sign(V)*Math.pow(D,Math.abs(V)-1)}function te(V){return new DataView(V.array.buffer,V.offset.value,V.size)}function B(V){var $=V.viewer.buffer.slice(V.offset.value,V.offset.value+V.size),de=new Uint8Array(ze($)),Ue=new Uint8Array(de.length);return Vt(de),xe(de,Ue),new DataView(Ue.buffer)}function se(V){var $=V.array.slice(V.offset.value,V.offset.value+V.size),de=Fy($),Ue=new Uint8Array(de.length);return Vt(de),xe(de,Ue),new DataView(Ue.buffer)}function Re(V){for(var $=V.viewer,de={value:V.offset.value},Ue=new Uint16Array(V.width*V.scanlineBlockSize*(V.channels*V.type)),Ve=new Uint8Array(8192),He=0,ct=new Array(V.channels),rt=0;rt<V.channels;rt++)ct[rt]={},ct[rt].start=He,ct[rt].end=ct[rt].start,ct[rt].nx=V.width,ct[rt].ny=V.lines,ct[rt].size=V.type,He+=ct[rt].nx*ct[rt].ny*ct[rt].size;var st=et($,de),tt=et($,de);if(tt>=8192)throw"Something is wrong with PIZ_COMPRESSION BITMAP_SIZE";if(st<=tt)for(var rt=0;rt<tt-st+1;rt++)Ve[rt+st]=ae($,de);var vt=new Uint16Array(65536),pt=L(Ve,vt),G=qe($,de);$t(V.array,$,de,G,Ue,He);for(var rt=0;rt<V.channels;++rt)for(var oe=ct[rt],ye=0;ye<ct[rt].size;++ye)yt(Ue,oe.start+ye,oe.nx,oe.size,oe.ny,oe.nx*oe.size,pt);nn(vt,Ue,He);for(var be=0,me=new Uint8Array(Ue.buffer.byteLength),at=0;at<V.lines;at++)for(var ut=0;ut<V.channels;ut++){var oe=ct[ut],ht=oe.nx*oe.size,wt=new Uint8Array(Ue.buffer,oe.end*2,ht*2);me.set(wt,be),be+=ht*2,oe.end+=ht}return new DataView(me.buffer)}function ke(V){var $=V.array.slice(V.offset.value,V.offset.value+V.size),de=Fy($);const Ue=V.lines*V.channels*V.width,Ve=V.type==1?new Uint16Array(Ue):new Uint32Array(Ue);let He=0,ct=0;const rt=new Array(4);for(let st=0;st<V.lines;st++)for(let tt=0;tt<V.channels;tt++){let vt=0;switch(V.type){case 1:rt[0]=He,rt[1]=rt[0]+V.width,He=rt[1]+V.width;for(let pt=0;pt<V.width;++pt){const G=de[rt[0]++]<<8|de[rt[1]++];vt+=G,Ve[ct]=vt,ct++}break;case 2:rt[0]=He,rt[1]=rt[0]+V.width,rt[2]=rt[1]+V.width,He=rt[2]+V.width;for(let pt=0;pt<V.width;++pt){const G=de[rt[0]++]<<24|de[rt[1]++]<<16|de[rt[2]++]<<8;vt+=G,Ve[ct]=vt,ct++}break}}return new DataView(Ve.buffer)}function Oe(V){var $=V.viewer,de={value:V.offset.value},Ue=new Uint8Array(V.width*V.lines*(V.channels*V.type*2)),Ve={version:Ee($,de),unknownUncompressedSize:Ee($,de),unknownCompressedSize:Ee($,de),acCompressedSize:Ee($,de),dcCompressedSize:Ee($,de),rleCompressedSize:Ee($,de),rleUncompressedSize:Ee($,de),rleRawSize:Ee($,de),totalAcUncompressedCount:Ee($,de),totalDcUncompressedCount:Ee($,de),acCompression:Ee($,de)};if(Ve.version<2)throw"EXRLoader.parse: "+oa.compression+" version "+Ve.version+" is unsupported";for(var He=new Array,ct=et($,de)-2;ct>0;){var rt=Tt($.buffer,de),st=ae($,de),tt=st>>2&3,vt=(st>>4)-1,pt=new Int8Array([vt])[0],G=ae($,de);He.push({name:rt,index:pt,type:G,compression:tt}),ct-=rt.length+3}for(var oe=oa.channels,ye=new Array(V.channels),be=0;be<V.channels;++be){var me=ye[be]={},at=oe[be];me.name=at.name,me.compression=0,me.decoded=!1,me.type=at.pixelType,me.pLinear=at.pLinear,me.width=V.width,me.height=V.lines}for(var ut={idx:new Array(3)},ht=0;ht<V.channels;++ht)for(var me=ye[ht],be=0;be<He.length;++be){var wt=He[be];me.name==wt.name&&(me.compression=wt.compression,wt.index>=0&&(ut.idx[wt.index]=ht),me.offset=ht)}if(Ve.acCompressedSize>0)switch(Ve.acCompression){case 0:var bt=new Uint16Array(Ve.totalAcUncompressedCount);$t(V.array,$,de,Ve.acCompressedSize,bt,Ve.totalAcUncompressedCount);break;case 1:var _t=V.array.slice(de.value,de.value+Ve.totalAcUncompressedCount),kt=Fy(_t),bt=new Uint16Array(kt.buffer);de.value+=Ve.totalAcUncompressedCount;break}if(Ve.dcCompressedSize>0){var Lt={array:V.array,offset:de,size:Ve.dcCompressedSize},_n=new Uint16Array(se(Lt).buffer);de.value+=Ve.dcCompressedSize}if(Ve.rleRawSize>0){var _t=V.array.slice(de.value,de.value+Ve.rleCompressedSize),kt=Fy(_t),Gn=ze(kt.buffer);de.value+=Ve.rleCompressedSize}for(var En=0,qt=new Array(ye.length),be=0;be<qt.length;++be)qt[be]=new Array;for(var At=0;At<V.lines;++At)for(var Zt=0;Zt<ye.length;++Zt)qt[Zt].push(En),En+=ye[Zt].width*V.type*2;je(ut,qt,ye,bt,_n,Ue);for(var be=0;be<ye.length;++be){var me=ye[be];if(!me.decoded)switch(me.compression){case 2:for(var Ct=0,qn=0,At=0;At<V.lines;++At){for(var ca=qt[be][Ct],jn=0;jn<me.width;++jn){for(var Li=0;Li<2*me.type;++Li)Ue[ca++]=Gn[qn+Li*me.width*me.height];qn++}Ct++}break;case 1:default:throw"EXRLoader.parse: unsupported channel compression"}}return new DataView(Ue.buffer)}function Tt(V,$){for(var de=new Uint8Array(V),Ue=0;de[$.value+Ue]!=0;)Ue+=1;var Ve=new TextDecoder().decode(de.slice($.value,$.value+Ue));return $.value=$.value+Ue+1,Ve}function dt(V,$,de){var Ue=new TextDecoder().decode(new Uint8Array(V).slice($.value,$.value+de));return $.value=$.value+de,Ue}function Nt(V,$){var de=Xe(V,$),Ue=qe(V,$);return[de,Ue]}function jt(V,$){var de=qe(V,$),Ue=qe(V,$);return[de,Ue]}function Xe(V,$){var de=V.getInt32($.value,!0);return $.value=$.value+4,de}function qe(V,$){var de=V.getUint32($.value,!0);return $.value=$.value+4,de}function Et(V,$){var de=V[$.value];return $.value=$.value+1,de}function ae(V,$){var de=V.getUint8($.value);return $.value=$.value+1,de}const Ee=function(V,$){let de;return"getBigInt64"in DataView.prototype?de=Number(V.getBigInt64($.value,!0)):de=V.getUint32($.value+4,!0)+Number(V.getUint32($.value,!0)<<32),$.value+=8,de};function Qe(V,$){var de=V.getFloat32($.value,!0);return $.value+=4,de}function ue(V,$){return Gh.toHalfFloat(Qe(V,$))}function Ae(V){var $=(V&31744)>>10,de=V&1023;return(V>>15?-1:1)*($?$===31?de?NaN:1/0:Math.pow(2,$-15)*(1+de/1024):6103515625e-14*(de/1024))}function et(V,$){var de=V.getUint16($.value,!0);return $.value+=2,de}function Mt(V,$){return Ae(et(V,$))}function it(V,$,de,Ue){for(var Ve=de.value,He=[];de.value<Ve+Ue-1;){var ct=Tt($,de),rt=Xe(V,de),st=ae(V,de);de.value+=3;var tt=Xe(V,de),vt=Xe(V,de);He.push({name:ct,pixelType:rt,pLinear:st,xSampling:tt,ySampling:vt})}return de.value+=1,He}function Ye(V,$){var de=Qe(V,$),Ue=Qe(V,$),Ve=Qe(V,$),He=Qe(V,$),ct=Qe(V,$),rt=Qe(V,$),st=Qe(V,$),tt=Qe(V,$);return{redX:de,redY:Ue,greenX:Ve,greenY:He,blueX:ct,blueY:rt,whiteX:st,whiteY:tt}}function lt(V,$){var de=["NO_COMPRESSION","RLE_COMPRESSION","ZIPS_COMPRESSION","ZIP_COMPRESSION","PIZ_COMPRESSION","PXR24_COMPRESSION","B44_COMPRESSION","B44A_COMPRESSION","DWAA_COMPRESSION","DWAB_COMPRESSION"],Ue=ae(V,$);return de[Ue]}function Gt(V,$){var de=qe(V,$),Ue=qe(V,$),Ve=qe(V,$),He=qe(V,$);return{xMin:de,yMin:Ue,xMax:Ve,yMax:He}}function yn(V,$){var de=["INCREASING_Y"],Ue=ae(V,$);return de[Ue]}function dn(V,$){var de=Qe(V,$),Ue=Qe(V,$);return[de,Ue]}function fi(V,$){var de=Qe(V,$),Ue=Qe(V,$),Ve=Qe(V,$);return[de,Ue,Ve]}function $i(V,$,de,Ue,Ve){if(Ue==="string"||Ue==="stringvector"||Ue==="iccProfile")return dt($,de,Ve);if(Ue==="chlist")return it(V,$,de,Ve);if(Ue==="chromaticities")return Ye(V,de);if(Ue==="compression")return lt(V,de);if(Ue==="box2i")return Gt(V,de);if(Ue==="lineOrder")return yn(V,de);if(Ue==="float")return Qe(V,de);if(Ue==="v2f")return dn(V,de);if(Ue==="v3f")return fi(V,de);if(Ue==="int")return Xe(V,de);if(Ue==="rational")return Nt(V,de);if(Ue==="timecode")return jt(V,de);if(Ue==="preview")return de.value+=Ve,"skipped";de.value+=Ve}function Ml(V,$,de){const Ue={};if(V.getUint32(0,!0)!=20000630)throw"THREE.EXRLoader: provided file doesn't appear to be in OpenEXR format.";Ue.version=V.getUint8(4);const Ve=V.getUint8(5);Ue.spec={singleTile:!!(Ve&2),longName:!!(Ve&4),deepFormat:!!(Ve&8),multiPart:!!(Ve&16)},de.value=8;for(var He=!0;He;){var ct=Tt($,de);if(ct==0)He=!1;else{var rt=Tt($,de),st=qe(V,de),tt=$i(V,$,de,rt,st);tt===void 0?console.warn(`EXRLoader.parse: skipped unknown header attribute type '${rt}'.`):Ue[ct]=tt}}if((Ve&-5)!=0)throw console.error("EXRHeader:",Ue),"THREE.EXRLoader: provided file is currently unsupported.";return Ue}function Ys(V,$,de,Ue,Ve){const He={size:0,viewer:$,array:de,offset:Ue,width:V.dataWindow.xMax-V.dataWindow.xMin+1,height:V.dataWindow.yMax-V.dataWindow.yMin+1,channels:V.channels.length,bytesPerLine:null,lines:null,inputSize:null,type:V.channels[0].pixelType,uncompress:null,getter:null,format:null,[ug?"colorSpace":"encoding"]:null};switch(V.compression){case"NO_COMPRESSION":He.lines=1,He.uncompress=te;break;case"RLE_COMPRESSION":He.lines=1,He.uncompress=B;break;case"ZIPS_COMPRESSION":He.lines=1,He.uncompress=se;break;case"ZIP_COMPRESSION":He.lines=16,He.uncompress=se;break;case"PIZ_COMPRESSION":He.lines=32,He.uncompress=Re;break;case"PXR24_COMPRESSION":He.lines=16,He.uncompress=ke;break;case"DWAA_COMPRESSION":He.lines=32,He.uncompress=Oe;break;case"DWAB_COMPRESSION":He.lines=256,He.uncompress=Oe;break;default:throw"EXRLoader.parse: "+V.compression+" is unsupported"}if(He.scanlineBlockSize=He.lines,He.type==1)switch(Ve){case Di:He.getter=Mt,He.inputSize=2;break;case ji:He.getter=et,He.inputSize=2;break}else if(He.type==2)switch(Ve){case Di:He.getter=Qe,He.inputSize=4;break;case ji:He.getter=ue,He.inputSize=4}else throw"EXRLoader.parse: unsupported pixelType "+He.type+" for "+V.compression+".";He.blockCount=(V.dataWindow.yMax+1)/He.scanlineBlockSize;for(var ct=0;ct<He.blockCount;ct++)Ee($,Ue);He.outputChannels=He.channels==3?4:He.channels;const rt=He.width*He.height*He.outputChannels;switch(Ve){case Di:He.byteArray=new Float32Array(rt),He.channels<He.outputChannels&&He.byteArray.fill(1,0,rt);break;case ji:He.byteArray=new Uint16Array(rt),He.channels<He.outputChannels&&He.byteArray.fill(15360,0,rt);break;default:console.error("THREE.EXRLoader: unsupported type: ",Ve);break}return He.bytesPerLine=He.width*He.inputSize*He.channels,He.outputChannels==4?He.format=sa:He.format=nv,ug?He.colorSpace="srgb-linear":He.encoding=3e3,He}const _r=new DataView(e),er=new Uint8Array(e),br={value:0},oa=Ml(_r,e,br),en=Ys(oa,_r,er,br,this.type),la={value:0},gn={R:0,G:1,B:2,A:3,Y:0};for(let V=0;V<en.height/en.scanlineBlockSize;V++){const $=qe(_r,br);en.size=qe(_r,br),en.lines=$+en.scanlineBlockSize>en.height?en.height-$:en.scanlineBlockSize;const Ue=en.size<en.lines*en.bytesPerLine?en.uncompress(en):te(en);br.value+=en.size;for(let Ve=0;Ve<en.scanlineBlockSize;Ve++){const He=Ve+V*en.scanlineBlockSize;if(He>=en.height)break;for(let ct=0;ct<en.channels;ct++){const rt=gn[oa.channels[ct].name];for(let st=0;st<en.width;st++){la.value=(Ve*(en.channels*en.width)+ct*en.width+st)*en.inputSize;const tt=(en.height-1-He)*(en.width*en.outputChannels)+st*en.outputChannels+rt;en.byteArray[tt]=en.getter(Ue,la)}}}}return{header:oa,width:en.width,height:en.height,data:en.byteArray,format:en.format,[ug?"colorSpace":"encoding"]:en[ug?"colorSpace":"encoding"],type:this.type}}setDataType(e){return this.type=e,this}load(e,t,n,a){function s(l,u){ug?l.colorSpace=u.colorSpace:l.encoding=u.encoding,l.minFilter=Vn,l.magFilter=Vn,l.generateMipmaps=!1,l.flipY=!1,t&&t(l,u)}return super.load(e,s,n,a)}}function nD(i,e,t,n){var a;return a=class extends ja{constructor(s){super({vertexShader:e,fragmentShader:t,...s});for(const l in i)this.uniforms[l]=new qb(i[l]),Object.defineProperty(this,l,{get(){return this.uniforms[l].value},set(u){this.uniforms[l].value=u}});this.uniforms=QE.clone(this.uniforms)}},a.key=wg.generateUUID(),a}const MV=()=>parseInt(yp.replace(/\D+/g,"")),iD=MV(),wV=re.forwardRef(({makeDefault:i,camera:e,regress:t,domElement:n,enableDamping:a=!0,keyEvents:s=!1,onChange:l,onStart:u,onEnd:d,...p},g)=>{const y=aa(U=>U.invalidate),_=aa(U=>U.camera),b=aa(U=>U.gl),x=aa(U=>U.events),T=aa(U=>U.setEvents),w=aa(U=>U.set),S=aa(U=>U.get),C=aa(U=>U.performance),N=e||_,O=n||x.connected||b.domElement,P=re.useMemo(()=>new _V(N),[N]);return pv(()=>{P.enabled&&P.update()},-1),re.useEffect(()=>(s&&P.connect(s===!0?O:s),P.connect(O),()=>void P.dispose()),[s,O,t,P,y]),re.useEffect(()=>{const U=D=>{y(),t&&C.regress(),l&&l(D)},z=D=>{u&&u(D)},H=D=>{d&&d(D)};return P.addEventListener("change",U),P.addEventListener("start",z),P.addEventListener("end",H),()=>{P.removeEventListener("start",z),P.removeEventListener("end",H),P.removeEventListener("change",U)}},[l,u,d,P,y,T]),re.useEffect(()=>{if(i){const U=S().controls;return w({controls:P}),()=>w({controls:U})}},[i,P]),re.createElement("primitive",Co({ref:g,object:P,enableDamping:a},p))}),TV=re.forwardRef(function({children:e,object:t,disable:n,disableX:a,disableY:s,disableZ:l,left:u,right:d,top:p,bottom:g,front:y,back:_,onCentered:b,precise:x=!0,cacheKey:T=0,...w},S){const C=re.useRef(null),N=re.useRef(null),O=re.useRef(null),[P]=re.useState(()=>new Ha),[U]=re.useState(()=>new ee),[z]=re.useState(()=>new Va);return re.useLayoutEffect(()=>{N.current.matrixWorld.identity(),P.setFromObject(t??O.current,x);const H=P.max.x-P.min.x,D=P.max.y-P.min.y,L=P.max.z-P.min.z;P.getCenter(U),P.getBoundingSphere(z);const j=p?D/2:g?-D/2:0,W=u?-H/2:d?H/2:0,X=y?L/2:_?-L/2:0;N.current.position.set(n||a?0:-U.x+W,n||s?0:-U.y+j,n||l?0:-U.z+X),b==null||b({parent:C.current.parent,container:C.current,width:H,height:D,depth:L,boundingBox:P,boundingSphere:z,center:U,verticalAlignment:j,horizontalAlignment:W,depthAlignment:X})},[T,b,p,u,y,n,a,s,l,t,x,d,g,_,P,U,z]),re.useImperativeHandle(S,()=>C.current,[]),re.createElement("group",Co({ref:C},w),re.createElement("group",{ref:N},re.createElement("group",{ref:O},e)))}),AV=nD({},"void main() { }","void main() { gl_FragColor = vec4(0.0, 0.0, 0.0, 0.0); discard;  }");var js=(function(i){return i[i.NONE=0]="NONE",i[i.START=1]="START",i[i.ACTIVE=2]="ACTIVE",i})(js||{});const jd=i=>i&&i.isOrthographicCamera,CV=i=>i&&i.isBox3,RV=i=>1-Math.exp(-5*i)+.007*i,aD=re.createContext(null);function NV({children:i,maxDuration:e=1,margin:t=1.2,observe:n,fit:a,clip:s,interpolateFunc:l=RV,onFit:u}){const d=re.useRef(null),{camera:p,size:g,invalidate:y}=aa(),_=aa(P=>P.controls),b=re.useRef(u);b.current=u;const x=re.useRef({camPos:new ee,camRot:new wa,camZoom:1}),T=re.useRef({camPos:void 0,camRot:void 0,camZoom:void 0,camUp:void 0,target:void 0}),w=re.useRef(js.NONE),S=re.useRef(0),[C]=re.useState(()=>new Ha),N=re.useMemo(()=>{function P(){const U=C.getSize(new ee),z=C.getCenter(new ee),H=Math.max(U.x,U.y,U.z),D=jd(p)?H*4:H/(2*Math.atan(Math.PI*p.fov/360)),L=jd(p)?H*4:D/p.aspect,j=t*Math.max(D,L);return{box:C,size:U,center:z,distance:j}}return{getSize:P,refresh(U){if(CV(U))C.copy(U);else{const z=U||d.current;if(!z)return this;z.updateWorldMatrix(!0,!0),C.setFromObject(z)}if(C.isEmpty()){const z=p.position.length()||10;C.setFromCenterAndSize(new ee,new ee(z,z,z))}return x.current.camPos.copy(p.position),x.current.camRot.copy(p.quaternion),jd(p)&&(x.current.camZoom=p.zoom),T.current.camPos=void 0,T.current.camRot=void 0,T.current.camZoom=void 0,T.current.camUp=void 0,T.current.target=void 0,this},reset(){const{center:U,distance:z}=P(),H=p.position.clone().sub(U).normalize();T.current.camPos=U.clone().addScaledVector(H,z),T.current.target=U.clone();const D=new on().lookAt(T.current.camPos,T.current.target,p.up);return T.current.camRot=new wa().setFromRotationMatrix(D),w.current=js.START,S.current=0,this},moveTo(U){return T.current.camPos=Array.isArray(U)?new ee(...U):U.clone(),w.current=js.START,S.current=0,this},lookAt({target:U,up:z}){T.current.target=Array.isArray(U)?new ee(...U):U.clone(),z?T.current.camUp=Array.isArray(z)?new ee(...z):z.clone():T.current.camUp=p.up.clone();const H=new on().lookAt(T.current.camPos||p.position,T.current.target,T.current.camUp);return T.current.camRot=new wa().setFromRotationMatrix(H),w.current=js.START,S.current=0,this},to({position:U,target:z}){return this.moveTo(U).lookAt({target:z})},fit(){if(!jd(p))return this.reset();let U=0,z=0;const H=[new ee(C.min.x,C.min.y,C.min.z),new ee(C.min.x,C.max.y,C.min.z),new ee(C.min.x,C.min.y,C.max.z),new ee(C.min.x,C.max.y,C.max.z),new ee(C.max.x,C.max.y,C.max.z),new ee(C.max.x,C.max.y,C.min.z),new ee(C.max.x,C.min.y,C.max.z),new ee(C.max.x,C.min.y,C.min.z)],D=T.current.camPos||p.position,L=T.current.target||(_==null?void 0:_.target),j=T.current.camUp||p.up,W=L?new on().lookAt(D,L,j).setPosition(D).invert():p.matrixWorldInverse;for(const le of H)le.applyMatrix4(W),U=Math.max(U,Math.abs(le.y)),z=Math.max(z,Math.abs(le.x));U*=2,z*=2;const X=(p.top-p.bottom)/U,K=(p.right-p.left)/z;return T.current.camZoom=Math.min(X,K)/t,w.current=js.START,S.current=0,b.current&&b.current(this.getSize()),this},clip(){const{distance:U}=P();return p.near=U/100,p.far=U*100,p.updateProjectionMatrix(),_&&(_.maxDistance=U*10,_.update()),y(),this}}},[C,p,_,t,y]);re.useLayoutEffect(()=>{if(_){const P=()=>{if(_&&T.current.target&&w.current!==js.NONE){const U=new ee().setFromMatrixColumn(p.matrix,2),z=x.current.camPos.distanceTo(_.target),H=(T.current.camPos||x.current.camPos).distanceTo(T.current.target),D=(1-S.current)*z+S.current*H;_.target.copy(p.position).addScaledVector(U,-D),_.update()}w.current=js.NONE};return _.addEventListener("start",P),()=>_.removeEventListener("start",P)}},[_]);const O=re.useRef(0);return re.useLayoutEffect(()=>{(n||O.current++===0)&&(N.refresh(),a&&N.reset().fit(),s&&N.clip())},[g,s,a,n,p,_]),pv((P,U)=>{if(w.current===js.START)w.current=js.ACTIVE,y();else if(w.current===js.ACTIVE){if(S.current+=U/e,S.current>=1)T.current.camPos&&p.position.copy(T.current.camPos),T.current.camRot&&p.quaternion.copy(T.current.camRot),T.current.camUp&&p.up.copy(T.current.camUp),T.current.camZoom&&jd(p)&&(p.zoom=T.current.camZoom),p.updateMatrixWorld(),p.updateProjectionMatrix(),_&&T.current.target&&(_.target.copy(T.current.target),_.update()),w.current=js.NONE;else{const z=l(S.current);T.current.camPos&&p.position.lerpVectors(x.current.camPos,T.current.camPos,z),T.current.camRot&&p.quaternion.slerpQuaternions(x.current.camRot,T.current.camRot,z),T.current.camUp&&p.up.set(0,1,0).applyQuaternion(p.quaternion),T.current.camZoom&&jd(p)&&(p.zoom=(1-z)*x.current.camZoom+z*T.current.camZoom),p.updateMatrixWorld(),p.updateProjectionMatrix()}y()}}),re.createElement("group",{ref:d},re.createElement(aD.Provider,{value:N},i))}function OV(){return re.useContext(aD)}const rD=(i,e,t)=>{let n;switch(i){case ka:n=new Uint8ClampedArray(e*t*4);break;case ji:n=new Uint16Array(e*t*4);break;case xs:n=new Uint32Array(e*t*4);break;case hb:n=new Int8Array(e*t*4);break;case fb:n=new Int16Array(e*t*4);break;case tv:n=new Int32Array(e*t*4);break;case Di:n=new Float32Array(e*t*4);break;default:throw new Error("Unsupported data type")}return n};let Hy;const DV=(i,e,t,n)=>{if(Hy!==void 0)return Hy;const a=new Ta(1,1,n);e.setRenderTarget(a);const s=new Ui(new gc,new mc({color:16777215}));e.render(s,t),e.setRenderTarget(null);const l=rD(i,a.width,a.height);return e.readRenderTargetPixels(a,0,0,a.width,a.height,l),a.dispose(),s.geometry.dispose(),s.material.dispose(),Hy=l[0]!==0,Hy};class UM{constructor(e){Ki(this,"_renderer");Ki(this,"_rendererIsDisposable",!1);Ki(this,"_material");Ki(this,"_scene");Ki(this,"_camera");Ki(this,"_quad");Ki(this,"_renderTarget");Ki(this,"_width");Ki(this,"_height");Ki(this,"_type");Ki(this,"_colorSpace");Ki(this,"_supportsReadPixels",!0);Ki(this,"render",()=>{this._renderer.setRenderTarget(this._renderTarget);try{this._renderer.render(this._scene,this._camera)}catch(e){throw this._renderer.setRenderTarget(null),e}this._renderer.setRenderTarget(null)});var n,a,s,l,u,d,p,g,y,_,b,x,T,w,S,C;this._width=e.width,this._height=e.height,this._type=e.type,this._colorSpace=e.colorSpace;const t={format:sa,depthBuffer:!1,stencilBuffer:!1,type:this._type,colorSpace:this._colorSpace,anisotropy:((n=e.renderTargetOptions)==null?void 0:n.anisotropy)!==void 0?(a=e.renderTargetOptions)==null?void 0:a.anisotropy:1,generateMipmaps:((s=e.renderTargetOptions)==null?void 0:s.generateMipmaps)!==void 0?(l=e.renderTargetOptions)==null?void 0:l.generateMipmaps:!1,magFilter:((u=e.renderTargetOptions)==null?void 0:u.magFilter)!==void 0?(d=e.renderTargetOptions)==null?void 0:d.magFilter:Vn,minFilter:((p=e.renderTargetOptions)==null?void 0:p.minFilter)!==void 0?(g=e.renderTargetOptions)==null?void 0:g.minFilter:Vn,samples:((y=e.renderTargetOptions)==null?void 0:y.samples)!==void 0?(_=e.renderTargetOptions)==null?void 0:_.samples:void 0,wrapS:((b=e.renderTargetOptions)==null?void 0:b.wrapS)!==void 0?(x=e.renderTargetOptions)==null?void 0:x.wrapS:Qi,wrapT:((T=e.renderTargetOptions)==null?void 0:T.wrapT)!==void 0?(w=e.renderTargetOptions)==null?void 0:w.wrapT:Qi};if(this._material=e.material,e.renderer?this._renderer=e.renderer:(this._renderer=UM.instantiateRenderer(),this._rendererIsDisposable=!0),this._scene=new rv,this._camera=new bl,this._camera.position.set(0,0,10),this._camera.left=-.5,this._camera.right=.5,this._camera.top=.5,this._camera.bottom=-.5,this._camera.updateProjectionMatrix(),!DV(this._type,this._renderer,this._camera,t)){let N;switch(this._type){case ji:N=this._renderer.extensions.has("EXT_color_buffer_float")?Di:void 0;break}N!==void 0?(console.warn(`This browser does not support reading pixels from ${this._type} RenderTargets, switching to ${Di}`),this._type=N):(this._supportsReadPixels=!1,console.warn("This browser dos not support toArray or toDataTexture, calls to those methods will result in an error thrown"))}this._quad=new Ui(new gc,this._material),this._quad.geometry.computeBoundingBox(),this._scene.add(this._quad),this._renderTarget=new Ta(this.width,this.height,t),this._renderTarget.texture.mapping=((S=e.renderTargetOptions)==null?void 0:S.mapping)!==void 0?(C=e.renderTargetOptions)==null?void 0:C.mapping:vu}static instantiateRenderer(){const e=new wM;return e.setSize(128,128),e}toArray(){if(!this._supportsReadPixels)throw new Error("Can't read pixels in this browser");const e=rD(this._type,this._width,this._height);return this._renderer.readRenderTargetPixels(this._renderTarget,0,0,this._width,this._height,e),e}toDataTexture(e){const t=new Xs(this.toArray(),this.width,this.height,sa,this._type,(e==null?void 0:e.mapping)||vu,(e==null?void 0:e.wrapS)||Qi,(e==null?void 0:e.wrapT)||Qi,(e==null?void 0:e.magFilter)||Vn,(e==null?void 0:e.minFilter)||Vn,(e==null?void 0:e.anisotropy)||1,Oo);return t.generateMipmaps=(e==null?void 0:e.generateMipmaps)!==void 0?e==null?void 0:e.generateMipmaps:!1,t}disposeOnDemandRenderer(){this._renderer.setRenderTarget(null),this._rendererIsDisposable&&(this._renderer.dispose(),this._renderer.forceContextLoss())}dispose(e){this.disposeOnDemandRenderer(),e&&this.renderTarget.dispose(),this.material instanceof ja&&Object.values(this.material.uniforms).forEach(t=>{t.value instanceof hi&&t.value.dispose()}),Object.values(this.material).forEach(t=>{t instanceof hi&&t.dispose()}),this.material.dispose(),this._quad.geometry.dispose()}get width(){return this._width}set width(e){this._width=e,this._renderTarget.setSize(this._width,this._height)}get height(){return this._height}set height(e){this._height=e,this._renderTarget.setSize(this._width,this._height)}get renderer(){return this._renderer}get renderTarget(){return this._renderTarget}set renderTarget(e){this._renderTarget=e,this._width=e.width,this._height=e.height}get material(){return this._material}get type(){return this._type}get colorSpace(){return this._colorSpace}}class sD extends Error{}class oD extends Error{}const hg=(i,e,t)=>{const n=new RegExp(`${e}="([^"]*)"`,"i").exec(i);if(n)return n[1];const a=new RegExp(`<${e}[^>]*>([\\s\\S]*?)</${e}>`,"i").exec(i);if(a){const s=a[1].match(/<rdf:li>([^<]*)<\/rdf:li>/g);return s&&s.length===3?s.map(l=>l.replace(/<\/?rdf:li>/g,"")):a[1].trim()}if(t!==void 0)return t;throw new Error(`Can't find ${e} in gainmap metadata`)},UV=i=>{let e;typeof TextDecoder<"u"?e=new TextDecoder().decode(i):e=i.toString();let t=e.indexOf("<x:xmpmeta");for(;t!==-1;){const n=e.indexOf("x:xmpmeta>",t),a=e.slice(t,n+10);try{const s=hg(a,"hdrgm:GainMapMin","0"),l=hg(a,"hdrgm:GainMapMax"),u=hg(a,"hdrgm:Gamma","1"),d=hg(a,"hdrgm:OffsetSDR","0.015625"),p=hg(a,"hdrgm:OffsetHDR","0.015625"),g=/hdrgm:HDRCapacityMin="([^"]*)"/.exec(a),y=g?g[1]:"0",_=/hdrgm:HDRCapacityMax="([^"]*)"/.exec(a);if(!_)throw new Error("Incomplete gainmap metadata");const b=_[1];return{gainMapMin:Array.isArray(s)?s.map(x=>parseFloat(x)):[parseFloat(s),parseFloat(s),parseFloat(s)],gainMapMax:Array.isArray(l)?l.map(x=>parseFloat(x)):[parseFloat(l),parseFloat(l),parseFloat(l)],gamma:Array.isArray(u)?u.map(x=>parseFloat(x)):[parseFloat(u),parseFloat(u),parseFloat(u)],offsetSdr:Array.isArray(d)?d.map(x=>parseFloat(x)):[parseFloat(d),parseFloat(d),parseFloat(d)],offsetHdr:Array.isArray(p)?p.map(x=>parseFloat(x)):[parseFloat(p),parseFloat(p),parseFloat(p)],hdrCapacityMin:parseFloat(y),hdrCapacityMax:parseFloat(b)}}catch{}t=e.indexOf("<x:xmpmeta",n)}};class LV{constructor(e){Ki(this,"options");this.options={debug:e&&e.debug!==void 0?e.debug:!1,extractFII:e&&e.extractFII!==void 0?e.extractFII:!0,extractNonFII:e&&e.extractNonFII!==void 0?e.extractNonFII:!0}}extract(e){return new Promise((t,n)=>{const a=this.options.debug,s=new DataView(e.buffer);if(s.getUint16(0)!==65496){n(new Error("Not a valid jpeg"));return}const l=s.byteLength;let u=2,d=0,p;for(;u<l;){if(++d>250){n(new Error(`Found no marker after ${d} loops `));return}if(s.getUint8(u)!==255){n(new Error(`Not a valid marker at offset 0x${u.toString(16)}, found: 0x${s.getUint8(u).toString(16)}`));return}if(p=s.getUint8(u+1),a&&console.log(`Marker: ${p.toString(16)}`),p===226){a&&console.log("Found APP2 marker (0xffe2)");const g=u+4;if(s.getUint32(g)===1297106432){const y=g+4;let _;if(s.getUint16(y)===18761)_=!1;else if(s.getUint16(y)===19789)_=!0;else{n(new Error("No valid endianness marker found in TIFF header"));return}if(s.getUint16(y+2,!_)!==42){n(new Error("Not valid TIFF data! (no 0x002A marker)"));return}const b=s.getUint32(y+4,!_);if(b<8){n(new Error("Not valid TIFF data! (First offset less than 8)"));return}const x=y+b,T=s.getUint16(x,!_),w=x+2;let S=0;for(let P=w;P<w+12*T;P+=12)s.getUint16(P,!_)===45057&&(S=s.getUint32(P+8,!_));const N=x+2+T*12+4,O=[];for(let P=N;P<N+S*16;P+=16){const U={MPType:s.getUint32(P,!_),size:s.getUint32(P+4,!_),dataOffset:s.getUint32(P+8,!_),dependantImages:s.getUint32(P+12,!_),start:-1,end:-1,isFII:!1};U.dataOffset?(U.start=y+U.dataOffset,U.isFII=!1):(U.start=0,U.isFII=!0),U.end=U.start+U.size,O.push(U)}if(this.options.extractNonFII&&O.length){const P=new Blob([s]),U=[];for(const z of O){if(z.isFII&&!this.options.extractFII)continue;const H=P.slice(z.start,z.end+1,"image/jpeg");U.push(H)}t(U)}}}u+=2+s.getUint16(u+2)}})}}const IV=async i=>{const e=UV(i);if(!e)throw new oD("Gain map XMP metadata not found");const n=await new LV({extractFII:!0,extractNonFII:!0}).extract(i);if(n.length!==2)throw new sD("Gain map recovery image not found");return{sdr:new Uint8Array(await n[0].arrayBuffer()),gainMap:new Uint8Array(await n[1].arrayBuffer()),metadata:e}},lR=i=>new Promise((e,t)=>{const n=document.createElement("img");n.onload=()=>{e(n)},n.onerror=a=>{t(a)},n.src=URL.createObjectURL(i)});class PV extends yr{constructor(t,n){super(n);Ki(this,"_renderer");Ki(this,"_renderTargetOptions");Ki(this,"_internalLoadingManager");Ki(this,"_config");this._config=t,t.renderer&&(this._renderer=t.renderer),this._internalLoadingManager=new jb}setRenderer(t){return this._renderer=t,this}setRenderTargetOptions(t){return this._renderTargetOptions=t,this}prepareQuadRenderer(){this._renderer||console.warn("WARNING: A Renderer was not passed to this Loader constructor or in setRenderer, the result of this Loader will need to be converted to a Data Texture with toDataTexture() before you can use it in your renderer.");const t=this._config.createMaterial({gainMapMax:[1,1,1],gainMapMin:[0,0,0],gamma:[1,1,1],offsetHdr:[1,1,1],offsetSdr:[1,1,1],hdrCapacityMax:1,hdrCapacityMin:0,maxDisplayBoost:1,gainMap:new hi,sdr:new hi});return this._config.createQuadRenderer({width:16,height:16,type:ji,colorSpace:Oo,material:t,renderer:this._renderer,renderTargetOptions:this._renderTargetOptions})}async processImages(t,n,a){const s=n?new Blob([n],{type:"image/jpeg"}):void 0,l=new Blob([t],{type:"image/jpeg"});let u,d,p=!1;if(typeof createImageBitmap>"u"){const g=await Promise.all([s?lR(s):Promise.resolve(void 0),lR(l)]);d=g[0],u=g[1],p=a==="flipY"}else{const g=await Promise.all([s?createImageBitmap(s,{imageOrientation:a||"flipY"}):Promise.resolve(void 0),createImageBitmap(l,{imageOrientation:a||"flipY"})]);d=g[0],u=g[1]}return{sdrImage:u,gainMapImage:d,needsFlip:p}}createTextures(t,n,a){const s=new hi(n||new ImageData(2,2),vu,Qi,Qi,Vn,nE,sa,ka,1,Oo);s.flipY=a,s.needsUpdate=!0;const l=new hi(t,vu,Qi,Qi,Vn,nE,sa,ka,1,Fa);return l.flipY=a,l.needsUpdate=!0,{gainMap:s,sdr:l}}updateQuadRenderer(t,n,a,s,l){t.width=n.width,t.height=n.height,t.material.gainMap=a,t.material.sdr=s,t.material.gainMapMin=l.gainMapMin,t.material.gainMapMax=l.gainMapMax,t.material.offsetHdr=l.offsetHdr,t.material.offsetSdr=l.offsetSdr,t.material.gamma=l.gamma,t.material.hdrCapacityMin=l.hdrCapacityMin,t.material.hdrCapacityMax=l.hdrCapacityMax,t.material.maxDisplayBoost=Math.pow(2,l.hdrCapacityMax),t.material.needsUpdate=!0}}const zV=`
varying vec2 vUv;

void main() {
  vUv = uv;
  gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);
}
`,BV=`
// min half float value
#define HALF_FLOAT_MIN vec3( -65504, -65504, -65504 )
// max half float value
#define HALF_FLOAT_MAX vec3( 65504, 65504, 65504 )

uniform sampler2D sdr;
uniform sampler2D gainMap;
uniform vec3 gamma;
uniform vec3 offsetHdr;
uniform vec3 offsetSdr;
uniform vec3 gainMapMin;
uniform vec3 gainMapMax;
uniform float weightFactor;

varying vec2 vUv;

void main() {
  vec3 rgb = texture2D( sdr, vUv ).rgb;
  vec3 recovery = texture2D( gainMap, vUv ).rgb;
  vec3 logRecovery = pow( recovery, gamma );
  vec3 logBoost = gainMapMin * ( 1.0 - logRecovery ) + gainMapMax * logRecovery;
  vec3 hdrColor = (rgb + offsetSdr) * exp2( logBoost * weightFactor ) - offsetHdr;
  vec3 clampedHdrColor = max( HALF_FLOAT_MIN, min( HALF_FLOAT_MAX, hdrColor ));
  gl_FragColor = vec4( clampedHdrColor , 1.0 );
}
`;class FV extends ja{constructor({gamma:t,offsetHdr:n,offsetSdr:a,gainMapMin:s,gainMapMax:l,maxDisplayBoost:u,hdrCapacityMin:d,hdrCapacityMax:p,sdr:g,gainMap:y}){super({name:"GainMapDecoderMaterial",vertexShader:zV,fragmentShader:BV,uniforms:{sdr:{value:g},gainMap:{value:y},gamma:{value:new ee(1/t[0],1/t[1],1/t[2])},offsetHdr:{value:new ee().fromArray(n)},offsetSdr:{value:new ee().fromArray(a)},gainMapMin:{value:new ee().fromArray(s)},gainMapMax:{value:new ee().fromArray(l)},weightFactor:{value:(Math.log2(u)-d)/(p-d)}},blending:Ro,depthTest:!1,depthWrite:!1});Ki(this,"_maxDisplayBoost");Ki(this,"_hdrCapacityMin");Ki(this,"_hdrCapacityMax");this._maxDisplayBoost=u,this._hdrCapacityMin=d,this._hdrCapacityMax=p,this.needsUpdate=!0,this.uniformsNeedUpdate=!0}get sdr(){return this.uniforms.sdr.value}set sdr(t){this.uniforms.sdr.value=t}get gainMap(){return this.uniforms.gainMap.value}set gainMap(t){this.uniforms.gainMap.value=t}get offsetHdr(){return this.uniforms.offsetHdr.value.toArray()}set offsetHdr(t){this.uniforms.offsetHdr.value.fromArray(t)}get offsetSdr(){return this.uniforms.offsetSdr.value.toArray()}set offsetSdr(t){this.uniforms.offsetSdr.value.fromArray(t)}get gainMapMin(){return this.uniforms.gainMapMin.value.toArray()}set gainMapMin(t){this.uniforms.gainMapMin.value.fromArray(t)}get gainMapMax(){return this.uniforms.gainMapMax.value.toArray()}set gainMapMax(t){this.uniforms.gainMapMax.value.fromArray(t)}get gamma(){const t=this.uniforms.gamma.value;return[1/t.x,1/t.y,1/t.z]}set gamma(t){const n=this.uniforms.gamma.value;n.x=1/t[0],n.y=1/t[1],n.z=1/t[2]}get hdrCapacityMin(){return this._hdrCapacityMin}set hdrCapacityMin(t){this._hdrCapacityMin=t,this.calculateWeight()}get hdrCapacityMax(){return this._hdrCapacityMax}set hdrCapacityMax(t){this._hdrCapacityMax=t,this.calculateWeight()}get maxDisplayBoost(){return this._maxDisplayBoost}set maxDisplayBoost(t){this._maxDisplayBoost=Math.max(1,Math.min(65504,t)),this.calculateWeight()}calculateWeight(){const t=(Math.log2(this._maxDisplayBoost)-this._hdrCapacityMin)/(this._hdrCapacityMax-this._hdrCapacityMin);this.uniforms.weightFactor.value=Math.max(0,Math.min(1,t))}}class lD extends PV{constructor(e,t){super({renderer:e,createMaterial:n=>new FV(n),createQuadRenderer:n=>new UM(n)},t)}async render(e,t,n,a){const{sdrImage:s,gainMapImage:l,needsFlip:u}=await this.processImages(n,a,"flipY"),{gainMap:d,sdr:p}=this.createTextures(s,l,u);this.updateQuadRenderer(e,s,d,p,t),e.render()}}class kV extends lD{load([e,t,n],a,s,l){const u=this.prepareQuadRenderer();let d,p,g;const y=async()=>{if(d&&p&&g){try{await this.render(u,g,d,p)}catch(D){this.manager.itemError(e),this.manager.itemError(t),this.manager.itemError(n),typeof l=="function"&&l(D),u.disposeOnDemandRenderer();return}typeof a=="function"&&a(u),this.manager.itemEnd(e),this.manager.itemEnd(t),this.manager.itemEnd(n),u.disposeOnDemandRenderer()}};let _=!0,b=0,x=0,T=!0,w=0,S=0,C=!0,N=0,O=0;const P=()=>{if(typeof s=="function"){const D=b+w+N,L=x+S+O,j=_&&T&&C;s(new ProgressEvent("progress",{lengthComputable:j,loaded:L,total:D}))}};this.manager.itemStart(e),this.manager.itemStart(t),this.manager.itemStart(n);const U=new as(this._internalLoadingManager);U.setResponseType("arraybuffer"),U.setRequestHeader(this.requestHeader),U.setPath(this.path),U.setWithCredentials(this.withCredentials),U.load(e,async D=>{if(typeof D=="string")throw new Error("Invalid sdr buffer");d=D,await y()},D=>{_=D.lengthComputable,x=D.loaded,b=D.total,P()},D=>{this.manager.itemError(e),typeof l=="function"&&l(D)});const z=new as(this._internalLoadingManager);z.setResponseType("arraybuffer"),z.setRequestHeader(this.requestHeader),z.setPath(this.path),z.setWithCredentials(this.withCredentials),z.load(t,async D=>{if(typeof D=="string")throw new Error("Invalid gainmap buffer");p=D,await y()},D=>{T=D.lengthComputable,S=D.loaded,w=D.total,P()},D=>{this.manager.itemError(t),typeof l=="function"&&l(D)});const H=new as(this._internalLoadingManager);return H.setRequestHeader(this.requestHeader),H.setPath(this.path),H.setWithCredentials(this.withCredentials),H.load(n,async D=>{if(typeof D!="string")throw new Error("Invalid metadata string");g=JSON.parse(D),await y()},D=>{C=D.lengthComputable,O=D.loaded,N=D.total,P()},D=>{this.manager.itemError(n),typeof l=="function"&&l(D)}),u}}class HV extends lD{load(e,t,n,a){const s=this.prepareQuadRenderer(),l=new as(this._internalLoadingManager);return l.setResponseType("arraybuffer"),l.setRequestHeader(this.requestHeader),l.setPath(this.path),l.setWithCredentials(this.withCredentials),this.manager.itemStart(e),l.load(e,async u=>{if(typeof u=="string")throw new Error("Invalid buffer, received [string], was expecting [ArrayBuffer]");const d=new Uint8Array(u);let p,g,y;try{const _=await IV(d);p=_.sdr,g=_.gainMap,y=_.metadata}catch(_){if(_ instanceof oD||_ instanceof sD)console.warn(`Failure to reconstruct an HDR image from ${e}: Gain map metadata not found in the file, HDRJPGLoader will render the SDR jpeg`),y={gainMapMin:[0,0,0],gainMapMax:[1,1,1],gamma:[1,1,1],hdrCapacityMin:0,hdrCapacityMax:1,offsetHdr:[0,0,0],offsetSdr:[0,0,0]},p=d;else throw _}try{await this.render(s,y,p.buffer,g==null?void 0:g.buffer)}catch(_){this.manager.itemError(e),typeof a=="function"&&a(_),s.disposeOnDemandRenderer();return}typeof t=="function"&&t(s),this.manager.itemEnd(e),s.disposeOnDemandRenderer()},n,u=>{this.manager.itemError(e),typeof a=="function"&&a(u)}),s}}const Kg={apartment:"lebombo_1k.hdr",city:"potsdamer_platz_1k.hdr",dawn:"kiara_1_dawn_1k.hdr",forest:"forest_slope_1k.hdr",lobby:"st_fagans_interior_1k.hdr",night:"dikhololo_night_1k.hdr",park:"rooitou_park_1k.hdr",studio:"studio_small_03_1k.hdr",sunset:"venice_sunset_1k.hdr",warehouse:"empty_warehouse_01_1k.hdr"},cD="https://raw.githack.com/pmndrs/drei-assets/456060a26bbeb8fdf79326f224b6d99b8bcce736/hdri/",$d=i=>Array.isArray(i),LM=["/px.png","/nx.png","/py.png","/ny.png","/pz.png","/nz.png"];function Zb({files:i=LM,path:e="",preset:t=void 0,colorSpace:n=void 0,extensions:a}={}){t&&(IM(t),i=Kg[t],e=cD);const s=$d(i),{extension:l,isCubemap:u}=PM(i),d=zM(l);if(!d)throw new Error("useEnvironment: Unrecognized file extension: "+i);const p=aa(b=>b.gl);re.useLayoutEffect(()=>{if(l!=="webp"&&l!=="jpg"&&l!=="jpeg")return;function b(){ef.clear(d,s?[i]:i)}p.domElement.addEventListener("webglcontextlost",b,{once:!0})},[i,p.domElement]);const g=ef(d,s?[i]:i,b=>{(l==="webp"||l==="jpg"||l==="jpeg")&&b.setRenderer(p),b.setPath==null||b.setPath(e),a&&a(b)});let y=s?g[0]:g;if(l==="jpg"||l==="jpeg"||l==="webp"){var _;y=(_=y.renderTarget)==null?void 0:_.texture}return y.mapping=u?No:ip,y.colorSpace=n??(u?"srgb":"srgb-linear"),y}const VV={files:LM,path:"",preset:void 0,extensions:void 0};Zb.preload=i=>{const e={...VV,...i};let{files:t,path:n=""}=e;const{preset:a,extensions:s}=e;a&&(IM(a),t=Kg[a],n=cD);const{extension:l}=PM(t);if(l==="webp"||l==="jpg"||l==="jpeg")throw new Error("useEnvironment: Preloading gainmaps is not supported");const u=zM(l);if(!u)throw new Error("useEnvironment: Unrecognized file extension: "+t);ef.preload(u,$d(t)?[t]:t,d=>{d.setPath==null||d.setPath(n),s&&s(d)})};const jV={files:LM,preset:void 0};Zb.clear=i=>{const e={...jV,...i};let{files:t}=e;const{preset:n}=e;n&&(IM(n),t=Kg[n]);const{extension:a}=PM(t),s=zM(a);if(!s)throw new Error("useEnvironment: Unrecognized file extension: "+t);ef.clear(s,$d(t)?[t]:t)};function IM(i){if(!(i in Kg))throw new Error("Preset must be one of: "+Object.keys(Kg).join(", "))}function PM(i){var e;const t=$d(i)&&i.length===6,n=$d(i)&&i.length===3&&i.some(l=>l.endsWith("json")),a=$d(i)?i[0]:i;return{extension:t?"cube":n?"webp":a.startsWith("data:application/exr")?"exr":a.startsWith("data:application/hdr")?"hdr":a.startsWith("data:image/jpeg")?"jpg":(e=a.split(".").pop())==null||(e=e.split("?"))==null||(e=e.shift())==null?void 0:e.toLowerCase(),isCubemap:t,isGainmap:n}}function zM(i){return i==="cube"?lO:i==="hdr"?SV:i==="exr"?EV:i==="jpg"||i==="jpeg"?HV:i==="webp"?kV:null}const GV=i=>i.current&&i.current.isScene,qV=i=>GV(i)?i.current:i;function BM(i,e,t,n,a={}){var s,l,u,d;a={backgroundBlurriness:0,backgroundIntensity:1,backgroundRotation:[0,0,0],environmentIntensity:1,environmentRotation:[0,0,0],...a};const p=qV(e||t),g=p.background,y=p.environment,_={backgroundBlurriness:p.backgroundBlurriness,backgroundIntensity:p.backgroundIntensity,backgroundRotation:(s=(l=p.backgroundRotation)==null||l.clone==null?void 0:l.clone())!==null&&s!==void 0?s:[0,0,0],environmentIntensity:p.environmentIntensity,environmentRotation:(u=(d=p.environmentRotation)==null||d.clone==null?void 0:d.clone())!==null&&u!==void 0?u:[0,0,0]};return i!=="only"&&(p.environment=n),i&&(p.background=n),vl(p,a),()=>{i!=="only"&&(p.environment=y),i&&(p.background=g),vl(p,_)}}function FM({scene:i,background:e=!1,map:t,...n}){const a=aa(s=>s.scene);return re.useLayoutEffect(()=>{if(t)return BM(e,i,a,t,n)}),null}function uD({background:i=!1,scene:e,blur:t,backgroundBlurriness:n,backgroundIntensity:a,backgroundRotation:s,environmentIntensity:l,environmentRotation:u,...d}){const p=Zb(d),g=aa(y=>y.scene);return re.useLayoutEffect(()=>BM(i,e,g,p,{backgroundBlurriness:t??n,backgroundIntensity:a,backgroundRotation:s,environmentIntensity:l,environmentRotation:u})),re.useEffect(()=>()=>{p.dispose()},[p]),null}function XV({children:i,near:e=.1,far:t=1e3,resolution:n=256,frames:a=1,map:s,background:l=!1,blur:u,backgroundBlurriness:d,backgroundIntensity:p,backgroundRotation:g,environmentIntensity:y,environmentRotation:_,scene:b,files:x,path:T,preset:w=void 0,extensions:S}){const C=aa(H=>H.gl),N=aa(H=>H.scene),O=re.useRef(null),[P]=re.useState(()=>new rv),U=re.useMemo(()=>{const H=new Eb(n);return H.texture.type=ji,H},[n]);re.useEffect(()=>()=>{U.dispose()},[U]),re.useLayoutEffect(()=>{if(a===1){const H=C.autoClear;C.autoClear=!0,O.current.update(C,P),C.autoClear=H}return BM(l,b,N,U.texture,{backgroundBlurriness:u??d,backgroundIntensity:p,backgroundRotation:g,environmentIntensity:y,environmentRotation:_})},[i,P,U.texture,b,N,l,a,C]);let z=1;return pv(()=>{if(a===1/0||z<a){const H=C.autoClear;C.autoClear=!0,O.current.update(C,P),C.autoClear=H,z++}}),re.createElement(re.Fragment,null,zH(re.createElement(re.Fragment,null,i,re.createElement("cubeCamera",{ref:O,args:[e,t,U]}),x||w?re.createElement(uD,{background:!0,files:x,preset:w,path:T,extensions:S}):s?re.createElement(FM,{background:!0,map:s,extensions:S}):null),P))}function WV(i){var e,t,n,a;const s=Zb(i),l=i.map||s;re.useMemo(()=>OM({GroundProjectedEnvImpl:hV}),[]),re.useEffect(()=>()=>{s.dispose()},[s]);const u=re.useMemo(()=>[l],[l]),d=(e=i.ground)==null?void 0:e.height,p=(t=i.ground)==null?void 0:t.radius,g=(n=(a=i.ground)==null?void 0:a.scale)!==null&&n!==void 0?n:1e3;return re.createElement(re.Fragment,null,re.createElement(FM,Co({},i,{map:l})),re.createElement("groundProjectedEnvImpl",{args:u,scale:g,height:d,radius:p}))}function YV(i){return i.ground?re.createElement(WV,i):i.map?re.createElement(FM,i):i.children?re.createElement(XV,i):re.createElement(uD,i)}const ZV=re.forwardRef(({scale:i=10,frames:e=1/0,opacity:t=1,width:n=1,height:a=1,blur:s=1,near:l=0,far:u=10,resolution:d=512,smooth:p=!0,color:g="#000000",depthWrite:y=!1,renderOrder:_,...b},x)=>{const T=re.useRef(null),w=aa(K=>K.scene),S=aa(K=>K.gl),C=re.useRef(null);n=n*(Array.isArray(i)?i[0]:i||1),a=a*(Array.isArray(i)?i[1]:i||1);const[N,O,P,U,z,H,D]=re.useMemo(()=>{const K=new Ta(d,d),le=new Ta(d,d);le.texture.generateMipmaps=K.texture.generateMipmaps=!1;const k=new gc(n,a).rotateX(Math.PI/2),Z=new Ui(k),ne=new Vb;ne.depthTest=ne.depthWrite=!1,ne.onBeforeCompile=J=>{J.uniforms={...J.uniforms,ucolor:{value:new Ut(g)}},J.fragmentShader=J.fragmentShader.replace("void main() {",`uniform vec3 ucolor;
           void main() {
          `),J.fragmentShader=J.fragmentShader.replace("vec4( vec3( 1.0 - fragCoordZ ), opacity );","vec4( ucolor * fragCoordZ * 2.0, ( 1.0 - fragCoordZ ) * 1.0 );")};const pe=new ja(bV),ge=new ja(xV);return ge.depthTest=pe.depthTest=!1,[K,k,ne,Z,pe,ge,le]},[d,n,a,i,g]),L=K=>{U.visible=!0,U.material=z,z.uniforms.tDiffuse.value=N.texture,z.uniforms.h.value=K*1/256,S.setRenderTarget(D),S.render(U,C.current),U.material=H,H.uniforms.tDiffuse.value=D.texture,H.uniforms.v.value=K*1/256,S.setRenderTarget(N),S.render(U,C.current),U.visible=!1};let j=0,W,X;return pv(()=>{C.current&&(e===1/0||j<e)&&(j++,W=w.background,X=w.overrideMaterial,T.current.visible=!1,w.background=null,w.overrideMaterial=P,S.setRenderTarget(N),S.render(w,C.current),L(s),p&&L(s*.4),S.setRenderTarget(null),T.current.visible=!0,w.overrideMaterial=X,w.background=W)}),re.useImperativeHandle(x,()=>T.current,[]),re.createElement("group",Co({"rotation-x":Math.PI/2},b,{ref:T}),re.createElement("mesh",{renderOrder:_,geometry:O,scale:[1,-1,1],rotation:[-Math.PI/2,0,0]},re.createElement("meshBasicMaterial",{transparent:!0,map:N.texture,opacity:t,depthWrite:y})),re.createElement("orthographicCamera",{ref:C,args:[-n/2,n/2,a/2,-a/2,l,u]}))});function KV(i){return i.isLight}function JV(i){return!!i.geometry}const hD=re.createContext(null),QV=nD({color:new Ut,blend:2,alphaTest:.75,opacity:0,map:null},`varying vec2 vUv;
   void main() {
     gl_Position = projectionMatrix * viewMatrix * modelMatrix * vec4(position, 1.);
     vUv = uv;
   }`,`varying vec2 vUv;
   uniform sampler2D map;
   uniform vec3 color;
   uniform float opacity;
   uniform float alphaTest;
   uniform float blend;
   void main() {
     vec4 sampledDiffuseColor = texture2D(map, vUv);
     gl_FragColor = vec4(color * sampledDiffuseColor.r * blend, max(0.0, (1.0 - (sampledDiffuseColor.r + sampledDiffuseColor.g + sampledDiffuseColor.b) / alphaTest)) * opacity);
     #include <tonemapping_fragment>
     #include <${iD>=154?"colorspace_fragment":"encodings_fragment"}>
   }`),$V=re.forwardRef(({children:i,temporal:e,frames:t=40,limit:n=1/0,blend:a=20,scale:s=10,opacity:l=1,alphaTest:u=.75,color:d="black",colorBlend:p=2,resolution:g=1024,toneMapped:y=!0,..._},b)=>{OM({SoftShadowMaterial:QV});const x=aa(U=>U.gl),T=aa(U=>U.scene),w=aa(U=>U.camera),S=aa(U=>U.invalidate),C=re.useRef(null),N=re.useRef(null),[O]=re.useState(()=>new tj(x,T,g));re.useLayoutEffect(()=>{O.configure(C.current)},[]);const P=re.useMemo(()=>({lights:new Map,temporal:!!e,frames:Math.max(2,t),blend:Math.max(2,t===1/0?a:t),count:0,getMesh:()=>C.current,reset:()=>{O.clear();const U=C.current.material;U.opacity=0,U.alphaTest=0,P.count=0},update:(U=1)=>{const z=C.current.material;P.temporal?(z.opacity=Math.min(l,z.opacity+l/P.blend),z.alphaTest=Math.min(u,z.alphaTest+u/P.blend)):(z.opacity=l,z.alphaTest=u),N.current.visible=!0,O.prepare();for(let H=0;H<U;H++)P.lights.forEach(D=>D.update()),O.update(w,P.blend);N.current.visible=!1,O.finish()}}),[O,w,T,e,t,a,l,u]);return re.useLayoutEffect(()=>{P.reset(),!P.temporal&&P.frames!==1/0&&P.update(P.blend)}),re.useImperativeHandle(b,()=>P,[P]),pv(()=>{(P.temporal||P.frames===1/0)&&P.count<P.frames&&P.count<n&&(S(),P.update(),P.count++)}),re.createElement("group",_,re.createElement("group",{traverse:()=>null,ref:N},re.createElement(hD.Provider,{value:P},i)),re.createElement("mesh",{receiveShadow:!0,ref:C,scale:s,rotation:[-Math.PI/2,0,0]},re.createElement("planeGeometry",null),re.createElement("softShadowMaterial",{transparent:!0,depthWrite:!1,toneMapped:y,color:d,blend:p,map:O.progressiveLightMap2.texture})))}),ej=re.forwardRef(({castShadow:i=!0,bias:e=.001,mapSize:t=512,size:n=5,near:a=.5,far:s=500,frames:l=1,position:u=[0,0,0],radius:d=1,amount:p=8,intensity:g=iD>=155?Math.PI:1,ambient:y=.5,..._},b)=>{const x=re.useRef(null),T=new ee(...u).length(),w=re.useContext(hD),S=re.useCallback(()=>{let N;if(x.current)for(let O=0;O<x.current.children.length;O++)if(N=x.current.children[O],Math.random()>y)N.position.set(u[0]+wg.randFloatSpread(d),u[1]+wg.randFloatSpread(d),u[2]+wg.randFloatSpread(d));else{let P=Math.acos(2*Math.random()-1)-Math.PI/2,U=2*Math.PI*Math.random();N.position.set(Math.cos(P)*Math.cos(U)*T,Math.abs(Math.cos(P)*Math.sin(U)*T),Math.sin(P)*T)}},[d,y,T,...u]),C=re.useMemo(()=>({update:S}),[S]);return re.useImperativeHandle(b,()=>C,[C]),re.useLayoutEffect(()=>{var N;const O=x.current;return w&&((N=w.lights)==null||N.set(O.uuid,C)),()=>{var P;return void(w==null||(P=w.lights)==null?void 0:P.delete(O.uuid))}},[w,C]),re.createElement("group",Co({ref:x},_),Array.from({length:p},(N,O)=>re.createElement("directionalLight",{key:O,castShadow:i,"shadow-bias":e,"shadow-mapSize":[t,t],intensity:g/p},re.createElement("orthographicCamera",{attach:"shadow-camera",args:[-n,n,n,-n,a,s]}))))});class tj{constructor(e,t,n=1024){this.renderer=e,this.res=n,this.scene=t,this.buffer1Active=!1,this.lights=[],this.meshes=[],this.object=null,this.clearColor=new Ut,this.clearAlpha=0;const a={type:ji,magFilter:Vi,minFilter:Vi};this.progressiveLightMap1=new Ta(this.res,this.res,a),this.progressiveLightMap2=new Ta(this.res,this.res,a),this.discardMat=new AV,this.targetMat=new hM({fog:!1}),this.previousShadowMap={value:this.progressiveLightMap1.texture},this.averagingWindow={value:100},this.targetMat.onBeforeCompile=s=>{s.vertexShader=`varying vec2 vUv;
`+s.vertexShader.slice(0,-1)+"vUv = uv; gl_Position = vec4((uv - 0.5) * 2.0, 1.0, 1.0); }";const l=s.fragmentShader.indexOf("void main() {");s.fragmentShader=`varying vec2 vUv;
`+s.fragmentShader.slice(0,l)+`uniform sampler2D previousShadowMap;
	uniform float averagingWindow;
`+s.fragmentShader.slice(l-1,-1)+`
vec3 texelOld = texture2D(previousShadowMap, vUv).rgb;
        gl_FragColor.rgb = mix(texelOld, gl_FragColor.rgb, 1.0/ averagingWindow);
      }`,s.uniforms.previousShadowMap=this.previousShadowMap,s.uniforms.averagingWindow=this.averagingWindow}}clear(){this.renderer.getClearColor(this.clearColor),this.clearAlpha=this.renderer.getClearAlpha(),this.renderer.setClearColor("black",1),this.renderer.setRenderTarget(this.progressiveLightMap1),this.renderer.clear(),this.renderer.setRenderTarget(this.progressiveLightMap2),this.renderer.clear(),this.renderer.setRenderTarget(null),this.renderer.setClearColor(this.clearColor,this.clearAlpha),this.lights=[],this.meshes=[],this.scene.traverse(e=>{JV(e)?this.meshes.push({object:e,material:e.material}):KV(e)&&this.lights.push({object:e,intensity:e.intensity})})}prepare(){this.lights.forEach(e=>e.object.intensity=0),this.meshes.forEach(e=>e.object.material=this.discardMat)}finish(){this.lights.forEach(e=>e.object.intensity=e.intensity),this.meshes.forEach(e=>e.object.material=e.material)}configure(e){this.object=e}update(e,t=100){if(!this.object)return;this.averagingWindow.value=t,this.object.material=this.targetMat;const n=this.buffer1Active?this.progressiveLightMap1:this.progressiveLightMap2,a=this.buffer1Active?this.progressiveLightMap2:this.progressiveLightMap1,s=this.scene.background;this.scene.background=null,this.renderer.setRenderTarget(n),this.previousShadowMap.value=a.texture,this.buffer1Active=!this.buffer1Active,this.renderer.render(this.scene,e),this.renderer.setRenderTarget(null),this.scene.background=s}}const nj={rembrandt:{main:[1,2,1],fill:[-2,-.5,-2]},portrait:{main:[-1,2,.5],fill:[-1,.5,-1.5]},upfront:{main:[0,2,1],fill:[-1,.5,-1.5]},soft:{main:[-2,4,4],fill:[-1,.5,-1.5]}};function ij({radius:i,adjustCamera:e}){const t=OV();return re.useEffect(()=>{e&&t.refresh().clip().fit()},[i,e]),null}function aj({children:i,center:e,adjustCamera:t=!0,intensity:n=.5,shadows:a="contact",environment:s="city",preset:l="rembrandt",...u}){var d,p,g,y,_,b,x,T;const w=typeof l=="string"?nj[l]:l,[{radius:S,height:C},N]=re.useState({radius:0,width:0,height:0,depth:0}),O=(d=a==null?void 0:a.bias)!==null&&d!==void 0?d:-1e-4,P=(p=a==null?void 0:a.normalBias)!==null&&p!==void 0?p:0,U=(g=a==null?void 0:a.size)!==null&&g!==void 0?g:1024,z=(y=a==null?void 0:a.offset)!==null&&y!==void 0?y:0,H=a==="contact"||(a==null?void 0:a.type)==="contact",D=a==="accumulative"||(a==null?void 0:a.type)==="accumulative",L={...typeof a=="object"?a:{}},j=s?typeof s=="string"?{preset:s}:s:null,W=re.useCallback(X=>{const{width:K,height:le,depth:k,boundingSphere:Z}=X;N({radius:Z.radius,width:K,height:le,depth:k}),e!=null&&e.onCentered&&e.onCentered(X)},[]);return re.createElement(re.Fragment,null,re.createElement("ambientLight",{intensity:n/3}),re.createElement("spotLight",{penumbra:1,position:[w.main[0]*S,w.main[1]*S,w.main[2]*S],intensity:n*2,castShadow:!!a,"shadow-bias":O,"shadow-normalBias":P,"shadow-mapSize":U}),re.createElement("pointLight",{position:[w.fill[0]*S,w.fill[1]*S,w.fill[2]*S],intensity:n}),re.createElement(NV,Co({fit:!!t,clip:!!t,margin:Number(t),observe:!0},u),re.createElement(ij,{radius:S,adjustCamera:t}),re.createElement(TV,Co({},e,{position:[0,z/2,0],onCentered:W}),i)),re.createElement("group",{position:[0,-C/2-z/2,0]},H&&re.createElement(ZV,Co({scale:S*4,far:S,blur:2},L)),D&&re.createElement($V,Co({temporal:!0,frames:100,alphaTest:.9,toneMapped:!0,scale:S*4},L),re.createElement(ej,{amount:(_=L.amount)!==null&&_!==void 0?_:8,radius:(b=L.radius)!==null&&b!==void 0?b:S,ambient:(x=L.ambient)!==null&&x!==void 0?x:.5,intensity:(T=L.intensity)!==null&&T!==void 0?T:1,position:[w.main[0]*S,w.main[1]*S,w.main[2]*S],size:S*4,bias:-O,mapSize:U}))),s&&re.createElement(YV,j))}const rj=({url:i})=>{const e=ef(KH,i);return q.jsx("mesh",{geometry:e,rotation:[-Math.PI/2,0,0],children:q.jsx("meshStandardMaterial",{color:"#0066cc"})})},sj=({t:i,user:e,onBack:t})=>{const[n,a]=re.useState(""),[s,l]=re.useState(""),[u,d]=re.useState(""),[p,g]=re.useState(""),[y,_]=re.useState(!1),[b,x]=re.useState(!1),[T,w]=re.useState(null),[S,C]=re.useState(null),[N,O]=re.useState(null),P=re.useCallback(W=>{W!=null&&W.length&&w(W[0])},[]),{getRootProps:U,getInputProps:z}=K1({onDrop:P,accept:{"application/pdf":[".pdf"]},maxFiles:1}),H=re.useCallback(W=>{if(W!=null&&W.length){const X=W[0];C(X),O(URL.createObjectURL(X))}},[]),{getRootProps:D,getInputProps:L}=K1({onDrop:H,accept:{"model/stl":[".stl"],"application/octet-stream":[".stl"]},maxFiles:1}),j=async W=>{if(W.preventDefault(),!!e){_(!0);try{let X=null,K=null;if(T){const k=`${e.id}/${Date.now()}_${T.name}`,{error:Z,data:ne}=await Hn.storage.from("project-files").upload(k,T);if(Z)throw Z;X=ne.path}if(S){const k=`${e.id}/${Date.now()}_${S.name}`,{error:Z,data:ne}=await Hn.storage.from("project-files").upload(k,S);if(Z)throw Z;K=ne.path}const{error:le}=await Hn.from("projects").insert({user_id:e.id,client_name:e.user_metadata.full_name||e.email,title:n,description:s,keywords:u.split(",").map(k=>k.trim()),budget:p,pdf_path:X,stl_path:K,status:"pending"});if(le)throw le;x(!0)}catch(X){console.error("Project Error:",X),alert("Error submitting project: "+X.message)}finally{_(!1)}}};return b?q.jsx("div",{className:"w-full h-full flex flex-col items-center justify-center p-8 animate-fade-in-up bg-bgBody transition-colors duration-300",children:q.jsxs("div",{className:"bg-bgSurface p-8 rounded-lg shadow-2xl text-center border border-primary/30 max-w-lg",children:[q.jsx("h2",{className:"text-3xl font-bold text-primary mb-4",children:"Project Request Received!"}),q.jsx("p",{className:"text-textMuted mb-6",children:"We have received your project details. We will analyze your files and get back to you with a quote shortly."}),q.jsx("button",{onClick:t,className:"bg-primary text-white font-bold py-3 px-8 rounded hover:opacity-90 transition-opacity",children:"Back to Home"}),q.jsx("button",{onClick:()=>{x(!1),a(""),C(null),w(null)},className:"block w-full mt-4 text-sm text-textMuted hover:text-textMain",children:"Submit Another"})]})}):q.jsx("div",{className:"w-full h-full flex flex-col no-scrollbar overflow-y-auto overflow-x-hidden p-6 md:p-12 bg-bgBody transition-colors duration-300",children:q.jsxs("div",{className:"max-w-4xl mx-auto w-full animate-fade-in-up",children:[q.jsxs("div",{className:"flex justify-between items-center mb-8",children:[q.jsx("h1",{className:"text-3xl font-bold text-textMain",children:"Start New Project"}),q.jsx("button",{onClick:t,className:"text-textMuted hover:text-textMain transition-colors",children:" Back"})]}),q.jsxs("form",{onSubmit:j,className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:[q.jsxs("div",{className:"space-y-6",children:[q.jsxs("div",{className:"bg-bgSurface p-6 rounded-lg border border-border shadow-sm",children:[q.jsx("h3",{className:"text-xl font-bold text-textMain mb-4",children:"Project Details"}),q.jsxs("div",{className:"space-y-4",children:[q.jsxs("div",{children:[q.jsx("label",{className:"block text-xs uppercase text-textMuted mb-1",children:"Project Title"}),q.jsx("input",{type:"text",value:n,onChange:W=>a(W.target.value),className:"w-full bg-bgBody border border-border p-3 rounded text-textMain focus:border-primary focus:outline-none transition-colors",required:!0,placeholder:"e.g., Robotic Arm Prototype"})]}),q.jsxs("div",{children:[q.jsx("label",{className:"block text-xs uppercase text-textMuted mb-1",children:"Keywords (comma separated)"}),q.jsx("input",{type:"text",value:u,onChange:W=>d(W.target.value),className:"w-full bg-bgBody border border-border p-3 rounded text-textMain focus:border-primary focus:outline-none transition-colors",placeholder:"3d printing, fast prototype, abs..."})]}),q.jsxs("div",{children:[q.jsx("label",{className:"block text-xs uppercase text-textMuted mb-1",children:"Estimated Budget (USD)"}),q.jsx("input",{type:"text",value:p,onChange:W=>g(W.target.value),className:"w-full bg-bgBody border border-border p-3 rounded text-textMain focus:border-primary focus:outline-none transition-colors",placeholder:"$500 - $1000"})]}),q.jsxs("div",{children:[q.jsx("label",{className:"block text-xs uppercase text-textMuted mb-1",children:"Description"}),q.jsx("textarea",{value:s,onChange:W=>l(W.target.value),rows:5,className:"w-full bg-bgBody border border-border p-3 rounded text-textMain focus:border-primary focus:outline-none resize-none transition-colors",required:!0,placeholder:"Describe your project requirements, materials, and timeline..."})]})]})]}),q.jsxs("div",{className:"bg-bgSurface p-6 rounded-lg border border-border shadow-sm",children:[q.jsx("h3",{className:"text-xl font-bold text-textMain mb-4",children:"Documentation"}),q.jsxs("div",{...U(),className:`border-2 border-dashed border-border rounded-lg p-6 text-center cursor-pointer transition-colors ${T?"bg-primary/10 border-primary":"hover:bg-bgBody hover:border-textMuted"}`,children:[q.jsx("input",{...z()}),T?q.jsx("div",{className:"text-primary font-bold",children:T.name}):q.jsx("p",{className:"text-textMuted text-sm",children:"Drag & drop your PDF specs here, or click to select"})]})]})]}),q.jsx("div",{className:"space-y-6",children:q.jsxs("div",{className:"bg-bgSurface p-6 rounded-lg border border-border h-full flex flex-col shadow-sm",children:[q.jsx("h3",{className:"text-xl font-bold text-textMain mb-4",children:"3D Model (STL)"}),q.jsx("div",{className:"flex-1 min-h-[300px] bg-bgBody rounded-lg overflow-hidden relative border border-border flex items-center justify-center",children:S&&N?q.jsx(ZH,{shadows:!0,camera:{position:[0,0,150],fov:50},children:q.jsxs(re.Suspense,{fallback:null,children:[q.jsx(aj,{environment:"city",intensity:.6,children:q.jsx(rj,{url:N})}),q.jsx(wV,{autoRotate:!0})]})}):q.jsx("div",{className:"text-textMuted text-sm text-center p-4",children:S?`Selected: ${S.name}`:"No model loaded"})}),q.jsxs("div",{...D(),className:"mt-4 border-2 border-dashed border-border rounded-lg p-4 text-center cursor-pointer hover:bg-bgBody hover:border-textMuted transition-colors",children:[q.jsx("input",{...L()}),q.jsx("p",{className:"text-textMuted text-xs",children:S?`Selected: ${S.name}`:"Upload .STL file for preview"})]})]})}),q.jsx("div",{className:"md:col-span-2 flex justify-end pt-4 border-t border-border",children:q.jsx("button",{type:"submit",disabled:y,className:"bg-primary text-white font-bold py-4 px-12 rounded hover:opacity-90 hover:scale-105 transition-all shadow-lg disabled:opacity-50 disabled:scale-100",children:y?"Submitting Project...":"SUBMIT PROJECT REQUEST"})})]})]})})},oj=({t:i,onBack:e})=>{const[t,n]=re.useState([]),[a,s]=re.useState(!0),[l,u]=re.useState("all"),[d,p]=re.useState(null),[g,y]=re.useState(null);re.useEffect(()=>{_()},[]);const _=async()=>{s(!0),p(null);try{console.log("AdminView: Fetching projects...");const{data:w,error:S}=await Hn.from("projects").select("*").order("created_at",{ascending:!1});if(S)throw new Error("Projects Error: "+S.message);if(console.log("AdminView: Projects fetched:",w==null?void 0:w.length),console.log("AdminView: Sample project:",w==null?void 0:w[0]),!w||w.length===0){n([]),s(!1);return}const C=[...new Set(w.map(P=>P.user_id).filter(P=>P!=null))];console.log("AdminView: User IDs to fetch:",C);let N=[];if(C.length>0){const{data:P,error:U}=await Hn.from("profiles").select("id, email, full_name").in("id",C);U?console.error("Error fetching profiles:",U):(N=P||[],console.log("AdminView: Profiles fetched:",N))}const O=w.map(P=>{if(!P.user_id)return{...P,profiles:{email:"Legacy User (No Account)",full_name:"Unknown User"}};const U=N.find(z=>z.id===P.user_id);return{...P,profiles:U||{email:`User ID: ${P.user_id}`,full_name:"No Profile"}}});console.log("AdminView: Merged requests sample:",O[0]),n(O)}catch(w){console.error("Error fetching requests:",w),p(w.message||"Unknown error occurred")}finally{s(!1)}},b=async(w,S)=>{try{const{error:C}=await Hn.from("projects").update({status:S}).eq("id",w);if(C)throw C;_()}catch(C){alert("Error updating status: "+C.message)}},x=async(w,S)=>{if(w.stopPropagation(),!!confirm(`Ests seguro de eliminar el proyecto "${S.title}"? Esta accin no se puede deshacer.`))try{const C=[];if(S.pdf_path&&C.push(S.pdf_path),S.stl_path&&C.push(S.stl_path),C.length>0){const{error:O}=await Hn.storage.from("project-files").remove(C);O&&console.error("Error deleting files:",O)}const{error:N}=await Hn.from("projects").delete().eq("id",S.id);if(N)throw N;_()}catch(C){alert("Error deleting project: "+C.message)}},T=t.filter(w=>l==="all"?!0:(w.status||"pending")===l);return q.jsx("div",{className:"w-full h-full p-6 md:p-12 overflow-y-auto bg-white/80 backdrop-blur-sm animate-fade-in",children:q.jsxs("div",{className:"max-w-7xl mx-auto",children:[q.jsxs("div",{className:"flex justify-between items-center mb-8",children:[q.jsxs("h2",{className:"text-3xl font-bold text-textMain uppercase tracking-widest",children:[q.jsx("span",{className:"text-primary",children:"Admin"})," Requests Dashboard"]}),q.jsx("button",{onClick:e,className:"text-textMuted hover:text-textMain underline",children:"Back to Home"})]}),q.jsx("div",{className:"flex gap-4 mb-6",children:["all","pending","approved","rejected"].map(w=>q.jsx("button",{onClick:()=>u(w),className:`px-4 py-2 rounded-full text-sm font-bold uppercase tracking-wider transition-colors ${l===w?"bg-primary text-white shadow-lg":"bg-white border border-border text-textMuted hover:bg-gray-50"}`,children:w},w))}),d&&q.jsxs("div",{className:"mb-6 p-4 bg-red-100 border border-red-400 text-red-700 rounded-lg flex items-center gap-2",children:[q.jsx("span",{children:""}),q.jsxs("div",{children:[q.jsx("p",{className:"font-bold",children:"Error Loading Data"}),q.jsx("p",{className:"text-sm",children:d})]})]}),q.jsx("div",{className:"bg-white rounded-xl shadow-xl border border-border overflow-hidden",children:q.jsx("div",{className:"overflow-x-auto",children:q.jsxs("table",{className:"w-full text-left text-sm",children:[q.jsx("thead",{className:"bg-gray-50 border-b border-border text-textMuted uppercase text-xs font-bold tracking-wider",children:q.jsxs("tr",{children:[q.jsx("th",{className:"p-4",children:"Date"}),q.jsx("th",{className:"p-4",children:"User"}),q.jsx("th",{className:"p-4",children:"Project"}),q.jsx("th",{className:"p-4",children:"Budget"}),q.jsx("th",{className:"p-4",children:"Status"}),q.jsx("th",{className:"p-4 text-right",children:"Actions"})]})}),q.jsx("tbody",{className:"divide-y divide-gray-100",children:a?q.jsx("tr",{children:q.jsx("td",{colSpan:6,className:"p-8 text-center text-textMuted",children:"Loading requests..."})}):T.length===0?q.jsx("tr",{children:q.jsx("td",{colSpan:6,className:"p-8 text-center text-textMuted",children:"No requests found."})}):T.map(w=>{var S,C;return q.jsxs("tr",{className:"hover:bg-blue-50/50 transition-colors",children:[q.jsx("td",{className:"p-4 whitespace-nowrap text-textMuted font-mono",children:new Date(w.created_at).toLocaleDateString()}),q.jsxs("td",{className:"p-4",children:[q.jsx("div",{className:"font-bold text-textMain",children:((S=w.profiles)==null?void 0:S.full_name)||"Unknown"}),q.jsx("div",{className:"text-xs text-textMuted",children:(C=w.profiles)==null?void 0:C.email})]}),q.jsxs("td",{className:"p-4 max-w-xs",children:[q.jsx("div",{className:"font-bold text-primary truncate cursor-pointer hover:underline",title:w.title,onClick:()=>y(w),children:w.title}),q.jsx("div",{className:"text-xs text-textMuted truncate",title:w.description,children:w.description})]}),q.jsx("td",{className:"p-4 font-mono",children:w.budget?`$${w.budget}`:"-"}),q.jsx("td",{className:"p-4",children:q.jsx("span",{className:`px-2 py-1 rounded-full text-[10px] uppercase font-bold border ${w.status==="approved"?"bg-green-100 text-green-600 border-green-200":w.status==="rejected"?"bg-red-100 text-red-600 border-red-200":"bg-yellow-100 text-yellow-600 border-yellow-200"}`,children:w.status||"pending"})}),q.jsxs("td",{className:"p-4 text-right space-x-2",children:[q.jsx("button",{onClick:()=>b(w.id,"approved"),className:"px-3 py-1 bg-green-500 text-white text-xs font-bold rounded hover:opacity-90 disabled:opacity-50",disabled:w.status==="approved",children:" Approve"}),q.jsx("button",{onClick:()=>b(w.id,"rejected"),className:"px-3 py-1 bg-red-500 text-white text-xs font-bold rounded hover:opacity-90 disabled:opacity-50",disabled:w.status==="rejected",children:" Reject"}),q.jsx("button",{onClick:N=>x(N,w),className:"px-3 py-1 bg-gray-700 text-white text-xs font-bold rounded hover:opacity-90 transition-opacity",title:"Delete Project",children:" Delete"})]})]},w.id)})})]})})}),g&&q.jsx(N3,{project:g,onClose:()=>y(null)})]})})},lj=({theme:i})=>{const e=re.useRef(null);return i==="light"?null:(re.useEffect(()=>{const t=e.current;if(!t)return;const n=t.getContext("2d");if(!n)return;let a=window.innerWidth,s=window.innerHeight,l,u=[];const d={particleCount:80,connectionDistance:150,baseColor:"rgba(59, 130, 246, "};class p{constructor(){this.x=Math.random()*a,this.y=Math.random()*s,this.vx=(Math.random()-.5)*.5,this.vy=(Math.random()-.5)*.5,this.size=Math.random()*2+1}update(){this.x+=this.vx,this.y+=this.vy,(this.x<0||this.x>a)&&(this.vx*=-1),(this.y<0||this.y>s)&&(this.vy*=-1)}draw(){n&&(n.beginPath(),n.arc(this.x,this.y,this.size,0,Math.PI*2),n.fillStyle=d.baseColor+"0.6)",n.fill())}}const g=()=>{u=[];const b=window.innerWidth<768?40:d.particleCount;for(let x=0;x<b;x++)u.push(new p)},y=()=>{if(n){n.clearRect(0,0,a,s);for(let b=0;b<u.length;b++){u[b].update(),u[b].draw();for(let x=b;x<u.length;x++){const T=u[b].x-u[x].x,w=u[b].y-u[x].y,S=Math.sqrt(T*T+w*w);if(S<d.connectionDistance){n.beginPath();const C=1-S/d.connectionDistance;n.strokeStyle=d.baseColor+C*.2+")",n.lineWidth=1,n.moveTo(u[b].x,u[b].y),n.lineTo(u[x].x,u[x].y),n.stroke()}}}l=requestAnimationFrame(y)}},_=()=>{a=t.width=window.innerWidth,s=t.height=window.innerHeight,g()};return _(),y(),window.addEventListener("resize",_),()=>{window.removeEventListener("resize",_),cancelAnimationFrame(l)}},[]),q.jsx("canvas",{ref:e,className:"fixed top-0 left-0 w-full h-full z-0 pointer-events-none opacity-40 mix-blend-screen"}))},cj={es:{nav_tools:"HERRAMIENTAS",nav_calc:"Calculadora de Tuberas",nav_gears:"Clculo de Engranaje",nav_cad:"CAD VIEWER",nav_works:"TRABAJOS",hero_title:"Proyectos de Ingeniera",hero_desc:"Simplificamos procesos tcnicos con precisin. Acceda a nuestra suite de herramientas desde el men superior.",contact_title:"Contacto Directo",contact_desc:"Tiene alguna consulta tcnica, sugerencia sobre nuestras herramientas o requiere asistencia personalizada? Utilice el formulario para enviar un mensaje directo a nuestra administracin.",input_email:"Su Correo Electrnico",input_msg:"Escriba su mensaje...",btn_send:"ENVIAR",footer_rights:" 2024 DESPUX. Todos los derechos reservados.",footer_dev:"Desarrollado y mantenido por Marcos Despujos.",work_tag:"INGENIERA ESTRUCTURAL",work_title:"Anlisis de Integridad Estructural",work_desc:"Implementacin de algoritmos avanzados para el clculo de resistencia de materiales en infraestructuras crticas. Este proyecto utiliza modelado 3D y simulaciones de estrs en tiempo real para predecir puntos de fallo y optimizar el mantenimiento preventivo.",work_btn:"VER DETALLES",work2_tag:"DISEO MECNICO",work2_title:"Cicln Separador Inoxidable",work2_desc:"Diseo y fabricacin de un sistema de separacin ciclnica en acero inoxidable para ambientes corrosivos. Este mdulo permite la filtracin eficiente de partculas en suspensin para procesos industriales de alta pureza.",auth_login_title:"Iniciar Sesin",auth_register_title:"Registrarse",auth_email:"Correo Electrnico",auth_pass:"Contrasea",auth_name:"Nombre Completo",auth_admin_key:"Clave de Administrador",auth_btn_login:"ENTRAR",auth_btn_register:"REGISTRARME",auth_switch_to_register:"No tienes cuenta? Regstrate aqu",auth_switch_to_login:"Ya tienes cuenta? Inicia sesin",auth_admin_mode:"Modo Administrador",auth_back_home:"Volver al Inicio",btn_access:"ACCEDER",nav_profile:"Mi Perfil",nav_logout:"Cerrar Sesin",auth_reg_success:"Registro exitoso! Por favor revisa tu correo para verificar tu cuenta.",crud_add:"Aadir Nuevo Proyecto",crud_edit:"Editar",crud_delete:"Eliminar",crud_confirm:"Ests seguro que deseas eliminar esto?",welcome_user:"Bienvenido"},en:{nav_tools:"TOOLS",nav_calc:"Pipe Calculator",nav_gears:"Gear Calculation",nav_cad:"CAD Viewer",nav_works:"PROJECTS",hero_title:"Engineering Projects",hero_desc:"We simplify technical processes with precision. Access our suite of tools from the top menu.",contact_title:"Direct Contact",contact_desc:"Do you have a technical query, suggestion about our tools, or require personalized assistance? Use the form to send a direct message to our administration.",input_email:"Your Email Address",input_msg:"Write your message...",btn_send:"SEND",footer_rights:" 2024 DESPUX. All rights reserved.",footer_dev:"Developed and maintained by Marcos Despujos.",work_tag:"STRUCTURAL ENGINEERING",work_title:"Structural Integrity Analysis",work_desc:"Implementation of advanced algorithms for calculating material resistance in critical infrastructure. This project uses 3D modeling and real-time stress simulations to predict failure points and optimize preventive maintenance.",work_btn:"VIEW DETAILS",work2_tag:"MECHANICAL DESIGN",work2_title:"Stainless Cyclone Separator",work2_desc:"Design and manufacture of a stainless steel cyclonic separation system for corrosive environments. This module enables efficient filtration of suspended particles for high-purity industrial processes.",auth_login_title:"Login",auth_register_title:"Register",auth_email:"Email Address",auth_pass:"Password",auth_name:"Full Name",auth_admin_key:"Admin Key",auth_btn_login:"LOGIN",auth_btn_register:"REGISTER",auth_switch_to_register:"No account? Register here",auth_switch_to_login:"Already have an account? Login",auth_admin_mode:"Admin Mode",auth_back_home:"Back to Home",btn_access:"ACCESS",nav_profile:"My Profile",nav_logout:"Log Out",auth_reg_success:"Registration Successful! Please check your email to verify your account.",crud_add:"Add New Project",crud_edit:"Edit",crud_delete:"Delete",crud_confirm:"Are you sure you want to delete this?",welcome_user:"Welcome"},de:{nav_tools:"WERKZEUGE",nav_calc:"Rohrrechner",nav_gears:"Zahnradberechnung",nav_cad:"CAD-Betrachter",nav_works:"PROJEKTE",hero_title:"Ingenieurprojekte",hero_desc:"Wir vereinfachen technische Prozesse mit Przision. Greifen Sie ber das obere Men auf unsere Tool-Suite zu.",contact_title:"Direkter Kontakt",contact_desc:"Haben Sie eine technische Frage, einen Vorschlag zu unseren Tools oder bentigen Sie persnliche Untersttzung? Nutzen Sie das Formular, um eine direkte Nachricht an unsere Verwaltung.",input_email:"Ihre E-Mail-Adresse",input_msg:"Schreiben Sie Ihre Nachricht...",btn_send:"SENDEN",footer_rights:" 2024 DESPUX. Alle Rechte vorbehalten.",footer_dev:"Entwickelt und gepflegt von Marcos Despujos.",work_tag:"BAUINGENIEURWESEN",work_title:"Analyse der Strukturintegritt",work_desc:"Implementierung fortschrittlicher Algorithmen zur Berechnung der Materialbestndigkeit in kritischen Infrastrukturen. Dieses Projekt nutzt 3D-Modellierung und Echtzeit-Belastungssimulationen, um Fehlerstellen vorherzusagen.",work_btn:"DETAILS ANZEIGEN",work2_tag:"MECHANISCHES DESIGN",work2_title:"Edelstahl-Zyklonabscheider",work2_desc:"Konstruktion und Fertigung eines Zyklonabscheidesystems aus Edelstahl fr korrosive Umgebungen. Dieses Modul ermglicht die effiziente Filtration von Schwebeteilchen fr hochreine industrielle Prozesse.",auth_login_title:"Anmelden",auth_register_title:"Registrieren",auth_email:"E-Mail-Adresse",auth_pass:"Passwort",auth_name:"Vollstndiger Name",auth_admin_key:"Adminschlssel",auth_btn_login:"ANMELDEN",auth_btn_register:"REGISTRIEREN",auth_switch_to_register:"Kein Konto? Hier registrieren",auth_switch_to_login:"Bereits ein Konto? Anmelden",auth_admin_mode:"Administratormodus",auth_back_home:"Zurck zur Startseite",btn_access:"ZUGRIFF",nav_profile:"mein Profil",nav_logout:"Abmelden",auth_reg_success:"Registrierung erfolgreich! Bitte berprfen Sie Ihre E-Mails, um Ihr Konto zu besttigen.",crud_add:"Neues Projekt hinzufgen",crud_edit:"Bearbeiten",crud_delete:"Lschen",crud_confirm:"Sind Sie sicher, dass Sie dies lschen mchten?",welcome_user:"Willkommen"}},uj=()=>{const[i,e]=re.useState("es"),[t,n]=re.useState("home"),[a,s]=re.useState(null),[l,u]=re.useState(!1);re.useEffect(()=>{document.documentElement.classList.remove("dark"),localStorage.removeItem("theme")},[]),re.useEffect(()=>{const{data:g}=Hn.auth.onAuthStateChange(async(_,b)=>{var x,T;s((b==null?void 0:b.user)??null),_==="SIGNED_IN"?(((T=(x=b==null?void 0:b.user)==null?void 0:x.email)==null?void 0:T.toLowerCase())==="despux@gmail.com"&&u(!0),n("home")):_==="SIGNED_OUT"&&(u(!1),n("home"))});Hn.auth.getSession().then(({data:{session:_}})=>{s((_==null?void 0:_.user)??null)});const y=_=>{n(_.detail)};return window.addEventListener("navigate",y),()=>{g==null||g.subscription.unsubscribe(),window.removeEventListener("navigate",y)}},[]);const d=cj[i],p=()=>{switch(t){case"home":return q.jsx(yT,{t:d,onAccess:()=>n("auth"),user:a});case"works":return q.jsx(R4,{t:d,isVisible:!0,isAdmin:l});case"auth":return q.jsx(O4,{t:d,isVisible:!0,onBack:()=>n("home"),isAdmin:l,setIsAdmin:u});case"profile":return q.jsx(tI,{user:a,isVisible:!0});case"project_request":return q.jsx(sj,{t:d,user:a,onBack:()=>n("home")});case"admin_requests":return q.jsx(oj,{t:d,onBack:()=>n("home")});default:return q.jsx(yT,{t:d,onAccess:()=>n("auth"),user:a})}};return q.jsxs("div",{className:"flex flex-col w-screen h-screen overflow-hidden bg-transparent transition-colors duration-300",children:[q.jsx(lj,{theme:"light"}),q.jsx(C4,{t:d,currentLang:i,setLanguage:e,currentView:["home","works","auth","profile","project_request","admin_requests"].includes(t)?t:"home",setView:g=>n(g),user:a}),q.jsx("main",{className:"flex-1 w-full h-full relative overflow-hidden z-10",children:p()})]})},fD=document.getElementById("root");if(!fD)throw new Error("Could not find root element to mount to");const hj=mU.createRoot(fD);hj.render(q.jsx(EE.StrictMode,{children:q.jsx(uj,{})}));
